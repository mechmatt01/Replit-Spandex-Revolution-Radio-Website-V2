var Km=r=>{throw TypeError(r)};var fu=(r,e,t)=>e.has(r)||Km("Cannot "+t);var D=(r,e,t)=>(fu(r,e,"read from private field"),t?t.call(r):e.get(r)),ne=(r,e,t)=>e.has(r)?Km("Cannot add the same private member more than once"):e instanceof WeakSet?e.add(r):e.set(r,t),Q=(r,e,t,n)=>(fu(r,e,"write to private field"),n?n.call(r,t):e.set(r,t),t),ge=(r,e,t)=>(fu(r,e,"access private method"),t);var Ma=(r,e,t,n)=>({set _(s){Q(r,e,s,t)},get _(){return D(r,e,n)}});import{_ as nh,r as p,R as QT,s as YT,j as o,P as De,c as $n,a as XT,u as at,B as JT,b as Do,d as kr,e as _e,f as or,g as ZT,h as eE,i as qy,k as Hy,l as tE,m as tc,D as Wy,C as Gy,n as Ky,o as sh,p as Qy,A as oh,q as Yy,S as rE,t as Xy,I as Jy,F as Zy,v as ex,w as tx,x as rx,y as nE,z as nx,E as sx,G as ox,H as ix,J as ax,L as lx,K as cx,M as sE,T as oE,N as ux,O as ih,Q as dx,W as iE,U as ah,V as lh,X as ch,Y as uh,Z as hx,$ as aE,a0 as lE,a1 as cE,a2 as uE,a3 as dE,a4 as hE,a5 as fx,a6 as mx,a7 as px,a8 as fE,a9 as mE}from"./ui-Co9B5ooE.js";import{a as pE,g as gE}from"./vendor-BtP0CW_r.js";(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const s of document.querySelectorAll('link[rel="modulepreload"]'))n(s);new MutationObserver(s=>{for(const i of s)if(i.type==="childList")for(const a of i.addedNodes)a.tagName==="LINK"&&a.rel==="modulepreload"&&n(a)}).observe(document,{childList:!0,subtree:!0});function t(s){const i={};return s.integrity&&(i.integrity=s.integrity),s.referrerPolicy&&(i.referrerPolicy=s.referrerPolicy),s.crossOrigin==="use-credentials"?i.credentials="include":s.crossOrigin==="anonymous"?i.credentials="omit":i.credentials="same-origin",i}function n(s){if(s.ep)return;s.ep=!0;const i=t(s);fetch(s.href,i)}})();var Da={},Qm;function yE(){if(Qm)return Da;Qm=1;var r=pE();return Da.createRoot=r.createRoot,Da.hydrateRoot=r.hydrateRoot,Da}var xE=yE();const bE=gE(xE),vE=()=>{};var Ym={};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const gx=function(r){const e=[];let t=0;for(let n=0;n<r.length;n++){let s=r.charCodeAt(n);s<128?e[t++]=s:s<2048?(e[t++]=s>>6|192,e[t++]=s&63|128):(s&64512)===55296&&n+1<r.length&&(r.charCodeAt(n+1)&64512)===56320?(s=65536+((s&1023)<<10)+(r.charCodeAt(++n)&1023),e[t++]=s>>18|240,e[t++]=s>>12&63|128,e[t++]=s>>6&63|128,e[t++]=s&63|128):(e[t++]=s>>12|224,e[t++]=s>>6&63|128,e[t++]=s&63|128)}return e},wE=function(r){const e=[];let t=0,n=0;for(;t<r.length;){const s=r[t++];if(s<128)e[n++]=String.fromCharCode(s);else if(s>191&&s<224){const i=r[t++];e[n++]=String.fromCharCode((s&31)<<6|i&63)}else if(s>239&&s<365){const i=r[t++],a=r[t++],l=r[t++],u=((s&7)<<18|(i&63)<<12|(a&63)<<6|l&63)-65536;e[n++]=String.fromCharCode(55296+(u>>10)),e[n++]=String.fromCharCode(56320+(u&1023))}else{const i=r[t++],a=r[t++];e[n++]=String.fromCharCode((s&15)<<12|(i&63)<<6|a&63)}}return e.join("")},yx={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:typeof atob=="function",encodeByteArray(r,e){if(!Array.isArray(r))throw Error("encodeByteArray takes an array as a parameter");this.init_();const t=e?this.byteToCharMapWebSafe_:this.byteToCharMap_,n=[];for(let s=0;s<r.length;s+=3){const i=r[s],a=s+1<r.length,l=a?r[s+1]:0,u=s+2<r.length,d=u?r[s+2]:0,h=i>>2,m=(i&3)<<4|l>>4;let g=(l&15)<<2|d>>6,x=d&63;u||(x=64,a||(g=64)),n.push(t[h],t[m],t[g],t[x])}return n.join("")},encodeString(r,e){return this.HAS_NATIVE_SUPPORT&&!e?btoa(r):this.encodeByteArray(gx(r),e)},decodeString(r,e){return this.HAS_NATIVE_SUPPORT&&!e?atob(r):wE(this.decodeStringToByteArray(r,e))},decodeStringToByteArray(r,e){this.init_();const t=e?this.charToByteMapWebSafe_:this.charToByteMap_,n=[];for(let s=0;s<r.length;){const i=t[r.charAt(s++)],l=s<r.length?t[r.charAt(s)]:0;++s;const d=s<r.length?t[r.charAt(s)]:64;++s;const m=s<r.length?t[r.charAt(s)]:64;if(++s,i==null||l==null||d==null||m==null)throw new _E;const g=i<<2|l>>4;if(n.push(g),d!==64){const x=l<<4&240|d>>2;if(n.push(x),m!==64){const S=d<<6&192|m;n.push(S)}}}return n},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let r=0;r<this.ENCODED_VALS.length;r++)this.byteToCharMap_[r]=this.ENCODED_VALS.charAt(r),this.charToByteMap_[this.byteToCharMap_[r]]=r,this.byteToCharMapWebSafe_[r]=this.ENCODED_VALS_WEBSAFE.charAt(r),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[r]]=r,r>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(r)]=r,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(r)]=r)}}};class _E extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}}const TE=function(r){const e=gx(r);return yx.encodeByteArray(e,!0)},pl=function(r){return TE(r).replace(/\./g,"")},xx=function(r){try{return yx.decodeString(r,!0)}catch(e){console.error("base64Decode failed: ",e)}return null};/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function EE(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("Unable to locate global object.")}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const NE=()=>EE().__FIREBASE_DEFAULTS__,CE=()=>{if(typeof process>"u"||typeof Ym>"u")return;const r=Ym.__FIREBASE_DEFAULTS__;if(r)return JSON.parse(r)},kE=()=>{if(typeof document>"u")return;let r;try{r=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch{return}const e=r&&xx(r[1]);return e&&JSON.parse(e)},rc=()=>{try{return vE()||NE()||CE()||kE()}catch(r){console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${r}`);return}},bx=r=>{var e,t;return(t=(e=rc())===null||e===void 0?void 0:e.emulatorHosts)===null||t===void 0?void 0:t[r]},vx=r=>{const e=bx(r);if(!e)return;const t=e.lastIndexOf(":");if(t<=0||t+1===e.length)throw new Error(`Invalid host ${e} with no separate hostname and port!`);const n=parseInt(e.substring(t+1),10);return e[0]==="["?[e.substring(1,t-1),n]:[e.substring(0,t),n]},wx=()=>{var r;return(r=rc())===null||r===void 0?void 0:r.config},_x=r=>{var e;return(e=rc())===null||e===void 0?void 0:e[`_${r}`]};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class SE{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((e,t)=>{this.resolve=e,this.reject=t})}wrapCallback(e){return(t,n)=>{t?this.reject(t):this.resolve(n),typeof e=="function"&&(this.promise.catch(()=>{}),e.length===1?e(t):e(t,n))}}}/**
 * @license
 * Copyright 2025 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Bn(r){try{return(r.startsWith("http://")||r.startsWith("https://")?new URL(r).hostname:r).endsWith(".cloudworkstations.dev")}catch{return!1}}async function dh(r){return(await fetch(r,{credentials:"include"})).ok}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Tx(r,e){if(r.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');const t={alg:"none",type:"JWT"},n=e||"demo-project",s=r.iat||0,i=r.sub||r.user_id;if(!i)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");const a=Object.assign({iss:`https://securetoken.google.com/${n}`,aud:n,iat:s,exp:s+3600,auth_time:s,sub:i,user_id:i,firebase:{sign_in_provider:"custom",identities:{}}},r);return[pl(JSON.stringify(t)),pl(JSON.stringify(a)),""].join(".")}const wi={};function jE(){const r={prod:[],emulator:[]};for(const e of Object.keys(wi))wi[e]?r.emulator.push(e):r.prod.push(e);return r}function IE(r){let e=document.getElementById(r),t=!1;return e||(e=document.createElement("div"),e.setAttribute("id",r),t=!0),{created:t,element:e}}let Xm=!1;function hh(r,e){if(typeof window>"u"||typeof document>"u"||!Bn(window.location.host)||wi[r]===e||wi[r]||Xm)return;wi[r]=e;function t(g){return`__firebase__banner__${g}`}const n="__firebase__banner",i=jE().prod.length>0;function a(){const g=document.getElementById(n);g&&g.remove()}function l(g){g.style.display="flex",g.style.background="#7faaf0",g.style.position="fixed",g.style.bottom="5px",g.style.left="5px",g.style.padding=".5em",g.style.borderRadius="5px",g.style.alignItems="center"}function u(g,x){g.setAttribute("width","24"),g.setAttribute("id",x),g.setAttribute("height","24"),g.setAttribute("viewBox","0 0 24 24"),g.setAttribute("fill","none"),g.style.marginLeft="-6px"}function d(){const g=document.createElement("span");return g.style.cursor="pointer",g.style.marginLeft="16px",g.style.fontSize="24px",g.innerHTML=" &times;",g.onclick=()=>{Xm=!0,a()},g}function h(g,x){g.setAttribute("id",x),g.innerText="Learn more",g.href="https://firebase.google.com/docs/studio/preview-apps#preview-backend",g.setAttribute("target","__blank"),g.style.paddingLeft="5px",g.style.textDecoration="underline"}function m(){const g=IE(n),x=t("text"),S=document.getElementById(x)||document.createElement("span"),b=t("learnmore"),v=document.getElementById(b)||document.createElement("a"),E=t("preprendIcon"),T=document.getElementById(E)||document.createElementNS("http://www.w3.org/2000/svg","svg");if(g.created){const N=g.element;l(N),h(v,b);const P=d();u(T,E),N.append(T,S,v,P),document.body.appendChild(N)}i?(S.innerText="Preview backend disconnected.",T.innerHTML=`<g clip-path="url(#clip0_6013_33858)">
<path d="M4.8 17.6L12 5.6L19.2 17.6H4.8ZM6.91667 16.4H17.0833L12 7.93333L6.91667 16.4ZM12 15.6C12.1667 15.6 12.3056 15.5444 12.4167 15.4333C12.5389 15.3111 12.6 15.1667 12.6 15C12.6 14.8333 12.5389 14.6944 12.4167 14.5833C12.3056 14.4611 12.1667 14.4 12 14.4C11.8333 14.4 11.6889 14.4611 11.5667 14.5833C11.4556 14.6944 11.4 14.8333 11.4 15C11.4 15.1667 11.4556 15.3111 11.5667 15.4333C11.6889 15.5444 11.8333 15.6 12 15.6ZM11.4 13.6H12.6V10.4H11.4V13.6Z" fill="#212121"/>
</g>
<defs>
<clipPath id="clip0_6013_33858">
<rect width="24" height="24" fill="white"/>
</clipPath>
</defs>`):(T.innerHTML=`<g clip-path="url(#clip0_6083_34804)">
<path d="M11.4 15.2H12.6V11.2H11.4V15.2ZM12 10C12.1667 10 12.3056 9.94444 12.4167 9.83333C12.5389 9.71111 12.6 9.56667 12.6 9.4C12.6 9.23333 12.5389 9.09444 12.4167 8.98333C12.3056 8.86111 12.1667 8.8 12 8.8C11.8333 8.8 11.6889 8.86111 11.5667 8.98333C11.4556 9.09444 11.4 9.23333 11.4 9.4C11.4 9.56667 11.4556 9.71111 11.5667 9.83333C11.6889 9.94444 11.8333 10 12 10ZM12 18.4C11.1222 18.4 10.2944 18.2333 9.51667 17.9C8.73889 17.5667 8.05556 17.1111 7.46667 16.5333C6.88889 15.9444 6.43333 15.2611 6.1 14.4833C5.76667 13.7056 5.6 12.8778 5.6 12C5.6 11.1111 5.76667 10.2833 6.1 9.51667C6.43333 8.73889 6.88889 8.06111 7.46667 7.48333C8.05556 6.89444 8.73889 6.43333 9.51667 6.1C10.2944 5.76667 11.1222 5.6 12 5.6C12.8889 5.6 13.7167 5.76667 14.4833 6.1C15.2611 6.43333 15.9389 6.89444 16.5167 7.48333C17.1056 8.06111 17.5667 8.73889 17.9 9.51667C18.2333 10.2833 18.4 11.1111 18.4 12C18.4 12.8778 18.2333 13.7056 17.9 14.4833C17.5667 15.2611 17.1056 15.9444 16.5167 16.5333C15.9389 17.1111 15.2611 17.5667 14.4833 17.9C13.7167 18.2333 12.8889 18.4 12 18.4ZM12 17.2C13.4444 17.2 14.6722 16.6944 15.6833 15.6833C16.6944 14.6722 17.2 13.4444 17.2 12C17.2 10.5556 16.6944 9.32778 15.6833 8.31667C14.6722 7.30555 13.4444 6.8 12 6.8C10.5556 6.8 9.32778 7.30555 8.31667 8.31667C7.30556 9.32778 6.8 10.5556 6.8 12C6.8 13.4444 7.30556 14.6722 8.31667 15.6833C9.32778 16.6944 10.5556 17.2 12 17.2Z" fill="#212121"/>
</g>
<defs>
<clipPath id="clip0_6083_34804">
<rect width="24" height="24" fill="white"/>
</clipPath>
</defs>`,S.innerText="Preview backend running in this workspace."),S.setAttribute("id",x)}document.readyState==="loading"?window.addEventListener("DOMContentLoaded",m):m()}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function wt(){return typeof navigator<"u"&&typeof navigator.userAgent=="string"?navigator.userAgent:""}function AE(){return typeof window<"u"&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(wt())}function RE(){var r;const e=(r=rc())===null||r===void 0?void 0:r.forceEnvironment;if(e==="node")return!0;if(e==="browser")return!1;try{return Object.prototype.toString.call(global.process)==="[object process]"}catch{return!1}}function PE(){return typeof navigator<"u"&&navigator.userAgent==="Cloudflare-Workers"}function ME(){const r=typeof chrome=="object"?chrome.runtime:typeof browser=="object"?browser.runtime:void 0;return typeof r=="object"&&r.id!==void 0}function DE(){return typeof navigator=="object"&&navigator.product==="ReactNative"}function OE(){const r=wt();return r.indexOf("MSIE ")>=0||r.indexOf("Trident/")>=0}function LE(){return!RE()&&!!navigator.userAgent&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")}function Ex(){try{return typeof indexedDB=="object"}catch{return!1}}function Nx(){return new Promise((r,e)=>{try{let t=!0;const n="validate-browser-context-for-indexeddb-analytics-module",s=self.indexedDB.open(n);s.onsuccess=()=>{s.result.close(),t||self.indexedDB.deleteDatabase(n),r(!0)},s.onupgradeneeded=()=>{t=!1},s.onerror=()=>{var i;e(((i=s.error)===null||i===void 0?void 0:i.message)||"")}}catch(t){e(t)}})}function VE(){return!(typeof navigator>"u"||!navigator.cookieEnabled)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const FE="FirebaseError";class hr extends Error{constructor(e,t,n){super(t),this.code=e,this.customData=n,this.name=FE,Object.setPrototypeOf(this,hr.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,Ss.prototype.create)}}class Ss{constructor(e,t,n){this.service=e,this.serviceName=t,this.errors=n}create(e,...t){const n=t[0]||{},s=`${this.service}/${e}`,i=this.errors[e],a=i?UE(i,n):"Error",l=`${this.serviceName}: ${a} (${s}).`;return new hr(s,l,n)}}function UE(r,e){return r.replace($E,(t,n)=>{const s=e[n];return s!=null?String(s):`<${n}?>`})}const $E=/\{\$([^}]+)}/g;function BE(r){for(const e in r)if(Object.prototype.hasOwnProperty.call(r,e))return!1;return!0}function ys(r,e){if(r===e)return!0;const t=Object.keys(r),n=Object.keys(e);for(const s of t){if(!n.includes(s))return!1;const i=r[s],a=e[s];if(Jm(i)&&Jm(a)){if(!ys(i,a))return!1}else if(i!==a)return!1}for(const s of n)if(!t.includes(s))return!1;return!0}function Jm(r){return r!==null&&typeof r=="object"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Xi(r){const e=[];for(const[t,n]of Object.entries(r))Array.isArray(n)?n.forEach(s=>{e.push(encodeURIComponent(t)+"="+encodeURIComponent(s))}):e.push(encodeURIComponent(t)+"="+encodeURIComponent(n));return e.length?"&"+e.join("&"):""}function pi(r){const e={};return r.replace(/^\?/,"").split("&").forEach(n=>{if(n){const[s,i]=n.split("=");e[decodeURIComponent(s)]=decodeURIComponent(i)}}),e}function gi(r){const e=r.indexOf("?");if(!e)return"";const t=r.indexOf("#",e);return r.substring(e,t>0?t:void 0)}function zE(r,e){const t=new qE(r,e);return t.subscribe.bind(t)}class qE{constructor(e,t){this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=t,this.task.then(()=>{e(this)}).catch(n=>{this.error(n)})}next(e){this.forEachObserver(t=>{t.next(e)})}error(e){this.forEachObserver(t=>{t.error(e)}),this.close(e)}complete(){this.forEachObserver(e=>{e.complete()}),this.close()}subscribe(e,t,n){let s;if(e===void 0&&t===void 0&&n===void 0)throw new Error("Missing Observer.");HE(e,["next","error","complete"])?s=e:s={next:e,error:t,complete:n},s.next===void 0&&(s.next=mu),s.error===void 0&&(s.error=mu),s.complete===void 0&&(s.complete=mu);const i=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then(()=>{try{this.finalError?s.error(this.finalError):s.complete()}catch{}}),this.observers.push(s),i}unsubscribeOne(e){this.observers===void 0||this.observers[e]===void 0||(delete this.observers[e],this.observerCount-=1,this.observerCount===0&&this.onNoObservers!==void 0&&this.onNoObservers(this))}forEachObserver(e){if(!this.finalized)for(let t=0;t<this.observers.length;t++)this.sendOne(t,e)}sendOne(e,t){this.task.then(()=>{if(this.observers!==void 0&&this.observers[e]!==void 0)try{t(this.observers[e])}catch(n){typeof console<"u"&&console.error&&console.error(n)}})}close(e){this.finalized||(this.finalized=!0,e!==void 0&&(this.finalError=e),this.task.then(()=>{this.observers=void 0,this.onNoObservers=void 0}))}}function HE(r,e){if(typeof r!="object"||r===null)return!1;for(const t of e)if(t in r&&typeof r[t]=="function")return!0;return!1}function mu(){}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Me(r){return r&&r._delegate?r._delegate:r}class lr{constructor(e,t,n){this.name=e,this.instanceFactory=t,this.type=n,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(e){return this.instantiationMode=e,this}setMultipleInstances(e){return this.multipleInstances=e,this}setServiceProps(e){return this.serviceProps=e,this}setInstanceCreatedCallback(e){return this.onInstanceCreated=e,this}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const es="[DEFAULT]";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let WE=class{constructor(e,t){this.name=e,this.container=t,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(e){const t=this.normalizeInstanceIdentifier(e);if(!this.instancesDeferred.has(t)){const n=new SE;if(this.instancesDeferred.set(t,n),this.isInitialized(t)||this.shouldAutoInitialize())try{const s=this.getOrInitializeService({instanceIdentifier:t});s&&n.resolve(s)}catch{}}return this.instancesDeferred.get(t).promise}getImmediate(e){var t;const n=this.normalizeInstanceIdentifier(e==null?void 0:e.identifier),s=(t=e==null?void 0:e.optional)!==null&&t!==void 0?t:!1;if(this.isInitialized(n)||this.shouldAutoInitialize())try{return this.getOrInitializeService({instanceIdentifier:n})}catch(i){if(s)return null;throw i}else{if(s)return null;throw Error(`Service ${this.name} is not available`)}}getComponent(){return this.component}setComponent(e){if(e.name!==this.name)throw Error(`Mismatching Component ${e.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=e,!!this.shouldAutoInitialize()){if(KE(e))try{this.getOrInitializeService({instanceIdentifier:es})}catch{}for(const[t,n]of this.instancesDeferred.entries()){const s=this.normalizeInstanceIdentifier(t);try{const i=this.getOrInitializeService({instanceIdentifier:s});n.resolve(i)}catch{}}}}clearInstance(e=es){this.instancesDeferred.delete(e),this.instancesOptions.delete(e),this.instances.delete(e)}async delete(){const e=Array.from(this.instances.values());await Promise.all([...e.filter(t=>"INTERNAL"in t).map(t=>t.INTERNAL.delete()),...e.filter(t=>"_delete"in t).map(t=>t._delete())])}isComponentSet(){return this.component!=null}isInitialized(e=es){return this.instances.has(e)}getOptions(e=es){return this.instancesOptions.get(e)||{}}initialize(e={}){const{options:t={}}=e,n=this.normalizeInstanceIdentifier(e.instanceIdentifier);if(this.isInitialized(n))throw Error(`${this.name}(${n}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);const s=this.getOrInitializeService({instanceIdentifier:n,options:t});for(const[i,a]of this.instancesDeferred.entries()){const l=this.normalizeInstanceIdentifier(i);n===l&&a.resolve(s)}return s}onInit(e,t){var n;const s=this.normalizeInstanceIdentifier(t),i=(n=this.onInitCallbacks.get(s))!==null&&n!==void 0?n:new Set;i.add(e),this.onInitCallbacks.set(s,i);const a=this.instances.get(s);return a&&e(a,s),()=>{i.delete(e)}}invokeOnInitCallbacks(e,t){const n=this.onInitCallbacks.get(t);if(n)for(const s of n)try{s(e,t)}catch{}}getOrInitializeService({instanceIdentifier:e,options:t={}}){let n=this.instances.get(e);if(!n&&this.component&&(n=this.component.instanceFactory(this.container,{instanceIdentifier:GE(e),options:t}),this.instances.set(e,n),this.instancesOptions.set(e,t),this.invokeOnInitCallbacks(n,e),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,e,n)}catch{}return n||null}normalizeInstanceIdentifier(e=es){return this.component?this.component.multipleInstances?e:es:e}shouldAutoInitialize(){return!!this.component&&this.component.instantiationMode!=="EXPLICIT"}};function GE(r){return r===es?void 0:r}function KE(r){return r.instantiationMode==="EAGER"}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class QE{constructor(e){this.name=e,this.providers=new Map}addComponent(e){const t=this.getProvider(e.name);if(t.isComponentSet())throw new Error(`Component ${e.name} has already been registered with ${this.name}`);t.setComponent(e)}addOrOverwriteComponent(e){this.getProvider(e.name).isComponentSet()&&this.providers.delete(e.name),this.addComponent(e)}getProvider(e){if(this.providers.has(e))return this.providers.get(e);const t=new WE(e,this);return this.providers.set(e,t),t}getProviders(){return Array.from(this.providers.values())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var be;(function(r){r[r.DEBUG=0]="DEBUG",r[r.VERBOSE=1]="VERBOSE",r[r.INFO=2]="INFO",r[r.WARN=3]="WARN",r[r.ERROR=4]="ERROR",r[r.SILENT=5]="SILENT"})(be||(be={}));const YE={debug:be.DEBUG,verbose:be.VERBOSE,info:be.INFO,warn:be.WARN,error:be.ERROR,silent:be.SILENT},XE=be.INFO,JE={[be.DEBUG]:"log",[be.VERBOSE]:"log",[be.INFO]:"info",[be.WARN]:"warn",[be.ERROR]:"error"},ZE=(r,e,...t)=>{if(e<r.logLevel)return;const n=new Date().toISOString(),s=JE[e];if(s)console[s](`[${n}]  ${r.name}:`,...t);else throw new Error(`Attempted to log a message with an invalid logType (value: ${e})`)};class nc{constructor(e){this.name=e,this._logLevel=XE,this._logHandler=ZE,this._userLogHandler=null}get logLevel(){return this._logLevel}set logLevel(e){if(!(e in be))throw new TypeError(`Invalid value "${e}" assigned to \`logLevel\``);this._logLevel=e}setLogLevel(e){this._logLevel=typeof e=="string"?YE[e]:e}get logHandler(){return this._logHandler}set logHandler(e){if(typeof e!="function")throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=e}get userLogHandler(){return this._userLogHandler}set userLogHandler(e){this._userLogHandler=e}debug(...e){this._userLogHandler&&this._userLogHandler(this,be.DEBUG,...e),this._logHandler(this,be.DEBUG,...e)}log(...e){this._userLogHandler&&this._userLogHandler(this,be.VERBOSE,...e),this._logHandler(this,be.VERBOSE,...e)}info(...e){this._userLogHandler&&this._userLogHandler(this,be.INFO,...e),this._logHandler(this,be.INFO,...e)}warn(...e){this._userLogHandler&&this._userLogHandler(this,be.WARN,...e),this._logHandler(this,be.WARN,...e)}error(...e){this._userLogHandler&&this._userLogHandler(this,be.ERROR,...e),this._logHandler(this,be.ERROR,...e)}}const eN=(r,e)=>e.some(t=>r instanceof t);let Zm,ep;function tN(){return Zm||(Zm=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}function rN(){return ep||(ep=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}const Cx=new WeakMap,Gu=new WeakMap,kx=new WeakMap,pu=new WeakMap,fh=new WeakMap;function nN(r){const e=new Promise((t,n)=>{const s=()=>{r.removeEventListener("success",i),r.removeEventListener("error",a)},i=()=>{t(_n(r.result)),s()},a=()=>{n(r.error),s()};r.addEventListener("success",i),r.addEventListener("error",a)});return e.then(t=>{t instanceof IDBCursor&&Cx.set(t,r)}).catch(()=>{}),fh.set(e,r),e}function sN(r){if(Gu.has(r))return;const e=new Promise((t,n)=>{const s=()=>{r.removeEventListener("complete",i),r.removeEventListener("error",a),r.removeEventListener("abort",a)},i=()=>{t(),s()},a=()=>{n(r.error||new DOMException("AbortError","AbortError")),s()};r.addEventListener("complete",i),r.addEventListener("error",a),r.addEventListener("abort",a)});Gu.set(r,e)}let Ku={get(r,e,t){if(r instanceof IDBTransaction){if(e==="done")return Gu.get(r);if(e==="objectStoreNames")return r.objectStoreNames||kx.get(r);if(e==="store")return t.objectStoreNames[1]?void 0:t.objectStore(t.objectStoreNames[0])}return _n(r[e])},set(r,e,t){return r[e]=t,!0},has(r,e){return r instanceof IDBTransaction&&(e==="done"||e==="store")?!0:e in r}};function oN(r){Ku=r(Ku)}function iN(r){return r===IDBDatabase.prototype.transaction&&!("objectStoreNames"in IDBTransaction.prototype)?function(e,...t){const n=r.call(gu(this),e,...t);return kx.set(n,e.sort?e.sort():[e]),_n(n)}:rN().includes(r)?function(...e){return r.apply(gu(this),e),_n(Cx.get(this))}:function(...e){return _n(r.apply(gu(this),e))}}function aN(r){return typeof r=="function"?iN(r):(r instanceof IDBTransaction&&sN(r),eN(r,tN())?new Proxy(r,Ku):r)}function _n(r){if(r instanceof IDBRequest)return nN(r);if(pu.has(r))return pu.get(r);const e=aN(r);return e!==r&&(pu.set(r,e),fh.set(e,r)),e}const gu=r=>fh.get(r);function Sx(r,e,{blocked:t,upgrade:n,blocking:s,terminated:i}={}){const a=indexedDB.open(r,e),l=_n(a);return n&&a.addEventListener("upgradeneeded",u=>{n(_n(a.result),u.oldVersion,u.newVersion,_n(a.transaction),u)}),t&&a.addEventListener("blocked",u=>t(u.oldVersion,u.newVersion,u)),l.then(u=>{i&&u.addEventListener("close",()=>i()),s&&u.addEventListener("versionchange",d=>s(d.oldVersion,d.newVersion,d))}).catch(()=>{}),l}const lN=["get","getKey","getAll","getAllKeys","count"],cN=["put","add","delete","clear"],yu=new Map;function tp(r,e){if(!(r instanceof IDBDatabase&&!(e in r)&&typeof e=="string"))return;if(yu.get(e))return yu.get(e);const t=e.replace(/FromIndex$/,""),n=e!==t,s=cN.includes(t);if(!(t in(n?IDBIndex:IDBObjectStore).prototype)||!(s||lN.includes(t)))return;const i=async function(a,...l){const u=this.transaction(a,s?"readwrite":"readonly");let d=u.store;return n&&(d=d.index(l.shift())),(await Promise.all([d[t](...l),s&&u.done]))[0]};return yu.set(e,i),i}oN(r=>({...r,get:(e,t,n)=>tp(e,t)||r.get(e,t,n),has:(e,t)=>!!tp(e,t)||r.has(e,t)}));/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class uN{constructor(e){this.container=e}getPlatformInfoString(){return this.container.getProviders().map(t=>{if(dN(t)){const n=t.getImmediate();return`${n.library}/${n.version}`}else return null}).filter(t=>t).join(" ")}}function dN(r){const e=r.getComponent();return(e==null?void 0:e.type)==="VERSION"}const Qu="@firebase/app",rp="0.13.2";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Br=new nc("@firebase/app"),hN="@firebase/app-compat",fN="@firebase/analytics-compat",mN="@firebase/analytics",pN="@firebase/app-check-compat",gN="@firebase/app-check",yN="@firebase/auth",xN="@firebase/auth-compat",bN="@firebase/database",vN="@firebase/data-connect",wN="@firebase/database-compat",_N="@firebase/functions",TN="@firebase/functions-compat",EN="@firebase/installations",NN="@firebase/installations-compat",CN="@firebase/messaging",kN="@firebase/messaging-compat",SN="@firebase/performance",jN="@firebase/performance-compat",IN="@firebase/remote-config",AN="@firebase/remote-config-compat",RN="@firebase/storage",PN="@firebase/storage-compat",MN="@firebase/firestore",DN="@firebase/ai",ON="@firebase/firestore-compat",LN="firebase",VN="11.10.0";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Yu="[DEFAULT]",FN={[Qu]:"fire-core",[hN]:"fire-core-compat",[mN]:"fire-analytics",[fN]:"fire-analytics-compat",[gN]:"fire-app-check",[pN]:"fire-app-check-compat",[yN]:"fire-auth",[xN]:"fire-auth-compat",[bN]:"fire-rtdb",[vN]:"fire-data-connect",[wN]:"fire-rtdb-compat",[_N]:"fire-fn",[TN]:"fire-fn-compat",[EN]:"fire-iid",[NN]:"fire-iid-compat",[CN]:"fire-fcm",[kN]:"fire-fcm-compat",[SN]:"fire-perf",[jN]:"fire-perf-compat",[IN]:"fire-rc",[AN]:"fire-rc-compat",[RN]:"fire-gcs",[PN]:"fire-gcs-compat",[MN]:"fire-fst",[ON]:"fire-fst-compat",[DN]:"fire-vertex","fire-js":"fire-js",[LN]:"fire-js-all"};/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const gl=new Map,UN=new Map,Xu=new Map;function np(r,e){try{r.container.addComponent(e)}catch(t){Br.debug(`Component ${e.name} failed to register with FirebaseApp ${r.name}`,t)}}function Nr(r){const e=r.name;if(Xu.has(e))return Br.debug(`There were multiple attempts to register component ${e}.`),!1;Xu.set(e,r);for(const t of gl.values())np(t,r);for(const t of UN.values())np(t,r);return!0}function js(r,e){const t=r.container.getProvider("heartbeat").getImmediate({optional:!0});return t&&t.triggerHeartbeat(),r.container.getProvider(e)}function Pt(r){return r==null?!1:r.settings!==void 0}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const $N={"no-app":"No Firebase App '{$appName}' has been created - call initializeApp() first","bad-app-name":"Illegal App name: '{$appName}'","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","server-app-deleted":"Firebase Server App has been deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}.","finalization-registry-not-supported":"FirebaseServerApp deleteOnDeref field defined but the JS runtime does not support FinalizationRegistry.","invalid-server-app-environment":"FirebaseServerApp is not for use in browser environments."},Tn=new Ss("app","Firebase",$N);/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class BN{constructor(e,t,n){this._isDeleted=!1,this._options=Object.assign({},e),this._config=Object.assign({},t),this._name=t.name,this._automaticDataCollectionEnabled=t.automaticDataCollectionEnabled,this._container=n,this.container.addComponent(new lr("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(e){this.checkDestroyed(),this._automaticDataCollectionEnabled=e}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(e){this._isDeleted=e}checkDestroyed(){if(this.isDeleted)throw Tn.create("app-deleted",{appName:this._name})}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Is=VN;function Ju(r,e={}){let t=r;typeof e!="object"&&(e={name:e});const n=Object.assign({name:Yu,automaticDataCollectionEnabled:!0},e),s=n.name;if(typeof s!="string"||!s)throw Tn.create("bad-app-name",{appName:String(s)});if(t||(t=wx()),!t)throw Tn.create("no-options");const i=gl.get(s);if(i){if(ys(t,i.options)&&ys(n,i.config))return i;throw Tn.create("duplicate-app",{appName:s})}const a=new QE(s);for(const u of Xu.values())a.addComponent(u);const l=new BN(t,n,a);return gl.set(s,l),l}function sc(r=Yu){const e=gl.get(r);if(!e&&r===Yu&&wx())return Ju();if(!e)throw Tn.create("no-app",{appName:r});return e}function Ot(r,e,t){var n;let s=(n=FN[r])!==null&&n!==void 0?n:r;t&&(s+=`-${t}`);const i=s.match(/\s|\//),a=e.match(/\s|\//);if(i||a){const l=[`Unable to register library "${s}" with version "${e}":`];i&&l.push(`library name "${s}" contains illegal characters (whitespace or "/")`),i&&a&&l.push("and"),a&&l.push(`version name "${e}" contains illegal characters (whitespace or "/")`),Br.warn(l.join(" "));return}Nr(new lr(`${s}-version`,()=>({library:s,version:e}),"VERSION"))}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const zN="firebase-heartbeat-database",qN=1,Mi="firebase-heartbeat-store";let xu=null;function jx(){return xu||(xu=Sx(zN,qN,{upgrade:(r,e)=>{switch(e){case 0:try{r.createObjectStore(Mi)}catch(t){console.warn(t)}}}}).catch(r=>{throw Tn.create("idb-open",{originalErrorMessage:r.message})})),xu}async function HN(r){try{const t=(await jx()).transaction(Mi),n=await t.objectStore(Mi).get(Ix(r));return await t.done,n}catch(e){if(e instanceof hr)Br.warn(e.message);else{const t=Tn.create("idb-get",{originalErrorMessage:e==null?void 0:e.message});Br.warn(t.message)}}}async function sp(r,e){try{const n=(await jx()).transaction(Mi,"readwrite");await n.objectStore(Mi).put(e,Ix(r)),await n.done}catch(t){if(t instanceof hr)Br.warn(t.message);else{const n=Tn.create("idb-set",{originalErrorMessage:t==null?void 0:t.message});Br.warn(n.message)}}}function Ix(r){return`${r.name}!${r.options.appId}`}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const WN=1024,GN=30;class KN{constructor(e){this.container=e,this._heartbeatsCache=null;const t=this.container.getProvider("app").getImmediate();this._storage=new YN(t),this._heartbeatsCachePromise=this._storage.read().then(n=>(this._heartbeatsCache=n,n))}async triggerHeartbeat(){var e,t;try{const s=this.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),i=op();if(((e=this._heartbeatsCache)===null||e===void 0?void 0:e.heartbeats)==null&&(this._heartbeatsCache=await this._heartbeatsCachePromise,((t=this._heartbeatsCache)===null||t===void 0?void 0:t.heartbeats)==null)||this._heartbeatsCache.lastSentHeartbeatDate===i||this._heartbeatsCache.heartbeats.some(a=>a.date===i))return;if(this._heartbeatsCache.heartbeats.push({date:i,agent:s}),this._heartbeatsCache.heartbeats.length>GN){const a=XN(this._heartbeatsCache.heartbeats);this._heartbeatsCache.heartbeats.splice(a,1)}return this._storage.overwrite(this._heartbeatsCache)}catch(n){Br.warn(n)}}async getHeartbeatsHeader(){var e;try{if(this._heartbeatsCache===null&&await this._heartbeatsCachePromise,((e=this._heartbeatsCache)===null||e===void 0?void 0:e.heartbeats)==null||this._heartbeatsCache.heartbeats.length===0)return"";const t=op(),{heartbeatsToSend:n,unsentEntries:s}=QN(this._heartbeatsCache.heartbeats),i=pl(JSON.stringify({version:2,heartbeats:n}));return this._heartbeatsCache.lastSentHeartbeatDate=t,s.length>0?(this._heartbeatsCache.heartbeats=s,await this._storage.overwrite(this._heartbeatsCache)):(this._heartbeatsCache.heartbeats=[],this._storage.overwrite(this._heartbeatsCache)),i}catch(t){return Br.warn(t),""}}}function op(){return new Date().toISOString().substring(0,10)}function QN(r,e=WN){const t=[];let n=r.slice();for(const s of r){const i=t.find(a=>a.agent===s.agent);if(i){if(i.dates.push(s.date),ip(t)>e){i.dates.pop();break}}else if(t.push({agent:s.agent,dates:[s.date]}),ip(t)>e){t.pop();break}n=n.slice(1)}return{heartbeatsToSend:t,unsentEntries:n}}class YN{constructor(e){this.app=e,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}async runIndexedDBEnvironmentCheck(){return Ex()?Nx().then(()=>!0).catch(()=>!1):!1}async read(){if(await this._canUseIndexedDBPromise){const t=await HN(this.app);return t!=null&&t.heartbeats?t:{heartbeats:[]}}else return{heartbeats:[]}}async overwrite(e){var t;if(await this._canUseIndexedDBPromise){const s=await this.read();return sp(this.app,{lastSentHeartbeatDate:(t=e.lastSentHeartbeatDate)!==null&&t!==void 0?t:s.lastSentHeartbeatDate,heartbeats:e.heartbeats})}else return}async add(e){var t;if(await this._canUseIndexedDBPromise){const s=await this.read();return sp(this.app,{lastSentHeartbeatDate:(t=e.lastSentHeartbeatDate)!==null&&t!==void 0?t:s.lastSentHeartbeatDate,heartbeats:[...s.heartbeats,...e.heartbeats]})}else return}}function ip(r){return pl(JSON.stringify({version:2,heartbeats:r})).length}function XN(r){if(r.length===0)return-1;let e=0,t=r[0].date;for(let n=1;n<r.length;n++)r[n].date<t&&(t=r[n].date,e=n);return e}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function JN(r){Nr(new lr("platform-logger",e=>new uN(e),"PRIVATE")),Nr(new lr("heartbeat",e=>new KN(e),"PRIVATE")),Ot(Qu,rp,r),Ot(Qu,rp,"esm2017"),Ot("fire-js","")}JN("");var ZN="firebase",eC="11.10.0";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */Ot(ZN,eC,"app");function Ax(){return{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}}const tC=Ax,Rx=new Ss("auth","Firebase",Ax());/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const yl=new nc("@firebase/auth");function rC(r,...e){yl.logLevel<=be.WARN&&yl.warn(`Auth (${Is}): ${r}`,...e)}function Ya(r,...e){yl.logLevel<=be.ERROR&&yl.error(`Auth (${Is}): ${r}`,...e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Qt(r,...e){throw ph(r,...e)}function ar(r,...e){return ph(r,...e)}function mh(r,e,t){const n=Object.assign(Object.assign({},tC()),{[e]:t});return new Ss("auth","Firebase",n).create(e,{appName:r.name})}function Ur(r){return mh(r,"operation-not-supported-in-this-environment","Operations that alter the current user are not supported in conjunction with FirebaseServerApp")}function nC(r,e,t){const n=t;if(!(e instanceof n))throw n.name!==e.constructor.name&&Qt(r,"argument-error"),mh(r,"argument-error",`Type of ${e.constructor.name} does not match expected instance.Did you pass a reference from a different Auth SDK?`)}function ph(r,...e){if(typeof r!="string"){const t=e[0],n=[...e.slice(1)];return n[0]&&(n[0].appName=r.name),r._errorFactory.create(t,...n)}return Rx.create(r,...e)}function ie(r,e,...t){if(!r)throw ph(e,...t)}function Vr(r){const e="INTERNAL ASSERTION FAILED: "+r;throw Ya(e),new Error(e)}function zr(r,e){r||Vr(e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Zu(){var r;return typeof self<"u"&&((r=self.location)===null||r===void 0?void 0:r.href)||""}function sC(){return ap()==="http:"||ap()==="https:"}function ap(){var r;return typeof self<"u"&&((r=self.location)===null||r===void 0?void 0:r.protocol)||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function oC(){return typeof navigator<"u"&&navigator&&"onLine"in navigator&&typeof navigator.onLine=="boolean"&&(sC()||ME()||"connection"in navigator)?navigator.onLine:!0}function iC(){if(typeof navigator>"u")return null;const r=navigator;return r.languages&&r.languages[0]||r.language||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ji{constructor(e,t){this.shortDelay=e,this.longDelay=t,zr(t>e,"Short delay should be less than long delay!"),this.isMobile=AE()||DE()}get(){return oC()?this.isMobile?this.longDelay:this.shortDelay:Math.min(5e3,this.shortDelay)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function gh(r,e){zr(r.emulator,"Emulator should always be set here");const{url:t}=r.emulator;return e?`${t}${e.startsWith("/")?e.slice(1):e}`:t}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Px{static initialize(e,t,n){this.fetchImpl=e,t&&(this.headersImpl=t),n&&(this.responseImpl=n)}static fetch(){if(this.fetchImpl)return this.fetchImpl;if(typeof self<"u"&&"fetch"in self)return self.fetch;if(typeof globalThis<"u"&&globalThis.fetch)return globalThis.fetch;if(typeof fetch<"u")return fetch;Vr("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static headers(){if(this.headersImpl)return this.headersImpl;if(typeof self<"u"&&"Headers"in self)return self.Headers;if(typeof globalThis<"u"&&globalThis.Headers)return globalThis.Headers;if(typeof Headers<"u")return Headers;Vr("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static response(){if(this.responseImpl)return this.responseImpl;if(typeof self<"u"&&"Response"in self)return self.Response;if(typeof globalThis<"u"&&globalThis.Response)return globalThis.Response;if(typeof Response<"u")return Response;Vr("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const aC={CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_PASSWORD:"wrong-password",MISSING_PASSWORD:"missing-password",INVALID_LOGIN_CREDENTIALS:"invalid-credential",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_REQ_TYPE:"internal-error",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",PASSWORD_DOES_NOT_MEET_REQUIREMENTS:"password-does-not-meet-requirements",INVALID_CODE:"invalid-verification-code",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_SESSION_INFO:"missing-verification-id",SESSION_EXPIRED:"code-expired",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",BLOCKING_FUNCTION_ERROR_RESPONSE:"internal-error",RECAPTCHA_NOT_ENABLED:"recaptcha-not-enabled",MISSING_RECAPTCHA_TOKEN:"missing-recaptcha-token",INVALID_RECAPTCHA_TOKEN:"invalid-recaptcha-token",INVALID_RECAPTCHA_ACTION:"invalid-recaptcha-action",MISSING_CLIENT_TYPE:"missing-client-type",MISSING_RECAPTCHA_VERSION:"missing-recaptcha-version",INVALID_RECAPTCHA_VERSION:"invalid-recaptcha-version",INVALID_REQ_TYPE:"invalid-req-type"};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const lC=["/v1/accounts:signInWithCustomToken","/v1/accounts:signInWithEmailLink","/v1/accounts:signInWithIdp","/v1/accounts:signInWithPassword","/v1/accounts:signInWithPhoneNumber","/v1/token"],cC=new Ji(3e4,6e4);function zn(r,e){return r.tenantId&&!e.tenantId?Object.assign(Object.assign({},e),{tenantId:r.tenantId}):e}async function Wr(r,e,t,n,s={}){return Mx(r,s,async()=>{let i={},a={};n&&(e==="GET"?a=n:i={body:JSON.stringify(n)});const l=Xi(Object.assign({key:r.config.apiKey},a)).slice(1),u=await r._getAdditionalHeaders();u["Content-Type"]="application/json",r.languageCode&&(u["X-Firebase-Locale"]=r.languageCode);const d=Object.assign({method:e,headers:u},i);return PE()||(d.referrerPolicy="no-referrer"),r.emulatorConfig&&Bn(r.emulatorConfig.host)&&(d.credentials="include"),Px.fetch()(await Dx(r,r.config.apiHost,t,l),d)})}async function Mx(r,e,t){r._canInitEmulator=!1;const n=Object.assign(Object.assign({},aC),e);try{const s=new dC(r),i=await Promise.race([t(),s.promise]);s.clearNetworkTimeout();const a=await i.json();if("needConfirmation"in a)throw Oa(r,"account-exists-with-different-credential",a);if(i.ok&&!("errorMessage"in a))return a;{const l=i.ok?a.errorMessage:a.error.message,[u,d]=l.split(" : ");if(u==="FEDERATED_USER_ID_ALREADY_LINKED")throw Oa(r,"credential-already-in-use",a);if(u==="EMAIL_EXISTS")throw Oa(r,"email-already-in-use",a);if(u==="USER_DISABLED")throw Oa(r,"user-disabled",a);const h=n[u]||u.toLowerCase().replace(/[_\s]+/g,"-");if(d)throw mh(r,h,d);Qt(r,h)}}catch(s){if(s instanceof hr)throw s;Qt(r,"network-request-failed",{message:String(s)})}}async function Zi(r,e,t,n,s={}){const i=await Wr(r,e,t,n,s);return"mfaPendingCredential"in i&&Qt(r,"multi-factor-auth-required",{_serverResponse:i}),i}async function Dx(r,e,t,n){const s=`${e}${t}?${n}`,i=r,a=i.config.emulator?gh(r.config,s):`${r.config.apiScheme}://${s}`;return lC.includes(t)&&(await i._persistenceManagerAvailable,i._getPersistenceType()==="COOKIE")?i._getPersistence()._getFinalTarget(a).toString():a}function uC(r){switch(r){case"ENFORCE":return"ENFORCE";case"AUDIT":return"AUDIT";case"OFF":return"OFF";default:return"ENFORCEMENT_STATE_UNSPECIFIED"}}class dC{clearNetworkTimeout(){clearTimeout(this.timer)}constructor(e){this.auth=e,this.timer=null,this.promise=new Promise((t,n)=>{this.timer=setTimeout(()=>n(ar(this.auth,"network-request-failed")),cC.get())})}}function Oa(r,e,t){const n={appName:r.name};t.email&&(n.email=t.email),t.phoneNumber&&(n.phoneNumber=t.phoneNumber);const s=ar(r,e,n);return s.customData._tokenResponse=t,s}function lp(r){return r!==void 0&&r.enterprise!==void 0}class hC{constructor(e){if(this.siteKey="",this.recaptchaEnforcementState=[],e.recaptchaKey===void 0)throw new Error("recaptchaKey undefined");this.siteKey=e.recaptchaKey.split("/")[3],this.recaptchaEnforcementState=e.recaptchaEnforcementState}getProviderEnforcementState(e){if(!this.recaptchaEnforcementState||this.recaptchaEnforcementState.length===0)return null;for(const t of this.recaptchaEnforcementState)if(t.provider&&t.provider===e)return uC(t.enforcementState);return null}isProviderEnabled(e){return this.getProviderEnforcementState(e)==="ENFORCE"||this.getProviderEnforcementState(e)==="AUDIT"}isAnyProviderEnabled(){return this.isProviderEnabled("EMAIL_PASSWORD_PROVIDER")||this.isProviderEnabled("PHONE_PROVIDER")}}async function fC(r,e){return Wr(r,"GET","/v2/recaptchaConfig",zn(r,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function mC(r,e){return Wr(r,"POST","/v1/accounts:delete",e)}async function xl(r,e){return Wr(r,"POST","/v1/accounts:lookup",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function _i(r){if(r)try{const e=new Date(Number(r));if(!isNaN(e.getTime()))return e.toUTCString()}catch{}}async function pC(r,e=!1){const t=Me(r),n=await t.getIdToken(e),s=yh(n);ie(s&&s.exp&&s.auth_time&&s.iat,t.auth,"internal-error");const i=typeof s.firebase=="object"?s.firebase:void 0,a=i==null?void 0:i.sign_in_provider;return{claims:s,token:n,authTime:_i(bu(s.auth_time)),issuedAtTime:_i(bu(s.iat)),expirationTime:_i(bu(s.exp)),signInProvider:a||null,signInSecondFactor:(i==null?void 0:i.sign_in_second_factor)||null}}function bu(r){return Number(r)*1e3}function yh(r){const[e,t,n]=r.split(".");if(e===void 0||t===void 0||n===void 0)return Ya("JWT malformed, contained fewer than 3 sections"),null;try{const s=xx(t);return s?JSON.parse(s):(Ya("Failed to decode base64 JWT payload"),null)}catch(s){return Ya("Caught error parsing JWT payload as JSON",s==null?void 0:s.toString()),null}}function cp(r){const e=yh(r);return ie(e,"internal-error"),ie(typeof e.exp<"u","internal-error"),ie(typeof e.iat<"u","internal-error"),Number(e.exp)-Number(e.iat)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Eo(r,e,t=!1){if(t)return e;try{return await e}catch(n){throw n instanceof hr&&gC(n)&&r.auth.currentUser===r&&await r.auth.signOut(),n}}function gC({code:r}){return r==="auth/user-disabled"||r==="auth/user-token-expired"}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class yC{constructor(e){this.user=e,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}_start(){this.isRunning||(this.isRunning=!0,this.schedule())}_stop(){this.isRunning&&(this.isRunning=!1,this.timerId!==null&&clearTimeout(this.timerId))}getInterval(e){var t;if(e){const n=this.errorBackoff;return this.errorBackoff=Math.min(this.errorBackoff*2,96e4),n}else{this.errorBackoff=3e4;const s=((t=this.user.stsTokenManager.expirationTime)!==null&&t!==void 0?t:0)-Date.now()-3e5;return Math.max(0,s)}}schedule(e=!1){if(!this.isRunning)return;const t=this.getInterval(e);this.timerId=setTimeout(async()=>{await this.iteration()},t)}async iteration(){try{await this.user.getIdToken(!0)}catch(e){(e==null?void 0:e.code)==="auth/network-request-failed"&&this.schedule(!0);return}this.schedule()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ed{constructor(e,t){this.createdAt=e,this.lastLoginAt=t,this._initializeTime()}_initializeTime(){this.lastSignInTime=_i(this.lastLoginAt),this.creationTime=_i(this.createdAt)}_copy(e){this.createdAt=e.createdAt,this.lastLoginAt=e.lastLoginAt,this._initializeTime()}toJSON(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function bl(r){var e;const t=r.auth,n=await r.getIdToken(),s=await Eo(r,xl(t,{idToken:n}));ie(s==null?void 0:s.users.length,t,"internal-error");const i=s.users[0];r._notifyReloadListener(i);const a=!((e=i.providerUserInfo)===null||e===void 0)&&e.length?Ox(i.providerUserInfo):[],l=bC(r.providerData,a),u=r.isAnonymous,d=!(r.email&&i.passwordHash)&&!(l!=null&&l.length),h=u?d:!1,m={uid:i.localId,displayName:i.displayName||null,photoURL:i.photoUrl||null,email:i.email||null,emailVerified:i.emailVerified||!1,phoneNumber:i.phoneNumber||null,tenantId:i.tenantId||null,providerData:l,metadata:new ed(i.createdAt,i.lastLoginAt),isAnonymous:h};Object.assign(r,m)}async function xC(r){const e=Me(r);await bl(e),await e.auth._persistUserIfCurrent(e),e.auth._notifyListenersIfCurrent(e)}function bC(r,e){return[...r.filter(n=>!e.some(s=>s.providerId===n.providerId)),...e]}function Ox(r){return r.map(e=>{var{providerId:t}=e,n=nh(e,["providerId"]);return{providerId:t,uid:n.rawId||"",displayName:n.displayName||null,email:n.email||null,phoneNumber:n.phoneNumber||null,photoURL:n.photoUrl||null}})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function vC(r,e){const t=await Mx(r,{},async()=>{const n=Xi({grant_type:"refresh_token",refresh_token:e}).slice(1),{tokenApiHost:s,apiKey:i}=r.config,a=await Dx(r,s,"/v1/token",`key=${i}`),l=await r._getAdditionalHeaders();l["Content-Type"]="application/x-www-form-urlencoded";const u={method:"POST",headers:l,body:n};return r.emulatorConfig&&Bn(r.emulatorConfig.host)&&(u.credentials="include"),Px.fetch()(a,u)});return{accessToken:t.access_token,expiresIn:t.expires_in,refreshToken:t.refresh_token}}async function wC(r,e){return Wr(r,"POST","/v2/accounts:revokeToken",zn(r,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Zs{constructor(){this.refreshToken=null,this.accessToken=null,this.expirationTime=null}get isExpired(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}updateFromServerResponse(e){ie(e.idToken,"internal-error"),ie(typeof e.idToken<"u","internal-error"),ie(typeof e.refreshToken<"u","internal-error");const t="expiresIn"in e&&typeof e.expiresIn<"u"?Number(e.expiresIn):cp(e.idToken);this.updateTokensAndExpiration(e.idToken,e.refreshToken,t)}updateFromIdToken(e){ie(e.length!==0,"internal-error");const t=cp(e);this.updateTokensAndExpiration(e,null,t)}async getToken(e,t=!1){return!t&&this.accessToken&&!this.isExpired?this.accessToken:(ie(this.refreshToken,e,"user-token-expired"),this.refreshToken?(await this.refresh(e,this.refreshToken),this.accessToken):null)}clearRefreshToken(){this.refreshToken=null}async refresh(e,t){const{accessToken:n,refreshToken:s,expiresIn:i}=await vC(e,t);this.updateTokensAndExpiration(n,s,Number(i))}updateTokensAndExpiration(e,t,n){this.refreshToken=t||null,this.accessToken=e||null,this.expirationTime=Date.now()+n*1e3}static fromJSON(e,t){const{refreshToken:n,accessToken:s,expirationTime:i}=t,a=new Zs;return n&&(ie(typeof n=="string","internal-error",{appName:e}),a.refreshToken=n),s&&(ie(typeof s=="string","internal-error",{appName:e}),a.accessToken=s),i&&(ie(typeof i=="number","internal-error",{appName:e}),a.expirationTime=i),a}toJSON(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}_assign(e){this.accessToken=e.accessToken,this.refreshToken=e.refreshToken,this.expirationTime=e.expirationTime}_clone(){return Object.assign(new Zs,this.toJSON())}_performRefresh(){return Vr("not implemented")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function en(r,e){ie(typeof r=="string"||typeof r>"u","internal-error",{appName:e})}class ir{constructor(e){var{uid:t,auth:n,stsTokenManager:s}=e,i=nh(e,["uid","auth","stsTokenManager"]);this.providerId="firebase",this.proactiveRefresh=new yC(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=t,this.auth=n,this.stsTokenManager=s,this.accessToken=s.accessToken,this.displayName=i.displayName||null,this.email=i.email||null,this.emailVerified=i.emailVerified||!1,this.phoneNumber=i.phoneNumber||null,this.photoURL=i.photoURL||null,this.isAnonymous=i.isAnonymous||!1,this.tenantId=i.tenantId||null,this.providerData=i.providerData?[...i.providerData]:[],this.metadata=new ed(i.createdAt||void 0,i.lastLoginAt||void 0)}async getIdToken(e){const t=await Eo(this,this.stsTokenManager.getToken(this.auth,e));return ie(t,this.auth,"internal-error"),this.accessToken!==t&&(this.accessToken=t,await this.auth._persistUserIfCurrent(this),this.auth._notifyListenersIfCurrent(this)),t}getIdTokenResult(e){return pC(this,e)}reload(){return xC(this)}_assign(e){this!==e&&(ie(this.uid===e.uid,this.auth,"internal-error"),this.displayName=e.displayName,this.photoURL=e.photoURL,this.email=e.email,this.emailVerified=e.emailVerified,this.phoneNumber=e.phoneNumber,this.isAnonymous=e.isAnonymous,this.tenantId=e.tenantId,this.providerData=e.providerData.map(t=>Object.assign({},t)),this.metadata._copy(e.metadata),this.stsTokenManager._assign(e.stsTokenManager))}_clone(e){const t=new ir(Object.assign(Object.assign({},this),{auth:e,stsTokenManager:this.stsTokenManager._clone()}));return t.metadata._copy(this.metadata),t}_onReload(e){ie(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=e,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}_notifyReloadListener(e){this.reloadListener?this.reloadListener(e):this.reloadUserInfo=e}_startProactiveRefresh(){this.proactiveRefresh._start()}_stopProactiveRefresh(){this.proactiveRefresh._stop()}async _updateTokensIfNecessary(e,t=!1){let n=!1;e.idToken&&e.idToken!==this.stsTokenManager.accessToken&&(this.stsTokenManager.updateFromServerResponse(e),n=!0),t&&await bl(this),await this.auth._persistUserIfCurrent(this),n&&this.auth._notifyListenersIfCurrent(this)}async delete(){if(Pt(this.auth.app))return Promise.reject(Ur(this.auth));const e=await this.getIdToken();return await Eo(this,mC(this.auth,{idToken:e})),this.stsTokenManager.clearRefreshToken(),this.auth.signOut()}toJSON(){return Object.assign(Object.assign({uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map(e=>Object.assign({},e)),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId},this.metadata.toJSON()),{apiKey:this.auth.config.apiKey,appName:this.auth.name})}get refreshToken(){return this.stsTokenManager.refreshToken||""}static _fromJSON(e,t){var n,s,i,a,l,u,d,h;const m=(n=t.displayName)!==null&&n!==void 0?n:void 0,g=(s=t.email)!==null&&s!==void 0?s:void 0,x=(i=t.phoneNumber)!==null&&i!==void 0?i:void 0,S=(a=t.photoURL)!==null&&a!==void 0?a:void 0,b=(l=t.tenantId)!==null&&l!==void 0?l:void 0,v=(u=t._redirectEventId)!==null&&u!==void 0?u:void 0,E=(d=t.createdAt)!==null&&d!==void 0?d:void 0,T=(h=t.lastLoginAt)!==null&&h!==void 0?h:void 0,{uid:N,emailVerified:P,isAnonymous:F,providerData:U,stsTokenManager:A}=t;ie(N&&A,e,"internal-error");const w=Zs.fromJSON(this.name,A);ie(typeof N=="string",e,"internal-error"),en(m,e.name),en(g,e.name),ie(typeof P=="boolean",e,"internal-error"),ie(typeof F=="boolean",e,"internal-error"),en(x,e.name),en(S,e.name),en(b,e.name),en(v,e.name),en(E,e.name),en(T,e.name);const C=new ir({uid:N,auth:e,email:g,emailVerified:P,displayName:m,isAnonymous:F,photoURL:S,phoneNumber:x,tenantId:b,stsTokenManager:w,createdAt:E,lastLoginAt:T});return U&&Array.isArray(U)&&(C.providerData=U.map(j=>Object.assign({},j))),v&&(C._redirectEventId=v),C}static async _fromIdTokenResponse(e,t,n=!1){const s=new Zs;s.updateFromServerResponse(t);const i=new ir({uid:t.localId,auth:e,stsTokenManager:s,isAnonymous:n});return await bl(i),i}static async _fromGetAccountInfoResponse(e,t,n){const s=t.users[0];ie(s.localId!==void 0,"internal-error");const i=s.providerUserInfo!==void 0?Ox(s.providerUserInfo):[],a=!(s.email&&s.passwordHash)&&!(i!=null&&i.length),l=new Zs;l.updateFromIdToken(n);const u=new ir({uid:s.localId,auth:e,stsTokenManager:l,isAnonymous:a}),d={uid:s.localId,displayName:s.displayName||null,photoURL:s.photoUrl||null,email:s.email||null,emailVerified:s.emailVerified||!1,phoneNumber:s.phoneNumber||null,tenantId:s.tenantId||null,providerData:i,metadata:new ed(s.createdAt,s.lastLoginAt),isAnonymous:!(s.email&&s.passwordHash)&&!(i!=null&&i.length)};return Object.assign(u,d),u}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const up=new Map;function Fr(r){zr(r instanceof Function,"Expected a class definition");let e=up.get(r);return e?(zr(e instanceof r,"Instance stored in cache mismatched with class"),e):(e=new r,up.set(r,e),e)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Lx{constructor(){this.type="NONE",this.storage={}}async _isAvailable(){return!0}async _set(e,t){this.storage[e]=t}async _get(e){const t=this.storage[e];return t===void 0?null:t}async _remove(e){delete this.storage[e]}_addListener(e,t){}_removeListener(e,t){}}Lx.type="NONE";const dp=Lx;/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Xa(r,e,t){return`firebase:${r}:${e}:${t}`}class eo{constructor(e,t,n){this.persistence=e,this.auth=t,this.userKey=n;const{config:s,name:i}=this.auth;this.fullUserKey=Xa(this.userKey,s.apiKey,i),this.fullPersistenceKey=Xa("persistence",s.apiKey,i),this.boundEventHandler=t._onStorageEvent.bind(t),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}setCurrentUser(e){return this.persistence._set(this.fullUserKey,e.toJSON())}async getCurrentUser(){const e=await this.persistence._get(this.fullUserKey);if(!e)return null;if(typeof e=="string"){const t=await xl(this.auth,{idToken:e}).catch(()=>{});return t?ir._fromGetAccountInfoResponse(this.auth,t,e):null}return ir._fromJSON(this.auth,e)}removeCurrentUser(){return this.persistence._remove(this.fullUserKey)}savePersistenceForRedirect(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}async setPersistence(e){if(this.persistence===e)return;const t=await this.getCurrentUser();if(await this.removeCurrentUser(),this.persistence=e,t)return this.setCurrentUser(t)}delete(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}static async create(e,t,n="authUser"){if(!t.length)return new eo(Fr(dp),e,n);const s=(await Promise.all(t.map(async d=>{if(await d._isAvailable())return d}))).filter(d=>d);let i=s[0]||Fr(dp);const a=Xa(n,e.config.apiKey,e.name);let l=null;for(const d of t)try{const h=await d._get(a);if(h){let m;if(typeof h=="string"){const g=await xl(e,{idToken:h}).catch(()=>{});if(!g)break;m=await ir._fromGetAccountInfoResponse(e,g,h)}else m=ir._fromJSON(e,h);d!==i&&(l=m),i=d;break}}catch{}const u=s.filter(d=>d._shouldAllowMigration);return!i._shouldAllowMigration||!u.length?new eo(i,e,n):(i=u[0],l&&await i._set(a,l.toJSON()),await Promise.all(t.map(async d=>{if(d!==i)try{await d._remove(a)}catch{}})),new eo(i,e,n))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function hp(r){const e=r.toLowerCase();if(e.includes("opera/")||e.includes("opr/")||e.includes("opios/"))return"Opera";if($x(e))return"IEMobile";if(e.includes("msie")||e.includes("trident/"))return"IE";if(e.includes("edge/"))return"Edge";if(Vx(e))return"Firefox";if(e.includes("silk/"))return"Silk";if(zx(e))return"Blackberry";if(qx(e))return"Webos";if(Fx(e))return"Safari";if((e.includes("chrome/")||Ux(e))&&!e.includes("edge/"))return"Chrome";if(Bx(e))return"Android";{const t=/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/,n=r.match(t);if((n==null?void 0:n.length)===2)return n[1]}return"Other"}function Vx(r=wt()){return/firefox\//i.test(r)}function Fx(r=wt()){const e=r.toLowerCase();return e.includes("safari/")&&!e.includes("chrome/")&&!e.includes("crios/")&&!e.includes("android")}function Ux(r=wt()){return/crios\//i.test(r)}function $x(r=wt()){return/iemobile/i.test(r)}function Bx(r=wt()){return/android/i.test(r)}function zx(r=wt()){return/blackberry/i.test(r)}function qx(r=wt()){return/webos/i.test(r)}function xh(r=wt()){return/iphone|ipad|ipod/i.test(r)||/macintosh/i.test(r)&&/mobile/i.test(r)}function _C(r=wt()){var e;return xh(r)&&!!(!((e=window.navigator)===null||e===void 0)&&e.standalone)}function TC(){return OE()&&document.documentMode===10}function Hx(r=wt()){return xh(r)||Bx(r)||qx(r)||zx(r)||/windows phone/i.test(r)||$x(r)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Wx(r,e=[]){let t;switch(r){case"Browser":t=hp(wt());break;case"Worker":t=`${hp(wt())}-${r}`;break;default:t=r}const n=e.length?e.join(","):"FirebaseCore-web";return`${t}/JsCore/${Is}/${n}`}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class EC{constructor(e){this.auth=e,this.queue=[]}pushCallback(e,t){const n=i=>new Promise((a,l)=>{try{const u=e(i);a(u)}catch(u){l(u)}});n.onAbort=t,this.queue.push(n);const s=this.queue.length-1;return()=>{this.queue[s]=()=>Promise.resolve()}}async runMiddleware(e){if(this.auth.currentUser===e)return;const t=[];try{for(const n of this.queue)await n(e),n.onAbort&&t.push(n.onAbort)}catch(n){t.reverse();for(const s of t)try{s()}catch{}throw this.auth._errorFactory.create("login-blocked",{originalMessage:n==null?void 0:n.message})}}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function NC(r,e={}){return Wr(r,"GET","/v2/passwordPolicy",zn(r,e))}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const CC=6;class kC{constructor(e){var t,n,s,i;const a=e.customStrengthOptions;this.customStrengthOptions={},this.customStrengthOptions.minPasswordLength=(t=a.minPasswordLength)!==null&&t!==void 0?t:CC,a.maxPasswordLength&&(this.customStrengthOptions.maxPasswordLength=a.maxPasswordLength),a.containsLowercaseCharacter!==void 0&&(this.customStrengthOptions.containsLowercaseLetter=a.containsLowercaseCharacter),a.containsUppercaseCharacter!==void 0&&(this.customStrengthOptions.containsUppercaseLetter=a.containsUppercaseCharacter),a.containsNumericCharacter!==void 0&&(this.customStrengthOptions.containsNumericCharacter=a.containsNumericCharacter),a.containsNonAlphanumericCharacter!==void 0&&(this.customStrengthOptions.containsNonAlphanumericCharacter=a.containsNonAlphanumericCharacter),this.enforcementState=e.enforcementState,this.enforcementState==="ENFORCEMENT_STATE_UNSPECIFIED"&&(this.enforcementState="OFF"),this.allowedNonAlphanumericCharacters=(s=(n=e.allowedNonAlphanumericCharacters)===null||n===void 0?void 0:n.join(""))!==null&&s!==void 0?s:"",this.forceUpgradeOnSignin=(i=e.forceUpgradeOnSignin)!==null&&i!==void 0?i:!1,this.schemaVersion=e.schemaVersion}validatePassword(e){var t,n,s,i,a,l;const u={isValid:!0,passwordPolicy:this};return this.validatePasswordLengthOptions(e,u),this.validatePasswordCharacterOptions(e,u),u.isValid&&(u.isValid=(t=u.meetsMinPasswordLength)!==null&&t!==void 0?t:!0),u.isValid&&(u.isValid=(n=u.meetsMaxPasswordLength)!==null&&n!==void 0?n:!0),u.isValid&&(u.isValid=(s=u.containsLowercaseLetter)!==null&&s!==void 0?s:!0),u.isValid&&(u.isValid=(i=u.containsUppercaseLetter)!==null&&i!==void 0?i:!0),u.isValid&&(u.isValid=(a=u.containsNumericCharacter)!==null&&a!==void 0?a:!0),u.isValid&&(u.isValid=(l=u.containsNonAlphanumericCharacter)!==null&&l!==void 0?l:!0),u}validatePasswordLengthOptions(e,t){const n=this.customStrengthOptions.minPasswordLength,s=this.customStrengthOptions.maxPasswordLength;n&&(t.meetsMinPasswordLength=e.length>=n),s&&(t.meetsMaxPasswordLength=e.length<=s)}validatePasswordCharacterOptions(e,t){this.updatePasswordCharacterOptionsStatuses(t,!1,!1,!1,!1);let n;for(let s=0;s<e.length;s++)n=e.charAt(s),this.updatePasswordCharacterOptionsStatuses(t,n>="a"&&n<="z",n>="A"&&n<="Z",n>="0"&&n<="9",this.allowedNonAlphanumericCharacters.includes(n))}updatePasswordCharacterOptionsStatuses(e,t,n,s,i){this.customStrengthOptions.containsLowercaseLetter&&(e.containsLowercaseLetter||(e.containsLowercaseLetter=t)),this.customStrengthOptions.containsUppercaseLetter&&(e.containsUppercaseLetter||(e.containsUppercaseLetter=n)),this.customStrengthOptions.containsNumericCharacter&&(e.containsNumericCharacter||(e.containsNumericCharacter=s)),this.customStrengthOptions.containsNonAlphanumericCharacter&&(e.containsNonAlphanumericCharacter||(e.containsNonAlphanumericCharacter=i))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class SC{constructor(e,t,n,s){this.app=e,this.heartbeatServiceProvider=t,this.appCheckServiceProvider=n,this.config=s,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new fp(this),this.idTokenSubscription=new fp(this),this.beforeStateQueue=new EC(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION=1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=Rx,this._agentRecaptchaConfig=null,this._tenantRecaptchaConfigs={},this._projectPasswordPolicy=null,this._tenantPasswordPolicies={},this._resolvePersistenceManagerAvailable=void 0,this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=e.name,this.clientVersion=s.sdkClientVersion,this._persistenceManagerAvailable=new Promise(i=>this._resolvePersistenceManagerAvailable=i)}_initializeWithPersistence(e,t){return t&&(this._popupRedirectResolver=Fr(t)),this._initializationPromise=this.queue(async()=>{var n,s,i;if(!this._deleted&&(this.persistenceManager=await eo.create(this,e),(n=this._resolvePersistenceManagerAvailable)===null||n===void 0||n.call(this),!this._deleted)){if(!((s=this._popupRedirectResolver)===null||s===void 0)&&s._shouldInitProactively)try{await this._popupRedirectResolver._initialize(this)}catch{}await this.initializeCurrentUser(t),this.lastNotifiedUid=((i=this.currentUser)===null||i===void 0?void 0:i.uid)||null,!this._deleted&&(this._isInitialized=!0)}}),this._initializationPromise}async _onStorageEvent(){if(this._deleted)return;const e=await this.assertedPersistence.getCurrentUser();if(!(!this.currentUser&&!e)){if(this.currentUser&&e&&this.currentUser.uid===e.uid){this._currentUser._assign(e),await this.currentUser.getIdToken();return}await this._updateCurrentUser(e,!0)}}async initializeCurrentUserFromIdToken(e){try{const t=await xl(this,{idToken:e}),n=await ir._fromGetAccountInfoResponse(this,t,e);await this.directlySetCurrentUser(n)}catch(t){console.warn("FirebaseServerApp could not login user with provided authIdToken: ",t),await this.directlySetCurrentUser(null)}}async initializeCurrentUser(e){var t;if(Pt(this.app)){const a=this.app.settings.authIdToken;return a?new Promise(l=>{setTimeout(()=>this.initializeCurrentUserFromIdToken(a).then(l,l))}):this.directlySetCurrentUser(null)}const n=await this.assertedPersistence.getCurrentUser();let s=n,i=!1;if(e&&this.config.authDomain){await this.getOrInitRedirectPersistenceManager();const a=(t=this.redirectUser)===null||t===void 0?void 0:t._redirectEventId,l=s==null?void 0:s._redirectEventId,u=await this.tryRedirectSignIn(e);(!a||a===l)&&(u!=null&&u.user)&&(s=u.user,i=!0)}if(!s)return this.directlySetCurrentUser(null);if(!s._redirectEventId){if(i)try{await this.beforeStateQueue.runMiddleware(s)}catch(a){s=n,this._popupRedirectResolver._overrideRedirectResult(this,()=>Promise.reject(a))}return s?this.reloadAndSetCurrentUserOrClear(s):this.directlySetCurrentUser(null)}return ie(this._popupRedirectResolver,this,"argument-error"),await this.getOrInitRedirectPersistenceManager(),this.redirectUser&&this.redirectUser._redirectEventId===s._redirectEventId?this.directlySetCurrentUser(s):this.reloadAndSetCurrentUserOrClear(s)}async tryRedirectSignIn(e){let t=null;try{t=await this._popupRedirectResolver._completeRedirectFn(this,e,!0)}catch{await this._setRedirectUser(null)}return t}async reloadAndSetCurrentUserOrClear(e){try{await bl(e)}catch(t){if((t==null?void 0:t.code)!=="auth/network-request-failed")return this.directlySetCurrentUser(null)}return this.directlySetCurrentUser(e)}useDeviceLanguage(){this.languageCode=iC()}async _delete(){this._deleted=!0}async updateCurrentUser(e){if(Pt(this.app))return Promise.reject(Ur(this));const t=e?Me(e):null;return t&&ie(t.auth.config.apiKey===this.config.apiKey,this,"invalid-user-token"),this._updateCurrentUser(t&&t._clone(this))}async _updateCurrentUser(e,t=!1){if(!this._deleted)return e&&ie(this.tenantId===e.tenantId,this,"tenant-id-mismatch"),t||await this.beforeStateQueue.runMiddleware(e),this.queue(async()=>{await this.directlySetCurrentUser(e),this.notifyAuthListeners()})}async signOut(){return Pt(this.app)?Promise.reject(Ur(this)):(await this.beforeStateQueue.runMiddleware(null),(this.redirectPersistenceManager||this._popupRedirectResolver)&&await this._setRedirectUser(null),this._updateCurrentUser(null,!0))}setPersistence(e){return Pt(this.app)?Promise.reject(Ur(this)):this.queue(async()=>{await this.assertedPersistence.setPersistence(Fr(e))})}_getRecaptchaConfig(){return this.tenantId==null?this._agentRecaptchaConfig:this._tenantRecaptchaConfigs[this.tenantId]}async validatePassword(e){this._getPasswordPolicyInternal()||await this._updatePasswordPolicy();const t=this._getPasswordPolicyInternal();return t.schemaVersion!==this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION?Promise.reject(this._errorFactory.create("unsupported-password-policy-schema-version",{})):t.validatePassword(e)}_getPasswordPolicyInternal(){return this.tenantId===null?this._projectPasswordPolicy:this._tenantPasswordPolicies[this.tenantId]}async _updatePasswordPolicy(){const e=await NC(this),t=new kC(e);this.tenantId===null?this._projectPasswordPolicy=t:this._tenantPasswordPolicies[this.tenantId]=t}_getPersistenceType(){return this.assertedPersistence.persistence.type}_getPersistence(){return this.assertedPersistence.persistence}_updateErrorMap(e){this._errorFactory=new Ss("auth","Firebase",e())}onAuthStateChanged(e,t,n){return this.registerStateListener(this.authStateSubscription,e,t,n)}beforeAuthStateChanged(e,t){return this.beforeStateQueue.pushCallback(e,t)}onIdTokenChanged(e,t,n){return this.registerStateListener(this.idTokenSubscription,e,t,n)}authStateReady(){return new Promise((e,t)=>{if(this.currentUser)e();else{const n=this.onAuthStateChanged(()=>{n(),e()},t)}})}async revokeAccessToken(e){if(this.currentUser){const t=await this.currentUser.getIdToken(),n={providerId:"apple.com",tokenType:"ACCESS_TOKEN",token:e,idToken:t};this.tenantId!=null&&(n.tenantId=this.tenantId),await wC(this,n)}}toJSON(){var e;return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:(e=this._currentUser)===null||e===void 0?void 0:e.toJSON()}}async _setRedirectUser(e,t){const n=await this.getOrInitRedirectPersistenceManager(t);return e===null?n.removeCurrentUser():n.setCurrentUser(e)}async getOrInitRedirectPersistenceManager(e){if(!this.redirectPersistenceManager){const t=e&&Fr(e)||this._popupRedirectResolver;ie(t,this,"argument-error"),this.redirectPersistenceManager=await eo.create(this,[Fr(t._redirectPersistence)],"redirectUser"),this.redirectUser=await this.redirectPersistenceManager.getCurrentUser()}return this.redirectPersistenceManager}async _redirectUserForId(e){var t,n;return this._isInitialized&&await this.queue(async()=>{}),((t=this._currentUser)===null||t===void 0?void 0:t._redirectEventId)===e?this._currentUser:((n=this.redirectUser)===null||n===void 0?void 0:n._redirectEventId)===e?this.redirectUser:null}async _persistUserIfCurrent(e){if(e===this.currentUser)return this.queue(async()=>this.directlySetCurrentUser(e))}_notifyListenersIfCurrent(e){e===this.currentUser&&this.notifyAuthListeners()}_key(){return`${this.config.authDomain}:${this.config.apiKey}:${this.name}`}_startProactiveRefresh(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}_stopProactiveRefresh(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}get _currentUser(){return this.currentUser}notifyAuthListeners(){var e,t;if(!this._isInitialized)return;this.idTokenSubscription.next(this.currentUser);const n=(t=(e=this.currentUser)===null||e===void 0?void 0:e.uid)!==null&&t!==void 0?t:null;this.lastNotifiedUid!==n&&(this.lastNotifiedUid=n,this.authStateSubscription.next(this.currentUser))}registerStateListener(e,t,n,s){if(this._deleted)return()=>{};const i=typeof t=="function"?t:t.next.bind(t);let a=!1;const l=this._isInitialized?Promise.resolve():this._initializationPromise;if(ie(l,this,"internal-error"),l.then(()=>{a||i(this.currentUser)}),typeof t=="function"){const u=e.addObserver(t,n,s);return()=>{a=!0,u()}}else{const u=e.addObserver(t);return()=>{a=!0,u()}}}async directlySetCurrentUser(e){this.currentUser&&this.currentUser!==e&&this._currentUser._stopProactiveRefresh(),e&&this.isProactiveRefreshEnabled&&e._startProactiveRefresh(),this.currentUser=e,e?await this.assertedPersistence.setCurrentUser(e):await this.assertedPersistence.removeCurrentUser()}queue(e){return this.operations=this.operations.then(e,e),this.operations}get assertedPersistence(){return ie(this.persistenceManager,this,"internal-error"),this.persistenceManager}_logFramework(e){!e||this.frameworks.includes(e)||(this.frameworks.push(e),this.frameworks.sort(),this.clientVersion=Wx(this.config.clientPlatform,this._getFrameworks()))}_getFrameworks(){return this.frameworks}async _getAdditionalHeaders(){var e;const t={"X-Client-Version":this.clientVersion};this.app.options.appId&&(t["X-Firebase-gmpid"]=this.app.options.appId);const n=await((e=this.heartbeatServiceProvider.getImmediate({optional:!0}))===null||e===void 0?void 0:e.getHeartbeatsHeader());n&&(t["X-Firebase-Client"]=n);const s=await this._getAppCheckToken();return s&&(t["X-Firebase-AppCheck"]=s),t}async _getAppCheckToken(){var e;if(Pt(this.app)&&this.app.settings.appCheckToken)return this.app.settings.appCheckToken;const t=await((e=this.appCheckServiceProvider.getImmediate({optional:!0}))===null||e===void 0?void 0:e.getToken());return t!=null&&t.error&&rC(`Error while retrieving App Check token: ${t.error}`),t==null?void 0:t.token}}function qn(r){return Me(r)}class fp{constructor(e){this.auth=e,this.observer=null,this.addObserver=zE(t=>this.observer=t)}get next(){return ie(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let oc={async loadJS(){throw new Error("Unable to load external scripts")},recaptchaV2Script:"",recaptchaEnterpriseScript:"",gapiScript:""};function jC(r){oc=r}function Gx(r){return oc.loadJS(r)}function IC(){return oc.recaptchaEnterpriseScript}function AC(){return oc.gapiScript}function RC(r){return`__${r}${Math.floor(Math.random()*1e6)}`}class PC{constructor(){this.enterprise=new MC}ready(e){e()}execute(e,t){return Promise.resolve("token")}render(e,t){return""}}class MC{ready(e){e()}execute(e,t){return Promise.resolve("token")}render(e,t){return""}}const DC="recaptcha-enterprise",Kx="NO_RECAPTCHA";class OC{constructor(e){this.type=DC,this.auth=qn(e)}async verify(e="verify",t=!1){async function n(i){if(!t){if(i.tenantId==null&&i._agentRecaptchaConfig!=null)return i._agentRecaptchaConfig.siteKey;if(i.tenantId!=null&&i._tenantRecaptchaConfigs[i.tenantId]!==void 0)return i._tenantRecaptchaConfigs[i.tenantId].siteKey}return new Promise(async(a,l)=>{fC(i,{clientType:"CLIENT_TYPE_WEB",version:"RECAPTCHA_ENTERPRISE"}).then(u=>{if(u.recaptchaKey===void 0)l(new Error("recaptcha Enterprise site key undefined"));else{const d=new hC(u);return i.tenantId==null?i._agentRecaptchaConfig=d:i._tenantRecaptchaConfigs[i.tenantId]=d,a(d.siteKey)}}).catch(u=>{l(u)})})}function s(i,a,l){const u=window.grecaptcha;lp(u)?u.enterprise.ready(()=>{u.enterprise.execute(i,{action:e}).then(d=>{a(d)}).catch(()=>{a(Kx)})}):l(Error("No reCAPTCHA enterprise script loaded."))}return this.auth.settings.appVerificationDisabledForTesting?new PC().execute("siteKey",{action:"verify"}):new Promise((i,a)=>{n(this.auth).then(l=>{if(!t&&lp(window.grecaptcha))s(l,i,a);else{if(typeof window>"u"){a(new Error("RecaptchaVerifier is only supported in browser"));return}let u=IC();u.length!==0&&(u+=l),Gx(u).then(()=>{s(l,i,a)}).catch(d=>{a(d)})}}).catch(l=>{a(l)})})}}async function mp(r,e,t,n=!1,s=!1){const i=new OC(r);let a;if(s)a=Kx;else try{a=await i.verify(t)}catch{a=await i.verify(t,!0)}const l=Object.assign({},e);if(t==="mfaSmsEnrollment"||t==="mfaSmsSignIn"){if("phoneEnrollmentInfo"in l){const u=l.phoneEnrollmentInfo.phoneNumber,d=l.phoneEnrollmentInfo.recaptchaToken;Object.assign(l,{phoneEnrollmentInfo:{phoneNumber:u,recaptchaToken:d,captchaResponse:a,clientType:"CLIENT_TYPE_WEB",recaptchaVersion:"RECAPTCHA_ENTERPRISE"}})}else if("phoneSignInInfo"in l){const u=l.phoneSignInInfo.recaptchaToken;Object.assign(l,{phoneSignInInfo:{recaptchaToken:u,captchaResponse:a,clientType:"CLIENT_TYPE_WEB",recaptchaVersion:"RECAPTCHA_ENTERPRISE"}})}return l}return n?Object.assign(l,{captchaResp:a}):Object.assign(l,{captchaResponse:a}),Object.assign(l,{clientType:"CLIENT_TYPE_WEB"}),Object.assign(l,{recaptchaVersion:"RECAPTCHA_ENTERPRISE"}),l}async function td(r,e,t,n,s){var i;if(!((i=r._getRecaptchaConfig())===null||i===void 0)&&i.isProviderEnabled("EMAIL_PASSWORD_PROVIDER")){const a=await mp(r,e,t,t==="getOobCode");return n(r,a)}else return n(r,e).catch(async a=>{if(a.code==="auth/missing-recaptcha-token"){console.log(`${t} is protected by reCAPTCHA Enterprise for this project. Automatically triggering the reCAPTCHA flow and restarting the flow.`);const l=await mp(r,e,t,t==="getOobCode");return n(r,l)}else return Promise.reject(a)})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function LC(r,e){const t=js(r,"auth");if(t.isInitialized()){const s=t.getImmediate(),i=t.getOptions();if(ys(i,e??{}))return s;Qt(s,"already-initialized")}return t.initialize({options:e})}function VC(r,e){const t=(e==null?void 0:e.persistence)||[],n=(Array.isArray(t)?t:[t]).map(Fr);e!=null&&e.errorMap&&r._updateErrorMap(e.errorMap),r._initializeWithPersistence(n,e==null?void 0:e.popupRedirectResolver)}function FC(r,e,t){const n=qn(r);ie(/^https?:\/\//.test(e),n,"invalid-emulator-scheme");const s=!1,i=Qx(e),{host:a,port:l}=UC(e),u=l===null?"":`:${l}`,d={url:`${i}//${a}${u}/`},h=Object.freeze({host:a,port:l,protocol:i.replace(":",""),options:Object.freeze({disableWarnings:s})});if(!n._canInitEmulator){ie(n.config.emulator&&n.emulatorConfig,n,"emulator-config-failed"),ie(ys(d,n.config.emulator)&&ys(h,n.emulatorConfig),n,"emulator-config-failed");return}n.config.emulator=d,n.emulatorConfig=h,n.settings.appVerificationDisabledForTesting=!0,Bn(a)?(dh(`${i}//${a}${u}`),hh("Auth",!0)):$C()}function Qx(r){const e=r.indexOf(":");return e<0?"":r.substr(0,e+1)}function UC(r){const e=Qx(r),t=/(\/\/)?([^?#/]+)/.exec(r.substr(e.length));if(!t)return{host:"",port:null};const n=t[2].split("@").pop()||"",s=/^(\[[^\]]+\])(:|$)/.exec(n);if(s){const i=s[1];return{host:i,port:pp(n.substr(i.length+1))}}else{const[i,a]=n.split(":");return{host:i,port:pp(a)}}}function pp(r){if(!r)return null;const e=Number(r);return isNaN(e)?null:e}function $C(){function r(){const e=document.createElement("p"),t=e.style;e.innerText="Running in emulator mode. Do not use with production credentials.",t.position="fixed",t.width="100%",t.backgroundColor="#ffffff",t.border=".1em solid #000000",t.color="#b50000",t.bottom="0px",t.left="0px",t.margin="0px",t.zIndex="10000",t.textAlign="center",e.classList.add("firebase-emulator-warning"),document.body.appendChild(e)}typeof console<"u"&&typeof console.info=="function"&&console.info("WARNING: You are using the Auth Emulator, which is intended for local testing only.  Do not use with production credentials."),typeof window<"u"&&typeof document<"u"&&(document.readyState==="loading"?window.addEventListener("DOMContentLoaded",r):r())}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class bh{constructor(e,t){this.providerId=e,this.signInMethod=t}toJSON(){return Vr("not implemented")}_getIdTokenResponse(e){return Vr("not implemented")}_linkToIdToken(e,t){return Vr("not implemented")}_getReauthenticationResolver(e){return Vr("not implemented")}}async function BC(r,e){return Wr(r,"POST","/v1/accounts:signUp",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function zC(r,e){return Zi(r,"POST","/v1/accounts:signInWithPassword",zn(r,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function qC(r,e){return Zi(r,"POST","/v1/accounts:signInWithEmailLink",zn(r,e))}async function HC(r,e){return Zi(r,"POST","/v1/accounts:signInWithEmailLink",zn(r,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Di extends bh{constructor(e,t,n,s=null){super("password",n),this._email=e,this._password=t,this._tenantId=s}static _fromEmailAndPassword(e,t){return new Di(e,t,"password")}static _fromEmailAndCode(e,t,n=null){return new Di(e,t,"emailLink",n)}toJSON(){return{email:this._email,password:this._password,signInMethod:this.signInMethod,tenantId:this._tenantId}}static fromJSON(e){const t=typeof e=="string"?JSON.parse(e):e;if(t!=null&&t.email&&(t!=null&&t.password)){if(t.signInMethod==="password")return this._fromEmailAndPassword(t.email,t.password);if(t.signInMethod==="emailLink")return this._fromEmailAndCode(t.email,t.password,t.tenantId)}return null}async _getIdTokenResponse(e){switch(this.signInMethod){case"password":const t={returnSecureToken:!0,email:this._email,password:this._password,clientType:"CLIENT_TYPE_WEB"};return td(e,t,"signInWithPassword",zC);case"emailLink":return qC(e,{email:this._email,oobCode:this._password});default:Qt(e,"internal-error")}}async _linkToIdToken(e,t){switch(this.signInMethod){case"password":const n={idToken:t,returnSecureToken:!0,email:this._email,password:this._password,clientType:"CLIENT_TYPE_WEB"};return td(e,n,"signUpPassword",BC);case"emailLink":return HC(e,{idToken:t,email:this._email,oobCode:this._password});default:Qt(e,"internal-error")}}_getReauthenticationResolver(e){return this._getIdTokenResponse(e)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function to(r,e){return Zi(r,"POST","/v1/accounts:signInWithIdp",zn(r,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const WC="http://localhost";class xs extends bh{constructor(){super(...arguments),this.pendingToken=null}static _fromParams(e){const t=new xs(e.providerId,e.signInMethod);return e.idToken||e.accessToken?(e.idToken&&(t.idToken=e.idToken),e.accessToken&&(t.accessToken=e.accessToken),e.nonce&&!e.pendingToken&&(t.nonce=e.nonce),e.pendingToken&&(t.pendingToken=e.pendingToken)):e.oauthToken&&e.oauthTokenSecret?(t.accessToken=e.oauthToken,t.secret=e.oauthTokenSecret):Qt("argument-error"),t}toJSON(){return{idToken:this.idToken,accessToken:this.accessToken,secret:this.secret,nonce:this.nonce,pendingToken:this.pendingToken,providerId:this.providerId,signInMethod:this.signInMethod}}static fromJSON(e){const t=typeof e=="string"?JSON.parse(e):e,{providerId:n,signInMethod:s}=t,i=nh(t,["providerId","signInMethod"]);if(!n||!s)return null;const a=new xs(n,s);return a.idToken=i.idToken||void 0,a.accessToken=i.accessToken||void 0,a.secret=i.secret,a.nonce=i.nonce,a.pendingToken=i.pendingToken||null,a}_getIdTokenResponse(e){const t=this.buildRequest();return to(e,t)}_linkToIdToken(e,t){const n=this.buildRequest();return n.idToken=t,to(e,n)}_getReauthenticationResolver(e){const t=this.buildRequest();return t.autoCreate=!1,to(e,t)}buildRequest(){const e={requestUri:WC,returnSecureToken:!0};if(this.pendingToken)e.pendingToken=this.pendingToken;else{const t={};this.idToken&&(t.id_token=this.idToken),this.accessToken&&(t.access_token=this.accessToken),this.secret&&(t.oauth_token_secret=this.secret),t.providerId=this.providerId,this.nonce&&!this.pendingToken&&(t.nonce=this.nonce),e.postBody=Xi(t)}return e}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function GC(r){switch(r){case"recoverEmail":return"RECOVER_EMAIL";case"resetPassword":return"PASSWORD_RESET";case"signIn":return"EMAIL_SIGNIN";case"verifyEmail":return"VERIFY_EMAIL";case"verifyAndChangeEmail":return"VERIFY_AND_CHANGE_EMAIL";case"revertSecondFactorAddition":return"REVERT_SECOND_FACTOR_ADDITION";default:return null}}function KC(r){const e=pi(gi(r)).link,t=e?pi(gi(e)).deep_link_id:null,n=pi(gi(r)).deep_link_id;return(n?pi(gi(n)).link:null)||n||t||e||r}class vh{constructor(e){var t,n,s,i,a,l;const u=pi(gi(e)),d=(t=u.apiKey)!==null&&t!==void 0?t:null,h=(n=u.oobCode)!==null&&n!==void 0?n:null,m=GC((s=u.mode)!==null&&s!==void 0?s:null);ie(d&&h&&m,"argument-error"),this.apiKey=d,this.operation=m,this.code=h,this.continueUrl=(i=u.continueUrl)!==null&&i!==void 0?i:null,this.languageCode=(a=u.lang)!==null&&a!==void 0?a:null,this.tenantId=(l=u.tenantId)!==null&&l!==void 0?l:null}static parseLink(e){const t=KC(e);try{return new vh(t)}catch{return null}}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Oo{constructor(){this.providerId=Oo.PROVIDER_ID}static credential(e,t){return Di._fromEmailAndPassword(e,t)}static credentialWithLink(e,t){const n=vh.parseLink(t);return ie(n,"argument-error"),Di._fromEmailAndCode(e,n.code,n.tenantId)}}Oo.PROVIDER_ID="password";Oo.EMAIL_PASSWORD_SIGN_IN_METHOD="password";Oo.EMAIL_LINK_SIGN_IN_METHOD="emailLink";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class wh{constructor(e){this.providerId=e,this.defaultLanguageCode=null,this.customParameters={}}setDefaultLanguage(e){this.defaultLanguageCode=e}setCustomParameters(e){return this.customParameters=e,this}getCustomParameters(){return this.customParameters}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ea extends wh{constructor(){super(...arguments),this.scopes=[]}addScope(e){return this.scopes.includes(e)||this.scopes.push(e),this}getScopes(){return[...this.scopes]}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class on extends ea{constructor(){super("facebook.com")}static credential(e){return xs._fromParams({providerId:on.PROVIDER_ID,signInMethod:on.FACEBOOK_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return on.credentialFromTaggedObject(e)}static credentialFromError(e){return on.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return on.credential(e.oauthAccessToken)}catch{return null}}}on.FACEBOOK_SIGN_IN_METHOD="facebook.com";on.PROVIDER_ID="facebook.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class xr extends ea{constructor(){super("google.com"),this.addScope("profile")}static credential(e,t){return xs._fromParams({providerId:xr.PROVIDER_ID,signInMethod:xr.GOOGLE_SIGN_IN_METHOD,idToken:e,accessToken:t})}static credentialFromResult(e){return xr.credentialFromTaggedObject(e)}static credentialFromError(e){return xr.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthIdToken:t,oauthAccessToken:n}=e;if(!t&&!n)return null;try{return xr.credential(t,n)}catch{return null}}}xr.GOOGLE_SIGN_IN_METHOD="google.com";xr.PROVIDER_ID="google.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class an extends ea{constructor(){super("github.com")}static credential(e){return xs._fromParams({providerId:an.PROVIDER_ID,signInMethod:an.GITHUB_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return an.credentialFromTaggedObject(e)}static credentialFromError(e){return an.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return an.credential(e.oauthAccessToken)}catch{return null}}}an.GITHUB_SIGN_IN_METHOD="github.com";an.PROVIDER_ID="github.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ln extends ea{constructor(){super("twitter.com")}static credential(e,t){return xs._fromParams({providerId:ln.PROVIDER_ID,signInMethod:ln.TWITTER_SIGN_IN_METHOD,oauthToken:e,oauthTokenSecret:t})}static credentialFromResult(e){return ln.credentialFromTaggedObject(e)}static credentialFromError(e){return ln.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthAccessToken:t,oauthTokenSecret:n}=e;if(!t||!n)return null;try{return ln.credential(t,n)}catch{return null}}}ln.TWITTER_SIGN_IN_METHOD="twitter.com";ln.PROVIDER_ID="twitter.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function QC(r,e){return Zi(r,"POST","/v1/accounts:signUp",zn(r,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class bs{constructor(e){this.user=e.user,this.providerId=e.providerId,this._tokenResponse=e._tokenResponse,this.operationType=e.operationType}static async _fromIdTokenResponse(e,t,n,s=!1){const i=await ir._fromIdTokenResponse(e,n,s),a=gp(n);return new bs({user:i,providerId:a,_tokenResponse:n,operationType:t})}static async _forOperation(e,t,n){await e._updateTokensIfNecessary(n,!0);const s=gp(n);return new bs({user:e,providerId:s,_tokenResponse:n,operationType:t})}}function gp(r){return r.providerId?r.providerId:"phoneNumber"in r?"phone":null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class vl extends hr{constructor(e,t,n,s){var i;super(t.code,t.message),this.operationType=n,this.user=s,Object.setPrototypeOf(this,vl.prototype),this.customData={appName:e.name,tenantId:(i=e.tenantId)!==null&&i!==void 0?i:void 0,_serverResponse:t.customData._serverResponse,operationType:n}}static _fromErrorAndOperation(e,t,n,s){return new vl(e,t,n,s)}}function Yx(r,e,t,n){return(e==="reauthenticate"?t._getReauthenticationResolver(r):t._getIdTokenResponse(r)).catch(i=>{throw i.code==="auth/multi-factor-auth-required"?vl._fromErrorAndOperation(r,i,e,n):i})}async function YC(r,e,t=!1){const n=await Eo(r,e._linkToIdToken(r.auth,await r.getIdToken()),t);return bs._forOperation(r,"link",n)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function XC(r,e,t=!1){const{auth:n}=r;if(Pt(n.app))return Promise.reject(Ur(n));const s="reauthenticate";try{const i=await Eo(r,Yx(n,s,e,r),t);ie(i.idToken,n,"internal-error");const a=yh(i.idToken);ie(a,n,"internal-error");const{sub:l}=a;return ie(r.uid===l,n,"user-mismatch"),bs._forOperation(r,s,i)}catch(i){throw(i==null?void 0:i.code)==="auth/user-not-found"&&Qt(n,"user-mismatch"),i}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Xx(r,e,t=!1){if(Pt(r.app))return Promise.reject(Ur(r));const n="signIn",s=await Yx(r,n,e),i=await bs._fromIdTokenResponse(r,n,s);return t||await r._updateCurrentUser(i.user),i}async function JC(r,e){return Xx(qn(r),e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Jx(r){const e=qn(r);e._getPasswordPolicyInternal()&&await e._updatePasswordPolicy()}async function ZC(r,e,t){if(Pt(r.app))return Promise.reject(Ur(r));const n=qn(r),a=await td(n,{returnSecureToken:!0,email:e,password:t,clientType:"CLIENT_TYPE_WEB"},"signUpPassword",QC).catch(u=>{throw u.code==="auth/password-does-not-meet-requirements"&&Jx(r),u}),l=await bs._fromIdTokenResponse(n,"signIn",a);return await n._updateCurrentUser(l.user),l}function ek(r,e,t){return Pt(r.app)?Promise.reject(Ur(r)):JC(Me(r),Oo.credential(e,t)).catch(async n=>{throw n.code==="auth/password-does-not-meet-requirements"&&Jx(r),n})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function tk(r,e){return Wr(r,"POST","/v1/accounts:update",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function rk(r,{displayName:e,photoURL:t}){if(e===void 0&&t===void 0)return;const n=Me(r),i={idToken:await n.getIdToken(),displayName:e,photoUrl:t,returnSecureToken:!0},a=await Eo(n,tk(n.auth,i));n.displayName=a.displayName||null,n.photoURL=a.photoUrl||null;const l=n.providerData.find(({providerId:u})=>u==="password");l&&(l.displayName=n.displayName,l.photoURL=n.photoURL),await n._updateTokensIfNecessary(a)}function nk(r,e,t,n){return Me(r).onIdTokenChanged(e,t,n)}function sk(r,e,t){return Me(r).beforeAuthStateChanged(e,t)}function ok(r,e,t,n){return Me(r).onAuthStateChanged(e,t,n)}const wl="__sak";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Zx{constructor(e,t){this.storageRetriever=e,this.type=t}_isAvailable(){try{return this.storage?(this.storage.setItem(wl,"1"),this.storage.removeItem(wl),Promise.resolve(!0)):Promise.resolve(!1)}catch{return Promise.resolve(!1)}}_set(e,t){return this.storage.setItem(e,JSON.stringify(t)),Promise.resolve()}_get(e){const t=this.storage.getItem(e);return Promise.resolve(t?JSON.parse(t):null)}_remove(e){return this.storage.removeItem(e),Promise.resolve()}get storage(){return this.storageRetriever()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ik=1e3,ak=10;class e0 extends Zx{constructor(){super(()=>window.localStorage,"LOCAL"),this.boundEventHandler=(e,t)=>this.onStorageEvent(e,t),this.listeners={},this.localCache={},this.pollTimer=null,this.fallbackToPolling=Hx(),this._shouldAllowMigration=!0}forAllChangedKeys(e){for(const t of Object.keys(this.listeners)){const n=this.storage.getItem(t),s=this.localCache[t];n!==s&&e(t,s,n)}}onStorageEvent(e,t=!1){if(!e.key){this.forAllChangedKeys((a,l,u)=>{this.notifyListeners(a,u)});return}const n=e.key;t?this.detachListener():this.stopPolling();const s=()=>{const a=this.storage.getItem(n);!t&&this.localCache[n]===a||this.notifyListeners(n,a)},i=this.storage.getItem(n);TC()&&i!==e.newValue&&e.newValue!==e.oldValue?setTimeout(s,ak):s()}notifyListeners(e,t){this.localCache[e]=t;const n=this.listeners[e];if(n)for(const s of Array.from(n))s(t&&JSON.parse(t))}startPolling(){this.stopPolling(),this.pollTimer=setInterval(()=>{this.forAllChangedKeys((e,t,n)=>{this.onStorageEvent(new StorageEvent("storage",{key:e,oldValue:t,newValue:n}),!0)})},ik)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}attachListener(){window.addEventListener("storage",this.boundEventHandler)}detachListener(){window.removeEventListener("storage",this.boundEventHandler)}_addListener(e,t){Object.keys(this.listeners).length===0&&(this.fallbackToPolling?this.startPolling():this.attachListener()),this.listeners[e]||(this.listeners[e]=new Set,this.localCache[e]=this.storage.getItem(e)),this.listeners[e].add(t)}_removeListener(e,t){this.listeners[e]&&(this.listeners[e].delete(t),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&(this.detachListener(),this.stopPolling())}async _set(e,t){await super._set(e,t),this.localCache[e]=JSON.stringify(t)}async _get(e){const t=await super._get(e);return this.localCache[e]=JSON.stringify(t),t}async _remove(e){await super._remove(e),delete this.localCache[e]}}e0.type="LOCAL";const lk=e0;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class t0 extends Zx{constructor(){super(()=>window.sessionStorage,"SESSION")}_addListener(e,t){}_removeListener(e,t){}}t0.type="SESSION";const r0=t0;/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ck(r){return Promise.all(r.map(async e=>{try{return{fulfilled:!0,value:await e}}catch(t){return{fulfilled:!1,reason:t}}}))}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ic{constructor(e){this.eventTarget=e,this.handlersMap={},this.boundEventHandler=this.handleEvent.bind(this)}static _getInstance(e){const t=this.receivers.find(s=>s.isListeningto(e));if(t)return t;const n=new ic(e);return this.receivers.push(n),n}isListeningto(e){return this.eventTarget===e}async handleEvent(e){const t=e,{eventId:n,eventType:s,data:i}=t.data,a=this.handlersMap[s];if(!(a!=null&&a.size))return;t.ports[0].postMessage({status:"ack",eventId:n,eventType:s});const l=Array.from(a).map(async d=>d(t.origin,i)),u=await ck(l);t.ports[0].postMessage({status:"done",eventId:n,eventType:s,response:u})}_subscribe(e,t){Object.keys(this.handlersMap).length===0&&this.eventTarget.addEventListener("message",this.boundEventHandler),this.handlersMap[e]||(this.handlersMap[e]=new Set),this.handlersMap[e].add(t)}_unsubscribe(e,t){this.handlersMap[e]&&t&&this.handlersMap[e].delete(t),(!t||this.handlersMap[e].size===0)&&delete this.handlersMap[e],Object.keys(this.handlersMap).length===0&&this.eventTarget.removeEventListener("message",this.boundEventHandler)}}ic.receivers=[];/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function _h(r="",e=10){let t="";for(let n=0;n<e;n++)t+=Math.floor(Math.random()*10);return r+t}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class uk{constructor(e){this.target=e,this.handlers=new Set}removeMessageHandler(e){e.messageChannel&&(e.messageChannel.port1.removeEventListener("message",e.onMessage),e.messageChannel.port1.close()),this.handlers.delete(e)}async _send(e,t,n=50){const s=typeof MessageChannel<"u"?new MessageChannel:null;if(!s)throw new Error("connection_unavailable");let i,a;return new Promise((l,u)=>{const d=_h("",20);s.port1.start();const h=setTimeout(()=>{u(new Error("unsupported_event"))},n);a={messageChannel:s,onMessage(m){const g=m;if(g.data.eventId===d)switch(g.data.status){case"ack":clearTimeout(h),i=setTimeout(()=>{u(new Error("timeout"))},3e3);break;case"done":clearTimeout(i),l(g.data.response);break;default:clearTimeout(h),clearTimeout(i),u(new Error("invalid_response"));break}}},this.handlers.add(a),s.port1.addEventListener("message",a.onMessage),this.target.postMessage({eventType:e,eventId:d,data:t},[s.port2])}).finally(()=>{a&&this.removeMessageHandler(a)})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function vr(){return window}function dk(r){vr().location.href=r}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function n0(){return typeof vr().WorkerGlobalScope<"u"&&typeof vr().importScripts=="function"}async function hk(){if(!(navigator!=null&&navigator.serviceWorker))return null;try{return(await navigator.serviceWorker.ready).active}catch{return null}}function fk(){var r;return((r=navigator==null?void 0:navigator.serviceWorker)===null||r===void 0?void 0:r.controller)||null}function mk(){return n0()?self:null}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const s0="firebaseLocalStorageDb",pk=1,_l="firebaseLocalStorage",o0="fbase_key";class ta{constructor(e){this.request=e}toPromise(){return new Promise((e,t)=>{this.request.addEventListener("success",()=>{e(this.request.result)}),this.request.addEventListener("error",()=>{t(this.request.error)})})}}function ac(r,e){return r.transaction([_l],e?"readwrite":"readonly").objectStore(_l)}function gk(){const r=indexedDB.deleteDatabase(s0);return new ta(r).toPromise()}function rd(){const r=indexedDB.open(s0,pk);return new Promise((e,t)=>{r.addEventListener("error",()=>{t(r.error)}),r.addEventListener("upgradeneeded",()=>{const n=r.result;try{n.createObjectStore(_l,{keyPath:o0})}catch(s){t(s)}}),r.addEventListener("success",async()=>{const n=r.result;n.objectStoreNames.contains(_l)?e(n):(n.close(),await gk(),e(await rd()))})})}async function yp(r,e,t){const n=ac(r,!0).put({[o0]:e,value:t});return new ta(n).toPromise()}async function yk(r,e){const t=ac(r,!1).get(e),n=await new ta(t).toPromise();return n===void 0?null:n.value}function xp(r,e){const t=ac(r,!0).delete(e);return new ta(t).toPromise()}const xk=800,bk=3;class i0{constructor(){this.type="LOCAL",this._shouldAllowMigration=!0,this.listeners={},this.localCache={},this.pollTimer=null,this.pendingWrites=0,this.receiver=null,this.sender=null,this.serviceWorkerReceiverAvailable=!1,this.activeServiceWorker=null,this._workerInitializationPromise=this.initializeServiceWorkerMessaging().then(()=>{},()=>{})}async _openDb(){return this.db?this.db:(this.db=await rd(),this.db)}async _withRetries(e){let t=0;for(;;)try{const n=await this._openDb();return await e(n)}catch(n){if(t++>bk)throw n;this.db&&(this.db.close(),this.db=void 0)}}async initializeServiceWorkerMessaging(){return n0()?this.initializeReceiver():this.initializeSender()}async initializeReceiver(){this.receiver=ic._getInstance(mk()),this.receiver._subscribe("keyChanged",async(e,t)=>({keyProcessed:(await this._poll()).includes(t.key)})),this.receiver._subscribe("ping",async(e,t)=>["keyChanged"])}async initializeSender(){var e,t;if(this.activeServiceWorker=await hk(),!this.activeServiceWorker)return;this.sender=new uk(this.activeServiceWorker);const n=await this.sender._send("ping",{},800);n&&!((e=n[0])===null||e===void 0)&&e.fulfilled&&!((t=n[0])===null||t===void 0)&&t.value.includes("keyChanged")&&(this.serviceWorkerReceiverAvailable=!0)}async notifyServiceWorker(e){if(!(!this.sender||!this.activeServiceWorker||fk()!==this.activeServiceWorker))try{await this.sender._send("keyChanged",{key:e},this.serviceWorkerReceiverAvailable?800:50)}catch{}}async _isAvailable(){try{if(!indexedDB)return!1;const e=await rd();return await yp(e,wl,"1"),await xp(e,wl),!0}catch{}return!1}async _withPendingWrite(e){this.pendingWrites++;try{await e()}finally{this.pendingWrites--}}async _set(e,t){return this._withPendingWrite(async()=>(await this._withRetries(n=>yp(n,e,t)),this.localCache[e]=t,this.notifyServiceWorker(e)))}async _get(e){const t=await this._withRetries(n=>yk(n,e));return this.localCache[e]=t,t}async _remove(e){return this._withPendingWrite(async()=>(await this._withRetries(t=>xp(t,e)),delete this.localCache[e],this.notifyServiceWorker(e)))}async _poll(){const e=await this._withRetries(s=>{const i=ac(s,!1).getAll();return new ta(i).toPromise()});if(!e)return[];if(this.pendingWrites!==0)return[];const t=[],n=new Set;if(e.length!==0)for(const{fbase_key:s,value:i}of e)n.add(s),JSON.stringify(this.localCache[s])!==JSON.stringify(i)&&(this.notifyListeners(s,i),t.push(s));for(const s of Object.keys(this.localCache))this.localCache[s]&&!n.has(s)&&(this.notifyListeners(s,null),t.push(s));return t}notifyListeners(e,t){this.localCache[e]=t;const n=this.listeners[e];if(n)for(const s of Array.from(n))s(t)}startPolling(){this.stopPolling(),this.pollTimer=setInterval(async()=>this._poll(),xk)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}_addListener(e,t){Object.keys(this.listeners).length===0&&this.startPolling(),this.listeners[e]||(this.listeners[e]=new Set,this._get(e)),this.listeners[e].add(t)}_removeListener(e,t){this.listeners[e]&&(this.listeners[e].delete(t),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&this.stopPolling()}}i0.type="LOCAL";const vk=i0;new Ji(3e4,6e4);/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function a0(r,e){return e?Fr(e):(ie(r._popupRedirectResolver,r,"argument-error"),r._popupRedirectResolver)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Th extends bh{constructor(e){super("custom","custom"),this.params=e}_getIdTokenResponse(e){return to(e,this._buildIdpRequest())}_linkToIdToken(e,t){return to(e,this._buildIdpRequest(t))}_getReauthenticationResolver(e){return to(e,this._buildIdpRequest())}_buildIdpRequest(e){const t={requestUri:this.params.requestUri,sessionId:this.params.sessionId,postBody:this.params.postBody,tenantId:this.params.tenantId,pendingToken:this.params.pendingToken,returnSecureToken:!0,returnIdpCredential:!0};return e&&(t.idToken=e),t}}function wk(r){return Xx(r.auth,new Th(r),r.bypassAuthState)}function _k(r){const{auth:e,user:t}=r;return ie(t,e,"internal-error"),XC(t,new Th(r),r.bypassAuthState)}async function Tk(r){const{auth:e,user:t}=r;return ie(t,e,"internal-error"),YC(t,new Th(r),r.bypassAuthState)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class l0{constructor(e,t,n,s,i=!1){this.auth=e,this.resolver=n,this.user=s,this.bypassAuthState=i,this.pendingPromise=null,this.eventManager=null,this.filter=Array.isArray(t)?t:[t]}execute(){return new Promise(async(e,t)=>{this.pendingPromise={resolve:e,reject:t};try{this.eventManager=await this.resolver._initialize(this.auth),await this.onExecution(),this.eventManager.registerConsumer(this)}catch(n){this.reject(n)}})}async onAuthEvent(e){const{urlResponse:t,sessionId:n,postBody:s,tenantId:i,error:a,type:l}=e;if(a){this.reject(a);return}const u={auth:this.auth,requestUri:t,sessionId:n,tenantId:i||void 0,postBody:s||void 0,user:this.user,bypassAuthState:this.bypassAuthState};try{this.resolve(await this.getIdpTask(l)(u))}catch(d){this.reject(d)}}onError(e){this.reject(e)}getIdpTask(e){switch(e){case"signInViaPopup":case"signInViaRedirect":return wk;case"linkViaPopup":case"linkViaRedirect":return Tk;case"reauthViaPopup":case"reauthViaRedirect":return _k;default:Qt(this.auth,"internal-error")}}resolve(e){zr(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.resolve(e),this.unregisterAndCleanUp()}reject(e){zr(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.reject(e),this.unregisterAndCleanUp()}unregisterAndCleanUp(){this.eventManager&&this.eventManager.unregisterConsumer(this),this.pendingPromise=null,this.cleanUp()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ek=new Ji(2e3,1e4);async function Nk(r,e,t){if(Pt(r.app))return Promise.reject(ar(r,"operation-not-supported-in-this-environment"));const n=qn(r);nC(r,e,wh);const s=a0(n,t);return new rs(n,"signInViaPopup",e,s).executeNotNull()}class rs extends l0{constructor(e,t,n,s,i){super(e,t,s,i),this.provider=n,this.authWindow=null,this.pollId=null,rs.currentPopupAction&&rs.currentPopupAction.cancel(),rs.currentPopupAction=this}async executeNotNull(){const e=await this.execute();return ie(e,this.auth,"internal-error"),e}async onExecution(){zr(this.filter.length===1,"Popup operations only handle one event");const e=_h();this.authWindow=await this.resolver._openPopup(this.auth,this.provider,this.filter[0],e),this.authWindow.associatedEvent=e,this.resolver._originValidation(this.auth).catch(t=>{this.reject(t)}),this.resolver._isIframeWebStorageSupported(this.auth,t=>{t||this.reject(ar(this.auth,"web-storage-unsupported"))}),this.pollUserCancellation()}get eventId(){var e;return((e=this.authWindow)===null||e===void 0?void 0:e.associatedEvent)||null}cancel(){this.reject(ar(this.auth,"cancelled-popup-request"))}cleanUp(){this.authWindow&&this.authWindow.close(),this.pollId&&window.clearTimeout(this.pollId),this.authWindow=null,this.pollId=null,rs.currentPopupAction=null}pollUserCancellation(){const e=()=>{var t,n;if(!((n=(t=this.authWindow)===null||t===void 0?void 0:t.window)===null||n===void 0)&&n.closed){this.pollId=window.setTimeout(()=>{this.pollId=null,this.reject(ar(this.auth,"popup-closed-by-user"))},8e3);return}this.pollId=window.setTimeout(e,Ek.get())};e()}}rs.currentPopupAction=null;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ck="pendingRedirect",Ja=new Map;class kk extends l0{constructor(e,t,n=!1){super(e,["signInViaRedirect","linkViaRedirect","reauthViaRedirect","unknown"],t,void 0,n),this.eventId=null}async execute(){let e=Ja.get(this.auth._key());if(!e){try{const n=await Sk(this.resolver,this.auth)?await super.execute():null;e=()=>Promise.resolve(n)}catch(t){e=()=>Promise.reject(t)}Ja.set(this.auth._key(),e)}return this.bypassAuthState||Ja.set(this.auth._key(),()=>Promise.resolve(null)),e()}async onAuthEvent(e){if(e.type==="signInViaRedirect")return super.onAuthEvent(e);if(e.type==="unknown"){this.resolve(null);return}if(e.eventId){const t=await this.auth._redirectUserForId(e.eventId);if(t)return this.user=t,super.onAuthEvent(e);this.resolve(null)}}async onExecution(){}cleanUp(){}}async function Sk(r,e){const t=Ak(e),n=Ik(r);if(!await n._isAvailable())return!1;const s=await n._get(t)==="true";return await n._remove(t),s}function jk(r,e){Ja.set(r._key(),e)}function Ik(r){return Fr(r._redirectPersistence)}function Ak(r){return Xa(Ck,r.config.apiKey,r.name)}async function Rk(r,e,t=!1){if(Pt(r.app))return Promise.reject(Ur(r));const n=qn(r),s=a0(n,e),a=await new kk(n,s,t).execute();return a&&!t&&(delete a.user._redirectEventId,await n._persistUserIfCurrent(a.user),await n._setRedirectUser(null,e)),a}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Pk=600*1e3;class Mk{constructor(e){this.auth=e,this.cachedEventUids=new Set,this.consumers=new Set,this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1,this.lastProcessedEventTime=Date.now()}registerConsumer(e){this.consumers.add(e),this.queuedRedirectEvent&&this.isEventForConsumer(this.queuedRedirectEvent,e)&&(this.sendToConsumer(this.queuedRedirectEvent,e),this.saveEventToCache(this.queuedRedirectEvent),this.queuedRedirectEvent=null)}unregisterConsumer(e){this.consumers.delete(e)}onEvent(e){if(this.hasEventBeenHandled(e))return!1;let t=!1;return this.consumers.forEach(n=>{this.isEventForConsumer(e,n)&&(t=!0,this.sendToConsumer(e,n),this.saveEventToCache(e))}),this.hasHandledPotentialRedirect||!Dk(e)||(this.hasHandledPotentialRedirect=!0,t||(this.queuedRedirectEvent=e,t=!0)),t}sendToConsumer(e,t){var n;if(e.error&&!c0(e)){const s=((n=e.error.code)===null||n===void 0?void 0:n.split("auth/")[1])||"internal-error";t.onError(ar(this.auth,s))}else t.onAuthEvent(e)}isEventForConsumer(e,t){const n=t.eventId===null||!!e.eventId&&e.eventId===t.eventId;return t.filter.includes(e.type)&&n}hasEventBeenHandled(e){return Date.now()-this.lastProcessedEventTime>=Pk&&this.cachedEventUids.clear(),this.cachedEventUids.has(bp(e))}saveEventToCache(e){this.cachedEventUids.add(bp(e)),this.lastProcessedEventTime=Date.now()}}function bp(r){return[r.type,r.eventId,r.sessionId,r.tenantId].filter(e=>e).join("-")}function c0({type:r,error:e}){return r==="unknown"&&(e==null?void 0:e.code)==="auth/no-auth-event"}function Dk(r){switch(r.type){case"signInViaRedirect":case"linkViaRedirect":case"reauthViaRedirect":return!0;case"unknown":return c0(r);default:return!1}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Ok(r,e={}){return Wr(r,"GET","/v1/projects",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Lk=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,Vk=/^https?/;async function Fk(r){if(r.config.emulator)return;const{authorizedDomains:e}=await Ok(r);for(const t of e)try{if(Uk(t))return}catch{}Qt(r,"unauthorized-domain")}function Uk(r){const e=Zu(),{protocol:t,hostname:n}=new URL(e);if(r.startsWith("chrome-extension://")){const a=new URL(r);return a.hostname===""&&n===""?t==="chrome-extension:"&&r.replace("chrome-extension://","")===e.replace("chrome-extension://",""):t==="chrome-extension:"&&a.hostname===n}if(!Vk.test(t))return!1;if(Lk.test(r))return n===r;const s=r.replace(/\./g,"\\.");return new RegExp("^(.+\\."+s+"|"+s+")$","i").test(n)}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const $k=new Ji(3e4,6e4);function vp(){const r=vr().___jsl;if(r!=null&&r.H){for(const e of Object.keys(r.H))if(r.H[e].r=r.H[e].r||[],r.H[e].L=r.H[e].L||[],r.H[e].r=[...r.H[e].L],r.CP)for(let t=0;t<r.CP.length;t++)r.CP[t]=null}}function Bk(r){return new Promise((e,t)=>{var n,s,i;function a(){vp(),gapi.load("gapi.iframes",{callback:()=>{e(gapi.iframes.getContext())},ontimeout:()=>{vp(),t(ar(r,"network-request-failed"))},timeout:$k.get()})}if(!((s=(n=vr().gapi)===null||n===void 0?void 0:n.iframes)===null||s===void 0)&&s.Iframe)e(gapi.iframes.getContext());else if(!((i=vr().gapi)===null||i===void 0)&&i.load)a();else{const l=RC("iframefcb");return vr()[l]=()=>{gapi.load?a():t(ar(r,"network-request-failed"))},Gx(`${AC()}?onload=${l}`).catch(u=>t(u))}}).catch(e=>{throw Za=null,e})}let Za=null;function zk(r){return Za=Za||Bk(r),Za}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const qk=new Ji(5e3,15e3),Hk="__/auth/iframe",Wk="emulator/auth/iframe",Gk={style:{position:"absolute",top:"-100px",width:"1px",height:"1px"},"aria-hidden":"true",tabindex:"-1"},Kk=new Map([["identitytoolkit.googleapis.com","p"],["staging-identitytoolkit.sandbox.googleapis.com","s"],["test-identitytoolkit.sandbox.googleapis.com","t"]]);function Qk(r){const e=r.config;ie(e.authDomain,r,"auth-domain-config-required");const t=e.emulator?gh(e,Wk):`https://${r.config.authDomain}/${Hk}`,n={apiKey:e.apiKey,appName:r.name,v:Is},s=Kk.get(r.config.apiHost);s&&(n.eid=s);const i=r._getFrameworks();return i.length&&(n.fw=i.join(",")),`${t}?${Xi(n).slice(1)}`}async function Yk(r){const e=await zk(r),t=vr().gapi;return ie(t,r,"internal-error"),e.open({where:document.body,url:Qk(r),messageHandlersFilter:t.iframes.CROSS_ORIGIN_IFRAMES_FILTER,attributes:Gk,dontclear:!0},n=>new Promise(async(s,i)=>{await n.restyle({setHideOnLeave:!1});const a=ar(r,"network-request-failed"),l=vr().setTimeout(()=>{i(a)},qk.get());function u(){vr().clearTimeout(l),s(n)}n.ping(u).then(u,()=>{i(a)})}))}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Xk={location:"yes",resizable:"yes",statusbar:"yes",toolbar:"no"},Jk=500,Zk=600,eS="_blank",tS="http://localhost";class wp{constructor(e){this.window=e,this.associatedEvent=null}close(){if(this.window)try{this.window.close()}catch{}}}function rS(r,e,t,n=Jk,s=Zk){const i=Math.max((window.screen.availHeight-s)/2,0).toString(),a=Math.max((window.screen.availWidth-n)/2,0).toString();let l="";const u=Object.assign(Object.assign({},Xk),{width:n.toString(),height:s.toString(),top:i,left:a}),d=wt().toLowerCase();t&&(l=Ux(d)?eS:t),Vx(d)&&(e=e||tS,u.scrollbars="yes");const h=Object.entries(u).reduce((g,[x,S])=>`${g}${x}=${S},`,"");if(_C(d)&&l!=="_self")return nS(e||"",l),new wp(null);const m=window.open(e||"",l,h);ie(m,r,"popup-blocked");try{m.focus()}catch{}return new wp(m)}function nS(r,e){const t=document.createElement("a");t.href=r,t.target=e;const n=document.createEvent("MouseEvent");n.initMouseEvent("click",!0,!0,window,1,0,0,0,0,!1,!1,!1,!1,1,null),t.dispatchEvent(n)}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const sS="__/auth/handler",oS="emulator/auth/handler",iS=encodeURIComponent("fac");async function _p(r,e,t,n,s,i){ie(r.config.authDomain,r,"auth-domain-config-required"),ie(r.config.apiKey,r,"invalid-api-key");const a={apiKey:r.config.apiKey,appName:r.name,authType:t,redirectUrl:n,v:Is,eventId:s};if(e instanceof wh){e.setDefaultLanguage(r.languageCode),a.providerId=e.providerId||"",BE(e.getCustomParameters())||(a.customParameters=JSON.stringify(e.getCustomParameters()));for(const[h,m]of Object.entries({}))a[h]=m}if(e instanceof ea){const h=e.getScopes().filter(m=>m!=="");h.length>0&&(a.scopes=h.join(","))}r.tenantId&&(a.tid=r.tenantId);const l=a;for(const h of Object.keys(l))l[h]===void 0&&delete l[h];const u=await r._getAppCheckToken(),d=u?`#${iS}=${encodeURIComponent(u)}`:"";return`${aS(r)}?${Xi(l).slice(1)}${d}`}function aS({config:r}){return r.emulator?gh(r,oS):`https://${r.authDomain}/${sS}`}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const vu="webStorageSupport";class lS{constructor(){this.eventManagers={},this.iframes={},this.originValidationPromises={},this._redirectPersistence=r0,this._completeRedirectFn=Rk,this._overrideRedirectResult=jk}async _openPopup(e,t,n,s){var i;zr((i=this.eventManagers[e._key()])===null||i===void 0?void 0:i.manager,"_initialize() not called before _openPopup()");const a=await _p(e,t,n,Zu(),s);return rS(e,a,_h())}async _openRedirect(e,t,n,s){await this._originValidation(e);const i=await _p(e,t,n,Zu(),s);return dk(i),new Promise(()=>{})}_initialize(e){const t=e._key();if(this.eventManagers[t]){const{manager:s,promise:i}=this.eventManagers[t];return s?Promise.resolve(s):(zr(i,"If manager is not set, promise should be"),i)}const n=this.initAndGetManager(e);return this.eventManagers[t]={promise:n},n.catch(()=>{delete this.eventManagers[t]}),n}async initAndGetManager(e){const t=await Yk(e),n=new Mk(e);return t.register("authEvent",s=>(ie(s==null?void 0:s.authEvent,e,"invalid-auth-event"),{status:n.onEvent(s.authEvent)?"ACK":"ERROR"}),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER),this.eventManagers[e._key()]={manager:n},this.iframes[e._key()]=t,n}_isIframeWebStorageSupported(e,t){this.iframes[e._key()].send(vu,{type:vu},s=>{var i;const a=(i=s==null?void 0:s[0])===null||i===void 0?void 0:i[vu];a!==void 0&&t(!!a),Qt(e,"internal-error")},gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER)}_originValidation(e){const t=e._key();return this.originValidationPromises[t]||(this.originValidationPromises[t]=Fk(e)),this.originValidationPromises[t]}get _shouldInitProactively(){return Hx()||Fx()||xh()}}const cS=lS;var Tp="@firebase/auth",Ep="1.10.8";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class uS{constructor(e){this.auth=e,this.internalListeners=new Map}getUid(){var e;return this.assertAuthConfigured(),((e=this.auth.currentUser)===null||e===void 0?void 0:e.uid)||null}async getToken(e){return this.assertAuthConfigured(),await this.auth._initializationPromise,this.auth.currentUser?{accessToken:await this.auth.currentUser.getIdToken(e)}:null}addAuthTokenListener(e){if(this.assertAuthConfigured(),this.internalListeners.has(e))return;const t=this.auth.onIdTokenChanged(n=>{e((n==null?void 0:n.stsTokenManager.accessToken)||null)});this.internalListeners.set(e,t),this.updateProactiveRefresh()}removeAuthTokenListener(e){this.assertAuthConfigured();const t=this.internalListeners.get(e);t&&(this.internalListeners.delete(e),t(),this.updateProactiveRefresh())}assertAuthConfigured(){ie(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}updateProactiveRefresh(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function dS(r){switch(r){case"Node":return"node";case"ReactNative":return"rn";case"Worker":return"webworker";case"Cordova":return"cordova";case"WebExtension":return"web-extension";default:return}}function hS(r){Nr(new lr("auth",(e,{options:t})=>{const n=e.getProvider("app").getImmediate(),s=e.getProvider("heartbeat"),i=e.getProvider("app-check-internal"),{apiKey:a,authDomain:l}=n.options;ie(a&&!a.includes(":"),"invalid-api-key",{appName:n.name});const u={apiKey:a,authDomain:l,clientPlatform:r,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:Wx(r)},d=new SC(n,s,i,u);return VC(d,t),d},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((e,t,n)=>{e.getProvider("auth-internal").initialize()})),Nr(new lr("auth-internal",e=>{const t=qn(e.getProvider("auth").getImmediate());return(n=>new uS(n))(t)},"PRIVATE").setInstantiationMode("EXPLICIT")),Ot(Tp,Ep,dS(r)),Ot(Tp,Ep,"esm2017")}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const fS=300,mS=_x("authIdTokenMaxAge")||fS;let Np=null;const pS=r=>async e=>{const t=e&&await e.getIdTokenResult(),n=t&&(new Date().getTime()-Date.parse(t.issuedAtTime))/1e3;if(n&&n>mS)return;const s=t==null?void 0:t.token;Np!==s&&(Np=s,await fetch(r,{method:s?"POST":"DELETE",headers:s?{Authorization:`Bearer ${s}`}:{}}))};function gS(r=sc()){const e=js(r,"auth");if(e.isInitialized())return e.getImmediate();const t=LC(r,{popupRedirectResolver:cS,persistence:[vk,lk,r0]}),n=_x("authTokenSyncURL");if(n&&typeof isSecureContext=="boolean"&&isSecureContext){const i=new URL(n,location.origin);if(location.origin===i.origin){const a=pS(i.toString());sk(t,a,()=>a(t.currentUser)),nk(t,l=>a(l))}}const s=bx("auth");return s&&FC(t,`http://${s}`),t}function yS(){var r,e;return(e=(r=document.getElementsByTagName("head"))===null||r===void 0?void 0:r[0])!==null&&e!==void 0?e:document}jC({loadJS(r){return new Promise((e,t)=>{const n=document.createElement("script");n.setAttribute("src",r),n.onload=e,n.onerror=s=>{const i=ar("internal-error");i.customData=s,t(i)},n.type="text/javascript",n.charset="UTF-8",yS().appendChild(n)})},gapiScript:"https://apis.google.com/js/api.js",recaptchaV2Script:"https://www.google.com/recaptcha/api.js",recaptchaEnterpriseScript:"https://www.google.com/recaptcha/enterprise.js?render="});hS("Browser");var Cp=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var En,u0;(function(){var r;/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/function e(A,w){function C(){}C.prototype=w.prototype,A.D=w.prototype,A.prototype=new C,A.prototype.constructor=A,A.C=function(j,_,M){for(var I=Array(arguments.length-2),X=2;X<arguments.length;X++)I[X-2]=arguments[X];return w.prototype[_].apply(j,I)}}function t(){this.blockSize=-1}function n(){this.blockSize=-1,this.blockSize=64,this.g=Array(4),this.B=Array(this.blockSize),this.o=this.h=0,this.s()}e(n,t),n.prototype.s=function(){this.g[0]=1732584193,this.g[1]=4023233417,this.g[2]=2562383102,this.g[3]=271733878,this.o=this.h=0};function s(A,w,C){C||(C=0);var j=Array(16);if(typeof w=="string")for(var _=0;16>_;++_)j[_]=w.charCodeAt(C++)|w.charCodeAt(C++)<<8|w.charCodeAt(C++)<<16|w.charCodeAt(C++)<<24;else for(_=0;16>_;++_)j[_]=w[C++]|w[C++]<<8|w[C++]<<16|w[C++]<<24;w=A.g[0],C=A.g[1],_=A.g[2];var M=A.g[3],I=w+(M^C&(_^M))+j[0]+3614090360&4294967295;w=C+(I<<7&4294967295|I>>>25),I=M+(_^w&(C^_))+j[1]+3905402710&4294967295,M=w+(I<<12&4294967295|I>>>20),I=_+(C^M&(w^C))+j[2]+606105819&4294967295,_=M+(I<<17&4294967295|I>>>15),I=C+(w^_&(M^w))+j[3]+3250441966&4294967295,C=_+(I<<22&4294967295|I>>>10),I=w+(M^C&(_^M))+j[4]+4118548399&4294967295,w=C+(I<<7&4294967295|I>>>25),I=M+(_^w&(C^_))+j[5]+1200080426&4294967295,M=w+(I<<12&4294967295|I>>>20),I=_+(C^M&(w^C))+j[6]+2821735955&4294967295,_=M+(I<<17&4294967295|I>>>15),I=C+(w^_&(M^w))+j[7]+4249261313&4294967295,C=_+(I<<22&4294967295|I>>>10),I=w+(M^C&(_^M))+j[8]+1770035416&4294967295,w=C+(I<<7&4294967295|I>>>25),I=M+(_^w&(C^_))+j[9]+2336552879&4294967295,M=w+(I<<12&4294967295|I>>>20),I=_+(C^M&(w^C))+j[10]+4294925233&4294967295,_=M+(I<<17&4294967295|I>>>15),I=C+(w^_&(M^w))+j[11]+2304563134&4294967295,C=_+(I<<22&4294967295|I>>>10),I=w+(M^C&(_^M))+j[12]+1804603682&4294967295,w=C+(I<<7&4294967295|I>>>25),I=M+(_^w&(C^_))+j[13]+4254626195&4294967295,M=w+(I<<12&4294967295|I>>>20),I=_+(C^M&(w^C))+j[14]+2792965006&4294967295,_=M+(I<<17&4294967295|I>>>15),I=C+(w^_&(M^w))+j[15]+1236535329&4294967295,C=_+(I<<22&4294967295|I>>>10),I=w+(_^M&(C^_))+j[1]+4129170786&4294967295,w=C+(I<<5&4294967295|I>>>27),I=M+(C^_&(w^C))+j[6]+3225465664&4294967295,M=w+(I<<9&4294967295|I>>>23),I=_+(w^C&(M^w))+j[11]+643717713&4294967295,_=M+(I<<14&4294967295|I>>>18),I=C+(M^w&(_^M))+j[0]+3921069994&4294967295,C=_+(I<<20&4294967295|I>>>12),I=w+(_^M&(C^_))+j[5]+3593408605&4294967295,w=C+(I<<5&4294967295|I>>>27),I=M+(C^_&(w^C))+j[10]+38016083&4294967295,M=w+(I<<9&4294967295|I>>>23),I=_+(w^C&(M^w))+j[15]+3634488961&4294967295,_=M+(I<<14&4294967295|I>>>18),I=C+(M^w&(_^M))+j[4]+3889429448&4294967295,C=_+(I<<20&4294967295|I>>>12),I=w+(_^M&(C^_))+j[9]+568446438&4294967295,w=C+(I<<5&4294967295|I>>>27),I=M+(C^_&(w^C))+j[14]+3275163606&4294967295,M=w+(I<<9&4294967295|I>>>23),I=_+(w^C&(M^w))+j[3]+4107603335&4294967295,_=M+(I<<14&4294967295|I>>>18),I=C+(M^w&(_^M))+j[8]+1163531501&4294967295,C=_+(I<<20&4294967295|I>>>12),I=w+(_^M&(C^_))+j[13]+2850285829&4294967295,w=C+(I<<5&4294967295|I>>>27),I=M+(C^_&(w^C))+j[2]+4243563512&4294967295,M=w+(I<<9&4294967295|I>>>23),I=_+(w^C&(M^w))+j[7]+1735328473&4294967295,_=M+(I<<14&4294967295|I>>>18),I=C+(M^w&(_^M))+j[12]+2368359562&4294967295,C=_+(I<<20&4294967295|I>>>12),I=w+(C^_^M)+j[5]+4294588738&4294967295,w=C+(I<<4&4294967295|I>>>28),I=M+(w^C^_)+j[8]+2272392833&4294967295,M=w+(I<<11&4294967295|I>>>21),I=_+(M^w^C)+j[11]+1839030562&4294967295,_=M+(I<<16&4294967295|I>>>16),I=C+(_^M^w)+j[14]+4259657740&4294967295,C=_+(I<<23&4294967295|I>>>9),I=w+(C^_^M)+j[1]+2763975236&4294967295,w=C+(I<<4&4294967295|I>>>28),I=M+(w^C^_)+j[4]+1272893353&4294967295,M=w+(I<<11&4294967295|I>>>21),I=_+(M^w^C)+j[7]+4139469664&4294967295,_=M+(I<<16&4294967295|I>>>16),I=C+(_^M^w)+j[10]+3200236656&4294967295,C=_+(I<<23&4294967295|I>>>9),I=w+(C^_^M)+j[13]+681279174&4294967295,w=C+(I<<4&4294967295|I>>>28),I=M+(w^C^_)+j[0]+3936430074&4294967295,M=w+(I<<11&4294967295|I>>>21),I=_+(M^w^C)+j[3]+3572445317&4294967295,_=M+(I<<16&4294967295|I>>>16),I=C+(_^M^w)+j[6]+76029189&4294967295,C=_+(I<<23&4294967295|I>>>9),I=w+(C^_^M)+j[9]+3654602809&4294967295,w=C+(I<<4&4294967295|I>>>28),I=M+(w^C^_)+j[12]+3873151461&4294967295,M=w+(I<<11&4294967295|I>>>21),I=_+(M^w^C)+j[15]+530742520&4294967295,_=M+(I<<16&4294967295|I>>>16),I=C+(_^M^w)+j[2]+3299628645&4294967295,C=_+(I<<23&4294967295|I>>>9),I=w+(_^(C|~M))+j[0]+4096336452&4294967295,w=C+(I<<6&4294967295|I>>>26),I=M+(C^(w|~_))+j[7]+1126891415&4294967295,M=w+(I<<10&4294967295|I>>>22),I=_+(w^(M|~C))+j[14]+2878612391&4294967295,_=M+(I<<15&4294967295|I>>>17),I=C+(M^(_|~w))+j[5]+4237533241&4294967295,C=_+(I<<21&4294967295|I>>>11),I=w+(_^(C|~M))+j[12]+1700485571&4294967295,w=C+(I<<6&4294967295|I>>>26),I=M+(C^(w|~_))+j[3]+2399980690&4294967295,M=w+(I<<10&4294967295|I>>>22),I=_+(w^(M|~C))+j[10]+4293915773&4294967295,_=M+(I<<15&4294967295|I>>>17),I=C+(M^(_|~w))+j[1]+2240044497&4294967295,C=_+(I<<21&4294967295|I>>>11),I=w+(_^(C|~M))+j[8]+1873313359&4294967295,w=C+(I<<6&4294967295|I>>>26),I=M+(C^(w|~_))+j[15]+4264355552&4294967295,M=w+(I<<10&4294967295|I>>>22),I=_+(w^(M|~C))+j[6]+2734768916&4294967295,_=M+(I<<15&4294967295|I>>>17),I=C+(M^(_|~w))+j[13]+1309151649&4294967295,C=_+(I<<21&4294967295|I>>>11),I=w+(_^(C|~M))+j[4]+4149444226&4294967295,w=C+(I<<6&4294967295|I>>>26),I=M+(C^(w|~_))+j[11]+3174756917&4294967295,M=w+(I<<10&4294967295|I>>>22),I=_+(w^(M|~C))+j[2]+718787259&4294967295,_=M+(I<<15&4294967295|I>>>17),I=C+(M^(_|~w))+j[9]+3951481745&4294967295,A.g[0]=A.g[0]+w&4294967295,A.g[1]=A.g[1]+(_+(I<<21&4294967295|I>>>11))&4294967295,A.g[2]=A.g[2]+_&4294967295,A.g[3]=A.g[3]+M&4294967295}n.prototype.u=function(A,w){w===void 0&&(w=A.length);for(var C=w-this.blockSize,j=this.B,_=this.h,M=0;M<w;){if(_==0)for(;M<=C;)s(this,A,M),M+=this.blockSize;if(typeof A=="string"){for(;M<w;)if(j[_++]=A.charCodeAt(M++),_==this.blockSize){s(this,j),_=0;break}}else for(;M<w;)if(j[_++]=A[M++],_==this.blockSize){s(this,j),_=0;break}}this.h=_,this.o+=w},n.prototype.v=function(){var A=Array((56>this.h?this.blockSize:2*this.blockSize)-this.h);A[0]=128;for(var w=1;w<A.length-8;++w)A[w]=0;var C=8*this.o;for(w=A.length-8;w<A.length;++w)A[w]=C&255,C/=256;for(this.u(A),A=Array(16),w=C=0;4>w;++w)for(var j=0;32>j;j+=8)A[C++]=this.g[w]>>>j&255;return A};function i(A,w){var C=l;return Object.prototype.hasOwnProperty.call(C,A)?C[A]:C[A]=w(A)}function a(A,w){this.h=w;for(var C=[],j=!0,_=A.length-1;0<=_;_--){var M=A[_]|0;j&&M==w||(C[_]=M,j=!1)}this.g=C}var l={};function u(A){return-128<=A&&128>A?i(A,function(w){return new a([w|0],0>w?-1:0)}):new a([A|0],0>A?-1:0)}function d(A){if(isNaN(A)||!isFinite(A))return m;if(0>A)return v(d(-A));for(var w=[],C=1,j=0;A>=C;j++)w[j]=A/C|0,C*=4294967296;return new a(w,0)}function h(A,w){if(A.length==0)throw Error("number format error: empty string");if(w=w||10,2>w||36<w)throw Error("radix out of range: "+w);if(A.charAt(0)=="-")return v(h(A.substring(1),w));if(0<=A.indexOf("-"))throw Error('number format error: interior "-" character');for(var C=d(Math.pow(w,8)),j=m,_=0;_<A.length;_+=8){var M=Math.min(8,A.length-_),I=parseInt(A.substring(_,_+M),w);8>M?(M=d(Math.pow(w,M)),j=j.j(M).add(d(I))):(j=j.j(C),j=j.add(d(I)))}return j}var m=u(0),g=u(1),x=u(16777216);r=a.prototype,r.m=function(){if(b(this))return-v(this).m();for(var A=0,w=1,C=0;C<this.g.length;C++){var j=this.i(C);A+=(0<=j?j:4294967296+j)*w,w*=4294967296}return A},r.toString=function(A){if(A=A||10,2>A||36<A)throw Error("radix out of range: "+A);if(S(this))return"0";if(b(this))return"-"+v(this).toString(A);for(var w=d(Math.pow(A,6)),C=this,j="";;){var _=P(C,w).g;C=E(C,_.j(w));var M=((0<C.g.length?C.g[0]:C.h)>>>0).toString(A);if(C=_,S(C))return M+j;for(;6>M.length;)M="0"+M;j=M+j}},r.i=function(A){return 0>A?0:A<this.g.length?this.g[A]:this.h};function S(A){if(A.h!=0)return!1;for(var w=0;w<A.g.length;w++)if(A.g[w]!=0)return!1;return!0}function b(A){return A.h==-1}r.l=function(A){return A=E(this,A),b(A)?-1:S(A)?0:1};function v(A){for(var w=A.g.length,C=[],j=0;j<w;j++)C[j]=~A.g[j];return new a(C,~A.h).add(g)}r.abs=function(){return b(this)?v(this):this},r.add=function(A){for(var w=Math.max(this.g.length,A.g.length),C=[],j=0,_=0;_<=w;_++){var M=j+(this.i(_)&65535)+(A.i(_)&65535),I=(M>>>16)+(this.i(_)>>>16)+(A.i(_)>>>16);j=I>>>16,M&=65535,I&=65535,C[_]=I<<16|M}return new a(C,C[C.length-1]&-2147483648?-1:0)};function E(A,w){return A.add(v(w))}r.j=function(A){if(S(this)||S(A))return m;if(b(this))return b(A)?v(this).j(v(A)):v(v(this).j(A));if(b(A))return v(this.j(v(A)));if(0>this.l(x)&&0>A.l(x))return d(this.m()*A.m());for(var w=this.g.length+A.g.length,C=[],j=0;j<2*w;j++)C[j]=0;for(j=0;j<this.g.length;j++)for(var _=0;_<A.g.length;_++){var M=this.i(j)>>>16,I=this.i(j)&65535,X=A.i(_)>>>16,le=A.i(_)&65535;C[2*j+2*_]+=I*le,T(C,2*j+2*_),C[2*j+2*_+1]+=M*le,T(C,2*j+2*_+1),C[2*j+2*_+1]+=I*X,T(C,2*j+2*_+1),C[2*j+2*_+2]+=M*X,T(C,2*j+2*_+2)}for(j=0;j<w;j++)C[j]=C[2*j+1]<<16|C[2*j];for(j=w;j<2*w;j++)C[j]=0;return new a(C,0)};function T(A,w){for(;(A[w]&65535)!=A[w];)A[w+1]+=A[w]>>>16,A[w]&=65535,w++}function N(A,w){this.g=A,this.h=w}function P(A,w){if(S(w))throw Error("division by zero");if(S(A))return new N(m,m);if(b(A))return w=P(v(A),w),new N(v(w.g),v(w.h));if(b(w))return w=P(A,v(w)),new N(v(w.g),w.h);if(30<A.g.length){if(b(A)||b(w))throw Error("slowDivide_ only works with positive integers.");for(var C=g,j=w;0>=j.l(A);)C=F(C),j=F(j);var _=U(C,1),M=U(j,1);for(j=U(j,2),C=U(C,2);!S(j);){var I=M.add(j);0>=I.l(A)&&(_=_.add(C),M=I),j=U(j,1),C=U(C,1)}return w=E(A,_.j(w)),new N(_,w)}for(_=m;0<=A.l(w);){for(C=Math.max(1,Math.floor(A.m()/w.m())),j=Math.ceil(Math.log(C)/Math.LN2),j=48>=j?1:Math.pow(2,j-48),M=d(C),I=M.j(w);b(I)||0<I.l(A);)C-=j,M=d(C),I=M.j(w);S(M)&&(M=g),_=_.add(M),A=E(A,I)}return new N(_,A)}r.A=function(A){return P(this,A).h},r.and=function(A){for(var w=Math.max(this.g.length,A.g.length),C=[],j=0;j<w;j++)C[j]=this.i(j)&A.i(j);return new a(C,this.h&A.h)},r.or=function(A){for(var w=Math.max(this.g.length,A.g.length),C=[],j=0;j<w;j++)C[j]=this.i(j)|A.i(j);return new a(C,this.h|A.h)},r.xor=function(A){for(var w=Math.max(this.g.length,A.g.length),C=[],j=0;j<w;j++)C[j]=this.i(j)^A.i(j);return new a(C,this.h^A.h)};function F(A){for(var w=A.g.length+1,C=[],j=0;j<w;j++)C[j]=A.i(j)<<1|A.i(j-1)>>>31;return new a(C,A.h)}function U(A,w){var C=w>>5;w%=32;for(var j=A.g.length-C,_=[],M=0;M<j;M++)_[M]=0<w?A.i(M+C)>>>w|A.i(M+C+1)<<32-w:A.i(M+C);return new a(_,A.h)}n.prototype.digest=n.prototype.v,n.prototype.reset=n.prototype.s,n.prototype.update=n.prototype.u,u0=n,a.prototype.add=a.prototype.add,a.prototype.multiply=a.prototype.j,a.prototype.modulo=a.prototype.A,a.prototype.compare=a.prototype.l,a.prototype.toNumber=a.prototype.m,a.prototype.toString=a.prototype.toString,a.prototype.getBits=a.prototype.i,a.fromNumber=d,a.fromString=h,En=a}).apply(typeof Cp<"u"?Cp:typeof self<"u"?self:typeof window<"u"?window:{});var La=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var d0,yi,h0,el,nd,f0,m0,p0;(function(){var r,e=typeof Object.defineProperties=="function"?Object.defineProperty:function(c,f,y){return c==Array.prototype||c==Object.prototype||(c[f]=y.value),c};function t(c){c=[typeof globalThis=="object"&&globalThis,c,typeof window=="object"&&window,typeof self=="object"&&self,typeof La=="object"&&La];for(var f=0;f<c.length;++f){var y=c[f];if(y&&y.Math==Math)return y}throw Error("Cannot find global object")}var n=t(this);function s(c,f){if(f)e:{var y=n;c=c.split(".");for(var k=0;k<c.length-1;k++){var O=c[k];if(!(O in y))break e;y=y[O]}c=c[c.length-1],k=y[c],f=f(k),f!=k&&f!=null&&e(y,c,{configurable:!0,writable:!0,value:f})}}function i(c,f){c instanceof String&&(c+="");var y=0,k=!1,O={next:function(){if(!k&&y<c.length){var V=y++;return{value:f(V,c[V]),done:!1}}return k=!0,{done:!0,value:void 0}}};return O[Symbol.iterator]=function(){return O},O}s("Array.prototype.values",function(c){return c||function(){return i(this,function(f,y){return y})}});/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/var a=a||{},l=this||self;function u(c){var f=typeof c;return f=f!="object"?f:c?Array.isArray(c)?"array":f:"null",f=="array"||f=="object"&&typeof c.length=="number"}function d(c){var f=typeof c;return f=="object"&&c!=null||f=="function"}function h(c,f,y){return c.call.apply(c.bind,arguments)}function m(c,f,y){if(!c)throw Error();if(2<arguments.length){var k=Array.prototype.slice.call(arguments,2);return function(){var O=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(O,k),c.apply(f,O)}}return function(){return c.apply(f,arguments)}}function g(c,f,y){return g=Function.prototype.bind&&Function.prototype.bind.toString().indexOf("native code")!=-1?h:m,g.apply(null,arguments)}function x(c,f){var y=Array.prototype.slice.call(arguments,1);return function(){var k=y.slice();return k.push.apply(k,arguments),c.apply(this,k)}}function S(c,f){function y(){}y.prototype=f.prototype,c.aa=f.prototype,c.prototype=new y,c.prototype.constructor=c,c.Qb=function(k,O,V){for(var q=Array(arguments.length-2),Ae=2;Ae<arguments.length;Ae++)q[Ae-2]=arguments[Ae];return f.prototype[O].apply(k,q)}}function b(c){const f=c.length;if(0<f){const y=Array(f);for(let k=0;k<f;k++)y[k]=c[k];return y}return[]}function v(c,f){for(let y=1;y<arguments.length;y++){const k=arguments[y];if(u(k)){const O=c.length||0,V=k.length||0;c.length=O+V;for(let q=0;q<V;q++)c[O+q]=k[q]}else c.push(k)}}class E{constructor(f,y){this.i=f,this.j=y,this.h=0,this.g=null}get(){let f;return 0<this.h?(this.h--,f=this.g,this.g=f.next,f.next=null):f=this.i(),f}}function T(c){return/^[\s\xa0]*$/.test(c)}function N(){var c=l.navigator;return c&&(c=c.userAgent)?c:""}function P(c){return P[" "](c),c}P[" "]=function(){};var F=N().indexOf("Gecko")!=-1&&!(N().toLowerCase().indexOf("webkit")!=-1&&N().indexOf("Edge")==-1)&&!(N().indexOf("Trident")!=-1||N().indexOf("MSIE")!=-1)&&N().indexOf("Edge")==-1;function U(c,f,y){for(const k in c)f.call(y,c[k],k,c)}function A(c,f){for(const y in c)f.call(void 0,c[y],y,c)}function w(c){const f={};for(const y in c)f[y]=c[y];return f}const C="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function j(c,f){let y,k;for(let O=1;O<arguments.length;O++){k=arguments[O];for(y in k)c[y]=k[y];for(let V=0;V<C.length;V++)y=C[V],Object.prototype.hasOwnProperty.call(k,y)&&(c[y]=k[y])}}function _(c){var f=1;c=c.split(":");const y=[];for(;0<f&&c.length;)y.push(c.shift()),f--;return c.length&&y.push(c.join(":")),y}function M(c){l.setTimeout(()=>{throw c},0)}function I(){var c=z;let f=null;return c.g&&(f=c.g,c.g=c.g.next,c.g||(c.h=null),f.next=null),f}class X{constructor(){this.h=this.g=null}add(f,y){const k=le.get();k.set(f,y),this.h?this.h.next=k:this.g=k,this.h=k}}var le=new E(()=>new he,c=>c.reset());class he{constructor(){this.next=this.g=this.h=null}set(f,y){this.h=f,this.g=y,this.next=null}reset(){this.next=this.g=this.h=null}}let ee,R=!1,z=new X,H=()=>{const c=l.Promise.resolve(void 0);ee=()=>{c.then(xe)}};var xe=()=>{for(var c;c=I();){try{c.h.call(c.g)}catch(y){M(y)}var f=le;f.j(c),100>f.h&&(f.h++,c.next=f.g,f.g=c)}R=!1};function ze(){this.s=this.s,this.C=this.C}ze.prototype.s=!1,ze.prototype.ma=function(){this.s||(this.s=!0,this.N())},ze.prototype.N=function(){if(this.C)for(;this.C.length;)this.C.shift()()};function W(c,f){this.type=c,this.g=this.target=f,this.defaultPrevented=!1}W.prototype.h=function(){this.defaultPrevented=!0};var J=function(){if(!l.addEventListener||!Object.defineProperty)return!1;var c=!1,f=Object.defineProperty({},"passive",{get:function(){c=!0}});try{const y=()=>{};l.addEventListener("test",y,f),l.removeEventListener("test",y,f)}catch{}return c}();function Ee(c,f){if(W.call(this,c?c.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,c){var y=this.type=c.type,k=c.changedTouches&&c.changedTouches.length?c.changedTouches[0]:null;if(this.target=c.target||c.srcElement,this.g=f,f=c.relatedTarget){if(F){e:{try{P(f.nodeName);var O=!0;break e}catch{}O=!1}O||(f=null)}}else y=="mouseover"?f=c.fromElement:y=="mouseout"&&(f=c.toElement);this.relatedTarget=f,k?(this.clientX=k.clientX!==void 0?k.clientX:k.pageX,this.clientY=k.clientY!==void 0?k.clientY:k.pageY,this.screenX=k.screenX||0,this.screenY=k.screenY||0):(this.clientX=c.clientX!==void 0?c.clientX:c.pageX,this.clientY=c.clientY!==void 0?c.clientY:c.pageY,this.screenX=c.screenX||0,this.screenY=c.screenY||0),this.button=c.button,this.key=c.key||"",this.ctrlKey=c.ctrlKey,this.altKey=c.altKey,this.shiftKey=c.shiftKey,this.metaKey=c.metaKey,this.pointerId=c.pointerId||0,this.pointerType=typeof c.pointerType=="string"?c.pointerType:ht[c.pointerType]||"",this.state=c.state,this.i=c,c.defaultPrevented&&Ee.aa.h.call(this)}}S(Ee,W);var ht={2:"touch",3:"pen",4:"mouse"};Ee.prototype.h=function(){Ee.aa.h.call(this);var c=this.i;c.preventDefault?c.preventDefault():c.returnValue=!1};var ft="closure_listenable_"+(1e6*Math.random()|0),Lt=0;function Go(c,f,y,k,O){this.listener=c,this.proxy=null,this.src=f,this.type=y,this.capture=!!k,this.ha=O,this.key=++Lt,this.da=this.fa=!1}function Kr(c){c.da=!0,c.listener=null,c.proxy=null,c.src=null,c.ha=null}function Qr(c){this.src=c,this.g={},this.h=0}Qr.prototype.add=function(c,f,y,k,O){var V=c.toString();c=this.g[V],c||(c=this.g[V]=[],this.h++);var q=Ko(c,f,k,O);return-1<q?(f=c[q],y||(f.fa=!1)):(f=new Go(f,this.src,V,!!k,O),f.fa=y,c.push(f)),f};function Kn(c,f){var y=f.type;if(y in c.g){var k=c.g[y],O=Array.prototype.indexOf.call(k,f,void 0),V;(V=0<=O)&&Array.prototype.splice.call(k,O,1),V&&(Kr(f),c.g[y].length==0&&(delete c.g[y],c.h--))}}function Ko(c,f,y,k){for(var O=0;O<c.length;++O){var V=c[O];if(!V.da&&V.listener==f&&V.capture==!!y&&V.ha==k)return O}return-1}var Qo="closure_lm_"+(1e6*Math.random()|0),L={};function fe(c,f,y,k,O){if(Array.isArray(f)){for(var V=0;V<f.length;V++)fe(c,f[V],y,k,O);return null}return y=Yr(y),c&&c[ft]?c.K(f,y,d(k)?!!k.capture:!1,O):pe(c,f,y,!1,k,O)}function pe(c,f,y,k,O,V){if(!f)throw Error("Invalid event type");var q=d(O)?!!O.capture:!!O,Ae=Jt(c);if(Ae||(c[Qo]=Ae=new Qr(c)),y=Ae.add(f,y,k,q,V),y.proxy)return y;if(k=Se(),y.proxy=k,k.src=c,k.listener=y,c.addEventListener)J||(O=q),O===void 0&&(O=!1),c.addEventListener(f.toString(),k,O);else if(c.attachEvent)c.attachEvent(Xt(f.toString()),k);else if(c.addListener&&c.removeListener)c.addListener(k);else throw Error("addEventListener and attachEvent are unavailable.");return y}function Se(){function c(y){return f.call(c.src,c.listener,y)}const f=Qn;return c}function Ie(c,f,y,k,O){if(Array.isArray(f))for(var V=0;V<f.length;V++)Ie(c,f[V],y,k,O);else k=d(k)?!!k.capture:!!k,y=Yr(y),c&&c[ft]?(c=c.i,f=String(f).toString(),f in c.g&&(V=c.g[f],y=Ko(V,y,k,O),-1<y&&(Kr(V[y]),Array.prototype.splice.call(V,y,1),V.length==0&&(delete c.g[f],c.h--)))):c&&(c=Jt(c))&&(f=c.g[f.toString()],c=-1,f&&(c=Ko(f,y,k,O)),(y=-1<c?f[c]:null)&&Ue(y))}function Ue(c){if(typeof c!="number"&&c&&!c.da){var f=c.src;if(f&&f[ft])Kn(f.i,c);else{var y=c.type,k=c.proxy;f.removeEventListener?f.removeEventListener(y,k,c.capture):f.detachEvent?f.detachEvent(Xt(y),k):f.addListener&&f.removeListener&&f.removeListener(k),(y=Jt(f))?(Kn(y,c),y.h==0&&(y.src=null,f[Qo]=null)):Kr(c)}}}function Xt(c){return c in L?L[c]:L[c]="on"+c}function Qn(c,f){if(c.da)c=!0;else{f=new Ee(f,this);var y=c.listener,k=c.ha||c.src;c.fa&&Ue(c),c=y.call(k,f)}return c}function Jt(c){return c=c[Qo],c instanceof Qr?c:null}var Ir="__closure_events_fn_"+(1e9*Math.random()>>>0);function Yr(c){return typeof c=="function"?c:(c[Ir]||(c[Ir]=function(f){return c.handleEvent(f)}),c[Ir])}function rt(){ze.call(this),this.i=new Qr(this),this.M=this,this.F=null}S(rt,ze),rt.prototype[ft]=!0,rt.prototype.removeEventListener=function(c,f,y,k){Ie(this,c,f,y,k)};function _t(c,f){var y,k=c.F;if(k)for(y=[];k;k=k.F)y.push(k);if(c=c.M,k=f.type||f,typeof f=="string")f=new W(f,c);else if(f instanceof W)f.target=f.target||c;else{var O=f;f=new W(k,c),j(f,O)}if(O=!0,y)for(var V=y.length-1;0<=V;V--){var q=f.g=y[V];O=xa(q,k,!0,f)&&O}if(q=f.g=c,O=xa(q,k,!0,f)&&O,O=xa(q,k,!1,f)&&O,y)for(V=0;V<y.length;V++)q=f.g=y[V],O=xa(q,k,!1,f)&&O}rt.prototype.N=function(){if(rt.aa.N.call(this),this.i){var c=this.i,f;for(f in c.g){for(var y=c.g[f],k=0;k<y.length;k++)Kr(y[k]);delete c.g[f],c.h--}}this.F=null},rt.prototype.K=function(c,f,y,k){return this.i.add(String(c),f,!1,y,k)},rt.prototype.L=function(c,f,y,k){return this.i.add(String(c),f,!0,y,k)};function xa(c,f,y,k){if(f=c.i.g[String(f)],!f)return!0;f=f.concat();for(var O=!0,V=0;V<f.length;++V){var q=f[V];if(q&&!q.da&&q.capture==y){var Ae=q.listener,lt=q.ha||q.src;q.fa&&Kn(c.i,q),O=Ae.call(lt,k)!==!1&&O}}return O&&!k.defaultPrevented}function Zf(c,f,y){if(typeof c=="function")y&&(c=g(c,y));else if(c&&typeof c.handleEvent=="function")c=g(c.handleEvent,c);else throw Error("Invalid listener argument");return 2147483647<Number(f)?-1:l.setTimeout(c,f||0)}function em(c){c.g=Zf(()=>{c.g=null,c.i&&(c.i=!1,em(c))},c.l);const f=c.h;c.h=null,c.m.apply(null,f)}class TT extends ze{constructor(f,y){super(),this.m=f,this.l=y,this.h=null,this.i=!1,this.g=null}j(f){this.h=arguments,this.g?this.i=!0:em(this)}N(){super.N(),this.g&&(l.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function Yo(c){ze.call(this),this.h=c,this.g={}}S(Yo,ze);var tm=[];function rm(c){U(c.g,function(f,y){this.g.hasOwnProperty(y)&&Ue(f)},c),c.g={}}Yo.prototype.N=function(){Yo.aa.N.call(this),rm(this)},Yo.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")};var Xc=l.JSON.stringify,ET=l.JSON.parse,NT=class{stringify(c){return l.JSON.stringify(c,void 0)}parse(c){return l.JSON.parse(c,void 0)}};function Jc(){}Jc.prototype.h=null;function nm(c){return c.h||(c.h=c.i())}function sm(){}var Xo={OPEN:"a",kb:"b",Ja:"c",wb:"d"};function Zc(){W.call(this,"d")}S(Zc,W);function eu(){W.call(this,"c")}S(eu,W);var Yn={},om=null;function ba(){return om=om||new rt}Yn.La="serverreachability";function im(c){W.call(this,Yn.La,c)}S(im,W);function Jo(c){const f=ba();_t(f,new im(f))}Yn.STAT_EVENT="statevent";function am(c,f){W.call(this,Yn.STAT_EVENT,c),this.stat=f}S(am,W);function Tt(c){const f=ba();_t(f,new am(f,c))}Yn.Ma="timingevent";function lm(c,f){W.call(this,Yn.Ma,c),this.size=f}S(lm,W);function Zo(c,f){if(typeof c!="function")throw Error("Fn must not be null and must be a function");return l.setTimeout(function(){c()},f)}function ei(){this.g=!0}ei.prototype.xa=function(){this.g=!1};function CT(c,f,y,k,O,V){c.info(function(){if(c.g)if(V)for(var q="",Ae=V.split("&"),lt=0;lt<Ae.length;lt++){var Ne=Ae[lt].split("=");if(1<Ne.length){var mt=Ne[0];Ne=Ne[1];var pt=mt.split("_");q=2<=pt.length&&pt[1]=="type"?q+(mt+"="+Ne+"&"):q+(mt+"=redacted&")}}else q=null;else q=V;return"XMLHTTP REQ ("+k+") [attempt "+O+"]: "+f+`
`+y+`
`+q})}function kT(c,f,y,k,O,V,q){c.info(function(){return"XMLHTTP RESP ("+k+") [ attempt "+O+"]: "+f+`
`+y+`
`+V+" "+q})}function Ps(c,f,y,k){c.info(function(){return"XMLHTTP TEXT ("+f+"): "+jT(c,y)+(k?" "+k:"")})}function ST(c,f){c.info(function(){return"TIMEOUT: "+f})}ei.prototype.info=function(){};function jT(c,f){if(!c.g)return f;if(!f)return null;try{var y=JSON.parse(f);if(y){for(c=0;c<y.length;c++)if(Array.isArray(y[c])){var k=y[c];if(!(2>k.length)){var O=k[1];if(Array.isArray(O)&&!(1>O.length)){var V=O[0];if(V!="noop"&&V!="stop"&&V!="close")for(var q=1;q<O.length;q++)O[q]=""}}}}return Xc(y)}catch{return f}}var va={NO_ERROR:0,gb:1,tb:2,sb:3,nb:4,rb:5,ub:6,Ia:7,TIMEOUT:8,xb:9},cm={lb:"complete",Hb:"success",Ja:"error",Ia:"abort",zb:"ready",Ab:"readystatechange",TIMEOUT:"timeout",vb:"incrementaldata",yb:"progress",ob:"downloadprogress",Pb:"uploadprogress"},tu;function wa(){}S(wa,Jc),wa.prototype.g=function(){return new XMLHttpRequest},wa.prototype.i=function(){return{}},tu=new wa;function Xr(c,f,y,k){this.j=c,this.i=f,this.l=y,this.R=k||1,this.U=new Yo(this),this.I=45e3,this.H=null,this.o=!1,this.m=this.A=this.v=this.L=this.F=this.S=this.B=null,this.D=[],this.g=null,this.C=0,this.s=this.u=null,this.X=-1,this.J=!1,this.O=0,this.M=null,this.W=this.K=this.T=this.P=!1,this.h=new um}function um(){this.i=null,this.g="",this.h=!1}var dm={},ru={};function nu(c,f,y){c.L=1,c.v=Na(Ar(f)),c.m=y,c.P=!0,hm(c,null)}function hm(c,f){c.F=Date.now(),_a(c),c.A=Ar(c.v);var y=c.A,k=c.R;Array.isArray(k)||(k=[String(k)]),Cm(y.i,"t",k),c.C=0,y=c.j.J,c.h=new um,c.g=qm(c.j,y?f:null,!c.m),0<c.O&&(c.M=new TT(g(c.Y,c,c.g),c.O)),f=c.U,y=c.g,k=c.ca;var O="readystatechange";Array.isArray(O)||(O&&(tm[0]=O.toString()),O=tm);for(var V=0;V<O.length;V++){var q=fe(y,O[V],k||f.handleEvent,!1,f.h||f);if(!q)break;f.g[q.key]=q}f=c.H?w(c.H):{},c.m?(c.u||(c.u="POST"),f["Content-Type"]="application/x-www-form-urlencoded",c.g.ea(c.A,c.u,c.m,f)):(c.u="GET",c.g.ea(c.A,c.u,null,f)),Jo(),CT(c.i,c.u,c.A,c.l,c.R,c.m)}Xr.prototype.ca=function(c){c=c.target;const f=this.M;f&&Rr(c)==3?f.j():this.Y(c)},Xr.prototype.Y=function(c){try{if(c==this.g)e:{const pt=Rr(this.g);var f=this.g.Ba();const Os=this.g.Z();if(!(3>pt)&&(pt!=3||this.g&&(this.h.h||this.g.oa()||Pm(this.g)))){this.J||pt!=4||f==7||(f==8||0>=Os?Jo(3):Jo(2)),su(this);var y=this.g.Z();this.X=y;t:if(fm(this)){var k=Pm(this.g);c="";var O=k.length,V=Rr(this.g)==4;if(!this.h.i){if(typeof TextDecoder>"u"){Xn(this),ti(this);var q="";break t}this.h.i=new l.TextDecoder}for(f=0;f<O;f++)this.h.h=!0,c+=this.h.i.decode(k[f],{stream:!(V&&f==O-1)});k.length=0,this.h.g+=c,this.C=0,q=this.h.g}else q=this.g.oa();if(this.o=y==200,kT(this.i,this.u,this.A,this.l,this.R,pt,y),this.o){if(this.T&&!this.K){t:{if(this.g){var Ae,lt=this.g;if((Ae=lt.g?lt.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!T(Ae)){var Ne=Ae;break t}}Ne=null}if(y=Ne)Ps(this.i,this.l,y,"Initial handshake response via X-HTTP-Initial-Response"),this.K=!0,ou(this,y);else{this.o=!1,this.s=3,Tt(12),Xn(this),ti(this);break e}}if(this.P){y=!0;let Zt;for(;!this.J&&this.C<q.length;)if(Zt=IT(this,q),Zt==ru){pt==4&&(this.s=4,Tt(14),y=!1),Ps(this.i,this.l,null,"[Incomplete Response]");break}else if(Zt==dm){this.s=4,Tt(15),Ps(this.i,this.l,q,"[Invalid Chunk]"),y=!1;break}else Ps(this.i,this.l,Zt,null),ou(this,Zt);if(fm(this)&&this.C!=0&&(this.h.g=this.h.g.slice(this.C),this.C=0),pt!=4||q.length!=0||this.h.h||(this.s=1,Tt(16),y=!1),this.o=this.o&&y,!y)Ps(this.i,this.l,q,"[Invalid Chunked Response]"),Xn(this),ti(this);else if(0<q.length&&!this.W){this.W=!0;var mt=this.j;mt.g==this&&mt.ba&&!mt.M&&(mt.j.info("Great, no buffering proxy detected. Bytes received: "+q.length),du(mt),mt.M=!0,Tt(11))}}else Ps(this.i,this.l,q,null),ou(this,q);pt==4&&Xn(this),this.o&&!this.J&&(pt==4?Um(this.j,this):(this.o=!1,_a(this)))}else GT(this.g),y==400&&0<q.indexOf("Unknown SID")?(this.s=3,Tt(12)):(this.s=0,Tt(13)),Xn(this),ti(this)}}}catch{}finally{}};function fm(c){return c.g?c.u=="GET"&&c.L!=2&&c.j.Ca:!1}function IT(c,f){var y=c.C,k=f.indexOf(`
`,y);return k==-1?ru:(y=Number(f.substring(y,k)),isNaN(y)?dm:(k+=1,k+y>f.length?ru:(f=f.slice(k,k+y),c.C=k+y,f)))}Xr.prototype.cancel=function(){this.J=!0,Xn(this)};function _a(c){c.S=Date.now()+c.I,mm(c,c.I)}function mm(c,f){if(c.B!=null)throw Error("WatchDog timer not null");c.B=Zo(g(c.ba,c),f)}function su(c){c.B&&(l.clearTimeout(c.B),c.B=null)}Xr.prototype.ba=function(){this.B=null;const c=Date.now();0<=c-this.S?(ST(this.i,this.A),this.L!=2&&(Jo(),Tt(17)),Xn(this),this.s=2,ti(this)):mm(this,this.S-c)};function ti(c){c.j.G==0||c.J||Um(c.j,c)}function Xn(c){su(c);var f=c.M;f&&typeof f.ma=="function"&&f.ma(),c.M=null,rm(c.U),c.g&&(f=c.g,c.g=null,f.abort(),f.ma())}function ou(c,f){try{var y=c.j;if(y.G!=0&&(y.g==c||iu(y.h,c))){if(!c.K&&iu(y.h,c)&&y.G==3){try{var k=y.Da.g.parse(f)}catch{k=null}if(Array.isArray(k)&&k.length==3){var O=k;if(O[0]==0){e:if(!y.u){if(y.g)if(y.g.F+3e3<c.F)Aa(y),ja(y);else break e;uu(y),Tt(18)}}else y.za=O[1],0<y.za-y.T&&37500>O[2]&&y.F&&y.v==0&&!y.C&&(y.C=Zo(g(y.Za,y),6e3));if(1>=ym(y.h)&&y.ca){try{y.ca()}catch{}y.ca=void 0}}else Zn(y,11)}else if((c.K||y.g==c)&&Aa(y),!T(f))for(O=y.Da.g.parse(f),f=0;f<O.length;f++){let Ne=O[f];if(y.T=Ne[0],Ne=Ne[1],y.G==2)if(Ne[0]=="c"){y.K=Ne[1],y.ia=Ne[2];const mt=Ne[3];mt!=null&&(y.la=mt,y.j.info("VER="+y.la));const pt=Ne[4];pt!=null&&(y.Aa=pt,y.j.info("SVER="+y.Aa));const Os=Ne[5];Os!=null&&typeof Os=="number"&&0<Os&&(k=1.5*Os,y.L=k,y.j.info("backChannelRequestTimeoutMs_="+k)),k=y;const Zt=c.g;if(Zt){const Pa=Zt.g?Zt.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(Pa){var V=k.h;V.g||Pa.indexOf("spdy")==-1&&Pa.indexOf("quic")==-1&&Pa.indexOf("h2")==-1||(V.j=V.l,V.g=new Set,V.h&&(au(V,V.h),V.h=null))}if(k.D){const hu=Zt.g?Zt.g.getResponseHeader("X-HTTP-Session-Id"):null;hu&&(k.ya=hu,Oe(k.I,k.D,hu))}}y.G=3,y.l&&y.l.ua(),y.ba&&(y.R=Date.now()-c.F,y.j.info("Handshake RTT: "+y.R+"ms")),k=y;var q=c;if(k.qa=zm(k,k.J?k.ia:null,k.W),q.K){xm(k.h,q);var Ae=q,lt=k.L;lt&&(Ae.I=lt),Ae.B&&(su(Ae),_a(Ae)),k.g=q}else Vm(k);0<y.i.length&&Ia(y)}else Ne[0]!="stop"&&Ne[0]!="close"||Zn(y,7);else y.G==3&&(Ne[0]=="stop"||Ne[0]=="close"?Ne[0]=="stop"?Zn(y,7):cu(y):Ne[0]!="noop"&&y.l&&y.l.ta(Ne),y.v=0)}}Jo(4)}catch{}}var AT=class{constructor(c,f){this.g=c,this.map=f}};function pm(c){this.l=c||10,l.PerformanceNavigationTiming?(c=l.performance.getEntriesByType("navigation"),c=0<c.length&&(c[0].nextHopProtocol=="hq"||c[0].nextHopProtocol=="h2")):c=!!(l.chrome&&l.chrome.loadTimes&&l.chrome.loadTimes()&&l.chrome.loadTimes().wasFetchedViaSpdy),this.j=c?this.l:1,this.g=null,1<this.j&&(this.g=new Set),this.h=null,this.i=[]}function gm(c){return c.h?!0:c.g?c.g.size>=c.j:!1}function ym(c){return c.h?1:c.g?c.g.size:0}function iu(c,f){return c.h?c.h==f:c.g?c.g.has(f):!1}function au(c,f){c.g?c.g.add(f):c.h=f}function xm(c,f){c.h&&c.h==f?c.h=null:c.g&&c.g.has(f)&&c.g.delete(f)}pm.prototype.cancel=function(){if(this.i=bm(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&this.g.size!==0){for(const c of this.g.values())c.cancel();this.g.clear()}};function bm(c){if(c.h!=null)return c.i.concat(c.h.D);if(c.g!=null&&c.g.size!==0){let f=c.i;for(const y of c.g.values())f=f.concat(y.D);return f}return b(c.i)}function RT(c){if(c.V&&typeof c.V=="function")return c.V();if(typeof Map<"u"&&c instanceof Map||typeof Set<"u"&&c instanceof Set)return Array.from(c.values());if(typeof c=="string")return c.split("");if(u(c)){for(var f=[],y=c.length,k=0;k<y;k++)f.push(c[k]);return f}f=[],y=0;for(k in c)f[y++]=c[k];return f}function PT(c){if(c.na&&typeof c.na=="function")return c.na();if(!c.V||typeof c.V!="function"){if(typeof Map<"u"&&c instanceof Map)return Array.from(c.keys());if(!(typeof Set<"u"&&c instanceof Set)){if(u(c)||typeof c=="string"){var f=[];c=c.length;for(var y=0;y<c;y++)f.push(y);return f}f=[],y=0;for(const k in c)f[y++]=k;return f}}}function vm(c,f){if(c.forEach&&typeof c.forEach=="function")c.forEach(f,void 0);else if(u(c)||typeof c=="string")Array.prototype.forEach.call(c,f,void 0);else for(var y=PT(c),k=RT(c),O=k.length,V=0;V<O;V++)f.call(void 0,k[V],y&&y[V],c)}var wm=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function MT(c,f){if(c){c=c.split("&");for(var y=0;y<c.length;y++){var k=c[y].indexOf("="),O=null;if(0<=k){var V=c[y].substring(0,k);O=c[y].substring(k+1)}else V=c[y];f(V,O?decodeURIComponent(O.replace(/\+/g," ")):"")}}}function Jn(c){if(this.g=this.o=this.j="",this.s=null,this.m=this.l="",this.h=!1,c instanceof Jn){this.h=c.h,Ta(this,c.j),this.o=c.o,this.g=c.g,Ea(this,c.s),this.l=c.l;var f=c.i,y=new si;y.i=f.i,f.g&&(y.g=new Map(f.g),y.h=f.h),_m(this,y),this.m=c.m}else c&&(f=String(c).match(wm))?(this.h=!1,Ta(this,f[1]||"",!0),this.o=ri(f[2]||""),this.g=ri(f[3]||"",!0),Ea(this,f[4]),this.l=ri(f[5]||"",!0),_m(this,f[6]||"",!0),this.m=ri(f[7]||"")):(this.h=!1,this.i=new si(null,this.h))}Jn.prototype.toString=function(){var c=[],f=this.j;f&&c.push(ni(f,Tm,!0),":");var y=this.g;return(y||f=="file")&&(c.push("//"),(f=this.o)&&c.push(ni(f,Tm,!0),"@"),c.push(encodeURIComponent(String(y)).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),y=this.s,y!=null&&c.push(":",String(y))),(y=this.l)&&(this.g&&y.charAt(0)!="/"&&c.push("/"),c.push(ni(y,y.charAt(0)=="/"?LT:OT,!0))),(y=this.i.toString())&&c.push("?",y),(y=this.m)&&c.push("#",ni(y,FT)),c.join("")};function Ar(c){return new Jn(c)}function Ta(c,f,y){c.j=y?ri(f,!0):f,c.j&&(c.j=c.j.replace(/:$/,""))}function Ea(c,f){if(f){if(f=Number(f),isNaN(f)||0>f)throw Error("Bad port number "+f);c.s=f}else c.s=null}function _m(c,f,y){f instanceof si?(c.i=f,UT(c.i,c.h)):(y||(f=ni(f,VT)),c.i=new si(f,c.h))}function Oe(c,f,y){c.i.set(f,y)}function Na(c){return Oe(c,"zx",Math.floor(2147483648*Math.random()).toString(36)+Math.abs(Math.floor(2147483648*Math.random())^Date.now()).toString(36)),c}function ri(c,f){return c?f?decodeURI(c.replace(/%25/g,"%2525")):decodeURIComponent(c):""}function ni(c,f,y){return typeof c=="string"?(c=encodeURI(c).replace(f,DT),y&&(c=c.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),c):null}function DT(c){return c=c.charCodeAt(0),"%"+(c>>4&15).toString(16)+(c&15).toString(16)}var Tm=/[#\/\?@]/g,OT=/[#\?:]/g,LT=/[#\?]/g,VT=/[#\?@]/g,FT=/#/g;function si(c,f){this.h=this.g=null,this.i=c||null,this.j=!!f}function Jr(c){c.g||(c.g=new Map,c.h=0,c.i&&MT(c.i,function(f,y){c.add(decodeURIComponent(f.replace(/\+/g," ")),y)}))}r=si.prototype,r.add=function(c,f){Jr(this),this.i=null,c=Ms(this,c);var y=this.g.get(c);return y||this.g.set(c,y=[]),y.push(f),this.h+=1,this};function Em(c,f){Jr(c),f=Ms(c,f),c.g.has(f)&&(c.i=null,c.h-=c.g.get(f).length,c.g.delete(f))}function Nm(c,f){return Jr(c),f=Ms(c,f),c.g.has(f)}r.forEach=function(c,f){Jr(this),this.g.forEach(function(y,k){y.forEach(function(O){c.call(f,O,k,this)},this)},this)},r.na=function(){Jr(this);const c=Array.from(this.g.values()),f=Array.from(this.g.keys()),y=[];for(let k=0;k<f.length;k++){const O=c[k];for(let V=0;V<O.length;V++)y.push(f[k])}return y},r.V=function(c){Jr(this);let f=[];if(typeof c=="string")Nm(this,c)&&(f=f.concat(this.g.get(Ms(this,c))));else{c=Array.from(this.g.values());for(let y=0;y<c.length;y++)f=f.concat(c[y])}return f},r.set=function(c,f){return Jr(this),this.i=null,c=Ms(this,c),Nm(this,c)&&(this.h-=this.g.get(c).length),this.g.set(c,[f]),this.h+=1,this},r.get=function(c,f){return c?(c=this.V(c),0<c.length?String(c[0]):f):f};function Cm(c,f,y){Em(c,f),0<y.length&&(c.i=null,c.g.set(Ms(c,f),b(y)),c.h+=y.length)}r.toString=function(){if(this.i)return this.i;if(!this.g)return"";const c=[],f=Array.from(this.g.keys());for(var y=0;y<f.length;y++){var k=f[y];const V=encodeURIComponent(String(k)),q=this.V(k);for(k=0;k<q.length;k++){var O=V;q[k]!==""&&(O+="="+encodeURIComponent(String(q[k]))),c.push(O)}}return this.i=c.join("&")};function Ms(c,f){return f=String(f),c.j&&(f=f.toLowerCase()),f}function UT(c,f){f&&!c.j&&(Jr(c),c.i=null,c.g.forEach(function(y,k){var O=k.toLowerCase();k!=O&&(Em(this,k),Cm(this,O,y))},c)),c.j=f}function $T(c,f){const y=new ei;if(l.Image){const k=new Image;k.onload=x(Zr,y,"TestLoadImage: loaded",!0,f,k),k.onerror=x(Zr,y,"TestLoadImage: error",!1,f,k),k.onabort=x(Zr,y,"TestLoadImage: abort",!1,f,k),k.ontimeout=x(Zr,y,"TestLoadImage: timeout",!1,f,k),l.setTimeout(function(){k.ontimeout&&k.ontimeout()},1e4),k.src=c}else f(!1)}function BT(c,f){const y=new ei,k=new AbortController,O=setTimeout(()=>{k.abort(),Zr(y,"TestPingServer: timeout",!1,f)},1e4);fetch(c,{signal:k.signal}).then(V=>{clearTimeout(O),V.ok?Zr(y,"TestPingServer: ok",!0,f):Zr(y,"TestPingServer: server error",!1,f)}).catch(()=>{clearTimeout(O),Zr(y,"TestPingServer: error",!1,f)})}function Zr(c,f,y,k,O){try{O&&(O.onload=null,O.onerror=null,O.onabort=null,O.ontimeout=null),k(y)}catch{}}function zT(){this.g=new NT}function qT(c,f,y){const k=y||"";try{vm(c,function(O,V){let q=O;d(O)&&(q=Xc(O)),f.push(k+V+"="+encodeURIComponent(q))})}catch(O){throw f.push(k+"type="+encodeURIComponent("_badmap")),O}}function Ca(c){this.l=c.Ub||null,this.j=c.eb||!1}S(Ca,Jc),Ca.prototype.g=function(){return new ka(this.l,this.j)},Ca.prototype.i=function(c){return function(){return c}}({});function ka(c,f){rt.call(this),this.D=c,this.o=f,this.m=void 0,this.status=this.readyState=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.u=new Headers,this.h=null,this.B="GET",this.A="",this.g=!1,this.v=this.j=this.l=null}S(ka,rt),r=ka.prototype,r.open=function(c,f){if(this.readyState!=0)throw this.abort(),Error("Error reopening a connection");this.B=c,this.A=f,this.readyState=1,ii(this)},r.send=function(c){if(this.readyState!=1)throw this.abort(),Error("need to call open() first. ");this.g=!0;const f={headers:this.u,method:this.B,credentials:this.m,cache:void 0};c&&(f.body=c),(this.D||l).fetch(new Request(this.A,f)).then(this.Sa.bind(this),this.ga.bind(this))},r.abort=function(){this.response=this.responseText="",this.u=new Headers,this.status=0,this.j&&this.j.cancel("Request was aborted.").catch(()=>{}),1<=this.readyState&&this.g&&this.readyState!=4&&(this.g=!1,oi(this)),this.readyState=0},r.Sa=function(c){if(this.g&&(this.l=c,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=c.headers,this.readyState=2,ii(this)),this.g&&(this.readyState=3,ii(this),this.g)))if(this.responseType==="arraybuffer")c.arrayBuffer().then(this.Qa.bind(this),this.ga.bind(this));else if(typeof l.ReadableStream<"u"&&"body"in c){if(this.j=c.body.getReader(),this.o){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.v=new TextDecoder;km(this)}else c.text().then(this.Ra.bind(this),this.ga.bind(this))};function km(c){c.j.read().then(c.Pa.bind(c)).catch(c.ga.bind(c))}r.Pa=function(c){if(this.g){if(this.o&&c.value)this.response.push(c.value);else if(!this.o){var f=c.value?c.value:new Uint8Array(0);(f=this.v.decode(f,{stream:!c.done}))&&(this.response=this.responseText+=f)}c.done?oi(this):ii(this),this.readyState==3&&km(this)}},r.Ra=function(c){this.g&&(this.response=this.responseText=c,oi(this))},r.Qa=function(c){this.g&&(this.response=c,oi(this))},r.ga=function(){this.g&&oi(this)};function oi(c){c.readyState=4,c.l=null,c.j=null,c.v=null,ii(c)}r.setRequestHeader=function(c,f){this.u.append(c,f)},r.getResponseHeader=function(c){return this.h&&this.h.get(c.toLowerCase())||""},r.getAllResponseHeaders=function(){if(!this.h)return"";const c=[],f=this.h.entries();for(var y=f.next();!y.done;)y=y.value,c.push(y[0]+": "+y[1]),y=f.next();return c.join(`\r
`)};function ii(c){c.onreadystatechange&&c.onreadystatechange.call(c)}Object.defineProperty(ka.prototype,"withCredentials",{get:function(){return this.m==="include"},set:function(c){this.m=c?"include":"same-origin"}});function Sm(c){let f="";return U(c,function(y,k){f+=k,f+=":",f+=y,f+=`\r
`}),f}function lu(c,f,y){e:{for(k in y){var k=!1;break e}k=!0}k||(y=Sm(y),typeof c=="string"?y!=null&&encodeURIComponent(String(y)):Oe(c,f,y))}function qe(c){rt.call(this),this.headers=new Map,this.o=c||null,this.h=!1,this.v=this.g=null,this.D="",this.m=0,this.l="",this.j=this.B=this.u=this.A=!1,this.I=null,this.H="",this.J=!1}S(qe,rt);var HT=/^https?$/i,WT=["POST","PUT"];r=qe.prototype,r.Ha=function(c){this.J=c},r.ea=function(c,f,y,k){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.D+"; newUri="+c);f=f?f.toUpperCase():"GET",this.D=c,this.l="",this.m=0,this.A=!1,this.h=!0,this.g=this.o?this.o.g():tu.g(),this.v=this.o?nm(this.o):nm(tu),this.g.onreadystatechange=g(this.Ea,this);try{this.B=!0,this.g.open(f,String(c),!0),this.B=!1}catch(V){jm(this,V);return}if(c=y||"",y=new Map(this.headers),k)if(Object.getPrototypeOf(k)===Object.prototype)for(var O in k)y.set(O,k[O]);else if(typeof k.keys=="function"&&typeof k.get=="function")for(const V of k.keys())y.set(V,k.get(V));else throw Error("Unknown input type for opt_headers: "+String(k));k=Array.from(y.keys()).find(V=>V.toLowerCase()=="content-type"),O=l.FormData&&c instanceof l.FormData,!(0<=Array.prototype.indexOf.call(WT,f,void 0))||k||O||y.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");for(const[V,q]of y)this.g.setRequestHeader(V,q);this.H&&(this.g.responseType=this.H),"withCredentials"in this.g&&this.g.withCredentials!==this.J&&(this.g.withCredentials=this.J);try{Rm(this),this.u=!0,this.g.send(c),this.u=!1}catch(V){jm(this,V)}};function jm(c,f){c.h=!1,c.g&&(c.j=!0,c.g.abort(),c.j=!1),c.l=f,c.m=5,Im(c),Sa(c)}function Im(c){c.A||(c.A=!0,_t(c,"complete"),_t(c,"error"))}r.abort=function(c){this.g&&this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1,this.m=c||7,_t(this,"complete"),_t(this,"abort"),Sa(this))},r.N=function(){this.g&&(this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1),Sa(this,!0)),qe.aa.N.call(this)},r.Ea=function(){this.s||(this.B||this.u||this.j?Am(this):this.bb())},r.bb=function(){Am(this)};function Am(c){if(c.h&&typeof a<"u"&&(!c.v[1]||Rr(c)!=4||c.Z()!=2)){if(c.u&&Rr(c)==4)Zf(c.Ea,0,c);else if(_t(c,"readystatechange"),Rr(c)==4){c.h=!1;try{const q=c.Z();e:switch(q){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var f=!0;break e;default:f=!1}var y;if(!(y=f)){var k;if(k=q===0){var O=String(c.D).match(wm)[1]||null;!O&&l.self&&l.self.location&&(O=l.self.location.protocol.slice(0,-1)),k=!HT.test(O?O.toLowerCase():"")}y=k}if(y)_t(c,"complete"),_t(c,"success");else{c.m=6;try{var V=2<Rr(c)?c.g.statusText:""}catch{V=""}c.l=V+" ["+c.Z()+"]",Im(c)}}finally{Sa(c)}}}}function Sa(c,f){if(c.g){Rm(c);const y=c.g,k=c.v[0]?()=>{}:null;c.g=null,c.v=null,f||_t(c,"ready");try{y.onreadystatechange=k}catch{}}}function Rm(c){c.I&&(l.clearTimeout(c.I),c.I=null)}r.isActive=function(){return!!this.g};function Rr(c){return c.g?c.g.readyState:0}r.Z=function(){try{return 2<Rr(this)?this.g.status:-1}catch{return-1}},r.oa=function(){try{return this.g?this.g.responseText:""}catch{return""}},r.Oa=function(c){if(this.g){var f=this.g.responseText;return c&&f.indexOf(c)==0&&(f=f.substring(c.length)),ET(f)}};function Pm(c){try{if(!c.g)return null;if("response"in c.g)return c.g.response;switch(c.H){case"":case"text":return c.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in c.g)return c.g.mozResponseArrayBuffer}return null}catch{return null}}function GT(c){const f={};c=(c.g&&2<=Rr(c)&&c.g.getAllResponseHeaders()||"").split(`\r
`);for(let k=0;k<c.length;k++){if(T(c[k]))continue;var y=_(c[k]);const O=y[0];if(y=y[1],typeof y!="string")continue;y=y.trim();const V=f[O]||[];f[O]=V,V.push(y)}A(f,function(k){return k.join(", ")})}r.Ba=function(){return this.m},r.Ka=function(){return typeof this.l=="string"?this.l:String(this.l)};function ai(c,f,y){return y&&y.internalChannelParams&&y.internalChannelParams[c]||f}function Mm(c){this.Aa=0,this.i=[],this.j=new ei,this.ia=this.qa=this.I=this.W=this.g=this.ya=this.D=this.H=this.m=this.S=this.o=null,this.Ya=this.U=0,this.Va=ai("failFast",!1,c),this.F=this.C=this.u=this.s=this.l=null,this.X=!0,this.za=this.T=-1,this.Y=this.v=this.B=0,this.Ta=ai("baseRetryDelayMs",5e3,c),this.cb=ai("retryDelaySeedMs",1e4,c),this.Wa=ai("forwardChannelMaxRetries",2,c),this.wa=ai("forwardChannelRequestTimeoutMs",2e4,c),this.pa=c&&c.xmlHttpFactory||void 0,this.Xa=c&&c.Tb||void 0,this.Ca=c&&c.useFetchStreams||!1,this.L=void 0,this.J=c&&c.supportsCrossDomainXhr||!1,this.K="",this.h=new pm(c&&c.concurrentRequestLimit),this.Da=new zT,this.P=c&&c.fastHandshake||!1,this.O=c&&c.encodeInitMessageHeaders||!1,this.P&&this.O&&(this.O=!1),this.Ua=c&&c.Rb||!1,c&&c.xa&&this.j.xa(),c&&c.forceLongPolling&&(this.X=!1),this.ba=!this.P&&this.X&&c&&c.detectBufferingProxy||!1,this.ja=void 0,c&&c.longPollingTimeout&&0<c.longPollingTimeout&&(this.ja=c.longPollingTimeout),this.ca=void 0,this.R=0,this.M=!1,this.ka=this.A=null}r=Mm.prototype,r.la=8,r.G=1,r.connect=function(c,f,y,k){Tt(0),this.W=c,this.H=f||{},y&&k!==void 0&&(this.H.OSID=y,this.H.OAID=k),this.F=this.X,this.I=zm(this,null,this.W),Ia(this)};function cu(c){if(Dm(c),c.G==3){var f=c.U++,y=Ar(c.I);if(Oe(y,"SID",c.K),Oe(y,"RID",f),Oe(y,"TYPE","terminate"),li(c,y),f=new Xr(c,c.j,f),f.L=2,f.v=Na(Ar(y)),y=!1,l.navigator&&l.navigator.sendBeacon)try{y=l.navigator.sendBeacon(f.v.toString(),"")}catch{}!y&&l.Image&&(new Image().src=f.v,y=!0),y||(f.g=qm(f.j,null),f.g.ea(f.v)),f.F=Date.now(),_a(f)}Bm(c)}function ja(c){c.g&&(du(c),c.g.cancel(),c.g=null)}function Dm(c){ja(c),c.u&&(l.clearTimeout(c.u),c.u=null),Aa(c),c.h.cancel(),c.s&&(typeof c.s=="number"&&l.clearTimeout(c.s),c.s=null)}function Ia(c){if(!gm(c.h)&&!c.s){c.s=!0;var f=c.Ga;ee||H(),R||(ee(),R=!0),z.add(f,c),c.B=0}}function KT(c,f){return ym(c.h)>=c.h.j-(c.s?1:0)?!1:c.s?(c.i=f.D.concat(c.i),!0):c.G==1||c.G==2||c.B>=(c.Va?0:c.Wa)?!1:(c.s=Zo(g(c.Ga,c,f),$m(c,c.B)),c.B++,!0)}r.Ga=function(c){if(this.s)if(this.s=null,this.G==1){if(!c){this.U=Math.floor(1e5*Math.random()),c=this.U++;const O=new Xr(this,this.j,c);let V=this.o;if(this.S&&(V?(V=w(V),j(V,this.S)):V=this.S),this.m!==null||this.O||(O.H=V,V=null),this.P)e:{for(var f=0,y=0;y<this.i.length;y++){t:{var k=this.i[y];if("__data__"in k.map&&(k=k.map.__data__,typeof k=="string")){k=k.length;break t}k=void 0}if(k===void 0)break;if(f+=k,4096<f){f=y;break e}if(f===4096||y===this.i.length-1){f=y+1;break e}}f=1e3}else f=1e3;f=Lm(this,O,f),y=Ar(this.I),Oe(y,"RID",c),Oe(y,"CVER",22),this.D&&Oe(y,"X-HTTP-Session-Id",this.D),li(this,y),V&&(this.O?f="headers="+encodeURIComponent(String(Sm(V)))+"&"+f:this.m&&lu(y,this.m,V)),au(this.h,O),this.Ua&&Oe(y,"TYPE","init"),this.P?(Oe(y,"$req",f),Oe(y,"SID","null"),O.T=!0,nu(O,y,null)):nu(O,y,f),this.G=2}}else this.G==3&&(c?Om(this,c):this.i.length==0||gm(this.h)||Om(this))};function Om(c,f){var y;f?y=f.l:y=c.U++;const k=Ar(c.I);Oe(k,"SID",c.K),Oe(k,"RID",y),Oe(k,"AID",c.T),li(c,k),c.m&&c.o&&lu(k,c.m,c.o),y=new Xr(c,c.j,y,c.B+1),c.m===null&&(y.H=c.o),f&&(c.i=f.D.concat(c.i)),f=Lm(c,y,1e3),y.I=Math.round(.5*c.wa)+Math.round(.5*c.wa*Math.random()),au(c.h,y),nu(y,k,f)}function li(c,f){c.H&&U(c.H,function(y,k){Oe(f,k,y)}),c.l&&vm({},function(y,k){Oe(f,k,y)})}function Lm(c,f,y){y=Math.min(c.i.length,y);var k=c.l?g(c.l.Na,c.l,c):null;e:{var O=c.i;let V=-1;for(;;){const q=["count="+y];V==-1?0<y?(V=O[0].g,q.push("ofs="+V)):V=0:q.push("ofs="+V);let Ae=!0;for(let lt=0;lt<y;lt++){let Ne=O[lt].g;const mt=O[lt].map;if(Ne-=V,0>Ne)V=Math.max(0,O[lt].g-100),Ae=!1;else try{qT(mt,q,"req"+Ne+"_")}catch{k&&k(mt)}}if(Ae){k=q.join("&");break e}}}return c=c.i.splice(0,y),f.D=c,k}function Vm(c){if(!c.g&&!c.u){c.Y=1;var f=c.Fa;ee||H(),R||(ee(),R=!0),z.add(f,c),c.v=0}}function uu(c){return c.g||c.u||3<=c.v?!1:(c.Y++,c.u=Zo(g(c.Fa,c),$m(c,c.v)),c.v++,!0)}r.Fa=function(){if(this.u=null,Fm(this),this.ba&&!(this.M||this.g==null||0>=this.R)){var c=2*this.R;this.j.info("BP detection timer enabled: "+c),this.A=Zo(g(this.ab,this),c)}},r.ab=function(){this.A&&(this.A=null,this.j.info("BP detection timeout reached."),this.j.info("Buffering proxy detected and switch to long-polling!"),this.F=!1,this.M=!0,Tt(10),ja(this),Fm(this))};function du(c){c.A!=null&&(l.clearTimeout(c.A),c.A=null)}function Fm(c){c.g=new Xr(c,c.j,"rpc",c.Y),c.m===null&&(c.g.H=c.o),c.g.O=0;var f=Ar(c.qa);Oe(f,"RID","rpc"),Oe(f,"SID",c.K),Oe(f,"AID",c.T),Oe(f,"CI",c.F?"0":"1"),!c.F&&c.ja&&Oe(f,"TO",c.ja),Oe(f,"TYPE","xmlhttp"),li(c,f),c.m&&c.o&&lu(f,c.m,c.o),c.L&&(c.g.I=c.L);var y=c.g;c=c.ia,y.L=1,y.v=Na(Ar(f)),y.m=null,y.P=!0,hm(y,c)}r.Za=function(){this.C!=null&&(this.C=null,ja(this),uu(this),Tt(19))};function Aa(c){c.C!=null&&(l.clearTimeout(c.C),c.C=null)}function Um(c,f){var y=null;if(c.g==f){Aa(c),du(c),c.g=null;var k=2}else if(iu(c.h,f))y=f.D,xm(c.h,f),k=1;else return;if(c.G!=0){if(f.o)if(k==1){y=f.m?f.m.length:0,f=Date.now()-f.F;var O=c.B;k=ba(),_t(k,new lm(k,y)),Ia(c)}else Vm(c);else if(O=f.s,O==3||O==0&&0<f.X||!(k==1&&KT(c,f)||k==2&&uu(c)))switch(y&&0<y.length&&(f=c.h,f.i=f.i.concat(y)),O){case 1:Zn(c,5);break;case 4:Zn(c,10);break;case 3:Zn(c,6);break;default:Zn(c,2)}}}function $m(c,f){let y=c.Ta+Math.floor(Math.random()*c.cb);return c.isActive()||(y*=2),y*f}function Zn(c,f){if(c.j.info("Error code "+f),f==2){var y=g(c.fb,c),k=c.Xa;const O=!k;k=new Jn(k||"//www.google.com/images/cleardot.gif"),l.location&&l.location.protocol=="http"||Ta(k,"https"),Na(k),O?$T(k.toString(),y):BT(k.toString(),y)}else Tt(2);c.G=0,c.l&&c.l.sa(f),Bm(c),Dm(c)}r.fb=function(c){c?(this.j.info("Successfully pinged google.com"),Tt(2)):(this.j.info("Failed to ping google.com"),Tt(1))};function Bm(c){if(c.G=0,c.ka=[],c.l){const f=bm(c.h);(f.length!=0||c.i.length!=0)&&(v(c.ka,f),v(c.ka,c.i),c.h.i.length=0,b(c.i),c.i.length=0),c.l.ra()}}function zm(c,f,y){var k=y instanceof Jn?Ar(y):new Jn(y);if(k.g!="")f&&(k.g=f+"."+k.g),Ea(k,k.s);else{var O=l.location;k=O.protocol,f=f?f+"."+O.hostname:O.hostname,O=+O.port;var V=new Jn(null);k&&Ta(V,k),f&&(V.g=f),O&&Ea(V,O),y&&(V.l=y),k=V}return y=c.D,f=c.ya,y&&f&&Oe(k,y,f),Oe(k,"VER",c.la),li(c,k),k}function qm(c,f,y){if(f&&!c.J)throw Error("Can't create secondary domain capable XhrIo object.");return f=c.Ca&&!c.pa?new qe(new Ca({eb:y})):new qe(c.pa),f.Ha(c.J),f}r.isActive=function(){return!!this.l&&this.l.isActive(this)};function Hm(){}r=Hm.prototype,r.ua=function(){},r.ta=function(){},r.sa=function(){},r.ra=function(){},r.isActive=function(){return!0},r.Na=function(){};function Ra(){}Ra.prototype.g=function(c,f){return new Vt(c,f)};function Vt(c,f){rt.call(this),this.g=new Mm(f),this.l=c,this.h=f&&f.messageUrlParams||null,c=f&&f.messageHeaders||null,f&&f.clientProtocolHeaderRequired&&(c?c["X-Client-Protocol"]="webchannel":c={"X-Client-Protocol":"webchannel"}),this.g.o=c,c=f&&f.initMessageHeaders||null,f&&f.messageContentType&&(c?c["X-WebChannel-Content-Type"]=f.messageContentType:c={"X-WebChannel-Content-Type":f.messageContentType}),f&&f.va&&(c?c["X-WebChannel-Client-Profile"]=f.va:c={"X-WebChannel-Client-Profile":f.va}),this.g.S=c,(c=f&&f.Sb)&&!T(c)&&(this.g.m=c),this.v=f&&f.supportsCrossDomainXhr||!1,this.u=f&&f.sendRawJson||!1,(f=f&&f.httpSessionIdParam)&&!T(f)&&(this.g.D=f,c=this.h,c!==null&&f in c&&(c=this.h,f in c&&delete c[f])),this.j=new Ds(this)}S(Vt,rt),Vt.prototype.m=function(){this.g.l=this.j,this.v&&(this.g.J=!0),this.g.connect(this.l,this.h||void 0)},Vt.prototype.close=function(){cu(this.g)},Vt.prototype.o=function(c){var f=this.g;if(typeof c=="string"){var y={};y.__data__=c,c=y}else this.u&&(y={},y.__data__=Xc(c),c=y);f.i.push(new AT(f.Ya++,c)),f.G==3&&Ia(f)},Vt.prototype.N=function(){this.g.l=null,delete this.j,cu(this.g),delete this.g,Vt.aa.N.call(this)};function Wm(c){Zc.call(this),c.__headers__&&(this.headers=c.__headers__,this.statusCode=c.__status__,delete c.__headers__,delete c.__status__);var f=c.__sm__;if(f){e:{for(const y in f){c=y;break e}c=void 0}(this.i=c)&&(c=this.i,f=f!==null&&c in f?f[c]:void 0),this.data=f}else this.data=c}S(Wm,Zc);function Gm(){eu.call(this),this.status=1}S(Gm,eu);function Ds(c){this.g=c}S(Ds,Hm),Ds.prototype.ua=function(){_t(this.g,"a")},Ds.prototype.ta=function(c){_t(this.g,new Wm(c))},Ds.prototype.sa=function(c){_t(this.g,new Gm)},Ds.prototype.ra=function(){_t(this.g,"b")},Ra.prototype.createWebChannel=Ra.prototype.g,Vt.prototype.send=Vt.prototype.o,Vt.prototype.open=Vt.prototype.m,Vt.prototype.close=Vt.prototype.close,p0=function(){return new Ra},m0=function(){return ba()},f0=Yn,nd={mb:0,pb:1,qb:2,Jb:3,Ob:4,Lb:5,Mb:6,Kb:7,Ib:8,Nb:9,PROXY:10,NOPROXY:11,Gb:12,Cb:13,Db:14,Bb:15,Eb:16,Fb:17,ib:18,hb:19,jb:20},va.NO_ERROR=0,va.TIMEOUT=8,va.HTTP_ERROR=6,el=va,cm.COMPLETE="complete",h0=cm,sm.EventType=Xo,Xo.OPEN="a",Xo.CLOSE="b",Xo.ERROR="c",Xo.MESSAGE="d",rt.prototype.listen=rt.prototype.K,yi=sm,qe.prototype.listenOnce=qe.prototype.L,qe.prototype.getLastError=qe.prototype.Ka,qe.prototype.getLastErrorCode=qe.prototype.Ba,qe.prototype.getStatus=qe.prototype.Z,qe.prototype.getResponseJson=qe.prototype.Oa,qe.prototype.getResponseText=qe.prototype.oa,qe.prototype.send=qe.prototype.ea,qe.prototype.setWithCredentials=qe.prototype.Ha,d0=qe}).apply(typeof La<"u"?La:typeof self<"u"?self:typeof window<"u"?window:{});const kp="@firebase/firestore",Sp="4.8.0";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let xt=class{constructor(e){this.uid=e}isAuthenticated(){return this.uid!=null}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(e){return e.uid===this.uid}};xt.UNAUTHENTICATED=new xt(null),xt.GOOGLE_CREDENTIALS=new xt("google-credentials-uid"),xt.FIRST_PARTY=new xt("first-party-uid"),xt.MOCK_USER=new xt("mock-user");/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Lo="11.10.0";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const vs=new nc("@firebase/firestore");function Fs(){return vs.logLevel}function Y(r,...e){if(vs.logLevel<=be.DEBUG){const t=e.map(Eh);vs.debug(`Firestore (${Lo}): ${r}`,...t)}}function qr(r,...e){if(vs.logLevel<=be.ERROR){const t=e.map(Eh);vs.error(`Firestore (${Lo}): ${r}`,...t)}}function jn(r,...e){if(vs.logLevel<=be.WARN){const t=e.map(Eh);vs.warn(`Firestore (${Lo}): ${r}`,...t)}}function Eh(r){if(typeof r=="string")return r;try{/**
* @license
* Copyright 2020 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/return function(t){return JSON.stringify(t)}(r)}catch{return r}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ae(r,e,t){let n="Unexpected state";typeof e=="string"?n=e:t=e,g0(r,n,t)}function g0(r,e,t){let n=`FIRESTORE (${Lo}) INTERNAL ASSERTION FAILED: ${e} (ID: ${r.toString(16)})`;if(t!==void 0)try{n+=" CONTEXT: "+JSON.stringify(t)}catch{n+=" CONTEXT: "+t}throw qr(n),new Error(n)}function ke(r,e,t,n){let s="Unexpected state";typeof t=="string"?s=t:n=t,r||g0(e,s,n)}function de(r,e){return r}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const $={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class K extends hr{constructor(e,t){super(e,t),this.code=e,this.message=t,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Nn{constructor(){this.promise=new Promise((e,t)=>{this.resolve=e,this.reject=t})}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class y0{constructor(e,t){this.user=t,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${e}`)}}class xS{getToken(){return Promise.resolve(null)}invalidateToken(){}start(e,t){e.enqueueRetryable(()=>t(xt.UNAUTHENTICATED))}shutdown(){}}class bS{constructor(e){this.token=e,this.changeListener=null}getToken(){return Promise.resolve(this.token)}invalidateToken(){}start(e,t){this.changeListener=t,e.enqueueRetryable(()=>t(this.token.user))}shutdown(){this.changeListener=null}}class vS{constructor(e){this.t=e,this.currentUser=xt.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(e,t){ke(this.o===void 0,42304);let n=this.i;const s=u=>this.i!==n?(n=this.i,t(u)):Promise.resolve();let i=new Nn;this.o=()=>{this.i++,this.currentUser=this.u(),i.resolve(),i=new Nn,e.enqueueRetryable(()=>s(this.currentUser))};const a=()=>{const u=i;e.enqueueRetryable(async()=>{await u.promise,await s(this.currentUser)})},l=u=>{Y("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=u,this.o&&(this.auth.addAuthTokenListener(this.o),a())};this.t.onInit(u=>l(u)),setTimeout(()=>{if(!this.auth){const u=this.t.getImmediate({optional:!0});u?l(u):(Y("FirebaseAuthCredentialsProvider","Auth not yet detected"),i.resolve(),i=new Nn)}},0),a()}getToken(){const e=this.i,t=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(t).then(n=>this.i!==e?(Y("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):n?(ke(typeof n.accessToken=="string",31837,{l:n}),new y0(n.accessToken,this.currentUser)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.o&&this.auth.removeAuthTokenListener(this.o),this.o=void 0}u(){const e=this.auth&&this.auth.getUid();return ke(e===null||typeof e=="string",2055,{h:e}),new xt(e)}}class wS{constructor(e,t,n){this.P=e,this.T=t,this.I=n,this.type="FirstParty",this.user=xt.FIRST_PARTY,this.A=new Map}R(){return this.I?this.I():null}get headers(){this.A.set("X-Goog-AuthUser",this.P);const e=this.R();return e&&this.A.set("Authorization",e),this.T&&this.A.set("X-Goog-Iam-Authorization-Token",this.T),this.A}}class _S{constructor(e,t,n){this.P=e,this.T=t,this.I=n}getToken(){return Promise.resolve(new wS(this.P,this.T,this.I))}start(e,t){e.enqueueRetryable(()=>t(xt.FIRST_PARTY))}shutdown(){}invalidateToken(){}}class jp{constructor(e){this.value=e,this.type="AppCheck",this.headers=new Map,e&&e.length>0&&this.headers.set("x-firebase-appcheck",this.value)}}class TS{constructor(e,t){this.V=t,this.forceRefresh=!1,this.appCheck=null,this.m=null,this.p=null,Pt(e)&&e.settings.appCheckToken&&(this.p=e.settings.appCheckToken)}start(e,t){ke(this.o===void 0,3512);const n=i=>{i.error!=null&&Y("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${i.error.message}`);const a=i.token!==this.m;return this.m=i.token,Y("FirebaseAppCheckTokenProvider",`Received ${a?"new":"existing"} token.`),a?t(i.token):Promise.resolve()};this.o=i=>{e.enqueueRetryable(()=>n(i))};const s=i=>{Y("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=i,this.o&&this.appCheck.addTokenListener(this.o)};this.V.onInit(i=>s(i)),setTimeout(()=>{if(!this.appCheck){const i=this.V.getImmediate({optional:!0});i?s(i):Y("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}},0)}getToken(){if(this.p)return Promise.resolve(new jp(this.p));const e=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(e).then(t=>t?(ke(typeof t.token=="string",44558,{tokenResult:t}),this.m=t.token,new jp(t.token)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.o&&this.appCheck.removeTokenListener(this.o),this.o=void 0}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ES(r){const e=typeof self<"u"&&(self.crypto||self.msCrypto),t=new Uint8Array(r);if(e&&typeof e.getRandomValues=="function")e.getRandomValues(t);else for(let n=0;n<r;n++)t[n]=Math.floor(256*Math.random());return t}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function x0(){return new TextEncoder}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Nh{static newId(){const e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",t=62*Math.floor(4.129032258064516);let n="";for(;n.length<20;){const s=ES(40);for(let i=0;i<s.length;++i)n.length<20&&s[i]<t&&(n+=e.charAt(s[i]%62))}return n}}function ye(r,e){return r<e?-1:r>e?1:0}function sd(r,e){let t=0;for(;t<r.length&&t<e.length;){const n=r.codePointAt(t),s=e.codePointAt(t);if(n!==s){if(n<128&&s<128)return ye(n,s);{const i=x0(),a=NS(i.encode(Ip(r,t)),i.encode(Ip(e,t)));return a!==0?a:ye(n,s)}}t+=n>65535?2:1}return ye(r.length,e.length)}function Ip(r,e){return r.codePointAt(e)>65535?r.substring(e,e+2):r.substring(e,e+1)}function NS(r,e){for(let t=0;t<r.length&&t<e.length;++t)if(r[t]!==e[t])return ye(r[t],e[t]);return ye(r.length,e.length)}function No(r,e,t){return r.length===e.length&&r.every((n,s)=>t(n,e[s]))}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ap="__name__";class mr{constructor(e,t,n){t===void 0?t=0:t>e.length&&ae(637,{offset:t,range:e.length}),n===void 0?n=e.length-t:n>e.length-t&&ae(1746,{length:n,range:e.length-t}),this.segments=e,this.offset=t,this.len=n}get length(){return this.len}isEqual(e){return mr.comparator(this,e)===0}child(e){const t=this.segments.slice(this.offset,this.limit());return e instanceof mr?e.forEach(n=>{t.push(n)}):t.push(e),this.construct(t)}limit(){return this.offset+this.length}popFirst(e){return e=e===void 0?1:e,this.construct(this.segments,this.offset+e,this.length-e)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(e){return this.segments[this.offset+e]}isEmpty(){return this.length===0}isPrefixOf(e){if(e.length<this.length)return!1;for(let t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}isImmediateParentOf(e){if(this.length+1!==e.length)return!1;for(let t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}forEach(e){for(let t=this.offset,n=this.limit();t<n;t++)e(this.segments[t])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(e,t){const n=Math.min(e.length,t.length);for(let s=0;s<n;s++){const i=mr.compareSegments(e.get(s),t.get(s));if(i!==0)return i}return ye(e.length,t.length)}static compareSegments(e,t){const n=mr.isNumericId(e),s=mr.isNumericId(t);return n&&!s?-1:!n&&s?1:n&&s?mr.extractNumericId(e).compare(mr.extractNumericId(t)):sd(e,t)}static isNumericId(e){return e.startsWith("__id")&&e.endsWith("__")}static extractNumericId(e){return En.fromString(e.substring(4,e.length-2))}}class Pe extends mr{construct(e,t,n){return new Pe(e,t,n)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}toUriEncodedString(){return this.toArray().map(encodeURIComponent).join("/")}static fromString(...e){const t=[];for(const n of e){if(n.indexOf("//")>=0)throw new K($.INVALID_ARGUMENT,`Invalid segment (${n}). Paths must not contain // in them.`);t.push(...n.split("/").filter(s=>s.length>0))}return new Pe(t)}static emptyPath(){return new Pe([])}}const CS=/^[_a-zA-Z][_a-zA-Z0-9]*$/;class ut extends mr{construct(e,t,n){return new ut(e,t,n)}static isValidIdentifier(e){return CS.test(e)}canonicalString(){return this.toArray().map(e=>(e=e.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),ut.isValidIdentifier(e)||(e="`"+e+"`"),e)).join(".")}toString(){return this.canonicalString()}isKeyField(){return this.length===1&&this.get(0)===Ap}static keyField(){return new ut([Ap])}static fromServerFormat(e){const t=[];let n="",s=0;const i=()=>{if(n.length===0)throw new K($.INVALID_ARGUMENT,`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);t.push(n),n=""};let a=!1;for(;s<e.length;){const l=e[s];if(l==="\\"){if(s+1===e.length)throw new K($.INVALID_ARGUMENT,"Path has trailing escape character: "+e);const u=e[s+1];if(u!=="\\"&&u!=="."&&u!=="`")throw new K($.INVALID_ARGUMENT,"Path has invalid escape sequence: "+e);n+=u,s+=2}else l==="`"?(a=!a,s++):l!=="."||a?(n+=l,s++):(i(),s++)}if(i(),a)throw new K($.INVALID_ARGUMENT,"Unterminated ` in path: "+e);return new ut(t)}static emptyPath(){return new ut([])}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class re{constructor(e){this.path=e}static fromPath(e){return new re(Pe.fromString(e))}static fromName(e){return new re(Pe.fromString(e).popFirst(5))}static empty(){return new re(Pe.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(e){return this.path.length>=2&&this.path.get(this.path.length-2)===e}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(e){return e!==null&&Pe.comparator(this.path,e.path)===0}toString(){return this.path.toString()}static comparator(e,t){return Pe.comparator(e.path,t.path)}static isDocumentKey(e){return e.length%2==0}static fromSegments(e){return new re(new Pe(e.slice()))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function b0(r,e,t){if(!t)throw new K($.INVALID_ARGUMENT,`Function ${r}() cannot be called with an empty ${e}.`)}function kS(r,e,t,n){if(e===!0&&n===!0)throw new K($.INVALID_ARGUMENT,`${r} and ${t} cannot be used together.`)}function Rp(r){if(!re.isDocumentKey(r))throw new K($.INVALID_ARGUMENT,`Invalid document reference. Document references must have an even number of segments, but ${r} has ${r.length}.`)}function Pp(r){if(re.isDocumentKey(r))throw new K($.INVALID_ARGUMENT,`Invalid collection reference. Collection references must have an odd number of segments, but ${r} has ${r.length}.`)}function v0(r){return typeof r=="object"&&r!==null&&(Object.getPrototypeOf(r)===Object.prototype||Object.getPrototypeOf(r)===null)}function lc(r){if(r===void 0)return"undefined";if(r===null)return"null";if(typeof r=="string")return r.length>20&&(r=`${r.substring(0,20)}...`),JSON.stringify(r);if(typeof r=="number"||typeof r=="boolean")return""+r;if(typeof r=="object"){if(r instanceof Array)return"an array";{const e=function(n){return n.constructor?n.constructor.name:null}(r);return e?`a custom ${e} object`:"an object"}}return typeof r=="function"?"a function":ae(12329,{type:typeof r})}function In(r,e){if("_delegate"in r&&(r=r._delegate),!(r instanceof e)){if(e.name===r.constructor.name)throw new K($.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{const t=lc(r);throw new K($.INVALID_ARGUMENT,`Expected type '${e.name}', but it was: ${t}`)}}return r}/**
 * @license
 * Copyright 2025 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function et(r,e){const t={typeString:r};return e&&(t.value=e),t}function ra(r,e){if(!v0(r))throw new K($.INVALID_ARGUMENT,"JSON must be an object");let t;for(const n in e)if(e[n]){const s=e[n].typeString,i="value"in e[n]?{value:e[n].value}:void 0;if(!(n in r)){t=`JSON missing required field: '${n}'`;break}const a=r[n];if(s&&typeof a!==s){t=`JSON field '${n}' must be a ${s}.`;break}if(i!==void 0&&a!==i.value){t=`Expected '${n}' field to equal '${i.value}'`;break}}if(t)throw new K($.INVALID_ARGUMENT,t);return!0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Mp=-62135596800,Dp=1e6;class Fe{static now(){return Fe.fromMillis(Date.now())}static fromDate(e){return Fe.fromMillis(e.getTime())}static fromMillis(e){const t=Math.floor(e/1e3),n=Math.floor((e-1e3*t)*Dp);return new Fe(t,n)}constructor(e,t){if(this.seconds=e,this.nanoseconds=t,t<0)throw new K($.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+t);if(t>=1e9)throw new K($.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+t);if(e<Mp)throw new K($.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e);if(e>=253402300800)throw new K($.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/Dp}_compareTo(e){return this.seconds===e.seconds?ye(this.nanoseconds,e.nanoseconds):ye(this.seconds,e.seconds)}isEqual(e){return e.seconds===this.seconds&&e.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{type:Fe._jsonSchemaVersion,seconds:this.seconds,nanoseconds:this.nanoseconds}}static fromJSON(e){if(ra(e,Fe._jsonSchema))return new Fe(e.seconds,e.nanoseconds)}valueOf(){const e=this.seconds-Mp;return String(e).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}}Fe._jsonSchemaVersion="firestore/timestamp/1.0",Fe._jsonSchema={type:et("string",Fe._jsonSchemaVersion),seconds:et("number"),nanoseconds:et("number")};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ce{static fromTimestamp(e){return new ce(e)}static min(){return new ce(new Fe(0,0))}static max(){return new ce(new Fe(253402300799,999999999))}constructor(e){this.timestamp=e}compareTo(e){return this.timestamp._compareTo(e.timestamp)}isEqual(e){return this.timestamp.isEqual(e.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Oi=-1;function SS(r,e){const t=r.toTimestamp().seconds,n=r.toTimestamp().nanoseconds+1,s=ce.fromTimestamp(n===1e9?new Fe(t+1,0):new Fe(t,n));return new An(s,re.empty(),e)}function jS(r){return new An(r.readTime,r.key,Oi)}class An{constructor(e,t,n){this.readTime=e,this.documentKey=t,this.largestBatchId=n}static min(){return new An(ce.min(),re.empty(),Oi)}static max(){return new An(ce.max(),re.empty(),Oi)}}function IS(r,e){let t=r.readTime.compareTo(e.readTime);return t!==0?t:(t=re.comparator(r.documentKey,e.documentKey),t!==0?t:ye(r.largestBatchId,e.largestBatchId))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const AS="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.";class RS{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(e){this.onCommittedListeners.push(e)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach(e=>e())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Vo(r){if(r.code!==$.FAILED_PRECONDITION||r.message!==AS)throw r;Y("LocalStore","Unexpectedly lost primary lease")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class B{constructor(e){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,e(t=>{this.isDone=!0,this.result=t,this.nextCallback&&this.nextCallback(t)},t=>{this.isDone=!0,this.error=t,this.catchCallback&&this.catchCallback(t)})}catch(e){return this.next(void 0,e)}next(e,t){return this.callbackAttached&&ae(59440),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(t,this.error):this.wrapSuccess(e,this.result):new B((n,s)=>{this.nextCallback=i=>{this.wrapSuccess(e,i).next(n,s)},this.catchCallback=i=>{this.wrapFailure(t,i).next(n,s)}})}toPromise(){return new Promise((e,t)=>{this.next(e,t)})}wrapUserFunction(e){try{const t=e();return t instanceof B?t:B.resolve(t)}catch(t){return B.reject(t)}}wrapSuccess(e,t){return e?this.wrapUserFunction(()=>e(t)):B.resolve(t)}wrapFailure(e,t){return e?this.wrapUserFunction(()=>e(t)):B.reject(t)}static resolve(e){return new B((t,n)=>{t(e)})}static reject(e){return new B((t,n)=>{n(e)})}static waitFor(e){return new B((t,n)=>{let s=0,i=0,a=!1;e.forEach(l=>{++s,l.next(()=>{++i,a&&i===s&&t()},u=>n(u))}),a=!0,i===s&&t()})}static or(e){let t=B.resolve(!1);for(const n of e)t=t.next(s=>s?B.resolve(s):n());return t}static forEach(e,t){const n=[];return e.forEach((s,i)=>{n.push(t.call(this,s,i))}),this.waitFor(n)}static mapArray(e,t){return new B((n,s)=>{const i=e.length,a=new Array(i);let l=0;for(let u=0;u<i;u++){const d=u;t(e[d]).next(h=>{a[d]=h,++l,l===i&&n(a)},h=>s(h))}})}static doWhile(e,t){return new B((n,s)=>{const i=()=>{e()===!0?t().next(()=>{i()},s):n()};i()})}}function PS(r){const e=r.match(/Android ([\d.]+)/i),t=e?e[1].split(".").slice(0,2).join("."):"-1";return Number(t)}function Fo(r){return r.name==="IndexedDbTransactionError"}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class cc{constructor(e,t){this.previousValue=e,t&&(t.sequenceNumberHandler=n=>this._e(n),this.ae=n=>t.writeSequenceNumber(n))}_e(e){return this.previousValue=Math.max(e,this.previousValue),this.previousValue}next(){const e=++this.previousValue;return this.ae&&this.ae(e),e}}cc.ue=-1;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ch=-1;function uc(r){return r==null}function Tl(r){return r===0&&1/r==-1/0}function MS(r){return typeof r=="number"&&Number.isInteger(r)&&!Tl(r)&&r<=Number.MAX_SAFE_INTEGER&&r>=Number.MIN_SAFE_INTEGER}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const w0="";function DS(r){let e="";for(let t=0;t<r.length;t++)e.length>0&&(e=Op(e)),e=OS(r.get(t),e);return Op(e)}function OS(r,e){let t=e;const n=r.length;for(let s=0;s<n;s++){const i=r.charAt(s);switch(i){case"\0":t+="";break;case w0:t+="";break;default:t+=i}}return t}function Op(r){return r+w0+""}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Lp(r){let e=0;for(const t in r)Object.prototype.hasOwnProperty.call(r,t)&&e++;return e}function Hn(r,e){for(const t in r)Object.prototype.hasOwnProperty.call(r,t)&&e(t,r[t])}function _0(r){for(const e in r)if(Object.prototype.hasOwnProperty.call(r,e))return!1;return!0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Be{constructor(e,t){this.comparator=e,this.root=t||ct.EMPTY}insert(e,t){return new Be(this.comparator,this.root.insert(e,t,this.comparator).copy(null,null,ct.BLACK,null,null))}remove(e){return new Be(this.comparator,this.root.remove(e,this.comparator).copy(null,null,ct.BLACK,null,null))}get(e){let t=this.root;for(;!t.isEmpty();){const n=this.comparator(e,t.key);if(n===0)return t.value;n<0?t=t.left:n>0&&(t=t.right)}return null}indexOf(e){let t=0,n=this.root;for(;!n.isEmpty();){const s=this.comparator(e,n.key);if(s===0)return t+n.left.size;s<0?n=n.left:(t+=n.left.size+1,n=n.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(e){return this.root.inorderTraversal(e)}forEach(e){this.inorderTraversal((t,n)=>(e(t,n),!1))}toString(){const e=[];return this.inorderTraversal((t,n)=>(e.push(`${t}:${n}`),!1)),`{${e.join(", ")}}`}reverseTraversal(e){return this.root.reverseTraversal(e)}getIterator(){return new Va(this.root,null,this.comparator,!1)}getIteratorFrom(e){return new Va(this.root,e,this.comparator,!1)}getReverseIterator(){return new Va(this.root,null,this.comparator,!0)}getReverseIteratorFrom(e){return new Va(this.root,e,this.comparator,!0)}}class Va{constructor(e,t,n,s){this.isReverse=s,this.nodeStack=[];let i=1;for(;!e.isEmpty();)if(i=t?n(e.key,t):1,t&&s&&(i*=-1),i<0)e=this.isReverse?e.left:e.right;else{if(i===0){this.nodeStack.push(e);break}this.nodeStack.push(e),e=this.isReverse?e.right:e.left}}getNext(){let e=this.nodeStack.pop();const t={key:e.key,value:e.value};if(this.isReverse)for(e=e.left;!e.isEmpty();)this.nodeStack.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack.push(e),e=e.left;return t}hasNext(){return this.nodeStack.length>0}peek(){if(this.nodeStack.length===0)return null;const e=this.nodeStack[this.nodeStack.length-1];return{key:e.key,value:e.value}}}class ct{constructor(e,t,n,s,i){this.key=e,this.value=t,this.color=n??ct.RED,this.left=s??ct.EMPTY,this.right=i??ct.EMPTY,this.size=this.left.size+1+this.right.size}copy(e,t,n,s,i){return new ct(e??this.key,t??this.value,n??this.color,s??this.left,i??this.right)}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,t,n){let s=this;const i=n(e,s.key);return s=i<0?s.copy(null,null,null,s.left.insert(e,t,n),null):i===0?s.copy(null,t,null,null,null):s.copy(null,null,null,null,s.right.insert(e,t,n)),s.fixUp()}removeMin(){if(this.left.isEmpty())return ct.EMPTY;let e=this;return e.left.isRed()||e.left.left.isRed()||(e=e.moveRedLeft()),e=e.copy(null,null,null,e.left.removeMin(),null),e.fixUp()}remove(e,t){let n,s=this;if(t(e,s.key)<0)s.left.isEmpty()||s.left.isRed()||s.left.left.isRed()||(s=s.moveRedLeft()),s=s.copy(null,null,null,s.left.remove(e,t),null);else{if(s.left.isRed()&&(s=s.rotateRight()),s.right.isEmpty()||s.right.isRed()||s.right.left.isRed()||(s=s.moveRedRight()),t(e,s.key)===0){if(s.right.isEmpty())return ct.EMPTY;n=s.right.min(),s=s.copy(n.key,n.value,null,null,s.right.removeMin())}s=s.copy(null,null,null,null,s.right.remove(e,t))}return s.fixUp()}isRed(){return this.color}fixUp(){let e=this;return e.right.isRed()&&!e.left.isRed()&&(e=e.rotateLeft()),e.left.isRed()&&e.left.left.isRed()&&(e=e.rotateRight()),e.left.isRed()&&e.right.isRed()&&(e=e.colorFlip()),e}moveRedLeft(){let e=this.colorFlip();return e.right.left.isRed()&&(e=e.copy(null,null,null,null,e.right.rotateRight()),e=e.rotateLeft(),e=e.colorFlip()),e}moveRedRight(){let e=this.colorFlip();return e.left.left.isRed()&&(e=e.rotateRight(),e=e.colorFlip()),e}rotateLeft(){const e=this.copy(null,null,ct.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight(){const e=this.copy(null,null,ct.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip(){const e=this.left.copy(null,null,!this.left.color,null,null),t=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,t)}checkMaxDepth(){const e=this.check();return Math.pow(2,e)<=this.size+1}check(){if(this.isRed()&&this.left.isRed())throw ae(43730,{key:this.key,value:this.value});if(this.right.isRed())throw ae(14113,{key:this.key,value:this.value});const e=this.left.check();if(e!==this.right.check())throw ae(27949);return e+(this.isRed()?0:1)}}ct.EMPTY=null,ct.RED=!0,ct.BLACK=!1;ct.EMPTY=new class{constructor(){this.size=0}get key(){throw ae(57766)}get value(){throw ae(16141)}get color(){throw ae(16727)}get left(){throw ae(29726)}get right(){throw ae(36894)}copy(e,t,n,s,i){return this}insert(e,t,n){return new ct(e,t)}remove(e,t){return this}isEmpty(){return!0}inorderTraversal(e){return!1}reverseTraversal(e){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class st{constructor(e){this.comparator=e,this.data=new Be(this.comparator)}has(e){return this.data.get(e)!==null}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(e){return this.data.indexOf(e)}forEach(e){this.data.inorderTraversal((t,n)=>(e(t),!1))}forEachInRange(e,t){const n=this.data.getIteratorFrom(e[0]);for(;n.hasNext();){const s=n.getNext();if(this.comparator(s.key,e[1])>=0)return;t(s.key)}}forEachWhile(e,t){let n;for(n=t!==void 0?this.data.getIteratorFrom(t):this.data.getIterator();n.hasNext();)if(!e(n.getNext().key))return}firstAfterOrEqual(e){const t=this.data.getIteratorFrom(e);return t.hasNext()?t.getNext().key:null}getIterator(){return new Vp(this.data.getIterator())}getIteratorFrom(e){return new Vp(this.data.getIteratorFrom(e))}add(e){return this.copy(this.data.remove(e).insert(e,!0))}delete(e){return this.has(e)?this.copy(this.data.remove(e)):this}isEmpty(){return this.data.isEmpty()}unionWith(e){let t=this;return t.size<e.size&&(t=e,e=this),e.forEach(n=>{t=t.add(n)}),t}isEqual(e){if(!(e instanceof st)||this.size!==e.size)return!1;const t=this.data.getIterator(),n=e.data.getIterator();for(;t.hasNext();){const s=t.getNext().key,i=n.getNext().key;if(this.comparator(s,i)!==0)return!1}return!0}toArray(){const e=[];return this.forEach(t=>{e.push(t)}),e}toString(){const e=[];return this.forEach(t=>e.push(t)),"SortedSet("+e.toString()+")"}copy(e){const t=new st(this.comparator);return t.data=e,t}}class Vp{constructor(e){this.iter=e}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $t{constructor(e){this.fields=e,e.sort(ut.comparator)}static empty(){return new $t([])}unionWith(e){let t=new st(ut.comparator);for(const n of this.fields)t=t.add(n);for(const n of e)t=t.add(n);return new $t(t.toArray())}covers(e){for(const t of this.fields)if(t.isPrefixOf(e))return!0;return!1}isEqual(e){return No(this.fields,e.fields,(t,n)=>t.isEqual(n))}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class T0 extends Error{constructor(){super(...arguments),this.name="Base64DecodeError"}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class dt{constructor(e){this.binaryString=e}static fromBase64String(e){const t=function(s){try{return atob(s)}catch(i){throw typeof DOMException<"u"&&i instanceof DOMException?new T0("Invalid base64 string: "+i):i}}(e);return new dt(t)}static fromUint8Array(e){const t=function(s){let i="";for(let a=0;a<s.length;++a)i+=String.fromCharCode(s[a]);return i}(e);return new dt(t)}[Symbol.iterator](){let e=0;return{next:()=>e<this.binaryString.length?{value:this.binaryString.charCodeAt(e++),done:!1}:{value:void 0,done:!0}}}toBase64(){return function(t){return btoa(t)}(this.binaryString)}toUint8Array(){return function(t){const n=new Uint8Array(t.length);for(let s=0;s<t.length;s++)n[s]=t.charCodeAt(s);return n}(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(e){return ye(this.binaryString,e.binaryString)}isEqual(e){return this.binaryString===e.binaryString}}dt.EMPTY_BYTE_STRING=new dt("");const LS=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function Rn(r){if(ke(!!r,39018),typeof r=="string"){let e=0;const t=LS.exec(r);if(ke(!!t,46558,{timestamp:r}),t[1]){let s=t[1];s=(s+"000000000").substr(0,9),e=Number(s)}const n=new Date(r);return{seconds:Math.floor(n.getTime()/1e3),nanos:e}}return{seconds:Qe(r.seconds),nanos:Qe(r.nanos)}}function Qe(r){return typeof r=="number"?r:typeof r=="string"?Number(r):0}function Pn(r){return typeof r=="string"?dt.fromBase64String(r):dt.fromUint8Array(r)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const E0="server_timestamp",N0="__type__",C0="__previous_value__",k0="__local_write_time__";function kh(r){var e,t;return((t=(((e=r==null?void 0:r.mapValue)===null||e===void 0?void 0:e.fields)||{})[N0])===null||t===void 0?void 0:t.stringValue)===E0}function dc(r){const e=r.mapValue.fields[C0];return kh(e)?dc(e):e}function Li(r){const e=Rn(r.mapValue.fields[k0].timestampValue);return new Fe(e.seconds,e.nanos)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class VS{constructor(e,t,n,s,i,a,l,u,d,h){this.databaseId=e,this.appId=t,this.persistenceKey=n,this.host=s,this.ssl=i,this.forceLongPolling=a,this.autoDetectLongPolling=l,this.longPollingOptions=u,this.useFetchStreams=d,this.isUsingEmulator=h}}const El="(default)";class Vi{constructor(e,t){this.projectId=e,this.database=t||El}static empty(){return new Vi("","")}get isDefaultDatabase(){return this.database===El}isEqual(e){return e instanceof Vi&&e.projectId===this.projectId&&e.database===this.database}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const S0="__type__",FS="__max__",Fa={mapValue:{}},j0="__vector__",Nl="value";function Mn(r){return"nullValue"in r?0:"booleanValue"in r?1:"integerValue"in r||"doubleValue"in r?2:"timestampValue"in r?3:"stringValue"in r?5:"bytesValue"in r?6:"referenceValue"in r?7:"geoPointValue"in r?8:"arrayValue"in r?9:"mapValue"in r?kh(r)?4:$S(r)?9007199254740991:US(r)?10:11:ae(28295,{value:r})}function Cr(r,e){if(r===e)return!0;const t=Mn(r);if(t!==Mn(e))return!1;switch(t){case 0:case 9007199254740991:return!0;case 1:return r.booleanValue===e.booleanValue;case 4:return Li(r).isEqual(Li(e));case 3:return function(s,i){if(typeof s.timestampValue=="string"&&typeof i.timestampValue=="string"&&s.timestampValue.length===i.timestampValue.length)return s.timestampValue===i.timestampValue;const a=Rn(s.timestampValue),l=Rn(i.timestampValue);return a.seconds===l.seconds&&a.nanos===l.nanos}(r,e);case 5:return r.stringValue===e.stringValue;case 6:return function(s,i){return Pn(s.bytesValue).isEqual(Pn(i.bytesValue))}(r,e);case 7:return r.referenceValue===e.referenceValue;case 8:return function(s,i){return Qe(s.geoPointValue.latitude)===Qe(i.geoPointValue.latitude)&&Qe(s.geoPointValue.longitude)===Qe(i.geoPointValue.longitude)}(r,e);case 2:return function(s,i){if("integerValue"in s&&"integerValue"in i)return Qe(s.integerValue)===Qe(i.integerValue);if("doubleValue"in s&&"doubleValue"in i){const a=Qe(s.doubleValue),l=Qe(i.doubleValue);return a===l?Tl(a)===Tl(l):isNaN(a)&&isNaN(l)}return!1}(r,e);case 9:return No(r.arrayValue.values||[],e.arrayValue.values||[],Cr);case 10:case 11:return function(s,i){const a=s.mapValue.fields||{},l=i.mapValue.fields||{};if(Lp(a)!==Lp(l))return!1;for(const u in a)if(a.hasOwnProperty(u)&&(l[u]===void 0||!Cr(a[u],l[u])))return!1;return!0}(r,e);default:return ae(52216,{left:r})}}function Fi(r,e){return(r.values||[]).find(t=>Cr(t,e))!==void 0}function Co(r,e){if(r===e)return 0;const t=Mn(r),n=Mn(e);if(t!==n)return ye(t,n);switch(t){case 0:case 9007199254740991:return 0;case 1:return ye(r.booleanValue,e.booleanValue);case 2:return function(i,a){const l=Qe(i.integerValue||i.doubleValue),u=Qe(a.integerValue||a.doubleValue);return l<u?-1:l>u?1:l===u?0:isNaN(l)?isNaN(u)?0:-1:1}(r,e);case 3:return Fp(r.timestampValue,e.timestampValue);case 4:return Fp(Li(r),Li(e));case 5:return sd(r.stringValue,e.stringValue);case 6:return function(i,a){const l=Pn(i),u=Pn(a);return l.compareTo(u)}(r.bytesValue,e.bytesValue);case 7:return function(i,a){const l=i.split("/"),u=a.split("/");for(let d=0;d<l.length&&d<u.length;d++){const h=ye(l[d],u[d]);if(h!==0)return h}return ye(l.length,u.length)}(r.referenceValue,e.referenceValue);case 8:return function(i,a){const l=ye(Qe(i.latitude),Qe(a.latitude));return l!==0?l:ye(Qe(i.longitude),Qe(a.longitude))}(r.geoPointValue,e.geoPointValue);case 9:return Up(r.arrayValue,e.arrayValue);case 10:return function(i,a){var l,u,d,h;const m=i.fields||{},g=a.fields||{},x=(l=m[Nl])===null||l===void 0?void 0:l.arrayValue,S=(u=g[Nl])===null||u===void 0?void 0:u.arrayValue,b=ye(((d=x==null?void 0:x.values)===null||d===void 0?void 0:d.length)||0,((h=S==null?void 0:S.values)===null||h===void 0?void 0:h.length)||0);return b!==0?b:Up(x,S)}(r.mapValue,e.mapValue);case 11:return function(i,a){if(i===Fa.mapValue&&a===Fa.mapValue)return 0;if(i===Fa.mapValue)return 1;if(a===Fa.mapValue)return-1;const l=i.fields||{},u=Object.keys(l),d=a.fields||{},h=Object.keys(d);u.sort(),h.sort();for(let m=0;m<u.length&&m<h.length;++m){const g=sd(u[m],h[m]);if(g!==0)return g;const x=Co(l[u[m]],d[h[m]]);if(x!==0)return x}return ye(u.length,h.length)}(r.mapValue,e.mapValue);default:throw ae(23264,{le:t})}}function Fp(r,e){if(typeof r=="string"&&typeof e=="string"&&r.length===e.length)return ye(r,e);const t=Rn(r),n=Rn(e),s=ye(t.seconds,n.seconds);return s!==0?s:ye(t.nanos,n.nanos)}function Up(r,e){const t=r.values||[],n=e.values||[];for(let s=0;s<t.length&&s<n.length;++s){const i=Co(t[s],n[s]);if(i)return i}return ye(t.length,n.length)}function ko(r){return od(r)}function od(r){return"nullValue"in r?"null":"booleanValue"in r?""+r.booleanValue:"integerValue"in r?""+r.integerValue:"doubleValue"in r?""+r.doubleValue:"timestampValue"in r?function(t){const n=Rn(t);return`time(${n.seconds},${n.nanos})`}(r.timestampValue):"stringValue"in r?r.stringValue:"bytesValue"in r?function(t){return Pn(t).toBase64()}(r.bytesValue):"referenceValue"in r?function(t){return re.fromName(t).toString()}(r.referenceValue):"geoPointValue"in r?function(t){return`geo(${t.latitude},${t.longitude})`}(r.geoPointValue):"arrayValue"in r?function(t){let n="[",s=!0;for(const i of t.values||[])s?s=!1:n+=",",n+=od(i);return n+"]"}(r.arrayValue):"mapValue"in r?function(t){const n=Object.keys(t.fields||{}).sort();let s="{",i=!0;for(const a of n)i?i=!1:s+=",",s+=`${a}:${od(t.fields[a])}`;return s+"}"}(r.mapValue):ae(61005,{value:r})}function tl(r){switch(Mn(r)){case 0:case 1:return 4;case 2:return 8;case 3:case 8:return 16;case 4:const e=dc(r);return e?16+tl(e):16;case 5:return 2*r.stringValue.length;case 6:return Pn(r.bytesValue).approximateByteSize();case 7:return r.referenceValue.length;case 9:return function(n){return(n.values||[]).reduce((s,i)=>s+tl(i),0)}(r.arrayValue);case 10:case 11:return function(n){let s=0;return Hn(n.fields,(i,a)=>{s+=i.length+tl(a)}),s}(r.mapValue);default:throw ae(13486,{value:r})}}function $p(r,e){return{referenceValue:`projects/${r.projectId}/databases/${r.database}/documents/${e.path.canonicalString()}`}}function id(r){return!!r&&"integerValue"in r}function Sh(r){return!!r&&"arrayValue"in r}function Bp(r){return!!r&&"nullValue"in r}function zp(r){return!!r&&"doubleValue"in r&&isNaN(Number(r.doubleValue))}function rl(r){return!!r&&"mapValue"in r}function US(r){var e,t;return((t=(((e=r==null?void 0:r.mapValue)===null||e===void 0?void 0:e.fields)||{})[S0])===null||t===void 0?void 0:t.stringValue)===j0}function Ti(r){if(r.geoPointValue)return{geoPointValue:Object.assign({},r.geoPointValue)};if(r.timestampValue&&typeof r.timestampValue=="object")return{timestampValue:Object.assign({},r.timestampValue)};if(r.mapValue){const e={mapValue:{fields:{}}};return Hn(r.mapValue.fields,(t,n)=>e.mapValue.fields[t]=Ti(n)),e}if(r.arrayValue){const e={arrayValue:{values:[]}};for(let t=0;t<(r.arrayValue.values||[]).length;++t)e.arrayValue.values[t]=Ti(r.arrayValue.values[t]);return e}return Object.assign({},r)}function $S(r){return(((r.mapValue||{}).fields||{}).__type__||{}).stringValue===FS}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Mt{constructor(e){this.value=e}static empty(){return new Mt({mapValue:{}})}field(e){if(e.isEmpty())return this.value;{let t=this.value;for(let n=0;n<e.length-1;++n)if(t=(t.mapValue.fields||{})[e.get(n)],!rl(t))return null;return t=(t.mapValue.fields||{})[e.lastSegment()],t||null}}set(e,t){this.getFieldsMap(e.popLast())[e.lastSegment()]=Ti(t)}setAll(e){let t=ut.emptyPath(),n={},s=[];e.forEach((a,l)=>{if(!t.isImmediateParentOf(l)){const u=this.getFieldsMap(t);this.applyChanges(u,n,s),n={},s=[],t=l.popLast()}a?n[l.lastSegment()]=Ti(a):s.push(l.lastSegment())});const i=this.getFieldsMap(t);this.applyChanges(i,n,s)}delete(e){const t=this.field(e.popLast());rl(t)&&t.mapValue.fields&&delete t.mapValue.fields[e.lastSegment()]}isEqual(e){return Cr(this.value,e.value)}getFieldsMap(e){let t=this.value;t.mapValue.fields||(t.mapValue={fields:{}});for(let n=0;n<e.length;++n){let s=t.mapValue.fields[e.get(n)];rl(s)&&s.mapValue.fields||(s={mapValue:{fields:{}}},t.mapValue.fields[e.get(n)]=s),t=s}return t.mapValue.fields}applyChanges(e,t,n){Hn(t,(s,i)=>e[s]=i);for(const s of n)delete e[s]}clone(){return new Mt(Ti(this.value))}}function I0(r){const e=[];return Hn(r.fields,(t,n)=>{const s=new ut([t]);if(rl(n)){const i=I0(n.mapValue).fields;if(i.length===0)e.push(s);else for(const a of i)e.push(s.child(a))}else e.push(s)}),new $t(e)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class vt{constructor(e,t,n,s,i,a,l){this.key=e,this.documentType=t,this.version=n,this.readTime=s,this.createTime=i,this.data=a,this.documentState=l}static newInvalidDocument(e){return new vt(e,0,ce.min(),ce.min(),ce.min(),Mt.empty(),0)}static newFoundDocument(e,t,n,s){return new vt(e,1,t,ce.min(),n,s,0)}static newNoDocument(e,t){return new vt(e,2,t,ce.min(),ce.min(),Mt.empty(),0)}static newUnknownDocument(e,t){return new vt(e,3,t,ce.min(),ce.min(),Mt.empty(),2)}convertToFoundDocument(e,t){return!this.createTime.isEqual(ce.min())||this.documentType!==2&&this.documentType!==0||(this.createTime=e),this.version=e,this.documentType=1,this.data=t,this.documentState=0,this}convertToNoDocument(e){return this.version=e,this.documentType=2,this.data=Mt.empty(),this.documentState=0,this}convertToUnknownDocument(e){return this.version=e,this.documentType=3,this.data=Mt.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=ce.min(),this}setReadTime(e){return this.readTime=e,this}get hasLocalMutations(){return this.documentState===1}get hasCommittedMutations(){return this.documentState===2}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return this.documentType!==0}isFoundDocument(){return this.documentType===1}isNoDocument(){return this.documentType===2}isUnknownDocument(){return this.documentType===3}isEqual(e){return e instanceof vt&&this.key.isEqual(e.key)&&this.version.isEqual(e.version)&&this.documentType===e.documentType&&this.documentState===e.documentState&&this.data.isEqual(e.data)}mutableCopy(){return new vt(this.key,this.documentType,this.version,this.readTime,this.createTime,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {createTime: ${this.createTime}}), {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Cl{constructor(e,t){this.position=e,this.inclusive=t}}function qp(r,e,t){let n=0;for(let s=0;s<r.position.length;s++){const i=e[s],a=r.position[s];if(i.field.isKeyField()?n=re.comparator(re.fromName(a.referenceValue),t.key):n=Co(a,t.data.field(i.field)),i.dir==="desc"&&(n*=-1),n!==0)break}return n}function Hp(r,e){if(r===null)return e===null;if(e===null||r.inclusive!==e.inclusive||r.position.length!==e.position.length)return!1;for(let t=0;t<r.position.length;t++)if(!Cr(r.position[t],e.position[t]))return!1;return!0}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class kl{constructor(e,t="asc"){this.field=e,this.dir=t}}function BS(r,e){return r.dir===e.dir&&r.field.isEqual(e.field)}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class A0{}class Ze extends A0{constructor(e,t,n){super(),this.field=e,this.op=t,this.value=n}static create(e,t,n){return e.isKeyField()?t==="in"||t==="not-in"?this.createKeyFieldInFilter(e,t,n):new qS(e,t,n):t==="array-contains"?new GS(e,n):t==="in"?new KS(e,n):t==="not-in"?new QS(e,n):t==="array-contains-any"?new YS(e,n):new Ze(e,t,n)}static createKeyFieldInFilter(e,t,n){return t==="in"?new HS(e,n):new WS(e,n)}matches(e){const t=e.data.field(this.field);return this.op==="!="?t!==null&&t.nullValue===void 0&&this.matchesComparison(Co(t,this.value)):t!==null&&Mn(this.value)===Mn(t)&&this.matchesComparison(Co(t,this.value))}matchesComparison(e){switch(this.op){case"<":return e<0;case"<=":return e<=0;case"==":return e===0;case"!=":return e!==0;case">":return e>0;case">=":return e>=0;default:return ae(47266,{operator:this.op})}}isInequality(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}getFlattenedFilters(){return[this]}getFilters(){return[this]}}class cr extends A0{constructor(e,t){super(),this.filters=e,this.op=t,this.he=null}static create(e,t){return new cr(e,t)}matches(e){return R0(this)?this.filters.find(t=>!t.matches(e))===void 0:this.filters.find(t=>t.matches(e))!==void 0}getFlattenedFilters(){return this.he!==null||(this.he=this.filters.reduce((e,t)=>e.concat(t.getFlattenedFilters()),[])),this.he}getFilters(){return Object.assign([],this.filters)}}function R0(r){return r.op==="and"}function P0(r){return zS(r)&&R0(r)}function zS(r){for(const e of r.filters)if(e instanceof cr)return!1;return!0}function ad(r){if(r instanceof Ze)return r.field.canonicalString()+r.op.toString()+ko(r.value);if(P0(r))return r.filters.map(e=>ad(e)).join(",");{const e=r.filters.map(t=>ad(t)).join(",");return`${r.op}(${e})`}}function M0(r,e){return r instanceof Ze?function(n,s){return s instanceof Ze&&n.op===s.op&&n.field.isEqual(s.field)&&Cr(n.value,s.value)}(r,e):r instanceof cr?function(n,s){return s instanceof cr&&n.op===s.op&&n.filters.length===s.filters.length?n.filters.reduce((i,a,l)=>i&&M0(a,s.filters[l]),!0):!1}(r,e):void ae(19439)}function D0(r){return r instanceof Ze?function(t){return`${t.field.canonicalString()} ${t.op} ${ko(t.value)}`}(r):r instanceof cr?function(t){return t.op.toString()+" {"+t.getFilters().map(D0).join(" ,")+"}"}(r):"Filter"}class qS extends Ze{constructor(e,t,n){super(e,t,n),this.key=re.fromName(n.referenceValue)}matches(e){const t=re.comparator(e.key,this.key);return this.matchesComparison(t)}}class HS extends Ze{constructor(e,t){super(e,"in",t),this.keys=O0("in",t)}matches(e){return this.keys.some(t=>t.isEqual(e.key))}}class WS extends Ze{constructor(e,t){super(e,"not-in",t),this.keys=O0("not-in",t)}matches(e){return!this.keys.some(t=>t.isEqual(e.key))}}function O0(r,e){var t;return(((t=e.arrayValue)===null||t===void 0?void 0:t.values)||[]).map(n=>re.fromName(n.referenceValue))}class GS extends Ze{constructor(e,t){super(e,"array-contains",t)}matches(e){const t=e.data.field(this.field);return Sh(t)&&Fi(t.arrayValue,this.value)}}class KS extends Ze{constructor(e,t){super(e,"in",t)}matches(e){const t=e.data.field(this.field);return t!==null&&Fi(this.value.arrayValue,t)}}class QS extends Ze{constructor(e,t){super(e,"not-in",t)}matches(e){if(Fi(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;const t=e.data.field(this.field);return t!==null&&t.nullValue===void 0&&!Fi(this.value.arrayValue,t)}}class YS extends Ze{constructor(e,t){super(e,"array-contains-any",t)}matches(e){const t=e.data.field(this.field);return!(!Sh(t)||!t.arrayValue.values)&&t.arrayValue.values.some(n=>Fi(this.value.arrayValue,n))}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class XS{constructor(e,t=null,n=[],s=[],i=null,a=null,l=null){this.path=e,this.collectionGroup=t,this.orderBy=n,this.filters=s,this.limit=i,this.startAt=a,this.endAt=l,this.Pe=null}}function Wp(r,e=null,t=[],n=[],s=null,i=null,a=null){return new XS(r,e,t,n,s,i,a)}function jh(r){const e=de(r);if(e.Pe===null){let t=e.path.canonicalString();e.collectionGroup!==null&&(t+="|cg:"+e.collectionGroup),t+="|f:",t+=e.filters.map(n=>ad(n)).join(","),t+="|ob:",t+=e.orderBy.map(n=>function(i){return i.field.canonicalString()+i.dir}(n)).join(","),uc(e.limit)||(t+="|l:",t+=e.limit),e.startAt&&(t+="|lb:",t+=e.startAt.inclusive?"b:":"a:",t+=e.startAt.position.map(n=>ko(n)).join(",")),e.endAt&&(t+="|ub:",t+=e.endAt.inclusive?"a:":"b:",t+=e.endAt.position.map(n=>ko(n)).join(",")),e.Pe=t}return e.Pe}function Ih(r,e){if(r.limit!==e.limit||r.orderBy.length!==e.orderBy.length)return!1;for(let t=0;t<r.orderBy.length;t++)if(!BS(r.orderBy[t],e.orderBy[t]))return!1;if(r.filters.length!==e.filters.length)return!1;for(let t=0;t<r.filters.length;t++)if(!M0(r.filters[t],e.filters[t]))return!1;return r.collectionGroup===e.collectionGroup&&!!r.path.isEqual(e.path)&&!!Hp(r.startAt,e.startAt)&&Hp(r.endAt,e.endAt)}function ld(r){return re.isDocumentKey(r.path)&&r.collectionGroup===null&&r.filters.length===0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class na{constructor(e,t=null,n=[],s=[],i=null,a="F",l=null,u=null){this.path=e,this.collectionGroup=t,this.explicitOrderBy=n,this.filters=s,this.limit=i,this.limitType=a,this.startAt=l,this.endAt=u,this.Te=null,this.Ie=null,this.de=null,this.startAt,this.endAt}}function JS(r,e,t,n,s,i,a,l){return new na(r,e,t,n,s,i,a,l)}function L0(r){return new na(r)}function Gp(r){return r.filters.length===0&&r.limit===null&&r.startAt==null&&r.endAt==null&&(r.explicitOrderBy.length===0||r.explicitOrderBy.length===1&&r.explicitOrderBy[0].field.isKeyField())}function V0(r){return r.collectionGroup!==null}function Ei(r){const e=de(r);if(e.Te===null){e.Te=[];const t=new Set;for(const i of e.explicitOrderBy)e.Te.push(i),t.add(i.field.canonicalString());const n=e.explicitOrderBy.length>0?e.explicitOrderBy[e.explicitOrderBy.length-1].dir:"asc";(function(a){let l=new st(ut.comparator);return a.filters.forEach(u=>{u.getFlattenedFilters().forEach(d=>{d.isInequality()&&(l=l.add(d.field))})}),l})(e).forEach(i=>{t.has(i.canonicalString())||i.isKeyField()||e.Te.push(new kl(i,n))}),t.has(ut.keyField().canonicalString())||e.Te.push(new kl(ut.keyField(),n))}return e.Te}function wr(r){const e=de(r);return e.Ie||(e.Ie=ZS(e,Ei(r))),e.Ie}function ZS(r,e){if(r.limitType==="F")return Wp(r.path,r.collectionGroup,e,r.filters,r.limit,r.startAt,r.endAt);{e=e.map(s=>{const i=s.dir==="desc"?"asc":"desc";return new kl(s.field,i)});const t=r.endAt?new Cl(r.endAt.position,r.endAt.inclusive):null,n=r.startAt?new Cl(r.startAt.position,r.startAt.inclusive):null;return Wp(r.path,r.collectionGroup,e,r.filters,r.limit,t,n)}}function cd(r,e){const t=r.filters.concat([e]);return new na(r.path,r.collectionGroup,r.explicitOrderBy.slice(),t,r.limit,r.limitType,r.startAt,r.endAt)}function ud(r,e,t){return new na(r.path,r.collectionGroup,r.explicitOrderBy.slice(),r.filters.slice(),e,t,r.startAt,r.endAt)}function hc(r,e){return Ih(wr(r),wr(e))&&r.limitType===e.limitType}function F0(r){return`${jh(wr(r))}|lt:${r.limitType}`}function Us(r){return`Query(target=${function(t){let n=t.path.canonicalString();return t.collectionGroup!==null&&(n+=" collectionGroup="+t.collectionGroup),t.filters.length>0&&(n+=`, filters: [${t.filters.map(s=>D0(s)).join(", ")}]`),uc(t.limit)||(n+=", limit: "+t.limit),t.orderBy.length>0&&(n+=`, orderBy: [${t.orderBy.map(s=>function(a){return`${a.field.canonicalString()} (${a.dir})`}(s)).join(", ")}]`),t.startAt&&(n+=", startAt: ",n+=t.startAt.inclusive?"b:":"a:",n+=t.startAt.position.map(s=>ko(s)).join(",")),t.endAt&&(n+=", endAt: ",n+=t.endAt.inclusive?"a:":"b:",n+=t.endAt.position.map(s=>ko(s)).join(",")),`Target(${n})`}(wr(r))}; limitType=${r.limitType})`}function fc(r,e){return e.isFoundDocument()&&function(n,s){const i=s.key.path;return n.collectionGroup!==null?s.key.hasCollectionId(n.collectionGroup)&&n.path.isPrefixOf(i):re.isDocumentKey(n.path)?n.path.isEqual(i):n.path.isImmediateParentOf(i)}(r,e)&&function(n,s){for(const i of Ei(n))if(!i.field.isKeyField()&&s.data.field(i.field)===null)return!1;return!0}(r,e)&&function(n,s){for(const i of n.filters)if(!i.matches(s))return!1;return!0}(r,e)&&function(n,s){return!(n.startAt&&!function(a,l,u){const d=qp(a,l,u);return a.inclusive?d<=0:d<0}(n.startAt,Ei(n),s)||n.endAt&&!function(a,l,u){const d=qp(a,l,u);return a.inclusive?d>=0:d>0}(n.endAt,Ei(n),s))}(r,e)}function e2(r){return r.collectionGroup||(r.path.length%2==1?r.path.lastSegment():r.path.get(r.path.length-2))}function U0(r){return(e,t)=>{let n=!1;for(const s of Ei(r)){const i=t2(s,e,t);if(i!==0)return i;n=n||s.field.isKeyField()}return 0}}function t2(r,e,t){const n=r.field.isKeyField()?re.comparator(e.key,t.key):function(i,a,l){const u=a.data.field(i),d=l.data.field(i);return u!==null&&d!==null?Co(u,d):ae(42886)}(r.field,e,t);switch(r.dir){case"asc":return n;case"desc":return-1*n;default:return ae(19790,{direction:r.dir})}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class As{constructor(e,t){this.mapKeyFn=e,this.equalsFn=t,this.inner={},this.innerSize=0}get(e){const t=this.mapKeyFn(e),n=this.inner[t];if(n!==void 0){for(const[s,i]of n)if(this.equalsFn(s,e))return i}}has(e){return this.get(e)!==void 0}set(e,t){const n=this.mapKeyFn(e),s=this.inner[n];if(s===void 0)return this.inner[n]=[[e,t]],void this.innerSize++;for(let i=0;i<s.length;i++)if(this.equalsFn(s[i][0],e))return void(s[i]=[e,t]);s.push([e,t]),this.innerSize++}delete(e){const t=this.mapKeyFn(e),n=this.inner[t];if(n===void 0)return!1;for(let s=0;s<n.length;s++)if(this.equalsFn(n[s][0],e))return n.length===1?delete this.inner[t]:n.splice(s,1),this.innerSize--,!0;return!1}forEach(e){Hn(this.inner,(t,n)=>{for(const[s,i]of n)e(s,i)})}isEmpty(){return _0(this.inner)}size(){return this.innerSize}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const r2=new Be(re.comparator);function Hr(){return r2}const $0=new Be(re.comparator);function xi(...r){let e=$0;for(const t of r)e=e.insert(t.key,t);return e}function B0(r){let e=$0;return r.forEach((t,n)=>e=e.insert(t,n.overlayedDocument)),e}function ns(){return Ni()}function z0(){return Ni()}function Ni(){return new As(r=>r.toString(),(r,e)=>r.isEqual(e))}const n2=new Be(re.comparator),s2=new st(re.comparator);function ve(...r){let e=s2;for(const t of r)e=e.add(t);return e}const o2=new st(ye);function i2(){return o2}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ah(r,e){if(r.useProto3Json){if(isNaN(e))return{doubleValue:"NaN"};if(e===1/0)return{doubleValue:"Infinity"};if(e===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:Tl(e)?"-0":e}}function q0(r){return{integerValue:""+r}}function a2(r,e){return MS(e)?q0(e):Ah(r,e)}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class mc{constructor(){this._=void 0}}function l2(r,e,t){return r instanceof Sl?function(s,i){const a={fields:{[N0]:{stringValue:E0},[k0]:{timestampValue:{seconds:s.seconds,nanos:s.nanoseconds}}}};return i&&kh(i)&&(i=dc(i)),i&&(a.fields[C0]=i),{mapValue:a}}(t,e):r instanceof Ui?W0(r,e):r instanceof $i?G0(r,e):function(s,i){const a=H0(s,i),l=Kp(a)+Kp(s.Ee);return id(a)&&id(s.Ee)?q0(l):Ah(s.serializer,l)}(r,e)}function c2(r,e,t){return r instanceof Ui?W0(r,e):r instanceof $i?G0(r,e):t}function H0(r,e){return r instanceof jl?function(n){return id(n)||function(i){return!!i&&"doubleValue"in i}(n)}(e)?e:{integerValue:0}:null}class Sl extends mc{}class Ui extends mc{constructor(e){super(),this.elements=e}}function W0(r,e){const t=K0(e);for(const n of r.elements)t.some(s=>Cr(s,n))||t.push(n);return{arrayValue:{values:t}}}class $i extends mc{constructor(e){super(),this.elements=e}}function G0(r,e){let t=K0(e);for(const n of r.elements)t=t.filter(s=>!Cr(s,n));return{arrayValue:{values:t}}}class jl extends mc{constructor(e,t){super(),this.serializer=e,this.Ee=t}}function Kp(r){return Qe(r.integerValue||r.doubleValue)}function K0(r){return Sh(r)&&r.arrayValue.values?r.arrayValue.values.slice():[]}function u2(r,e){return r.field.isEqual(e.field)&&function(n,s){return n instanceof Ui&&s instanceof Ui||n instanceof $i&&s instanceof $i?No(n.elements,s.elements,Cr):n instanceof jl&&s instanceof jl?Cr(n.Ee,s.Ee):n instanceof Sl&&s instanceof Sl}(r.transform,e.transform)}class d2{constructor(e,t){this.version=e,this.transformResults=t}}class qt{constructor(e,t){this.updateTime=e,this.exists=t}static none(){return new qt}static exists(e){return new qt(void 0,e)}static updateTime(e){return new qt(e)}get isNone(){return this.updateTime===void 0&&this.exists===void 0}isEqual(e){return this.exists===e.exists&&(this.updateTime?!!e.updateTime&&this.updateTime.isEqual(e.updateTime):!e.updateTime)}}function nl(r,e){return r.updateTime!==void 0?e.isFoundDocument()&&e.version.isEqual(r.updateTime):r.exists===void 0||r.exists===e.isFoundDocument()}let pc=class{};function Q0(r,e){if(!r.hasLocalMutations||e&&e.fields.length===0)return null;if(e===null)return r.isNoDocument()?new Rh(r.key,qt.none()):new sa(r.key,r.data,qt.none());{const t=r.data,n=Mt.empty();let s=new st(ut.comparator);for(let i of e.fields)if(!s.has(i)){let a=t.field(i);a===null&&i.length>1&&(i=i.popLast(),a=t.field(i)),a===null?n.delete(i):n.set(i,a),s=s.add(i)}return new Wn(r.key,n,new $t(s.toArray()),qt.none())}}function h2(r,e,t){r instanceof sa?function(s,i,a){const l=s.value.clone(),u=Yp(s.fieldTransforms,i,a.transformResults);l.setAll(u),i.convertToFoundDocument(a.version,l).setHasCommittedMutations()}(r,e,t):r instanceof Wn?function(s,i,a){if(!nl(s.precondition,i))return void i.convertToUnknownDocument(a.version);const l=Yp(s.fieldTransforms,i,a.transformResults),u=i.data;u.setAll(Y0(s)),u.setAll(l),i.convertToFoundDocument(a.version,u).setHasCommittedMutations()}(r,e,t):function(s,i,a){i.convertToNoDocument(a.version).setHasCommittedMutations()}(0,e,t)}function Ci(r,e,t,n){return r instanceof sa?function(i,a,l,u){if(!nl(i.precondition,a))return l;const d=i.value.clone(),h=Xp(i.fieldTransforms,u,a);return d.setAll(h),a.convertToFoundDocument(a.version,d).setHasLocalMutations(),null}(r,e,t,n):r instanceof Wn?function(i,a,l,u){if(!nl(i.precondition,a))return l;const d=Xp(i.fieldTransforms,u,a),h=a.data;return h.setAll(Y0(i)),h.setAll(d),a.convertToFoundDocument(a.version,h).setHasLocalMutations(),l===null?null:l.unionWith(i.fieldMask.fields).unionWith(i.fieldTransforms.map(m=>m.field))}(r,e,t,n):function(i,a,l){return nl(i.precondition,a)?(a.convertToNoDocument(a.version).setHasLocalMutations(),null):l}(r,e,t)}function f2(r,e){let t=null;for(const n of r.fieldTransforms){const s=e.data.field(n.field),i=H0(n.transform,s||null);i!=null&&(t===null&&(t=Mt.empty()),t.set(n.field,i))}return t||null}function Qp(r,e){return r.type===e.type&&!!r.key.isEqual(e.key)&&!!r.precondition.isEqual(e.precondition)&&!!function(n,s){return n===void 0&&s===void 0||!(!n||!s)&&No(n,s,(i,a)=>u2(i,a))}(r.fieldTransforms,e.fieldTransforms)&&(r.type===0?r.value.isEqual(e.value):r.type!==1||r.data.isEqual(e.data)&&r.fieldMask.isEqual(e.fieldMask))}class sa extends pc{constructor(e,t,n,s=[]){super(),this.key=e,this.value=t,this.precondition=n,this.fieldTransforms=s,this.type=0}getFieldMask(){return null}}class Wn extends pc{constructor(e,t,n,s,i=[]){super(),this.key=e,this.data=t,this.fieldMask=n,this.precondition=s,this.fieldTransforms=i,this.type=1}getFieldMask(){return this.fieldMask}}function Y0(r){const e=new Map;return r.fieldMask.fields.forEach(t=>{if(!t.isEmpty()){const n=r.data.field(t);e.set(t,n)}}),e}function Yp(r,e,t){const n=new Map;ke(r.length===t.length,32656,{Ae:t.length,Re:r.length});for(let s=0;s<t.length;s++){const i=r[s],a=i.transform,l=e.data.field(i.field);n.set(i.field,c2(a,l,t[s]))}return n}function Xp(r,e,t){const n=new Map;for(const s of r){const i=s.transform,a=t.data.field(s.field);n.set(s.field,l2(i,a,e))}return n}class Rh extends pc{constructor(e,t){super(),this.key=e,this.precondition=t,this.type=2,this.fieldTransforms=[]}getFieldMask(){return null}}class m2 extends pc{constructor(e,t){super(),this.key=e,this.precondition=t,this.type=3,this.fieldTransforms=[]}getFieldMask(){return null}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class p2{constructor(e,t,n,s){this.batchId=e,this.localWriteTime=t,this.baseMutations=n,this.mutations=s}applyToRemoteDocument(e,t){const n=t.mutationResults;for(let s=0;s<this.mutations.length;s++){const i=this.mutations[s];i.key.isEqual(e.key)&&h2(i,e,n[s])}}applyToLocalView(e,t){for(const n of this.baseMutations)n.key.isEqual(e.key)&&(t=Ci(n,e,t,this.localWriteTime));for(const n of this.mutations)n.key.isEqual(e.key)&&(t=Ci(n,e,t,this.localWriteTime));return t}applyToLocalDocumentSet(e,t){const n=z0();return this.mutations.forEach(s=>{const i=e.get(s.key),a=i.overlayedDocument;let l=this.applyToLocalView(a,i.mutatedFields);l=t.has(s.key)?null:l;const u=Q0(a,l);u!==null&&n.set(s.key,u),a.isValidDocument()||a.convertToNoDocument(ce.min())}),n}keys(){return this.mutations.reduce((e,t)=>e.add(t.key),ve())}isEqual(e){return this.batchId===e.batchId&&No(this.mutations,e.mutations,(t,n)=>Qp(t,n))&&No(this.baseMutations,e.baseMutations,(t,n)=>Qp(t,n))}}class Ph{constructor(e,t,n,s){this.batch=e,this.commitVersion=t,this.mutationResults=n,this.docVersions=s}static from(e,t,n){ke(e.mutations.length===n.length,58842,{Ve:e.mutations.length,me:n.length});let s=function(){return n2}();const i=e.mutations;for(let a=0;a<i.length;a++)s=s.insert(i[a].key,n[a].version);return new Ph(e,t,n,s)}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class g2{constructor(e,t){this.largestBatchId=e,this.mutation=t}getKey(){return this.mutation.key}isEqual(e){return e!==null&&this.mutation===e.mutation}toString(){return`Overlay{
      largestBatchId: ${this.largestBatchId},
      mutation: ${this.mutation.toString()}
    }`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class y2{constructor(e,t){this.count=e,this.unchangedNames=t}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var Xe,Te;function x2(r){switch(r){case $.OK:return ae(64938);case $.CANCELLED:case $.UNKNOWN:case $.DEADLINE_EXCEEDED:case $.RESOURCE_EXHAUSTED:case $.INTERNAL:case $.UNAVAILABLE:case $.UNAUTHENTICATED:return!1;case $.INVALID_ARGUMENT:case $.NOT_FOUND:case $.ALREADY_EXISTS:case $.PERMISSION_DENIED:case $.FAILED_PRECONDITION:case $.ABORTED:case $.OUT_OF_RANGE:case $.UNIMPLEMENTED:case $.DATA_LOSS:return!0;default:return ae(15467,{code:r})}}function X0(r){if(r===void 0)return qr("GRPC error has no .code"),$.UNKNOWN;switch(r){case Xe.OK:return $.OK;case Xe.CANCELLED:return $.CANCELLED;case Xe.UNKNOWN:return $.UNKNOWN;case Xe.DEADLINE_EXCEEDED:return $.DEADLINE_EXCEEDED;case Xe.RESOURCE_EXHAUSTED:return $.RESOURCE_EXHAUSTED;case Xe.INTERNAL:return $.INTERNAL;case Xe.UNAVAILABLE:return $.UNAVAILABLE;case Xe.UNAUTHENTICATED:return $.UNAUTHENTICATED;case Xe.INVALID_ARGUMENT:return $.INVALID_ARGUMENT;case Xe.NOT_FOUND:return $.NOT_FOUND;case Xe.ALREADY_EXISTS:return $.ALREADY_EXISTS;case Xe.PERMISSION_DENIED:return $.PERMISSION_DENIED;case Xe.FAILED_PRECONDITION:return $.FAILED_PRECONDITION;case Xe.ABORTED:return $.ABORTED;case Xe.OUT_OF_RANGE:return $.OUT_OF_RANGE;case Xe.UNIMPLEMENTED:return $.UNIMPLEMENTED;case Xe.DATA_LOSS:return $.DATA_LOSS;default:return ae(39323,{code:r})}}(Te=Xe||(Xe={}))[Te.OK=0]="OK",Te[Te.CANCELLED=1]="CANCELLED",Te[Te.UNKNOWN=2]="UNKNOWN",Te[Te.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",Te[Te.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",Te[Te.NOT_FOUND=5]="NOT_FOUND",Te[Te.ALREADY_EXISTS=6]="ALREADY_EXISTS",Te[Te.PERMISSION_DENIED=7]="PERMISSION_DENIED",Te[Te.UNAUTHENTICATED=16]="UNAUTHENTICATED",Te[Te.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",Te[Te.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",Te[Te.ABORTED=10]="ABORTED",Te[Te.OUT_OF_RANGE=11]="OUT_OF_RANGE",Te[Te.UNIMPLEMENTED=12]="UNIMPLEMENTED",Te[Te.INTERNAL=13]="INTERNAL",Te[Te.UNAVAILABLE=14]="UNAVAILABLE",Te[Te.DATA_LOSS=15]="DATA_LOSS";/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const b2=new En([4294967295,4294967295],0);function Jp(r){const e=x0().encode(r),t=new u0;return t.update(e),new Uint8Array(t.digest())}function Zp(r){const e=new DataView(r.buffer),t=e.getUint32(0,!0),n=e.getUint32(4,!0),s=e.getUint32(8,!0),i=e.getUint32(12,!0);return[new En([t,n],0),new En([s,i],0)]}class Mh{constructor(e,t,n){if(this.bitmap=e,this.padding=t,this.hashCount=n,t<0||t>=8)throw new bi(`Invalid padding: ${t}`);if(n<0)throw new bi(`Invalid hash count: ${n}`);if(e.length>0&&this.hashCount===0)throw new bi(`Invalid hash count: ${n}`);if(e.length===0&&t!==0)throw new bi(`Invalid padding when bitmap length is 0: ${t}`);this.fe=8*e.length-t,this.ge=En.fromNumber(this.fe)}pe(e,t,n){let s=e.add(t.multiply(En.fromNumber(n)));return s.compare(b2)===1&&(s=new En([s.getBits(0),s.getBits(1)],0)),s.modulo(this.ge).toNumber()}ye(e){return!!(this.bitmap[Math.floor(e/8)]&1<<e%8)}mightContain(e){if(this.fe===0)return!1;const t=Jp(e),[n,s]=Zp(t);for(let i=0;i<this.hashCount;i++){const a=this.pe(n,s,i);if(!this.ye(a))return!1}return!0}static create(e,t,n){const s=e%8==0?0:8-e%8,i=new Uint8Array(Math.ceil(e/8)),a=new Mh(i,s,t);return n.forEach(l=>a.insert(l)),a}insert(e){if(this.fe===0)return;const t=Jp(e),[n,s]=Zp(t);for(let i=0;i<this.hashCount;i++){const a=this.pe(n,s,i);this.we(a)}}we(e){const t=Math.floor(e/8),n=e%8;this.bitmap[t]|=1<<n}}class bi extends Error{constructor(){super(...arguments),this.name="BloomFilterError"}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class gc{constructor(e,t,n,s,i){this.snapshotVersion=e,this.targetChanges=t,this.targetMismatches=n,this.documentUpdates=s,this.resolvedLimboDocuments=i}static createSynthesizedRemoteEventForCurrentChange(e,t,n){const s=new Map;return s.set(e,oa.createSynthesizedTargetChangeForCurrentChange(e,t,n)),new gc(ce.min(),s,new Be(ye),Hr(),ve())}}class oa{constructor(e,t,n,s,i){this.resumeToken=e,this.current=t,this.addedDocuments=n,this.modifiedDocuments=s,this.removedDocuments=i}static createSynthesizedTargetChangeForCurrentChange(e,t,n){return new oa(n,t,ve(),ve(),ve())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class sl{constructor(e,t,n,s){this.Se=e,this.removedTargetIds=t,this.key=n,this.be=s}}class J0{constructor(e,t){this.targetId=e,this.De=t}}class Z0{constructor(e,t,n=dt.EMPTY_BYTE_STRING,s=null){this.state=e,this.targetIds=t,this.resumeToken=n,this.cause=s}}class eg{constructor(){this.ve=0,this.Ce=tg(),this.Fe=dt.EMPTY_BYTE_STRING,this.Me=!1,this.xe=!0}get current(){return this.Me}get resumeToken(){return this.Fe}get Oe(){return this.ve!==0}get Ne(){return this.xe}Be(e){e.approximateByteSize()>0&&(this.xe=!0,this.Fe=e)}Le(){let e=ve(),t=ve(),n=ve();return this.Ce.forEach((s,i)=>{switch(i){case 0:e=e.add(s);break;case 2:t=t.add(s);break;case 1:n=n.add(s);break;default:ae(38017,{changeType:i})}}),new oa(this.Fe,this.Me,e,t,n)}ke(){this.xe=!1,this.Ce=tg()}qe(e,t){this.xe=!0,this.Ce=this.Ce.insert(e,t)}Qe(e){this.xe=!0,this.Ce=this.Ce.remove(e)}$e(){this.ve+=1}Ue(){this.ve-=1,ke(this.ve>=0,3241,{ve:this.ve})}Ke(){this.xe=!0,this.Me=!0}}class v2{constructor(e){this.We=e,this.Ge=new Map,this.ze=Hr(),this.je=Ua(),this.Je=Ua(),this.He=new Be(ye)}Ye(e){for(const t of e.Se)e.be&&e.be.isFoundDocument()?this.Ze(t,e.be):this.Xe(t,e.key,e.be);for(const t of e.removedTargetIds)this.Xe(t,e.key,e.be)}et(e){this.forEachTarget(e,t=>{const n=this.tt(t);switch(e.state){case 0:this.nt(t)&&n.Be(e.resumeToken);break;case 1:n.Ue(),n.Oe||n.ke(),n.Be(e.resumeToken);break;case 2:n.Ue(),n.Oe||this.removeTarget(t);break;case 3:this.nt(t)&&(n.Ke(),n.Be(e.resumeToken));break;case 4:this.nt(t)&&(this.rt(t),n.Be(e.resumeToken));break;default:ae(56790,{state:e.state})}})}forEachTarget(e,t){e.targetIds.length>0?e.targetIds.forEach(t):this.Ge.forEach((n,s)=>{this.nt(s)&&t(s)})}it(e){const t=e.targetId,n=e.De.count,s=this.st(t);if(s){const i=s.target;if(ld(i))if(n===0){const a=new re(i.path);this.Xe(t,a,vt.newNoDocument(a,ce.min()))}else ke(n===1,20013,{expectedCount:n});else{const a=this.ot(t);if(a!==n){const l=this._t(e),u=l?this.ut(l,e,a):1;if(u!==0){this.rt(t);const d=u===2?"TargetPurposeExistenceFilterMismatchBloom":"TargetPurposeExistenceFilterMismatch";this.He=this.He.insert(t,d)}}}}}_t(e){const t=e.De.unchangedNames;if(!t||!t.bits)return null;const{bits:{bitmap:n="",padding:s=0},hashCount:i=0}=t;let a,l;try{a=Pn(n).toUint8Array()}catch(u){if(u instanceof T0)return jn("Decoding the base64 bloom filter in existence filter failed ("+u.message+"); ignoring the bloom filter and falling back to full re-query."),null;throw u}try{l=new Mh(a,s,i)}catch(u){return jn(u instanceof bi?"BloomFilter error: ":"Applying bloom filter failed: ",u),null}return l.fe===0?null:l}ut(e,t,n){return t.De.count===n-this.ht(e,t.targetId)?0:2}ht(e,t){const n=this.We.getRemoteKeysForTarget(t);let s=0;return n.forEach(i=>{const a=this.We.lt(),l=`projects/${a.projectId}/databases/${a.database}/documents/${i.path.canonicalString()}`;e.mightContain(l)||(this.Xe(t,i,null),s++)}),s}Pt(e){const t=new Map;this.Ge.forEach((i,a)=>{const l=this.st(a);if(l){if(i.current&&ld(l.target)){const u=new re(l.target.path);this.Tt(u).has(a)||this.It(a,u)||this.Xe(a,u,vt.newNoDocument(u,e))}i.Ne&&(t.set(a,i.Le()),i.ke())}});let n=ve();this.Je.forEach((i,a)=>{let l=!0;a.forEachWhile(u=>{const d=this.st(u);return!d||d.purpose==="TargetPurposeLimboResolution"||(l=!1,!1)}),l&&(n=n.add(i))}),this.ze.forEach((i,a)=>a.setReadTime(e));const s=new gc(e,t,this.He,this.ze,n);return this.ze=Hr(),this.je=Ua(),this.Je=Ua(),this.He=new Be(ye),s}Ze(e,t){if(!this.nt(e))return;const n=this.It(e,t.key)?2:0;this.tt(e).qe(t.key,n),this.ze=this.ze.insert(t.key,t),this.je=this.je.insert(t.key,this.Tt(t.key).add(e)),this.Je=this.Je.insert(t.key,this.dt(t.key).add(e))}Xe(e,t,n){if(!this.nt(e))return;const s=this.tt(e);this.It(e,t)?s.qe(t,1):s.Qe(t),this.Je=this.Je.insert(t,this.dt(t).delete(e)),this.Je=this.Je.insert(t,this.dt(t).add(e)),n&&(this.ze=this.ze.insert(t,n))}removeTarget(e){this.Ge.delete(e)}ot(e){const t=this.tt(e).Le();return this.We.getRemoteKeysForTarget(e).size+t.addedDocuments.size-t.removedDocuments.size}$e(e){this.tt(e).$e()}tt(e){let t=this.Ge.get(e);return t||(t=new eg,this.Ge.set(e,t)),t}dt(e){let t=this.Je.get(e);return t||(t=new st(ye),this.Je=this.Je.insert(e,t)),t}Tt(e){let t=this.je.get(e);return t||(t=new st(ye),this.je=this.je.insert(e,t)),t}nt(e){const t=this.st(e)!==null;return t||Y("WatchChangeAggregator","Detected inactive target",e),t}st(e){const t=this.Ge.get(e);return t&&t.Oe?null:this.We.Et(e)}rt(e){this.Ge.set(e,new eg),this.We.getRemoteKeysForTarget(e).forEach(t=>{this.Xe(e,t,null)})}It(e,t){return this.We.getRemoteKeysForTarget(e).has(t)}}function Ua(){return new Be(re.comparator)}function tg(){return new Be(re.comparator)}const w2={asc:"ASCENDING",desc:"DESCENDING"},_2={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"},T2={and:"AND",or:"OR"};class E2{constructor(e,t){this.databaseId=e,this.useProto3Json=t}}function dd(r,e){return r.useProto3Json||uc(e)?e:{value:e}}function Il(r,e){return r.useProto3Json?`${new Date(1e3*e.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+e.nanoseconds).slice(-9)}Z`:{seconds:""+e.seconds,nanos:e.nanoseconds}}function eb(r,e){return r.useProto3Json?e.toBase64():e.toUint8Array()}function N2(r,e){return Il(r,e.toTimestamp())}function _r(r){return ke(!!r,49232),ce.fromTimestamp(function(t){const n=Rn(t);return new Fe(n.seconds,n.nanos)}(r))}function Dh(r,e){return hd(r,e).canonicalString()}function hd(r,e){const t=function(s){return new Pe(["projects",s.projectId,"databases",s.database])}(r).child("documents");return e===void 0?t:t.child(e)}function tb(r){const e=Pe.fromString(r);return ke(ib(e),10190,{key:e.toString()}),e}function fd(r,e){return Dh(r.databaseId,e.path)}function wu(r,e){const t=tb(e);if(t.get(1)!==r.databaseId.projectId)throw new K($.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+t.get(1)+" vs "+r.databaseId.projectId);if(t.get(3)!==r.databaseId.database)throw new K($.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+t.get(3)+" vs "+r.databaseId.database);return new re(nb(t))}function rb(r,e){return Dh(r.databaseId,e)}function C2(r){const e=tb(r);return e.length===4?Pe.emptyPath():nb(e)}function md(r){return new Pe(["projects",r.databaseId.projectId,"databases",r.databaseId.database]).canonicalString()}function nb(r){return ke(r.length>4&&r.get(4)==="documents",29091,{key:r.toString()}),r.popFirst(5)}function rg(r,e,t){return{name:fd(r,e),fields:t.value.mapValue.fields}}function k2(r,e){let t;if("targetChange"in e){e.targetChange;const n=function(d){return d==="NO_CHANGE"?0:d==="ADD"?1:d==="REMOVE"?2:d==="CURRENT"?3:d==="RESET"?4:ae(39313,{state:d})}(e.targetChange.targetChangeType||"NO_CHANGE"),s=e.targetChange.targetIds||[],i=function(d,h){return d.useProto3Json?(ke(h===void 0||typeof h=="string",58123),dt.fromBase64String(h||"")):(ke(h===void 0||h instanceof Buffer||h instanceof Uint8Array,16193),dt.fromUint8Array(h||new Uint8Array))}(r,e.targetChange.resumeToken),a=e.targetChange.cause,l=a&&function(d){const h=d.code===void 0?$.UNKNOWN:X0(d.code);return new K(h,d.message||"")}(a);t=new Z0(n,s,i,l||null)}else if("documentChange"in e){e.documentChange;const n=e.documentChange;n.document,n.document.name,n.document.updateTime;const s=wu(r,n.document.name),i=_r(n.document.updateTime),a=n.document.createTime?_r(n.document.createTime):ce.min(),l=new Mt({mapValue:{fields:n.document.fields}}),u=vt.newFoundDocument(s,i,a,l),d=n.targetIds||[],h=n.removedTargetIds||[];t=new sl(d,h,u.key,u)}else if("documentDelete"in e){e.documentDelete;const n=e.documentDelete;n.document;const s=wu(r,n.document),i=n.readTime?_r(n.readTime):ce.min(),a=vt.newNoDocument(s,i),l=n.removedTargetIds||[];t=new sl([],l,a.key,a)}else if("documentRemove"in e){e.documentRemove;const n=e.documentRemove;n.document;const s=wu(r,n.document),i=n.removedTargetIds||[];t=new sl([],i,s,null)}else{if(!("filter"in e))return ae(11601,{At:e});{e.filter;const n=e.filter;n.targetId;const{count:s=0,unchangedNames:i}=n,a=new y2(s,i),l=n.targetId;t=new J0(l,a)}}return t}function S2(r,e){let t;if(e instanceof sa)t={update:rg(r,e.key,e.value)};else if(e instanceof Rh)t={delete:fd(r,e.key)};else if(e instanceof Wn)t={update:rg(r,e.key,e.data),updateMask:L2(e.fieldMask)};else{if(!(e instanceof m2))return ae(16599,{Rt:e.type});t={verify:fd(r,e.key)}}return e.fieldTransforms.length>0&&(t.updateTransforms=e.fieldTransforms.map(n=>function(i,a){const l=a.transform;if(l instanceof Sl)return{fieldPath:a.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(l instanceof Ui)return{fieldPath:a.field.canonicalString(),appendMissingElements:{values:l.elements}};if(l instanceof $i)return{fieldPath:a.field.canonicalString(),removeAllFromArray:{values:l.elements}};if(l instanceof jl)return{fieldPath:a.field.canonicalString(),increment:l.Ee};throw ae(20930,{transform:a.transform})}(0,n))),e.precondition.isNone||(t.currentDocument=function(s,i){return i.updateTime!==void 0?{updateTime:N2(s,i.updateTime)}:i.exists!==void 0?{exists:i.exists}:ae(27497)}(r,e.precondition)),t}function j2(r,e){return r&&r.length>0?(ke(e!==void 0,14353),r.map(t=>function(s,i){let a=s.updateTime?_r(s.updateTime):_r(i);return a.isEqual(ce.min())&&(a=_r(i)),new d2(a,s.transformResults||[])}(t,e))):[]}function I2(r,e){return{documents:[rb(r,e.path)]}}function A2(r,e){const t={structuredQuery:{}},n=e.path;let s;e.collectionGroup!==null?(s=n,t.structuredQuery.from=[{collectionId:e.collectionGroup,allDescendants:!0}]):(s=n.popLast(),t.structuredQuery.from=[{collectionId:n.lastSegment()}]),t.parent=rb(r,s);const i=function(d){if(d.length!==0)return ob(cr.create(d,"and"))}(e.filters);i&&(t.structuredQuery.where=i);const a=function(d){if(d.length!==0)return d.map(h=>function(g){return{field:$s(g.field),direction:M2(g.dir)}}(h))}(e.orderBy);a&&(t.structuredQuery.orderBy=a);const l=dd(r,e.limit);return l!==null&&(t.structuredQuery.limit=l),e.startAt&&(t.structuredQuery.startAt=function(d){return{before:d.inclusive,values:d.position}}(e.startAt)),e.endAt&&(t.structuredQuery.endAt=function(d){return{before:!d.inclusive,values:d.position}}(e.endAt)),{Vt:t,parent:s}}function R2(r){let e=C2(r.parent);const t=r.structuredQuery,n=t.from?t.from.length:0;let s=null;if(n>0){ke(n===1,65062);const h=t.from[0];h.allDescendants?s=h.collectionId:e=e.child(h.collectionId)}let i=[];t.where&&(i=function(m){const g=sb(m);return g instanceof cr&&P0(g)?g.getFilters():[g]}(t.where));let a=[];t.orderBy&&(a=function(m){return m.map(g=>function(S){return new kl(Bs(S.field),function(v){switch(v){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}}(S.direction))}(g))}(t.orderBy));let l=null;t.limit&&(l=function(m){let g;return g=typeof m=="object"?m.value:m,uc(g)?null:g}(t.limit));let u=null;t.startAt&&(u=function(m){const g=!!m.before,x=m.values||[];return new Cl(x,g)}(t.startAt));let d=null;return t.endAt&&(d=function(m){const g=!m.before,x=m.values||[];return new Cl(x,g)}(t.endAt)),JS(e,s,a,i,l,"F",u,d)}function P2(r,e){const t=function(s){switch(s){case"TargetPurposeListen":return null;case"TargetPurposeExistenceFilterMismatch":return"existence-filter-mismatch";case"TargetPurposeExistenceFilterMismatchBloom":return"existence-filter-mismatch-bloom";case"TargetPurposeLimboResolution":return"limbo-document";default:return ae(28987,{purpose:s})}}(e.purpose);return t==null?null:{"goog-listen-tags":t}}function sb(r){return r.unaryFilter!==void 0?function(t){switch(t.unaryFilter.op){case"IS_NAN":const n=Bs(t.unaryFilter.field);return Ze.create(n,"==",{doubleValue:NaN});case"IS_NULL":const s=Bs(t.unaryFilter.field);return Ze.create(s,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":const i=Bs(t.unaryFilter.field);return Ze.create(i,"!=",{doubleValue:NaN});case"IS_NOT_NULL":const a=Bs(t.unaryFilter.field);return Ze.create(a,"!=",{nullValue:"NULL_VALUE"});case"OPERATOR_UNSPECIFIED":return ae(61313);default:return ae(60726)}}(r):r.fieldFilter!==void 0?function(t){return Ze.create(Bs(t.fieldFilter.field),function(s){switch(s){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";case"OPERATOR_UNSPECIFIED":return ae(58110);default:return ae(50506)}}(t.fieldFilter.op),t.fieldFilter.value)}(r):r.compositeFilter!==void 0?function(t){return cr.create(t.compositeFilter.filters.map(n=>sb(n)),function(s){switch(s){case"AND":return"and";case"OR":return"or";default:return ae(1026)}}(t.compositeFilter.op))}(r):ae(30097,{filter:r})}function M2(r){return w2[r]}function D2(r){return _2[r]}function O2(r){return T2[r]}function $s(r){return{fieldPath:r.canonicalString()}}function Bs(r){return ut.fromServerFormat(r.fieldPath)}function ob(r){return r instanceof Ze?function(t){if(t.op==="=="){if(zp(t.value))return{unaryFilter:{field:$s(t.field),op:"IS_NAN"}};if(Bp(t.value))return{unaryFilter:{field:$s(t.field),op:"IS_NULL"}}}else if(t.op==="!="){if(zp(t.value))return{unaryFilter:{field:$s(t.field),op:"IS_NOT_NAN"}};if(Bp(t.value))return{unaryFilter:{field:$s(t.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:$s(t.field),op:D2(t.op),value:t.value}}}(r):r instanceof cr?function(t){const n=t.getFilters().map(s=>ob(s));return n.length===1?n[0]:{compositeFilter:{op:O2(t.op),filters:n}}}(r):ae(54877,{filter:r})}function L2(r){const e=[];return r.fields.forEach(t=>e.push(t.canonicalString())),{fieldPaths:e}}function ib(r){return r.length>=4&&r.get(0)==="projects"&&r.get(2)==="databases"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class wn{constructor(e,t,n,s,i=ce.min(),a=ce.min(),l=dt.EMPTY_BYTE_STRING,u=null){this.target=e,this.targetId=t,this.purpose=n,this.sequenceNumber=s,this.snapshotVersion=i,this.lastLimboFreeSnapshotVersion=a,this.resumeToken=l,this.expectedCount=u}withSequenceNumber(e){return new wn(this.target,this.targetId,this.purpose,e,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,this.expectedCount)}withResumeToken(e,t){return new wn(this.target,this.targetId,this.purpose,this.sequenceNumber,t,this.lastLimboFreeSnapshotVersion,e,null)}withExpectedCount(e){return new wn(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,e)}withLastLimboFreeSnapshotVersion(e){return new wn(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,e,this.resumeToken,this.expectedCount)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class V2{constructor(e){this.gt=e}}function F2(r){const e=R2({parent:r.parent,structuredQuery:r.structuredQuery});return r.limitType==="LAST"?ud(e,e.limit,"L"):e}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class U2{constructor(){this.Dn=new $2}addToCollectionParentIndex(e,t){return this.Dn.add(t),B.resolve()}getCollectionParents(e,t){return B.resolve(this.Dn.getEntries(t))}addFieldIndex(e,t){return B.resolve()}deleteFieldIndex(e,t){return B.resolve()}deleteAllFieldIndexes(e){return B.resolve()}createTargetIndexes(e,t){return B.resolve()}getDocumentsMatchingTarget(e,t){return B.resolve(null)}getIndexType(e,t){return B.resolve(0)}getFieldIndexes(e,t){return B.resolve([])}getNextCollectionGroupToUpdate(e){return B.resolve(null)}getMinOffset(e,t){return B.resolve(An.min())}getMinOffsetFromCollectionGroup(e,t){return B.resolve(An.min())}updateCollectionGroup(e,t,n){return B.resolve()}updateIndexEntries(e,t){return B.resolve()}}class $2{constructor(){this.index={}}add(e){const t=e.lastSegment(),n=e.popLast(),s=this.index[t]||new st(Pe.comparator),i=!s.has(n);return this.index[t]=s.add(n),i}has(e){const t=e.lastSegment(),n=e.popLast(),s=this.index[t];return s&&s.has(n)}getEntries(e){return(this.index[e]||new st(Pe.comparator)).toArray()}}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ng={didRun:!1,sequenceNumbersCollected:0,targetsRemoved:0,documentsRemoved:0},ab=41943040;class Rt{static withCacheSize(e){return new Rt(e,Rt.DEFAULT_COLLECTION_PERCENTILE,Rt.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)}constructor(e,t,n){this.cacheSizeCollectionThreshold=e,this.percentileToCollect=t,this.maximumSequenceNumbersToCollect=n}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */Rt.DEFAULT_COLLECTION_PERCENTILE=10,Rt.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,Rt.DEFAULT=new Rt(ab,Rt.DEFAULT_COLLECTION_PERCENTILE,Rt.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),Rt.DISABLED=new Rt(-1,0,0);/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class So{constructor(e){this._r=e}next(){return this._r+=2,this._r}static ar(){return new So(0)}static ur(){return new So(-1)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const sg="LruGarbageCollector",B2=1048576;function og([r,e],[t,n]){const s=ye(r,t);return s===0?ye(e,n):s}class z2{constructor(e){this.Tr=e,this.buffer=new st(og),this.Ir=0}dr(){return++this.Ir}Er(e){const t=[e,this.dr()];if(this.buffer.size<this.Tr)this.buffer=this.buffer.add(t);else{const n=this.buffer.last();og(t,n)<0&&(this.buffer=this.buffer.delete(n).add(t))}}get maxValue(){return this.buffer.last()[0]}}class q2{constructor(e,t,n){this.garbageCollector=e,this.asyncQueue=t,this.localStore=n,this.Ar=null}start(){this.garbageCollector.params.cacheSizeCollectionThreshold!==-1&&this.Rr(6e4)}stop(){this.Ar&&(this.Ar.cancel(),this.Ar=null)}get started(){return this.Ar!==null}Rr(e){Y(sg,`Garbage collection scheduled in ${e}ms`),this.Ar=this.asyncQueue.enqueueAfterDelay("lru_garbage_collection",e,async()=>{this.Ar=null;try{await this.localStore.collectGarbage(this.garbageCollector)}catch(t){Fo(t)?Y(sg,"Ignoring IndexedDB error during garbage collection: ",t):await Vo(t)}await this.Rr(3e5)})}}class H2{constructor(e,t){this.Vr=e,this.params=t}calculateTargetCount(e,t){return this.Vr.mr(e).next(n=>Math.floor(t/100*n))}nthSequenceNumber(e,t){if(t===0)return B.resolve(cc.ue);const n=new z2(t);return this.Vr.forEachTarget(e,s=>n.Er(s.sequenceNumber)).next(()=>this.Vr.gr(e,s=>n.Er(s))).next(()=>n.maxValue)}removeTargets(e,t,n){return this.Vr.removeTargets(e,t,n)}removeOrphanedDocuments(e,t){return this.Vr.removeOrphanedDocuments(e,t)}collect(e,t){return this.params.cacheSizeCollectionThreshold===-1?(Y("LruGarbageCollector","Garbage collection skipped; disabled"),B.resolve(ng)):this.getCacheSize(e).next(n=>n<this.params.cacheSizeCollectionThreshold?(Y("LruGarbageCollector",`Garbage collection skipped; Cache size ${n} is lower than threshold ${this.params.cacheSizeCollectionThreshold}`),ng):this.pr(e,t))}getCacheSize(e){return this.Vr.getCacheSize(e)}pr(e,t){let n,s,i,a,l,u,d;const h=Date.now();return this.calculateTargetCount(e,this.params.percentileToCollect).next(m=>(m>this.params.maximumSequenceNumbersToCollect?(Y("LruGarbageCollector",`Capping sequence numbers to collect down to the maximum of ${this.params.maximumSequenceNumbersToCollect} from ${m}`),s=this.params.maximumSequenceNumbersToCollect):s=m,a=Date.now(),this.nthSequenceNumber(e,s))).next(m=>(n=m,l=Date.now(),this.removeTargets(e,n,t))).next(m=>(i=m,u=Date.now(),this.removeOrphanedDocuments(e,n))).next(m=>(d=Date.now(),Fs()<=be.DEBUG&&Y("LruGarbageCollector",`LRU Garbage Collection
	Counted targets in ${a-h}ms
	Determined least recently used ${s} in `+(l-a)+`ms
	Removed ${i} targets in `+(u-l)+`ms
	Removed ${m} documents in `+(d-u)+`ms
Total Duration: ${d-h}ms`),B.resolve({didRun:!0,sequenceNumbersCollected:s,targetsRemoved:i,documentsRemoved:m})))}}function W2(r,e){return new H2(r,e)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class G2{constructor(){this.changes=new As(e=>e.toString(),(e,t)=>e.isEqual(t)),this.changesApplied=!1}addEntry(e){this.assertNotApplied(),this.changes.set(e.key,e)}removeEntry(e,t){this.assertNotApplied(),this.changes.set(e,vt.newInvalidDocument(e).setReadTime(t))}getEntry(e,t){this.assertNotApplied();const n=this.changes.get(t);return n!==void 0?B.resolve(n):this.getFromCache(e,t)}getEntries(e,t){return this.getAllFromCache(e,t)}apply(e){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(e)}assertNotApplied(){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class K2{constructor(e,t){this.overlayedDocument=e,this.mutatedFields=t}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Q2{constructor(e,t,n,s){this.remoteDocumentCache=e,this.mutationQueue=t,this.documentOverlayCache=n,this.indexManager=s}getDocument(e,t){let n=null;return this.documentOverlayCache.getOverlay(e,t).next(s=>(n=s,this.remoteDocumentCache.getEntry(e,t))).next(s=>(n!==null&&Ci(n.mutation,s,$t.empty(),Fe.now()),s))}getDocuments(e,t){return this.remoteDocumentCache.getEntries(e,t).next(n=>this.getLocalViewOfDocuments(e,n,ve()).next(()=>n))}getLocalViewOfDocuments(e,t,n=ve()){const s=ns();return this.populateOverlays(e,s,t).next(()=>this.computeViews(e,t,s,n).next(i=>{let a=xi();return i.forEach((l,u)=>{a=a.insert(l,u.overlayedDocument)}),a}))}getOverlayedDocuments(e,t){const n=ns();return this.populateOverlays(e,n,t).next(()=>this.computeViews(e,t,n,ve()))}populateOverlays(e,t,n){const s=[];return n.forEach(i=>{t.has(i)||s.push(i)}),this.documentOverlayCache.getOverlays(e,s).next(i=>{i.forEach((a,l)=>{t.set(a,l)})})}computeViews(e,t,n,s){let i=Hr();const a=Ni(),l=function(){return Ni()}();return t.forEach((u,d)=>{const h=n.get(d.key);s.has(d.key)&&(h===void 0||h.mutation instanceof Wn)?i=i.insert(d.key,d):h!==void 0?(a.set(d.key,h.mutation.getFieldMask()),Ci(h.mutation,d,h.mutation.getFieldMask(),Fe.now())):a.set(d.key,$t.empty())}),this.recalculateAndSaveOverlays(e,i).next(u=>(u.forEach((d,h)=>a.set(d,h)),t.forEach((d,h)=>{var m;return l.set(d,new K2(h,(m=a.get(d))!==null&&m!==void 0?m:null))}),l))}recalculateAndSaveOverlays(e,t){const n=Ni();let s=new Be((a,l)=>a-l),i=ve();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(e,t).next(a=>{for(const l of a)l.keys().forEach(u=>{const d=t.get(u);if(d===null)return;let h=n.get(u)||$t.empty();h=l.applyToLocalView(d,h),n.set(u,h);const m=(s.get(l.batchId)||ve()).add(u);s=s.insert(l.batchId,m)})}).next(()=>{const a=[],l=s.getReverseIterator();for(;l.hasNext();){const u=l.getNext(),d=u.key,h=u.value,m=z0();h.forEach(g=>{if(!i.has(g)){const x=Q0(t.get(g),n.get(g));x!==null&&m.set(g,x),i=i.add(g)}}),a.push(this.documentOverlayCache.saveOverlays(e,d,m))}return B.waitFor(a)}).next(()=>n)}recalculateAndSaveOverlaysForDocumentKeys(e,t){return this.remoteDocumentCache.getEntries(e,t).next(n=>this.recalculateAndSaveOverlays(e,n))}getDocumentsMatchingQuery(e,t,n,s){return function(a){return re.isDocumentKey(a.path)&&a.collectionGroup===null&&a.filters.length===0}(t)?this.getDocumentsMatchingDocumentQuery(e,t.path):V0(t)?this.getDocumentsMatchingCollectionGroupQuery(e,t,n,s):this.getDocumentsMatchingCollectionQuery(e,t,n,s)}getNextDocuments(e,t,n,s){return this.remoteDocumentCache.getAllFromCollectionGroup(e,t,n,s).next(i=>{const a=s-i.size>0?this.documentOverlayCache.getOverlaysForCollectionGroup(e,t,n.largestBatchId,s-i.size):B.resolve(ns());let l=Oi,u=i;return a.next(d=>B.forEach(d,(h,m)=>(l<m.largestBatchId&&(l=m.largestBatchId),i.get(h)?B.resolve():this.remoteDocumentCache.getEntry(e,h).next(g=>{u=u.insert(h,g)}))).next(()=>this.populateOverlays(e,d,i)).next(()=>this.computeViews(e,u,d,ve())).next(h=>({batchId:l,changes:B0(h)})))})}getDocumentsMatchingDocumentQuery(e,t){return this.getDocument(e,new re(t)).next(n=>{let s=xi();return n.isFoundDocument()&&(s=s.insert(n.key,n)),s})}getDocumentsMatchingCollectionGroupQuery(e,t,n,s){const i=t.collectionGroup;let a=xi();return this.indexManager.getCollectionParents(e,i).next(l=>B.forEach(l,u=>{const d=function(m,g){return new na(g,null,m.explicitOrderBy.slice(),m.filters.slice(),m.limit,m.limitType,m.startAt,m.endAt)}(t,u.child(i));return this.getDocumentsMatchingCollectionQuery(e,d,n,s).next(h=>{h.forEach((m,g)=>{a=a.insert(m,g)})})}).next(()=>a))}getDocumentsMatchingCollectionQuery(e,t,n,s){let i;return this.documentOverlayCache.getOverlaysForCollection(e,t.path,n.largestBatchId).next(a=>(i=a,this.remoteDocumentCache.getDocumentsMatchingQuery(e,t,n,i,s))).next(a=>{i.forEach((u,d)=>{const h=d.getKey();a.get(h)===null&&(a=a.insert(h,vt.newInvalidDocument(h)))});let l=xi();return a.forEach((u,d)=>{const h=i.get(u);h!==void 0&&Ci(h.mutation,d,$t.empty(),Fe.now()),fc(t,d)&&(l=l.insert(u,d))}),l})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Y2{constructor(e){this.serializer=e,this.Br=new Map,this.Lr=new Map}getBundleMetadata(e,t){return B.resolve(this.Br.get(t))}saveBundleMetadata(e,t){return this.Br.set(t.id,function(s){return{id:s.id,version:s.version,createTime:_r(s.createTime)}}(t)),B.resolve()}getNamedQuery(e,t){return B.resolve(this.Lr.get(t))}saveNamedQuery(e,t){return this.Lr.set(t.name,function(s){return{name:s.name,query:F2(s.bundledQuery),readTime:_r(s.readTime)}}(t)),B.resolve()}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class X2{constructor(){this.overlays=new Be(re.comparator),this.kr=new Map}getOverlay(e,t){return B.resolve(this.overlays.get(t))}getOverlays(e,t){const n=ns();return B.forEach(t,s=>this.getOverlay(e,s).next(i=>{i!==null&&n.set(s,i)})).next(()=>n)}saveOverlays(e,t,n){return n.forEach((s,i)=>{this.wt(e,t,i)}),B.resolve()}removeOverlaysForBatchId(e,t,n){const s=this.kr.get(n);return s!==void 0&&(s.forEach(i=>this.overlays=this.overlays.remove(i)),this.kr.delete(n)),B.resolve()}getOverlaysForCollection(e,t,n){const s=ns(),i=t.length+1,a=new re(t.child("")),l=this.overlays.getIteratorFrom(a);for(;l.hasNext();){const u=l.getNext().value,d=u.getKey();if(!t.isPrefixOf(d.path))break;d.path.length===i&&u.largestBatchId>n&&s.set(u.getKey(),u)}return B.resolve(s)}getOverlaysForCollectionGroup(e,t,n,s){let i=new Be((d,h)=>d-h);const a=this.overlays.getIterator();for(;a.hasNext();){const d=a.getNext().value;if(d.getKey().getCollectionGroup()===t&&d.largestBatchId>n){let h=i.get(d.largestBatchId);h===null&&(h=ns(),i=i.insert(d.largestBatchId,h)),h.set(d.getKey(),d)}}const l=ns(),u=i.getIterator();for(;u.hasNext()&&(u.getNext().value.forEach((d,h)=>l.set(d,h)),!(l.size()>=s)););return B.resolve(l)}wt(e,t,n){const s=this.overlays.get(n.key);if(s!==null){const a=this.kr.get(s.largestBatchId).delete(n.key);this.kr.set(s.largestBatchId,a)}this.overlays=this.overlays.insert(n.key,new g2(t,n));let i=this.kr.get(t);i===void 0&&(i=ve(),this.kr.set(t,i)),this.kr.set(t,i.add(n.key))}}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class J2{constructor(){this.sessionToken=dt.EMPTY_BYTE_STRING}getSessionToken(e){return B.resolve(this.sessionToken)}setSessionToken(e,t){return this.sessionToken=t,B.resolve()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Oh{constructor(){this.qr=new st(it.Qr),this.$r=new st(it.Ur)}isEmpty(){return this.qr.isEmpty()}addReference(e,t){const n=new it(e,t);this.qr=this.qr.add(n),this.$r=this.$r.add(n)}Kr(e,t){e.forEach(n=>this.addReference(n,t))}removeReference(e,t){this.Wr(new it(e,t))}Gr(e,t){e.forEach(n=>this.removeReference(n,t))}zr(e){const t=new re(new Pe([])),n=new it(t,e),s=new it(t,e+1),i=[];return this.$r.forEachInRange([n,s],a=>{this.Wr(a),i.push(a.key)}),i}jr(){this.qr.forEach(e=>this.Wr(e))}Wr(e){this.qr=this.qr.delete(e),this.$r=this.$r.delete(e)}Jr(e){const t=new re(new Pe([])),n=new it(t,e),s=new it(t,e+1);let i=ve();return this.$r.forEachInRange([n,s],a=>{i=i.add(a.key)}),i}containsKey(e){const t=new it(e,0),n=this.qr.firstAfterOrEqual(t);return n!==null&&e.isEqual(n.key)}}class it{constructor(e,t){this.key=e,this.Hr=t}static Qr(e,t){return re.comparator(e.key,t.key)||ye(e.Hr,t.Hr)}static Ur(e,t){return ye(e.Hr,t.Hr)||re.comparator(e.key,t.key)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Z2{constructor(e,t){this.indexManager=e,this.referenceDelegate=t,this.mutationQueue=[],this.er=1,this.Yr=new st(it.Qr)}checkEmpty(e){return B.resolve(this.mutationQueue.length===0)}addMutationBatch(e,t,n,s){const i=this.er;this.er++,this.mutationQueue.length>0&&this.mutationQueue[this.mutationQueue.length-1];const a=new p2(i,t,n,s);this.mutationQueue.push(a);for(const l of s)this.Yr=this.Yr.add(new it(l.key,i)),this.indexManager.addToCollectionParentIndex(e,l.key.path.popLast());return B.resolve(a)}lookupMutationBatch(e,t){return B.resolve(this.Zr(t))}getNextMutationBatchAfterBatchId(e,t){const n=t+1,s=this.Xr(n),i=s<0?0:s;return B.resolve(this.mutationQueue.length>i?this.mutationQueue[i]:null)}getHighestUnacknowledgedBatchId(){return B.resolve(this.mutationQueue.length===0?Ch:this.er-1)}getAllMutationBatches(e){return B.resolve(this.mutationQueue.slice())}getAllMutationBatchesAffectingDocumentKey(e,t){const n=new it(t,0),s=new it(t,Number.POSITIVE_INFINITY),i=[];return this.Yr.forEachInRange([n,s],a=>{const l=this.Zr(a.Hr);i.push(l)}),B.resolve(i)}getAllMutationBatchesAffectingDocumentKeys(e,t){let n=new st(ye);return t.forEach(s=>{const i=new it(s,0),a=new it(s,Number.POSITIVE_INFINITY);this.Yr.forEachInRange([i,a],l=>{n=n.add(l.Hr)})}),B.resolve(this.ei(n))}getAllMutationBatchesAffectingQuery(e,t){const n=t.path,s=n.length+1;let i=n;re.isDocumentKey(i)||(i=i.child(""));const a=new it(new re(i),0);let l=new st(ye);return this.Yr.forEachWhile(u=>{const d=u.key.path;return!!n.isPrefixOf(d)&&(d.length===s&&(l=l.add(u.Hr)),!0)},a),B.resolve(this.ei(l))}ei(e){const t=[];return e.forEach(n=>{const s=this.Zr(n);s!==null&&t.push(s)}),t}removeMutationBatch(e,t){ke(this.ti(t.batchId,"removed")===0,55003),this.mutationQueue.shift();let n=this.Yr;return B.forEach(t.mutations,s=>{const i=new it(s.key,t.batchId);return n=n.delete(i),this.referenceDelegate.markPotentiallyOrphaned(e,s.key)}).next(()=>{this.Yr=n})}rr(e){}containsKey(e,t){const n=new it(t,0),s=this.Yr.firstAfterOrEqual(n);return B.resolve(t.isEqual(s&&s.key))}performConsistencyCheck(e){return this.mutationQueue.length,B.resolve()}ti(e,t){return this.Xr(e)}Xr(e){return this.mutationQueue.length===0?0:e-this.mutationQueue[0].batchId}Zr(e){const t=this.Xr(e);return t<0||t>=this.mutationQueue.length?null:this.mutationQueue[t]}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ej{constructor(e){this.ni=e,this.docs=function(){return new Be(re.comparator)}(),this.size=0}setIndexManager(e){this.indexManager=e}addEntry(e,t){const n=t.key,s=this.docs.get(n),i=s?s.size:0,a=this.ni(t);return this.docs=this.docs.insert(n,{document:t.mutableCopy(),size:a}),this.size+=a-i,this.indexManager.addToCollectionParentIndex(e,n.path.popLast())}removeEntry(e){const t=this.docs.get(e);t&&(this.docs=this.docs.remove(e),this.size-=t.size)}getEntry(e,t){const n=this.docs.get(t);return B.resolve(n?n.document.mutableCopy():vt.newInvalidDocument(t))}getEntries(e,t){let n=Hr();return t.forEach(s=>{const i=this.docs.get(s);n=n.insert(s,i?i.document.mutableCopy():vt.newInvalidDocument(s))}),B.resolve(n)}getDocumentsMatchingQuery(e,t,n,s){let i=Hr();const a=t.path,l=new re(a.child("__id-9223372036854775808__")),u=this.docs.getIteratorFrom(l);for(;u.hasNext();){const{key:d,value:{document:h}}=u.getNext();if(!a.isPrefixOf(d.path))break;d.path.length>a.length+1||IS(jS(h),n)<=0||(s.has(h.key)||fc(t,h))&&(i=i.insert(h.key,h.mutableCopy()))}return B.resolve(i)}getAllFromCollectionGroup(e,t,n,s){ae(9500)}ri(e,t){return B.forEach(this.docs,n=>t(n))}newChangeBuffer(e){return new tj(this)}getSize(e){return B.resolve(this.size)}}class tj extends G2{constructor(e){super(),this.Or=e}applyChanges(e){const t=[];return this.changes.forEach((n,s)=>{s.isValidDocument()?t.push(this.Or.addEntry(e,s)):this.Or.removeEntry(n)}),B.waitFor(t)}getFromCache(e,t){return this.Or.getEntry(e,t)}getAllFromCache(e,t){return this.Or.getEntries(e,t)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class rj{constructor(e){this.persistence=e,this.ii=new As(t=>jh(t),Ih),this.lastRemoteSnapshotVersion=ce.min(),this.highestTargetId=0,this.si=0,this.oi=new Oh,this.targetCount=0,this._i=So.ar()}forEachTarget(e,t){return this.ii.forEach((n,s)=>t(s)),B.resolve()}getLastRemoteSnapshotVersion(e){return B.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(e){return B.resolve(this.si)}allocateTargetId(e){return this.highestTargetId=this._i.next(),B.resolve(this.highestTargetId)}setTargetsMetadata(e,t,n){return n&&(this.lastRemoteSnapshotVersion=n),t>this.si&&(this.si=t),B.resolve()}hr(e){this.ii.set(e.target,e);const t=e.targetId;t>this.highestTargetId&&(this._i=new So(t),this.highestTargetId=t),e.sequenceNumber>this.si&&(this.si=e.sequenceNumber)}addTargetData(e,t){return this.hr(t),this.targetCount+=1,B.resolve()}updateTargetData(e,t){return this.hr(t),B.resolve()}removeTargetData(e,t){return this.ii.delete(t.target),this.oi.zr(t.targetId),this.targetCount-=1,B.resolve()}removeTargets(e,t,n){let s=0;const i=[];return this.ii.forEach((a,l)=>{l.sequenceNumber<=t&&n.get(l.targetId)===null&&(this.ii.delete(a),i.push(this.removeMatchingKeysForTargetId(e,l.targetId)),s++)}),B.waitFor(i).next(()=>s)}getTargetCount(e){return B.resolve(this.targetCount)}getTargetData(e,t){const n=this.ii.get(t)||null;return B.resolve(n)}addMatchingKeys(e,t,n){return this.oi.Kr(t,n),B.resolve()}removeMatchingKeys(e,t,n){this.oi.Gr(t,n);const s=this.persistence.referenceDelegate,i=[];return s&&t.forEach(a=>{i.push(s.markPotentiallyOrphaned(e,a))}),B.waitFor(i)}removeMatchingKeysForTargetId(e,t){return this.oi.zr(t),B.resolve()}getMatchingKeysForTargetId(e,t){const n=this.oi.Jr(t);return B.resolve(n)}containsKey(e,t){return B.resolve(this.oi.containsKey(t))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class lb{constructor(e,t){this.ai={},this.overlays={},this.ui=new cc(0),this.ci=!1,this.ci=!0,this.li=new J2,this.referenceDelegate=e(this),this.hi=new rj(this),this.indexManager=new U2,this.remoteDocumentCache=function(s){return new ej(s)}(n=>this.referenceDelegate.Pi(n)),this.serializer=new V2(t),this.Ti=new Y2(this.serializer)}start(){return Promise.resolve()}shutdown(){return this.ci=!1,Promise.resolve()}get started(){return this.ci}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(e){return this.indexManager}getDocumentOverlayCache(e){let t=this.overlays[e.toKey()];return t||(t=new X2,this.overlays[e.toKey()]=t),t}getMutationQueue(e,t){let n=this.ai[e.toKey()];return n||(n=new Z2(t,this.referenceDelegate),this.ai[e.toKey()]=n),n}getGlobalsCache(){return this.li}getTargetCache(){return this.hi}getRemoteDocumentCache(){return this.remoteDocumentCache}getBundleCache(){return this.Ti}runTransaction(e,t,n){Y("MemoryPersistence","Starting transaction:",e);const s=new nj(this.ui.next());return this.referenceDelegate.Ii(),n(s).next(i=>this.referenceDelegate.di(s).next(()=>i)).toPromise().then(i=>(s.raiseOnCommittedEvent(),i))}Ei(e,t){return B.or(Object.values(this.ai).map(n=>()=>n.containsKey(e,t)))}}class nj extends RS{constructor(e){super(),this.currentSequenceNumber=e}}class Lh{constructor(e){this.persistence=e,this.Ai=new Oh,this.Ri=null}static Vi(e){return new Lh(e)}get mi(){if(this.Ri)return this.Ri;throw ae(60996)}addReference(e,t,n){return this.Ai.addReference(n,t),this.mi.delete(n.toString()),B.resolve()}removeReference(e,t,n){return this.Ai.removeReference(n,t),this.mi.add(n.toString()),B.resolve()}markPotentiallyOrphaned(e,t){return this.mi.add(t.toString()),B.resolve()}removeTarget(e,t){this.Ai.zr(t.targetId).forEach(s=>this.mi.add(s.toString()));const n=this.persistence.getTargetCache();return n.getMatchingKeysForTargetId(e,t.targetId).next(s=>{s.forEach(i=>this.mi.add(i.toString()))}).next(()=>n.removeTargetData(e,t))}Ii(){this.Ri=new Set}di(e){const t=this.persistence.getRemoteDocumentCache().newChangeBuffer();return B.forEach(this.mi,n=>{const s=re.fromPath(n);return this.fi(e,s).next(i=>{i||t.removeEntry(s,ce.min())})}).next(()=>(this.Ri=null,t.apply(e)))}updateLimboDocument(e,t){return this.fi(e,t).next(n=>{n?this.mi.delete(t.toString()):this.mi.add(t.toString())})}Pi(e){return 0}fi(e,t){return B.or([()=>B.resolve(this.Ai.containsKey(t)),()=>this.persistence.getTargetCache().containsKey(e,t),()=>this.persistence.Ei(e,t)])}}class Al{constructor(e,t){this.persistence=e,this.gi=new As(n=>DS(n.path),(n,s)=>n.isEqual(s)),this.garbageCollector=W2(this,t)}static Vi(e,t){return new Al(e,t)}Ii(){}di(e){return B.resolve()}forEachTarget(e,t){return this.persistence.getTargetCache().forEachTarget(e,t)}mr(e){const t=this.yr(e);return this.persistence.getTargetCache().getTargetCount(e).next(n=>t.next(s=>n+s))}yr(e){let t=0;return this.gr(e,n=>{t++}).next(()=>t)}gr(e,t){return B.forEach(this.gi,(n,s)=>this.Sr(e,n,s).next(i=>i?B.resolve():t(s)))}removeTargets(e,t,n){return this.persistence.getTargetCache().removeTargets(e,t,n)}removeOrphanedDocuments(e,t){let n=0;const s=this.persistence.getRemoteDocumentCache(),i=s.newChangeBuffer();return s.ri(e,a=>this.Sr(e,a,t).next(l=>{l||(n++,i.removeEntry(a,ce.min()))})).next(()=>i.apply(e)).next(()=>n)}markPotentiallyOrphaned(e,t){return this.gi.set(t,e.currentSequenceNumber),B.resolve()}removeTarget(e,t){const n=t.withSequenceNumber(e.currentSequenceNumber);return this.persistence.getTargetCache().updateTargetData(e,n)}addReference(e,t,n){return this.gi.set(n,e.currentSequenceNumber),B.resolve()}removeReference(e,t,n){return this.gi.set(n,e.currentSequenceNumber),B.resolve()}updateLimboDocument(e,t){return this.gi.set(t,e.currentSequenceNumber),B.resolve()}Pi(e){let t=e.key.toString().length;return e.isFoundDocument()&&(t+=tl(e.data.value)),t}Sr(e,t,n){return B.or([()=>this.persistence.Ei(e,t),()=>this.persistence.getTargetCache().containsKey(e,t),()=>{const s=this.gi.get(t);return B.resolve(s!==void 0&&s>n)}])}getCacheSize(e){return this.persistence.getRemoteDocumentCache().getSize(e)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Vh{constructor(e,t,n,s){this.targetId=e,this.fromCache=t,this.Is=n,this.ds=s}static Es(e,t){let n=ve(),s=ve();for(const i of t.docChanges)switch(i.type){case 0:n=n.add(i.doc.key);break;case 1:s=s.add(i.doc.key)}return new Vh(e,t.fromCache,n,s)}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class sj{constructor(){this._documentReadCount=0}get documentReadCount(){return this._documentReadCount}incrementDocumentReadCount(e){this._documentReadCount+=e}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class oj{constructor(){this.As=!1,this.Rs=!1,this.Vs=100,this.fs=function(){return LE()?8:PS(wt())>0?6:4}()}initialize(e,t){this.gs=e,this.indexManager=t,this.As=!0}getDocumentsMatchingQuery(e,t,n,s){const i={result:null};return this.ps(e,t).next(a=>{i.result=a}).next(()=>{if(!i.result)return this.ys(e,t,s,n).next(a=>{i.result=a})}).next(()=>{if(i.result)return;const a=new sj;return this.ws(e,t,a).next(l=>{if(i.result=l,this.Rs)return this.Ss(e,t,a,l.size)})}).next(()=>i.result)}Ss(e,t,n,s){return n.documentReadCount<this.Vs?(Fs()<=be.DEBUG&&Y("QueryEngine","SDK will not create cache indexes for query:",Us(t),"since it only creates cache indexes for collection contains","more than or equal to",this.Vs,"documents"),B.resolve()):(Fs()<=be.DEBUG&&Y("QueryEngine","Query:",Us(t),"scans",n.documentReadCount,"local documents and returns",s,"documents as results."),n.documentReadCount>this.fs*s?(Fs()<=be.DEBUG&&Y("QueryEngine","The SDK decides to create cache indexes for query:",Us(t),"as using cache indexes may help improve performance."),this.indexManager.createTargetIndexes(e,wr(t))):B.resolve())}ps(e,t){if(Gp(t))return B.resolve(null);let n=wr(t);return this.indexManager.getIndexType(e,n).next(s=>s===0?null:(t.limit!==null&&s===1&&(t=ud(t,null,"F"),n=wr(t)),this.indexManager.getDocumentsMatchingTarget(e,n).next(i=>{const a=ve(...i);return this.gs.getDocuments(e,a).next(l=>this.indexManager.getMinOffset(e,n).next(u=>{const d=this.bs(t,l);return this.Ds(t,d,a,u.readTime)?this.ps(e,ud(t,null,"F")):this.vs(e,d,t,u)}))})))}ys(e,t,n,s){return Gp(t)||s.isEqual(ce.min())?B.resolve(null):this.gs.getDocuments(e,n).next(i=>{const a=this.bs(t,i);return this.Ds(t,a,n,s)?B.resolve(null):(Fs()<=be.DEBUG&&Y("QueryEngine","Re-using previous result from %s to execute query: %s",s.toString(),Us(t)),this.vs(e,a,t,SS(s,Oi)).next(l=>l))})}bs(e,t){let n=new st(U0(e));return t.forEach((s,i)=>{fc(e,i)&&(n=n.add(i))}),n}Ds(e,t,n,s){if(e.limit===null)return!1;if(n.size!==t.size)return!0;const i=e.limitType==="F"?t.last():t.first();return!!i&&(i.hasPendingWrites||i.version.compareTo(s)>0)}ws(e,t,n){return Fs()<=be.DEBUG&&Y("QueryEngine","Using full collection scan to execute query:",Us(t)),this.gs.getDocumentsMatchingQuery(e,t,An.min(),n)}vs(e,t,n,s){return this.gs.getDocumentsMatchingQuery(e,n,s).next(i=>(t.forEach(a=>{i=i.insert(a.key,a)}),i))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Fh="LocalStore",ij=3e8;class aj{constructor(e,t,n,s){this.persistence=e,this.Cs=t,this.serializer=s,this.Fs=new Be(ye),this.Ms=new As(i=>jh(i),Ih),this.xs=new Map,this.Os=e.getRemoteDocumentCache(),this.hi=e.getTargetCache(),this.Ti=e.getBundleCache(),this.Ns(n)}Ns(e){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(e),this.indexManager=this.persistence.getIndexManager(e),this.mutationQueue=this.persistence.getMutationQueue(e,this.indexManager),this.localDocuments=new Q2(this.Os,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.Os.setIndexManager(this.indexManager),this.Cs.initialize(this.localDocuments,this.indexManager)}collectGarbage(e){return this.persistence.runTransaction("Collect garbage","readwrite-primary",t=>e.collect(t,this.Fs))}}function lj(r,e,t,n){return new aj(r,e,t,n)}async function cb(r,e){const t=de(r);return await t.persistence.runTransaction("Handle user change","readonly",n=>{let s;return t.mutationQueue.getAllMutationBatches(n).next(i=>(s=i,t.Ns(e),t.mutationQueue.getAllMutationBatches(n))).next(i=>{const a=[],l=[];let u=ve();for(const d of s){a.push(d.batchId);for(const h of d.mutations)u=u.add(h.key)}for(const d of i){l.push(d.batchId);for(const h of d.mutations)u=u.add(h.key)}return t.localDocuments.getDocuments(n,u).next(d=>({Bs:d,removedBatchIds:a,addedBatchIds:l}))})})}function cj(r,e){const t=de(r);return t.persistence.runTransaction("Acknowledge batch","readwrite-primary",n=>{const s=e.batch.keys(),i=t.Os.newChangeBuffer({trackRemovals:!0});return function(l,u,d,h){const m=d.batch,g=m.keys();let x=B.resolve();return g.forEach(S=>{x=x.next(()=>h.getEntry(u,S)).next(b=>{const v=d.docVersions.get(S);ke(v!==null,48541),b.version.compareTo(v)<0&&(m.applyToRemoteDocument(b,d),b.isValidDocument()&&(b.setReadTime(d.commitVersion),h.addEntry(b)))})}),x.next(()=>l.mutationQueue.removeMutationBatch(u,m))}(t,n,e,i).next(()=>i.apply(n)).next(()=>t.mutationQueue.performConsistencyCheck(n)).next(()=>t.documentOverlayCache.removeOverlaysForBatchId(n,s,e.batch.batchId)).next(()=>t.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(n,function(l){let u=ve();for(let d=0;d<l.mutationResults.length;++d)l.mutationResults[d].transformResults.length>0&&(u=u.add(l.batch.mutations[d].key));return u}(e))).next(()=>t.localDocuments.getDocuments(n,s))})}function ub(r){const e=de(r);return e.persistence.runTransaction("Get last remote snapshot version","readonly",t=>e.hi.getLastRemoteSnapshotVersion(t))}function uj(r,e){const t=de(r),n=e.snapshotVersion;let s=t.Fs;return t.persistence.runTransaction("Apply remote event","readwrite-primary",i=>{const a=t.Os.newChangeBuffer({trackRemovals:!0});s=t.Fs;const l=[];e.targetChanges.forEach((h,m)=>{const g=s.get(m);if(!g)return;l.push(t.hi.removeMatchingKeys(i,h.removedDocuments,m).next(()=>t.hi.addMatchingKeys(i,h.addedDocuments,m)));let x=g.withSequenceNumber(i.currentSequenceNumber);e.targetMismatches.get(m)!==null?x=x.withResumeToken(dt.EMPTY_BYTE_STRING,ce.min()).withLastLimboFreeSnapshotVersion(ce.min()):h.resumeToken.approximateByteSize()>0&&(x=x.withResumeToken(h.resumeToken,n)),s=s.insert(m,x),function(b,v,E){return b.resumeToken.approximateByteSize()===0||v.snapshotVersion.toMicroseconds()-b.snapshotVersion.toMicroseconds()>=ij?!0:E.addedDocuments.size+E.modifiedDocuments.size+E.removedDocuments.size>0}(g,x,h)&&l.push(t.hi.updateTargetData(i,x))});let u=Hr(),d=ve();if(e.documentUpdates.forEach(h=>{e.resolvedLimboDocuments.has(h)&&l.push(t.persistence.referenceDelegate.updateLimboDocument(i,h))}),l.push(dj(i,a,e.documentUpdates).next(h=>{u=h.Ls,d=h.ks})),!n.isEqual(ce.min())){const h=t.hi.getLastRemoteSnapshotVersion(i).next(m=>t.hi.setTargetsMetadata(i,i.currentSequenceNumber,n));l.push(h)}return B.waitFor(l).next(()=>a.apply(i)).next(()=>t.localDocuments.getLocalViewOfDocuments(i,u,d)).next(()=>u)}).then(i=>(t.Fs=s,i))}function dj(r,e,t){let n=ve(),s=ve();return t.forEach(i=>n=n.add(i)),e.getEntries(r,n).next(i=>{let a=Hr();return t.forEach((l,u)=>{const d=i.get(l);u.isFoundDocument()!==d.isFoundDocument()&&(s=s.add(l)),u.isNoDocument()&&u.version.isEqual(ce.min())?(e.removeEntry(l,u.readTime),a=a.insert(l,u)):!d.isValidDocument()||u.version.compareTo(d.version)>0||u.version.compareTo(d.version)===0&&d.hasPendingWrites?(e.addEntry(u),a=a.insert(l,u)):Y(Fh,"Ignoring outdated watch update for ",l,". Current version:",d.version," Watch version:",u.version)}),{Ls:a,ks:s}})}function hj(r,e){const t=de(r);return t.persistence.runTransaction("Get next mutation batch","readonly",n=>(e===void 0&&(e=Ch),t.mutationQueue.getNextMutationBatchAfterBatchId(n,e)))}function fj(r,e){const t=de(r);return t.persistence.runTransaction("Allocate target","readwrite",n=>{let s;return t.hi.getTargetData(n,e).next(i=>i?(s=i,B.resolve(s)):t.hi.allocateTargetId(n).next(a=>(s=new wn(e,a,"TargetPurposeListen",n.currentSequenceNumber),t.hi.addTargetData(n,s).next(()=>s))))}).then(n=>{const s=t.Fs.get(n.targetId);return(s===null||n.snapshotVersion.compareTo(s.snapshotVersion)>0)&&(t.Fs=t.Fs.insert(n.targetId,n),t.Ms.set(e,n.targetId)),n})}async function pd(r,e,t){const n=de(r),s=n.Fs.get(e),i=t?"readwrite":"readwrite-primary";try{t||await n.persistence.runTransaction("Release target",i,a=>n.persistence.referenceDelegate.removeTarget(a,s))}catch(a){if(!Fo(a))throw a;Y(Fh,`Failed to update sequence numbers for target ${e}: ${a}`)}n.Fs=n.Fs.remove(e),n.Ms.delete(s.target)}function ig(r,e,t){const n=de(r);let s=ce.min(),i=ve();return n.persistence.runTransaction("Execute query","readwrite",a=>function(u,d,h){const m=de(u),g=m.Ms.get(h);return g!==void 0?B.resolve(m.Fs.get(g)):m.hi.getTargetData(d,h)}(n,a,wr(e)).next(l=>{if(l)return s=l.lastLimboFreeSnapshotVersion,n.hi.getMatchingKeysForTargetId(a,l.targetId).next(u=>{i=u})}).next(()=>n.Cs.getDocumentsMatchingQuery(a,e,t?s:ce.min(),t?i:ve())).next(l=>(mj(n,e2(e),l),{documents:l,qs:i})))}function mj(r,e,t){let n=r.xs.get(e)||ce.min();t.forEach((s,i)=>{i.readTime.compareTo(n)>0&&(n=i.readTime)}),r.xs.set(e,n)}class ag{constructor(){this.activeTargetIds=i2()}Gs(e){this.activeTargetIds=this.activeTargetIds.add(e)}zs(e){this.activeTargetIds=this.activeTargetIds.delete(e)}Ws(){const e={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(e)}}class pj{constructor(){this.Fo=new ag,this.Mo={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(e){}updateMutationState(e,t,n){}addLocalQueryTarget(e,t=!0){return t&&this.Fo.Gs(e),this.Mo[e]||"not-current"}updateQueryState(e,t,n){this.Mo[e]=t}removeLocalQueryTarget(e){this.Fo.zs(e)}isLocalQueryTarget(e){return this.Fo.activeTargetIds.has(e)}clearQueryState(e){delete this.Mo[e]}getAllActiveQueryTargets(){return this.Fo.activeTargetIds}isActiveQueryTarget(e){return this.Fo.activeTargetIds.has(e)}start(){return this.Fo=new ag,Promise.resolve()}handleUserChange(e,t,n){}setOnlineState(e){}shutdown(){}writeSequenceNumber(e){}notifyBundleLoaded(e){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class gj{xo(e){}shutdown(){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const lg="ConnectivityMonitor";class cg{constructor(){this.Oo=()=>this.No(),this.Bo=()=>this.Lo(),this.ko=[],this.qo()}xo(e){this.ko.push(e)}shutdown(){window.removeEventListener("online",this.Oo),window.removeEventListener("offline",this.Bo)}qo(){window.addEventListener("online",this.Oo),window.addEventListener("offline",this.Bo)}No(){Y(lg,"Network connectivity changed: AVAILABLE");for(const e of this.ko)e(0)}Lo(){Y(lg,"Network connectivity changed: UNAVAILABLE");for(const e of this.ko)e(1)}static C(){return typeof window<"u"&&window.addEventListener!==void 0&&window.removeEventListener!==void 0}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let $a=null;function gd(){return $a===null?$a=function(){return 268435456+Math.round(2147483648*Math.random())}():$a++,"0x"+$a.toString(16)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const _u="RestConnection",yj={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery",RunAggregationQuery:"runAggregationQuery"};class xj{get Qo(){return!1}constructor(e){this.databaseInfo=e,this.databaseId=e.databaseId;const t=e.ssl?"https":"http",n=encodeURIComponent(this.databaseId.projectId),s=encodeURIComponent(this.databaseId.database);this.$o=t+"://"+e.host,this.Uo=`projects/${n}/databases/${s}`,this.Ko=this.databaseId.database===El?`project_id=${n}`:`project_id=${n}&database_id=${s}`}Wo(e,t,n,s,i){const a=gd(),l=this.Go(e,t.toUriEncodedString());Y(_u,`Sending RPC '${e}' ${a}:`,l,n);const u={"google-cloud-resource-prefix":this.Uo,"x-goog-request-params":this.Ko};this.zo(u,s,i);const{host:d}=new URL(l),h=Bn(d);return this.jo(e,l,u,n,h).then(m=>(Y(_u,`Received RPC '${e}' ${a}: `,m),m),m=>{throw jn(_u,`RPC '${e}' ${a} failed with error: `,m,"url: ",l,"request:",n),m})}Jo(e,t,n,s,i,a){return this.Wo(e,t,n,s,i)}zo(e,t,n){e["X-Goog-Api-Client"]=function(){return"gl-js/ fire/"+Lo}(),e["Content-Type"]="text/plain",this.databaseInfo.appId&&(e["X-Firebase-GMPID"]=this.databaseInfo.appId),t&&t.headers.forEach((s,i)=>e[i]=s),n&&n.headers.forEach((s,i)=>e[i]=s)}Go(e,t){const n=yj[e];return`${this.$o}/v1/${t}:${n}`}terminate(){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class bj{constructor(e){this.Ho=e.Ho,this.Yo=e.Yo}Zo(e){this.Xo=e}e_(e){this.t_=e}n_(e){this.r_=e}onMessage(e){this.i_=e}close(){this.Yo()}send(e){this.Ho(e)}s_(){this.Xo()}o_(){this.t_()}__(e){this.r_(e)}a_(e){this.i_(e)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const gt="WebChannelConnection";class vj extends xj{constructor(e){super(e),this.u_=[],this.forceLongPolling=e.forceLongPolling,this.autoDetectLongPolling=e.autoDetectLongPolling,this.useFetchStreams=e.useFetchStreams,this.longPollingOptions=e.longPollingOptions}jo(e,t,n,s,i){const a=gd();return new Promise((l,u)=>{const d=new d0;d.setWithCredentials(!0),d.listenOnce(h0.COMPLETE,()=>{try{switch(d.getLastErrorCode()){case el.NO_ERROR:const m=d.getResponseJson();Y(gt,`XHR for RPC '${e}' ${a} received:`,JSON.stringify(m)),l(m);break;case el.TIMEOUT:Y(gt,`RPC '${e}' ${a} timed out`),u(new K($.DEADLINE_EXCEEDED,"Request time out"));break;case el.HTTP_ERROR:const g=d.getStatus();if(Y(gt,`RPC '${e}' ${a} failed with status:`,g,"response text:",d.getResponseText()),g>0){let x=d.getResponseJson();Array.isArray(x)&&(x=x[0]);const S=x==null?void 0:x.error;if(S&&S.status&&S.message){const b=function(E){const T=E.toLowerCase().replace(/_/g,"-");return Object.values($).indexOf(T)>=0?T:$.UNKNOWN}(S.status);u(new K(b,S.message))}else u(new K($.UNKNOWN,"Server responded with status "+d.getStatus()))}else u(new K($.UNAVAILABLE,"Connection failed."));break;default:ae(9055,{c_:e,streamId:a,l_:d.getLastErrorCode(),h_:d.getLastError()})}}finally{Y(gt,`RPC '${e}' ${a} completed.`)}});const h=JSON.stringify(s);Y(gt,`RPC '${e}' ${a} sending request:`,s),d.send(t,"POST",h,n,15)})}P_(e,t,n){const s=gd(),i=[this.$o,"/","google.firestore.v1.Firestore","/",e,"/channel"],a=p0(),l=m0(),u={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling},d=this.longPollingOptions.timeoutSeconds;d!==void 0&&(u.longPollingTimeout=Math.round(1e3*d)),this.useFetchStreams&&(u.useFetchStreams=!0),this.zo(u.initMessageHeaders,t,n),u.encodeInitMessageHeaders=!0;const h=i.join("");Y(gt,`Creating RPC '${e}' stream ${s}: ${h}`,u);const m=a.createWebChannel(h,u);this.T_(m);let g=!1,x=!1;const S=new bj({Ho:v=>{x?Y(gt,`Not sending because RPC '${e}' stream ${s} is closed:`,v):(g||(Y(gt,`Opening RPC '${e}' stream ${s} transport.`),m.open(),g=!0),Y(gt,`RPC '${e}' stream ${s} sending:`,v),m.send(v))},Yo:()=>m.close()}),b=(v,E,T)=>{v.listen(E,N=>{try{T(N)}catch(P){setTimeout(()=>{throw P},0)}})};return b(m,yi.EventType.OPEN,()=>{x||(Y(gt,`RPC '${e}' stream ${s} transport opened.`),S.s_())}),b(m,yi.EventType.CLOSE,()=>{x||(x=!0,Y(gt,`RPC '${e}' stream ${s} transport closed`),S.__(),this.I_(m))}),b(m,yi.EventType.ERROR,v=>{x||(x=!0,jn(gt,`RPC '${e}' stream ${s} transport errored. Name:`,v.name,"Message:",v.message),S.__(new K($.UNAVAILABLE,"The operation could not be completed")))}),b(m,yi.EventType.MESSAGE,v=>{var E;if(!x){const T=v.data[0];ke(!!T,16349);const N=T,P=(N==null?void 0:N.error)||((E=N[0])===null||E===void 0?void 0:E.error);if(P){Y(gt,`RPC '${e}' stream ${s} received error:`,P);const F=P.status;let U=function(C){const j=Xe[C];if(j!==void 0)return X0(j)}(F),A=P.message;U===void 0&&(U=$.INTERNAL,A="Unknown error status: "+F+" with message "+P.message),x=!0,S.__(new K(U,A)),m.close()}else Y(gt,`RPC '${e}' stream ${s} received:`,T),S.a_(T)}}),b(l,f0.STAT_EVENT,v=>{v.stat===nd.PROXY?Y(gt,`RPC '${e}' stream ${s} detected buffering proxy`):v.stat===nd.NOPROXY&&Y(gt,`RPC '${e}' stream ${s} detected no buffering proxy`)}),setTimeout(()=>{S.o_()},0),S}terminate(){this.u_.forEach(e=>e.close()),this.u_=[]}T_(e){this.u_.push(e)}I_(e){this.u_=this.u_.filter(t=>t===e)}}function Tu(){return typeof document<"u"?document:null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function yc(r){return new E2(r,!0)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class db{constructor(e,t,n=1e3,s=1.5,i=6e4){this.Fi=e,this.timerId=t,this.d_=n,this.E_=s,this.A_=i,this.R_=0,this.V_=null,this.m_=Date.now(),this.reset()}reset(){this.R_=0}f_(){this.R_=this.A_}g_(e){this.cancel();const t=Math.floor(this.R_+this.p_()),n=Math.max(0,Date.now()-this.m_),s=Math.max(0,t-n);s>0&&Y("ExponentialBackoff",`Backing off for ${s} ms (base delay: ${this.R_} ms, delay with jitter: ${t} ms, last attempt: ${n} ms ago)`),this.V_=this.Fi.enqueueAfterDelay(this.timerId,s,()=>(this.m_=Date.now(),e())),this.R_*=this.E_,this.R_<this.d_&&(this.R_=this.d_),this.R_>this.A_&&(this.R_=this.A_)}y_(){this.V_!==null&&(this.V_.skipDelay(),this.V_=null)}cancel(){this.V_!==null&&(this.V_.cancel(),this.V_=null)}p_(){return(Math.random()-.5)*this.R_}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ug="PersistentStream";class hb{constructor(e,t,n,s,i,a,l,u){this.Fi=e,this.w_=n,this.S_=s,this.connection=i,this.authCredentialsProvider=a,this.appCheckCredentialsProvider=l,this.listener=u,this.state=0,this.b_=0,this.D_=null,this.v_=null,this.stream=null,this.C_=0,this.F_=new db(e,t)}M_(){return this.state===1||this.state===5||this.x_()}x_(){return this.state===2||this.state===3}start(){this.C_=0,this.state!==4?this.auth():this.O_()}async stop(){this.M_()&&await this.close(0)}N_(){this.state=0,this.F_.reset()}B_(){this.x_()&&this.D_===null&&(this.D_=this.Fi.enqueueAfterDelay(this.w_,6e4,()=>this.L_()))}k_(e){this.q_(),this.stream.send(e)}async L_(){if(this.x_())return this.close(0)}q_(){this.D_&&(this.D_.cancel(),this.D_=null)}Q_(){this.v_&&(this.v_.cancel(),this.v_=null)}async close(e,t){this.q_(),this.Q_(),this.F_.cancel(),this.b_++,e!==4?this.F_.reset():t&&t.code===$.RESOURCE_EXHAUSTED?(qr(t.toString()),qr("Using maximum backoff delay to prevent overloading the backend."),this.F_.f_()):t&&t.code===$.UNAUTHENTICATED&&this.state!==3&&(this.authCredentialsProvider.invalidateToken(),this.appCheckCredentialsProvider.invalidateToken()),this.stream!==null&&(this.U_(),this.stream.close(),this.stream=null),this.state=e,await this.listener.n_(t)}U_(){}auth(){this.state=1;const e=this.K_(this.b_),t=this.b_;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then(([n,s])=>{this.b_===t&&this.W_(n,s)},n=>{e(()=>{const s=new K($.UNKNOWN,"Fetching auth token failed: "+n.message);return this.G_(s)})})}W_(e,t){const n=this.K_(this.b_);this.stream=this.z_(e,t),this.stream.Zo(()=>{n(()=>this.listener.Zo())}),this.stream.e_(()=>{n(()=>(this.state=2,this.v_=this.Fi.enqueueAfterDelay(this.S_,1e4,()=>(this.x_()&&(this.state=3),Promise.resolve())),this.listener.e_()))}),this.stream.n_(s=>{n(()=>this.G_(s))}),this.stream.onMessage(s=>{n(()=>++this.C_==1?this.j_(s):this.onNext(s))})}O_(){this.state=5,this.F_.g_(async()=>{this.state=0,this.start()})}G_(e){return Y(ug,`close with error: ${e}`),this.stream=null,this.close(4,e)}K_(e){return t=>{this.Fi.enqueueAndForget(()=>this.b_===e?t():(Y(ug,"stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve()))}}}class wj extends hb{constructor(e,t,n,s,i,a){super(e,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",t,n,s,a),this.serializer=i}z_(e,t){return this.connection.P_("Listen",e,t)}j_(e){return this.onNext(e)}onNext(e){this.F_.reset();const t=k2(this.serializer,e),n=function(i){if(!("targetChange"in i))return ce.min();const a=i.targetChange;return a.targetIds&&a.targetIds.length?ce.min():a.readTime?_r(a.readTime):ce.min()}(e);return this.listener.J_(t,n)}H_(e){const t={};t.database=md(this.serializer),t.addTarget=function(i,a){let l;const u=a.target;if(l=ld(u)?{documents:I2(i,u)}:{query:A2(i,u).Vt},l.targetId=a.targetId,a.resumeToken.approximateByteSize()>0){l.resumeToken=eb(i,a.resumeToken);const d=dd(i,a.expectedCount);d!==null&&(l.expectedCount=d)}else if(a.snapshotVersion.compareTo(ce.min())>0){l.readTime=Il(i,a.snapshotVersion.toTimestamp());const d=dd(i,a.expectedCount);d!==null&&(l.expectedCount=d)}return l}(this.serializer,e);const n=P2(this.serializer,e);n&&(t.labels=n),this.k_(t)}Y_(e){const t={};t.database=md(this.serializer),t.removeTarget=e,this.k_(t)}}class _j extends hb{constructor(e,t,n,s,i,a){super(e,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",t,n,s,a),this.serializer=i}get Z_(){return this.C_>0}start(){this.lastStreamToken=void 0,super.start()}U_(){this.Z_&&this.X_([])}z_(e,t){return this.connection.P_("Write",e,t)}j_(e){return ke(!!e.streamToken,31322),this.lastStreamToken=e.streamToken,ke(!e.writeResults||e.writeResults.length===0,55816),this.listener.ea()}onNext(e){ke(!!e.streamToken,12678),this.lastStreamToken=e.streamToken,this.F_.reset();const t=j2(e.writeResults,e.commitTime),n=_r(e.commitTime);return this.listener.ta(n,t)}na(){const e={};e.database=md(this.serializer),this.k_(e)}X_(e){const t={streamToken:this.lastStreamToken,writes:e.map(n=>S2(this.serializer,n))};this.k_(t)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Tj{}class Ej extends Tj{constructor(e,t,n,s){super(),this.authCredentials=e,this.appCheckCredentials=t,this.connection=n,this.serializer=s,this.ra=!1}ia(){if(this.ra)throw new K($.FAILED_PRECONDITION,"The client has already been terminated.")}Wo(e,t,n,s){return this.ia(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([i,a])=>this.connection.Wo(e,hd(t,n),s,i,a)).catch(i=>{throw i.name==="FirebaseError"?(i.code===$.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),i):new K($.UNKNOWN,i.toString())})}Jo(e,t,n,s,i){return this.ia(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([a,l])=>this.connection.Jo(e,hd(t,n),s,a,l,i)).catch(a=>{throw a.name==="FirebaseError"?(a.code===$.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),a):new K($.UNKNOWN,a.toString())})}terminate(){this.ra=!0,this.connection.terminate()}}class Nj{constructor(e,t){this.asyncQueue=e,this.onlineStateHandler=t,this.state="Unknown",this.sa=0,this.oa=null,this._a=!0}aa(){this.sa===0&&(this.ua("Unknown"),this.oa=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,()=>(this.oa=null,this.ca("Backend didn't respond within 10 seconds."),this.ua("Offline"),Promise.resolve())))}la(e){this.state==="Online"?this.ua("Unknown"):(this.sa++,this.sa>=1&&(this.ha(),this.ca(`Connection failed 1 times. Most recent error: ${e.toString()}`),this.ua("Offline")))}set(e){this.ha(),this.sa=0,e==="Online"&&(this._a=!1),this.ua(e)}ua(e){e!==this.state&&(this.state=e,this.onlineStateHandler(e))}ca(e){const t=`Could not reach Cloud Firestore backend. ${e}
This typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this._a?(qr(t),this._a=!1):Y("OnlineStateTracker",t)}ha(){this.oa!==null&&(this.oa.cancel(),this.oa=null)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ws="RemoteStore";class Cj{constructor(e,t,n,s,i){this.localStore=e,this.datastore=t,this.asyncQueue=n,this.remoteSyncer={},this.Pa=[],this.Ta=new Map,this.Ia=new Set,this.da=[],this.Ea=i,this.Ea.xo(a=>{n.enqueueAndForget(async()=>{Rs(this)&&(Y(ws,"Restarting streams for network reachability change."),await async function(u){const d=de(u);d.Ia.add(4),await ia(d),d.Aa.set("Unknown"),d.Ia.delete(4),await xc(d)}(this))})}),this.Aa=new Nj(n,s)}}async function xc(r){if(Rs(r))for(const e of r.da)await e(!0)}async function ia(r){for(const e of r.da)await e(!1)}function fb(r,e){const t=de(r);t.Ta.has(e.targetId)||(t.Ta.set(e.targetId,e),zh(t)?Bh(t):Uo(t).x_()&&$h(t,e))}function Uh(r,e){const t=de(r),n=Uo(t);t.Ta.delete(e),n.x_()&&mb(t,e),t.Ta.size===0&&(n.x_()?n.B_():Rs(t)&&t.Aa.set("Unknown"))}function $h(r,e){if(r.Ra.$e(e.targetId),e.resumeToken.approximateByteSize()>0||e.snapshotVersion.compareTo(ce.min())>0){const t=r.remoteSyncer.getRemoteKeysForTarget(e.targetId).size;e=e.withExpectedCount(t)}Uo(r).H_(e)}function mb(r,e){r.Ra.$e(e),Uo(r).Y_(e)}function Bh(r){r.Ra=new v2({getRemoteKeysForTarget:e=>r.remoteSyncer.getRemoteKeysForTarget(e),Et:e=>r.Ta.get(e)||null,lt:()=>r.datastore.serializer.databaseId}),Uo(r).start(),r.Aa.aa()}function zh(r){return Rs(r)&&!Uo(r).M_()&&r.Ta.size>0}function Rs(r){return de(r).Ia.size===0}function pb(r){r.Ra=void 0}async function kj(r){r.Aa.set("Online")}async function Sj(r){r.Ta.forEach((e,t)=>{$h(r,e)})}async function jj(r,e){pb(r),zh(r)?(r.Aa.la(e),Bh(r)):r.Aa.set("Unknown")}async function Ij(r,e,t){if(r.Aa.set("Online"),e instanceof Z0&&e.state===2&&e.cause)try{await async function(s,i){const a=i.cause;for(const l of i.targetIds)s.Ta.has(l)&&(await s.remoteSyncer.rejectListen(l,a),s.Ta.delete(l),s.Ra.removeTarget(l))}(r,e)}catch(n){Y(ws,"Failed to remove targets %s: %s ",e.targetIds.join(","),n),await Rl(r,n)}else if(e instanceof sl?r.Ra.Ye(e):e instanceof J0?r.Ra.it(e):r.Ra.et(e),!t.isEqual(ce.min()))try{const n=await ub(r.localStore);t.compareTo(n)>=0&&await function(i,a){const l=i.Ra.Pt(a);return l.targetChanges.forEach((u,d)=>{if(u.resumeToken.approximateByteSize()>0){const h=i.Ta.get(d);h&&i.Ta.set(d,h.withResumeToken(u.resumeToken,a))}}),l.targetMismatches.forEach((u,d)=>{const h=i.Ta.get(u);if(!h)return;i.Ta.set(u,h.withResumeToken(dt.EMPTY_BYTE_STRING,h.snapshotVersion)),mb(i,u);const m=new wn(h.target,u,d,h.sequenceNumber);$h(i,m)}),i.remoteSyncer.applyRemoteEvent(l)}(r,t)}catch(n){Y(ws,"Failed to raise snapshot:",n),await Rl(r,n)}}async function Rl(r,e,t){if(!Fo(e))throw e;r.Ia.add(1),await ia(r),r.Aa.set("Offline"),t||(t=()=>ub(r.localStore)),r.asyncQueue.enqueueRetryable(async()=>{Y(ws,"Retrying IndexedDB access"),await t(),r.Ia.delete(1),await xc(r)})}function gb(r,e){return e().catch(t=>Rl(r,t,e))}async function bc(r){const e=de(r),t=Dn(e);let n=e.Pa.length>0?e.Pa[e.Pa.length-1].batchId:Ch;for(;Aj(e);)try{const s=await hj(e.localStore,n);if(s===null){e.Pa.length===0&&t.B_();break}n=s.batchId,Rj(e,s)}catch(s){await Rl(e,s)}yb(e)&&xb(e)}function Aj(r){return Rs(r)&&r.Pa.length<10}function Rj(r,e){r.Pa.push(e);const t=Dn(r);t.x_()&&t.Z_&&t.X_(e.mutations)}function yb(r){return Rs(r)&&!Dn(r).M_()&&r.Pa.length>0}function xb(r){Dn(r).start()}async function Pj(r){Dn(r).na()}async function Mj(r){const e=Dn(r);for(const t of r.Pa)e.X_(t.mutations)}async function Dj(r,e,t){const n=r.Pa.shift(),s=Ph.from(n,e,t);await gb(r,()=>r.remoteSyncer.applySuccessfulWrite(s)),await bc(r)}async function Oj(r,e){e&&Dn(r).Z_&&await async function(n,s){if(function(a){return x2(a)&&a!==$.ABORTED}(s.code)){const i=n.Pa.shift();Dn(n).N_(),await gb(n,()=>n.remoteSyncer.rejectFailedWrite(i.batchId,s)),await bc(n)}}(r,e),yb(r)&&xb(r)}async function dg(r,e){const t=de(r);t.asyncQueue.verifyOperationInProgress(),Y(ws,"RemoteStore received new credentials");const n=Rs(t);t.Ia.add(3),await ia(t),n&&t.Aa.set("Unknown"),await t.remoteSyncer.handleCredentialChange(e),t.Ia.delete(3),await xc(t)}async function Lj(r,e){const t=de(r);e?(t.Ia.delete(2),await xc(t)):e||(t.Ia.add(2),await ia(t),t.Aa.set("Unknown"))}function Uo(r){return r.Va||(r.Va=function(t,n,s){const i=de(t);return i.ia(),new wj(n,i.connection,i.authCredentials,i.appCheckCredentials,i.serializer,s)}(r.datastore,r.asyncQueue,{Zo:kj.bind(null,r),e_:Sj.bind(null,r),n_:jj.bind(null,r),J_:Ij.bind(null,r)}),r.da.push(async e=>{e?(r.Va.N_(),zh(r)?Bh(r):r.Aa.set("Unknown")):(await r.Va.stop(),pb(r))})),r.Va}function Dn(r){return r.ma||(r.ma=function(t,n,s){const i=de(t);return i.ia(),new _j(n,i.connection,i.authCredentials,i.appCheckCredentials,i.serializer,s)}(r.datastore,r.asyncQueue,{Zo:()=>Promise.resolve(),e_:Pj.bind(null,r),n_:Oj.bind(null,r),ea:Mj.bind(null,r),ta:Dj.bind(null,r)}),r.da.push(async e=>{e?(r.ma.N_(),await bc(r)):(await r.ma.stop(),r.Pa.length>0&&(Y(ws,`Stopping write stream with ${r.Pa.length} pending writes`),r.Pa=[]))})),r.ma}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class qh{constructor(e,t,n,s,i){this.asyncQueue=e,this.timerId=t,this.targetTimeMs=n,this.op=s,this.removalCallback=i,this.deferred=new Nn,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch(a=>{})}get promise(){return this.deferred.promise}static createAndSchedule(e,t,n,s,i){const a=Date.now()+n,l=new qh(e,t,a,s,i);return l.start(n),l}start(e){this.timerHandle=setTimeout(()=>this.handleDelayElapsed(),e)}skipDelay(){return this.handleDelayElapsed()}cancel(e){this.timerHandle!==null&&(this.clearTimeout(),this.deferred.reject(new K($.CANCELLED,"Operation cancelled"+(e?": "+e:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget(()=>this.timerHandle!==null?(this.clearTimeout(),this.op().then(e=>this.deferred.resolve(e))):Promise.resolve())}clearTimeout(){this.timerHandle!==null&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}}function Hh(r,e){if(qr("AsyncQueue",`${e}: ${r}`),Fo(r))return new K($.UNAVAILABLE,`${e}: ${r}`);throw r}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ro{static emptySet(e){return new ro(e.comparator)}constructor(e){this.comparator=e?(t,n)=>e(t,n)||re.comparator(t.key,n.key):(t,n)=>re.comparator(t.key,n.key),this.keyedMap=xi(),this.sortedSet=new Be(this.comparator)}has(e){return this.keyedMap.get(e)!=null}get(e){return this.keyedMap.get(e)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(e){const t=this.keyedMap.get(e);return t?this.sortedSet.indexOf(t):-1}get size(){return this.sortedSet.size}forEach(e){this.sortedSet.inorderTraversal((t,n)=>(e(t),!1))}add(e){const t=this.delete(e.key);return t.copy(t.keyedMap.insert(e.key,e),t.sortedSet.insert(e,null))}delete(e){const t=this.get(e);return t?this.copy(this.keyedMap.remove(e),this.sortedSet.remove(t)):this}isEqual(e){if(!(e instanceof ro)||this.size!==e.size)return!1;const t=this.sortedSet.getIterator(),n=e.sortedSet.getIterator();for(;t.hasNext();){const s=t.getNext().key,i=n.getNext().key;if(!s.isEqual(i))return!1}return!0}toString(){const e=[];return this.forEach(t=>{e.push(t.toString())}),e.length===0?"DocumentSet ()":`DocumentSet (
  `+e.join(`  
`)+`
)`}copy(e,t){const n=new ro;return n.comparator=this.comparator,n.keyedMap=e,n.sortedSet=t,n}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class hg{constructor(){this.fa=new Be(re.comparator)}track(e){const t=e.doc.key,n=this.fa.get(t);n?e.type!==0&&n.type===3?this.fa=this.fa.insert(t,e):e.type===3&&n.type!==1?this.fa=this.fa.insert(t,{type:n.type,doc:e.doc}):e.type===2&&n.type===2?this.fa=this.fa.insert(t,{type:2,doc:e.doc}):e.type===2&&n.type===0?this.fa=this.fa.insert(t,{type:0,doc:e.doc}):e.type===1&&n.type===0?this.fa=this.fa.remove(t):e.type===1&&n.type===2?this.fa=this.fa.insert(t,{type:1,doc:n.doc}):e.type===0&&n.type===1?this.fa=this.fa.insert(t,{type:2,doc:e.doc}):ae(63341,{At:e,ga:n}):this.fa=this.fa.insert(t,e)}pa(){const e=[];return this.fa.inorderTraversal((t,n)=>{e.push(n)}),e}}class jo{constructor(e,t,n,s,i,a,l,u,d){this.query=e,this.docs=t,this.oldDocs=n,this.docChanges=s,this.mutatedKeys=i,this.fromCache=a,this.syncStateChanged=l,this.excludesMetadataChanges=u,this.hasCachedResults=d}static fromInitialDocuments(e,t,n,s,i){const a=[];return t.forEach(l=>{a.push({type:0,doc:l})}),new jo(e,t,ro.emptySet(t),a,n,s,!0,!1,i)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(e){if(!(this.fromCache===e.fromCache&&this.hasCachedResults===e.hasCachedResults&&this.syncStateChanged===e.syncStateChanged&&this.mutatedKeys.isEqual(e.mutatedKeys)&&hc(this.query,e.query)&&this.docs.isEqual(e.docs)&&this.oldDocs.isEqual(e.oldDocs)))return!1;const t=this.docChanges,n=e.docChanges;if(t.length!==n.length)return!1;for(let s=0;s<t.length;s++)if(t[s].type!==n[s].type||!t[s].doc.isEqual(n[s].doc))return!1;return!0}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Vj{constructor(){this.ya=void 0,this.wa=[]}Sa(){return this.wa.some(e=>e.ba())}}class Fj{constructor(){this.queries=fg(),this.onlineState="Unknown",this.Da=new Set}terminate(){(function(t,n){const s=de(t),i=s.queries;s.queries=fg(),i.forEach((a,l)=>{for(const u of l.wa)u.onError(n)})})(this,new K($.ABORTED,"Firestore shutting down"))}}function fg(){return new As(r=>F0(r),hc)}async function Uj(r,e){const t=de(r);let n=3;const s=e.query;let i=t.queries.get(s);i?!i.Sa()&&e.ba()&&(n=2):(i=new Vj,n=e.ba()?0:1);try{switch(n){case 0:i.ya=await t.onListen(s,!0);break;case 1:i.ya=await t.onListen(s,!1);break;case 2:await t.onFirstRemoteStoreListen(s)}}catch(a){const l=Hh(a,`Initialization of query '${Us(e.query)}' failed`);return void e.onError(l)}t.queries.set(s,i),i.wa.push(e),e.va(t.onlineState),i.ya&&e.Ca(i.ya)&&Wh(t)}async function $j(r,e){const t=de(r),n=e.query;let s=3;const i=t.queries.get(n);if(i){const a=i.wa.indexOf(e);a>=0&&(i.wa.splice(a,1),i.wa.length===0?s=e.ba()?0:1:!i.Sa()&&e.ba()&&(s=2))}switch(s){case 0:return t.queries.delete(n),t.onUnlisten(n,!0);case 1:return t.queries.delete(n),t.onUnlisten(n,!1);case 2:return t.onLastRemoteStoreUnlisten(n);default:return}}function Bj(r,e){const t=de(r);let n=!1;for(const s of e){const i=s.query,a=t.queries.get(i);if(a){for(const l of a.wa)l.Ca(s)&&(n=!0);a.ya=s}}n&&Wh(t)}function zj(r,e,t){const n=de(r),s=n.queries.get(e);if(s)for(const i of s.wa)i.onError(t);n.queries.delete(e)}function Wh(r){r.Da.forEach(e=>{e.next()})}var yd,mg;(mg=yd||(yd={})).Fa="default",mg.Cache="cache";class qj{constructor(e,t,n){this.query=e,this.Ma=t,this.xa=!1,this.Oa=null,this.onlineState="Unknown",this.options=n||{}}Ca(e){if(!this.options.includeMetadataChanges){const n=[];for(const s of e.docChanges)s.type!==3&&n.push(s);e=new jo(e.query,e.docs,e.oldDocs,n,e.mutatedKeys,e.fromCache,e.syncStateChanged,!0,e.hasCachedResults)}let t=!1;return this.xa?this.Na(e)&&(this.Ma.next(e),t=!0):this.Ba(e,this.onlineState)&&(this.La(e),t=!0),this.Oa=e,t}onError(e){this.Ma.error(e)}va(e){this.onlineState=e;let t=!1;return this.Oa&&!this.xa&&this.Ba(this.Oa,e)&&(this.La(this.Oa),t=!0),t}Ba(e,t){if(!e.fromCache||!this.ba())return!0;const n=t!=="Offline";return(!this.options.ka||!n)&&(!e.docs.isEmpty()||e.hasCachedResults||t==="Offline")}Na(e){if(e.docChanges.length>0)return!0;const t=this.Oa&&this.Oa.hasPendingWrites!==e.hasPendingWrites;return!(!e.syncStateChanged&&!t)&&this.options.includeMetadataChanges===!0}La(e){e=jo.fromInitialDocuments(e.query,e.docs,e.mutatedKeys,e.fromCache,e.hasCachedResults),this.xa=!0,this.Ma.next(e)}ba(){return this.options.source!==yd.Cache}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class bb{constructor(e){this.key=e}}class vb{constructor(e){this.key=e}}class Hj{constructor(e,t){this.query=e,this.Ha=t,this.Ya=null,this.hasCachedResults=!1,this.current=!1,this.Za=ve(),this.mutatedKeys=ve(),this.Xa=U0(e),this.eu=new ro(this.Xa)}get tu(){return this.Ha}nu(e,t){const n=t?t.ru:new hg,s=t?t.eu:this.eu;let i=t?t.mutatedKeys:this.mutatedKeys,a=s,l=!1;const u=this.query.limitType==="F"&&s.size===this.query.limit?s.last():null,d=this.query.limitType==="L"&&s.size===this.query.limit?s.first():null;if(e.inorderTraversal((h,m)=>{const g=s.get(h),x=fc(this.query,m)?m:null,S=!!g&&this.mutatedKeys.has(g.key),b=!!x&&(x.hasLocalMutations||this.mutatedKeys.has(x.key)&&x.hasCommittedMutations);let v=!1;g&&x?g.data.isEqual(x.data)?S!==b&&(n.track({type:3,doc:x}),v=!0):this.iu(g,x)||(n.track({type:2,doc:x}),v=!0,(u&&this.Xa(x,u)>0||d&&this.Xa(x,d)<0)&&(l=!0)):!g&&x?(n.track({type:0,doc:x}),v=!0):g&&!x&&(n.track({type:1,doc:g}),v=!0,(u||d)&&(l=!0)),v&&(x?(a=a.add(x),i=b?i.add(h):i.delete(h)):(a=a.delete(h),i=i.delete(h)))}),this.query.limit!==null)for(;a.size>this.query.limit;){const h=this.query.limitType==="F"?a.last():a.first();a=a.delete(h.key),i=i.delete(h.key),n.track({type:1,doc:h})}return{eu:a,ru:n,Ds:l,mutatedKeys:i}}iu(e,t){return e.hasLocalMutations&&t.hasCommittedMutations&&!t.hasLocalMutations}applyChanges(e,t,n,s){const i=this.eu;this.eu=e.eu,this.mutatedKeys=e.mutatedKeys;const a=e.ru.pa();a.sort((h,m)=>function(x,S){const b=v=>{switch(v){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return ae(20277,{At:v})}};return b(x)-b(S)}(h.type,m.type)||this.Xa(h.doc,m.doc)),this.su(n),s=s!=null&&s;const l=t&&!s?this.ou():[],u=this.Za.size===0&&this.current&&!s?1:0,d=u!==this.Ya;return this.Ya=u,a.length!==0||d?{snapshot:new jo(this.query,e.eu,i,a,e.mutatedKeys,u===0,d,!1,!!n&&n.resumeToken.approximateByteSize()>0),_u:l}:{_u:l}}va(e){return this.current&&e==="Offline"?(this.current=!1,this.applyChanges({eu:this.eu,ru:new hg,mutatedKeys:this.mutatedKeys,Ds:!1},!1)):{_u:[]}}au(e){return!this.Ha.has(e)&&!!this.eu.has(e)&&!this.eu.get(e).hasLocalMutations}su(e){e&&(e.addedDocuments.forEach(t=>this.Ha=this.Ha.add(t)),e.modifiedDocuments.forEach(t=>{}),e.removedDocuments.forEach(t=>this.Ha=this.Ha.delete(t)),this.current=e.current)}ou(){if(!this.current)return[];const e=this.Za;this.Za=ve(),this.eu.forEach(n=>{this.au(n.key)&&(this.Za=this.Za.add(n.key))});const t=[];return e.forEach(n=>{this.Za.has(n)||t.push(new vb(n))}),this.Za.forEach(n=>{e.has(n)||t.push(new bb(n))}),t}uu(e){this.Ha=e.qs,this.Za=ve();const t=this.nu(e.documents);return this.applyChanges(t,!0)}cu(){return jo.fromInitialDocuments(this.query,this.eu,this.mutatedKeys,this.Ya===0,this.hasCachedResults)}}const Gh="SyncEngine";class Wj{constructor(e,t,n){this.query=e,this.targetId=t,this.view=n}}class Gj{constructor(e){this.key=e,this.lu=!1}}class Kj{constructor(e,t,n,s,i,a){this.localStore=e,this.remoteStore=t,this.eventManager=n,this.sharedClientState=s,this.currentUser=i,this.maxConcurrentLimboResolutions=a,this.hu={},this.Pu=new As(l=>F0(l),hc),this.Tu=new Map,this.Iu=new Set,this.du=new Be(re.comparator),this.Eu=new Map,this.Au=new Oh,this.Ru={},this.Vu=new Map,this.mu=So.ur(),this.onlineState="Unknown",this.fu=void 0}get isPrimaryClient(){return this.fu===!0}}async function Qj(r,e,t=!0){const n=Cb(r);let s;const i=n.Pu.get(e);return i?(n.sharedClientState.addLocalQueryTarget(i.targetId),s=i.view.cu()):s=await wb(n,e,t,!0),s}async function Yj(r,e){const t=Cb(r);await wb(t,e,!0,!1)}async function wb(r,e,t,n){const s=await fj(r.localStore,wr(e)),i=s.targetId,a=r.sharedClientState.addLocalQueryTarget(i,t);let l;return n&&(l=await Xj(r,e,i,a==="current",s.resumeToken)),r.isPrimaryClient&&t&&fb(r.remoteStore,s),l}async function Xj(r,e,t,n,s){r.gu=(m,g,x)=>async function(b,v,E,T){let N=v.view.nu(E);N.Ds&&(N=await ig(b.localStore,v.query,!1).then(({documents:A})=>v.view.nu(A,N)));const P=T&&T.targetChanges.get(v.targetId),F=T&&T.targetMismatches.get(v.targetId)!=null,U=v.view.applyChanges(N,b.isPrimaryClient,P,F);return gg(b,v.targetId,U._u),U.snapshot}(r,m,g,x);const i=await ig(r.localStore,e,!0),a=new Hj(e,i.qs),l=a.nu(i.documents),u=oa.createSynthesizedTargetChangeForCurrentChange(t,n&&r.onlineState!=="Offline",s),d=a.applyChanges(l,r.isPrimaryClient,u);gg(r,t,d._u);const h=new Wj(e,t,a);return r.Pu.set(e,h),r.Tu.has(t)?r.Tu.get(t).push(e):r.Tu.set(t,[e]),d.snapshot}async function Jj(r,e,t){const n=de(r),s=n.Pu.get(e),i=n.Tu.get(s.targetId);if(i.length>1)return n.Tu.set(s.targetId,i.filter(a=>!hc(a,e))),void n.Pu.delete(e);n.isPrimaryClient?(n.sharedClientState.removeLocalQueryTarget(s.targetId),n.sharedClientState.isActiveQueryTarget(s.targetId)||await pd(n.localStore,s.targetId,!1).then(()=>{n.sharedClientState.clearQueryState(s.targetId),t&&Uh(n.remoteStore,s.targetId),xd(n,s.targetId)}).catch(Vo)):(xd(n,s.targetId),await pd(n.localStore,s.targetId,!0))}async function Zj(r,e){const t=de(r),n=t.Pu.get(e),s=t.Tu.get(n.targetId);t.isPrimaryClient&&s.length===1&&(t.sharedClientState.removeLocalQueryTarget(n.targetId),Uh(t.remoteStore,n.targetId))}async function eI(r,e,t){const n=aI(r);try{const s=await function(a,l){const u=de(a),d=Fe.now(),h=l.reduce((x,S)=>x.add(S.key),ve());let m,g;return u.persistence.runTransaction("Locally write mutations","readwrite",x=>{let S=Hr(),b=ve();return u.Os.getEntries(x,h).next(v=>{S=v,S.forEach((E,T)=>{T.isValidDocument()||(b=b.add(E))})}).next(()=>u.localDocuments.getOverlayedDocuments(x,S)).next(v=>{m=v;const E=[];for(const T of l){const N=f2(T,m.get(T.key).overlayedDocument);N!=null&&E.push(new Wn(T.key,N,I0(N.value.mapValue),qt.exists(!0)))}return u.mutationQueue.addMutationBatch(x,d,E,l)}).next(v=>{g=v;const E=v.applyToLocalDocumentSet(m,b);return u.documentOverlayCache.saveOverlays(x,v.batchId,E)})}).then(()=>({batchId:g.batchId,changes:B0(m)}))}(n.localStore,e);n.sharedClientState.addPendingMutation(s.batchId),function(a,l,u){let d=a.Ru[a.currentUser.toKey()];d||(d=new Be(ye)),d=d.insert(l,u),a.Ru[a.currentUser.toKey()]=d}(n,s.batchId,t),await aa(n,s.changes),await bc(n.remoteStore)}catch(s){const i=Hh(s,"Failed to persist write");t.reject(i)}}async function _b(r,e){const t=de(r);try{const n=await uj(t.localStore,e);e.targetChanges.forEach((s,i)=>{const a=t.Eu.get(i);a&&(ke(s.addedDocuments.size+s.modifiedDocuments.size+s.removedDocuments.size<=1,22616),s.addedDocuments.size>0?a.lu=!0:s.modifiedDocuments.size>0?ke(a.lu,14607):s.removedDocuments.size>0&&(ke(a.lu,42227),a.lu=!1))}),await aa(t,n,e)}catch(n){await Vo(n)}}function pg(r,e,t){const n=de(r);if(n.isPrimaryClient&&t===0||!n.isPrimaryClient&&t===1){const s=[];n.Pu.forEach((i,a)=>{const l=a.view.va(e);l.snapshot&&s.push(l.snapshot)}),function(a,l){const u=de(a);u.onlineState=l;let d=!1;u.queries.forEach((h,m)=>{for(const g of m.wa)g.va(l)&&(d=!0)}),d&&Wh(u)}(n.eventManager,e),s.length&&n.hu.J_(s),n.onlineState=e,n.isPrimaryClient&&n.sharedClientState.setOnlineState(e)}}async function tI(r,e,t){const n=de(r);n.sharedClientState.updateQueryState(e,"rejected",t);const s=n.Eu.get(e),i=s&&s.key;if(i){let a=new Be(re.comparator);a=a.insert(i,vt.newNoDocument(i,ce.min()));const l=ve().add(i),u=new gc(ce.min(),new Map,new Be(ye),a,l);await _b(n,u),n.du=n.du.remove(i),n.Eu.delete(e),Kh(n)}else await pd(n.localStore,e,!1).then(()=>xd(n,e,t)).catch(Vo)}async function rI(r,e){const t=de(r),n=e.batch.batchId;try{const s=await cj(t.localStore,e);Eb(t,n,null),Tb(t,n),t.sharedClientState.updateMutationState(n,"acknowledged"),await aa(t,s)}catch(s){await Vo(s)}}async function nI(r,e,t){const n=de(r);try{const s=await function(a,l){const u=de(a);return u.persistence.runTransaction("Reject batch","readwrite-primary",d=>{let h;return u.mutationQueue.lookupMutationBatch(d,l).next(m=>(ke(m!==null,37113),h=m.keys(),u.mutationQueue.removeMutationBatch(d,m))).next(()=>u.mutationQueue.performConsistencyCheck(d)).next(()=>u.documentOverlayCache.removeOverlaysForBatchId(d,h,l)).next(()=>u.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(d,h)).next(()=>u.localDocuments.getDocuments(d,h))})}(n.localStore,e);Eb(n,e,t),Tb(n,e),n.sharedClientState.updateMutationState(e,"rejected",t),await aa(n,s)}catch(s){await Vo(s)}}function Tb(r,e){(r.Vu.get(e)||[]).forEach(t=>{t.resolve()}),r.Vu.delete(e)}function Eb(r,e,t){const n=de(r);let s=n.Ru[n.currentUser.toKey()];if(s){const i=s.get(e);i&&(t?i.reject(t):i.resolve(),s=s.remove(e)),n.Ru[n.currentUser.toKey()]=s}}function xd(r,e,t=null){r.sharedClientState.removeLocalQueryTarget(e);for(const n of r.Tu.get(e))r.Pu.delete(n),t&&r.hu.pu(n,t);r.Tu.delete(e),r.isPrimaryClient&&r.Au.zr(e).forEach(n=>{r.Au.containsKey(n)||Nb(r,n)})}function Nb(r,e){r.Iu.delete(e.path.canonicalString());const t=r.du.get(e);t!==null&&(Uh(r.remoteStore,t),r.du=r.du.remove(e),r.Eu.delete(t),Kh(r))}function gg(r,e,t){for(const n of t)n instanceof bb?(r.Au.addReference(n.key,e),sI(r,n)):n instanceof vb?(Y(Gh,"Document no longer in limbo: "+n.key),r.Au.removeReference(n.key,e),r.Au.containsKey(n.key)||Nb(r,n.key)):ae(19791,{yu:n})}function sI(r,e){const t=e.key,n=t.path.canonicalString();r.du.get(t)||r.Iu.has(n)||(Y(Gh,"New document in limbo: "+t),r.Iu.add(n),Kh(r))}function Kh(r){for(;r.Iu.size>0&&r.du.size<r.maxConcurrentLimboResolutions;){const e=r.Iu.values().next().value;r.Iu.delete(e);const t=new re(Pe.fromString(e)),n=r.mu.next();r.Eu.set(n,new Gj(t)),r.du=r.du.insert(t,n),fb(r.remoteStore,new wn(wr(L0(t.path)),n,"TargetPurposeLimboResolution",cc.ue))}}async function aa(r,e,t){const n=de(r),s=[],i=[],a=[];n.Pu.isEmpty()||(n.Pu.forEach((l,u)=>{a.push(n.gu(u,e,t).then(d=>{var h;if((d||t)&&n.isPrimaryClient){const m=d?!d.fromCache:(h=t==null?void 0:t.targetChanges.get(u.targetId))===null||h===void 0?void 0:h.current;n.sharedClientState.updateQueryState(u.targetId,m?"current":"not-current")}if(d){s.push(d);const m=Vh.Es(u.targetId,d);i.push(m)}}))}),await Promise.all(a),n.hu.J_(s),await async function(u,d){const h=de(u);try{await h.persistence.runTransaction("notifyLocalViewChanges","readwrite",m=>B.forEach(d,g=>B.forEach(g.Is,x=>h.persistence.referenceDelegate.addReference(m,g.targetId,x)).next(()=>B.forEach(g.ds,x=>h.persistence.referenceDelegate.removeReference(m,g.targetId,x)))))}catch(m){if(!Fo(m))throw m;Y(Fh,"Failed to update sequence numbers: "+m)}for(const m of d){const g=m.targetId;if(!m.fromCache){const x=h.Fs.get(g),S=x.snapshotVersion,b=x.withLastLimboFreeSnapshotVersion(S);h.Fs=h.Fs.insert(g,b)}}}(n.localStore,i))}async function oI(r,e){const t=de(r);if(!t.currentUser.isEqual(e)){Y(Gh,"User change. New user:",e.toKey());const n=await cb(t.localStore,e);t.currentUser=e,function(i,a){i.Vu.forEach(l=>{l.forEach(u=>{u.reject(new K($.CANCELLED,a))})}),i.Vu.clear()}(t,"'waitForPendingWrites' promise is rejected due to a user change."),t.sharedClientState.handleUserChange(e,n.removedBatchIds,n.addedBatchIds),await aa(t,n.Bs)}}function iI(r,e){const t=de(r),n=t.Eu.get(e);if(n&&n.lu)return ve().add(n.key);{let s=ve();const i=t.Tu.get(e);if(!i)return s;for(const a of i){const l=t.Pu.get(a);s=s.unionWith(l.view.tu)}return s}}function Cb(r){const e=de(r);return e.remoteStore.remoteSyncer.applyRemoteEvent=_b.bind(null,e),e.remoteStore.remoteSyncer.getRemoteKeysForTarget=iI.bind(null,e),e.remoteStore.remoteSyncer.rejectListen=tI.bind(null,e),e.hu.J_=Bj.bind(null,e.eventManager),e.hu.pu=zj.bind(null,e.eventManager),e}function aI(r){const e=de(r);return e.remoteStore.remoteSyncer.applySuccessfulWrite=rI.bind(null,e),e.remoteStore.remoteSyncer.rejectFailedWrite=nI.bind(null,e),e}class Pl{constructor(){this.kind="memory",this.synchronizeTabs=!1}async initialize(e){this.serializer=yc(e.databaseInfo.databaseId),this.sharedClientState=this.bu(e),this.persistence=this.Du(e),await this.persistence.start(),this.localStore=this.vu(e),this.gcScheduler=this.Cu(e,this.localStore),this.indexBackfillerScheduler=this.Fu(e,this.localStore)}Cu(e,t){return null}Fu(e,t){return null}vu(e){return lj(this.persistence,new oj,e.initialUser,this.serializer)}Du(e){return new lb(Lh.Vi,this.serializer)}bu(e){return new pj}async terminate(){var e,t;(e=this.gcScheduler)===null||e===void 0||e.stop(),(t=this.indexBackfillerScheduler)===null||t===void 0||t.stop(),this.sharedClientState.shutdown(),await this.persistence.shutdown()}}Pl.provider={build:()=>new Pl};class lI extends Pl{constructor(e){super(),this.cacheSizeBytes=e}Cu(e,t){ke(this.persistence.referenceDelegate instanceof Al,46915);const n=this.persistence.referenceDelegate.garbageCollector;return new q2(n,e.asyncQueue,t)}Du(e){const t=this.cacheSizeBytes!==void 0?Rt.withCacheSize(this.cacheSizeBytes):Rt.DEFAULT;return new lb(n=>Al.Vi(n,t),this.serializer)}}class bd{async initialize(e,t){this.localStore||(this.localStore=e.localStore,this.sharedClientState=e.sharedClientState,this.datastore=this.createDatastore(t),this.remoteStore=this.createRemoteStore(t),this.eventManager=this.createEventManager(t),this.syncEngine=this.createSyncEngine(t,!e.synchronizeTabs),this.sharedClientState.onlineStateHandler=n=>pg(this.syncEngine,n,1),this.remoteStore.remoteSyncer.handleCredentialChange=oI.bind(null,this.syncEngine),await Lj(this.remoteStore,this.syncEngine.isPrimaryClient))}createEventManager(e){return function(){return new Fj}()}createDatastore(e){const t=yc(e.databaseInfo.databaseId),n=function(i){return new vj(i)}(e.databaseInfo);return function(i,a,l,u){return new Ej(i,a,l,u)}(e.authCredentials,e.appCheckCredentials,n,t)}createRemoteStore(e){return function(n,s,i,a,l){return new Cj(n,s,i,a,l)}(this.localStore,this.datastore,e.asyncQueue,t=>pg(this.syncEngine,t,0),function(){return cg.C()?new cg:new gj}())}createSyncEngine(e,t){return function(s,i,a,l,u,d,h){const m=new Kj(s,i,a,l,u,d);return h&&(m.fu=!0),m}(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,e.initialUser,e.maxConcurrentLimboResolutions,t)}async terminate(){var e,t;await async function(s){const i=de(s);Y(ws,"RemoteStore shutting down."),i.Ia.add(5),await ia(i),i.Ea.shutdown(),i.Aa.set("Unknown")}(this.remoteStore),(e=this.datastore)===null||e===void 0||e.terminate(),(t=this.eventManager)===null||t===void 0||t.terminate()}}bd.provider={build:()=>new bd};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class cI{constructor(e){this.observer=e,this.muted=!1}next(e){this.muted||this.observer.next&&this.xu(this.observer.next,e)}error(e){this.muted||(this.observer.error?this.xu(this.observer.error,e):qr("Uncaught Error in snapshot listener:",e.toString()))}Ou(){this.muted=!0}xu(e,t){setTimeout(()=>{this.muted||e(t)},0)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const On="FirestoreClient";class uI{constructor(e,t,n,s,i){this.authCredentials=e,this.appCheckCredentials=t,this.asyncQueue=n,this.databaseInfo=s,this.user=xt.UNAUTHENTICATED,this.clientId=Nh.newId(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this._uninitializedComponentsProvider=i,this.authCredentials.start(n,async a=>{Y(On,"Received user=",a.uid),await this.authCredentialListener(a),this.user=a}),this.appCheckCredentials.start(n,a=>(Y(On,"Received new app check token=",a),this.appCheckCredentialListener(a,this.user)))}get configuration(){return{asyncQueue:this.asyncQueue,databaseInfo:this.databaseInfo,clientId:this.clientId,authCredentials:this.authCredentials,appCheckCredentials:this.appCheckCredentials,initialUser:this.user,maxConcurrentLimboResolutions:100}}setCredentialChangeListener(e){this.authCredentialListener=e}setAppCheckTokenChangeListener(e){this.appCheckCredentialListener=e}terminate(){this.asyncQueue.enterRestrictedMode();const e=new Nn;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted(async()=>{try{this._onlineComponents&&await this._onlineComponents.terminate(),this._offlineComponents&&await this._offlineComponents.terminate(),this.authCredentials.shutdown(),this.appCheckCredentials.shutdown(),e.resolve()}catch(t){const n=Hh(t,"Failed to shutdown persistence");e.reject(n)}}),e.promise}}async function Eu(r,e){r.asyncQueue.verifyOperationInProgress(),Y(On,"Initializing OfflineComponentProvider");const t=r.configuration;await e.initialize(t);let n=t.initialUser;r.setCredentialChangeListener(async s=>{n.isEqual(s)||(await cb(e.localStore,s),n=s)}),e.persistence.setDatabaseDeletedListener(()=>{jn("Terminating Firestore due to IndexedDb database deletion"),r.terminate().then(()=>{Y("Terminating Firestore due to IndexedDb database deletion completed successfully")}).catch(s=>{jn("Terminating Firestore due to IndexedDb database deletion failed",s)})}),r._offlineComponents=e}async function yg(r,e){r.asyncQueue.verifyOperationInProgress();const t=await dI(r);Y(On,"Initializing OnlineComponentProvider"),await e.initialize(t,r.configuration),r.setCredentialChangeListener(n=>dg(e.remoteStore,n)),r.setAppCheckTokenChangeListener((n,s)=>dg(e.remoteStore,s)),r._onlineComponents=e}async function dI(r){if(!r._offlineComponents)if(r._uninitializedComponentsProvider){Y(On,"Using user provided OfflineComponentProvider");try{await Eu(r,r._uninitializedComponentsProvider._offline)}catch(e){const t=e;if(!function(s){return s.name==="FirebaseError"?s.code===$.FAILED_PRECONDITION||s.code===$.UNIMPLEMENTED:!(typeof DOMException<"u"&&s instanceof DOMException)||s.code===22||s.code===20||s.code===11}(t))throw t;jn("Error using user provided cache. Falling back to memory cache: "+t),await Eu(r,new Pl)}}else Y(On,"Using default OfflineComponentProvider"),await Eu(r,new lI(void 0));return r._offlineComponents}async function kb(r){return r._onlineComponents||(r._uninitializedComponentsProvider?(Y(On,"Using user provided OnlineComponentProvider"),await yg(r,r._uninitializedComponentsProvider._online)):(Y(On,"Using default OnlineComponentProvider"),await yg(r,new bd))),r._onlineComponents}function hI(r){return kb(r).then(e=>e.syncEngine)}async function fI(r){const e=await kb(r),t=e.eventManager;return t.onListen=Qj.bind(null,e.syncEngine),t.onUnlisten=Jj.bind(null,e.syncEngine),t.onFirstRemoteStoreListen=Yj.bind(null,e.syncEngine),t.onLastRemoteStoreUnlisten=Zj.bind(null,e.syncEngine),t}function mI(r,e,t={}){const n=new Nn;return r.asyncQueue.enqueueAndForget(async()=>function(i,a,l,u,d){const h=new cI({next:g=>{h.Ou(),a.enqueueAndForget(()=>$j(i,m)),g.fromCache&&u.source==="server"?d.reject(new K($.UNAVAILABLE,'Failed to get documents from server. (However, these documents may exist in the local cache. Run again without setting source to "server" to retrieve the cached documents.)')):d.resolve(g)},error:g=>d.reject(g)}),m=new qj(l,h,{includeMetadataChanges:!0,ka:!0});return Uj(i,m)}(await fI(r),r.asyncQueue,e,t,n)),n.promise}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Sb(r){const e={};return r.timeoutSeconds!==void 0&&(e.timeoutSeconds=r.timeoutSeconds),e}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const xg=new Map;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const jb="firestore.googleapis.com",bg=!0;class vg{constructor(e){var t,n;if(e.host===void 0){if(e.ssl!==void 0)throw new K($.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host=jb,this.ssl=bg}else this.host=e.host,this.ssl=(t=e.ssl)!==null&&t!==void 0?t:bg;if(this.isUsingEmulator=e.emulatorOptions!==void 0,this.credentials=e.credentials,this.ignoreUndefinedProperties=!!e.ignoreUndefinedProperties,this.localCache=e.localCache,e.cacheSizeBytes===void 0)this.cacheSizeBytes=ab;else{if(e.cacheSizeBytes!==-1&&e.cacheSizeBytes<B2)throw new K($.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=e.cacheSizeBytes}kS("experimentalForceLongPolling",e.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",e.experimentalAutoDetectLongPolling),this.experimentalForceLongPolling=!!e.experimentalForceLongPolling,this.experimentalForceLongPolling?this.experimentalAutoDetectLongPolling=!1:e.experimentalAutoDetectLongPolling===void 0?this.experimentalAutoDetectLongPolling=!0:this.experimentalAutoDetectLongPolling=!!e.experimentalAutoDetectLongPolling,this.experimentalLongPollingOptions=Sb((n=e.experimentalLongPollingOptions)!==null&&n!==void 0?n:{}),function(i){if(i.timeoutSeconds!==void 0){if(isNaN(i.timeoutSeconds))throw new K($.INVALID_ARGUMENT,`invalid long polling timeout: ${i.timeoutSeconds} (must not be NaN)`);if(i.timeoutSeconds<5)throw new K($.INVALID_ARGUMENT,`invalid long polling timeout: ${i.timeoutSeconds} (minimum allowed value is 5)`);if(i.timeoutSeconds>30)throw new K($.INVALID_ARGUMENT,`invalid long polling timeout: ${i.timeoutSeconds} (maximum allowed value is 30)`)}}(this.experimentalLongPollingOptions),this.useFetchStreams=!!e.useFetchStreams}isEqual(e){return this.host===e.host&&this.ssl===e.ssl&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.experimentalForceLongPolling===e.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===e.experimentalAutoDetectLongPolling&&function(n,s){return n.timeoutSeconds===s.timeoutSeconds}(this.experimentalLongPollingOptions,e.experimentalLongPollingOptions)&&this.ignoreUndefinedProperties===e.ignoreUndefinedProperties&&this.useFetchStreams===e.useFetchStreams}}class vc{constructor(e,t,n,s){this._authCredentials=e,this._appCheckCredentials=t,this._databaseId=n,this._app=s,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new vg({}),this._settingsFrozen=!1,this._emulatorOptions={},this._terminateTask="notTerminated"}get app(){if(!this._app)throw new K($.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return this._terminateTask!=="notTerminated"}_setSettings(e){if(this._settingsFrozen)throw new K($.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new vg(e),this._emulatorOptions=e.emulatorOptions||{},e.credentials!==void 0&&(this._authCredentials=function(n){if(!n)return new xS;switch(n.type){case"firstParty":return new _S(n.sessionIndex||"0",n.iamToken||null,n.authTokenFactory||null);case"provider":return n.client;default:throw new K($.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}}(e.credentials))}_getSettings(){return this._settings}_getEmulatorOptions(){return this._emulatorOptions}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask==="notTerminated"&&(this._terminateTask=this._terminate()),this._terminateTask}async _restart(){this._terminateTask==="notTerminated"?await this._terminate():this._terminateTask="notTerminated"}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return function(t){const n=xg.get(t);n&&(Y("ComponentProvider","Removing Datastore"),xg.delete(t),n.terminate())}(this),Promise.resolve()}}function pI(r,e,t,n={}){var s;r=In(r,vc);const i=Bn(e),a=r._getSettings(),l=Object.assign(Object.assign({},a),{emulatorOptions:r._getEmulatorOptions()}),u=`${e}:${t}`;i&&(dh(`https://${u}`),hh("Firestore",!0)),a.host!==jb&&a.host!==u&&jn("Host has been set in both settings() and connectFirestoreEmulator(), emulator host will be used.");const d=Object.assign(Object.assign({},a),{host:u,ssl:i,emulatorOptions:n});if(!ys(d,l)&&(r._setSettings(d),n.mockUserToken)){let h,m;if(typeof n.mockUserToken=="string")h=n.mockUserToken,m=xt.MOCK_USER;else{h=Tx(n.mockUserToken,(s=r._app)===null||s===void 0?void 0:s.options.projectId);const g=n.mockUserToken.sub||n.mockUserToken.user_id;if(!g)throw new K($.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");m=new xt(g)}r._authCredentials=new bS(new y0(h,m))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let wc=class Ib{constructor(e,t,n){this.converter=t,this._query=n,this.type="query",this.firestore=e}withConverter(e){return new Ib(this.firestore,e,this._query)}};class tt{constructor(e,t,n){this.converter=t,this._key=n,this.type="document",this.firestore=e}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new Cn(this.firestore,this.converter,this._key.path.popLast())}withConverter(e){return new tt(this.firestore,e,this._key)}toJSON(){return{type:tt._jsonSchemaVersion,referencePath:this._key.toString()}}static fromJSON(e,t,n){if(ra(t,tt._jsonSchema))return new tt(e,n||null,new re(Pe.fromString(t.referencePath)))}}tt._jsonSchemaVersion="firestore/documentReference/1.0",tt._jsonSchema={type:et("string",tt._jsonSchemaVersion),referencePath:et("string")};class Cn extends wc{constructor(e,t,n){super(e,t,L0(n)),this._path=n,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){const e=this._path.popLast();return e.isEmpty()?null:new tt(this.firestore,null,new re(e))}withConverter(e){return new Cn(this.firestore,e,this._path)}}function Ml(r,e,...t){if(r=Me(r),b0("collection","path",e),r instanceof vc){const n=Pe.fromString(e,...t);return Pp(n),new Cn(r,null,n)}{if(!(r instanceof tt||r instanceof Cn))throw new K($.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const n=r._path.child(Pe.fromString(e,...t));return Pp(n),new Cn(r.firestore,null,n)}}function _c(r,e,...t){if(r=Me(r),arguments.length===1&&(e=Nh.newId()),b0("doc","path",e),r instanceof vc){const n=Pe.fromString(e,...t);return Rp(n),new tt(r,null,new re(n))}{if(!(r instanceof tt||r instanceof Cn))throw new K($.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const n=r._path.child(Pe.fromString(e,...t));return Rp(n),new tt(r.firestore,r instanceof Cn?r.converter:null,new re(n))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const wg="AsyncQueue";class _g{constructor(e=Promise.resolve()){this.Zu=[],this.Xu=!1,this.ec=[],this.tc=null,this.nc=!1,this.rc=!1,this.sc=[],this.F_=new db(this,"async_queue_retry"),this.oc=()=>{const n=Tu();n&&Y(wg,"Visibility state changed to "+n.visibilityState),this.F_.y_()},this._c=e;const t=Tu();t&&typeof t.addEventListener=="function"&&t.addEventListener("visibilitychange",this.oc)}get isShuttingDown(){return this.Xu}enqueueAndForget(e){this.enqueue(e)}enqueueAndForgetEvenWhileRestricted(e){this.ac(),this.uc(e)}enterRestrictedMode(e){if(!this.Xu){this.Xu=!0,this.rc=e||!1;const t=Tu();t&&typeof t.removeEventListener=="function"&&t.removeEventListener("visibilitychange",this.oc)}}enqueue(e){if(this.ac(),this.Xu)return new Promise(()=>{});const t=new Nn;return this.uc(()=>this.Xu&&this.rc?Promise.resolve():(e().then(t.resolve,t.reject),t.promise)).then(()=>t.promise)}enqueueRetryable(e){this.enqueueAndForget(()=>(this.Zu.push(e),this.cc()))}async cc(){if(this.Zu.length!==0){try{await this.Zu[0](),this.Zu.shift(),this.F_.reset()}catch(e){if(!Fo(e))throw e;Y(wg,"Operation failed with retryable error: "+e)}this.Zu.length>0&&this.F_.g_(()=>this.cc())}}uc(e){const t=this._c.then(()=>(this.nc=!0,e().catch(n=>{throw this.tc=n,this.nc=!1,qr("INTERNAL UNHANDLED ERROR: ",Tg(n)),n}).then(n=>(this.nc=!1,n))));return this._c=t,t}enqueueAfterDelay(e,t,n){this.ac(),this.sc.indexOf(e)>-1&&(t=0);const s=qh.createAndSchedule(this,e,t,n,i=>this.lc(i));return this.ec.push(s),s}ac(){this.tc&&ae(47125,{hc:Tg(this.tc)})}verifyOperationInProgress(){}async Pc(){let e;do e=this._c,await e;while(e!==this._c)}Tc(e){for(const t of this.ec)if(t.timerId===e)return!0;return!1}Ic(e){return this.Pc().then(()=>{this.ec.sort((t,n)=>t.targetTimeMs-n.targetTimeMs);for(const t of this.ec)if(t.skipDelay(),e!=="all"&&t.timerId===e)break;return this.Pc()})}dc(e){this.sc.push(e)}lc(e){const t=this.ec.indexOf(e);this.ec.splice(t,1)}}function Tg(r){let e=r.message||"";return r.stack&&(e=r.stack.includes(r.message)?r.stack:r.message+`
`+r.stack),e}class la extends vc{constructor(e,t,n,s){super(e,t,n,s),this.type="firestore",this._queue=new _g,this._persistenceKey=(s==null?void 0:s.name)||"[DEFAULT]"}async _terminate(){if(this._firestoreClient){const e=this._firestoreClient.terminate();this._queue=new _g(e),this._firestoreClient=void 0,await e}}}function gI(r,e){const t=typeof r=="object"?r:sc(),n=typeof r=="string"?r:El,s=js(t,"firestore").getImmediate({identifier:n});if(!s._initialized){const i=vx("firestore");i&&pI(s,...i)}return s}function Qh(r){if(r._terminated)throw new K($.FAILED_PRECONDITION,"The client has already been terminated.");return r._firestoreClient||yI(r),r._firestoreClient}function yI(r){var e,t,n;const s=r._freezeSettings(),i=function(l,u,d,h){return new VS(l,u,d,h.host,h.ssl,h.experimentalForceLongPolling,h.experimentalAutoDetectLongPolling,Sb(h.experimentalLongPollingOptions),h.useFetchStreams,h.isUsingEmulator)}(r._databaseId,((e=r._app)===null||e===void 0?void 0:e.options.appId)||"",r._persistenceKey,s);r._componentsProvider||!((t=s.localCache)===null||t===void 0)&&t._offlineComponentProvider&&(!((n=s.localCache)===null||n===void 0)&&n._onlineComponentProvider)&&(r._componentsProvider={_offline:s.localCache._offlineComponentProvider,_online:s.localCache._onlineComponentProvider}),r._firestoreClient=new uI(r._authCredentials,r._appCheckCredentials,r._queue,i,r._componentsProvider&&function(l){const u=l==null?void 0:l._online.build();return{_offline:l==null?void 0:l._offline.build(u),_online:u}}(r._componentsProvider))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Kt{constructor(e){this._byteString=e}static fromBase64String(e){try{return new Kt(dt.fromBase64String(e))}catch(t){throw new K($.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+t)}}static fromUint8Array(e){return new Kt(dt.fromUint8Array(e))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(e){return this._byteString.isEqual(e._byteString)}toJSON(){return{type:Kt._jsonSchemaVersion,bytes:this.toBase64()}}static fromJSON(e){if(ra(e,Kt._jsonSchema))return Kt.fromBase64String(e.bytes)}}Kt._jsonSchemaVersion="firestore/bytes/1.0",Kt._jsonSchema={type:et("string",Kt._jsonSchemaVersion),bytes:et("string")};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ca{constructor(...e){for(let t=0;t<e.length;++t)if(e[t].length===0)throw new K($.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new ut(e)}isEqual(e){return this._internalPath.isEqual(e._internalPath)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Yh{constructor(e){this._methodName=e}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Tr{constructor(e,t){if(!isFinite(e)||e<-90||e>90)throw new K($.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+e);if(!isFinite(t)||t<-180||t>180)throw new K($.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+t);this._lat=e,this._long=t}get latitude(){return this._lat}get longitude(){return this._long}isEqual(e){return this._lat===e._lat&&this._long===e._long}_compareTo(e){return ye(this._lat,e._lat)||ye(this._long,e._long)}toJSON(){return{latitude:this._lat,longitude:this._long,type:Tr._jsonSchemaVersion}}static fromJSON(e){if(ra(e,Tr._jsonSchema))return new Tr(e.latitude,e.longitude)}}Tr._jsonSchemaVersion="firestore/geoPoint/1.0",Tr._jsonSchema={type:et("string",Tr._jsonSchemaVersion),latitude:et("number"),longitude:et("number")};/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Er{constructor(e){this._values=(e||[]).map(t=>t)}toArray(){return this._values.map(e=>e)}isEqual(e){return function(n,s){if(n.length!==s.length)return!1;for(let i=0;i<n.length;++i)if(n[i]!==s[i])return!1;return!0}(this._values,e._values)}toJSON(){return{type:Er._jsonSchemaVersion,vectorValues:this._values}}static fromJSON(e){if(ra(e,Er._jsonSchema)){if(Array.isArray(e.vectorValues)&&e.vectorValues.every(t=>typeof t=="number"))return new Er(e.vectorValues);throw new K($.INVALID_ARGUMENT,"Expected 'vectorValues' field to be a number array")}}}Er._jsonSchemaVersion="firestore/vectorValue/1.0",Er._jsonSchema={type:et("string",Er._jsonSchemaVersion),vectorValues:et("object")};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const xI=/^__.*__$/;class bI{constructor(e,t,n){this.data=e,this.fieldMask=t,this.fieldTransforms=n}toMutation(e,t){return this.fieldMask!==null?new Wn(e,this.data,this.fieldMask,t,this.fieldTransforms):new sa(e,this.data,t,this.fieldTransforms)}}class Ab{constructor(e,t,n){this.data=e,this.fieldMask=t,this.fieldTransforms=n}toMutation(e,t){return new Wn(e,this.data,this.fieldMask,t,this.fieldTransforms)}}function Rb(r){switch(r){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw ae(40011,{Ec:r})}}class Xh{constructor(e,t,n,s,i,a){this.settings=e,this.databaseId=t,this.serializer=n,this.ignoreUndefinedProperties=s,i===void 0&&this.Ac(),this.fieldTransforms=i||[],this.fieldMask=a||[]}get path(){return this.settings.path}get Ec(){return this.settings.Ec}Rc(e){return new Xh(Object.assign(Object.assign({},this.settings),e),this.databaseId,this.serializer,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}Vc(e){var t;const n=(t=this.path)===null||t===void 0?void 0:t.child(e),s=this.Rc({path:n,mc:!1});return s.fc(e),s}gc(e){var t;const n=(t=this.path)===null||t===void 0?void 0:t.child(e),s=this.Rc({path:n,mc:!1});return s.Ac(),s}yc(e){return this.Rc({path:void 0,mc:!0})}wc(e){return Dl(e,this.settings.methodName,this.settings.Sc||!1,this.path,this.settings.bc)}contains(e){return this.fieldMask.find(t=>e.isPrefixOf(t))!==void 0||this.fieldTransforms.find(t=>e.isPrefixOf(t.field))!==void 0}Ac(){if(this.path)for(let e=0;e<this.path.length;e++)this.fc(this.path.get(e))}fc(e){if(e.length===0)throw this.wc("Document fields must not be empty");if(Rb(this.Ec)&&xI.test(e))throw this.wc('Document fields cannot begin and end with "__"')}}class vI{constructor(e,t,n){this.databaseId=e,this.ignoreUndefinedProperties=t,this.serializer=n||yc(e)}Dc(e,t,n,s=!1){return new Xh({Ec:e,methodName:t,bc:n,path:ut.emptyPath(),mc:!1,Sc:s},this.databaseId,this.serializer,this.ignoreUndefinedProperties)}}function Tc(r){const e=r._freezeSettings(),t=yc(r._databaseId);return new vI(r._databaseId,!!e.ignoreUndefinedProperties,t)}function Pb(r,e,t,n,s,i={}){const a=r.Dc(i.merge||i.mergeFields?2:0,e,t,s);Jh("Data must be an object, but it was:",a,n);const l=Ob(n,a);let u,d;if(i.merge)u=new $t(a.fieldMask),d=a.fieldTransforms;else if(i.mergeFields){const h=[];for(const m of i.mergeFields){const g=vd(e,m,t);if(!a.contains(g))throw new K($.INVALID_ARGUMENT,`Field '${g}' is specified in your field mask but missing from your input data.`);Vb(h,g)||h.push(g)}u=new $t(h),d=a.fieldTransforms.filter(m=>u.covers(m.field))}else u=null,d=a.fieldTransforms;return new bI(new Mt(l),u,d)}class Ec extends Yh{_toFieldTransform(e){if(e.Ec!==2)throw e.Ec===1?e.wc(`${this._methodName}() can only appear at the top level of your update data`):e.wc(`${this._methodName}() cannot be used with set() unless you pass {merge:true}`);return e.fieldMask.push(e.path),null}isEqual(e){return e instanceof Ec}}function Mb(r,e,t,n){const s=r.Dc(1,e,t);Jh("Data must be an object, but it was:",s,n);const i=[],a=Mt.empty();Hn(n,(u,d)=>{const h=Zh(e,u,t);d=Me(d);const m=s.gc(h);if(d instanceof Ec)i.push(h);else{const g=ua(d,m);g!=null&&(i.push(h),a.set(h,g))}});const l=new $t(i);return new Ab(a,l,s.fieldTransforms)}function Db(r,e,t,n,s,i){const a=r.Dc(1,e,t),l=[vd(e,n,t)],u=[s];if(i.length%2!=0)throw new K($.INVALID_ARGUMENT,`Function ${e}() needs to be called with an even number of arguments that alternate between field names and values.`);for(let g=0;g<i.length;g+=2)l.push(vd(e,i[g])),u.push(i[g+1]);const d=[],h=Mt.empty();for(let g=l.length-1;g>=0;--g)if(!Vb(d,l[g])){const x=l[g];let S=u[g];S=Me(S);const b=a.gc(x);if(S instanceof Ec)d.push(x);else{const v=ua(S,b);v!=null&&(d.push(x),h.set(x,v))}}const m=new $t(d);return new Ab(h,m,a.fieldTransforms)}function wI(r,e,t,n=!1){return ua(t,r.Dc(n?4:3,e))}function ua(r,e){if(Lb(r=Me(r)))return Jh("Unsupported field value:",e,r),Ob(r,e);if(r instanceof Yh)return function(n,s){if(!Rb(s.Ec))throw s.wc(`${n._methodName}() can only be used with update() and set()`);if(!s.path)throw s.wc(`${n._methodName}() is not currently supported inside arrays`);const i=n._toFieldTransform(s);i&&s.fieldTransforms.push(i)}(r,e),null;if(r===void 0&&e.ignoreUndefinedProperties)return null;if(e.path&&e.fieldMask.push(e.path),r instanceof Array){if(e.settings.mc&&e.Ec!==4)throw e.wc("Nested arrays are not supported");return function(n,s){const i=[];let a=0;for(const l of n){let u=ua(l,s.yc(a));u==null&&(u={nullValue:"NULL_VALUE"}),i.push(u),a++}return{arrayValue:{values:i}}}(r,e)}return function(n,s){if((n=Me(n))===null)return{nullValue:"NULL_VALUE"};if(typeof n=="number")return a2(s.serializer,n);if(typeof n=="boolean")return{booleanValue:n};if(typeof n=="string")return{stringValue:n};if(n instanceof Date){const i=Fe.fromDate(n);return{timestampValue:Il(s.serializer,i)}}if(n instanceof Fe){const i=new Fe(n.seconds,1e3*Math.floor(n.nanoseconds/1e3));return{timestampValue:Il(s.serializer,i)}}if(n instanceof Tr)return{geoPointValue:{latitude:n.latitude,longitude:n.longitude}};if(n instanceof Kt)return{bytesValue:eb(s.serializer,n._byteString)};if(n instanceof tt){const i=s.databaseId,a=n.firestore._databaseId;if(!a.isEqual(i))throw s.wc(`Document reference is for database ${a.projectId}/${a.database} but should be for database ${i.projectId}/${i.database}`);return{referenceValue:Dh(n.firestore._databaseId||s.databaseId,n._key.path)}}if(n instanceof Er)return function(a,l){return{mapValue:{fields:{[S0]:{stringValue:j0},[Nl]:{arrayValue:{values:a.toArray().map(d=>{if(typeof d!="number")throw l.wc("VectorValues must only contain numeric values.");return Ah(l.serializer,d)})}}}}}}(n,s);throw s.wc(`Unsupported field value: ${lc(n)}`)}(r,e)}function Ob(r,e){const t={};return _0(r)?e.path&&e.path.length>0&&e.fieldMask.push(e.path):Hn(r,(n,s)=>{const i=ua(s,e.Vc(n));i!=null&&(t[n]=i)}),{mapValue:{fields:t}}}function Lb(r){return!(typeof r!="object"||r===null||r instanceof Array||r instanceof Date||r instanceof Fe||r instanceof Tr||r instanceof Kt||r instanceof tt||r instanceof Yh||r instanceof Er)}function Jh(r,e,t){if(!Lb(t)||!v0(t)){const n=lc(t);throw n==="an object"?e.wc(r+" a custom object"):e.wc(r+" "+n)}}function vd(r,e,t){if((e=Me(e))instanceof ca)return e._internalPath;if(typeof e=="string")return Zh(r,e);throw Dl("Field path arguments must be of type string or ",r,!1,void 0,t)}const _I=new RegExp("[~\\*/\\[\\]]");function Zh(r,e,t){if(e.search(_I)>=0)throw Dl(`Invalid field path (${e}). Paths must not contain '~', '*', '/', '[', or ']'`,r,!1,void 0,t);try{return new ca(...e.split("."))._internalPath}catch{throw Dl(`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,r,!1,void 0,t)}}function Dl(r,e,t,n,s){const i=n&&!n.isEmpty(),a=s!==void 0;let l=`Function ${e}() called with invalid data`;t&&(l+=" (via `toFirestore()`)"),l+=". ";let u="";return(i||a)&&(u+=" (found",i&&(u+=` in field ${n}`),a&&(u+=` in document ${s}`),u+=")"),new K($.INVALID_ARGUMENT,l+r+u)}function Vb(r,e){return r.some(t=>t.isEqual(e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Fb{constructor(e,t,n,s,i){this._firestore=e,this._userDataWriter=t,this._key=n,this._document=s,this._converter=i}get id(){return this._key.path.lastSegment()}get ref(){return new tt(this._firestore,this._converter,this._key)}exists(){return this._document!==null}data(){if(this._document){if(this._converter){const e=new TI(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(e)}return this._userDataWriter.convertValue(this._document.data.value)}}get(e){if(this._document){const t=this._document.data.field(ef("DocumentSnapshot.get",e));if(t!==null)return this._userDataWriter.convertValue(t)}}}class TI extends Fb{data(){return super.data()}}function ef(r,e){return typeof e=="string"?Zh(r,e):e instanceof ca?e._internalPath:e._delegate._internalPath}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function EI(r){if(r.limitType==="L"&&r.explicitOrderBy.length===0)throw new K($.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}class tf{}class NI extends tf{}function Ol(r,e,...t){let n=[];e instanceof tf&&n.push(e),n=n.concat(t),function(i){const a=i.filter(u=>u instanceof rf).length,l=i.filter(u=>u instanceof Nc).length;if(a>1||a>0&&l>0)throw new K($.INVALID_ARGUMENT,"InvalidQuery. When using composite filters, you cannot use more than one filter at the top level. Consider nesting the multiple filters within an `and(...)` statement. For example: change `query(query, where(...), or(...))` to `query(query, and(where(...), or(...)))`.")}(n);for(const s of n)r=s._apply(r);return r}class Nc extends NI{constructor(e,t,n){super(),this._field=e,this._op=t,this._value=n,this.type="where"}static _create(e,t,n){return new Nc(e,t,n)}_apply(e){const t=this._parse(e);return Ub(e._query,t),new wc(e.firestore,e.converter,cd(e._query,t))}_parse(e){const t=Tc(e.firestore);return function(i,a,l,u,d,h,m){let g;if(d.isKeyField()){if(h==="array-contains"||h==="array-contains-any")throw new K($.INVALID_ARGUMENT,`Invalid Query. You can't perform '${h}' queries on documentId().`);if(h==="in"||h==="not-in"){Ng(m,h);const S=[];for(const b of m)S.push(Eg(u,i,b));g={arrayValue:{values:S}}}else g=Eg(u,i,m)}else h!=="in"&&h!=="not-in"&&h!=="array-contains-any"||Ng(m,h),g=wI(l,a,m,h==="in"||h==="not-in");return Ze.create(d,h,g)}(e._query,"where",t,e.firestore._databaseId,this._field,this._op,this._value)}}function Ll(r,e,t){const n=e,s=ef("where",r);return Nc._create(s,n,t)}class rf extends tf{constructor(e,t){super(),this.type=e,this._queryConstraints=t}static _create(e,t){return new rf(e,t)}_parse(e){const t=this._queryConstraints.map(n=>n._parse(e)).filter(n=>n.getFilters().length>0);return t.length===1?t[0]:cr.create(t,this._getOperator())}_apply(e){const t=this._parse(e);return t.getFilters().length===0?e:(function(s,i){let a=s;const l=i.getFlattenedFilters();for(const u of l)Ub(a,u),a=cd(a,u)}(e._query,t),new wc(e.firestore,e.converter,cd(e._query,t)))}_getQueryConstraints(){return this._queryConstraints}_getOperator(){return this.type==="and"?"and":"or"}}function Eg(r,e,t){if(typeof(t=Me(t))=="string"){if(t==="")throw new K($.INVALID_ARGUMENT,"Invalid query. When querying with documentId(), you must provide a valid document ID, but it was an empty string.");if(!V0(e)&&t.indexOf("/")!==-1)throw new K($.INVALID_ARGUMENT,`Invalid query. When querying a collection by documentId(), you must provide a plain document ID, but '${t}' contains a '/' character.`);const n=e.path.child(Pe.fromString(t));if(!re.isDocumentKey(n))throw new K($.INVALID_ARGUMENT,`Invalid query. When querying a collection group by documentId(), the value provided must result in a valid document path, but '${n}' is not because it has an odd number of segments (${n.length}).`);return $p(r,new re(n))}if(t instanceof tt)return $p(r,t._key);throw new K($.INVALID_ARGUMENT,`Invalid query. When querying with documentId(), you must provide a valid string or a DocumentReference, but it was: ${lc(t)}.`)}function Ng(r,e){if(!Array.isArray(r)||r.length===0)throw new K($.INVALID_ARGUMENT,`Invalid Query. A non-empty array is required for '${e.toString()}' filters.`)}function Ub(r,e){const t=function(s,i){for(const a of s)for(const l of a.getFlattenedFilters())if(i.indexOf(l.op)>=0)return l.op;return null}(r.filters,function(s){switch(s){case"!=":return["!=","not-in"];case"array-contains-any":case"in":return["not-in"];case"not-in":return["array-contains-any","in","not-in","!="];default:return[]}}(e.op));if(t!==null)throw t===e.op?new K($.INVALID_ARGUMENT,`Invalid query. You cannot use more than one '${e.op.toString()}' filter.`):new K($.INVALID_ARGUMENT,`Invalid query. You cannot use '${e.op.toString()}' filters with '${t.toString()}' filters.`)}class CI{convertValue(e,t="none"){switch(Mn(e)){case 0:return null;case 1:return e.booleanValue;case 2:return Qe(e.integerValue||e.doubleValue);case 3:return this.convertTimestamp(e.timestampValue);case 4:return this.convertServerTimestamp(e,t);case 5:return e.stringValue;case 6:return this.convertBytes(Pn(e.bytesValue));case 7:return this.convertReference(e.referenceValue);case 8:return this.convertGeoPoint(e.geoPointValue);case 9:return this.convertArray(e.arrayValue,t);case 11:return this.convertObject(e.mapValue,t);case 10:return this.convertVectorValue(e.mapValue);default:throw ae(62114,{value:e})}}convertObject(e,t){return this.convertObjectMap(e.fields,t)}convertObjectMap(e,t="none"){const n={};return Hn(e,(s,i)=>{n[s]=this.convertValue(i,t)}),n}convertVectorValue(e){var t,n,s;const i=(s=(n=(t=e.fields)===null||t===void 0?void 0:t[Nl].arrayValue)===null||n===void 0?void 0:n.values)===null||s===void 0?void 0:s.map(a=>Qe(a.doubleValue));return new Er(i)}convertGeoPoint(e){return new Tr(Qe(e.latitude),Qe(e.longitude))}convertArray(e,t){return(e.values||[]).map(n=>this.convertValue(n,t))}convertServerTimestamp(e,t){switch(t){case"previous":const n=dc(e);return n==null?null:this.convertValue(n,t);case"estimate":return this.convertTimestamp(Li(e));default:return null}}convertTimestamp(e){const t=Rn(e);return new Fe(t.seconds,t.nanos)}convertDocumentKey(e,t){const n=Pe.fromString(e);ke(ib(n),9688,{name:e});const s=new Vi(n.get(1),n.get(3)),i=new re(n.popFirst(5));return s.isEqual(t)||qr(`Document ${i} contains a document reference within a different database (${s.projectId}/${s.database}) which is not supported. It will be treated as a reference in the current database (${t.projectId}/${t.database}) instead.`),i}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function $b(r,e,t){let n;return n=r?t&&(t.merge||t.mergeFields)?r.toFirestore(e,t):r.toFirestore(e):e,n}class Ba{constructor(e,t){this.hasPendingWrites=e,this.fromCache=t}isEqual(e){return this.hasPendingWrites===e.hasPendingWrites&&this.fromCache===e.fromCache}}class no extends Fb{constructor(e,t,n,s,i,a){super(e,t,n,s,a),this._firestore=e,this._firestoreImpl=e,this.metadata=i}exists(){return super.exists()}data(e={}){if(this._document){if(this._converter){const t=new ol(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(t,e)}return this._userDataWriter.convertValue(this._document.data.value,e.serverTimestamps)}}get(e,t={}){if(this._document){const n=this._document.data.field(ef("DocumentSnapshot.get",e));if(n!==null)return this._userDataWriter.convertValue(n,t.serverTimestamps)}}toJSON(){if(this.metadata.hasPendingWrites)throw new K($.FAILED_PRECONDITION,"DocumentSnapshot.toJSON() attempted to serialize a document with pending writes. Await waitForPendingWrites() before invoking toJSON().");const e=this._document,t={};return t.type=no._jsonSchemaVersion,t.bundle="",t.bundleSource="DocumentSnapshot",t.bundleName=this._key.toString(),!e||!e.isValidDocument()||!e.isFoundDocument()?t:(this._userDataWriter.convertObjectMap(e.data.value.mapValue.fields,"previous"),t.bundle=(this._firestore,this.ref.path,"NOT SUPPORTED"),t)}}no._jsonSchemaVersion="firestore/documentSnapshot/1.0",no._jsonSchema={type:et("string",no._jsonSchemaVersion),bundleSource:et("string","DocumentSnapshot"),bundleName:et("string"),bundle:et("string")};class ol extends no{data(e={}){return super.data(e)}}class so{constructor(e,t,n,s){this._firestore=e,this._userDataWriter=t,this._snapshot=s,this.metadata=new Ba(s.hasPendingWrites,s.fromCache),this.query=n}get docs(){const e=[];return this.forEach(t=>e.push(t)),e}get size(){return this._snapshot.docs.size}get empty(){return this.size===0}forEach(e,t){this._snapshot.docs.forEach(n=>{e.call(t,new ol(this._firestore,this._userDataWriter,n.key,n,new Ba(this._snapshot.mutatedKeys.has(n.key),this._snapshot.fromCache),this.query.converter))})}docChanges(e={}){const t=!!e.includeMetadataChanges;if(t&&this._snapshot.excludesMetadataChanges)throw new K($.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===t||(this._cachedChanges=function(s,i){if(s._snapshot.oldDocs.isEmpty()){let a=0;return s._snapshot.docChanges.map(l=>{const u=new ol(s._firestore,s._userDataWriter,l.doc.key,l.doc,new Ba(s._snapshot.mutatedKeys.has(l.doc.key),s._snapshot.fromCache),s.query.converter);return l.doc,{type:"added",doc:u,oldIndex:-1,newIndex:a++}})}{let a=s._snapshot.oldDocs;return s._snapshot.docChanges.filter(l=>i||l.type!==3).map(l=>{const u=new ol(s._firestore,s._userDataWriter,l.doc.key,l.doc,new Ba(s._snapshot.mutatedKeys.has(l.doc.key),s._snapshot.fromCache),s.query.converter);let d=-1,h=-1;return l.type!==0&&(d=a.indexOf(l.doc.key),a=a.delete(l.doc.key)),l.type!==1&&(a=a.add(l.doc),h=a.indexOf(l.doc.key)),{type:kI(l.type),doc:u,oldIndex:d,newIndex:h}})}}(this,t),this._cachedChangesIncludeMetadataChanges=t),this._cachedChanges}toJSON(){if(this.metadata.hasPendingWrites)throw new K($.FAILED_PRECONDITION,"QuerySnapshot.toJSON() attempted to serialize a document with pending writes. Await waitForPendingWrites() before invoking toJSON().");const e={};e.type=so._jsonSchemaVersion,e.bundleSource="QuerySnapshot",e.bundleName=Nh.newId(),this._firestore._databaseId.database,this._firestore._databaseId.projectId;const t=[],n=[],s=[];return this.docs.forEach(i=>{i._document!==null&&(t.push(i._document),n.push(this._userDataWriter.convertObjectMap(i._document.data.value.mapValue.fields,"previous")),s.push(i.ref.path))}),e.bundle=(this._firestore,this.query._query,e.bundleName,"NOT SUPPORTED"),e}}function kI(r){switch(r){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return ae(61501,{type:r})}}so._jsonSchemaVersion="firestore/querySnapshot/1.0",so._jsonSchema={type:et("string",so._jsonSchemaVersion),bundleSource:et("string","QuerySnapshot"),bundleName:et("string"),bundle:et("string")};class SI extends CI{constructor(e){super(),this.firestore=e}convertBytes(e){return new Kt(e)}convertReference(e){const t=this.convertDocumentKey(e,this.firestore._databaseId);return new tt(this.firestore,null,t)}}function Vl(r){r=In(r,wc);const e=In(r.firestore,la),t=Qh(e),n=new SI(e);return EI(r._query),mI(t,r._query).then(s=>new so(e,n,r,s))}function jI(r,e,t){r=In(r,tt);const n=In(r.firestore,la),s=$b(r.converter,e,t);return sf(n,[Pb(Tc(n),"setDoc",r._key,s,r.converter!==null,t).toMutation(r._key,qt.none())])}function nf(r,e,t,...n){r=In(r,tt);const s=In(r.firestore,la),i=Tc(s);let a;return a=typeof(e=Me(e))=="string"||e instanceof ca?Db(i,"updateDoc",r._key,e,t,n):Mb(i,"updateDoc",r._key,e),sf(s,[a.toMutation(r._key,qt.exists(!0))])}function sf(r,e){return function(n,s){const i=new Nn;return n.asyncQueue.enqueueAndForget(async()=>eI(await hI(n),s,i)),i.promise}(Qh(r),e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class II{constructor(e,t){this._firestore=e,this._commitHandler=t,this._mutations=[],this._committed=!1,this._dataReader=Tc(e)}set(e,t,n){this._verifyNotCommitted();const s=Nu(e,this._firestore),i=$b(s.converter,t,n),a=Pb(this._dataReader,"WriteBatch.set",s._key,i,s.converter!==null,n);return this._mutations.push(a.toMutation(s._key,qt.none())),this}update(e,t,n,...s){this._verifyNotCommitted();const i=Nu(e,this._firestore);let a;return a=typeof(t=Me(t))=="string"||t instanceof ca?Db(this._dataReader,"WriteBatch.update",i._key,t,n,s):Mb(this._dataReader,"WriteBatch.update",i._key,t),this._mutations.push(a.toMutation(i._key,qt.exists(!0))),this}delete(e){this._verifyNotCommitted();const t=Nu(e,this._firestore);return this._mutations=this._mutations.concat(new Rh(t._key,qt.none())),this}commit(){return this._verifyNotCommitted(),this._committed=!0,this._mutations.length>0?this._commitHandler(this._mutations):Promise.resolve()}_verifyNotCommitted(){if(this._committed)throw new K($.FAILED_PRECONDITION,"A write batch can no longer be used after commit() has been called.")}}function Nu(r,e){if((r=Me(r)).firestore!==e)throw new K($.INVALID_ARGUMENT,"Provided document reference is from a different Firestore instance.");return r}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Bb(r){return Qh(r=In(r,la)),new II(r,e=>sf(r,e))}(function(e,t=!0){(function(s){Lo=s})(Is),Nr(new lr("firestore",(n,{instanceIdentifier:s,options:i})=>{const a=n.getProvider("app").getImmediate(),l=new la(new vS(n.getProvider("auth-internal")),new TS(a,n.getProvider("app-check-internal")),function(d,h){if(!Object.prototype.hasOwnProperty.apply(d.options,["projectId"]))throw new K($.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new Vi(d.options.projectId,h)}(a,s),a);return i=Object.assign({useFetchStreams:t},i),l._setSettings(i),l},"PUBLIC").setMultipleInstances(!0)),Ot(kp,Sp,e),Ot(kp,Sp,"esm2017")})();/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const zb="firebasestorage.googleapis.com",qb="storageBucket",AI=120*1e3,RI=600*1e3;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ge extends hr{constructor(e,t,n=0){super(Cu(e),`Firebase Storage: ${t} (${Cu(e)})`),this.status_=n,this.customData={serverResponse:null},this._baseMessage=this.message,Object.setPrototypeOf(this,Ge.prototype)}get status(){return this.status_}set status(e){this.status_=e}_codeEquals(e){return Cu(e)===this.code}get serverResponse(){return this.customData.serverResponse}set serverResponse(e){this.customData.serverResponse=e,this.customData.serverResponse?this.message=`${this._baseMessage}
${this.customData.serverResponse}`:this.message=this._baseMessage}}var We;(function(r){r.UNKNOWN="unknown",r.OBJECT_NOT_FOUND="object-not-found",r.BUCKET_NOT_FOUND="bucket-not-found",r.PROJECT_NOT_FOUND="project-not-found",r.QUOTA_EXCEEDED="quota-exceeded",r.UNAUTHENTICATED="unauthenticated",r.UNAUTHORIZED="unauthorized",r.UNAUTHORIZED_APP="unauthorized-app",r.RETRY_LIMIT_EXCEEDED="retry-limit-exceeded",r.INVALID_CHECKSUM="invalid-checksum",r.CANCELED="canceled",r.INVALID_EVENT_NAME="invalid-event-name",r.INVALID_URL="invalid-url",r.INVALID_DEFAULT_BUCKET="invalid-default-bucket",r.NO_DEFAULT_BUCKET="no-default-bucket",r.CANNOT_SLICE_BLOB="cannot-slice-blob",r.SERVER_FILE_WRONG_SIZE="server-file-wrong-size",r.NO_DOWNLOAD_URL="no-download-url",r.INVALID_ARGUMENT="invalid-argument",r.INVALID_ARGUMENT_COUNT="invalid-argument-count",r.APP_DELETED="app-deleted",r.INVALID_ROOT_OPERATION="invalid-root-operation",r.INVALID_FORMAT="invalid-format",r.INTERNAL_ERROR="internal-error",r.UNSUPPORTED_ENVIRONMENT="unsupported-environment"})(We||(We={}));function Cu(r){return"storage/"+r}function of(){const r="An unknown error occurred, please check the error payload for server response.";return new Ge(We.UNKNOWN,r)}function PI(r){return new Ge(We.OBJECT_NOT_FOUND,"Object '"+r+"' does not exist.")}function MI(r){return new Ge(We.QUOTA_EXCEEDED,"Quota for bucket '"+r+"' exceeded, please view quota on https://firebase.google.com/pricing/.")}function DI(){const r="User is not authenticated, please authenticate using Firebase Authentication and try again.";return new Ge(We.UNAUTHENTICATED,r)}function OI(){return new Ge(We.UNAUTHORIZED_APP,"This app does not have permission to access Firebase Storage on this project.")}function LI(r){return new Ge(We.UNAUTHORIZED,"User does not have permission to access '"+r+"'.")}function VI(){return new Ge(We.RETRY_LIMIT_EXCEEDED,"Max retry time for operation exceeded, please try again.")}function FI(){return new Ge(We.CANCELED,"User canceled the upload/download.")}function UI(r){return new Ge(We.INVALID_URL,"Invalid URL '"+r+"'.")}function $I(r){return new Ge(We.INVALID_DEFAULT_BUCKET,"Invalid default bucket '"+r+"'.")}function BI(){return new Ge(We.NO_DEFAULT_BUCKET,"No default bucket found. Did you set the '"+qb+"' property when initializing the app?")}function zI(){return new Ge(We.CANNOT_SLICE_BLOB,"Cannot slice blob for upload. Please retry the upload.")}function qI(){return new Ge(We.NO_DOWNLOAD_URL,"The given file does not have any download URLs.")}function HI(r){return new Ge(We.UNSUPPORTED_ENVIRONMENT,`${r} is missing. Make sure to install the required polyfills. See https://firebase.google.com/docs/web/environments-js-sdk#polyfills for more information.`)}function wd(r){return new Ge(We.INVALID_ARGUMENT,r)}function Hb(){return new Ge(We.APP_DELETED,"The Firebase app was deleted.")}function WI(r){return new Ge(We.INVALID_ROOT_OPERATION,"The operation '"+r+"' cannot be performed on a root reference, create a non-root reference using child, such as .child('file.png').")}function ki(r,e){return new Ge(We.INVALID_FORMAT,"String does not match format '"+r+"': "+e)}function ci(r){throw new Ge(We.INTERNAL_ERROR,"Internal error: "+r)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Bt{constructor(e,t){this.bucket=e,this.path_=t}get path(){return this.path_}get isRoot(){return this.path.length===0}fullServerUrl(){const e=encodeURIComponent;return"/b/"+e(this.bucket)+"/o/"+e(this.path)}bucketOnlyServerUrl(){return"/b/"+encodeURIComponent(this.bucket)+"/o"}static makeFromBucketSpec(e,t){let n;try{n=Bt.makeFromUrl(e,t)}catch{return new Bt(e,"")}if(n.path==="")return n;throw $I(e)}static makeFromUrl(e,t){let n=null;const s="([A-Za-z0-9.\\-_]+)";function i(P){P.path.charAt(P.path.length-1)==="/"&&(P.path_=P.path_.slice(0,-1))}const a="(/(.*))?$",l=new RegExp("^gs://"+s+a,"i"),u={bucket:1,path:3};function d(P){P.path_=decodeURIComponent(P.path)}const h="v[A-Za-z0-9_]+",m=t.replace(/[.]/g,"\\."),g="(/([^?#]*).*)?$",x=new RegExp(`^https?://${m}/${h}/b/${s}/o${g}`,"i"),S={bucket:1,path:3},b=t===zb?"(?:storage.googleapis.com|storage.cloud.google.com)":t,v="([^?#]*)",E=new RegExp(`^https?://${b}/${s}/${v}`,"i"),N=[{regex:l,indices:u,postModify:i},{regex:x,indices:S,postModify:d},{regex:E,indices:{bucket:1,path:2},postModify:d}];for(let P=0;P<N.length;P++){const F=N[P],U=F.regex.exec(e);if(U){const A=U[F.indices.bucket];let w=U[F.indices.path];w||(w=""),n=new Bt(A,w),F.postModify(n);break}}if(n==null)throw UI(e);return n}}class GI{constructor(e){this.promise_=Promise.reject(e)}getPromise(){return this.promise_}cancel(e=!1){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function KI(r,e,t){let n=1,s=null,i=null,a=!1,l=0;function u(){return l===2}let d=!1;function h(...v){d||(d=!0,e.apply(null,v))}function m(v){s=setTimeout(()=>{s=null,r(x,u())},v)}function g(){i&&clearTimeout(i)}function x(v,...E){if(d){g();return}if(v){g(),h.call(null,v,...E);return}if(u()||a){g(),h.call(null,v,...E);return}n<64&&(n*=2);let N;l===1?(l=2,N=0):N=(n+Math.random())*1e3,m(N)}let S=!1;function b(v){S||(S=!0,g(),!d&&(s!==null?(v||(l=2),clearTimeout(s),m(0)):v||(l=1)))}return m(0),i=setTimeout(()=>{a=!0,b(!0)},t),b}function QI(r){r(!1)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function YI(r){return r!==void 0}function XI(r){return typeof r=="object"&&!Array.isArray(r)}function af(r){return typeof r=="string"||r instanceof String}function Cg(r){return lf()&&r instanceof Blob}function lf(){return typeof Blob<"u"}function kg(r,e,t,n){if(n<e)throw wd(`Invalid value for '${r}'. Expected ${e} or greater.`);if(n>t)throw wd(`Invalid value for '${r}'. Expected ${t} or less.`)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function cf(r,e,t){let n=e;return t==null&&(n=`https://${e}`),`${t}://${n}/v0${r}`}function Wb(r){const e=encodeURIComponent;let t="?";for(const n in r)if(r.hasOwnProperty(n)){const s=e(n)+"="+e(r[n]);t=t+s+"&"}return t=t.slice(0,-1),t}var ps;(function(r){r[r.NO_ERROR=0]="NO_ERROR",r[r.NETWORK_ERROR=1]="NETWORK_ERROR",r[r.ABORT=2]="ABORT"})(ps||(ps={}));/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function JI(r,e){const t=r>=500&&r<600,s=[408,429].indexOf(r)!==-1,i=e.indexOf(r)!==-1;return t||s||i}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ZI{constructor(e,t,n,s,i,a,l,u,d,h,m,g=!0,x=!1){this.url_=e,this.method_=t,this.headers_=n,this.body_=s,this.successCodes_=i,this.additionalRetryCodes_=a,this.callback_=l,this.errorCallback_=u,this.timeout_=d,this.progressCallback_=h,this.connectionFactory_=m,this.retry=g,this.isUsingEmulator=x,this.pendingConnection_=null,this.backoffId_=null,this.canceled_=!1,this.appDelete_=!1,this.promise_=new Promise((S,b)=>{this.resolve_=S,this.reject_=b,this.start_()})}start_(){const e=(n,s)=>{if(s){n(!1,new za(!1,null,!0));return}const i=this.connectionFactory_();this.pendingConnection_=i;const a=l=>{const u=l.loaded,d=l.lengthComputable?l.total:-1;this.progressCallback_!==null&&this.progressCallback_(u,d)};this.progressCallback_!==null&&i.addUploadProgressListener(a),i.send(this.url_,this.method_,this.isUsingEmulator,this.body_,this.headers_).then(()=>{this.progressCallback_!==null&&i.removeUploadProgressListener(a),this.pendingConnection_=null;const l=i.getErrorCode()===ps.NO_ERROR,u=i.getStatus();if(!l||JI(u,this.additionalRetryCodes_)&&this.retry){const h=i.getErrorCode()===ps.ABORT;n(!1,new za(!1,null,h));return}const d=this.successCodes_.indexOf(u)!==-1;n(!0,new za(d,i))})},t=(n,s)=>{const i=this.resolve_,a=this.reject_,l=s.connection;if(s.wasSuccessCode)try{const u=this.callback_(l,l.getResponse());YI(u)?i(u):i()}catch(u){a(u)}else if(l!==null){const u=of();u.serverResponse=l.getErrorText(),this.errorCallback_?a(this.errorCallback_(l,u)):a(u)}else if(s.canceled){const u=this.appDelete_?Hb():FI();a(u)}else{const u=VI();a(u)}};this.canceled_?t(!1,new za(!1,null,!0)):this.backoffId_=KI(e,t,this.timeout_)}getPromise(){return this.promise_}cancel(e){this.canceled_=!0,this.appDelete_=e||!1,this.backoffId_!==null&&QI(this.backoffId_),this.pendingConnection_!==null&&this.pendingConnection_.abort()}}class za{constructor(e,t,n){this.wasSuccessCode=e,this.connection=t,this.canceled=!!n}}function eA(r,e){e!==null&&e.length>0&&(r.Authorization="Firebase "+e)}function tA(r,e){r["X-Firebase-Storage-Version"]="webjs/"+(e??"AppManager")}function rA(r,e){e&&(r["X-Firebase-GMPID"]=e)}function nA(r,e){e!==null&&(r["X-Firebase-AppCheck"]=e)}function sA(r,e,t,n,s,i,a=!0,l=!1){const u=Wb(r.urlParams),d=r.url+u,h=Object.assign({},r.headers);return rA(h,e),eA(h,t),tA(h,i),nA(h,n),new ZI(d,r.method,h,r.body,r.successCodes,r.additionalRetryCodes,r.handler,r.errorHandler,r.timeout,r.progressCallback,s,a,l)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function oA(){return typeof BlobBuilder<"u"?BlobBuilder:typeof WebKitBlobBuilder<"u"?WebKitBlobBuilder:void 0}function iA(...r){const e=oA();if(e!==void 0){const t=new e;for(let n=0;n<r.length;n++)t.append(r[n]);return t.getBlob()}else{if(lf())return new Blob(r);throw new Ge(We.UNSUPPORTED_ENVIRONMENT,"This browser doesn't seem to support creating Blobs")}}function aA(r,e,t){return r.webkitSlice?r.webkitSlice(e,t):r.mozSlice?r.mozSlice(e,t):r.slice?r.slice(e,t):null}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function lA(r){if(typeof atob>"u")throw HI("base-64");return atob(r)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const br={RAW:"raw",BASE64:"base64",BASE64URL:"base64url",DATA_URL:"data_url"};class ku{constructor(e,t){this.data=e,this.contentType=t||null}}function cA(r,e){switch(r){case br.RAW:return new ku(Gb(e));case br.BASE64:case br.BASE64URL:return new ku(Kb(r,e));case br.DATA_URL:return new ku(dA(e),hA(e))}throw of()}function Gb(r){const e=[];for(let t=0;t<r.length;t++){let n=r.charCodeAt(t);if(n<=127)e.push(n);else if(n<=2047)e.push(192|n>>6,128|n&63);else if((n&64512)===55296)if(!(t<r.length-1&&(r.charCodeAt(t+1)&64512)===56320))e.push(239,191,189);else{const i=n,a=r.charCodeAt(++t);n=65536|(i&1023)<<10|a&1023,e.push(240|n>>18,128|n>>12&63,128|n>>6&63,128|n&63)}else(n&64512)===56320?e.push(239,191,189):e.push(224|n>>12,128|n>>6&63,128|n&63)}return new Uint8Array(e)}function uA(r){let e;try{e=decodeURIComponent(r)}catch{throw ki(br.DATA_URL,"Malformed data URL.")}return Gb(e)}function Kb(r,e){switch(r){case br.BASE64:{const s=e.indexOf("-")!==-1,i=e.indexOf("_")!==-1;if(s||i)throw ki(r,"Invalid character '"+(s?"-":"_")+"' found: is it base64url encoded?");break}case br.BASE64URL:{const s=e.indexOf("+")!==-1,i=e.indexOf("/")!==-1;if(s||i)throw ki(r,"Invalid character '"+(s?"+":"/")+"' found: is it base64 encoded?");e=e.replace(/-/g,"+").replace(/_/g,"/");break}}let t;try{t=lA(e)}catch(s){throw s.message.includes("polyfill")?s:ki(r,"Invalid character found")}const n=new Uint8Array(t.length);for(let s=0;s<t.length;s++)n[s]=t.charCodeAt(s);return n}class Qb{constructor(e){this.base64=!1,this.contentType=null;const t=e.match(/^data:([^,]+)?,/);if(t===null)throw ki(br.DATA_URL,"Must be formatted 'data:[<mediatype>][;base64],<data>");const n=t[1]||null;n!=null&&(this.base64=fA(n,";base64"),this.contentType=this.base64?n.substring(0,n.length-7):n),this.rest=e.substring(e.indexOf(",")+1)}}function dA(r){const e=new Qb(r);return e.base64?Kb(br.BASE64,e.rest):uA(e.rest)}function hA(r){return new Qb(r).contentType}function fA(r,e){return r.length>=e.length?r.substring(r.length-e.length)===e:!1}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class cn{constructor(e,t){let n=0,s="";Cg(e)?(this.data_=e,n=e.size,s=e.type):e instanceof ArrayBuffer?(t?this.data_=new Uint8Array(e):(this.data_=new Uint8Array(e.byteLength),this.data_.set(new Uint8Array(e))),n=this.data_.length):e instanceof Uint8Array&&(t?this.data_=e:(this.data_=new Uint8Array(e.length),this.data_.set(e)),n=e.length),this.size_=n,this.type_=s}size(){return this.size_}type(){return this.type_}slice(e,t){if(Cg(this.data_)){const n=this.data_,s=aA(n,e,t);return s===null?null:new cn(s)}else{const n=new Uint8Array(this.data_.buffer,e,t-e);return new cn(n,!0)}}static getBlob(...e){if(lf()){const t=e.map(n=>n instanceof cn?n.data_:n);return new cn(iA.apply(null,t))}else{const t=e.map(a=>af(a)?cA(br.RAW,a).data:a.data_);let n=0;t.forEach(a=>{n+=a.byteLength});const s=new Uint8Array(n);let i=0;return t.forEach(a=>{for(let l=0;l<a.length;l++)s[i++]=a[l]}),new cn(s,!0)}}uploadData(){return this.data_}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Yb(r){let e;try{e=JSON.parse(r)}catch{return null}return XI(e)?e:null}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function mA(r){if(r.length===0)return null;const e=r.lastIndexOf("/");return e===-1?"":r.slice(0,e)}function pA(r,e){const t=e.split("/").filter(n=>n.length>0).join("/");return r.length===0?t:r+"/"+t}function Xb(r){const e=r.lastIndexOf("/",r.length-2);return e===-1?r:r.slice(e+1)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function gA(r,e){return e}class Et{constructor(e,t,n,s){this.server=e,this.local=t||e,this.writable=!!n,this.xform=s||gA}}let qa=null;function yA(r){return!af(r)||r.length<2?r:Xb(r)}function Jb(){if(qa)return qa;const r=[];r.push(new Et("bucket")),r.push(new Et("generation")),r.push(new Et("metageneration")),r.push(new Et("name","fullPath",!0));function e(i,a){return yA(a)}const t=new Et("name");t.xform=e,r.push(t);function n(i,a){return a!==void 0?Number(a):a}const s=new Et("size");return s.xform=n,r.push(s),r.push(new Et("timeCreated")),r.push(new Et("updated")),r.push(new Et("md5Hash",null,!0)),r.push(new Et("cacheControl",null,!0)),r.push(new Et("contentDisposition",null,!0)),r.push(new Et("contentEncoding",null,!0)),r.push(new Et("contentLanguage",null,!0)),r.push(new Et("contentType",null,!0)),r.push(new Et("metadata","customMetadata",!0)),qa=r,qa}function xA(r,e){function t(){const n=r.bucket,s=r.fullPath,i=new Bt(n,s);return e._makeStorageReference(i)}Object.defineProperty(r,"ref",{get:t})}function bA(r,e,t){const n={};n.type="file";const s=t.length;for(let i=0;i<s;i++){const a=t[i];n[a.local]=a.xform(n,e[a.server])}return xA(n,r),n}function Zb(r,e,t){const n=Yb(e);return n===null?null:bA(r,n,t)}function vA(r,e,t,n){const s=Yb(e);if(s===null||!af(s.downloadTokens))return null;const i=s.downloadTokens;if(i.length===0)return null;const a=encodeURIComponent;return i.split(",").map(d=>{const h=r.bucket,m=r.fullPath,g="/b/"+a(h)+"/o/"+a(m),x=cf(g,t,n),S=Wb({alt:"media",token:d});return x+S})[0]}function wA(r,e){const t={},n=e.length;for(let s=0;s<n;s++){const i=e[s];i.writable&&(t[i.server]=r[i.local])}return JSON.stringify(t)}class ev{constructor(e,t,n,s){this.url=e,this.method=t,this.handler=n,this.timeout=s,this.urlParams={},this.headers={},this.body=null,this.errorHandler=null,this.progressCallback=null,this.successCodes=[200],this.additionalRetryCodes=[]}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function tv(r){if(!r)throw of()}function _A(r,e){function t(n,s){const i=Zb(r,s,e);return tv(i!==null),i}return t}function TA(r,e){function t(n,s){const i=Zb(r,s,e);return tv(i!==null),vA(i,s,r.host,r._protocol)}return t}function rv(r){function e(t,n){let s;return t.getStatus()===401?t.getErrorText().includes("Firebase App Check token is invalid")?s=OI():s=DI():t.getStatus()===402?s=MI(r.bucket):t.getStatus()===403?s=LI(r.path):s=n,s.status=t.getStatus(),s.serverResponse=n.serverResponse,s}return e}function EA(r){const e=rv(r);function t(n,s){let i=e(n,s);return n.getStatus()===404&&(i=PI(r.path)),i.serverResponse=s.serverResponse,i}return t}function NA(r,e,t){const n=e.fullServerUrl(),s=cf(n,r.host,r._protocol),i="GET",a=r.maxOperationRetryTime,l=new ev(s,i,TA(r,t),a);return l.errorHandler=EA(e),l}function CA(r,e){return r&&r.contentType||e&&e.type()||"application/octet-stream"}function kA(r,e,t){const n=Object.assign({},t);return n.fullPath=r.path,n.size=e.size(),n.contentType||(n.contentType=CA(null,e)),n}function SA(r,e,t,n,s){const i=e.bucketOnlyServerUrl(),a={"X-Goog-Upload-Protocol":"multipart"};function l(){let N="";for(let P=0;P<2;P++)N=N+Math.random().toString().slice(2);return N}const u=l();a["Content-Type"]="multipart/related; boundary="+u;const d=kA(e,n,s),h=wA(d,t),m="--"+u+`\r
Content-Type: application/json; charset=utf-8\r
\r
`+h+`\r
--`+u+`\r
Content-Type: `+d.contentType+`\r
\r
`,g=`\r
--`+u+"--",x=cn.getBlob(m,n,g);if(x===null)throw zI();const S={name:d.fullPath},b=cf(i,r.host,r._protocol),v="POST",E=r.maxUploadRetryTime,T=new ev(b,v,_A(r,t),E);return T.urlParams=S,T.headers=a,T.body=x.uploadData(),T.errorHandler=rv(e),T}class jA{constructor(){this.sent_=!1,this.xhr_=new XMLHttpRequest,this.initXhr(),this.errorCode_=ps.NO_ERROR,this.sendPromise_=new Promise(e=>{this.xhr_.addEventListener("abort",()=>{this.errorCode_=ps.ABORT,e()}),this.xhr_.addEventListener("error",()=>{this.errorCode_=ps.NETWORK_ERROR,e()}),this.xhr_.addEventListener("load",()=>{e()})})}send(e,t,n,s,i){if(this.sent_)throw ci("cannot .send() more than once");if(Bn(e)&&n&&(this.xhr_.withCredentials=!0),this.sent_=!0,this.xhr_.open(t,e,!0),i!==void 0)for(const a in i)i.hasOwnProperty(a)&&this.xhr_.setRequestHeader(a,i[a].toString());return s!==void 0?this.xhr_.send(s):this.xhr_.send(),this.sendPromise_}getErrorCode(){if(!this.sent_)throw ci("cannot .getErrorCode() before sending");return this.errorCode_}getStatus(){if(!this.sent_)throw ci("cannot .getStatus() before sending");try{return this.xhr_.status}catch{return-1}}getResponse(){if(!this.sent_)throw ci("cannot .getResponse() before sending");return this.xhr_.response}getErrorText(){if(!this.sent_)throw ci("cannot .getErrorText() before sending");return this.xhr_.statusText}abort(){this.xhr_.abort()}getResponseHeader(e){return this.xhr_.getResponseHeader(e)}addUploadProgressListener(e){this.xhr_.upload!=null&&this.xhr_.upload.addEventListener("progress",e)}removeUploadProgressListener(e){this.xhr_.upload!=null&&this.xhr_.upload.removeEventListener("progress",e)}}class IA extends jA{initXhr(){this.xhr_.responseType="text"}}function nv(){return new IA}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _s{constructor(e,t){this._service=e,t instanceof Bt?this._location=t:this._location=Bt.makeFromUrl(t,e.host)}toString(){return"gs://"+this._location.bucket+"/"+this._location.path}_newRef(e,t){return new _s(e,t)}get root(){const e=new Bt(this._location.bucket,"");return this._newRef(this._service,e)}get bucket(){return this._location.bucket}get fullPath(){return this._location.path}get name(){return Xb(this._location.path)}get storage(){return this._service}get parent(){const e=mA(this._location.path);if(e===null)return null;const t=new Bt(this._location.bucket,e);return new _s(this._service,t)}_throwIfRoot(e){if(this._location.path==="")throw WI(e)}}function AA(r,e,t){r._throwIfRoot("uploadBytes");const n=SA(r.storage,r._location,Jb(),new cn(e,!0),t);return r.storage.makeRequestWithTokens(n,nv).then(s=>({metadata:s,ref:r}))}function RA(r){r._throwIfRoot("getDownloadURL");const e=NA(r.storage,r._location,Jb());return r.storage.makeRequestWithTokens(e,nv).then(t=>{if(t===null)throw qI();return t})}function PA(r,e){const t=pA(r._location.path,e),n=new Bt(r._location.bucket,t);return new _s(r.storage,n)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function MA(r){return/^[A-Za-z]+:\/\//.test(r)}function DA(r,e){return new _s(r,e)}function sv(r,e){if(r instanceof uf){const t=r;if(t._bucket==null)throw BI();const n=new _s(t,t._bucket);return e!=null?sv(n,e):n}else return e!==void 0?PA(r,e):r}function OA(r,e){if(e&&MA(e)){if(r instanceof uf)return DA(r,e);throw wd("To use ref(service, url), the first argument must be a Storage instance.")}else return sv(r,e)}function Sg(r,e){const t=e==null?void 0:e[qb];return t==null?null:Bt.makeFromBucketSpec(t,r)}function LA(r,e,t,n={}){r.host=`${e}:${t}`;const s=Bn(e);s&&(dh(`https://${r.host}/b`),hh("Storage",!0)),r._isUsingEmulator=!0,r._protocol=s?"https":"http";const{mockUserToken:i}=n;i&&(r._overrideAuthToken=typeof i=="string"?i:Tx(i,r.app.options.projectId))}class uf{constructor(e,t,n,s,i,a=!1){this.app=e,this._authProvider=t,this._appCheckProvider=n,this._url=s,this._firebaseVersion=i,this._isUsingEmulator=a,this._bucket=null,this._host=zb,this._protocol="https",this._appId=null,this._deleted=!1,this._maxOperationRetryTime=AI,this._maxUploadRetryTime=RI,this._requests=new Set,s!=null?this._bucket=Bt.makeFromBucketSpec(s,this._host):this._bucket=Sg(this._host,this.app.options)}get host(){return this._host}set host(e){this._host=e,this._url!=null?this._bucket=Bt.makeFromBucketSpec(this._url,e):this._bucket=Sg(e,this.app.options)}get maxUploadRetryTime(){return this._maxUploadRetryTime}set maxUploadRetryTime(e){kg("time",0,Number.POSITIVE_INFINITY,e),this._maxUploadRetryTime=e}get maxOperationRetryTime(){return this._maxOperationRetryTime}set maxOperationRetryTime(e){kg("time",0,Number.POSITIVE_INFINITY,e),this._maxOperationRetryTime=e}async _getAuthToken(){if(this._overrideAuthToken)return this._overrideAuthToken;const e=this._authProvider.getImmediate({optional:!0});if(e){const t=await e.getToken();if(t!==null)return t.accessToken}return null}async _getAppCheckToken(){if(Pt(this.app)&&this.app.settings.appCheckToken)return this.app.settings.appCheckToken;const e=this._appCheckProvider.getImmediate({optional:!0});return e?(await e.getToken()).token:null}_delete(){return this._deleted||(this._deleted=!0,this._requests.forEach(e=>e.cancel()),this._requests.clear()),Promise.resolve()}_makeStorageReference(e){return new _s(this,e)}_makeRequest(e,t,n,s,i=!0){if(this._deleted)return new GI(Hb());{const a=sA(e,this._appId,n,s,t,this._firebaseVersion,i,this._isUsingEmulator);return this._requests.add(a),a.getPromise().then(()=>this._requests.delete(a),()=>this._requests.delete(a)),a}}async makeRequestWithTokens(e,t){const[n,s]=await Promise.all([this._getAuthToken(),this._getAppCheckToken()]);return this._makeRequest(e,t,n,s).getPromise()}}const jg="@firebase/storage",Ig="0.13.14";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ov="storage";function VA(r,e,t){return r=Me(r),AA(r,e,t)}function FA(r){return r=Me(r),RA(r)}function UA(r,e){return r=Me(r),OA(r,e)}function $A(r=sc(),e){r=Me(r);const n=js(r,ov).getImmediate({identifier:e}),s=vx("storage");return s&&BA(n,...s),n}function BA(r,e,t,n={}){LA(r,e,t,n)}function zA(r,{instanceIdentifier:e}){const t=r.getProvider("app").getImmediate(),n=r.getProvider("auth-internal"),s=r.getProvider("app-check-internal");return new uf(t,n,s,e,Is)}function qA(){Nr(new lr(ov,zA,"PUBLIC").setMultipleInstances(!0)),Ot(jg,Ig,""),Ot(jg,Ig,"esm2017")}qA();var _d,Ag,Cc=function(){var r=self.performance&&performance.getEntriesByType&&performance.getEntriesByType("navigation")[0];if(r&&r.responseStart>0&&r.responseStart<performance.now())return r},iv=function(r){if(document.readyState==="loading")return"loading";var e=Cc();if(e){if(r<e.domInteractive)return"loading";if(e.domContentLoadedEventStart===0||r<e.domContentLoadedEventStart)return"dom-interactive";if(e.domComplete===0||r<e.domComplete)return"dom-content-loaded"}return"complete"},HA=function(r){var e=r.nodeName;return r.nodeType===1?e.toLowerCase():e.toUpperCase().replace(/^#/,"")},df=function(r,e){var t="";try{for(;r&&r.nodeType!==9;){var n=r,s=n.id?"#"+n.id:HA(n)+(n.classList&&n.classList.value&&n.classList.value.trim()&&n.classList.value.trim().length?"."+n.classList.value.trim().replace(/\s+/g,"."):"");if(t.length+s.length>(e||100)-1)return t||s;if(t=t?s+">"+t:s,n.id)break;r=n.parentNode}}catch{}return t},av=-1,WA=function(){return av},da=function(r){addEventListener("pageshow",function(e){e.persisted&&(av=e.timeStamp,r(e))},!0)},hf=function(){var r=Cc();return r&&r.activationStart||0},Ln=function(r,e){var t=Cc(),n="navigate";return WA()>=0?n="back-forward-cache":t&&(document.prerendering||hf()>0?n="prerender":document.wasDiscarded?n="restore":t.type&&(n=t.type.replace(/_/g,"-"))),{name:r,value:e===void 0?-1:e,rating:"good",delta:0,entries:[],id:"v4-".concat(Date.now(),"-").concat(Math.floor(8999999999999*Math.random())+1e12),navigationType:n}},$o=function(r,e,t){try{if(PerformanceObserver.supportedEntryTypes.includes(r)){var n=new PerformanceObserver(function(s){Promise.resolve().then(function(){e(s.getEntries())})});return n.observe(Object.assign({type:r,buffered:!0},t||{})),n}}catch{}},Vn=function(r,e,t,n){var s,i;return function(a){e.value>=0&&(a||n)&&((i=e.value-(s||0))||s===void 0)&&(s=e.value,e.delta=i,e.rating=function(l,u){return l>u[1]?"poor":l>u[0]?"needs-improvement":"good"}(e.value,t),r(e))}},ff=function(r){requestAnimationFrame(function(){return requestAnimationFrame(function(){return r()})})},kc=function(r){document.addEventListener("visibilitychange",function(){document.visibilityState==="hidden"&&r()})},mf=function(r){var e=!1;return function(){e||(r(),e=!0)}},Hs=-1,Rg=function(){return document.visibilityState!=="hidden"||document.prerendering?1/0:0},Fl=function(r){document.visibilityState==="hidden"&&Hs>-1&&(Hs=r.type==="visibilitychange"?r.timeStamp:0,GA())},Pg=function(){addEventListener("visibilitychange",Fl,!0),addEventListener("prerenderingchange",Fl,!0)},GA=function(){removeEventListener("visibilitychange",Fl,!0),removeEventListener("prerenderingchange",Fl,!0)},lv=function(){return Hs<0&&(Hs=Rg(),Pg(),da(function(){setTimeout(function(){Hs=Rg(),Pg()},0)})),{get firstHiddenTime(){return Hs}}},pf=function(r){document.prerendering?addEventListener("prerenderingchange",function(){return r()},!0):r()},Mg=[1800,3e3],KA=function(r,e){e=e||{},pf(function(){var t,n=lv(),s=Ln("FCP"),i=$o("paint",function(a){a.forEach(function(l){l.name==="first-contentful-paint"&&(i.disconnect(),l.startTime<n.firstHiddenTime&&(s.value=Math.max(l.startTime-hf(),0),s.entries.push(l),t(!0)))})});i&&(t=Vn(r,s,Mg,e.reportAllChanges),da(function(a){s=Ln("FCP"),t=Vn(r,s,Mg,e.reportAllChanges),ff(function(){s.value=performance.now()-a.timeStamp,t(!0)})}))})},Dg=[.1,.25],QA=function(r,e){(function(t,n){n=n||{},KA(mf(function(){var s,i=Ln("CLS",0),a=0,l=[],u=function(h){h.forEach(function(m){if(!m.hadRecentInput){var g=l[0],x=l[l.length-1];a&&m.startTime-x.startTime<1e3&&m.startTime-g.startTime<5e3?(a+=m.value,l.push(m)):(a=m.value,l=[m])}}),a>i.value&&(i.value=a,i.entries=l,s())},d=$o("layout-shift",u);d&&(s=Vn(t,i,Dg,n.reportAllChanges),kc(function(){u(d.takeRecords()),s(!0)}),da(function(){a=0,i=Ln("CLS",0),s=Vn(t,i,Dg,n.reportAllChanges),ff(function(){return s()})}),setTimeout(s,0))}))})(function(t){var n=function(s){var i,a={};if(s.entries.length){var l=s.entries.reduce(function(d,h){return d&&d.value>h.value?d:h});if(l&&l.sources&&l.sources.length){var u=(i=l.sources).find(function(d){return d.node&&d.node.nodeType===1})||i[0];u&&(a={largestShiftTarget:df(u.node),largestShiftTime:l.startTime,largestShiftValue:l.value,largestShiftSource:u,largestShiftEntry:l,loadState:iv(l.startTime)})}}return Object.assign(s,{attribution:a})}(t);r(n)},e)},cv=0,Su=1/0,Ha=0,YA=function(r){r.forEach(function(e){e.interactionId&&(Su=Math.min(Su,e.interactionId),Ha=Math.max(Ha,e.interactionId),cv=Ha?(Ha-Su)/7+1:0)})},uv=function(){return _d?cv:performance.interactionCount||0},XA=function(){"interactionCount"in performance||_d||(_d=$o("event",YA,{type:"event",buffered:!0,durationThreshold:0}))},sr=[],Si=new Map,dv=0,JA=function(){var r=Math.min(sr.length-1,Math.floor((uv()-dv)/50));return sr[r]},hv=[],ZA=function(r){if(hv.forEach(function(s){return s(r)}),r.interactionId||r.entryType==="first-input"){var e=sr[sr.length-1],t=Si.get(r.interactionId);if(t||sr.length<10||r.duration>e.latency){if(t)r.duration>t.latency?(t.entries=[r],t.latency=r.duration):r.duration===t.latency&&r.startTime===t.entries[0].startTime&&t.entries.push(r);else{var n={id:r.interactionId,latency:r.duration,entries:[r]};Si.set(n.id,n),sr.push(n)}sr.sort(function(s,i){return i.latency-s.latency}),sr.length>10&&sr.splice(10).forEach(function(s){return Si.delete(s.id)})}}},gf=function(r){var e=self.requestIdleCallback||self.setTimeout,t=-1;return r=mf(r),document.visibilityState==="hidden"?r():(t=e(r),kc(r)),t},Og=[200,500],eR=function(r,e){"PerformanceEventTiming"in self&&"interactionId"in PerformanceEventTiming.prototype&&(e=e||{},pf(function(){var t;XA();var n,s=Ln("INP"),i=function(l){gf(function(){l.forEach(ZA);var u=JA();u&&u.latency!==s.value&&(s.value=u.latency,s.entries=u.entries,n())})},a=$o("event",i,{durationThreshold:(t=e.durationThreshold)!==null&&t!==void 0?t:40});n=Vn(r,s,Og,e.reportAllChanges),a&&(a.observe({type:"first-input",buffered:!0}),kc(function(){i(a.takeRecords()),n(!0)}),da(function(){dv=uv(),sr.length=0,Si.clear(),s=Ln("INP"),n=Vn(r,s,Og,e.reportAllChanges)}))}))},oo=[],un=[],Td=0,yf=new WeakMap,io=new Map,Ed=-1,tR=function(r){oo=oo.concat(r),fv()},fv=function(){Ed<0&&(Ed=gf(rR))},rR=function(){io.size>10&&io.forEach(function(a,l){Si.has(l)||io.delete(l)});var r=sr.map(function(a){return yf.get(a.entries[0])}),e=un.length-50;un=un.filter(function(a,l){return l>=e||r.includes(a)});for(var t=new Set,n=0;n<un.length;n++){var s=un[n];mv(s.startTime,s.processingEnd).forEach(function(a){t.add(a)})}var i=oo.length-1-50;oo=oo.filter(function(a,l){return a.startTime>Td&&l>i||t.has(a)}),Ed=-1};hv.push(function(r){r.interactionId&&r.target&&!io.has(r.interactionId)&&io.set(r.interactionId,r.target)},function(r){var e,t=r.startTime+r.duration;Td=Math.max(Td,r.processingEnd);for(var n=un.length-1;n>=0;n--){var s=un[n];if(Math.abs(t-s.renderTime)<=8){(e=s).startTime=Math.min(r.startTime,e.startTime),e.processingStart=Math.min(r.processingStart,e.processingStart),e.processingEnd=Math.max(r.processingEnd,e.processingEnd),e.entries.push(r);break}}e||(e={startTime:r.startTime,processingStart:r.processingStart,processingEnd:r.processingEnd,renderTime:t,entries:[r]},un.push(e)),(r.interactionId||r.entryType==="first-input")&&yf.set(r,e),fv()});var mv=function(r,e){for(var t,n=[],s=0;t=oo[s];s++)if(!(t.startTime+t.duration<r)){if(t.startTime>e)break;n.push(t)}return n},nR=function(r,e){Ag||(Ag=$o("long-animation-frame",tR)),eR(function(t){var n=function(s){var i=s.entries[0],a=yf.get(i),l=i.processingStart,u=a.processingEnd,d=a.entries.sort(function(v,E){return v.processingStart-E.processingStart}),h=mv(i.startTime,u),m=s.entries.find(function(v){return v.target}),g=m&&m.target||io.get(i.interactionId),x=[i.startTime+i.duration,u].concat(h.map(function(v){return v.startTime+v.duration})),S=Math.max.apply(Math,x),b={interactionTarget:df(g),interactionTargetElement:g,interactionType:i.name.startsWith("key")?"keyboard":"pointer",interactionTime:i.startTime,nextPaintTime:S,processedEventEntries:d,longAnimationFrameEntries:h,inputDelay:l-i.startTime,processingDuration:u-l,presentationDelay:Math.max(S-u,0),loadState:iv(i.startTime)};return Object.assign(s,{attribution:b})}(t);r(n)},e)},Lg=[2500,4e3],ju={},sR=function(r,e){(function(t,n){n=n||{},pf(function(){var s,i=lv(),a=Ln("LCP"),l=function(h){n.reportAllChanges||(h=h.slice(-1)),h.forEach(function(m){m.startTime<i.firstHiddenTime&&(a.value=Math.max(m.startTime-hf(),0),a.entries=[m],s())})},u=$o("largest-contentful-paint",l);if(u){s=Vn(t,a,Lg,n.reportAllChanges);var d=mf(function(){ju[a.id]||(l(u.takeRecords()),u.disconnect(),ju[a.id]=!0,s(!0))});["keydown","click"].forEach(function(h){addEventListener(h,function(){return gf(d)},{once:!0,capture:!0})}),kc(d),da(function(h){a=Ln("LCP"),s=Vn(t,a,Lg,n.reportAllChanges),ff(function(){a.value=performance.now()-h.timeStamp,ju[a.id]=!0,s(!0)})})}})})(function(t){var n=function(s){var i={timeToFirstByte:0,resourceLoadDelay:0,resourceLoadDuration:0,elementRenderDelay:s.value};if(s.entries.length){var a=Cc();if(a){var l=a.activationStart||0,u=s.entries[s.entries.length-1],d=u.url&&performance.getEntriesByType("resource").filter(function(S){return S.name===u.url})[0],h=Math.max(0,a.responseStart-l),m=Math.max(h,d?(d.requestStart||d.startTime)-l:0),g=Math.max(m,d?d.responseEnd-l:0),x=Math.max(g,u.startTime-l);i={element:df(u.element),timeToFirstByte:h,resourceLoadDelay:m-h,resourceLoadDuration:g-m,elementRenderDelay:x-g,navigationEntry:a,lcpEntry:u},u.url&&(i.url=u.url),d&&(i.lcpResourceEntry=d)}}return Object.assign(s,{attribution:i})}(t);r(n)},e)};const pv="@firebase/installations",xf="0.6.18";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const gv=1e4,yv=`w:${xf}`,xv="FIS_v2",oR="https://firebaseinstallations.googleapis.com/v1",iR=3600*1e3,aR="installations",lR="Installations";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const cR={"missing-app-config-values":'Missing App configuration value: "{$valueName}"',"not-registered":"Firebase Installation is not registered.","installation-not-found":"Firebase Installation not found.","request-failed":'{$requestName} request failed with error "{$serverCode} {$serverStatus}: {$serverMessage}"',"app-offline":"Could not process request. Application offline.","delete-pending-registration":"Can't delete installation while there is a pending registration request."},Ts=new Ss(aR,lR,cR);function bv(r){return r instanceof hr&&r.code.includes("request-failed")}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function vv({projectId:r}){return`${oR}/projects/${r}/installations`}function wv(r){return{token:r.token,requestStatus:2,expiresIn:dR(r.expiresIn),creationTime:Date.now()}}async function _v(r,e){const n=(await e.json()).error;return Ts.create("request-failed",{requestName:r,serverCode:n.code,serverMessage:n.message,serverStatus:n.status})}function Tv({apiKey:r}){return new Headers({"Content-Type":"application/json",Accept:"application/json","x-goog-api-key":r})}function uR(r,{refreshToken:e}){const t=Tv(r);return t.append("Authorization",hR(e)),t}async function Ev(r){const e=await r();return e.status>=500&&e.status<600?r():e}function dR(r){return Number(r.replace("s","000"))}function hR(r){return`${xv} ${r}`}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function fR({appConfig:r,heartbeatServiceProvider:e},{fid:t}){const n=vv(r),s=Tv(r),i=e.getImmediate({optional:!0});if(i){const d=await i.getHeartbeatsHeader();d&&s.append("x-firebase-client",d)}const a={fid:t,authVersion:xv,appId:r.appId,sdkVersion:yv},l={method:"POST",headers:s,body:JSON.stringify(a)},u=await Ev(()=>fetch(n,l));if(u.ok){const d=await u.json();return{fid:d.fid||t,registrationStatus:2,refreshToken:d.refreshToken,authToken:wv(d.authToken)}}else throw await _v("Create Installation",u)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Nv(r){return new Promise(e=>{setTimeout(e,r)})}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function mR(r){return btoa(String.fromCharCode(...r)).replace(/\+/g,"-").replace(/\//g,"_")}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const pR=/^[cdef][\w-]{21}$/,Nd="";function gR(){try{const r=new Uint8Array(17);(self.crypto||self.msCrypto).getRandomValues(r),r[0]=112+r[0]%16;const t=yR(r);return pR.test(t)?t:Nd}catch{return Nd}}function yR(r){return mR(r).substr(0,22)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Sc(r){return`${r.appName}!${r.appId}`}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Cv=new Map;function kv(r,e){const t=Sc(r);Sv(t,e),xR(t,e)}function Sv(r,e){const t=Cv.get(r);if(t)for(const n of t)n(e)}function xR(r,e){const t=bR();t&&t.postMessage({key:r,fid:e}),vR()}let ss=null;function bR(){return!ss&&"BroadcastChannel"in self&&(ss=new BroadcastChannel("[Firebase] FID Change"),ss.onmessage=r=>{Sv(r.data.key,r.data.fid)}),ss}function vR(){Cv.size===0&&ss&&(ss.close(),ss=null)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const wR="firebase-installations-database",_R=1,Es="firebase-installations-store";let Iu=null;function bf(){return Iu||(Iu=Sx(wR,_R,{upgrade:(r,e)=>{switch(e){case 0:r.createObjectStore(Es)}}})),Iu}async function Ul(r,e){const t=Sc(r),s=(await bf()).transaction(Es,"readwrite"),i=s.objectStore(Es),a=await i.get(t);return await i.put(e,t),await s.done,(!a||a.fid!==e.fid)&&kv(r,e.fid),e}async function jv(r){const e=Sc(r),n=(await bf()).transaction(Es,"readwrite");await n.objectStore(Es).delete(e),await n.done}async function jc(r,e){const t=Sc(r),s=(await bf()).transaction(Es,"readwrite"),i=s.objectStore(Es),a=await i.get(t),l=e(a);return l===void 0?await i.delete(t):await i.put(l,t),await s.done,l&&(!a||a.fid!==l.fid)&&kv(r,l.fid),l}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function vf(r){let e;const t=await jc(r.appConfig,n=>{const s=TR(n),i=ER(r,s);return e=i.registrationPromise,i.installationEntry});return t.fid===Nd?{installationEntry:await e}:{installationEntry:t,registrationPromise:e}}function TR(r){const e=r||{fid:gR(),registrationStatus:0};return Iv(e)}function ER(r,e){if(e.registrationStatus===0){if(!navigator.onLine){const s=Promise.reject(Ts.create("app-offline"));return{installationEntry:e,registrationPromise:s}}const t={fid:e.fid,registrationStatus:1,registrationTime:Date.now()},n=NR(r,t);return{installationEntry:t,registrationPromise:n}}else return e.registrationStatus===1?{installationEntry:e,registrationPromise:CR(r)}:{installationEntry:e}}async function NR(r,e){try{const t=await fR(r,e);return Ul(r.appConfig,t)}catch(t){throw bv(t)&&t.customData.serverCode===409?await jv(r.appConfig):await Ul(r.appConfig,{fid:e.fid,registrationStatus:0}),t}}async function CR(r){let e=await Vg(r.appConfig);for(;e.registrationStatus===1;)await Nv(100),e=await Vg(r.appConfig);if(e.registrationStatus===0){const{installationEntry:t,registrationPromise:n}=await vf(r);return n||t}return e}function Vg(r){return jc(r,e=>{if(!e)throw Ts.create("installation-not-found");return Iv(e)})}function Iv(r){return kR(r)?{fid:r.fid,registrationStatus:0}:r}function kR(r){return r.registrationStatus===1&&r.registrationTime+gv<Date.now()}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function SR({appConfig:r,heartbeatServiceProvider:e},t){const n=jR(r,t),s=uR(r,t),i=e.getImmediate({optional:!0});if(i){const d=await i.getHeartbeatsHeader();d&&s.append("x-firebase-client",d)}const a={installation:{sdkVersion:yv,appId:r.appId}},l={method:"POST",headers:s,body:JSON.stringify(a)},u=await Ev(()=>fetch(n,l));if(u.ok){const d=await u.json();return wv(d)}else throw await _v("Generate Auth Token",u)}function jR(r,{fid:e}){return`${vv(r)}/${e}/authTokens:generate`}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function wf(r,e=!1){let t;const n=await jc(r.appConfig,i=>{if(!Av(i))throw Ts.create("not-registered");const a=i.authToken;if(!e&&RR(a))return i;if(a.requestStatus===1)return t=IR(r,e),i;{if(!navigator.onLine)throw Ts.create("app-offline");const l=MR(i);return t=AR(r,l),l}});return t?await t:n.authToken}async function IR(r,e){let t=await Fg(r.appConfig);for(;t.authToken.requestStatus===1;)await Nv(100),t=await Fg(r.appConfig);const n=t.authToken;return n.requestStatus===0?wf(r,e):n}function Fg(r){return jc(r,e=>{if(!Av(e))throw Ts.create("not-registered");const t=e.authToken;return DR(t)?Object.assign(Object.assign({},e),{authToken:{requestStatus:0}}):e})}async function AR(r,e){try{const t=await SR(r,e),n=Object.assign(Object.assign({},e),{authToken:t});return await Ul(r.appConfig,n),t}catch(t){if(bv(t)&&(t.customData.serverCode===401||t.customData.serverCode===404))await jv(r.appConfig);else{const n=Object.assign(Object.assign({},e),{authToken:{requestStatus:0}});await Ul(r.appConfig,n)}throw t}}function Av(r){return r!==void 0&&r.registrationStatus===2}function RR(r){return r.requestStatus===2&&!PR(r)}function PR(r){const e=Date.now();return e<r.creationTime||r.creationTime+r.expiresIn<e+iR}function MR(r){const e={requestStatus:1,requestTime:Date.now()};return Object.assign(Object.assign({},r),{authToken:e})}function DR(r){return r.requestStatus===1&&r.requestTime+gv<Date.now()}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function OR(r){const e=r,{installationEntry:t,registrationPromise:n}=await vf(e);return n?n.catch(console.error):wf(e).catch(console.error),t.fid}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function LR(r,e=!1){const t=r;return await VR(t),(await wf(t,e)).token}async function VR(r){const{registrationPromise:e}=await vf(r);e&&await e}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function FR(r){if(!r||!r.options)throw Au("App Configuration");if(!r.name)throw Au("App Name");const e=["projectId","apiKey","appId"];for(const t of e)if(!r.options[t])throw Au(t);return{appName:r.name,projectId:r.options.projectId,apiKey:r.options.apiKey,appId:r.options.appId}}function Au(r){return Ts.create("missing-app-config-values",{valueName:r})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Rv="installations",UR="installations-internal",$R=r=>{const e=r.getProvider("app").getImmediate(),t=FR(e),n=js(e,"heartbeat");return{app:e,appConfig:t,heartbeatServiceProvider:n,_delete:()=>Promise.resolve()}},BR=r=>{const e=r.getProvider("app").getImmediate(),t=js(e,Rv).getImmediate();return{getId:()=>OR(t),getToken:s=>LR(t,s)}};function zR(){Nr(new lr(Rv,$R,"PUBLIC")),Nr(new lr(UR,BR,"PRIVATE"))}zR();Ot(pv,xf);Ot(pv,xf,"esm2017");const Ug="@firebase/performance",Cd="0.7.7";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Pv=Cd,qR="FB-PERF-TRACE-START",HR="FB-PERF-TRACE-STOP",kd="FB-PERF-TRACE-MEASURE",Mv="_wt_",Dv="_fp",Ov="_fcp",Lv="_fid",Vv="_lcp",WR="lcp_element",Fv="_inp",GR="inp_interactionTarget",Uv="_cls",KR="cls_largestShiftTarget",$v="@firebase/performance/config",Bv="@firebase/performance/configexpire",QR="performance",zv="Performance";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const YR={"trace started":"Trace {$traceName} was started before.","trace stopped":"Trace {$traceName} is not running.","nonpositive trace startTime":"Trace {$traceName} startTime should be positive.","nonpositive trace duration":"Trace {$traceName} duration should be positive.","no window":"Window is not available.","no app id":"App id is not available.","no project id":"Project id is not available.","no api key":"Api key is not available.","invalid cc log":"Attempted to queue invalid cc event","FB not default":"Performance can only start when Firebase app instance is the default one.","RC response not ok":"RC response is not ok","invalid attribute name":"Attribute name {$attributeName} is invalid.","invalid attribute value":"Attribute value {$attributeValue} is invalid.","invalid custom metric name":"Custom metric name {$customMetricName} is invalid","invalid String merger input":"Input for String merger is invalid, contact support team to resolve.","already initialized":"initializePerformance() has already been called with different options. To avoid this error, call initializePerformance() with the same options as when it was originally called, or call getPerformance() to return the already initialized instance."},bt=new Ss(QR,zv,YR);/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Fn=new nc(zv);Fn.logLevel=be.INFO;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Ru,qv;class ot{constructor(e){if(this.window=e,!e)throw bt.create("no window");this.performance=e.performance,this.PerformanceObserver=e.PerformanceObserver,this.windowLocation=e.location,this.navigator=e.navigator,this.document=e.document,this.navigator&&this.navigator.cookieEnabled&&(this.localStorage=e.localStorage),e.perfMetrics&&e.perfMetrics.onFirstInputDelay&&(this.onFirstInputDelay=e.perfMetrics.onFirstInputDelay),this.onLCP=sR,this.onINP=nR,this.onCLS=QA}getUrl(){return this.windowLocation.href.split("?")[0]}mark(e){!this.performance||!this.performance.mark||this.performance.mark(e)}measure(e,t,n){!this.performance||!this.performance.measure||this.performance.measure(e,t,n)}getEntriesByType(e){return!this.performance||!this.performance.getEntriesByType?[]:this.performance.getEntriesByType(e)}getEntriesByName(e){return!this.performance||!this.performance.getEntriesByName?[]:this.performance.getEntriesByName(e)}getTimeOrigin(){return this.performance&&(this.performance.timeOrigin||this.performance.timing.navigationStart)}requiredApisAvailable(){return!fetch||!Promise||!VE()?(Fn.info("Firebase Performance cannot start if browser does not support fetch and Promise or cookie is disabled."),!1):Ex()?!0:(Fn.info("IndexedDB is not supported by current browser"),!1)}setupObserver(e,t){if(!this.PerformanceObserver)return;new this.PerformanceObserver(s=>{for(const i of s.getEntries())t(i)}).observe({entryTypes:[e]})}static getInstance(){return Ru===void 0&&(Ru=new ot(qv)),Ru}}function XR(r){qv=r}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Hv;function JR(r){const e=r.getId();return e.then(t=>{Hv=t}),e}function _f(){return Hv}function ZR(r){const e=r.getToken();return e.then(t=>{}),e}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function $g(r,e){const t=r.length-e.length;if(t<0||t>1)throw bt.create("invalid String merger input");const n=[];for(let s=0;s<r.length;s++)n.push(r.charAt(s)),e.length>s&&n.push(e.charAt(s));return n.join("")}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Pu;class zt{constructor(){this.instrumentationEnabled=!0,this.dataCollectionEnabled=!0,this.loggingEnabled=!1,this.tracesSamplingRate=1,this.networkRequestsSamplingRate=1,this.logEndPointUrl="https://firebaselogging.googleapis.com/v0cc/log?format=json_proto",this.flTransportEndpointUrl=$g("hts/frbslgigp.ogepscmv/ieo/eaylg","tp:/ieaeogn-agolai.o/1frlglgc/o"),this.transportKey=$g("AzSC8r6ReiGqFMyfvgow","Iayx0u-XT3vksVM-pIV"),this.logSource=462,this.logTraceAfterSampling=!1,this.logNetworkAfterSampling=!1,this.configTimeToLive=12}getFlTransportFullUrl(){return this.flTransportEndpointUrl.concat("?key=",this.transportKey)}static getInstance(){return Pu===void 0&&(Pu=new zt),Pu}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var ji;(function(r){r[r.UNKNOWN=0]="UNKNOWN",r[r.VISIBLE=1]="VISIBLE",r[r.HIDDEN=2]="HIDDEN"})(ji||(ji={}));const eP=["firebase_","google_","ga_"],tP=new RegExp("^[a-zA-Z]\\w*$"),rP=40,nP=100;function sP(){const r=ot.getInstance().navigator;return r!=null&&r.serviceWorker?r.serviceWorker.controller?2:3:1}function oP(){switch(ot.getInstance().document.visibilityState){case"visible":return ji.VISIBLE;case"hidden":return ji.HIDDEN;default:return ji.UNKNOWN}}function iP(){const e=ot.getInstance().navigator.connection;switch(e&&e.effectiveType){case"slow-2g":return 1;case"2g":return 2;case"3g":return 3;case"4g":return 4;default:return 0}}function aP(r){return r.length===0||r.length>rP?!1:!eP.some(t=>r.startsWith(t))&&!!r.match(tP)}function lP(r){return r.length!==0&&r.length<=nP}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Wv(r){var e;const t=(e=r.options)===null||e===void 0?void 0:e.appId;if(!t)throw bt.create("no app id");return t}function cP(r){var e;const t=(e=r.options)===null||e===void 0?void 0:e.projectId;if(!t)throw bt.create("no project id");return t}function uP(r){var e;const t=(e=r.options)===null||e===void 0?void 0:e.apiKey;if(!t)throw bt.create("no api key");return t}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const dP="0.0.1",er={loggingEnabled:!0},hP="FIREBASE_INSTALLATIONS_AUTH";function fP(r,e){const t=mP();return t?(Bg(t),Promise.resolve()):yP(r,e).then(Bg).then(n=>pP(n),()=>{})}function mP(){const r=ot.getInstance().localStorage;if(!r)return;const e=r.getItem(Bv);if(!e||!xP(e))return;const t=r.getItem($v);if(t)try{return JSON.parse(t)}catch{return}}function pP(r){const e=ot.getInstance().localStorage;!r||!e||(e.setItem($v,JSON.stringify(r)),e.setItem(Bv,String(Date.now()+zt.getInstance().configTimeToLive*60*60*1e3)))}const gP="Could not fetch config, will use default configs";function yP(r,e){return ZR(r.installations).then(t=>{const n=cP(r.app),s=uP(r.app),i=`https://firebaseremoteconfig.googleapis.com/v1/projects/${n}/namespaces/fireperf:fetch?key=${s}`,a=new Request(i,{method:"POST",headers:{Authorization:`${hP} ${t}`},body:JSON.stringify({app_instance_id:e,app_instance_id_token:t,app_id:Wv(r.app),app_version:Pv,sdk_version:dP})});return fetch(a).then(l=>{if(l.ok)return l.json();throw bt.create("RC response not ok")})}).catch(()=>{Fn.info(gP)})}function Bg(r){if(!r)return r;const e=zt.getInstance(),t=r.entries||{};return t.fpr_enabled!==void 0?e.loggingEnabled=String(t.fpr_enabled)==="true":e.loggingEnabled=er.loggingEnabled,t.fpr_log_source?e.logSource=Number(t.fpr_log_source):er.logSource&&(e.logSource=er.logSource),t.fpr_log_endpoint_url?e.logEndPointUrl=t.fpr_log_endpoint_url:er.logEndPointUrl&&(e.logEndPointUrl=er.logEndPointUrl),t.fpr_log_transport_key?e.transportKey=t.fpr_log_transport_key:er.transportKey&&(e.transportKey=er.transportKey),t.fpr_vc_network_request_sampling_rate!==void 0?e.networkRequestsSamplingRate=Number(t.fpr_vc_network_request_sampling_rate):er.networkRequestsSamplingRate!==void 0&&(e.networkRequestsSamplingRate=er.networkRequestsSamplingRate),t.fpr_vc_trace_sampling_rate!==void 0?e.tracesSamplingRate=Number(t.fpr_vc_trace_sampling_rate):er.tracesSamplingRate!==void 0&&(e.tracesSamplingRate=er.tracesSamplingRate),e.logTraceAfterSampling=zg(e.tracesSamplingRate),e.logNetworkAfterSampling=zg(e.networkRequestsSamplingRate),r}function xP(r){return Number(r)>Date.now()}function zg(r){return Math.random()<=r}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Tf=1,Mu;function Gv(r){return Tf=2,Mu=Mu||vP(r),Mu}function bP(){return Tf===3}function vP(r){return wP().then(()=>JR(r.installations)).then(e=>fP(r,e)).then(()=>qg(),()=>qg())}function wP(){const r=ot.getInstance().document;return new Promise(e=>{if(r&&r.readyState!=="complete"){const t=()=>{r.readyState==="complete"&&(r.removeEventListener("readystatechange",t),e())};r.addEventListener("readystatechange",t)}else e()})}function qg(){Tf=3}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Kv=10*1e3,_P=5.5*1e3,TP=1e3,Qv=3;let il=Qv,gs=[],Hg=!1;function EP(){Hg||(Ef(_P),Hg=!0)}function Ef(r){setTimeout(()=>{il<=0||(gs.length>0&&Yv(),Ef(Kv))},r)}function Yv(){const r=gs.splice(0,TP),e=r.map(n=>({source_extension_json_proto3:n.message,event_time_ms:String(n.eventTime)})),t={request_time_ms:String(Date.now()),client_info:{client_type:1,js_client_info:{}},log_source:zt.getInstance().logSource,log_event:e};NP(t).then(()=>{il=Qv}).catch(()=>{gs=[...r,...gs],il--,Fn.info(`Tries left: ${il}.`),Ef(Kv)})}function NP(r){const e=zt.getInstance().getFlTransportFullUrl(),t=JSON.stringify(r);return navigator.sendBeacon&&navigator.sendBeacon(e,t)?Promise.resolve():fetch(e,{method:"POST",body:t,keepalive:!0}).then()}function CP(r){if(!r.eventTime||!r.message)throw bt.create("invalid cc log");gs=[...gs,r]}function kP(r){return(...e)=>{const t=r(...e);CP({message:t,eventTime:Date.now()})}}function SP(){for(;gs.length>0;)Yv()}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Ii;function Xv(r,e){Ii||(Ii={send:kP(AP),flush:SP}),Ii.send(r,e)}function Wa(r){const e=zt.getInstance();!e.instrumentationEnabled&&r.isAuto||!e.dataCollectionEnabled&&!r.isAuto||ot.getInstance().requiredApisAvailable()&&(bP()?Du(r):Gv(r.performanceController).then(()=>Du(r),()=>Du(r)))}function jP(){Ii&&Ii.flush()}function Du(r){if(!_f())return;const e=zt.getInstance();!e.loggingEnabled||!e.logTraceAfterSampling||Xv(r,1)}function IP(r){const e=zt.getInstance();if(!e.instrumentationEnabled)return;const t=r.url,n=e.logEndPointUrl.split("?")[0],s=e.flTransportEndpointUrl.split("?")[0];t===n||t===s||!e.loggingEnabled||!e.logNetworkAfterSampling||Xv(r,0)}function AP(r,e){return e===0?RP(r):PP(r)}function RP(r){const e={url:r.url,http_method:r.httpMethod||0,http_response_code:200,response_payload_bytes:r.responsePayloadBytes,client_start_time_us:r.startTimeUs,time_to_response_initiated_us:r.timeToResponseInitiatedUs,time_to_response_completed_us:r.timeToResponseCompletedUs},t={application_info:Jv(r.performanceController.app),network_request_metric:e};return JSON.stringify(t)}function PP(r){const e={name:r.name,is_auto:r.isAuto,client_start_time_us:r.startTimeUs,duration_us:r.durationUs};Object.keys(r.counters).length!==0&&(e.counters=r.counters);const t=r.getAttributes();Object.keys(t).length!==0&&(e.custom_attributes=t);const n={application_info:Jv(r.performanceController.app),trace_metric:e};return JSON.stringify(n)}function Jv(r){return{google_app_id:Wv(r),app_instance_id:_f(),web_app_info:{sdk_version:Pv,page_url:ot.getInstance().getUrl(),service_worker_status:sP(),visibility_state:oP(),effective_connection_type:iP()},application_process_state:0}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Wg(r,e){const t=e;if(!t||t.responseStart===void 0)return;const n=ot.getInstance().getTimeOrigin(),s=Math.floor((t.startTime+n)*1e3),i=t.responseStart?Math.floor((t.responseStart-t.startTime)*1e3):void 0,a=Math.floor((t.responseEnd-t.startTime)*1e3),l=t.name&&t.name.split("?")[0],u={performanceController:r,url:l,responsePayloadBytes:t.transferSize,startTimeUs:s,timeToResponseInitiatedUs:i,timeToResponseCompletedUs:a};IP(u)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const MP=100,DP="_",OP=[Dv,Ov,Lv,Vv,Uv,Fv];function LP(r,e){return r.length===0||r.length>MP?!1:e&&e.startsWith(Mv)&&OP.indexOf(r)>-1||!r.startsWith(DP)}function VP(r){const e=Math.floor(r);return e<r&&Fn.info(`Metric value should be an Integer, setting the value as : ${e}.`),e}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Io{constructor(e,t,n=!1,s){this.performanceController=e,this.name=t,this.isAuto=n,this.state=1,this.customAttributes={},this.counters={},this.api=ot.getInstance(),this.randomId=Math.floor(Math.random()*1e6),this.isAuto||(this.traceStartMark=`${qR}-${this.randomId}-${this.name}`,this.traceStopMark=`${HR}-${this.randomId}-${this.name}`,this.traceMeasure=s||`${kd}-${this.randomId}-${this.name}`,s&&this.calculateTraceMetrics())}start(){if(this.state!==1)throw bt.create("trace started",{traceName:this.name});this.api.mark(this.traceStartMark),this.state=2}stop(){if(this.state!==2)throw bt.create("trace stopped",{traceName:this.name});this.state=3,this.api.mark(this.traceStopMark),this.api.measure(this.traceMeasure,this.traceStartMark,this.traceStopMark),this.calculateTraceMetrics(),Wa(this)}record(e,t,n){if(e<=0)throw bt.create("nonpositive trace startTime",{traceName:this.name});if(t<=0)throw bt.create("nonpositive trace duration",{traceName:this.name});if(this.durationUs=Math.floor(t*1e3),this.startTimeUs=Math.floor(e*1e3),n&&n.attributes&&(this.customAttributes=Object.assign({},n.attributes)),n&&n.metrics)for(const s of Object.keys(n.metrics))isNaN(Number(n.metrics[s]))||(this.counters[s]=Math.floor(Number(n.metrics[s])));Wa(this)}incrementMetric(e,t=1){this.counters[e]===void 0?this.putMetric(e,t):this.putMetric(e,this.counters[e]+t)}putMetric(e,t){if(LP(e,this.name))this.counters[e]=VP(t??0);else throw bt.create("invalid custom metric name",{customMetricName:e})}getMetric(e){return this.counters[e]||0}putAttribute(e,t){const n=aP(e),s=lP(t);if(n&&s){this.customAttributes[e]=t;return}if(!n)throw bt.create("invalid attribute name",{attributeName:e});if(!s)throw bt.create("invalid attribute value",{attributeValue:t})}getAttribute(e){return this.customAttributes[e]}removeAttribute(e){this.customAttributes[e]!==void 0&&delete this.customAttributes[e]}getAttributes(){return Object.assign({},this.customAttributes)}setStartTime(e){this.startTimeUs=e}setDuration(e){this.durationUs=e}calculateTraceMetrics(){const e=this.api.getEntriesByName(this.traceMeasure),t=e&&e[0];t&&(this.durationUs=Math.floor(t.duration*1e3),this.startTimeUs=Math.floor((t.startTime+this.api.getTimeOrigin())*1e3))}static createOobTrace(e,t,n,s,i){const a=ot.getInstance().getUrl();if(!a)return;const l=new Io(e,Mv+a,!0),u=Math.floor(ot.getInstance().getTimeOrigin()*1e3);l.setStartTime(u),t&&t[0]&&(l.setDuration(Math.floor(t[0].duration*1e3)),l.putMetric("domInteractive",Math.floor(t[0].domInteractive*1e3)),l.putMetric("domContentLoadedEventEnd",Math.floor(t[0].domContentLoadedEventEnd*1e3)),l.putMetric("loadEventEnd",Math.floor(t[0].loadEventEnd*1e3)));const d="first-paint",h="first-contentful-paint";if(n){const m=n.find(x=>x.name===d);m&&m.startTime&&l.putMetric(Dv,Math.floor(m.startTime*1e3));const g=n.find(x=>x.name===h);g&&g.startTime&&l.putMetric(Ov,Math.floor(g.startTime*1e3)),i&&l.putMetric(Lv,Math.floor(i*1e3))}this.addWebVitalMetric(l,Vv,WR,s.lcp),this.addWebVitalMetric(l,Uv,KR,s.cls),this.addWebVitalMetric(l,Fv,GR,s.inp),Wa(l),jP()}static addWebVitalMetric(e,t,n,s){s&&(e.putMetric(t,Math.floor(s.value*1e3)),s.elementAttribution&&e.putAttribute(n,s.elementAttribution))}static createUserTimingTrace(e,t){const n=new Io(e,t,!1,t);Wa(n)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let al={},Gg=!1,Zv;function Kg(r){_f()&&(setTimeout(()=>UP(r),0),setTimeout(()=>FP(r),0),setTimeout(()=>$P(r),0))}function FP(r){const e=ot.getInstance(),t=e.getEntriesByType("resource");for(const n of t)Wg(r,n);e.setupObserver("resource",n=>Wg(r,n))}function UP(r){const e=ot.getInstance();"onpagehide"in window?e.document.addEventListener("pagehide",()=>Ou(r)):e.document.addEventListener("unload",()=>Ou(r)),e.document.addEventListener("visibilitychange",()=>{e.document.visibilityState==="hidden"&&Ou(r)}),e.onFirstInputDelay&&e.onFirstInputDelay(t=>{Zv=t}),e.onLCP(t=>{var n;al.lcp={value:t.value,elementAttribution:(n=t.attribution)===null||n===void 0?void 0:n.element}}),e.onCLS(t=>{var n;al.cls={value:t.value,elementAttribution:(n=t.attribution)===null||n===void 0?void 0:n.largestShiftTarget}}),e.onINP(t=>{var n;al.inp={value:t.value,elementAttribution:(n=t.attribution)===null||n===void 0?void 0:n.interactionTarget}})}function $P(r){const e=ot.getInstance(),t=e.getEntriesByType("measure");for(const n of t)Qg(r,n);e.setupObserver("measure",n=>Qg(r,n))}function Qg(r,e){const t=e.name;t.substring(0,kd.length)!==kd&&Io.createUserTimingTrace(r,t)}function Ou(r){if(!Gg){Gg=!0;const e=ot.getInstance(),t=e.getEntriesByType("navigation"),n=e.getEntriesByType("paint");setTimeout(()=>{Io.createOobTrace(r,t,n,al,Zv)},0)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class BP{constructor(e,t){this.app=e,this.installations=t,this.initialized=!1}_init(e){this.initialized||((e==null?void 0:e.dataCollectionEnabled)!==void 0&&(this.dataCollectionEnabled=e.dataCollectionEnabled),(e==null?void 0:e.instrumentationEnabled)!==void 0&&(this.instrumentationEnabled=e.instrumentationEnabled),ot.getInstance().requiredApisAvailable()?Nx().then(t=>{t&&(EP(),Gv(this).then(()=>Kg(this),()=>Kg(this)),this.initialized=!0)}).catch(t=>{Fn.info(`Environment doesn't support IndexedDB: ${t}`)}):Fn.info('Firebase Performance cannot start if the browser does not support "Fetch" and "Promise", or cookies are disabled.'))}set instrumentationEnabled(e){zt.getInstance().instrumentationEnabled=e}get instrumentationEnabled(){return zt.getInstance().instrumentationEnabled}set dataCollectionEnabled(e){zt.getInstance().dataCollectionEnabled=e}get dataCollectionEnabled(){return zt.getInstance().dataCollectionEnabled}}const zP="[DEFAULT]";function qP(r=sc()){return r=Me(r),js(r,"performance").getImmediate()}function ew(r,e){return r=Me(r),new Io(r,e)}const HP=(r,{options:e})=>{const t=r.getProvider("app").getImmediate(),n=r.getProvider("installations-internal").getImmediate();if(t.name!==zP)throw bt.create("FB not default");if(typeof window>"u")throw bt.create("no window");XR(window);const s=new BP(t,n);return s._init(e),s};function WP(){Nr(new lr("performance",HP,"PUBLIC")),Ot(Ug,Cd),Ot(Ug,Cd,"esm2017")}WP();const Yg={apiKey:"AIzaSyCBoEZeDucpm7p9OEDgaUGLzhn5HpItseQ",authDomain:void 0,projectId:"spandex-salvation-radio-site",storageBucket:void 0,messagingSenderId:void 0,appId:"1:632263635377:web:2a9bd6118a6a2cb9d8cd90",measurementId:void 0};let Ws;try{Ws=Ju(Yg)}catch(r){if(r.code==="app/duplicate-app")Ws=Ju(Yg,"spandex-radio-app");else throw console.error("Firebase initialization error:",r),r}let Ai,ur,tw,Dr;try{Ai=gS(Ws),ur=gI(Ws),tw=$A(Ws),Dr=qP(Ws)}catch(r){throw console.error("Error initializing Firebase services:",r),r}const GP=new xr;function KP(r,e){if(r instanceof RegExp)return{keys:!1,pattern:r};var t,n,s,i,a=[],l="",u=r.split("/");for(u[0]||u.shift();s=u.shift();)t=s[0],t==="*"?(a.push(t),l+=s[1]==="?"?"(?:/(.*))?":"/(.*)"):t===":"?(n=s.indexOf("?",1),i=s.indexOf(".",1),a.push(s.substring(1,~n?n:~i?i:s.length)),l+=~n&&!~i?"(?:/([^/]+?))?":"/([^/]+?)",~i&&(l+=(~n?"?":"")+"\\"+s.substring(i))):l+="/"+s;return{keys:a,pattern:new RegExp("^"+l+(e?"(?=$|/)":"/?$"),"i")}}const QP=QT.useInsertionEffect,YP=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u",XP=YP?p.useLayoutEffect:p.useEffect,JP=QP||XP,rw=r=>{const e=p.useRef([r,(...t)=>e[0](...t)]).current;return JP(()=>{e[0]=r}),e[1]},ZP="popstate",Nf="pushState",Cf="replaceState",e4="hashchange",Xg=[ZP,Nf,Cf,e4],t4=r=>{for(const e of Xg)addEventListener(e,r);return()=>{for(const e of Xg)removeEventListener(e,r)}},nw=(r,e)=>YT.useSyncExternalStore(t4,r,e),r4=()=>location.search,n4=({ssrSearch:r=""}={})=>nw(r4,()=>r),Jg=()=>location.pathname,s4=({ssrPath:r}={})=>nw(Jg,r?()=>r:Jg),o4=(r,{replace:e=!1,state:t=null}={})=>history[e?Cf:Nf](t,"",r),i4=(r={})=>[s4(r),o4],Zg=Symbol.for("wouter_v3");if(typeof history<"u"&&typeof window[Zg]>"u"){for(const r of[Nf,Cf]){const e=history[r];history[r]=function(){const t=e.apply(this,arguments),n=new Event(r);return n.arguments=arguments,dispatchEvent(n),t}}Object.defineProperty(window,Zg,{value:!0})}const a4=(r,e)=>e.toLowerCase().indexOf(r.toLowerCase())?"~"+e:e.slice(r.length)||"/",sw=(r="")=>r==="/"?"":r,l4=(r,e)=>r[0]==="~"?r.slice(1):sw(e)+r,c4=(r="",e)=>a4(Sd(sw(r)),Sd(e)),u4=r=>r[0]==="?"?r.slice(1):r,Sd=r=>{try{return decodeURI(r)}catch{return r}},d4=r=>Sd(u4(r)),ow={hook:i4,searchHook:n4,parser:KP,base:"",ssrPath:void 0,ssrSearch:void 0,ssrContext:void 0,hrefs:r=>r},iw=p.createContext(ow),Bo=()=>p.useContext(iw),aw={},lw=p.createContext(aw),h4=()=>p.useContext(lw),Ic=r=>{const[e,t]=r.hook(r);return[c4(r.base,e),rw((n,s)=>t(l4(n,r.base),s))]},zo=()=>Ic(Bo()),f4=()=>{const r=Bo();return d4(r.searchHook(r))},cw=(r,e,t,n)=>{const{pattern:s,keys:i}=e instanceof RegExp?{keys:!1,pattern:e}:r(e||"*",n),a=s.exec(t)||[],[l,...u]=a;return l!==void 0?[!0,(()=>{const d=i!==!1?Object.fromEntries(i.map((m,g)=>[m,u[g]])):a.groups;let h={...u};return d&&Object.assign(h,d),h})(),...n?[l]:[]]:[!1,null]},m4=({children:r,...e})=>{var h,m;const t=Bo(),n=e.hook?ow:t;let s=n;const[i,a]=((h=e.ssrPath)==null?void 0:h.split("?"))??[];a&&(e.ssrSearch=a,e.ssrPath=i),e.hrefs=e.hrefs??((m=e.hook)==null?void 0:m.hrefs);let l=p.useRef({}),u=l.current,d=u;for(let g in n){const x=g==="base"?n[g]+(e[g]||""):e[g]||n[g];u===d&&x!==d[g]&&(l.current=d={...d}),d[g]=x,(x!==n[g]||x!==s[g])&&(s=d)}return p.createElement(iw.Provider,{value:s,children:r})},ey=({children:r,component:e},t)=>e?p.createElement(e,{params:t}):typeof r=="function"?r(t):r,p4=r=>{let e=p.useRef(aw);const t=e.current;return e.current=Object.keys(r).length!==Object.keys(t).length||Object.entries(r).some(([n,s])=>s!==t[n])?r:t},Nt=({path:r,nest:e,match:t,...n})=>{const s=Bo(),[i]=Ic(s),[a,l,u]=t??cw(s.parser,r,i,e),d=p4({...h4(),...l});if(!a)return null;const h=u?p.createElement(m4,{base:u},ey(n,d)):ey(n,d);return p.createElement(lw.Provider,{value:d,children:h})},uw=p.forwardRef((r,e)=>{const t=Bo(),[n,s]=Ic(t),{to:i="",href:a=i,onClick:l,asChild:u,children:d,className:h,replace:m,state:g,...x}=r,S=rw(v=>{v.ctrlKey||v.metaKey||v.altKey||v.shiftKey||v.button!==0||(l==null||l(v),v.defaultPrevented||(v.preventDefault(),s(a,r)))}),b=t.hrefs(a[0]==="~"?a.slice(1):t.base+a,t);return u&&p.isValidElement(d)?p.cloneElement(d,{onClick:S,href:b}):p.createElement("a",{...x,onClick:S,href:b,className:h!=null&&h.call?h(n===a):h,children:d,ref:e})}),dw=r=>Array.isArray(r)?r.flatMap(e=>dw(e&&e.type===p.Fragment?e.props.children:e)):[r],g4=({children:r,location:e})=>{const t=Bo(),[n]=Ic(t);for(const s of dw(r)){let i=0;if(p.isValidElement(s)&&(i=cw(t.parser,s.props.path,e||n,s.props.nest))[0])return p.cloneElement(s,{match:i})}return null};var qo=class{constructor(){this.listeners=new Set,this.subscribe=this.subscribe.bind(this)}subscribe(r){return this.listeners.add(r),this.onSubscribe(),()=>{this.listeners.delete(r),this.onUnsubscribe()}}hasListeners(){return this.listeners.size>0}onSubscribe(){}onUnsubscribe(){}},Ns=typeof window>"u"||"Deno"in globalThis;function jt(){}function y4(r,e){return typeof r=="function"?r(e):r}function jd(r){return typeof r=="number"&&r>=0&&r!==1/0}function hw(r,e){return Math.max(r+(e||0)-Date.now(),0)}function kn(r,e){return typeof r=="function"?r(e):r}function Gt(r,e){return typeof r=="function"?r(e):r}function ty(r,e){const{type:t="all",exact:n,fetchStatus:s,predicate:i,queryKey:a,stale:l}=r;if(a){if(n){if(e.queryHash!==kf(a,e.options))return!1}else if(!Bi(e.queryKey,a))return!1}if(t!=="all"){const u=e.isActive();if(t==="active"&&!u||t==="inactive"&&u)return!1}return!(typeof l=="boolean"&&e.isStale()!==l||s&&s!==e.state.fetchStatus||i&&!i(e))}function ry(r,e){const{exact:t,status:n,predicate:s,mutationKey:i}=r;if(i){if(!e.options.mutationKey)return!1;if(t){if(Cs(e.options.mutationKey)!==Cs(i))return!1}else if(!Bi(e.options.mutationKey,i))return!1}return!(n&&e.state.status!==n||s&&!s(e))}function kf(r,e){return((e==null?void 0:e.queryKeyHashFn)||Cs)(r)}function Cs(r){return JSON.stringify(r,(e,t)=>Id(t)?Object.keys(t).sort().reduce((n,s)=>(n[s]=t[s],n),{}):t)}function Bi(r,e){return r===e?!0:typeof r!=typeof e?!1:r&&e&&typeof r=="object"&&typeof e=="object"?Object.keys(e).every(t=>Bi(r[t],e[t])):!1}function fw(r,e){if(r===e)return r;const t=ny(r)&&ny(e);if(t||Id(r)&&Id(e)){const n=t?r:Object.keys(r),s=n.length,i=t?e:Object.keys(e),a=i.length,l=t?[]:{},u=new Set(n);let d=0;for(let h=0;h<a;h++){const m=t?h:i[h];(!t&&u.has(m)||t)&&r[m]===void 0&&e[m]===void 0?(l[m]=void 0,d++):(l[m]=fw(r[m],e[m]),l[m]===r[m]&&r[m]!==void 0&&d++)}return s===a&&d===s?r:l}return e}function $l(r,e){if(!e||Object.keys(r).length!==Object.keys(e).length)return!1;for(const t in r)if(r[t]!==e[t])return!1;return!0}function ny(r){return Array.isArray(r)&&r.length===Object.keys(r).length}function Id(r){if(!sy(r))return!1;const e=r.constructor;if(e===void 0)return!0;const t=e.prototype;return!(!sy(t)||!t.hasOwnProperty("isPrototypeOf")||Object.getPrototypeOf(r)!==Object.prototype)}function sy(r){return Object.prototype.toString.call(r)==="[object Object]"}function x4(r){return new Promise(e=>{setTimeout(e,r)})}function Ad(r,e,t){return typeof t.structuralSharing=="function"?t.structuralSharing(r,e):t.structuralSharing!==!1?fw(r,e):e}function b4(r,e,t=0){const n=[...r,e];return t&&n.length>t?n.slice(1):n}function v4(r,e,t=0){const n=[e,...r];return t&&n.length>t?n.slice(0,-1):n}var Sf=Symbol();function mw(r,e){return!r.queryFn&&(e!=null&&e.initialPromise)?()=>e.initialPromise:!r.queryFn||r.queryFn===Sf?()=>Promise.reject(new Error(`Missing queryFn: '${r.queryHash}'`)):r.queryFn}function pw(r,e){return typeof r=="function"?r(...e):!!r}var is,dn,ho,My,w4=(My=class extends qo{constructor(){super();ne(this,is);ne(this,dn);ne(this,ho);Q(this,ho,e=>{if(!Ns&&window.addEventListener){const t=()=>e();return window.addEventListener("visibilitychange",t,!1),()=>{window.removeEventListener("visibilitychange",t)}}})}onSubscribe(){D(this,dn)||this.setEventListener(D(this,ho))}onUnsubscribe(){var e;this.hasListeners()||((e=D(this,dn))==null||e.call(this),Q(this,dn,void 0))}setEventListener(e){var t;Q(this,ho,e),(t=D(this,dn))==null||t.call(this),Q(this,dn,e(n=>{typeof n=="boolean"?this.setFocused(n):this.onFocus()}))}setFocused(e){D(this,is)!==e&&(Q(this,is,e),this.onFocus())}onFocus(){const e=this.isFocused();this.listeners.forEach(t=>{t(e)})}isFocused(){var e;return typeof D(this,is)=="boolean"?D(this,is):((e=globalThis.document)==null?void 0:e.visibilityState)!=="hidden"}},is=new WeakMap,dn=new WeakMap,ho=new WeakMap,My),jf=new w4,fo,hn,mo,Dy,_4=(Dy=class extends qo{constructor(){super();ne(this,fo,!0);ne(this,hn);ne(this,mo);Q(this,mo,e=>{if(!Ns&&window.addEventListener){const t=()=>e(!0),n=()=>e(!1);return window.addEventListener("online",t,!1),window.addEventListener("offline",n,!1),()=>{window.removeEventListener("online",t),window.removeEventListener("offline",n)}}})}onSubscribe(){D(this,hn)||this.setEventListener(D(this,mo))}onUnsubscribe(){var e;this.hasListeners()||((e=D(this,hn))==null||e.call(this),Q(this,hn,void 0))}setEventListener(e){var t;Q(this,mo,e),(t=D(this,hn))==null||t.call(this),Q(this,hn,e(this.setOnline.bind(this)))}setOnline(e){D(this,fo)!==e&&(Q(this,fo,e),this.listeners.forEach(n=>{n(e)}))}isOnline(){return D(this,fo)}},fo=new WeakMap,hn=new WeakMap,mo=new WeakMap,Dy),Bl=new _4;function Rd(){let r,e;const t=new Promise((s,i)=>{r=s,e=i});t.status="pending",t.catch(()=>{});function n(s){Object.assign(t,s),delete t.resolve,delete t.reject}return t.resolve=s=>{n({status:"fulfilled",value:s}),r(s)},t.reject=s=>{n({status:"rejected",reason:s}),e(s)},t}function T4(r){return Math.min(1e3*2**r,3e4)}function gw(r){return(r??"online")==="online"?Bl.isOnline():!0}var yw=class extends Error{constructor(r){super("CancelledError"),this.revert=r==null?void 0:r.revert,this.silent=r==null?void 0:r.silent}};function Lu(r){return r instanceof yw}function xw(r){let e=!1,t=0,n=!1,s;const i=Rd(),a=b=>{var v;n||(g(new yw(b)),(v=r.abort)==null||v.call(r))},l=()=>{e=!0},u=()=>{e=!1},d=()=>jf.isFocused()&&(r.networkMode==="always"||Bl.isOnline())&&r.canRun(),h=()=>gw(r.networkMode)&&r.canRun(),m=b=>{var v;n||(n=!0,(v=r.onSuccess)==null||v.call(r,b),s==null||s(),i.resolve(b))},g=b=>{var v;n||(n=!0,(v=r.onError)==null||v.call(r,b),s==null||s(),i.reject(b))},x=()=>new Promise(b=>{var v;s=E=>{(n||d())&&b(E)},(v=r.onPause)==null||v.call(r)}).then(()=>{var b;s=void 0,n||(b=r.onContinue)==null||b.call(r)}),S=()=>{if(n)return;let b;const v=t===0?r.initialPromise:void 0;try{b=v??r.fn()}catch(E){b=Promise.reject(E)}Promise.resolve(b).then(m).catch(E=>{var U;if(n)return;const T=r.retry??(Ns?0:3),N=r.retryDelay??T4,P=typeof N=="function"?N(t,E):N,F=T===!0||typeof T=="number"&&t<T||typeof T=="function"&&T(t,E);if(e||!F){g(E);return}t++,(U=r.onFail)==null||U.call(r,t,E),x4(P).then(()=>d()?void 0:x()).then(()=>{e?g(E):S()})})};return{promise:i,cancel:a,continue:()=>(s==null||s(),i),cancelRetry:l,continueRetry:u,canStart:h,start:()=>(h()?S():x().then(S),i)}}var E4=r=>setTimeout(r,0);function N4(){let r=[],e=0,t=l=>{l()},n=l=>{l()},s=E4;const i=l=>{e?r.push(l):s(()=>{t(l)})},a=()=>{const l=r;r=[],l.length&&s(()=>{n(()=>{l.forEach(u=>{t(u)})})})};return{batch:l=>{let u;e++;try{u=l()}finally{e--,e||a()}return u},batchCalls:l=>(...u)=>{i(()=>{l(...u)})},schedule:i,setNotifyFunction:l=>{t=l},setBatchNotifyFunction:l=>{n=l},setScheduler:l=>{s=l}}}var nt=N4(),as,Oy,bw=(Oy=class{constructor(){ne(this,as)}destroy(){this.clearGcTimeout()}scheduleGc(){this.clearGcTimeout(),jd(this.gcTime)&&Q(this,as,setTimeout(()=>{this.optionalRemove()},this.gcTime))}updateGcTime(r){this.gcTime=Math.max(this.gcTime||0,r??(Ns?1/0:300*1e3))}clearGcTimeout(){D(this,as)&&(clearTimeout(D(this,as)),Q(this,as,void 0))}},as=new WeakMap,Oy),po,ls,Wt,cs,yt,Gi,us,rr,Mr,Ly,C4=(Ly=class extends bw{constructor(e){super();ne(this,rr);ne(this,po);ne(this,ls);ne(this,Wt);ne(this,cs);ne(this,yt);ne(this,Gi);ne(this,us);Q(this,us,!1),Q(this,Gi,e.defaultOptions),this.setOptions(e.options),this.observers=[],Q(this,cs,e.client),Q(this,Wt,D(this,cs).getQueryCache()),this.queryKey=e.queryKey,this.queryHash=e.queryHash,Q(this,po,k4(this.options)),this.state=e.state??D(this,po),this.scheduleGc()}get meta(){return this.options.meta}get promise(){var e;return(e=D(this,yt))==null?void 0:e.promise}setOptions(e){this.options={...D(this,Gi),...e},this.updateGcTime(this.options.gcTime)}optionalRemove(){!this.observers.length&&this.state.fetchStatus==="idle"&&D(this,Wt).remove(this)}setData(e,t){const n=Ad(this.state.data,e,this.options);return ge(this,rr,Mr).call(this,{data:n,type:"success",dataUpdatedAt:t==null?void 0:t.updatedAt,manual:t==null?void 0:t.manual}),n}setState(e,t){ge(this,rr,Mr).call(this,{type:"setState",state:e,setStateOptions:t})}cancel(e){var n,s;const t=(n=D(this,yt))==null?void 0:n.promise;return(s=D(this,yt))==null||s.cancel(e),t?t.then(jt).catch(jt):Promise.resolve()}destroy(){super.destroy(),this.cancel({silent:!0})}reset(){this.destroy(),this.setState(D(this,po))}isActive(){return this.observers.some(e=>Gt(e.options.enabled,this)!==!1)}isDisabled(){return this.getObserversCount()>0?!this.isActive():this.options.queryFn===Sf||this.state.dataUpdateCount+this.state.errorUpdateCount===0}isStatic(){return this.getObserversCount()>0?this.observers.some(e=>kn(e.options.staleTime,this)==="static"):!1}isStale(){return this.getObserversCount()>0?this.observers.some(e=>e.getCurrentResult().isStale):this.state.data===void 0||this.state.isInvalidated}isStaleByTime(e=0){return this.state.data===void 0?!0:e==="static"?!1:this.state.isInvalidated?!0:!hw(this.state.dataUpdatedAt,e)}onFocus(){var t;const e=this.observers.find(n=>n.shouldFetchOnWindowFocus());e==null||e.refetch({cancelRefetch:!1}),(t=D(this,yt))==null||t.continue()}onOnline(){var t;const e=this.observers.find(n=>n.shouldFetchOnReconnect());e==null||e.refetch({cancelRefetch:!1}),(t=D(this,yt))==null||t.continue()}addObserver(e){this.observers.includes(e)||(this.observers.push(e),this.clearGcTimeout(),D(this,Wt).notify({type:"observerAdded",query:this,observer:e}))}removeObserver(e){this.observers.includes(e)&&(this.observers=this.observers.filter(t=>t!==e),this.observers.length||(D(this,yt)&&(D(this,us)?D(this,yt).cancel({revert:!0}):D(this,yt).cancelRetry()),this.scheduleGc()),D(this,Wt).notify({type:"observerRemoved",query:this,observer:e}))}getObserversCount(){return this.observers.length}invalidate(){this.state.isInvalidated||ge(this,rr,Mr).call(this,{type:"invalidate"})}fetch(e,t){var d,h,m;if(this.state.fetchStatus!=="idle"){if(this.state.data!==void 0&&(t!=null&&t.cancelRefetch))this.cancel({silent:!0});else if(D(this,yt))return D(this,yt).continueRetry(),D(this,yt).promise}if(e&&this.setOptions(e),!this.options.queryFn){const g=this.observers.find(x=>x.options.queryFn);g&&this.setOptions(g.options)}const n=new AbortController,s=g=>{Object.defineProperty(g,"signal",{enumerable:!0,get:()=>(Q(this,us,!0),n.signal)})},i=()=>{const g=mw(this.options,t),S=(()=>{const b={client:D(this,cs),queryKey:this.queryKey,meta:this.meta};return s(b),b})();return Q(this,us,!1),this.options.persister?this.options.persister(g,S,this):g(S)},l=(()=>{const g={fetchOptions:t,options:this.options,queryKey:this.queryKey,client:D(this,cs),state:this.state,fetchFn:i};return s(g),g})();(d=this.options.behavior)==null||d.onFetch(l,this),Q(this,ls,this.state),(this.state.fetchStatus==="idle"||this.state.fetchMeta!==((h=l.fetchOptions)==null?void 0:h.meta))&&ge(this,rr,Mr).call(this,{type:"fetch",meta:(m=l.fetchOptions)==null?void 0:m.meta});const u=g=>{var x,S,b,v;Lu(g)&&g.silent||ge(this,rr,Mr).call(this,{type:"error",error:g}),Lu(g)||((S=(x=D(this,Wt).config).onError)==null||S.call(x,g,this),(v=(b=D(this,Wt).config).onSettled)==null||v.call(b,this.state.data,g,this)),this.scheduleGc()};return Q(this,yt,xw({initialPromise:t==null?void 0:t.initialPromise,fn:l.fetchFn,abort:n.abort.bind(n),onSuccess:g=>{var x,S,b,v;if(g===void 0){u(new Error(`${this.queryHash} data is undefined`));return}try{this.setData(g)}catch(E){u(E);return}(S=(x=D(this,Wt).config).onSuccess)==null||S.call(x,g,this),(v=(b=D(this,Wt).config).onSettled)==null||v.call(b,g,this.state.error,this),this.scheduleGc()},onError:u,onFail:(g,x)=>{ge(this,rr,Mr).call(this,{type:"failed",failureCount:g,error:x})},onPause:()=>{ge(this,rr,Mr).call(this,{type:"pause"})},onContinue:()=>{ge(this,rr,Mr).call(this,{type:"continue"})},retry:l.options.retry,retryDelay:l.options.retryDelay,networkMode:l.options.networkMode,canRun:()=>!0})),D(this,yt).start()}},po=new WeakMap,ls=new WeakMap,Wt=new WeakMap,cs=new WeakMap,yt=new WeakMap,Gi=new WeakMap,us=new WeakMap,rr=new WeakSet,Mr=function(e){const t=n=>{switch(e.type){case"failed":return{...n,fetchFailureCount:e.failureCount,fetchFailureReason:e.error};case"pause":return{...n,fetchStatus:"paused"};case"continue":return{...n,fetchStatus:"fetching"};case"fetch":return{...n,...vw(n.data,this.options),fetchMeta:e.meta??null};case"success":return Q(this,ls,void 0),{...n,data:e.data,dataUpdateCount:n.dataUpdateCount+1,dataUpdatedAt:e.dataUpdatedAt??Date.now(),error:null,isInvalidated:!1,status:"success",...!e.manual&&{fetchStatus:"idle",fetchFailureCount:0,fetchFailureReason:null}};case"error":const s=e.error;return Lu(s)&&s.revert&&D(this,ls)?{...D(this,ls),fetchStatus:"idle"}:{...n,error:s,errorUpdateCount:n.errorUpdateCount+1,errorUpdatedAt:Date.now(),fetchFailureCount:n.fetchFailureCount+1,fetchFailureReason:s,fetchStatus:"idle",status:"error"};case"invalidate":return{...n,isInvalidated:!0};case"setState":return{...n,...e.state}}};this.state=t(this.state),nt.batch(()=>{this.observers.forEach(n=>{n.onQueryUpdate()}),D(this,Wt).notify({query:this,type:"updated",action:e})})},Ly);function vw(r,e){return{fetchFailureCount:0,fetchFailureReason:null,fetchStatus:gw(e.networkMode)?"fetching":"paused",...r===void 0&&{error:null,status:"pending"}}}function k4(r){const e=typeof r.initialData=="function"?r.initialData():r.initialData,t=e!==void 0,n=t?typeof r.initialDataUpdatedAt=="function"?r.initialDataUpdatedAt():r.initialDataUpdatedAt:0;return{data:e,dataUpdateCount:0,dataUpdatedAt:t?n??Date.now():0,error:null,errorUpdateCount:0,errorUpdatedAt:0,fetchFailureCount:0,fetchFailureReason:null,fetchMeta:null,isInvalidated:!1,status:t?"success":"pending",fetchStatus:"idle"}}var pr,Vy,S4=(Vy=class extends qo{constructor(e={}){super();ne(this,pr);this.config=e,Q(this,pr,new Map)}build(e,t,n){const s=t.queryKey,i=t.queryHash??kf(s,t);let a=this.get(i);return a||(a=new C4({client:e,queryKey:s,queryHash:i,options:e.defaultQueryOptions(t),state:n,defaultOptions:e.getQueryDefaults(s)}),this.add(a)),a}add(e){D(this,pr).has(e.queryHash)||(D(this,pr).set(e.queryHash,e),this.notify({type:"added",query:e}))}remove(e){const t=D(this,pr).get(e.queryHash);t&&(e.destroy(),t===e&&D(this,pr).delete(e.queryHash),this.notify({type:"removed",query:e}))}clear(){nt.batch(()=>{this.getAll().forEach(e=>{this.remove(e)})})}get(e){return D(this,pr).get(e)}getAll(){return[...D(this,pr).values()]}find(e){const t={exact:!0,...e};return this.getAll().find(n=>ty(t,n))}findAll(e={}){const t=this.getAll();return Object.keys(e).length>0?t.filter(n=>ty(e,n)):t}notify(e){nt.batch(()=>{this.listeners.forEach(t=>{t(e)})})}onFocus(){nt.batch(()=>{this.getAll().forEach(e=>{e.onFocus()})})}onOnline(){nt.batch(()=>{this.getAll().forEach(e=>{e.onOnline()})})}},pr=new WeakMap,Vy),gr,Ct,ds,yr,sn,Fy,j4=(Fy=class extends bw{constructor(e){super();ne(this,yr);ne(this,gr);ne(this,Ct);ne(this,ds);this.mutationId=e.mutationId,Q(this,Ct,e.mutationCache),Q(this,gr,[]),this.state=e.state||ww(),this.setOptions(e.options),this.scheduleGc()}setOptions(e){this.options=e,this.updateGcTime(this.options.gcTime)}get meta(){return this.options.meta}addObserver(e){D(this,gr).includes(e)||(D(this,gr).push(e),this.clearGcTimeout(),D(this,Ct).notify({type:"observerAdded",mutation:this,observer:e}))}removeObserver(e){Q(this,gr,D(this,gr).filter(t=>t!==e)),this.scheduleGc(),D(this,Ct).notify({type:"observerRemoved",mutation:this,observer:e})}optionalRemove(){D(this,gr).length||(this.state.status==="pending"?this.scheduleGc():D(this,Ct).remove(this))}continue(){var e;return((e=D(this,ds))==null?void 0:e.continue())??this.execute(this.state.variables)}async execute(e){var i,a,l,u,d,h,m,g,x,S,b,v,E,T,N,P,F,U,A,w;const t=()=>{ge(this,yr,sn).call(this,{type:"continue"})};Q(this,ds,xw({fn:()=>this.options.mutationFn?this.options.mutationFn(e):Promise.reject(new Error("No mutationFn found")),onFail:(C,j)=>{ge(this,yr,sn).call(this,{type:"failed",failureCount:C,error:j})},onPause:()=>{ge(this,yr,sn).call(this,{type:"pause"})},onContinue:t,retry:this.options.retry??0,retryDelay:this.options.retryDelay,networkMode:this.options.networkMode,canRun:()=>D(this,Ct).canRun(this)}));const n=this.state.status==="pending",s=!D(this,ds).canStart();try{if(n)t();else{ge(this,yr,sn).call(this,{type:"pending",variables:e,isPaused:s}),await((a=(i=D(this,Ct).config).onMutate)==null?void 0:a.call(i,e,this));const j=await((u=(l=this.options).onMutate)==null?void 0:u.call(l,e));j!==this.state.context&&ge(this,yr,sn).call(this,{type:"pending",context:j,variables:e,isPaused:s})}const C=await D(this,ds).start();return await((h=(d=D(this,Ct).config).onSuccess)==null?void 0:h.call(d,C,e,this.state.context,this)),await((g=(m=this.options).onSuccess)==null?void 0:g.call(m,C,e,this.state.context)),await((S=(x=D(this,Ct).config).onSettled)==null?void 0:S.call(x,C,null,this.state.variables,this.state.context,this)),await((v=(b=this.options).onSettled)==null?void 0:v.call(b,C,null,e,this.state.context)),ge(this,yr,sn).call(this,{type:"success",data:C}),C}catch(C){try{throw await((T=(E=D(this,Ct).config).onError)==null?void 0:T.call(E,C,e,this.state.context,this)),await((P=(N=this.options).onError)==null?void 0:P.call(N,C,e,this.state.context)),await((U=(F=D(this,Ct).config).onSettled)==null?void 0:U.call(F,void 0,C,this.state.variables,this.state.context,this)),await((w=(A=this.options).onSettled)==null?void 0:w.call(A,void 0,C,e,this.state.context)),C}finally{ge(this,yr,sn).call(this,{type:"error",error:C})}}finally{D(this,Ct).runNext(this)}}},gr=new WeakMap,Ct=new WeakMap,ds=new WeakMap,yr=new WeakSet,sn=function(e){const t=n=>{switch(e.type){case"failed":return{...n,failureCount:e.failureCount,failureReason:e.error};case"pause":return{...n,isPaused:!0};case"continue":return{...n,isPaused:!1};case"pending":return{...n,context:e.context,data:void 0,failureCount:0,failureReason:null,error:null,isPaused:e.isPaused,status:"pending",variables:e.variables,submittedAt:Date.now()};case"success":return{...n,data:e.data,failureCount:0,failureReason:null,error:null,status:"success",isPaused:!1};case"error":return{...n,data:void 0,error:e.error,failureCount:n.failureCount+1,failureReason:e.error,isPaused:!1,status:"error"}}};this.state=t(this.state),nt.batch(()=>{D(this,gr).forEach(n=>{n.onMutationUpdate(e)}),D(this,Ct).notify({mutation:this,type:"updated",action:e})})},Fy);function ww(){return{context:void 0,data:void 0,error:null,failureCount:0,failureReason:null,isPaused:!1,status:"idle",variables:void 0,submittedAt:0}}var Or,nr,Ki,Uy,I4=(Uy=class extends qo{constructor(e={}){super();ne(this,Or);ne(this,nr);ne(this,Ki);this.config=e,Q(this,Or,new Set),Q(this,nr,new Map),Q(this,Ki,0)}build(e,t,n){const s=new j4({mutationCache:this,mutationId:++Ma(this,Ki)._,options:e.defaultMutationOptions(t),state:n});return this.add(s),s}add(e){D(this,Or).add(e);const t=Ga(e);if(typeof t=="string"){const n=D(this,nr).get(t);n?n.push(e):D(this,nr).set(t,[e])}this.notify({type:"added",mutation:e})}remove(e){if(D(this,Or).delete(e)){const t=Ga(e);if(typeof t=="string"){const n=D(this,nr).get(t);if(n)if(n.length>1){const s=n.indexOf(e);s!==-1&&n.splice(s,1)}else n[0]===e&&D(this,nr).delete(t)}}this.notify({type:"removed",mutation:e})}canRun(e){const t=Ga(e);if(typeof t=="string"){const n=D(this,nr).get(t),s=n==null?void 0:n.find(i=>i.state.status==="pending");return!s||s===e}else return!0}runNext(e){var n;const t=Ga(e);if(typeof t=="string"){const s=(n=D(this,nr).get(t))==null?void 0:n.find(i=>i!==e&&i.state.isPaused);return(s==null?void 0:s.continue())??Promise.resolve()}else return Promise.resolve()}clear(){nt.batch(()=>{D(this,Or).forEach(e=>{this.notify({type:"removed",mutation:e})}),D(this,Or).clear(),D(this,nr).clear()})}getAll(){return Array.from(D(this,Or))}find(e){const t={exact:!0,...e};return this.getAll().find(n=>ry(t,n))}findAll(e={}){return this.getAll().filter(t=>ry(e,t))}notify(e){nt.batch(()=>{this.listeners.forEach(t=>{t(e)})})}resumePausedMutations(){const e=this.getAll().filter(t=>t.state.isPaused);return nt.batch(()=>Promise.all(e.map(t=>t.continue().catch(jt))))}},Or=new WeakMap,nr=new WeakMap,Ki=new WeakMap,Uy);function Ga(r){var e;return(e=r.options.scope)==null?void 0:e.id}function oy(r){return{onFetch:(e,t)=>{var h,m,g,x,S;const n=e.options,s=(g=(m=(h=e.fetchOptions)==null?void 0:h.meta)==null?void 0:m.fetchMore)==null?void 0:g.direction,i=((x=e.state.data)==null?void 0:x.pages)||[],a=((S=e.state.data)==null?void 0:S.pageParams)||[];let l={pages:[],pageParams:[]},u=0;const d=async()=>{let b=!1;const v=N=>{Object.defineProperty(N,"signal",{enumerable:!0,get:()=>(e.signal.aborted?b=!0:e.signal.addEventListener("abort",()=>{b=!0}),e.signal)})},E=mw(e.options,e.fetchOptions),T=async(N,P,F)=>{if(b)return Promise.reject();if(P==null&&N.pages.length)return Promise.resolve(N);const A=(()=>{const _={client:e.client,queryKey:e.queryKey,pageParam:P,direction:F?"backward":"forward",meta:e.options.meta};return v(_),_})(),w=await E(A),{maxPages:C}=e.options,j=F?v4:b4;return{pages:j(N.pages,w,C),pageParams:j(N.pageParams,P,C)}};if(s&&i.length){const N=s==="backward",P=N?A4:iy,F={pages:i,pageParams:a},U=P(n,F);l=await T(F,U,N)}else{const N=r??i.length;do{const P=u===0?a[0]??n.initialPageParam:iy(n,l);if(u>0&&P==null)break;l=await T(l,P),u++}while(u<N)}return l};e.options.persister?e.fetchFn=()=>{var b,v;return(v=(b=e.options).persister)==null?void 0:v.call(b,d,{client:e.client,queryKey:e.queryKey,meta:e.options.meta,signal:e.signal},t)}:e.fetchFn=d}}}function iy(r,{pages:e,pageParams:t}){const n=e.length-1;return e.length>0?r.getNextPageParam(e[n],e,t[n],t):void 0}function A4(r,{pages:e,pageParams:t}){var n;return e.length>0?(n=r.getPreviousPageParam)==null?void 0:n.call(r,e[0],e,t[0],t):void 0}var He,fn,mn,go,yo,pn,xo,bo,$y,R4=($y=class{constructor(r={}){ne(this,He);ne(this,fn);ne(this,mn);ne(this,go);ne(this,yo);ne(this,pn);ne(this,xo);ne(this,bo);Q(this,He,r.queryCache||new S4),Q(this,fn,r.mutationCache||new I4),Q(this,mn,r.defaultOptions||{}),Q(this,go,new Map),Q(this,yo,new Map),Q(this,pn,0)}mount(){Ma(this,pn)._++,D(this,pn)===1&&(Q(this,xo,jf.subscribe(async r=>{r&&(await this.resumePausedMutations(),D(this,He).onFocus())})),Q(this,bo,Bl.subscribe(async r=>{r&&(await this.resumePausedMutations(),D(this,He).onOnline())})))}unmount(){var r,e;Ma(this,pn)._--,D(this,pn)===0&&((r=D(this,xo))==null||r.call(this),Q(this,xo,void 0),(e=D(this,bo))==null||e.call(this),Q(this,bo,void 0))}isFetching(r){return D(this,He).findAll({...r,fetchStatus:"fetching"}).length}isMutating(r){return D(this,fn).findAll({...r,status:"pending"}).length}getQueryData(r){var t;const e=this.defaultQueryOptions({queryKey:r});return(t=D(this,He).get(e.queryHash))==null?void 0:t.state.data}ensureQueryData(r){const e=this.defaultQueryOptions(r),t=D(this,He).build(this,e),n=t.state.data;return n===void 0?this.fetchQuery(r):(r.revalidateIfStale&&t.isStaleByTime(kn(e.staleTime,t))&&this.prefetchQuery(e),Promise.resolve(n))}getQueriesData(r){return D(this,He).findAll(r).map(({queryKey:e,state:t})=>{const n=t.data;return[e,n]})}setQueryData(r,e,t){const n=this.defaultQueryOptions({queryKey:r}),s=D(this,He).get(n.queryHash),i=s==null?void 0:s.state.data,a=y4(e,i);if(a!==void 0)return D(this,He).build(this,n).setData(a,{...t,manual:!0})}setQueriesData(r,e,t){return nt.batch(()=>D(this,He).findAll(r).map(({queryKey:n})=>[n,this.setQueryData(n,e,t)]))}getQueryState(r){var t;const e=this.defaultQueryOptions({queryKey:r});return(t=D(this,He).get(e.queryHash))==null?void 0:t.state}removeQueries(r){const e=D(this,He);nt.batch(()=>{e.findAll(r).forEach(t=>{e.remove(t)})})}resetQueries(r,e){const t=D(this,He);return nt.batch(()=>(t.findAll(r).forEach(n=>{n.reset()}),this.refetchQueries({type:"active",...r},e)))}cancelQueries(r,e={}){const t={revert:!0,...e},n=nt.batch(()=>D(this,He).findAll(r).map(s=>s.cancel(t)));return Promise.all(n).then(jt).catch(jt)}invalidateQueries(r,e={}){return nt.batch(()=>(D(this,He).findAll(r).forEach(t=>{t.invalidate()}),(r==null?void 0:r.refetchType)==="none"?Promise.resolve():this.refetchQueries({...r,type:(r==null?void 0:r.refetchType)??(r==null?void 0:r.type)??"active"},e)))}refetchQueries(r,e={}){const t={...e,cancelRefetch:e.cancelRefetch??!0},n=nt.batch(()=>D(this,He).findAll(r).filter(s=>!s.isDisabled()&&!s.isStatic()).map(s=>{let i=s.fetch(void 0,t);return t.throwOnError||(i=i.catch(jt)),s.state.fetchStatus==="paused"?Promise.resolve():i}));return Promise.all(n).then(jt)}fetchQuery(r){const e=this.defaultQueryOptions(r);e.retry===void 0&&(e.retry=!1);const t=D(this,He).build(this,e);return t.isStaleByTime(kn(e.staleTime,t))?t.fetch(e):Promise.resolve(t.state.data)}prefetchQuery(r){return this.fetchQuery(r).then(jt).catch(jt)}fetchInfiniteQuery(r){return r.behavior=oy(r.pages),this.fetchQuery(r)}prefetchInfiniteQuery(r){return this.fetchInfiniteQuery(r).then(jt).catch(jt)}ensureInfiniteQueryData(r){return r.behavior=oy(r.pages),this.ensureQueryData(r)}resumePausedMutations(){return Bl.isOnline()?D(this,fn).resumePausedMutations():Promise.resolve()}getQueryCache(){return D(this,He)}getMutationCache(){return D(this,fn)}getDefaultOptions(){return D(this,mn)}setDefaultOptions(r){Q(this,mn,r)}setQueryDefaults(r,e){D(this,go).set(Cs(r),{queryKey:r,defaultOptions:e})}getQueryDefaults(r){const e=[...D(this,go).values()],t={};return e.forEach(n=>{Bi(r,n.queryKey)&&Object.assign(t,n.defaultOptions)}),t}setMutationDefaults(r,e){D(this,yo).set(Cs(r),{mutationKey:r,defaultOptions:e})}getMutationDefaults(r){const e=[...D(this,yo).values()],t={};return e.forEach(n=>{Bi(r,n.mutationKey)&&Object.assign(t,n.defaultOptions)}),t}defaultQueryOptions(r){if(r._defaulted)return r;const e={...D(this,mn).queries,...this.getQueryDefaults(r.queryKey),...r,_defaulted:!0};return e.queryHash||(e.queryHash=kf(e.queryKey,e)),e.refetchOnReconnect===void 0&&(e.refetchOnReconnect=e.networkMode!=="always"),e.throwOnError===void 0&&(e.throwOnError=!!e.suspense),!e.networkMode&&e.persister&&(e.networkMode="offlineFirst"),e.queryFn===Sf&&(e.enabled=!1),e}defaultMutationOptions(r){return r!=null&&r._defaulted?r:{...D(this,mn).mutations,...(r==null?void 0:r.mutationKey)&&this.getMutationDefaults(r.mutationKey),...r,_defaulted:!0}}clear(){D(this,He).clear(),D(this,fn).clear()}},He=new WeakMap,fn=new WeakMap,mn=new WeakMap,go=new WeakMap,yo=new WeakMap,pn=new WeakMap,xo=new WeakMap,bo=new WeakMap,$y),It,we,Qi,kt,hs,vo,gn,yn,Yi,wo,_o,fs,ms,xn,To,Ce,vi,Pd,Md,Dd,Od,Ld,Vd,Fd,_w,By,P4=(By=class extends qo{constructor(e,t){super();ne(this,Ce);ne(this,It);ne(this,we);ne(this,Qi);ne(this,kt);ne(this,hs);ne(this,vo);ne(this,gn);ne(this,yn);ne(this,Yi);ne(this,wo);ne(this,_o);ne(this,fs);ne(this,ms);ne(this,xn);ne(this,To,new Set);this.options=t,Q(this,It,e),Q(this,yn,null),Q(this,gn,Rd()),this.options.experimental_prefetchInRender||D(this,gn).reject(new Error("experimental_prefetchInRender feature flag is not enabled")),this.bindMethods(),this.setOptions(t)}bindMethods(){this.refetch=this.refetch.bind(this)}onSubscribe(){this.listeners.size===1&&(D(this,we).addObserver(this),ay(D(this,we),this.options)?ge(this,Ce,vi).call(this):this.updateResult(),ge(this,Ce,Od).call(this))}onUnsubscribe(){this.hasListeners()||this.destroy()}shouldFetchOnReconnect(){return Ud(D(this,we),this.options,this.options.refetchOnReconnect)}shouldFetchOnWindowFocus(){return Ud(D(this,we),this.options,this.options.refetchOnWindowFocus)}destroy(){this.listeners=new Set,ge(this,Ce,Ld).call(this),ge(this,Ce,Vd).call(this),D(this,we).removeObserver(this)}setOptions(e){const t=this.options,n=D(this,we);if(this.options=D(this,It).defaultQueryOptions(e),this.options.enabled!==void 0&&typeof this.options.enabled!="boolean"&&typeof this.options.enabled!="function"&&typeof Gt(this.options.enabled,D(this,we))!="boolean")throw new Error("Expected enabled to be a boolean or a callback that returns a boolean");ge(this,Ce,Fd).call(this),D(this,we).setOptions(this.options),t._defaulted&&!$l(this.options,t)&&D(this,It).getQueryCache().notify({type:"observerOptionsUpdated",query:D(this,we),observer:this});const s=this.hasListeners();s&&ly(D(this,we),n,this.options,t)&&ge(this,Ce,vi).call(this),this.updateResult(),s&&(D(this,we)!==n||Gt(this.options.enabled,D(this,we))!==Gt(t.enabled,D(this,we))||kn(this.options.staleTime,D(this,we))!==kn(t.staleTime,D(this,we)))&&ge(this,Ce,Pd).call(this);const i=ge(this,Ce,Md).call(this);s&&(D(this,we)!==n||Gt(this.options.enabled,D(this,we))!==Gt(t.enabled,D(this,we))||i!==D(this,xn))&&ge(this,Ce,Dd).call(this,i)}getOptimisticResult(e){const t=D(this,It).getQueryCache().build(D(this,It),e),n=this.createResult(t,e);return D4(this,n)&&(Q(this,kt,n),Q(this,vo,this.options),Q(this,hs,D(this,we).state)),n}getCurrentResult(){return D(this,kt)}trackResult(e,t){return new Proxy(e,{get:(n,s)=>(this.trackProp(s),t==null||t(s),Reflect.get(n,s))})}trackProp(e){D(this,To).add(e)}getCurrentQuery(){return D(this,we)}refetch({...e}={}){return this.fetch({...e})}fetchOptimistic(e){const t=D(this,It).defaultQueryOptions(e),n=D(this,It).getQueryCache().build(D(this,It),t);return n.fetch().then(()=>this.createResult(n,t))}fetch(e){return ge(this,Ce,vi).call(this,{...e,cancelRefetch:e.cancelRefetch??!0}).then(()=>(this.updateResult(),D(this,kt)))}createResult(e,t){var C;const n=D(this,we),s=this.options,i=D(this,kt),a=D(this,hs),l=D(this,vo),d=e!==n?e.state:D(this,Qi),{state:h}=e;let m={...h},g=!1,x;if(t._optimisticResults){const j=this.hasListeners(),_=!j&&ay(e,t),M=j&&ly(e,n,t,s);(_||M)&&(m={...m,...vw(h.data,e.options)}),t._optimisticResults==="isRestoring"&&(m.fetchStatus="idle")}let{error:S,errorUpdatedAt:b,status:v}=m;x=m.data;let E=!1;if(t.placeholderData!==void 0&&x===void 0&&v==="pending"){let j;i!=null&&i.isPlaceholderData&&t.placeholderData===(l==null?void 0:l.placeholderData)?(j=i.data,E=!0):j=typeof t.placeholderData=="function"?t.placeholderData((C=D(this,_o))==null?void 0:C.state.data,D(this,_o)):t.placeholderData,j!==void 0&&(v="success",x=Ad(i==null?void 0:i.data,j,t),g=!0)}if(t.select&&x!==void 0&&!E)if(i&&x===(a==null?void 0:a.data)&&t.select===D(this,Yi))x=D(this,wo);else try{Q(this,Yi,t.select),x=t.select(x),x=Ad(i==null?void 0:i.data,x,t),Q(this,wo,x),Q(this,yn,null)}catch(j){Q(this,yn,j)}D(this,yn)&&(S=D(this,yn),x=D(this,wo),b=Date.now(),v="error");const T=m.fetchStatus==="fetching",N=v==="pending",P=v==="error",F=N&&T,U=x!==void 0,w={status:v,fetchStatus:m.fetchStatus,isPending:N,isSuccess:v==="success",isError:P,isInitialLoading:F,isLoading:F,data:x,dataUpdatedAt:m.dataUpdatedAt,error:S,errorUpdatedAt:b,failureCount:m.fetchFailureCount,failureReason:m.fetchFailureReason,errorUpdateCount:m.errorUpdateCount,isFetched:m.dataUpdateCount>0||m.errorUpdateCount>0,isFetchedAfterMount:m.dataUpdateCount>d.dataUpdateCount||m.errorUpdateCount>d.errorUpdateCount,isFetching:T,isRefetching:T&&!N,isLoadingError:P&&!U,isPaused:m.fetchStatus==="paused",isPlaceholderData:g,isRefetchError:P&&U,isStale:If(e,t),refetch:this.refetch,promise:D(this,gn),isEnabled:Gt(t.enabled,e)!==!1};if(this.options.experimental_prefetchInRender){const j=I=>{w.status==="error"?I.reject(w.error):w.data!==void 0&&I.resolve(w.data)},_=()=>{const I=Q(this,gn,w.promise=Rd());j(I)},M=D(this,gn);switch(M.status){case"pending":e.queryHash===n.queryHash&&j(M);break;case"fulfilled":(w.status==="error"||w.data!==M.value)&&_();break;case"rejected":(w.status!=="error"||w.error!==M.reason)&&_();break}}return w}updateResult(){const e=D(this,kt),t=this.createResult(D(this,we),this.options);if(Q(this,hs,D(this,we).state),Q(this,vo,this.options),D(this,hs).data!==void 0&&Q(this,_o,D(this,we)),$l(t,e))return;Q(this,kt,t);const n=()=>{if(!e)return!0;const{notifyOnChangeProps:s}=this.options,i=typeof s=="function"?s():s;if(i==="all"||!i&&!D(this,To).size)return!0;const a=new Set(i??D(this,To));return this.options.throwOnError&&a.add("error"),Object.keys(D(this,kt)).some(l=>{const u=l;return D(this,kt)[u]!==e[u]&&a.has(u)})};ge(this,Ce,_w).call(this,{listeners:n()})}onQueryUpdate(){this.updateResult(),this.hasListeners()&&ge(this,Ce,Od).call(this)}},It=new WeakMap,we=new WeakMap,Qi=new WeakMap,kt=new WeakMap,hs=new WeakMap,vo=new WeakMap,gn=new WeakMap,yn=new WeakMap,Yi=new WeakMap,wo=new WeakMap,_o=new WeakMap,fs=new WeakMap,ms=new WeakMap,xn=new WeakMap,To=new WeakMap,Ce=new WeakSet,vi=function(e){ge(this,Ce,Fd).call(this);let t=D(this,we).fetch(this.options,e);return e!=null&&e.throwOnError||(t=t.catch(jt)),t},Pd=function(){ge(this,Ce,Ld).call(this);const e=kn(this.options.staleTime,D(this,we));if(Ns||D(this,kt).isStale||!jd(e))return;const n=hw(D(this,kt).dataUpdatedAt,e)+1;Q(this,fs,setTimeout(()=>{D(this,kt).isStale||this.updateResult()},n))},Md=function(){return(typeof this.options.refetchInterval=="function"?this.options.refetchInterval(D(this,we)):this.options.refetchInterval)??!1},Dd=function(e){ge(this,Ce,Vd).call(this),Q(this,xn,e),!(Ns||Gt(this.options.enabled,D(this,we))===!1||!jd(D(this,xn))||D(this,xn)===0)&&Q(this,ms,setInterval(()=>{(this.options.refetchIntervalInBackground||jf.isFocused())&&ge(this,Ce,vi).call(this)},D(this,xn)))},Od=function(){ge(this,Ce,Pd).call(this),ge(this,Ce,Dd).call(this,ge(this,Ce,Md).call(this))},Ld=function(){D(this,fs)&&(clearTimeout(D(this,fs)),Q(this,fs,void 0))},Vd=function(){D(this,ms)&&(clearInterval(D(this,ms)),Q(this,ms,void 0))},Fd=function(){const e=D(this,It).getQueryCache().build(D(this,It),this.options);if(e===D(this,we))return;const t=D(this,we);Q(this,we,e),Q(this,Qi,e.state),this.hasListeners()&&(t==null||t.removeObserver(this),e.addObserver(this))},_w=function(e){nt.batch(()=>{e.listeners&&this.listeners.forEach(t=>{t(D(this,kt))}),D(this,It).getQueryCache().notify({query:D(this,we),type:"observerResultsUpdated"})})},By);function M4(r,e){return Gt(e.enabled,r)!==!1&&r.state.data===void 0&&!(r.state.status==="error"&&e.retryOnMount===!1)}function ay(r,e){return M4(r,e)||r.state.data!==void 0&&Ud(r,e,e.refetchOnMount)}function Ud(r,e,t){if(Gt(e.enabled,r)!==!1&&kn(e.staleTime,r)!=="static"){const n=typeof t=="function"?t(r):t;return n==="always"||n!==!1&&If(r,e)}return!1}function ly(r,e,t,n){return(r!==e||Gt(n.enabled,r)===!1)&&(!t.suspense||r.state.status!=="error")&&If(r,t)}function If(r,e){return Gt(e.enabled,r)!==!1&&r.isStaleByTime(kn(e.staleTime,r))}function D4(r,e){return!$l(r.getCurrentResult(),e)}var bn,vn,At,Lr,$r,ll,$d,zy,O4=(zy=class extends qo{constructor(t,n){super();ne(this,$r);ne(this,bn);ne(this,vn);ne(this,At);ne(this,Lr);Q(this,bn,t),this.setOptions(n),this.bindMethods(),ge(this,$r,ll).call(this)}bindMethods(){this.mutate=this.mutate.bind(this),this.reset=this.reset.bind(this)}setOptions(t){var s;const n=this.options;this.options=D(this,bn).defaultMutationOptions(t),$l(this.options,n)||D(this,bn).getMutationCache().notify({type:"observerOptionsUpdated",mutation:D(this,At),observer:this}),n!=null&&n.mutationKey&&this.options.mutationKey&&Cs(n.mutationKey)!==Cs(this.options.mutationKey)?this.reset():((s=D(this,At))==null?void 0:s.state.status)==="pending"&&D(this,At).setOptions(this.options)}onUnsubscribe(){var t;this.hasListeners()||(t=D(this,At))==null||t.removeObserver(this)}onMutationUpdate(t){ge(this,$r,ll).call(this),ge(this,$r,$d).call(this,t)}getCurrentResult(){return D(this,vn)}reset(){var t;(t=D(this,At))==null||t.removeObserver(this),Q(this,At,void 0),ge(this,$r,ll).call(this),ge(this,$r,$d).call(this)}mutate(t,n){var s;return Q(this,Lr,n),(s=D(this,At))==null||s.removeObserver(this),Q(this,At,D(this,bn).getMutationCache().build(D(this,bn),this.options)),D(this,At).addObserver(this),D(this,At).execute(t)}},bn=new WeakMap,vn=new WeakMap,At=new WeakMap,Lr=new WeakMap,$r=new WeakSet,ll=function(){var n;const t=((n=D(this,At))==null?void 0:n.state)??ww();Q(this,vn,{...t,isPending:t.status==="pending",isSuccess:t.status==="success",isError:t.status==="error",isIdle:t.status==="idle",mutate:this.mutate,reset:this.reset})},$d=function(t){nt.batch(()=>{var n,s,i,a,l,u,d,h;if(D(this,Lr)&&this.hasListeners()){const m=D(this,vn).variables,g=D(this,vn).context;(t==null?void 0:t.type)==="success"?((s=(n=D(this,Lr)).onSuccess)==null||s.call(n,t.data,m,g),(a=(i=D(this,Lr)).onSettled)==null||a.call(i,t.data,null,m,g)):(t==null?void 0:t.type)==="error"&&((u=(l=D(this,Lr)).onError)==null||u.call(l,t.error,m,g),(h=(d=D(this,Lr)).onSettled)==null||h.call(d,void 0,t.error,m,g))}this.listeners.forEach(m=>{m(D(this,vn))})})},zy),Tw=p.createContext(void 0),Ac=r=>{const e=p.useContext(Tw);if(!e)throw new Error("No QueryClient set, use QueryClientProvider to set one");return e},L4=({client:r,children:e})=>(p.useEffect(()=>(r.mount(),()=>{r.unmount()}),[r]),o.jsx(Tw.Provider,{value:r,children:e})),Ew=p.createContext(!1),V4=()=>p.useContext(Ew);Ew.Provider;function F4(){let r=!1;return{clearReset:()=>{r=!1},reset:()=>{r=!0},isReset:()=>r}}var U4=p.createContext(F4()),$4=()=>p.useContext(U4),B4=(r,e)=>{(r.suspense||r.throwOnError||r.experimental_prefetchInRender)&&(e.isReset()||(r.retryOnMount=!1))},z4=r=>{p.useEffect(()=>{r.clearReset()},[r])},q4=({result:r,errorResetBoundary:e,throwOnError:t,query:n,suspense:s})=>r.isError&&!e.isReset()&&!r.isFetching&&n&&(s&&r.data===void 0||pw(t,[r.error,n])),H4=r=>{if(r.suspense){const e=n=>n==="static"?n:Math.max(n??1e3,1e3),t=r.staleTime;r.staleTime=typeof t=="function"?(...n)=>e(t(...n)):e(t),typeof r.gcTime=="number"&&(r.gcTime=Math.max(r.gcTime,1e3))}},W4=(r,e)=>r.isLoading&&r.isFetching&&!e,G4=(r,e)=>(r==null?void 0:r.suspense)&&e.isPending,cy=(r,e,t)=>e.fetchOptimistic(r).catch(()=>{t.clearReset()});function K4(r,e,t){var m,g,x,S,b;const n=V4(),s=$4(),i=Ac(),a=i.defaultQueryOptions(r);(g=(m=i.getDefaultOptions().queries)==null?void 0:m._experimental_beforeQuery)==null||g.call(m,a),a._optimisticResults=n?"isRestoring":"optimistic",H4(a),B4(a,s),z4(s);const l=!i.getQueryCache().get(a.queryHash),[u]=p.useState(()=>new e(i,a)),d=u.getOptimisticResult(a),h=!n&&r.subscribed!==!1;if(p.useSyncExternalStore(p.useCallback(v=>{const E=h?u.subscribe(nt.batchCalls(v)):jt;return u.updateResult(),E},[u,h]),()=>u.getCurrentResult(),()=>u.getCurrentResult()),p.useEffect(()=>{u.setOptions(a)},[a,u]),G4(a,d))throw cy(a,u,s);if(q4({result:d,errorResetBoundary:s,throwOnError:a.throwOnError,query:i.getQueryCache().get(a.queryHash),suspense:a.suspense}))throw d.error;if((S=(x=i.getDefaultOptions().queries)==null?void 0:x._experimental_afterQuery)==null||S.call(x,a,d),a.experimental_prefetchInRender&&!Ns&&W4(d,n)){const v=l?cy(a,u,s):(b=i.getQueryCache().get(a.queryHash))==null?void 0:b.promise;v==null||v.catch(jt).finally(()=>{u.updateResult()})}return a.notifyOnChangeProps?d:u.trackResult(d)}function Ri(r,e){return K4(r,P4)}function Gs(r,e){const t=Ac(),[n]=p.useState(()=>new O4(t,r));p.useEffect(()=>{n.setOptions(r)},[n,r]);const s=p.useSyncExternalStore(p.useCallback(a=>n.subscribe(nt.batchCalls(a)),[n]),()=>n.getCurrentResult(),()=>n.getCurrentResult()),i=p.useCallback((a,l)=>{n.mutate(a,l).catch(jt)},[n]);if(s.error&&pw(n.options.throwOnError,[s.error]))throw s.error;return{...s,mutate:i,mutateAsync:s.mutate}}const Nw=r=>ew(Dr,r),Af=async(r,e,t)=>{const n=Nw(r);try{n.start(),t&&Object.entries(t).forEach(([i,a])=>{try{n.setAttribute&&n.setAttribute(i,a.toString())}catch{console.debug("setAttribute not available for trace:",i)}});const s=await e();try{n.addMetric&&n.addMetric("success",1)}catch{console.debug("addMetric not available for trace")}return s}catch(s){try{n.addMetric&&n.addMetric("error",1),n.setAttribute&&n.setAttribute("error_message",s instanceof Error?s.message:"Unknown error")}catch{console.debug("Metrics not available for trace")}throw s}finally{n.stop()}},Cw=r=>{const e=Nw(`page_load_${r}`);e.start(),document.readyState==="loading"?document.addEventListener("DOMContentLoaded",()=>{e.stop()}):e.stop()},Q4=()=>{Cw("app_initialization"),console.log("Firebase Performance Monitoring initialized")};async function kw(r){if(!r.ok){const e=await r.text()||r.statusText;throw new Error(`${r.status}: ${e}`)}}async function Sw(r,e,t){return Af(`api_request_${r.toLowerCase()}`,async()=>{const n=await fetch(e,{method:r,headers:t?{"Content-Type":"application/json"}:{},body:t?JSON.stringify(t):void 0,credentials:"include"});return await kw(n),n},{method:r.length,url_length:e.length,has_data:t?1:0})}const Y4=({on401:r})=>async({queryKey:e})=>Af(`query_function_${e[0]}`,async()=>{const t=await fetch(e[0],{credentials:"include"});r==="returnNull"&&t.status,await kw(t);const n=t.headers.get("content-type");if(!n||!n.includes("application/json"))return console.log("Non-JSON response detected, skipping parse"),null;const s=await t.text();if(!s||s.trim()===""||s==="undefined")return console.log("Empty or undefined response, returning null"),null;try{return JSON.parse(s)}catch(i){return console.error("JSON parse error for query:",e[0],"Error:",i,"Response text:",s),null}},{query_key_length:e.length,unauthorized_behavior:0}),X4=new R4({defaultOptions:{queries:{queryFn:Y4({on401:"throw"}),refetchInterval:!1,refetchOnWindowFocus:!1,staleTime:1/0,retry:!1},mutations:{retry:!1}}}),J4=3,Z4=5e3;let Vu=0;function eM(){return Vu=(Vu+1)%Number.MAX_SAFE_INTEGER,Vu.toString()}const Fu=new Map,uy=r=>{if(Fu.has(r))return;const e=setTimeout(()=>{Fu.delete(r),Pi({type:"REMOVE_TOAST",toastId:r})},Z4);Fu.set(r,e)},tM=(r,e)=>{switch(e.type){case"ADD_TOAST":return{...r,toasts:[e.toast,...r.toasts].slice(0,J4)};case"UPDATE_TOAST":return{...r,toasts:r.toasts.map(t=>t.id===e.toast.id?{...t,...e.toast}:t)};case"DISMISS_TOAST":{const{toastId:t}=e;return t?uy(t):r.toasts.forEach(n=>{uy(n.id)}),{...r,toasts:r.toasts.map(n=>n.id===t||t===void 0?{...n,open:!1}:n)}}case"REMOVE_TOAST":return e.toastId===void 0?{...r,toasts:[]}:{...r,toasts:r.toasts.filter(t=>t.id!==e.toastId)}}},cl=[];let ul={toasts:[]};function Pi(r){ul=tM(ul,r),cl.forEach(e=>{e(ul)})}function ha({...r}){const e=eM(),t=s=>Pi({type:"UPDATE_TOAST",toast:{...s,id:e}}),n=()=>Pi({type:"DISMISS_TOAST",toastId:e});return Pi({type:"ADD_TOAST",toast:{...r,id:e,open:!0,onOpenChange:s=>{s||n()}}}),{id:e,dismiss:n,update:t}}function rM({title:r,description:e,...t}){return ha({title:r,description:e,variant:"default",...t})}function nM({title:r,description:e,...t}){return ha({title:r,description:e,variant:"error",...t})}function sM({title:r,description:e,...t}){return ha({title:r,description:e,variant:"default",...t})}function oM({title:r,description:e,...t}){return ha({title:r,description:e,variant:"default",...t})}function Sr(){const[r,e]=p.useState(ul);return p.useEffect(()=>(cl.push(e),()=>{const t=cl.indexOf(e);t>-1&&cl.splice(t,1)}),[r]),{...r,toast:ha,successToast:rM,errorToast:nM,infoToast:sM,warningToast:oM,dismiss:t=>Pi({type:"DISMISS_TOAST",toastId:t})}}var iM=Object.freeze({position:"absolute",border:0,width:1,height:1,padding:0,margin:-1,overflow:"hidden",clip:"rect(0, 0, 0, 0)",whiteSpace:"nowrap",wordWrap:"normal"}),aM="VisuallyHidden",Rc=p.forwardRef((r,e)=>o.jsx(De.span,{...r,ref:e,style:{...iM,...r.style}}));Rc.displayName=aM;var lM=Rc,Rf="ToastProvider",[Pf,cM,uM]=XT("Toast"),[jw,XL]=$n("Toast",[uM]),[dM,Pc]=jw(Rf),Iw=r=>{const{__scopeToast:e,label:t="Notification",duration:n=5e3,swipeDirection:s="right",swipeThreshold:i=50,children:a}=r,[l,u]=p.useState(null),[d,h]=p.useState(0),m=p.useRef(!1),g=p.useRef(!1);return t.trim()||console.error(`Invalid prop \`label\` supplied to \`${Rf}\`. Expected non-empty \`string\`.`),o.jsx(Pf.Provider,{scope:e,children:o.jsx(dM,{scope:e,label:t,duration:n,swipeDirection:s,swipeThreshold:i,toastCount:d,viewport:l,onViewportChange:u,onToastAdd:p.useCallback(()=>h(x=>x+1),[]),onToastRemove:p.useCallback(()=>h(x=>x-1),[]),isFocusedToastEscapeKeyDownRef:m,isClosePausedRef:g,children:a})})};Iw.displayName=Rf;var Aw="ToastViewport",hM=["F8"],Bd="toast.viewportPause",zd="toast.viewportResume",Rw=p.forwardRef((r,e)=>{const{__scopeToast:t,hotkey:n=hM,label:s="Notifications ({hotkey})",...i}=r,a=Pc(Aw,t),l=cM(t),u=p.useRef(null),d=p.useRef(null),h=p.useRef(null),m=p.useRef(null),g=at(e,m,a.onViewportChange),x=n.join("+").replace(/Key/g,"").replace(/Digit/g,""),S=a.toastCount>0;p.useEffect(()=>{const v=E=>{var N;n.length!==0&&n.every(P=>E[P]||E.code===P)&&((N=m.current)==null||N.focus())};return document.addEventListener("keydown",v),()=>document.removeEventListener("keydown",v)},[n]),p.useEffect(()=>{const v=u.current,E=m.current;if(S&&v&&E){const T=()=>{if(!a.isClosePausedRef.current){const U=new CustomEvent(Bd);E.dispatchEvent(U),a.isClosePausedRef.current=!0}},N=()=>{if(a.isClosePausedRef.current){const U=new CustomEvent(zd);E.dispatchEvent(U),a.isClosePausedRef.current=!1}},P=U=>{!v.contains(U.relatedTarget)&&N()},F=()=>{v.contains(document.activeElement)||N()};return v.addEventListener("focusin",T),v.addEventListener("focusout",P),v.addEventListener("pointermove",T),v.addEventListener("pointerleave",F),window.addEventListener("blur",T),window.addEventListener("focus",N),()=>{v.removeEventListener("focusin",T),v.removeEventListener("focusout",P),v.removeEventListener("pointermove",T),v.removeEventListener("pointerleave",F),window.removeEventListener("blur",T),window.removeEventListener("focus",N)}}},[S,a.isClosePausedRef]);const b=p.useCallback(({tabbingDirection:v})=>{const T=l().map(N=>{const P=N.ref.current,F=[P,...NM(P)];return v==="forwards"?F:F.reverse()});return(v==="forwards"?T.reverse():T).flat()},[l]);return p.useEffect(()=>{const v=m.current;if(v){const E=T=>{var F,U,A;const N=T.altKey||T.ctrlKey||T.metaKey;if(T.key==="Tab"&&!N){const w=document.activeElement,C=T.shiftKey;if(T.target===v&&C){(F=d.current)==null||F.focus();return}const M=b({tabbingDirection:C?"backwards":"forwards"}),I=M.findIndex(X=>X===w);Uu(M.slice(I+1))?T.preventDefault():C?(U=d.current)==null||U.focus():(A=h.current)==null||A.focus()}};return v.addEventListener("keydown",E),()=>v.removeEventListener("keydown",E)}},[l,b]),o.jsxs(JT,{ref:u,role:"region","aria-label":s.replace("{hotkey}",x),tabIndex:-1,style:{pointerEvents:S?void 0:"none"},children:[S&&o.jsx(qd,{ref:d,onFocusFromOutsideViewport:()=>{const v=b({tabbingDirection:"forwards"});Uu(v)}}),o.jsx(Pf.Slot,{scope:t,children:o.jsx(De.ol,{tabIndex:-1,...i,ref:g})}),S&&o.jsx(qd,{ref:h,onFocusFromOutsideViewport:()=>{const v=b({tabbingDirection:"backwards"});Uu(v)}})]})});Rw.displayName=Aw;var Pw="ToastFocusProxy",qd=p.forwardRef((r,e)=>{const{__scopeToast:t,onFocusFromOutsideViewport:n,...s}=r,i=Pc(Pw,t);return o.jsx(Rc,{"aria-hidden":!0,tabIndex:0,...s,ref:e,style:{position:"fixed"},onFocus:a=>{var d;const l=a.relatedTarget;!((d=i.viewport)!=null&&d.contains(l))&&n()}})});qd.displayName=Pw;var fa="Toast",fM="toast.swipeStart",mM="toast.swipeMove",pM="toast.swipeCancel",gM="toast.swipeEnd",Mw=p.forwardRef((r,e)=>{const{forceMount:t,open:n,defaultOpen:s,onOpenChange:i,...a}=r,[l,u]=Do({prop:n,defaultProp:s??!0,onChange:i,caller:fa});return o.jsx(kr,{present:t||l,children:o.jsx(bM,{open:l,...a,ref:e,onClose:()=>u(!1),onPause:or(r.onPause),onResume:or(r.onResume),onSwipeStart:_e(r.onSwipeStart,d=>{d.currentTarget.setAttribute("data-swipe","start")}),onSwipeMove:_e(r.onSwipeMove,d=>{const{x:h,y:m}=d.detail.delta;d.currentTarget.setAttribute("data-swipe","move"),d.currentTarget.style.setProperty("--radix-toast-swipe-move-x",`${h}px`),d.currentTarget.style.setProperty("--radix-toast-swipe-move-y",`${m}px`)}),onSwipeCancel:_e(r.onSwipeCancel,d=>{d.currentTarget.setAttribute("data-swipe","cancel"),d.currentTarget.style.removeProperty("--radix-toast-swipe-move-x"),d.currentTarget.style.removeProperty("--radix-toast-swipe-move-y"),d.currentTarget.style.removeProperty("--radix-toast-swipe-end-x"),d.currentTarget.style.removeProperty("--radix-toast-swipe-end-y")}),onSwipeEnd:_e(r.onSwipeEnd,d=>{const{x:h,y:m}=d.detail.delta;d.currentTarget.setAttribute("data-swipe","end"),d.currentTarget.style.removeProperty("--radix-toast-swipe-move-x"),d.currentTarget.style.removeProperty("--radix-toast-swipe-move-y"),d.currentTarget.style.setProperty("--radix-toast-swipe-end-x",`${h}px`),d.currentTarget.style.setProperty("--radix-toast-swipe-end-y",`${m}px`),u(!1)})})})});Mw.displayName=fa;var[yM,xM]=jw(fa,{onClose(){}}),bM=p.forwardRef((r,e)=>{const{__scopeToast:t,type:n="foreground",duration:s,open:i,onClose:a,onEscapeKeyDown:l,onPause:u,onResume:d,onSwipeStart:h,onSwipeMove:m,onSwipeCancel:g,onSwipeEnd:x,...S}=r,b=Pc(fa,t),[v,E]=p.useState(null),T=at(e,X=>E(X)),N=p.useRef(null),P=p.useRef(null),F=s||b.duration,U=p.useRef(0),A=p.useRef(F),w=p.useRef(0),{onToastAdd:C,onToastRemove:j}=b,_=or(()=>{var le;(v==null?void 0:v.contains(document.activeElement))&&((le=b.viewport)==null||le.focus()),a()}),M=p.useCallback(X=>{!X||X===1/0||(window.clearTimeout(w.current),U.current=new Date().getTime(),w.current=window.setTimeout(_,X))},[_]);p.useEffect(()=>{const X=b.viewport;if(X){const le=()=>{M(A.current),d==null||d()},he=()=>{const ee=new Date().getTime()-U.current;A.current=A.current-ee,window.clearTimeout(w.current),u==null||u()};return X.addEventListener(Bd,he),X.addEventListener(zd,le),()=>{X.removeEventListener(Bd,he),X.removeEventListener(zd,le)}}},[b.viewport,F,u,d,M]),p.useEffect(()=>{i&&!b.isClosePausedRef.current&&M(F)},[i,F,b.isClosePausedRef,M]),p.useEffect(()=>(C(),()=>j()),[C,j]);const I=p.useMemo(()=>v?$w(v):null,[v]);return b.viewport?o.jsxs(o.Fragment,{children:[I&&o.jsx(vM,{__scopeToast:t,role:"status","aria-live":n==="foreground"?"assertive":"polite","aria-atomic":!0,children:I}),o.jsx(yM,{scope:t,onClose:_,children:ZT.createPortal(o.jsx(Pf.ItemSlot,{scope:t,children:o.jsx(eE,{asChild:!0,onEscapeKeyDown:_e(l,()=>{b.isFocusedToastEscapeKeyDownRef.current||_(),b.isFocusedToastEscapeKeyDownRef.current=!1}),children:o.jsx(De.li,{role:"status","aria-live":"off","aria-atomic":!0,tabIndex:0,"data-state":i?"open":"closed","data-swipe-direction":b.swipeDirection,...S,ref:T,style:{userSelect:"none",touchAction:"none",...r.style},onKeyDown:_e(r.onKeyDown,X=>{X.key==="Escape"&&(l==null||l(X.nativeEvent),X.nativeEvent.defaultPrevented||(b.isFocusedToastEscapeKeyDownRef.current=!0,_()))}),onPointerDown:_e(r.onPointerDown,X=>{X.button===0&&(N.current={x:X.clientX,y:X.clientY})}),onPointerMove:_e(r.onPointerMove,X=>{if(!N.current)return;const le=X.clientX-N.current.x,he=X.clientY-N.current.y,ee=!!P.current,R=["left","right"].includes(b.swipeDirection),z=["left","up"].includes(b.swipeDirection)?Math.min:Math.max,H=R?z(0,le):0,xe=R?0:z(0,he),ze=X.pointerType==="touch"?10:2,W={x:H,y:xe},J={originalEvent:X,delta:W};ee?(P.current=W,Ka(mM,m,J,{discrete:!1})):dy(W,b.swipeDirection,ze)?(P.current=W,Ka(fM,h,J,{discrete:!1}),X.target.setPointerCapture(X.pointerId)):(Math.abs(le)>ze||Math.abs(he)>ze)&&(N.current=null)}),onPointerUp:_e(r.onPointerUp,X=>{const le=P.current,he=X.target;if(he.hasPointerCapture(X.pointerId)&&he.releasePointerCapture(X.pointerId),P.current=null,N.current=null,le){const ee=X.currentTarget,R={originalEvent:X,delta:le};dy(le,b.swipeDirection,b.swipeThreshold)?Ka(gM,x,R,{discrete:!0}):Ka(pM,g,R,{discrete:!0}),ee.addEventListener("click",z=>z.preventDefault(),{once:!0})}})})})}),b.viewport)})]}):null}),vM=r=>{const{__scopeToast:e,children:t,...n}=r,s=Pc(fa,e),[i,a]=p.useState(!1),[l,u]=p.useState(!1);return TM(()=>a(!0)),p.useEffect(()=>{const d=window.setTimeout(()=>u(!0),1e3);return()=>window.clearTimeout(d)},[]),l?null:o.jsx(qy,{asChild:!0,children:o.jsx(Rc,{...n,children:i&&o.jsxs(o.Fragment,{children:[s.label," ",t]})})})},wM="ToastTitle",Dw=p.forwardRef((r,e)=>{const{__scopeToast:t,...n}=r;return o.jsx(De.div,{...n,ref:e})});Dw.displayName=wM;var _M="ToastDescription",Ow=p.forwardRef((r,e)=>{const{__scopeToast:t,...n}=r;return o.jsx(De.div,{...n,ref:e})});Ow.displayName=_M;var Lw="ToastAction",Vw=p.forwardRef((r,e)=>{const{altText:t,...n}=r;return t.trim()?o.jsx(Uw,{altText:t,asChild:!0,children:o.jsx(Mf,{...n,ref:e})}):(console.error(`Invalid prop \`altText\` supplied to \`${Lw}\`. Expected non-empty \`string\`.`),null)});Vw.displayName=Lw;var Fw="ToastClose",Mf=p.forwardRef((r,e)=>{const{__scopeToast:t,...n}=r,s=xM(Fw,t);return o.jsx(Uw,{asChild:!0,children:o.jsx(De.button,{type:"button",...n,ref:e,onClick:_e(r.onClick,s.onClose)})})});Mf.displayName=Fw;var Uw=p.forwardRef((r,e)=>{const{__scopeToast:t,altText:n,...s}=r;return o.jsx(De.div,{"data-radix-toast-announce-exclude":"","data-radix-toast-announce-alt":n||void 0,...s,ref:e})});function $w(r){const e=[];return Array.from(r.childNodes).forEach(n=>{if(n.nodeType===n.TEXT_NODE&&n.textContent&&e.push(n.textContent),EM(n)){const s=n.ariaHidden||n.hidden||n.style.display==="none",i=n.dataset.radixToastAnnounceExclude==="";if(!s)if(i){const a=n.dataset.radixToastAnnounceAlt;a&&e.push(a)}else e.push(...$w(n))}}),e}function Ka(r,e,t,{discrete:n}){const s=t.originalEvent.currentTarget,i=new CustomEvent(r,{bubbles:!0,cancelable:!0,detail:t});e&&s.addEventListener(r,e,{once:!0}),n?tE(s,i):s.dispatchEvent(i)}var dy=(r,e,t=0)=>{const n=Math.abs(r.x),s=Math.abs(r.y),i=n>s;return e==="left"||e==="right"?i&&n>t:!i&&s>t};function TM(r=()=>{}){const e=or(r);Hy(()=>{let t=0,n=0;return t=window.requestAnimationFrame(()=>n=window.requestAnimationFrame(e)),()=>{window.cancelAnimationFrame(t),window.cancelAnimationFrame(n)}},[e])}function EM(r){return r.nodeType===r.ELEMENT_NODE}function NM(r){const e=[],t=document.createTreeWalker(r,NodeFilter.SHOW_ELEMENT,{acceptNode:n=>{const s=n.tagName==="INPUT"&&n.type==="hidden";return n.disabled||n.hidden||s?NodeFilter.FILTER_SKIP:n.tabIndex>=0?NodeFilter.FILTER_ACCEPT:NodeFilter.FILTER_SKIP}});for(;t.nextNode();)e.push(t.currentNode);return e}function Uu(r){const e=document.activeElement;return r.some(t=>t===e?!0:(t.focus(),document.activeElement!==e))}var CM=Iw,Bw=Rw,zw=Mw,qw=Dw,Hw=Ow,Ww=Vw,Gw=Mf;function Kw(r){var e,t,n="";if(typeof r=="string"||typeof r=="number")n+=r;else if(typeof r=="object")if(Array.isArray(r)){var s=r.length;for(e=0;e<s;e++)r[e]&&(t=Kw(r[e]))&&(n&&(n+=" "),n+=t)}else for(t in r)r[t]&&(n&&(n+=" "),n+=t);return n}function Qw(){for(var r,e,t=0,n="",s=arguments.length;t<s;t++)(r=arguments[t])&&(e=Kw(r))&&(n&&(n+=" "),n+=e);return n}const hy=r=>typeof r=="boolean"?`${r}`:r===0?"0":r,fy=Qw,Mc=(r,e)=>t=>{var n;if((e==null?void 0:e.variants)==null)return fy(r,t==null?void 0:t.class,t==null?void 0:t.className);const{variants:s,defaultVariants:i}=e,a=Object.keys(s).map(d=>{const h=t==null?void 0:t[d],m=i==null?void 0:i[d];if(h===null)return null;const g=hy(h)||hy(m);return s[d][g]}),l=t&&Object.entries(t).reduce((d,h)=>{let[m,g]=h;return g===void 0||(d[m]=g),d},{}),u=e==null||(n=e.compoundVariants)===null||n===void 0?void 0:n.reduce((d,h)=>{let{class:m,className:g,...x}=h;return Object.entries(x).every(S=>{let[b,v]=S;return Array.isArray(v)?v.includes({...i,...l}[b]):{...i,...l}[b]===v})?[...d,m,g]:d},[]);return fy(r,a,u,t==null?void 0:t.class,t==null?void 0:t.className)};/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const kM=r=>r.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase(),Yw=(...r)=>r.filter((e,t,n)=>!!e&&n.indexOf(e)===t).join(" ");/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */var SM={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const jM=p.forwardRef(({color:r="currentColor",size:e=24,strokeWidth:t=2,absoluteStrokeWidth:n,className:s="",children:i,iconNode:a,...l},u)=>p.createElement("svg",{ref:u,...SM,width:e,height:e,stroke:r,strokeWidth:n?Number(t)*24/Number(e):t,className:Yw("lucide",s),...l},[...a.map(([d,h])=>p.createElement(d,h)),...Array.isArray(i)?i:[i]]));/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const G=(r,e)=>{const t=p.forwardRef(({className:n,...s},i)=>p.createElement(jM,{ref:i,iconNode:e,className:Yw(`lucide-${kM(r)}`,n),...s}));return t.displayName=`${r}`,t};/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Hd=G("Activity",[["path",{d:"M22 12h-2.48a2 2 0 0 0-1.93 1.46l-2.35 8.36a.25.25 0 0 1-.48 0L9.24 2.18a.25.25 0 0 0-.48 0l-2.35 8.36A2 2 0 0 1 4.49 12H2",key:"169zse"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const IM=G("Archive",[["rect",{width:"20",height:"5",x:"2",y:"3",rx:"1",key:"1wp1u1"}],["path",{d:"M4 8v11a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V8",key:"1s80jp"}],["path",{d:"M10 12h4",key:"a56b0p"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ma=G("ArrowLeft",[["path",{d:"m12 19-7-7 7-7",key:"1l729n"}],["path",{d:"M19 12H5",key:"x3x0zl"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const os=G("Calendar",[["path",{d:"M8 2v4",key:"1cmpym"}],["path",{d:"M16 2v4",key:"4m81vk"}],["rect",{width:"18",height:"18",x:"3",y:"4",rx:"2",key:"1hopcy"}],["path",{d:"M3 10h18",key:"8toen8"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Xw=G("Camera",[["path",{d:"M14.5 4h-5L7 7H4a2 2 0 0 0-2 2v9a2 2 0 0 0 2 2h16a2 2 0 0 0 2-2V9a2 2 0 0 0-2-2h-3l-2.5-3z",key:"1tc9qg"}],["circle",{cx:"12",cy:"13",r:"3",key:"1vg3eu"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const AM=G("ChartColumn",[["path",{d:"M3 3v16a2 2 0 0 0 2 2h16",key:"c24i48"}],["path",{d:"M18 17V9",key:"2bz60n"}],["path",{d:"M13 17V5",key:"1frdt8"}],["path",{d:"M8 17v-3",key:"17ska0"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const pa=G("Check",[["path",{d:"M20 6 9 17l-5-5",key:"1gmf2c"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const zl=G("ChevronDown",[["path",{d:"m6 9 6 6 6-6",key:"qrunsl"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const RM=G("ChevronLeft",[["path",{d:"m15 18-6-6 6-6",key:"1wnfg3"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Jw=G("ChevronRight",[["path",{d:"m9 18 6-6-6-6",key:"mthhwq"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Zw=G("CircleAlert",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["line",{x1:"12",x2:"12",y1:"8",y2:"12",key:"1pkeuh"}],["line",{x1:"12",x2:"12.01",y1:"16",y2:"16",key:"4dfq90"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ks=G("CircleCheckBig",[["path",{d:"M21.801 10A10 10 0 1 1 17 3.335",key:"yps3ct"}],["path",{d:"m9 11 3 3L22 4",key:"1pflzl"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const PM=G("CircleX",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"m15 9-6 6",key:"1uzhvr"}],["path",{d:"m9 9 6 6",key:"z0biqf"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const MM=G("Circle",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const e_=G("Clock",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["polyline",{points:"12 6 12 12 16 14",key:"68esgv"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const DM=G("Copy",[["rect",{width:"14",height:"14",x:"8",y:"8",rx:"2",ry:"2",key:"17jyea"}],["path",{d:"M4 16c-1.1 0-2-.9-2-2V4c0-1.1.9-2 2-2h10c1.1 0 2 .9 2 2",key:"zix9uf"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Wd=G("CreditCard",[["rect",{width:"20",height:"14",x:"2",y:"5",rx:"2",key:"ynyp8z"}],["line",{x1:"2",x2:"22",y1:"10",y2:"10",key:"1b3vmo"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const dr=G("Crown",[["path",{d:"M11.562 3.266a.5.5 0 0 1 .876 0L15.39 8.87a1 1 0 0 0 1.516.294L21.183 5.5a.5.5 0 0 1 .798.519l-2.834 10.246a1 1 0 0 1-.956.734H5.81a1 1 0 0 1-.957-.734L2.02 6.02a.5.5 0 0 1 .798-.519l4.276 3.664a1 1 0 0 0 1.516-.294z",key:"1vdc57"}],["path",{d:"M5 21h14",key:"11awu3"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const OM=G("Database",[["ellipse",{cx:"12",cy:"5",rx:"9",ry:"3",key:"msslwz"}],["path",{d:"M3 5V19A9 3 0 0 0 21 19V5",key:"1wlel7"}],["path",{d:"M3 12A9 3 0 0 0 21 12",key:"mv7ke4"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const LM=G("Download",[["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}],["polyline",{points:"7 10 12 15 17 10",key:"2ggqvy"}],["line",{x1:"12",x2:"12",y1:"15",y2:"3",key:"1vk2je"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const VM=G("EyeOff",[["path",{d:"M10.733 5.076a10.744 10.744 0 0 1 11.205 6.575 1 1 0 0 1 0 .696 10.747 10.747 0 0 1-1.444 2.49",key:"ct8e1f"}],["path",{d:"M14.084 14.158a3 3 0 0 1-4.242-4.242",key:"151rxh"}],["path",{d:"M17.479 17.499a10.75 10.75 0 0 1-15.417-5.151 1 1 0 0 1 0-.696 10.75 10.75 0 0 1 4.446-5.143",key:"13bj9a"}],["path",{d:"m2 2 20 20",key:"1ooewy"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const t_=G("Eye",[["path",{d:"M2.062 12.348a1 1 0 0 1 0-.696 10.75 10.75 0 0 1 19.876 0 1 1 0 0 1 0 .696 10.75 10.75 0 0 1-19.876 0",key:"1nclc0"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Gd=G("FileText",[["path",{d:"M15 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V7Z",key:"1rqfz7"}],["path",{d:"M14 2v4a2 2 0 0 0 2 2h4",key:"tnqrlb"}],["path",{d:"M10 9H8",key:"b1mrlr"}],["path",{d:"M16 13H8",key:"t4e002"}],["path",{d:"M16 17H8",key:"z1uh3a"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const FM=G("Flame",[["path",{d:"M8.5 14.5A2.5 2.5 0 0 0 11 12c0-1.38-.5-2-1-3-1.072-2.143-.224-4.054 2-6 .5 2.5 2 4.9 4 6.5 2 1.6 3 3.5 3 5.5a7 7 0 1 1-14 0c0-1.153.433-2.294 1-3a2.5 2.5 0 0 0 2.5 2.5z",key:"96xj49"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const dl=G("Globe",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M12 2a14.5 14.5 0 0 0 0 20 14.5 14.5 0 0 0 0-20",key:"13o1zl"}],["path",{d:"M2 12h20",key:"9i4pu4"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const UM=G("HardDrive",[["line",{x1:"22",x2:"2",y1:"12",y2:"12",key:"1y58io"}],["path",{d:"M5.45 5.11 2 12v6a2 2 0 0 0 2 2h16a2 2 0 0 0 2-2v-6l-3.45-6.89A2 2 0 0 0 16.76 4H7.24a2 2 0 0 0-1.79 1.11z",key:"oot6mr"}],["line",{x1:"6",x2:"6.01",y1:"16",y2:"16",key:"sgf278"}],["line",{x1:"10",x2:"10.01",y1:"16",y2:"16",key:"1l4acy"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Qs=G("Heart",[["path",{d:"M19 14c1.49-1.46 3-3.21 3-5.5A5.5 5.5 0 0 0 16.5 3c-1.76 0-3 .5-4.5 2-1.5-1.5-2.74-2-4.5-2A5.5 5.5 0 0 0 2 8.5c0 2.3 1.5 4.05 3 5.5l7 7Z",key:"c3ymky"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const r_=G("LoaderCircle",[["path",{d:"M21 12a9 9 0 1 1-6.219-8.56",key:"13zald"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Kd=G("Lock",[["rect",{width:"18",height:"11",x:"3",y:"11",rx:"2",ry:"2",key:"1w4ew1"}],["path",{d:"M7 11V7a5 5 0 0 1 10 0v4",key:"fwvmzm"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const n_=G("LogIn",[["path",{d:"M15 3h4a2 2 0 0 1 2 2v14a2 2 0 0 1-2 2h-4",key:"u53s6r"}],["polyline",{points:"10 17 15 12 10 7",key:"1ail0h"}],["line",{x1:"15",x2:"3",y1:"12",y2:"12",key:"v6grx8"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Qd=G("LogOut",[["path",{d:"M9 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h4",key:"1uf3rs"}],["polyline",{points:"16 17 21 12 16 7",key:"1gabdz"}],["line",{x1:"21",x2:"9",y1:"12",y2:"12",key:"1uyos4"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ql=G("Mail",[["rect",{width:"20",height:"16",x:"2",y:"4",rx:"2",key:"18n3k1"}],["path",{d:"m22 7-8.97 5.7a1.94 1.94 0 0 1-2.06 0L2 7",key:"1ocrg3"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Yd=G("MapPin",[["path",{d:"M20 10c0 4.993-5.539 10.193-7.399 11.799a1 1 0 0 1-1.202 0C9.539 20.193 4 14.993 4 10a8 8 0 0 1 16 0",key:"1r0f0z"}],["circle",{cx:"12",cy:"10",r:"3",key:"ilqhr7"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const $M=G("Maximize2",[["polyline",{points:"15 3 21 3 21 9",key:"mznyad"}],["polyline",{points:"9 21 3 21 3 15",key:"1avn1i"}],["line",{x1:"21",x2:"14",y1:"3",y2:"10",key:"ota7mn"}],["line",{x1:"3",x2:"10",y1:"21",y2:"14",key:"1atl0r"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const my=G("Menu",[["line",{x1:"4",x2:"20",y1:"12",y2:"12",key:"1e0a9i"}],["line",{x1:"4",x2:"20",y1:"6",y2:"6",key:"1owob3"}],["line",{x1:"4",x2:"20",y1:"18",y2:"18",key:"yk5zj1"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ys=G("MessageCircle",[["path",{d:"M7.9 20A9 9 0 1 0 4 16.1L2 22Z",key:"vv11sd"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const BM=G("MicOff",[["line",{x1:"2",x2:"22",y1:"2",y2:"22",key:"a6p6uj"}],["path",{d:"M18.89 13.23A7.12 7.12 0 0 0 19 12v-2",key:"80xlxr"}],["path",{d:"M5 10v2a7 7 0 0 0 12 5",key:"p2k8kg"}],["path",{d:"M15 9.34V5a3 3 0 0 0-5.68-1.33",key:"1gzdoj"}],["path",{d:"M9 9v3a3 3 0 0 0 5.12 2.12",key:"r2i35w"}],["line",{x1:"12",x2:"12",y1:"19",y2:"22",key:"x3vr5v"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const zM=G("Minimize2",[["polyline",{points:"4 14 10 14 10 20",key:"11kfnr"}],["polyline",{points:"20 10 14 10 14 4",key:"rlmsce"}],["line",{x1:"14",x2:"21",y1:"10",y2:"3",key:"o5lafz"}],["line",{x1:"3",x2:"10",y1:"21",y2:"14",key:"1atl0r"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const qM=G("Moon",[["path",{d:"M12 3a6 6 0 0 0 9 9 9 9 0 1 1-9-9Z",key:"a7tn18"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ao=G("Music",[["path",{d:"M9 18V5l12-2v13",key:"1jmyc2"}],["circle",{cx:"6",cy:"18",r:"3",key:"fqmcym"}],["circle",{cx:"18",cy:"16",r:"3",key:"1hluhg"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const HM=G("Network",[["rect",{x:"16",y:"16",width:"6",height:"6",rx:"1",key:"4q2zg0"}],["rect",{x:"2",y:"16",width:"6",height:"6",rx:"1",key:"8cvhb9"}],["rect",{x:"9",y:"2",width:"6",height:"6",rx:"1",key:"1egb70"}],["path",{d:"M5 16v-3a1 1 0 0 1 1-1h12a1 1 0 0 1 1 1v3",key:"1jsf9p"}],["path",{d:"M12 12V8",key:"2874zd"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ui=G("Package",[["path",{d:"M11 21.73a2 2 0 0 0 2 0l7-4A2 2 0 0 0 21 16V8a2 2 0 0 0-1-1.73l-7-4a2 2 0 0 0-2 0l-7 4A2 2 0 0 0 3 8v8a2 2 0 0 0 1 1.73z",key:"1a0edw"}],["path",{d:"M12 22V12",key:"d0xqtd"}],["path",{d:"m3.3 7 7.703 4.734a2 2 0 0 0 1.994 0L20.7 7",key:"yx3hmr"}],["path",{d:"m7.5 4.27 9 5.15",key:"1c824w"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const py=G("Palette",[["circle",{cx:"13.5",cy:"6.5",r:".5",fill:"currentColor",key:"1okk4w"}],["circle",{cx:"17.5",cy:"10.5",r:".5",fill:"currentColor",key:"f64h9f"}],["circle",{cx:"8.5",cy:"7.5",r:".5",fill:"currentColor",key:"fotxhn"}],["circle",{cx:"6.5",cy:"12.5",r:".5",fill:"currentColor",key:"qy21gx"}],["path",{d:"M12 2C6.5 2 2 6.5 2 12s4.5 10 10 10c.926 0 1.648-.746 1.648-1.688 0-.437-.18-.835-.437-1.125-.29-.289-.438-.652-.438-1.125a1.64 1.64 0 0 1 1.668-1.668h1.996c3.051 0 5.555-2.503 5.555-5.554C21.965 6.012 17.461 2 12 2z",key:"12rzf8"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Xd=G("Phone",[["path",{d:"M22 16.92v3a2 2 0 0 1-2.18 2 19.79 19.79 0 0 1-8.63-3.07 19.5 19.5 0 0 1-6-6 19.79 19.79 0 0 1-3.07-8.67A2 2 0 0 1 4.11 2h3a2 2 0 0 1 2 1.72 12.84 12.84 0 0 0 .7 2.81 2 2 0 0 1-.45 2.11L8.09 9.91a16 16 0 0 0 6 6l1.27-1.27a2 2 0 0 1 2.11-.45 12.84 12.84 0 0 0 2.81.7A2 2 0 0 1 22 16.92z",key:"foiqr5"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const WM=G("Play",[["polygon",{points:"6 3 20 12 6 21 6 3",key:"1oa8hb"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const GM=G("Plus",[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"M12 5v14",key:"s699le"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const zi=G("Radio",[["path",{d:"M4.9 19.1C1 15.2 1 8.8 4.9 4.9",key:"1vaf9d"}],["path",{d:"M7.8 16.2c-2.3-2.3-2.3-6.1 0-8.5",key:"u1ii0m"}],["circle",{cx:"12",cy:"12",r:"2",key:"1c9p78"}],["path",{d:"M16.2 7.8c2.3 2.3 2.3 6.1 0 8.5",key:"1j5fej"}],["path",{d:"M19.1 4.9C23 8.8 23 15.1 19.1 19",key:"10b0cb"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const KM=G("RefreshCw",[["path",{d:"M3 12a9 9 0 0 1 9-9 9.75 9.75 0 0 1 6.74 2.74L21 8",key:"v9h5vc"}],["path",{d:"M21 3v5h-5",key:"1q7to0"}],["path",{d:"M21 12a9 9 0 0 1-9 9 9.75 9.75 0 0 1-6.74-2.74L3 16",key:"3uifl3"}],["path",{d:"M8 16H3v5",key:"1cv678"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const QM=G("RotateCcw",[["path",{d:"M3 12a9 9 0 1 0 9-9 9.75 9.75 0 0 0-6.74 2.74L3 8",key:"1357e3"}],["path",{d:"M3 3v5h5",key:"1xhq8a"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const qi=G("Send",[["path",{d:"M14.536 21.686a.5.5 0 0 0 .937-.024l6.5-19a.496.496 0 0 0-.635-.635l-19 6.5a.5.5 0 0 0-.024.937l7.93 3.18a2 2 0 0 1 1.112 1.11z",key:"1ffxy3"}],["path",{d:"m21.854 2.147-10.94 10.939",key:"12cjpa"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const YM=G("Settings",[["path",{d:"M12.22 2h-.44a2 2 0 0 0-2 2v.18a2 2 0 0 1-1 1.73l-.43.25a2 2 0 0 1-2 0l-.15-.08a2 2 0 0 0-2.73.73l-.22.38a2 2 0 0 0 .73 2.73l.15.1a2 2 0 0 1 1 1.72v.51a2 2 0 0 1-1 1.74l-.15.09a2 2 0 0 0-.73 2.73l.22.38a2 2 0 0 0 2.73.73l.15-.08a2 2 0 0 1 2 0l.43.25a2 2 0 0 1 1 1.73V20a2 2 0 0 0 2 2h.44a2 2 0 0 0 2-2v-.18a2 2 0 0 1 1-1.73l.43-.25a2 2 0 0 1 2 0l.15.08a2 2 0 0 0 2.73-.73l.22-.39a2 2 0 0 0-.73-2.73l-.15-.08a2 2 0 0 1-1-1.74v-.5a2 2 0 0 1 1-1.74l.15-.09a2 2 0 0 0 .73-2.73l-.22-.38a2 2 0 0 0-2.73-.73l-.15.08a2 2 0 0 1-2 0l-.43-.25a2 2 0 0 1-1-1.73V4a2 2 0 0 0-2-2z",key:"1qme2f"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const XM=G("Share",[["path",{d:"M4 12v8a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2v-8",key:"1b2hhj"}],["polyline",{points:"16 6 12 2 8 6",key:"m901s6"}],["line",{x1:"12",x2:"12",y1:"2",y2:"15",key:"1p0rca"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const gy=G("Shirt",[["path",{d:"M20.38 3.46 16 2a4 4 0 0 1-8 0L3.62 3.46a2 2 0 0 0-1.34 2.23l.58 3.47a1 1 0 0 0 .99.84H6v10c0 1.1.9 2 2 2h8a2 2 0 0 0 2-2V10h2.15a1 1 0 0 0 .99-.84l.58-3.47a2 2 0 0 0-1.34-2.23z",key:"1wgbhj"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Df=G("ShoppingCart",[["circle",{cx:"8",cy:"21",r:"1",key:"jimo8o"}],["circle",{cx:"19",cy:"21",r:"1",key:"13723u"}],["path",{d:"M2.05 2.05h2l2.66 12.42a2 2 0 0 0 2 1.58h9.78a2 2 0 0 0 1.95-1.57l1.65-7.43H5.12",key:"9zh506"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const yy=G("Skull",[["path",{d:"m12.5 17-.5-1-.5 1h1z",key:"3me087"}],["path",{d:"M15 22a1 1 0 0 0 1-1v-1a2 2 0 0 0 1.56-3.25 8 8 0 1 0-11.12 0A2 2 0 0 0 8 20v1a1 1 0 0 0 1 1z",key:"1o5pge"}],["circle",{cx:"15",cy:"12",r:"1",key:"1tmaij"}],["circle",{cx:"9",cy:"12",r:"1",key:"1vctgf"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const s_=G("Sparkles",[["path",{d:"M9.937 15.5A2 2 0 0 0 8.5 14.063l-6.135-1.582a.5.5 0 0 1 0-.962L8.5 9.936A2 2 0 0 0 9.937 8.5l1.582-6.135a.5.5 0 0 1 .963 0L14.063 8.5A2 2 0 0 0 15.5 9.937l6.135 1.581a.5.5 0 0 1 0 .964L15.5 14.063a2 2 0 0 0-1.437 1.437l-1.582 6.135a.5.5 0 0 1-.963 0z",key:"4pj2yx"}],["path",{d:"M20 3v4",key:"1olli1"}],["path",{d:"M22 5h-4",key:"1gvqau"}],["path",{d:"M4 17v2",key:"vumght"}],["path",{d:"M5 18H3",key:"zchphs"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const JM=G("SquarePen",[["path",{d:"M12 3H5a2 2 0 0 0-2 2v14a2 2 0 0 0 2 2h14a2 2 0 0 0 2-2v-7",key:"1m0v6g"}],["path",{d:"M18.375 2.625a1 1 0 0 1 3 3l-9.013 9.014a2 2 0 0 1-.853.505l-2.873.84a.5.5 0 0 1-.62-.62l.84-2.873a2 2 0 0 1 .506-.852z",key:"ohrbg2"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ho=G("Star",[["polygon",{points:"12 2 15.09 8.26 22 9.27 17 14.14 18.18 21.02 12 17.77 5.82 21.02 7 14.14 2 9.27 8.91 8.26 12 2",key:"8f66p6"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ZM=G("Sun",[["circle",{cx:"12",cy:"12",r:"4",key:"4exip2"}],["path",{d:"M12 2v2",key:"tus03m"}],["path",{d:"M12 20v2",key:"1lh1kg"}],["path",{d:"m4.93 4.93 1.41 1.41",key:"149t6j"}],["path",{d:"m17.66 17.66 1.41 1.41",key:"ptbguv"}],["path",{d:"M2 12h2",key:"1t8f8n"}],["path",{d:"M20 12h2",key:"1q8mjw"}],["path",{d:"m6.34 17.66-1.41 1.41",key:"1m8zz5"}],["path",{d:"m19.07 4.93-1.41 1.41",key:"1shlcs"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const e5=G("Trash2",[["path",{d:"M3 6h18",key:"d0wm0j"}],["path",{d:"M19 6v14c0 1-1 2-2 2H7c-1 0-2-1-2-2V6",key:"4alrt4"}],["path",{d:"M8 6V4c0-1 1-2 2-2h4c1 0 2 1 2 2v2",key:"v07s0e"}],["line",{x1:"10",x2:"10",y1:"11",y2:"17",key:"1uufr5"}],["line",{x1:"14",x2:"14",y1:"11",y2:"17",key:"xtxkd"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const t5=G("TreePine",[["path",{d:"m17 14 3 3.3a1 1 0 0 1-.7 1.7H4.7a1 1 0 0 1-.7-1.7L7 14h-.3a1 1 0 0 1-.7-1.7L9 9h-.2A1 1 0 0 1 8 7.3L12 3l4 4.3a1 1 0 0 1-.8 1.7H15l3 3.3a1 1 0 0 1-.7 1.7H17Z",key:"cpyugq"}],["path",{d:"M12 22v-3",key:"kmzjlo"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const xy=G("TrendingUp",[["polyline",{points:"22 7 13.5 15.5 8.5 10.5 2 17",key:"126l90"}],["polyline",{points:"16 7 22 7 22 13",key:"kwv8wd"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const $u=G("TriangleAlert",[["path",{d:"m21.73 18-8-14a2 2 0 0 0-3.48 0l-8 14A2 2 0 0 0 4 21h16a2 2 0 0 0 1.73-3",key:"wmoenq"}],["path",{d:"M12 9v4",key:"juzpu7"}],["path",{d:"M12 17h.01",key:"p32p05"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const o_=G("Upload",[["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}],["polyline",{points:"17 8 12 3 7 8",key:"t8dd8p"}],["line",{x1:"12",x2:"12",y1:"3",y2:"15",key:"widbto"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const i_=G("UserPlus",[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}],["line",{x1:"19",x2:"19",y1:"8",y2:"14",key:"1bvyxn"}],["line",{x1:"22",x2:"16",y1:"11",y2:"11",key:"1shjgl"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Dt=G("User",[["path",{d:"M19 21v-2a4 4 0 0 0-4-4H9a4 4 0 0 0-4 4v2",key:"975kel"}],["circle",{cx:"12",cy:"7",r:"4",key:"17ys0d"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const r5=G("Users",[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}],["path",{d:"M22 21v-2a4 4 0 0 0-3-3.87",key:"kshegd"}],["path",{d:"M16 3.13a4 4 0 0 1 0 7.75",key:"1da9ce"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const n5=G("Volume2",[["path",{d:"M11 4.702a.705.705 0 0 0-1.203-.498L6.413 7.587A1.4 1.4 0 0 1 5.416 8H3a1 1 0 0 0-1 1v6a1 1 0 0 0 1 1h2.416a1.4 1.4 0 0 1 .997.413l3.383 3.384A.705.705 0 0 0 11 19.298z",key:"uqj9uw"}],["path",{d:"M16 9a5 5 0 0 1 0 6",key:"1q6k2b"}],["path",{d:"M19.364 18.364a9 9 0 0 0 0-12.728",key:"ijwkga"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const s5=G("VolumeX",[["path",{d:"M11 4.702a.705.705 0 0 0-1.203-.498L6.413 7.587A1.4 1.4 0 0 1 5.416 8H3a1 1 0 0 0-1 1v6a1 1 0 0 0 1 1h2.416a1.4 1.4 0 0 1 .997.413l3.383 3.384A.705.705 0 0 0 11 19.298z",key:"uqj9uw"}],["line",{x1:"22",x2:"16",y1:"9",y2:"15",key:"1ewh16"}],["line",{x1:"16",x2:"22",y1:"9",y2:"15",key:"5ykzw1"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Un=G("X",[["path",{d:"M18 6 6 18",key:"1bl5f8"}],["path",{d:"m6 6 12 12",key:"d8bk6v"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const a_=G("Zap",[["path",{d:"M4 14a1 1 0 0 1-.78-1.63l9.9-10.2a.5.5 0 0 1 .86.46l-1.92 6.02A1 1 0 0 0 13 10h7a1 1 0 0 1 .78 1.63l-9.9 10.2a.5.5 0 0 1-.86-.46l1.92-6.02A1 1 0 0 0 11 14z",key:"1xq2db"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const o5=G("ZoomIn",[["circle",{cx:"11",cy:"11",r:"8",key:"4ej97u"}],["line",{x1:"21",x2:"16.65",y1:"21",y2:"16.65",key:"13gj7c"}],["line",{x1:"11",x2:"11",y1:"8",y2:"14",key:"1vmskp"}],["line",{x1:"8",x2:"14",y1:"11",y2:"11",key:"durymu"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const i5=G("ZoomOut",[["circle",{cx:"11",cy:"11",r:"8",key:"4ej97u"}],["line",{x1:"21",x2:"16.65",y1:"21",y2:"16.65",key:"13gj7c"}],["line",{x1:"8",x2:"14",y1:"11",y2:"11",key:"durymu"}]]),Xs={"classic-metal":{name:"Classic Metal",description:"Traditional orange and black metal aesthetic",colors:{dark:{primary:"#ff6b35",primaryDark:"#e55a2b",primaryText:"#ffffff",secondary:"#ff8c42",accent:"#ff6b35",background:"#000000",surface:"#1a1a1a",text:"#ffffff",textSecondary:"#cccccc",textMuted:"#999999",border:"#333333",card:"#1a1a1a",cardBackground:"#1a1a1a"},light:{primary:"#d4510a",primaryDark:"#b8450a",primaryText:"#ffffff",secondary:"#e8630e",accent:"#d4510a",background:"#000000",surface:"#1a1a1a",text:"#ffffff",textSecondary:"#cccccc",textMuted:"#999999",border:"#333333",card:"#1a1a1a",cardBackground:"#1a1a1a"}},gradient:"linear-gradient(135deg, #ff6b35 0%, #ff8c42 100%)"},"black-metal":{name:"Black Metal",description:"Dark, atmospheric with silver accents",colors:{dark:{primary:"#c0c0c0",primaryDark:"#a0a0a0",primaryText:"#000000",secondary:"#8b8b8b",accent:"#ffffff",background:"#0a0a0a",surface:"#1a1a1a",text:"#f0f0f0",textSecondary:"#d0d0d0",textMuted:"#a0a0a0",border:"#333333",card:"#1a1a1a",cardBackground:"#1a1a1a"},light:{primary:"#666666",primaryDark:"#555555",primaryText:"#ffffff",secondary:"#888888",accent:"#333333",background:"#0a0a0a",surface:"#1a1a1a",text:"#f0f0f0",textSecondary:"#d0d0d0",textMuted:"#a0a0a0",border:"#333333",card:"#1a1a1a",cardBackground:"#1a1a1a"}},gradient:"linear-gradient(135deg, #c0c0c0 0%, #8b8b8b 100%)"},"death-metal":{name:"Death Metal",description:"Blood red with dark crimson tones",colors:{dark:{primary:"#dc143c",secondary:"#b71c1c",accent:"#ff1744",background:"#0d0000",surface:"#1a0505",text:"#ffcccc",textSecondary:"#ff9999",textMuted:"#cc6666",border:"#4d1414",card:"#1a0505",cardBackground:"#1a0505"},light:{primary:"#c62828",secondary:"#d32f2f",accent:"#f44336",background:"#0d0000",surface:"#1a0505",text:"#ffcccc",textSecondary:"#ff9999",textMuted:"#cc6666",border:"#4d1414",card:"#1a0505",cardBackground:"#1a0505"}},gradient:"linear-gradient(135deg, #dc143c 0%, #b71c1c 100%)"},"power-metal":{name:"Power Metal",description:"Epic gold and blue fantasy theme",colors:{dark:{primary:"#ffd700",primaryText:"#000000",secondary:"#4169e1",accent:"#87ceeb",background:"#0a0a1a",surface:"#1a1a2e",text:"#ffffff",textSecondary:"#f0f8ff",textMuted:"#ddeeff",border:"#2a2a5a",card:"#1a1a2e",cardBackground:"#1a1a2e"},light:{primary:"#ffb300",primaryText:"#000000",secondary:"#1976d2",accent:"#0277bd",background:"#0a0a1a",surface:"#1a1a2e",text:"#ffffff",textSecondary:"#f0f8ff",textMuted:"#ddeeff",border:"#2a2a5a",card:"#1a1a2e",cardBackground:"#1a1a2e"}},gradient:"linear-gradient(135deg, #ffd700 0%, #4169e1 100%)"},"doom-metal":{name:"Doom Metal",description:"Earth tones with deep greens and browns",colors:{dark:{primary:"#8b4513",secondary:"#2e7d32",accent:"#ff8f00",background:"#0a0a0a",surface:"#1a1a0a",text:"#f0e68c",textSecondary:"#daa520",textMuted:"#b8860b",border:"#3e2723",card:"#1a1a0a",cardBackground:"#1a1a0a"},light:{primary:"#6d4c41",secondary:"#388e3c",accent:"#ff9800",background:"#0a0a0a",surface:"#1a1a0a",text:"#f0e68c",textSecondary:"#daa520",textMuted:"#b8860b",border:"#3e2723",card:"#1a1a0a",cardBackground:"#1a1a0a"}},gradient:"linear-gradient(135deg, #8b4513 0%, #2e7d32 100%)"},"thrash-metal":{name:"Thrash Metal",description:"Electric yellow and purple high energy",colors:{dark:{primary:"#ffeb3b",primaryText:"#000000",secondary:"#9c27b0",accent:"#e91e63",background:"#0a0a0a",surface:"#1a0a1a",text:"#ffffff",textSecondary:"#fff9c4",textMuted:"#f4ff81",border:"#4a148c",card:"#1a0a1a",cardBackground:"#1a0a1a"},light:{primary:"#f57f17",primaryText:"#000000",secondary:"#7b1fa2",accent:"#c2185b",background:"#0a0a0a",surface:"#1a0a1a",text:"#ffffff",textSecondary:"#fff9c4",textMuted:"#f4ff81",border:"#4a148c",card:"#1a0a1a",cardBackground:"#1a0a1a"}},gradient:"linear-gradient(135deg, #ffeb3b 0%, #9c27b0 100%)"},"gothic-metal":{name:"Gothic Metal",description:"Deep purple and dark rose elegance",colors:{dark:{primary:"#9c27b0",secondary:"#ad1457",accent:"#e1bee7",background:"#0a0a0a",surface:"#1a0a1a",text:"#f3e5f5",textSecondary:"#e1bee7",textMuted:"#b868cc",border:"#4a148c",card:"#1a0a1a",cardBackground:"#1a0a1a"},light:{primary:"#7b1fa2",secondary:"#c2185b",accent:"#e91e63",background:"#0a0a0a",surface:"#1a0a1a",text:"#f3e5f5",textSecondary:"#e1bee7",textMuted:"#b868cc",border:"#4a148c",card:"#1a0a1a",cardBackground:"#1a0a1a"}},gradient:"linear-gradient(135deg, #9c27b0 0%, #ad1457 100%)"},"light-mode":{name:"Light Mode",description:"Clean and bright classic light theme",colors:{dark:{primary:"#2563eb",secondary:"#3b82f6",accent:"#60a5fa",background:"#000000",surface:"#1a1a1a",text:"#ffffff",textSecondary:"#cccccc",textMuted:"#999999",border:"#333333",card:"#1a1a1a",cardBackground:"#1a1a1a"},light:{primary:"#2563eb",primaryDark:"#1d4ed8",primaryText:"#ffffff",secondary:"#3b82f6",accent:"#60a5fa",background:"#ffffff",surface:"#f8fafc",text:"#1f2937",textSecondary:"#475569",textMuted:"#6b7280",border:"#e2e8f0",card:"#ffffff",cardBackground:"#ffffff"}},gradient:"linear-gradient(135deg, #3b82f6 0%, #60a5fa 100%)"},"dark-mode":{name:"Dark Mode",description:"Sleek and modern classic dark theme",colors:{dark:{primary:"#60a5fa",secondary:"#3b82f6",accent:"#93c5fd",background:"#0f172a",surface:"#1e293b",text:"#f1f5f9",textSecondary:"#cbd5e1",textMuted:"#64748b",border:"#334155",card:"#1e293b",cardBackground:"#1e293b"},light:{primary:"#60a5fa",secondary:"#3b82f6",accent:"#93c5fd",background:"#0f172a",surface:"#1e293b",text:"#f1f5f9",textSecondary:"#cbd5e1",textMuted:"#64748b",border:"#334155",card:"#1e293b",cardBackground:"#1e293b"}},gradient:"linear-gradient(135deg, #60a5fa 0%, #3b82f6 100%)"},"glassmorphism-premium":{name:"Glassmorphism Rock",description:"Premium vibrant glass effect with rock vibes",colors:{dark:{primary:"#ff0080",primaryDark:"#e6006b",primaryText:"#ffffff",secondary:"#ff6600",accent:"#ffff00",background:"#0a0a0a",surface:"rgba(0, 0, 0, 0.25)",text:"#ffffff",textSecondary:"#f0f0f0",textMuted:"#e0e0e0",border:"rgba(255, 255, 255, 0.25)",card:"rgba(0, 0, 0, 0.15)",cardBackground:"rgba(0, 0, 0, 0.15)"},light:{primary:"#ff0080",primaryDark:"#e6006b",primaryText:"#ffffff",secondary:"#ff6600",accent:"#ffff00",background:"#0a0a0a",surface:"rgba(0, 0, 0, 0.25)",text:"#ffffff",textSecondary:"#f0f0f0",textMuted:"#e0e0e0",border:"rgba(255, 255, 255, 0.25)",card:"rgba(0, 0, 0, 0.15)",cardBackground:"rgba(0, 0, 0, 0.15)"}},gradient:"linear-gradient(135deg, #8b0080 0%, #ff0080 25%, #ff6600 50%, #ffff00 75%, #ff0080 100%)",isPremium:!0}},l_=p.createContext(void 0);function a5({children:r}){const[e,t]=p.useState(()=>{const v=localStorage.getItem("metal-theme");return v&&Xs[v]?v:"classic-metal"}),[n,s]=p.useState(()=>localStorage.getItem("theme-mode")!=="light"),i=(v,E)=>{const T=Xs[v];return E?T.colors.dark:T.colors.light},a=v=>{var F;if(v.startsWith("rgba(")){const U=(F=v.match(/rgba?\(([^)]+)\)/))==null?void 0:F[1].split(",").map(j=>parseFloat(j.trim()));if(!U||U.length<3)return"0 0% 50%";const[A,w,C]=U.map(j=>j/255);return l(A,w,C)}const E=/^#?([a-f\d]{2})([a-f\d]{2})([a-f\d]{2})$/i.exec(v);if(!E)return"0 0% 50%";const T=parseInt(E[1],16)/255,N=parseInt(E[2],16)/255,P=parseInt(E[3],16)/255;return l(T,N,P)},l=(v,E,T)=>{const N=Math.max(v,E,T),P=Math.min(v,E,T);let F=0,U=0,A=(N+P)/2;if(N!==P){const w=N-P;switch(U=A>.5?w/(2-N-P):w/(N+P),N){case v:F=(E-T)/w+(E<T?6:0);break;case E:F=(T-v)/w+2;break;case T:F=(v-E)/w+4;break}F/=6}return F=Math.round(F*360),U=Math.round(U*100),A=Math.round(A*100),`${F} ${U}% ${A}%`},u=p.useMemo(()=>i(e,n),[e,n]),d=p.useMemo(()=>Xs[e],[e]);p.useEffect(()=>{const v=document.documentElement,E={"--tw-bg":a(u.background),"--tw-surface":a(u.surface),"--tw-text":a(u.text),"--tw-text-secondary":a(u.textSecondary),"--tw-text-muted":a(u.textMuted),"--tw-primary":a(u.primary),"--tw-secondary":a(u.secondary),"--tw-accent":a(u.accent),"--tw-border":a(u.border),"--tw-muted":a(u.surface),"--tw-muted-foreground":a(u.textMuted),"--background":a(u.background),"--card":a(u.card),"--foreground":a(u.text),"--primary":a(u.primary),"--secondary":a(u.secondary),"--accent":a(u.accent),"--input":a(u.border),"--card-foreground":a(u.text),"--primary-foreground":a(u.primaryText||"#ffffff"),"--secondary-foreground":a(u.text),"--accent-foreground":a(u.text),"--muted":a(u.surface),"--popover":a(u.card),"--popover-foreground":a(u.text),"--destructive":"0 84% 60%","--destructive-foreground":"0 0% 98%","--theme-border":u.border};Object.entries(E).forEach(([T,N])=>{v.style.setProperty(T,N)}),v.classList.remove("light","dark"),v.classList.add(n?"dark":"light"),localStorage.setItem("metal-theme",e)},[e,n,u]);const h=p.useCallback(()=>{s(v=>!v),localStorage.setItem("theme-mode",n?"light":"dark")},[n]),m=p.useCallback(()=>{const v=Object.keys(Xs),T=(v.indexOf(e)+1)%v.length;t(v[T])},[e]),g=p.useCallback(v=>{v==="light-mode"?(s(!1),localStorage.setItem("theme-mode","light")):(s(!0),localStorage.setItem("theme-mode","dark")),t(v)},[]),x=p.useCallback(()=>u,[u]),S=p.useCallback(()=>d.gradient,[d.gradient]),b=p.useMemo(()=>({currentTheme:e,isDarkMode:n,colors:{...u,primaryText:u.primaryText||(u.primary==="#c0c0c0"?"#000000":"#ffffff")},theme:d,setTheme:g,toggleDarkMode:h,toggleTheme:m,gradient:d.gradient,getColors:x,getGradient:S}),[e,n,u,d,g,h,m,x,S]);return o.jsx(l_.Provider,{value:b,children:r})}function ue(){const r=p.useContext(l_);if(r===void 0)throw new Error("useTheme must be used within a ThemeProvider");return r}const Of="-",l5=r=>{const e=u5(r),{conflictingClassGroups:t,conflictingClassGroupModifiers:n}=r;return{getClassGroupId:a=>{const l=a.split(Of);return l[0]===""&&l.length!==1&&l.shift(),c_(l,e)||c5(a)},getConflictingClassGroupIds:(a,l)=>{const u=t[a]||[];return l&&n[a]?[...u,...n[a]]:u}}},c_=(r,e)=>{var a;if(r.length===0)return e.classGroupId;const t=r[0],n=e.nextPart.get(t),s=n?c_(r.slice(1),n):void 0;if(s)return s;if(e.validators.length===0)return;const i=r.join(Of);return(a=e.validators.find(({validator:l})=>l(i)))==null?void 0:a.classGroupId},by=/^\[(.+)\]$/,c5=r=>{if(by.test(r)){const e=by.exec(r)[1],t=e==null?void 0:e.substring(0,e.indexOf(":"));if(t)return"arbitrary.."+t}},u5=r=>{const{theme:e,prefix:t}=r,n={nextPart:new Map,validators:[]};return h5(Object.entries(r.classGroups),t).forEach(([i,a])=>{Jd(a,n,i,e)}),n},Jd=(r,e,t,n)=>{r.forEach(s=>{if(typeof s=="string"){const i=s===""?e:vy(e,s);i.classGroupId=t;return}if(typeof s=="function"){if(d5(s)){Jd(s(n),e,t,n);return}e.validators.push({validator:s,classGroupId:t});return}Object.entries(s).forEach(([i,a])=>{Jd(a,vy(e,i),t,n)})})},vy=(r,e)=>{let t=r;return e.split(Of).forEach(n=>{t.nextPart.has(n)||t.nextPart.set(n,{nextPart:new Map,validators:[]}),t=t.nextPart.get(n)}),t},d5=r=>r.isThemeGetter,h5=(r,e)=>e?r.map(([t,n])=>{const s=n.map(i=>typeof i=="string"?e+i:typeof i=="object"?Object.fromEntries(Object.entries(i).map(([a,l])=>[e+a,l])):i);return[t,s]}):r,f5=r=>{if(r<1)return{get:()=>{},set:()=>{}};let e=0,t=new Map,n=new Map;const s=(i,a)=>{t.set(i,a),e++,e>r&&(e=0,n=t,t=new Map)};return{get(i){let a=t.get(i);if(a!==void 0)return a;if((a=n.get(i))!==void 0)return s(i,a),a},set(i,a){t.has(i)?t.set(i,a):s(i,a)}}},u_="!",m5=r=>{const{separator:e,experimentalParseClassName:t}=r,n=e.length===1,s=e[0],i=e.length,a=l=>{const u=[];let d=0,h=0,m;for(let v=0;v<l.length;v++){let E=l[v];if(d===0){if(E===s&&(n||l.slice(v,v+i)===e)){u.push(l.slice(h,v)),h=v+i;continue}if(E==="/"){m=v;continue}}E==="["?d++:E==="]"&&d--}const g=u.length===0?l:l.substring(h),x=g.startsWith(u_),S=x?g.substring(1):g,b=m&&m>h?m-h:void 0;return{modifiers:u,hasImportantModifier:x,baseClassName:S,maybePostfixModifierPosition:b}};return t?l=>t({className:l,parseClassName:a}):a},p5=r=>{if(r.length<=1)return r;const e=[];let t=[];return r.forEach(n=>{n[0]==="["?(e.push(...t.sort(),n),t=[]):t.push(n)}),e.push(...t.sort()),e},g5=r=>({cache:f5(r.cacheSize),parseClassName:m5(r),...l5(r)}),y5=/\s+/,x5=(r,e)=>{const{parseClassName:t,getClassGroupId:n,getConflictingClassGroupIds:s}=e,i=[],a=r.trim().split(y5);let l="";for(let u=a.length-1;u>=0;u-=1){const d=a[u],{modifiers:h,hasImportantModifier:m,baseClassName:g,maybePostfixModifierPosition:x}=t(d);let S=!!x,b=n(S?g.substring(0,x):g);if(!b){if(!S){l=d+(l.length>0?" "+l:l);continue}if(b=n(g),!b){l=d+(l.length>0?" "+l:l);continue}S=!1}const v=p5(h).join(":"),E=m?v+u_:v,T=E+b;if(i.includes(T))continue;i.push(T);const N=s(b,S);for(let P=0;P<N.length;++P){const F=N[P];i.push(E+F)}l=d+(l.length>0?" "+l:l)}return l};function b5(){let r=0,e,t,n="";for(;r<arguments.length;)(e=arguments[r++])&&(t=d_(e))&&(n&&(n+=" "),n+=t);return n}const d_=r=>{if(typeof r=="string")return r;let e,t="";for(let n=0;n<r.length;n++)r[n]&&(e=d_(r[n]))&&(t&&(t+=" "),t+=e);return t};function v5(r,...e){let t,n,s,i=a;function a(u){const d=e.reduce((h,m)=>m(h),r());return t=g5(d),n=t.cache.get,s=t.cache.set,i=l,l(u)}function l(u){const d=n(u);if(d)return d;const h=x5(u,t);return s(u,h),h}return function(){return i(b5.apply(null,arguments))}}const Le=r=>{const e=t=>t[r]||[];return e.isThemeGetter=!0,e},h_=/^\[(?:([a-z-]+):)?(.+)\]$/i,w5=/^\d+\/\d+$/,_5=new Set(["px","full","screen"]),T5=/^(\d+(\.\d+)?)?(xs|sm|md|lg|xl)$/,E5=/\d+(%|px|r?em|[sdl]?v([hwib]|min|max)|pt|pc|in|cm|mm|cap|ch|ex|r?lh|cq(w|h|i|b|min|max))|\b(calc|min|max|clamp)\(.+\)|^0$/,N5=/^(rgba?|hsla?|hwb|(ok)?(lab|lch))\(.+\)$/,C5=/^(inset_)?-?((\d+)?\.?(\d+)[a-z]+|0)_-?((\d+)?\.?(\d+)[a-z]+|0)/,k5=/^(url|image|image-set|cross-fade|element|(repeating-)?(linear|radial|conic)-gradient)\(.+\)$/,Pr=r=>ao(r)||_5.has(r)||w5.test(r),tn=r=>Wo(r,"length",D5),ao=r=>!!r&&!Number.isNaN(Number(r)),Bu=r=>Wo(r,"number",ao),di=r=>!!r&&Number.isInteger(Number(r)),S5=r=>r.endsWith("%")&&ao(r.slice(0,-1)),me=r=>h_.test(r),rn=r=>T5.test(r),j5=new Set(["length","size","percentage"]),I5=r=>Wo(r,j5,f_),A5=r=>Wo(r,"position",f_),R5=new Set(["image","url"]),P5=r=>Wo(r,R5,L5),M5=r=>Wo(r,"",O5),hi=()=>!0,Wo=(r,e,t)=>{const n=h_.exec(r);return n?n[1]?typeof e=="string"?n[1]===e:e.has(n[1]):t(n[2]):!1},D5=r=>E5.test(r)&&!N5.test(r),f_=()=>!1,O5=r=>C5.test(r),L5=r=>k5.test(r),V5=()=>{const r=Le("colors"),e=Le("spacing"),t=Le("blur"),n=Le("brightness"),s=Le("borderColor"),i=Le("borderRadius"),a=Le("borderSpacing"),l=Le("borderWidth"),u=Le("contrast"),d=Le("grayscale"),h=Le("hueRotate"),m=Le("invert"),g=Le("gap"),x=Le("gradientColorStops"),S=Le("gradientColorStopPositions"),b=Le("inset"),v=Le("margin"),E=Le("opacity"),T=Le("padding"),N=Le("saturate"),P=Le("scale"),F=Le("sepia"),U=Le("skew"),A=Le("space"),w=Le("translate"),C=()=>["auto","contain","none"],j=()=>["auto","hidden","clip","visible","scroll"],_=()=>["auto",me,e],M=()=>[me,e],I=()=>["",Pr,tn],X=()=>["auto",ao,me],le=()=>["bottom","center","left","left-bottom","left-top","right","right-bottom","right-top","top"],he=()=>["solid","dashed","dotted","double","none"],ee=()=>["normal","multiply","screen","overlay","darken","lighten","color-dodge","color-burn","hard-light","soft-light","difference","exclusion","hue","saturation","color","luminosity"],R=()=>["start","end","center","between","around","evenly","stretch"],z=()=>["","0",me],H=()=>["auto","avoid","all","avoid-page","page","left","right","column"],xe=()=>[ao,me];return{cacheSize:500,separator:":",theme:{colors:[hi],spacing:[Pr,tn],blur:["none","",rn,me],brightness:xe(),borderColor:[r],borderRadius:["none","","full",rn,me],borderSpacing:M(),borderWidth:I(),contrast:xe(),grayscale:z(),hueRotate:xe(),invert:z(),gap:M(),gradientColorStops:[r],gradientColorStopPositions:[S5,tn],inset:_(),margin:_(),opacity:xe(),padding:M(),saturate:xe(),scale:xe(),sepia:z(),skew:xe(),space:M(),translate:M()},classGroups:{aspect:[{aspect:["auto","square","video",me]}],container:["container"],columns:[{columns:[rn]}],"break-after":[{"break-after":H()}],"break-before":[{"break-before":H()}],"break-inside":[{"break-inside":["auto","avoid","avoid-page","avoid-column"]}],"box-decoration":[{"box-decoration":["slice","clone"]}],box:[{box:["border","content"]}],display:["block","inline-block","inline","flex","inline-flex","table","inline-table","table-caption","table-cell","table-column","table-column-group","table-footer-group","table-header-group","table-row-group","table-row","flow-root","grid","inline-grid","contents","list-item","hidden"],float:[{float:["right","left","none","start","end"]}],clear:[{clear:["left","right","both","none","start","end"]}],isolation:["isolate","isolation-auto"],"object-fit":[{object:["contain","cover","fill","none","scale-down"]}],"object-position":[{object:[...le(),me]}],overflow:[{overflow:j()}],"overflow-x":[{"overflow-x":j()}],"overflow-y":[{"overflow-y":j()}],overscroll:[{overscroll:C()}],"overscroll-x":[{"overscroll-x":C()}],"overscroll-y":[{"overscroll-y":C()}],position:["static","fixed","absolute","relative","sticky"],inset:[{inset:[b]}],"inset-x":[{"inset-x":[b]}],"inset-y":[{"inset-y":[b]}],start:[{start:[b]}],end:[{end:[b]}],top:[{top:[b]}],right:[{right:[b]}],bottom:[{bottom:[b]}],left:[{left:[b]}],visibility:["visible","invisible","collapse"],z:[{z:["auto",di,me]}],basis:[{basis:_()}],"flex-direction":[{flex:["row","row-reverse","col","col-reverse"]}],"flex-wrap":[{flex:["wrap","wrap-reverse","nowrap"]}],flex:[{flex:["1","auto","initial","none",me]}],grow:[{grow:z()}],shrink:[{shrink:z()}],order:[{order:["first","last","none",di,me]}],"grid-cols":[{"grid-cols":[hi]}],"col-start-end":[{col:["auto",{span:["full",di,me]},me]}],"col-start":[{"col-start":X()}],"col-end":[{"col-end":X()}],"grid-rows":[{"grid-rows":[hi]}],"row-start-end":[{row:["auto",{span:[di,me]},me]}],"row-start":[{"row-start":X()}],"row-end":[{"row-end":X()}],"grid-flow":[{"grid-flow":["row","col","dense","row-dense","col-dense"]}],"auto-cols":[{"auto-cols":["auto","min","max","fr",me]}],"auto-rows":[{"auto-rows":["auto","min","max","fr",me]}],gap:[{gap:[g]}],"gap-x":[{"gap-x":[g]}],"gap-y":[{"gap-y":[g]}],"justify-content":[{justify:["normal",...R()]}],"justify-items":[{"justify-items":["start","end","center","stretch"]}],"justify-self":[{"justify-self":["auto","start","end","center","stretch"]}],"align-content":[{content:["normal",...R(),"baseline"]}],"align-items":[{items:["start","end","center","baseline","stretch"]}],"align-self":[{self:["auto","start","end","center","stretch","baseline"]}],"place-content":[{"place-content":[...R(),"baseline"]}],"place-items":[{"place-items":["start","end","center","baseline","stretch"]}],"place-self":[{"place-self":["auto","start","end","center","stretch"]}],p:[{p:[T]}],px:[{px:[T]}],py:[{py:[T]}],ps:[{ps:[T]}],pe:[{pe:[T]}],pt:[{pt:[T]}],pr:[{pr:[T]}],pb:[{pb:[T]}],pl:[{pl:[T]}],m:[{m:[v]}],mx:[{mx:[v]}],my:[{my:[v]}],ms:[{ms:[v]}],me:[{me:[v]}],mt:[{mt:[v]}],mr:[{mr:[v]}],mb:[{mb:[v]}],ml:[{ml:[v]}],"space-x":[{"space-x":[A]}],"space-x-reverse":["space-x-reverse"],"space-y":[{"space-y":[A]}],"space-y-reverse":["space-y-reverse"],w:[{w:["auto","min","max","fit","svw","lvw","dvw",me,e]}],"min-w":[{"min-w":[me,e,"min","max","fit"]}],"max-w":[{"max-w":[me,e,"none","full","min","max","fit","prose",{screen:[rn]},rn]}],h:[{h:[me,e,"auto","min","max","fit","svh","lvh","dvh"]}],"min-h":[{"min-h":[me,e,"min","max","fit","svh","lvh","dvh"]}],"max-h":[{"max-h":[me,e,"min","max","fit","svh","lvh","dvh"]}],size:[{size:[me,e,"auto","min","max","fit"]}],"font-size":[{text:["base",rn,tn]}],"font-smoothing":["antialiased","subpixel-antialiased"],"font-style":["italic","not-italic"],"font-weight":[{font:["thin","extralight","light","normal","medium","semibold","bold","extrabold","black",Bu]}],"font-family":[{font:[hi]}],"fvn-normal":["normal-nums"],"fvn-ordinal":["ordinal"],"fvn-slashed-zero":["slashed-zero"],"fvn-figure":["lining-nums","oldstyle-nums"],"fvn-spacing":["proportional-nums","tabular-nums"],"fvn-fraction":["diagonal-fractions","stacked-fractions"],tracking:[{tracking:["tighter","tight","normal","wide","wider","widest",me]}],"line-clamp":[{"line-clamp":["none",ao,Bu]}],leading:[{leading:["none","tight","snug","normal","relaxed","loose",Pr,me]}],"list-image":[{"list-image":["none",me]}],"list-style-type":[{list:["none","disc","decimal",me]}],"list-style-position":[{list:["inside","outside"]}],"placeholder-color":[{placeholder:[r]}],"placeholder-opacity":[{"placeholder-opacity":[E]}],"text-alignment":[{text:["left","center","right","justify","start","end"]}],"text-color":[{text:[r]}],"text-opacity":[{"text-opacity":[E]}],"text-decoration":["underline","overline","line-through","no-underline"],"text-decoration-style":[{decoration:[...he(),"wavy"]}],"text-decoration-thickness":[{decoration:["auto","from-font",Pr,tn]}],"underline-offset":[{"underline-offset":["auto",Pr,me]}],"text-decoration-color":[{decoration:[r]}],"text-transform":["uppercase","lowercase","capitalize","normal-case"],"text-overflow":["truncate","text-ellipsis","text-clip"],"text-wrap":[{text:["wrap","nowrap","balance","pretty"]}],indent:[{indent:M()}],"vertical-align":[{align:["baseline","top","middle","bottom","text-top","text-bottom","sub","super",me]}],whitespace:[{whitespace:["normal","nowrap","pre","pre-line","pre-wrap","break-spaces"]}],break:[{break:["normal","words","all","keep"]}],hyphens:[{hyphens:["none","manual","auto"]}],content:[{content:["none",me]}],"bg-attachment":[{bg:["fixed","local","scroll"]}],"bg-clip":[{"bg-clip":["border","padding","content","text"]}],"bg-opacity":[{"bg-opacity":[E]}],"bg-origin":[{"bg-origin":["border","padding","content"]}],"bg-position":[{bg:[...le(),A5]}],"bg-repeat":[{bg:["no-repeat",{repeat:["","x","y","round","space"]}]}],"bg-size":[{bg:["auto","cover","contain",I5]}],"bg-image":[{bg:["none",{"gradient-to":["t","tr","r","br","b","bl","l","tl"]},P5]}],"bg-color":[{bg:[r]}],"gradient-from-pos":[{from:[S]}],"gradient-via-pos":[{via:[S]}],"gradient-to-pos":[{to:[S]}],"gradient-from":[{from:[x]}],"gradient-via":[{via:[x]}],"gradient-to":[{to:[x]}],rounded:[{rounded:[i]}],"rounded-s":[{"rounded-s":[i]}],"rounded-e":[{"rounded-e":[i]}],"rounded-t":[{"rounded-t":[i]}],"rounded-r":[{"rounded-r":[i]}],"rounded-b":[{"rounded-b":[i]}],"rounded-l":[{"rounded-l":[i]}],"rounded-ss":[{"rounded-ss":[i]}],"rounded-se":[{"rounded-se":[i]}],"rounded-ee":[{"rounded-ee":[i]}],"rounded-es":[{"rounded-es":[i]}],"rounded-tl":[{"rounded-tl":[i]}],"rounded-tr":[{"rounded-tr":[i]}],"rounded-br":[{"rounded-br":[i]}],"rounded-bl":[{"rounded-bl":[i]}],"border-w":[{border:[l]}],"border-w-x":[{"border-x":[l]}],"border-w-y":[{"border-y":[l]}],"border-w-s":[{"border-s":[l]}],"border-w-e":[{"border-e":[l]}],"border-w-t":[{"border-t":[l]}],"border-w-r":[{"border-r":[l]}],"border-w-b":[{"border-b":[l]}],"border-w-l":[{"border-l":[l]}],"border-opacity":[{"border-opacity":[E]}],"border-style":[{border:[...he(),"hidden"]}],"divide-x":[{"divide-x":[l]}],"divide-x-reverse":["divide-x-reverse"],"divide-y":[{"divide-y":[l]}],"divide-y-reverse":["divide-y-reverse"],"divide-opacity":[{"divide-opacity":[E]}],"divide-style":[{divide:he()}],"border-color":[{border:[s]}],"border-color-x":[{"border-x":[s]}],"border-color-y":[{"border-y":[s]}],"border-color-s":[{"border-s":[s]}],"border-color-e":[{"border-e":[s]}],"border-color-t":[{"border-t":[s]}],"border-color-r":[{"border-r":[s]}],"border-color-b":[{"border-b":[s]}],"border-color-l":[{"border-l":[s]}],"divide-color":[{divide:[s]}],"outline-style":[{outline:["",...he()]}],"outline-offset":[{"outline-offset":[Pr,me]}],"outline-w":[{outline:[Pr,tn]}],"outline-color":[{outline:[r]}],"ring-w":[{ring:I()}],"ring-w-inset":["ring-inset"],"ring-color":[{ring:[r]}],"ring-opacity":[{"ring-opacity":[E]}],"ring-offset-w":[{"ring-offset":[Pr,tn]}],"ring-offset-color":[{"ring-offset":[r]}],shadow:[{shadow:["","inner","none",rn,M5]}],"shadow-color":[{shadow:[hi]}],opacity:[{opacity:[E]}],"mix-blend":[{"mix-blend":[...ee(),"plus-lighter","plus-darker"]}],"bg-blend":[{"bg-blend":ee()}],filter:[{filter:["","none"]}],blur:[{blur:[t]}],brightness:[{brightness:[n]}],contrast:[{contrast:[u]}],"drop-shadow":[{"drop-shadow":["","none",rn,me]}],grayscale:[{grayscale:[d]}],"hue-rotate":[{"hue-rotate":[h]}],invert:[{invert:[m]}],saturate:[{saturate:[N]}],sepia:[{sepia:[F]}],"backdrop-filter":[{"backdrop-filter":["","none"]}],"backdrop-blur":[{"backdrop-blur":[t]}],"backdrop-brightness":[{"backdrop-brightness":[n]}],"backdrop-contrast":[{"backdrop-contrast":[u]}],"backdrop-grayscale":[{"backdrop-grayscale":[d]}],"backdrop-hue-rotate":[{"backdrop-hue-rotate":[h]}],"backdrop-invert":[{"backdrop-invert":[m]}],"backdrop-opacity":[{"backdrop-opacity":[E]}],"backdrop-saturate":[{"backdrop-saturate":[N]}],"backdrop-sepia":[{"backdrop-sepia":[F]}],"border-collapse":[{border:["collapse","separate"]}],"border-spacing":[{"border-spacing":[a]}],"border-spacing-x":[{"border-spacing-x":[a]}],"border-spacing-y":[{"border-spacing-y":[a]}],"table-layout":[{table:["auto","fixed"]}],caption:[{caption:["top","bottom"]}],transition:[{transition:["none","all","","colors","opacity","shadow","transform",me]}],duration:[{duration:xe()}],ease:[{ease:["linear","in","out","in-out",me]}],delay:[{delay:xe()}],animate:[{animate:["none","spin","ping","pulse","bounce",me]}],transform:[{transform:["","gpu","none"]}],scale:[{scale:[P]}],"scale-x":[{"scale-x":[P]}],"scale-y":[{"scale-y":[P]}],rotate:[{rotate:[di,me]}],"translate-x":[{"translate-x":[w]}],"translate-y":[{"translate-y":[w]}],"skew-x":[{"skew-x":[U]}],"skew-y":[{"skew-y":[U]}],"transform-origin":[{origin:["center","top","top-right","right","bottom-right","bottom","bottom-left","left","top-left",me]}],accent:[{accent:["auto",r]}],appearance:[{appearance:["none","auto"]}],cursor:[{cursor:["auto","default","pointer","wait","text","move","help","not-allowed","none","context-menu","progress","cell","crosshair","vertical-text","alias","copy","no-drop","grab","grabbing","all-scroll","col-resize","row-resize","n-resize","e-resize","s-resize","w-resize","ne-resize","nw-resize","se-resize","sw-resize","ew-resize","ns-resize","nesw-resize","nwse-resize","zoom-in","zoom-out",me]}],"caret-color":[{caret:[r]}],"pointer-events":[{"pointer-events":["none","auto"]}],resize:[{resize:["none","y","x",""]}],"scroll-behavior":[{scroll:["auto","smooth"]}],"scroll-m":[{"scroll-m":M()}],"scroll-mx":[{"scroll-mx":M()}],"scroll-my":[{"scroll-my":M()}],"scroll-ms":[{"scroll-ms":M()}],"scroll-me":[{"scroll-me":M()}],"scroll-mt":[{"scroll-mt":M()}],"scroll-mr":[{"scroll-mr":M()}],"scroll-mb":[{"scroll-mb":M()}],"scroll-ml":[{"scroll-ml":M()}],"scroll-p":[{"scroll-p":M()}],"scroll-px":[{"scroll-px":M()}],"scroll-py":[{"scroll-py":M()}],"scroll-ps":[{"scroll-ps":M()}],"scroll-pe":[{"scroll-pe":M()}],"scroll-pt":[{"scroll-pt":M()}],"scroll-pr":[{"scroll-pr":M()}],"scroll-pb":[{"scroll-pb":M()}],"scroll-pl":[{"scroll-pl":M()}],"snap-align":[{snap:["start","end","center","align-none"]}],"snap-stop":[{snap:["normal","always"]}],"snap-type":[{snap:["none","x","y","both"]}],"snap-strictness":[{snap:["mandatory","proximity"]}],touch:[{touch:["auto","none","manipulation"]}],"touch-x":[{"touch-pan":["x","left","right"]}],"touch-y":[{"touch-pan":["y","up","down"]}],"touch-pz":["touch-pinch-zoom"],select:[{select:["none","text","all","auto"]}],"will-change":[{"will-change":["auto","scroll","contents","transform",me]}],fill:[{fill:[r,"none"]}],"stroke-w":[{stroke:[Pr,tn,Bu]}],stroke:[{stroke:[r,"none"]}],sr:["sr-only","not-sr-only"],"forced-color-adjust":[{"forced-color-adjust":["auto","none"]}]},conflictingClassGroups:{overflow:["overflow-x","overflow-y"],overscroll:["overscroll-x","overscroll-y"],inset:["inset-x","inset-y","start","end","top","right","bottom","left"],"inset-x":["right","left"],"inset-y":["top","bottom"],flex:["basis","grow","shrink"],gap:["gap-x","gap-y"],p:["px","py","ps","pe","pt","pr","pb","pl"],px:["pr","pl"],py:["pt","pb"],m:["mx","my","ms","me","mt","mr","mb","ml"],mx:["mr","ml"],my:["mt","mb"],size:["w","h"],"font-size":["leading"],"fvn-normal":["fvn-ordinal","fvn-slashed-zero","fvn-figure","fvn-spacing","fvn-fraction"],"fvn-ordinal":["fvn-normal"],"fvn-slashed-zero":["fvn-normal"],"fvn-figure":["fvn-normal"],"fvn-spacing":["fvn-normal"],"fvn-fraction":["fvn-normal"],"line-clamp":["display","overflow"],rounded:["rounded-s","rounded-e","rounded-t","rounded-r","rounded-b","rounded-l","rounded-ss","rounded-se","rounded-ee","rounded-es","rounded-tl","rounded-tr","rounded-br","rounded-bl"],"rounded-s":["rounded-ss","rounded-es"],"rounded-e":["rounded-se","rounded-ee"],"rounded-t":["rounded-tl","rounded-tr"],"rounded-r":["rounded-tr","rounded-br"],"rounded-b":["rounded-br","rounded-bl"],"rounded-l":["rounded-tl","rounded-bl"],"border-spacing":["border-spacing-x","border-spacing-y"],"border-w":["border-w-s","border-w-e","border-w-t","border-w-r","border-w-b","border-w-l"],"border-w-x":["border-w-r","border-w-l"],"border-w-y":["border-w-t","border-w-b"],"border-color":["border-color-s","border-color-e","border-color-t","border-color-r","border-color-b","border-color-l"],"border-color-x":["border-color-r","border-color-l"],"border-color-y":["border-color-t","border-color-b"],"scroll-m":["scroll-mx","scroll-my","scroll-ms","scroll-me","scroll-mt","scroll-mr","scroll-mb","scroll-ml"],"scroll-mx":["scroll-mr","scroll-ml"],"scroll-my":["scroll-mt","scroll-mb"],"scroll-p":["scroll-px","scroll-py","scroll-ps","scroll-pe","scroll-pt","scroll-pr","scroll-pb","scroll-pl"],"scroll-px":["scroll-pr","scroll-pl"],"scroll-py":["scroll-pt","scroll-pb"],touch:["touch-x","touch-y","touch-pz"],"touch-x":["touch"],"touch-y":["touch"],"touch-pz":["touch"]},conflictingClassGroupModifiers:{"font-size":["leading"]}}},F5=v5(V5);function te(...r){return F5(Qw(r))}const U5=CM,m_=p.forwardRef(({className:r,...e},t)=>o.jsx(Bw,{ref:t,className:te("fixed top-0 z-[100] flex max-h-screen w-full flex-col-reverse p-4 sm:bottom-0 sm:right-0 sm:top-auto sm:flex-col md:max-w-[420px]",r),...e}));m_.displayName=Bw.displayName;const $5=Mc("group pointer-events-auto relative flex w-full items-center justify-between space-x-4 overflow-hidden rounded-md p-6 pr-8 shadow-lg transition-all data-[swipe=cancel]:translate-x-0 data-[swipe=end]:translate-x-[var(--radix-toast-swipe-end-x)] data-[swipe=move]:translate-x-[var(--radix-toast-swipe-move-x)] data-[swipe=move]:transition-none data-[state=open]:animate-in data-[state=closed]:animate-out data-[swipe=end]:animate-out data-[state=closed]:fade-out-80 data-[state=closed]:slide-out-to-right-full data-[state=open]:slide-in-from-top-full data-[state=open]:sm:slide-in-from-bottom-full",{variants:{variant:{default:"",destructive:"",error:""}},defaultVariants:{variant:"default"}}),p_=p.forwardRef(({className:r,variant:e,...t},n)=>{const{colors:s}=ue(),i=()=>e==="destructive"||e==="error"?{backgroundColor:s.background,border:"1px solid #ef4444",color:"#ef4444"}:{backgroundColor:s.background,border:"1px solid transparent",color:s.text};return o.jsx(zw,{ref:n,className:te($5({variant:e}),r),style:i(),...t})});p_.displayName=zw.displayName;const B5=p.forwardRef(({className:r,...e},t)=>{const{colors:n}=ue();return o.jsx(Ww,{ref:t,className:te("inline-flex h-8 shrink-0 items-center justify-center rounded-md border px-3 text-sm font-medium transition-colors hover:bg-secondary disabled:pointer-events-none disabled:opacity-50",r),style:{backgroundColor:n.background,borderColor:n.primary,color:n.text},...e})});B5.displayName=Ww.displayName;const g_=p.forwardRef(({className:r,...e},t)=>{const{colors:n}=ue();return o.jsx(Gw,{ref:t,className:te("absolute right-2 top-2 rounded-md p-1 text-foreground/50 opacity-0 transition-opacity hover:text-foreground focus:opacity-100 focus:outline-none focus:ring-2 group-hover:opacity-100 group-[.destructive]:text-red-300 group-[.destructive]:hover:text-red-50 group-[.destructive]:focus:ring-red-400 group-[.destructive]:focus:ring-offset-red-600",r),style:{color:n.text},"toast-close":"",...e,children:o.jsx(Un,{className:"h-4 w-4"})})});g_.displayName=Gw.displayName;const y_=p.forwardRef(({className:r,...e},t)=>{const{colors:n}=ue();return o.jsx(qw,{ref:t,className:te("text-sm font-semibold",r),style:{color:n.text},...e})});y_.displayName=qw.displayName;const x_=p.forwardRef(({className:r,...e},t)=>{const{colors:n}=ue();return o.jsx(Hw,{ref:t,className:te("text-sm opacity-90",r),style:{color:n.text},...e})});x_.displayName=Hw.displayName;function z5(){const{toasts:r}=Sr();return o.jsxs(U5,{children:[r.map(function({id:e,title:t,description:n,action:s,...i}){return o.jsxs(p_,{...i,children:[o.jsxs("div",{className:"grid gap-1",children:[t&&o.jsx(y_,{children:t}),n&&o.jsx(x_,{children:n})]}),s,o.jsx(g_,{})]},e)}),o.jsx(m_,{})]})}var[Dc,JL]=$n("Tooltip",[tc]),Oc=tc(),b_="TooltipProvider",q5=700,Zd="tooltip.open",[H5,Lf]=Dc(b_),v_=r=>{const{__scopeTooltip:e,delayDuration:t=q5,skipDelayDuration:n=300,disableHoverableContent:s=!1,children:i}=r,a=p.useRef(!0),l=p.useRef(!1),u=p.useRef(0);return p.useEffect(()=>{const d=u.current;return()=>window.clearTimeout(d)},[]),o.jsx(H5,{scope:e,isOpenDelayedRef:a,delayDuration:t,onOpen:p.useCallback(()=>{window.clearTimeout(u.current),a.current=!1},[]),onClose:p.useCallback(()=>{window.clearTimeout(u.current),u.current=window.setTimeout(()=>a.current=!0,n)},[n]),isPointerInTransitRef:l,onPointerInTransitChange:p.useCallback(d=>{l.current=d},[]),disableHoverableContent:s,children:i})};v_.displayName=b_;var Hi="Tooltip",[W5,Lc]=Dc(Hi),w_=r=>{const{__scopeTooltip:e,children:t,open:n,defaultOpen:s,onOpenChange:i,disableHoverableContent:a,delayDuration:l}=r,u=Lf(Hi,r.__scopeTooltip),d=Oc(e),[h,m]=p.useState(null),g=sh(),x=p.useRef(0),S=a??u.disableHoverableContent,b=l??u.delayDuration,v=p.useRef(!1),[E,T]=Do({prop:n,defaultProp:s??!1,onChange:A=>{A?(u.onOpen(),document.dispatchEvent(new CustomEvent(Zd))):u.onClose(),i==null||i(A)},caller:Hi}),N=p.useMemo(()=>E?v.current?"delayed-open":"instant-open":"closed",[E]),P=p.useCallback(()=>{window.clearTimeout(x.current),x.current=0,v.current=!1,T(!0)},[T]),F=p.useCallback(()=>{window.clearTimeout(x.current),x.current=0,T(!1)},[T]),U=p.useCallback(()=>{window.clearTimeout(x.current),x.current=window.setTimeout(()=>{v.current=!0,T(!0),x.current=0},b)},[b,T]);return p.useEffect(()=>()=>{x.current&&(window.clearTimeout(x.current),x.current=0)},[]),o.jsx(Qy,{...d,children:o.jsx(W5,{scope:e,contentId:g,open:E,stateAttribute:N,trigger:h,onTriggerChange:m,onTriggerEnter:p.useCallback(()=>{u.isOpenDelayedRef.current?U():P()},[u.isOpenDelayedRef,U,P]),onTriggerLeave:p.useCallback(()=>{S?F():(window.clearTimeout(x.current),x.current=0)},[F,S]),onOpen:P,onClose:F,disableHoverableContent:S,children:t})})};w_.displayName=Hi;var eh="TooltipTrigger",__=p.forwardRef((r,e)=>{const{__scopeTooltip:t,...n}=r,s=Lc(eh,t),i=Lf(eh,t),a=Oc(t),l=p.useRef(null),u=at(e,l,s.onTriggerChange),d=p.useRef(!1),h=p.useRef(!1),m=p.useCallback(()=>d.current=!1,[]);return p.useEffect(()=>()=>document.removeEventListener("pointerup",m),[m]),o.jsx(oh,{asChild:!0,...a,children:o.jsx(De.button,{"aria-describedby":s.open?s.contentId:void 0,"data-state":s.stateAttribute,...n,ref:u,onPointerMove:_e(r.onPointerMove,g=>{g.pointerType!=="touch"&&!h.current&&!i.isPointerInTransitRef.current&&(s.onTriggerEnter(),h.current=!0)}),onPointerLeave:_e(r.onPointerLeave,()=>{s.onTriggerLeave(),h.current=!1}),onPointerDown:_e(r.onPointerDown,()=>{s.open&&s.onClose(),d.current=!0,document.addEventListener("pointerup",m,{once:!0})}),onFocus:_e(r.onFocus,()=>{d.current||s.onOpen()}),onBlur:_e(r.onBlur,s.onClose),onClick:_e(r.onClick,s.onClose)})})});__.displayName=eh;var G5="TooltipPortal",[ZL,K5]=Dc(G5,{forceMount:void 0}),Ro="TooltipContent",T_=p.forwardRef((r,e)=>{const t=K5(Ro,r.__scopeTooltip),{forceMount:n=t.forceMount,side:s="top",...i}=r,a=Lc(Ro,r.__scopeTooltip);return o.jsx(kr,{present:n||a.open,children:a.disableHoverableContent?o.jsx(E_,{side:s,...i,ref:e}):o.jsx(Q5,{side:s,...i,ref:e})})}),Q5=p.forwardRef((r,e)=>{const t=Lc(Ro,r.__scopeTooltip),n=Lf(Ro,r.__scopeTooltip),s=p.useRef(null),i=at(e,s),[a,l]=p.useState(null),{trigger:u,onClose:d}=t,h=s.current,{onPointerInTransitChange:m}=n,g=p.useCallback(()=>{l(null),m(!1)},[m]),x=p.useCallback((S,b)=>{const v=S.currentTarget,E={x:S.clientX,y:S.clientY},T=eD(E,v.getBoundingClientRect()),N=tD(E,T),P=rD(b.getBoundingClientRect()),F=sD([...N,...P]);l(F),m(!0)},[m]);return p.useEffect(()=>()=>g(),[g]),p.useEffect(()=>{if(u&&h){const S=v=>x(v,h),b=v=>x(v,u);return u.addEventListener("pointerleave",S),h.addEventListener("pointerleave",b),()=>{u.removeEventListener("pointerleave",S),h.removeEventListener("pointerleave",b)}}},[u,h,x,g]),p.useEffect(()=>{if(a){const S=b=>{const v=b.target,E={x:b.clientX,y:b.clientY},T=(u==null?void 0:u.contains(v))||(h==null?void 0:h.contains(v)),N=!nD(E,a);T?g():N&&(g(),d())};return document.addEventListener("pointermove",S),()=>document.removeEventListener("pointermove",S)}},[u,h,a,d,g]),o.jsx(E_,{...r,ref:i})}),[Y5,X5]=Dc(Hi,{isInside:!1}),J5=Ky("TooltipContent"),E_=p.forwardRef((r,e)=>{const{__scopeTooltip:t,children:n,"aria-label":s,onEscapeKeyDown:i,onPointerDownOutside:a,...l}=r,u=Lc(Ro,t),d=Oc(t),{onClose:h}=u;return p.useEffect(()=>(document.addEventListener(Zd,h),()=>document.removeEventListener(Zd,h)),[h]),p.useEffect(()=>{if(u.trigger){const m=g=>{const x=g.target;x!=null&&x.contains(u.trigger)&&h()};return window.addEventListener("scroll",m,{capture:!0}),()=>window.removeEventListener("scroll",m,{capture:!0})}},[u.trigger,h]),o.jsx(Wy,{asChild:!0,disableOutsidePointerEvents:!1,onEscapeKeyDown:i,onPointerDownOutside:a,onFocusOutside:m=>m.preventDefault(),onDismiss:h,children:o.jsxs(Gy,{"data-state":u.stateAttribute,...d,...l,ref:e,style:{...l.style,"--radix-tooltip-content-transform-origin":"var(--radix-popper-transform-origin)","--radix-tooltip-content-available-width":"var(--radix-popper-available-width)","--radix-tooltip-content-available-height":"var(--radix-popper-available-height)","--radix-tooltip-trigger-width":"var(--radix-popper-anchor-width)","--radix-tooltip-trigger-height":"var(--radix-popper-anchor-height)"},children:[o.jsx(J5,{children:n}),o.jsx(Y5,{scope:t,isInside:!0,children:o.jsx(lM,{id:u.contentId,role:"tooltip",children:s||n})})]})})});T_.displayName=Ro;var N_="TooltipArrow",Z5=p.forwardRef((r,e)=>{const{__scopeTooltip:t,...n}=r,s=Oc(t);return X5(N_,t).isInside?null:o.jsx(Yy,{...s,...n,ref:e})});Z5.displayName=N_;function eD(r,e){const t=Math.abs(e.top-r.y),n=Math.abs(e.bottom-r.y),s=Math.abs(e.right-r.x),i=Math.abs(e.left-r.x);switch(Math.min(t,n,s,i)){case i:return"left";case s:return"right";case t:return"top";case n:return"bottom";default:throw new Error("unreachable")}}function tD(r,e,t=5){const n=[];switch(e){case"top":n.push({x:r.x-t,y:r.y+t},{x:r.x+t,y:r.y+t});break;case"bottom":n.push({x:r.x-t,y:r.y-t},{x:r.x+t,y:r.y-t});break;case"left":n.push({x:r.x+t,y:r.y-t},{x:r.x+t,y:r.y+t});break;case"right":n.push({x:r.x-t,y:r.y-t},{x:r.x-t,y:r.y+t});break}return n}function rD(r){const{top:e,right:t,bottom:n,left:s}=r;return[{x:s,y:e},{x:t,y:e},{x:t,y:n},{x:s,y:n}]}function nD(r,e){const{x:t,y:n}=r;let s=!1;for(let i=0,a=e.length-1;i<e.length;a=i++){const l=e[i],u=e[a],d=l.x,h=l.y,m=u.x,g=u.y;h>n!=g>n&&t<(m-d)*(n-h)/(g-h)+d&&(s=!s)}return s}function sD(r){const e=r.slice();return e.sort((t,n)=>t.x<n.x?-1:t.x>n.x?1:t.y<n.y?-1:t.y>n.y?1:0),oD(e)}function oD(r){if(r.length<=1)return r.slice();const e=[];for(let n=0;n<r.length;n++){const s=r[n];for(;e.length>=2;){const i=e[e.length-1],a=e[e.length-2];if((i.x-a.x)*(s.y-a.y)>=(i.y-a.y)*(s.x-a.x))e.pop();else break}e.push(s)}e.pop();const t=[];for(let n=r.length-1;n>=0;n--){const s=r[n];for(;t.length>=2;){const i=t[t.length-1],a=t[t.length-2];if((i.x-a.x)*(s.y-a.y)>=(i.y-a.y)*(s.x-a.x))t.pop();else break}t.push(s)}return t.pop(),e.length===1&&t.length===1&&e[0].x===t[0].x&&e[0].y===t[0].y?e:e.concat(t)}var iD=v_,aD=w_,lD=__,C_=T_;const k_=iD,zu=aD,qu=lD,hl=p.forwardRef(({className:r,sideOffset:e=4,...t},n)=>o.jsx(C_,{ref:n,sideOffset:e,className:te("z-50 overflow-hidden rounded-md px-3 py-1.5 text-sm shadow-md animate-in fade-in-0 zoom-in-95 data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=closed]:zoom-out-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2","bg-black text-white border border-gray-600 dark:bg-white dark:text-black dark:border-gray-400","shadow-lg backdrop-blur-sm font-medium max-w-xs",r),...t}));hl.displayName=C_.displayName;class cD{constructor(){this.isCollecting=!1,this.observers=new Set,this.metrics={pageLoads:new Map,apiRequests:new Map,componentRenders:new Map,errors:new Map,customTraces:new Map},this.sessionId=this.generateSessionId(),this.userId=this.getUserId(),this.startCollection(),this.setupDataCleanup()}generateSessionId(){return`session_${Date.now()}_${Math.random().toString(36).substr(2,9)}`}getUserId(){try{const e=localStorage.getItem("firebase:authUser:AIzaSyCBoEZeDucpm7p9OEDgaUGLzhn5HpItseQ:[DEFAULT]");if(e)return JSON.parse(e).uid}catch{console.debug("Could not get user ID for performance tracking")}}startCollection(){this.isCollecting||(this.isCollecting=!0,this.collectionInterval=setInterval(()=>{this.collectPerformanceData()},1e4),this.collectPerformanceData(),console.log("Performance data collection started"))}stopCollection(){this.collectionInterval&&(clearInterval(this.collectionInterval),this.collectionInterval=void 0),this.isCollecting=!1,console.log("Performance data collection stopped")}collectPerformanceData(){this.collectCoreWebVitals(),this.collectNavigationTiming(),this.collectResourceTiming(),this.collectMemoryUsage(),this.notifyObservers()}collectCoreWebVitals(){if("PerformanceObserver"in window)try{new PerformanceObserver(s=>{var l;const i=s.getEntries(),a=i[i.length-1];a&&this.recordEvent("page_load","LCP",a.startTime,"ms",{element:((l=a.element)==null?void 0:l.tagName)||"unknown",size:a.size||0,url:a.url||window.location.href})}).observe({entryTypes:["largest-contentful-paint"]}),new PerformanceObserver(s=>{s.getEntries().forEach(a=>{this.recordEvent("page_load","FID",a.processingStart-a.startTime,"ms",{name:a.name,type:a.entryType})})}).observe({entryTypes:["first-input"]}),new PerformanceObserver(s=>{const i=s.getEntries();let a=0;i.forEach(l=>{l.hadRecentInput||(a+=l.value)}),this.recordEvent("page_load","CLS",a,"score",{entries:i.length})}).observe({entryTypes:["layout-shift"]})}catch(e){console.debug("Core Web Vitals collection failed:",e)}}collectNavigationTiming(){if("performance"in window&&"getEntriesByType"in Dr)try{const e=Dr.getEntriesByType("navigation");if(e.length>0){const t=e[0];this.recordEvent("page_load","Page Load",t.loadEventEnd-t.loadEventStart,"ms",{url:window.location.href,domContentLoaded:t.domContentLoadedEventEnd-t.domContentLoadedEventStart,firstPaint:t.loadEventEnd-t.loadEventStart}),this.recordEvent("page_load","DNS Lookup",t.domainLookupEnd-t.domainLookupStart,"ms",{url:window.location.href}),this.recordEvent("page_load","Connection",t.connectEnd-t.connectStart,"ms",{url:window.location.href})}}catch(e){console.debug("Navigation timing collection failed:",e)}}collectResourceTiming(){if("performance"in window&&"getEntriesByType"in Dr)try{Dr.getEntriesByType("resource").forEach(t=>{const n=t;(n.name.includes("/api/")||n.name.includes(".js")||n.name.includes(".css")||n.name.includes(".png")||n.name.includes(".jpg")||n.name.includes(".svg"))&&this.recordEvent("api_request",n.name,n.responseEnd-n.requestStart,"ms",{initiatorType:n.initiatorType,transferSize:n.transferSize,decodedBodySize:n.decodedBodySize,url:n.name})})}catch(e){console.debug("Resource timing collection failed:",e)}}collectMemoryUsage(){if("memory"in Dr)try{const e=Dr.memory;this.recordEvent("custom_trace","Memory Usage",e.usedJSHeapSize,"bytes",{totalJSHeapSize:e.totalJSHeapSize,jsHeapSizeLimit:e.jsHeapSizeLimit,usedJSHeapSize:e.usedJSHeapSize})}catch(e){console.debug("Memory usage collection failed:",e)}}recordEvent(e,t,n,s,i={}){const a={id:`${e}_${Date.now()}_${Math.random().toString(36).substr(2,9)}`,type:e,name:t,value:n,unit:s,timestamp:new Date,metadata:i,userId:this.userId,sessionId:this.sessionId,userAgent:navigator.userAgent,url:window.location.href},l=this.getCategoryMap(e);if(l){const u=this.getEventKey(a);l.has(u)||l.set(u,[]),l.get(u).push(a),l.get(u).length>100&&l.get(u).shift()}this.sendToFirebase(a)}getCategoryMap(e){switch(e){case"page_load":return this.metrics.pageLoads;case"api_request":return this.metrics.apiRequests;case"component_render":return this.metrics.componentRenders;case"error":return this.metrics.errors;case"custom_trace":return this.metrics.customTraces;default:return null}}getEventKey(e){return`${e.type}_${e.name}`}sendToFirebase(e){try{const t=ew(Dr,`${e.type}_${e.name}`);t.start(),t.setAttribute&&(Object.entries(e.metadata).forEach(([n,s])=>{try{t.setAttribute(n,String(s))}catch{console.debug("Failed to set trace attribute:",n)}}),t.setAttribute("event_id",e.id),t.setAttribute("session_id",e.sessionId),e.userId&&t.setAttribute("user_id",e.userId),t.setAttribute("url",e.url)),t.addMetric&&(t.addMetric("value",e.value),t.addMetric("unit",this.parseUnit(e.unit))),t.stop()}catch(t){console.debug("Failed to send event to Firebase:",t)}}parseUnit(e){return{ms:1,s:1e3,bytes:1,KB:1024,MB:1048576,count:1,score:1}[e]||1}getMetrics(){return this.metrics}getMetricsSummary(){return{totalEvents:Array.from(this.metrics.pageLoads.values()).flat().length+Array.from(this.metrics.apiRequests.values()).flat().length+Array.from(this.metrics.componentRenders.values()).flat().length+Array.from(this.metrics.errors.values()).flat().length+Array.from(this.metrics.customTraces.values()).flat().length,pageLoads:Array.from(this.metrics.pageLoads.values()).flat().length,apiRequests:Array.from(this.metrics.apiRequests.values()).flat().length,componentRenders:Array.from(this.metrics.componentRenders.values()).flat().length,errors:Array.from(this.metrics.errors.values()).flat().length,customTraces:Array.from(this.metrics.customTraces.values()).flat().length}}subscribe(e){return this.observers.add(e),()=>{this.observers.delete(e)}}notifyObservers(){this.observers.forEach(e=>{try{e(this.metrics)}catch(t){console.error("Error in performance observer callback:",t)}})}setupDataCleanup(){setInterval(()=>{const e=new Date(Date.now()-36e5);Object.values(this.metrics).forEach(t=>{t.forEach((n,s)=>{const i=n.filter(a=>a.timestamp>e);i.length===0?t.delete(s):t.set(s,i)})})},3600*1e3)}destroy(){this.stopCollection(),this.observers.clear(),this.metrics.pageLoads.clear(),this.metrics.apiRequests.clear(),this.metrics.componentRenders.clear(),this.metrics.errors.clear(),this.metrics.customTraces.clear()}}const fl=new cD,S_=p.createContext(void 0);function uD({children:r}){const[e,t]=p.useState(null),[n,s]=p.useState(!1),[i,a]=p.useState(!0),l=m=>{s(m),m&&a(!1)},u=m=>{a(m),m&&s(!1)},d=async(m,g)=>m==="admin"&&g==="password"?(t({userID:"admin-1",firstName:"Admin",lastName:"User",emailAddress:"admin@example.com",isAdmin:!0}),!0):!1,h=()=>{t(null)};return o.jsx(S_.Provider,{value:{user:e,isAdmin:!!(e!=null&&e.isAdmin),useMockData:n,setUseMockData:l,useLiveData:i,setUseLiveData:u,login:d,logout:h},children:r})}function dD(){const r=p.useContext(S_);if(r===void 0)throw new Error("useAdmin must be used within an AdminProvider");return r}typeof process<"u"&&process&&typeof process.nextTick=="function"&&(typeof setImmediate=="function"?setImmediate:process.nextTick);const Vf=new xr;Vf.addScope("profile");Vf.addScope("email");Vf.setCustomParameters({prompt:"select_account"});const wy=["https://firebasestorage.googleapis.com/v0/b/spandex-salvation-radio-site.appspot.com/o/Avatars%2FBass-Bat.png?alt=media","https://firebasestorage.googleapis.com/v0/b/spandex-salvation-radio-site.appspot.com/o/Avatars%2FDrum-Dragon.png?alt=media","https://firebasestorage.googleapis.com/v0/b/spandex-salvation-radio-site.appspot.com/o/Avatars%2FHeadbanger-Hamster.png?alt=media","https://firebasestorage.googleapis.com/v0/b/spandex-salvation-radio-site.appspot.com/o/Avatars%2FMetal-Queen.png?alt=media","https://firebasestorage.googleapis.com/v0/b/spandex-salvation-radio-site.appspot.com/o/Avatars%2FMetal%20Cat.png?alt=media","https://firebasestorage.googleapis.com/v0/b/spandex-salvation-radio-site.appspot.com/o/Avatars%2FMosh-Pit-Monster.png?alt=media","https://firebasestorage.googleapis.com/v0/b/spandex-salvation-radio-site.appspot.com/o/Avatars%2FRebel-Raccoon.png?alt=media","https://firebasestorage.googleapis.com/v0/b/spandex-salvation-radio-site.appspot.com/o/Avatars%2FRock-Unicorn.png?alt=media"];function hD(){const r="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789";let e="";for(let t=0;t<10;t++)e+=r.charAt(Math.floor(Math.random()*r.length));return e}function fD(){const r=Math.floor(Math.random()*wy.length);return wy[r]}async function mD(r){var e;try{console.log("[Firebase] Attempting registration for:",r.email);const n=(await ZC(Ai,r.email,r.password)).user;await rk(n,{displayName:`${r.firstName} ${r.lastName}`});const s=await j_(n,{firstName:r.firstName,lastName:r.lastName,phoneNumber:r.phoneNumber});return s.success?(console.log("[Firebase] Registration successful for:",r.email),{success:!0,userID:(e=s.profile)==null?void 0:e.userID,profile:s.profile}):(console.log("[Firebase] Profile creation failed:",s.error),{success:!1,error:s.error||"Failed to create user profile"})}catch(t){return console.error("[Firebase] Registration error:",t),{success:!1,error:"Failed to create user profile"}}}async function j_(r,e){var t,n;try{const s=hD(),i=new Date().toISOString(),a=(e==null?void 0:e.firstName)||((t=r.displayName)==null?void 0:t.split(" ")[0])||"",l=(e==null?void 0:e.lastName)||((n=r.displayName)==null?void 0:n.slice(1).join(" "))||"",u=(e==null?void 0:e.phoneNumber)||r.phoneNumber||"",d={firstName:a,lastName:l,userProfileImage:r.photoURL||fD(),emailAddress:r.email||"",phoneNumber:u,location:null,isActiveListening:!1,activeSubscription:!1,renewalDate:null,lastLogin:i,userID:s,firebaseUID:r.uid,isEmailVerified:r.emailVerified||!1,isPhoneVerified:!1,createdAt:i,updatedAt:i};return await jI(_c(ur,"Users",`User: ${s}`),d),{success:!0,profile:d}}catch(s){return console.error("Error creating user profile:",s),{success:!1,error:s instanceof Error?s.message:"Unknown error"}}}async function pD(r,e){try{return await nf(_c(ur,"Users",`User: ${r}`),{isActiveListening:e,updatedAt:new Date().toISOString()}),!0}catch(t){return console.error("Error updating listening status:",t),!1}}async function gD(r,e){try{return await nf(_c(ur,"Users",`User: ${r}`),{location:e,updatedAt:new Date().toISOString()}),!0}catch(t){return console.error("Error updating user location:",t),!1}}async function zs(r,e){try{const t=Ol(Ml(ur,"Users"),Ll("firebaseUID","==",r));let n=await Vl(t);if(!n.empty)return n.docs[0].data();const s=Ol(Ml(ur,"Users"),Ll("emailAddress","==",e));return n=await Vl(s),n.empty?null:n.docs[0].data()}catch(t){return console.error("Error finding user profile by Firebase UID:",t),null}}async function lo(r,e){try{return await nf(_c(ur,"Users",`User: ${r}`),{...e,updatedAt:new Date().toISOString()}),!0}catch(t){return console.error("Error updating user profile:",t),!1}}async function I_(r,e){try{const t=r.name.split(".").pop(),n=`profile-images/${e}-${Date.now()}.${t}`,s=UA(tw,n),i=await VA(s,r);return await FA(i.ref)}catch(t){throw console.error("Error uploading profile image:",t),new Error("Failed to upload image")}}const A_=p.createContext(void 0),Ht=()=>{const r=p.useContext(A_);if(r===void 0)throw new Error("useFirebaseAuth must be used within a FirebaseAuthProvider");return r},yD=({children:r})=>{const[e,t]=p.useState(null),[n,s]=p.useState(!0);p.useEffect(()=>{const v=ok(Ai,async E=>{if(t(E),s(!1),E)try{const T=await zs(E.uid,E.email||"");T&&await lo(T.userID,{lastLogin:new Date().toISOString()})}catch(T){console.error("Error updating user profile:",T)}});return()=>v()},[]);const i=async(v,E,T,N,P)=>{try{return await mD({firstName:T,lastName:N,email:v,phoneNumber:P,password:E})}catch(F){return{success:!1,error:F.message}}},a=async(v,E)=>{try{return await ek(Ai,v,E),{success:!0}}catch(T){return{success:!1,error:T.message}}},l=async()=>{try{await S()}catch(v){console.error("Error signing out:",v)}},u=async v=>{if(!e)return!1;try{const E=await zs(e.uid,e.email||"");return E?await lo(E.userID,v):!1}catch(E){return console.error("Error updating profile:",E),!1}},d=async v=>{if(!e)return!1;try{const E=await zs(e.uid,e.email||"");return E?await pD(E.userID,v):!1}catch(E){return console.error("Error updating listening status:",E),!1}},h=async v=>{if(!e)return!1;try{const E=await zs(e.uid,e.email||"");return E?await gD(E.userID,v):!1}catch(E){return console.error("Error updating location:",E),!1}},m=async()=>{try{const v=await Nk(Ai,GP);if(v.user)try{const E=await zs(v.user.uid,v.user.email||"");if(E)await lo(E.userID,{lastLogin:new Date().toISOString(),updatedAt:new Date().toISOString()});else{const T=await j_(v.user);T.success?console.log("Google sign-in profile created:",T.profile):console.error("Failed to create profile for Google user:",T.error)}}catch(E){console.error("Error handling user profile after Google sign-in:",E)}}catch(v){throw console.error("Error signing in with Google:",v),v}},g=a,x=l,S=l,b={user:e,loading:n,isAuthenticated:!!e,register:i,signIn:a,signInWithGoogle:m,login:g,logout:x,signOutUser:l,signOut:S,updateProfile:u,updateListeningStatus:d,updateLocation:h};return o.jsx(A_.Provider,{value:b,children:r})},R_=p.createContext(void 0);function Hu(r,e){return{"Youth Gone Wild":"https://images.unsplash.com/photo-1493225457124-a3eb161ffa5f?ixlib=rb-4.0.3&auto=format&fit=crop&w=400&h=400","18 and Life":"https://images.unsplash.com/photo-1493225457124-a3eb161ffa5f?ixlib=rb-4.0.3&auto=format&fit=crop&w=400&h=400","I Remember You":"https://images.unsplash.com/photo-1493225457124-a3eb161ffa5f?ixlib=rb-4.0.3&auto=format&fit=crop&w=400&h=400","Master of Puppets":"https://images.unsplash.com/photo-1571330735066-03aaa9429d89?ixlib=rb-4.0.3&auto=format&fit=crop&w=400&h=400","Ace of Spades":"https://images.unsplash.com/photo-1571330735066-03aaa9429d89?ixlib=rb-4.0.3&auto=format&fit=crop&w=400&h=400","Breaking the Law":"https://images.unsplash.com/photo-1571330735066-03aaa9429d89?ixlib=rb-4.0.3&auto=format&fit=crop&w=400&h=400"}[r]||"https://images.unsplash.com/photo-1493225457124-a3eb161ffa5f?ixlib=rb-4.0.3&auto=format&fit=crop&w=400&h=400"}function xD({children:r}){const{updateListeningStatus:e}=Ht(),{toast:t}=Sr(),[n,s]=p.useState(()=>{if(typeof window<"u"){const L=localStorage.getItem("debug-mode");return L?JSON.parse(L):!1}return!1}),[i,a]=p.useState(!1),[l,u]=p.useState(()=>{if(typeof window<"u"){const L=localStorage.getItem("radio-volume");return L?parseFloat(L):.7}return .7}),[d,h]=p.useState(()=>typeof window<"u"?localStorage.getItem("radio-muted")==="true":!1),[m,g]=p.useState(!1),[x,S]=p.useState(null),[b,v]=p.useState({id:"hot-97",stationId:"hot-97",name:"Hot 97",frequency:"97.1 FM",location:"New York, NY",genre:"Hip Hop & R&B",streamUrl:"https://playerservices.streamtheworld.com/api/livestream-redirect/WQHTFMAAC.aac",description:"New York's #1 Hip Hop & R&B",icon:"🔥"}),[E,T]=p.useState({title:"Live Radio Stream",artist:"Spandex Salvation Radio",album:"Metal & Rock Music",artwork:"",isAd:!1,stationName:"Hot 97",frequency:"97.1 FM",location:"New York, NY",genre:"Hip Hop & Urban Contemporary",lastUpdated:new Date}),[N,P]=p.useState(!1),[F,U]=p.useState({}),[A,w]=p.useState(null),[C,j]=p.useState("Hot 97"),[_,M]=p.useState(null),[I,X]=p.useState(!1),le=p.useRef(null),he=p.useRef(0),ee=3,R=L=>{if(!L)return[];const fe=L.streamUrl;return[`/api/radio-stream?url=${encodeURIComponent(fe)}`,fe]},z=p.useCallback(async()=>{const L=le.current;if(!L)return;if(m){console.log("Playback already in progress, skipping...");return}g(!0),S(null);let fe=!1;const pe=R(b);if(!pe||((pe==null?void 0:pe.length)||0)===0)throw new Error("No stream URLs available");for(let Se=0;Se<((pe==null?void 0:pe.length)||0);Se++)try{const Ie=pe[Se];if(console.log(`Trying radio stream ${Se+1}: ${Ie}`),L.pause(),L.currentTime=0,L.src=Ie,L.load(),await new Promise((Ue,Xt)=>{const Qn=setTimeout(()=>{Xt(new Error("Stream loading timeout"))},3e3),Jt=()=>{clearTimeout(Qn),Yr(),Ue(!0)},Ir=()=>{clearTimeout(Qn),Yr(),Xt(new Error("Stream loading error"))},Yr=()=>{L.removeEventListener("canplaythrough",Jt),L.removeEventListener("loadeddata",Jt),L.removeEventListener("error",Ir)};L.addEventListener("canplaythrough",Jt),L.addEventListener("loadeddata",Jt),L.addEventListener("error",Ir)}),document.visibilityState==="visible"&&!document.hidden)try{if(L.readyState>=2){const Ue=L.play();if(Ue!==void 0){await Ue,fe=!0,he.current=0,console.log(`Stream ${Se+1} connected successfully`);break}}else{console.log("Audio not ready, waiting for canplay event..."),await new Promise((Xt,Qn)=>{const Jt=setTimeout(()=>{Qn(new Error("Audio ready timeout"))},5e3),Ir=()=>{clearTimeout(Jt),rt(),Xt(!0)},Yr=()=>{clearTimeout(Jt),rt(),Qn(new Error("Audio ready error"))},rt=()=>{L.removeEventListener("canplay",Ir),L.removeEventListener("error",Yr)};L.addEventListener("canplay",Ir),L.addEventListener("error",Yr)});const Ue=L.play();if(Ue!==void 0){await Ue,fe=!0,he.current=0,console.log(`Stream ${Se+1} connected successfully after waiting`);break}}}catch(Ue){if(console.warn(`Play attempt ${Se+1} failed:`,Ue),Ue.name==="NotAllowedError")throw new Error("Autoplay not allowed. Please click the play button.");continue}else{console.log("Page not visible, skipping play attempt");continue}}catch(Ie){if(console.warn(`Stream ${Se+1} failed:`,Ie),Se===((pe==null?void 0:pe.length)||0)-1)throw Ie;continue}if(!fe)throw new Error("All stream URLs failed")},[m,b]),H=p.useCallback(L=>{var pe,Se;console.error("Playback error:",L),g(!1),a(!1);let fe="Playback failed";(L==null?void 0:L.name)==="NotAllowedError"?fe="Autoplay not allowed. Please click the play button.":(pe=L==null?void 0:L.message)!=null&&pe.includes("timeout")?fe="Connection timeout. Please try again.":(Se=L==null?void 0:L.message)!=null&&Se.includes("CORS")?fe="Stream access denied. Please try again.":L!=null&&L.message&&(fe=L.message),S(fe),n&&t({title:"Playback Error",description:fe,variant:"error"}),he.current+=1,he.current<ee&&(console.log(`Auto-retrying playback (${he.current}/${ee})...`),setTimeout(()=>{!i&&!m&&z().catch(console.error)},2e3*he.current))},[n,t,i,m,z]),xe=p.useCallback(L=>{const fe=Math.max(0,Math.min(1,L));u(fe);const pe=le.current;pe&&(pe.volume=d?0:fe),typeof window<"u"&&localStorage.setItem("radio-volume",fe.toString())},[d]),ze=p.useCallback(()=>{const L=!d;h(L);const fe=le.current;fe&&(fe.volume=L?0:l),typeof window<"u"&&localStorage.setItem("radio-muted",L.toString())},[d,l]),W=p.useCallback(async L=>{console.log(`[RadioContext] Changing station to: ${L.name}`);const fe=le.current;fe&&(fe.pause(),fe.src=""),a(!1),g(!1),S(null),he.current=0,v(L),j(L.name),T(pe=>({...pe,title:`Live Stream - ${L.name}`,artist:L.description,album:`${L.frequency} • ${L.location}`,stationName:L.name,frequency:L.frequency,location:L.location,genre:L.genre,lastUpdated:new Date})),typeof window<"u"&&localStorage.setItem("last-selected-station",L.id);try{await z()}catch(pe){console.error("[RadioContext] Failed to start playback for new station:",pe)}},[z]),J=p.useCallback(async()=>{console.log("Audio play event triggered"),a(!0),g(!1),S(null);try{await e(!0),n&&t({title:"Now Playing",description:`You're now listening to ${(b==null?void 0:b.name)||"Spandex Salvation Radio"}`,variant:"default"})}catch(L){console.error("Error updating listening status:",L),n&&t({title:"Status Update Failed",description:"Failed to update listening status",variant:"error"})}},[e,n,t,b==null?void 0:b.name]),Ee=p.useCallback(async()=>{console.log("Audio pause event triggered"),a(!1),g(!1);try{await e(!1),n&&t({title:"Playback Stopped",description:"Playback has been stopped",variant:"default"})}catch(L){console.error("Error updating listening status:",L),n&&t({title:"Status Update Failed",description:"Failed to update listening status",variant:"error"})}},[e,n,t]),ht=p.useCallback(()=>{console.log("Audio loadstart event triggered"),g(!0),S(null)},[]),ft=p.useCallback(()=>{console.log("Audio canplay event triggered")},[]),Lt=p.useCallback(()=>{console.log("Audio canplaythrough event triggered")},[]),Go=p.useCallback(L=>{console.error("Audio error:",L),g(!1),a(!1);const fe=le.current;fe&&fe.src&&!fe.paused&&(S("Unable to connect to radio stream"),n&&t({title:"Connection Error",description:"Unable to connect to radio stream",variant:"error"}))},[n,t]),Kr=p.useCallback(()=>{console.log("Audio stalled event triggered")},[]),Qr=p.useCallback(()=>{console.log("Audio waiting event triggered"),g(!0)},[]);p.useEffect(()=>{const L=le.current;if(L&&L.dataset.initialized!=="true")return L.dataset.initialized="true",L.volume=d?0:l,L.addEventListener("play",J),L.addEventListener("pause",Ee),L.addEventListener("loadstart",ht),L.addEventListener("canplay",ft),L.addEventListener("canplaythrough",Lt),L.addEventListener("error",Go),L.addEventListener("stalled",Kr),L.addEventListener("waiting",Qr),()=>{L.removeEventListener("play",J),L.removeEventListener("pause",Ee),L.removeEventListener("loadstart",ht),L.removeEventListener("canplay",ft),L.removeEventListener("canplaythrough",Lt),L.removeEventListener("error",Go),L.removeEventListener("stalled",Kr),L.removeEventListener("waiting",Qr)}},[l,d,J,Ee,ht,ft,Lt,Go,Kr,Qr]),p.useEffect(()=>{let L=!1;const fe=async()=>{if(!L){L=!0;try{!i&&!x&&b&&(console.log("[RadioContext] Attempting immediate auto-play on mount."),await z())}catch{console.log("[RadioContext] Immediate auto-play failed, will wait for user interaction.")}}};(async()=>{await fe();const Se=async()=>{try{!i&&!x&&b&&(console.log("[RadioContext] User interaction detected, attempting auto-play."),await z())}catch(Ie){console.error("[RadioContext] Auto-play on user interaction failed:",Ie)}document.removeEventListener("click",Se),document.removeEventListener("keydown",Se),document.removeEventListener("touchstart",Se)};document.addEventListener("click",Se,{once:!0}),document.addEventListener("keydown",Se,{once:!0}),document.addEventListener("touchstart",Se,{once:!0})})()},[]),p.useEffect(()=>{let L=!1;const pe=setTimeout(async()=>{if(!L){L=!0;try{const Se=localStorage.getItem("last-selected-station");localStorage.getItem("auto-play-enabled")!=="false"&&b&&!i&&(console.log("[RadioContext] Auto-playing station:",b.name),setTimeout(async()=>{if(!i&&!L)try{await z()}catch(Ue){console.error("[RadioContext] Auto-play failed:",Ue)}},1e3))}catch(Se){console.error("[RadioContext] Auto-play initialization error:",Se)}}},2e3);return()=>{clearTimeout(pe),L=!0}},[b]),p.useEffect(()=>{b&&localStorage.setItem("last-selected-station",b.id)},[b]),p.useEffect(()=>{i||T({title:C||(b==null?void 0:b.name)||"Spandex Salvation Radio",artist:"",album:"",artwork:""})},[i,C,b]);const Kn=p.useCallback(async L=>{if(!(!L||!i)){console.log(`[RadioContext] Fetching metadata for station: ${L.name} (${L.id})`);try{const fe=`/api/now-playing?station=${L.stationId||L.id}`;console.log(`[RadioContext] Calling metadata endpoint: ${fe}`);const pe=await fetch(fe);console.log(`[RadioContext] Metadata response status: ${pe.status}`);const Se=pe.headers.get("content-type");if(console.log(`[RadioContext] Metadata response content-type: ${Se}`),!pe.ok)throw console.warn(`[RadioContext] Metadata endpoint returned error: ${pe.status} ${pe.statusText}`),new Error(`HTTP ${pe.status}: ${pe.statusText}`);if(!Se||!Se.includes("application/json")){console.warn("[RadioContext] Metadata endpoint did not return JSON:",fe);const Xt={title:L.name,artist:L.description,album:`${L.frequency} • ${L.location}`,artwork:Hu(L.name,L.description),isAd:!1,stationName:L.name,frequency:L.frequency,location:L.location,genre:L.genre,lastUpdated:new Date};T(Xt),console.log(`[RadioContext] Using fallback metadata: "${Xt.title}" by ${Xt.artist}`);return}const Ie=await pe.json();console.log("[RadioContext] Received metadata:",Ie);const Ue={title:Ie.title||L.name,artist:Ie.artist||L.description,album:Ie.album||`${L.frequency} • ${L.location}`,artwork:Ie.artwork||Hu(Ie.title||L.name,Ie.artist||L.description),isAd:Ie.isAd||!1,adCompany:Ie.adCompany,adReason:Ie.adReason,stationName:L.name,frequency:L.frequency,location:L.location,genre:L.genre,lastUpdated:new Date};T(Ue),P(Ie.isAd||!1),U({company:Ie.adCompany,reason:Ie.adReason,artwork:Ie.isAd?Ie.artwork:void 0}),console.log(`[RadioContext] Live metadata updated: "${Ue.title}" by ${Ue.artist}${Ue.isAd?" (Advertisement)":""}`),Ue.isAd&&console.log(`[RadioContext] Ad detected: ${Ue.adCompany||"Unknown Company"} - ${Ue.adReason||"Various indicators"}`)}catch(fe){console.error("[RadioContext] Failed to fetch live metadata:",fe);const pe={title:L.name,artist:L.description,album:`${L.frequency} • ${L.location}`,artwork:Hu(L.name,L.description),isAd:!1,stationName:L.name,frequency:L.frequency,location:L.location,genre:L.genre,lastUpdated:new Date};T(pe),console.log(`[RadioContext] Using fallback metadata due to error: "${pe.title}" by ${pe.artist}`)}}},[i]);p.useEffect(()=>{if(i&&b){Kn(b);const L=setInterval(()=>{Kn(b)},1e4);return w(L),()=>{L&&clearInterval(L)}}else A&&(clearInterval(A),w(null))},[i,b,Kn]),p.useEffect(()=>()=>{A&&clearInterval(A)},[A]);const Ko=p.useCallback(async()=>{const L=le.current;if(L)try{i?(L.pause(),S(null),he.current=0):await z()}catch(fe){console.error("Playback toggle error:",fe),H(fe)}},[i,z,H]),Qo={isPlaying:i,volume:l,isMuted:d,isLoading:m,error:x,currentTrack:E,currentStation:b,stationName:C,isTransitioning:I,isAdPlaying:N,adInfo:F,togglePlayback:Ko,setVolume:xe,toggleMute:ze,changeStation:W,setCurrentTrack:T,audioRef:le};return o.jsxs(R_.Provider,{value:Qo,children:[o.jsx("audio",{ref:le,preload:"none",crossOrigin:"anonymous","aria-label":"Live radio stream",style:{display:"none"}}),r]})}function Vc(){const r=p.useContext(R_);if(r===void 0)throw new Error("useRadio must be used within a RadioProvider");return r}const bD=p.createContext(void 0);function vD({children:r}){const[e,t]=p.useState({reduceMotion:!1,highContrast:!1,largeText:!1,keyboardNavigation:!0,screenReader:!1});p.useEffect(()=>{const i=()=>{const u=window.matchMedia("(prefers-contrast: high)").matches,d=window.matchMedia("(prefers-reduced-motion: reduce)").matches;window.matchMedia("(prefers-color-scheme: dark)").matches,t(h=>({...h,reduceMotion:d,highContrast:u})),document.documentElement.style.setProperty("--animation-duration",d?"0.01ms":"300ms"),document.documentElement.style.setProperty("--transition-duration",d?"0.01ms":"200ms"),u?document.documentElement.classList.add("high-contrast"):document.documentElement.classList.remove("high-contrast")};i();const a=window.matchMedia("(prefers-reduced-motion: reduce)"),l=window.matchMedia("(prefers-contrast: high)");return a.addEventListener("change",i),l.addEventListener("change",i),()=>{a.removeEventListener("change",i),l.removeEventListener("change",i)}},[]),p.useEffect(()=>{(()=>{const a=!!(navigator.userAgent.includes("NVDA")||navigator.userAgent.includes("JAWS")||navigator.userAgent.includes("VoiceOver")||window.speechSynthesis);t(l=>({...l,screenReader:a}))})()},[]),p.useEffect(()=>{const i=document.documentElement;if(e.largeText?(i.style.fontSize="120%",i.classList.add("large-text")):(i.style.fontSize="",i.classList.remove("large-text")),e.keyboardNavigation){i.classList.add("keyboard-navigation");const a=document.getElementById("keyboard-focus-styles")||document.createElement("style");a.id="keyboard-focus-styles",a.textContent=`
        .keyboard-navigation *:focus {
          outline: 3px solid #f97316 !important;
          outline-offset: 2px !important;
        }
        .keyboard-navigation button:focus,
        .keyboard-navigation input:focus,
        .keyboard-navigation textarea:focus,
        .keyboard-navigation select:focus,
        .keyboard-navigation [role="button"]:focus,
        .keyboard-navigation [tabindex]:focus {
          box-shadow: 0 0 0 3px rgba(249, 115, 22, 0.3) !important;
        }
      `,document.getElementById("keyboard-focus-styles")||document.head.appendChild(a)}else i.classList.remove("keyboard-navigation");if(e.reduceMotion){const a=document.getElementById("reduced-motion-styles")||document.createElement("style");a.id="reduced-motion-styles",a.textContent=`
        *, *::before, *::after {
          animation-duration: 0.01ms !important;
          animation-iteration-count: 1 !important;
          transition-duration: 0.01ms !important;
          scroll-behavior: auto !important;
        }
      `,document.getElementById("reduced-motion-styles")||document.head.appendChild(a)}else{const a=document.getElementById("reduced-motion-styles");a&&a.remove()}if(e.highContrast){i.classList.add("high-contrast");const a=document.getElementById("high-contrast-styles")||document.createElement("style");a.id="high-contrast-styles",a.textContent=`
        .high-contrast {
          filter: contrast(200%) !important;
        }
        .high-contrast * {
          background-color: white !important;
          color: black !important;
          /* border-color: black !important; */
        }
        .high-contrast button {
          background-color: black !important;
          color: white !important;
          /* border: 2px solid white !important; */
        }
        .high-contrast a {
          color: blue !important;
          text-decoration: underline !important;
        }
      `,document.getElementById("high-contrast-styles")||document.head.appendChild(a)}else{i.classList.remove("high-contrast");const a=document.getElementById("high-contrast-styles");a&&a.remove()}},[e]);const n=(i,a)=>{t(l=>({...l,[i]:a}))},s=i=>{let a=document.getElementById("aria-live-region");a||(a=document.createElement("div"),a.id="aria-live-region",a.setAttribute("aria-live","polite"),a.setAttribute("aria-atomic","true"),a.style.position="absolute",a.style.left="-10000px",a.style.width="1px",a.style.height="1px",a.style.overflow="hidden",document.body.appendChild(a)),a.textContent="",setTimeout(()=>{a.textContent=i},100)};return o.jsx(bD.Provider,{value:{settings:e,updateSetting:n,announceToScreenReader:s},children:r})}function wD(){const{currentTheme:r,getColors:e}=ue(),t=e(),n=r==="light-mode",s=n?"#ffffff":"#000000",i=n?"#000000":"#ffffff";return p.useEffect(()=>{const a=document.querySelector('meta[name="theme-color"]');if(a)a.setAttribute("content",t.primary);else{const T=document.createElement("meta");T.name="theme-color",T.content=t.primary,document.head.appendChild(T)}document.querySelector('link[rel="icon"]');const l=`
      <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 32 32">
        <defs>
          <linearGradient id="bgGrad" x1="0%" y1="0%" x2="100%" y2="100%">
            <stop offset="0%" style="stop-color:${t.primary}" />
            <stop offset="100%" style="stop-color:${t.secondary}" />
          </linearGradient>
          <linearGradient id="discGrad" x1="0%" y1="0%" x2="100%" y2="100%">
            <stop offset="0%" style="stop-color:#ffffff;stop-opacity:0.95" />
            <stop offset="50%" style="stop-color:#e8e8e8;stop-opacity:0.85" />
            <stop offset="100%" style="stop-color:#d0d0d0;stop-opacity:0.75" />
          </linearGradient>
        </defs>
        
        <!-- Background circle with theme gradient -->
        <circle cx="16" cy="16" r="16" fill="url(#bgGrad)"/>
        
        <!-- Music disc -->
        <circle cx="16" cy="16" r="11" fill="url(#discGrad)"/>
        
        <!-- Center hole -->
        <circle cx="16" cy="16" r="4" fill="${n?"#1a1a1a":"#0a0a0a"}"/>
        
        <!-- Inner ring details -->
        <circle cx="16" cy="16" r="8" stroke="${n?"#666666":"#999999"}" stroke-width="0.5" fill="none" opacity="0.6"/>
        <circle cx="16" cy="16" r="6" stroke="${n?"#888888":"#bbbbbb"}" stroke-width="0.3" fill="none" opacity="0.4"/>
        
        <!-- Shine effect -->
        <path d="M 9 9 A 9 9 0 0 1 23 9" stroke="white" stroke-width="1.2" fill="none" opacity="0.5"/>
        <path d="M 11 11 A 7 7 0 0 1 21 11" stroke="white" stroke-width="0.8" fill="none" opacity="0.3"/>
      </svg>
    `,d=`data:image/svg+xml,${encodeURIComponent(l)}`;if(document.querySelectorAll('link[rel*="icon"]').forEach(T=>{T.href=d}),!document.querySelector('link[rel="icon"]')){const T=document.createElement("link");T.rel="icon",T.type="image/svg+xml",T.href=d,document.head.appendChild(T)}const m=document.querySelector('meta[name="color-scheme"]');if(m)m.setAttribute("content",n?"light":"dark");else{const T=document.createElement("meta");T.name="color-scheme",T.content=n?"light":"dark",document.head.appendChild(T)}const g=document.querySelector('meta[property="og:image"]'),S=`${window.location.origin}/LinkDisplayPreview.png`;if(g)g.setAttribute("content",S);else{const T=document.createElement("meta");T.setAttribute("property","og:image"),T.content=S,document.head.appendChild(T)}const b=document.querySelector('meta[name="twitter:image"]');if(b)b.setAttribute("content",S);else{const T=document.createElement("meta");T.name="twitter:image",T.content=S,document.head.appendChild(T)}const v=document.querySelector('meta[property="og:url"]'),E=window.location.href.split("?")[0];if(v)v.setAttribute("content",E);else{const T=document.createElement("meta");T.setAttribute("property","og:url"),T.content=E,document.head.appendChild(T)}document.documentElement.style.setProperty("--preview-primary",t.primary),document.documentElement.style.setProperty("--preview-secondary",t.secondary),document.documentElement.style.setProperty("--preview-background",s),document.documentElement.style.setProperty("--preview-text",i)},[r,t,n,s,i]),null}const _D=p.createContext(null);function TD({children:r,siteKey:e}){const[t,n]=p.useState(!1);p.useEffect(()=>{(async()=>{if(window.grecaptcha){n(!0);return}const a=document.createElement("script");a.src=`https://www.google.com/recaptcha/api.js?render=${e}`,a.async=!0,a.defer=!0,a.onload=()=>{window.grecaptcha.ready(()=>{n(!0)})},document.head.appendChild(a)})()},[e]);const s=async i=>{if(!window.grecaptcha||!t)throw new Error("reCAPTCHA not loaded");return new Promise((a,l)=>{window.grecaptcha.ready(()=>{window.grecaptcha.execute(e,{action:i}).then(a).catch(l)})})};return o.jsx(_D.Provider,{value:{executeRecaptcha:s,isLoaded:t},children:r})}class ED extends p.Component{constructor(e){super(e),this.state={hasError:!1}}static getDerivedStateFromError(e){return{hasError:!0,error:e}}componentDidCatch(e,t){console.error("ErrorBoundary caught an error:",e,t)}render(){return this.state.hasError?this.props.fallback||o.jsx("div",{className:"min-h-screen flex items-center justify-center bg-black text-white",children:o.jsxs("div",{className:"text-center p-8",children:[o.jsx("h1",{className:"text-2xl font-bold mb-4",children:"Something went wrong"}),o.jsx("p",{className:"mb-4",children:"The site encountered an error. Please refresh the page."}),o.jsx("button",{onClick:()=>window.location.reload(),className:"px-4 py-2 bg-orange-600 text-white rounded hover:bg-orange-700 focus:outline-none focus:ring-0",children:"Refresh Page"})]})}):this.props.children}}const Ff=Mc("inline-flex items-center justify-center gap-2 whitespace-nowrap rounded-md text-sm font-medium transition-all duration-200 disabled:pointer-events-none disabled:opacity-50 [&_svg]:pointer-events-none [&_svg]:size-4 [&_svg]:shrink-0 hover:scale-105 hover:shadow-lg active:scale-95",{variants:{variant:{default:"border-0 bg-primary text-primary-foreground hover:bg-primary/90 hover:shadow-xl hover:shadow-primary/30 hover:border-2 hover:border-primary hover:glow-primary",destructive:"border-0 bg-destructive text-destructive-foreground hover:bg-destructive/90 hover:shadow-xl hover:shadow-destructive/30 hover:border-2 hover:border-destructive",outline:"border-2 border-primary bg-transparent text-primary hover:bg-primary/10 hover:text-primary hover:shadow-lg hover:shadow-primary/20 hover:border-primary hover:glow-primary",secondary:"border-0 bg-secondary text-secondary-foreground hover:bg-secondary/80 hover:shadow-lg hover:shadow-primary/20 hover:border-2 hover:border-primary hover:glow-primary",ghost:"border-0 bg-transparent hover:border-2 hover:border-primary hover:bg-accent hover:text-accent-foreground hover:shadow-md hover:shadow-primary/10 hover:glow-primary focus:border-2 focus:border-primary",link:"text-primary underline-offset-4 hover:underline hover:scale-100 border-0 hover:border-2 hover:border-primary/60 hover:glow-primary focus:border-2 focus:border-primary/60"},size:{default:"h-10 px-4 py-2",sm:"h-9 rounded-md px-3",lg:"h-11 rounded-md px-8",icon:"h-10 w-10"}},defaultVariants:{variant:"default",size:"default"}}),Z=p.forwardRef(({className:r,variant:e,size:t,asChild:n=!1,...s},i)=>{const a=n?rE:"button";return o.jsx(a,{className:te(Ff({variant:e,size:t,className:r})),ref:i,...s})});Z.displayName="Button";const se=p.forwardRef(({className:r,...e},t)=>o.jsx("div",{ref:t,className:te("rounded-lg bg-card text-card-foreground shadow-sm",r),...e}));se.displayName="Card";const Ye=p.forwardRef(({className:r,...e},t)=>o.jsx("div",{ref:t,className:te("flex flex-col space-y-1.5 p-6",r),...e}));Ye.displayName="CardHeader";const Je=p.forwardRef(({className:r,...e},t)=>o.jsx("div",{ref:t,className:te("text-2xl font-semibold leading-none tracking-tight",r),...e}));Je.displayName="CardTitle";const ml=p.forwardRef(({className:r,...e},t)=>o.jsx("div",{ref:t,className:te("text-sm text-muted-foreground",r),...e}));ml.displayName="CardDescription";const oe=p.forwardRef(({className:r,...e},t)=>o.jsx("div",{ref:t,className:te("p-6 pt-0",r),...e}));oe.displayName="CardContent";const ND=p.forwardRef(({className:r,...e},t)=>o.jsx("div",{ref:t,className:te("flex items-center p-6 pt-0",r),...e}));ND.displayName="CardFooter";const CD=Mc("inline-flex items-center rounded-full border px-2.5 py-0.5 text-xs font-semibold transition-colors",{variants:{variant:{default:"border-transparent bg-primary text-primary-foreground hover:bg-primary/80",secondary:"border-transparent bg-secondary text-secondary-foreground hover:bg-secondary/80",destructive:"border-transparent bg-destructive text-destructive-foreground hover:bg-destructive/80",outline:"text-foreground"}},defaultVariants:{variant:"default"}});function Ke({className:r,variant:e,...t}){return o.jsx("div",{className:te(CD({variant:e}),r),...t})}const P_=p.forwardRef(({className:r,...e},t)=>o.jsx(Xy,{ref:t,className:te("relative flex h-10 w-10 shrink-0 overflow-hidden rounded-full",r),...e}));P_.displayName=Xy.displayName;const M_=p.forwardRef(({className:r,...e},t)=>o.jsx(Jy,{ref:t,className:te("aspect-square h-full w-full",r),...e}));M_.displayName=Jy.displayName;const D_=p.forwardRef(({className:r,...e},t)=>o.jsx(Zy,{ref:t,className:te("flex h-full w-full items-center justify-center rounded-full bg-muted",r),...e}));D_.displayName=Zy.displayName;function kD(r,[e,t]){return Math.min(t,Math.max(e,r))}function SD(r,e){return p.useReducer((t,n)=>e[t][n]??t,r)}var Uf="ScrollArea",[O_,e6]=$n(Uf),[jD,Yt]=O_(Uf),L_=p.forwardRef((r,e)=>{const{__scopeScrollArea:t,type:n="hover",dir:s,scrollHideDelay:i=600,...a}=r,[l,u]=p.useState(null),[d,h]=p.useState(null),[m,g]=p.useState(null),[x,S]=p.useState(null),[b,v]=p.useState(null),[E,T]=p.useState(0),[N,P]=p.useState(0),[F,U]=p.useState(!1),[A,w]=p.useState(!1),C=at(e,_=>u(_)),j=ex(s);return o.jsx(jD,{scope:t,type:n,dir:j,scrollHideDelay:i,scrollArea:l,viewport:d,onViewportChange:h,content:m,onContentChange:g,scrollbarX:x,onScrollbarXChange:S,scrollbarXEnabled:F,onScrollbarXEnabledChange:U,scrollbarY:b,onScrollbarYChange:v,scrollbarYEnabled:A,onScrollbarYEnabledChange:w,onCornerWidthChange:T,onCornerHeightChange:P,children:o.jsx(De.div,{dir:j,...a,ref:C,style:{position:"relative","--radix-scroll-area-corner-width":E+"px","--radix-scroll-area-corner-height":N+"px",...r.style}})})});L_.displayName=Uf;var V_="ScrollAreaViewport",F_=p.forwardRef((r,e)=>{const{__scopeScrollArea:t,children:n,nonce:s,...i}=r,a=Yt(V_,t),l=p.useRef(null),u=at(e,l,a.onViewportChange);return o.jsxs(o.Fragment,{children:[o.jsx("style",{dangerouslySetInnerHTML:{__html:"[data-radix-scroll-area-viewport]{scrollbar-width:none;-ms-overflow-style:none;-webkit-overflow-scrolling:touch;}[data-radix-scroll-area-viewport]::-webkit-scrollbar{display:none}"},nonce:s}),o.jsx(De.div,{"data-radix-scroll-area-viewport":"",...i,ref:u,style:{overflowX:a.scrollbarXEnabled?"scroll":"hidden",overflowY:a.scrollbarYEnabled?"scroll":"hidden",...r.style},children:o.jsx("div",{ref:a.onContentChange,style:{minWidth:"100%",display:"table"},children:n})})]})});F_.displayName=V_;var jr="ScrollAreaScrollbar",$f=p.forwardRef((r,e)=>{const{forceMount:t,...n}=r,s=Yt(jr,r.__scopeScrollArea),{onScrollbarXEnabledChange:i,onScrollbarYEnabledChange:a}=s,l=r.orientation==="horizontal";return p.useEffect(()=>(l?i(!0):a(!0),()=>{l?i(!1):a(!1)}),[l,i,a]),s.type==="hover"?o.jsx(ID,{...n,ref:e,forceMount:t}):s.type==="scroll"?o.jsx(AD,{...n,ref:e,forceMount:t}):s.type==="auto"?o.jsx(U_,{...n,ref:e,forceMount:t}):s.type==="always"?o.jsx(Bf,{...n,ref:e}):null});$f.displayName=jr;var ID=p.forwardRef((r,e)=>{const{forceMount:t,...n}=r,s=Yt(jr,r.__scopeScrollArea),[i,a]=p.useState(!1);return p.useEffect(()=>{const l=s.scrollArea;let u=0;if(l){const d=()=>{window.clearTimeout(u),a(!0)},h=()=>{u=window.setTimeout(()=>a(!1),s.scrollHideDelay)};return l.addEventListener("pointerenter",d),l.addEventListener("pointerleave",h),()=>{window.clearTimeout(u),l.removeEventListener("pointerenter",d),l.removeEventListener("pointerleave",h)}}},[s.scrollArea,s.scrollHideDelay]),o.jsx(kr,{present:t||i,children:o.jsx(U_,{"data-state":i?"visible":"hidden",...n,ref:e})})}),AD=p.forwardRef((r,e)=>{const{forceMount:t,...n}=r,s=Yt(jr,r.__scopeScrollArea),i=r.orientation==="horizontal",a=Uc(()=>u("SCROLL_END"),100),[l,u]=SD("hidden",{hidden:{SCROLL:"scrolling"},scrolling:{SCROLL_END:"idle",POINTER_ENTER:"interacting"},interacting:{SCROLL:"interacting",POINTER_LEAVE:"idle"},idle:{HIDE:"hidden",SCROLL:"scrolling",POINTER_ENTER:"interacting"}});return p.useEffect(()=>{if(l==="idle"){const d=window.setTimeout(()=>u("HIDE"),s.scrollHideDelay);return()=>window.clearTimeout(d)}},[l,s.scrollHideDelay,u]),p.useEffect(()=>{const d=s.viewport,h=i?"scrollLeft":"scrollTop";if(d){let m=d[h];const g=()=>{const x=d[h];m!==x&&(u("SCROLL"),a()),m=x};return d.addEventListener("scroll",g),()=>d.removeEventListener("scroll",g)}},[s.viewport,i,u,a]),o.jsx(kr,{present:t||l!=="hidden",children:o.jsx(Bf,{"data-state":l==="hidden"?"hidden":"visible",...n,ref:e,onPointerEnter:_e(r.onPointerEnter,()=>u("POINTER_ENTER")),onPointerLeave:_e(r.onPointerLeave,()=>u("POINTER_LEAVE"))})})}),U_=p.forwardRef((r,e)=>{const t=Yt(jr,r.__scopeScrollArea),{forceMount:n,...s}=r,[i,a]=p.useState(!1),l=r.orientation==="horizontal",u=Uc(()=>{if(t.viewport){const d=t.viewport.offsetWidth<t.viewport.scrollWidth,h=t.viewport.offsetHeight<t.viewport.scrollHeight;a(l?d:h)}},10);return Po(t.viewport,u),Po(t.content,u),o.jsx(kr,{present:n||i,children:o.jsx(Bf,{"data-state":i?"visible":"hidden",...s,ref:e})})}),Bf=p.forwardRef((r,e)=>{const{orientation:t="vertical",...n}=r,s=Yt(jr,r.__scopeScrollArea),i=p.useRef(null),a=p.useRef(0),[l,u]=p.useState({content:0,viewport:0,scrollbar:{size:0,paddingStart:0,paddingEnd:0}}),d=H_(l.viewport,l.content),h={...n,sizes:l,onSizesChange:u,hasThumb:d>0&&d<1,onThumbChange:g=>i.current=g,onThumbPointerUp:()=>a.current=0,onThumbPointerDown:g=>a.current=g};function m(g,x){return LD(g,a.current,l,x)}return t==="horizontal"?o.jsx(RD,{...h,ref:e,onThumbPositionChange:()=>{if(s.viewport&&i.current){const g=s.viewport.scrollLeft,x=_y(g,l,s.dir);i.current.style.transform=`translate3d(${x}px, 0, 0)`}},onWheelScroll:g=>{s.viewport&&(s.viewport.scrollLeft=g)},onDragScroll:g=>{s.viewport&&(s.viewport.scrollLeft=m(g,s.dir))}}):t==="vertical"?o.jsx(PD,{...h,ref:e,onThumbPositionChange:()=>{if(s.viewport&&i.current){const g=s.viewport.scrollTop,x=_y(g,l);i.current.style.transform=`translate3d(0, ${x}px, 0)`}},onWheelScroll:g=>{s.viewport&&(s.viewport.scrollTop=g)},onDragScroll:g=>{s.viewport&&(s.viewport.scrollTop=m(g))}}):null}),RD=p.forwardRef((r,e)=>{const{sizes:t,onSizesChange:n,...s}=r,i=Yt(jr,r.__scopeScrollArea),[a,l]=p.useState(),u=p.useRef(null),d=at(e,u,i.onScrollbarXChange);return p.useEffect(()=>{u.current&&l(getComputedStyle(u.current))},[u]),o.jsx(B_,{"data-orientation":"horizontal",...s,ref:d,sizes:t,style:{bottom:0,left:i.dir==="rtl"?"var(--radix-scroll-area-corner-width)":0,right:i.dir==="ltr"?"var(--radix-scroll-area-corner-width)":0,"--radix-scroll-area-thumb-width":Fc(t)+"px",...r.style},onThumbPointerDown:h=>r.onThumbPointerDown(h.x),onDragScroll:h=>r.onDragScroll(h.x),onWheelScroll:(h,m)=>{if(i.viewport){const g=i.viewport.scrollLeft+h.deltaX;r.onWheelScroll(g),G_(g,m)&&h.preventDefault()}},onResize:()=>{u.current&&i.viewport&&a&&n({content:i.viewport.scrollWidth,viewport:i.viewport.offsetWidth,scrollbar:{size:u.current.clientWidth,paddingStart:Wl(a.paddingLeft),paddingEnd:Wl(a.paddingRight)}})}})}),PD=p.forwardRef((r,e)=>{const{sizes:t,onSizesChange:n,...s}=r,i=Yt(jr,r.__scopeScrollArea),[a,l]=p.useState(),u=p.useRef(null),d=at(e,u,i.onScrollbarYChange);return p.useEffect(()=>{u.current&&l(getComputedStyle(u.current))},[u]),o.jsx(B_,{"data-orientation":"vertical",...s,ref:d,sizes:t,style:{top:0,right:i.dir==="ltr"?0:void 0,left:i.dir==="rtl"?0:void 0,bottom:"var(--radix-scroll-area-corner-height)","--radix-scroll-area-thumb-height":Fc(t)+"px",...r.style},onThumbPointerDown:h=>r.onThumbPointerDown(h.y),onDragScroll:h=>r.onDragScroll(h.y),onWheelScroll:(h,m)=>{if(i.viewport){const g=i.viewport.scrollTop+h.deltaY;r.onWheelScroll(g),G_(g,m)&&h.preventDefault()}},onResize:()=>{u.current&&i.viewport&&a&&n({content:i.viewport.scrollHeight,viewport:i.viewport.offsetHeight,scrollbar:{size:u.current.clientHeight,paddingStart:Wl(a.paddingTop),paddingEnd:Wl(a.paddingBottom)}})}})}),[MD,$_]=O_(jr),B_=p.forwardRef((r,e)=>{const{__scopeScrollArea:t,sizes:n,hasThumb:s,onThumbChange:i,onThumbPointerUp:a,onThumbPointerDown:l,onThumbPositionChange:u,onDragScroll:d,onWheelScroll:h,onResize:m,...g}=r,x=Yt(jr,t),[S,b]=p.useState(null),v=at(e,C=>b(C)),E=p.useRef(null),T=p.useRef(""),N=x.viewport,P=n.content-n.viewport,F=or(h),U=or(u),A=Uc(m,10);function w(C){if(E.current){const j=C.clientX-E.current.left,_=C.clientY-E.current.top;d({x:j,y:_})}}return p.useEffect(()=>{const C=j=>{const _=j.target;(S==null?void 0:S.contains(_))&&F(j,P)};return document.addEventListener("wheel",C,{passive:!1}),()=>document.removeEventListener("wheel",C,{passive:!1})},[N,S,P,F]),p.useEffect(U,[n,U]),Po(S,A),Po(x.content,A),o.jsx(MD,{scope:t,scrollbar:S,hasThumb:s,onThumbChange:or(i),onThumbPointerUp:or(a),onThumbPositionChange:U,onThumbPointerDown:or(l),children:o.jsx(De.div,{...g,ref:v,style:{position:"absolute",...g.style},onPointerDown:_e(r.onPointerDown,C=>{C.button===0&&(C.target.setPointerCapture(C.pointerId),E.current=S.getBoundingClientRect(),T.current=document.body.style.webkitUserSelect,document.body.style.webkitUserSelect="none",x.viewport&&(x.viewport.style.scrollBehavior="auto"),w(C))}),onPointerMove:_e(r.onPointerMove,w),onPointerUp:_e(r.onPointerUp,C=>{const j=C.target;j.hasPointerCapture(C.pointerId)&&j.releasePointerCapture(C.pointerId),document.body.style.webkitUserSelect=T.current,x.viewport&&(x.viewport.style.scrollBehavior=""),E.current=null})})})}),Hl="ScrollAreaThumb",z_=p.forwardRef((r,e)=>{const{forceMount:t,...n}=r,s=$_(Hl,r.__scopeScrollArea);return o.jsx(kr,{present:t||s.hasThumb,children:o.jsx(DD,{ref:e,...n})})}),DD=p.forwardRef((r,e)=>{const{__scopeScrollArea:t,style:n,...s}=r,i=Yt(Hl,t),a=$_(Hl,t),{onThumbPositionChange:l}=a,u=at(e,m=>a.onThumbChange(m)),d=p.useRef(void 0),h=Uc(()=>{d.current&&(d.current(),d.current=void 0)},100);return p.useEffect(()=>{const m=i.viewport;if(m){const g=()=>{if(h(),!d.current){const x=VD(m,l);d.current=x,l()}};return l(),m.addEventListener("scroll",g),()=>m.removeEventListener("scroll",g)}},[i.viewport,h,l]),o.jsx(De.div,{"data-state":a.hasThumb?"visible":"hidden",...s,ref:u,style:{width:"var(--radix-scroll-area-thumb-width)",height:"var(--radix-scroll-area-thumb-height)",...n},onPointerDownCapture:_e(r.onPointerDownCapture,m=>{const x=m.target.getBoundingClientRect(),S=m.clientX-x.left,b=m.clientY-x.top;a.onThumbPointerDown({x:S,y:b})}),onPointerUp:_e(r.onPointerUp,a.onThumbPointerUp)})});z_.displayName=Hl;var zf="ScrollAreaCorner",q_=p.forwardRef((r,e)=>{const t=Yt(zf,r.__scopeScrollArea),n=!!(t.scrollbarX&&t.scrollbarY);return t.type!=="scroll"&&n?o.jsx(OD,{...r,ref:e}):null});q_.displayName=zf;var OD=p.forwardRef((r,e)=>{const{__scopeScrollArea:t,...n}=r,s=Yt(zf,t),[i,a]=p.useState(0),[l,u]=p.useState(0),d=!!(i&&l);return Po(s.scrollbarX,()=>{var m;const h=((m=s.scrollbarX)==null?void 0:m.offsetHeight)||0;s.onCornerHeightChange(h),u(h)}),Po(s.scrollbarY,()=>{var m;const h=((m=s.scrollbarY)==null?void 0:m.offsetWidth)||0;s.onCornerWidthChange(h),a(h)}),d?o.jsx(De.div,{...n,ref:e,style:{width:i,height:l,position:"absolute",right:s.dir==="ltr"?0:void 0,left:s.dir==="rtl"?0:void 0,bottom:0,...r.style}}):null});function Wl(r){return r?parseInt(r,10):0}function H_(r,e){const t=r/e;return isNaN(t)?0:t}function Fc(r){const e=H_(r.viewport,r.content),t=r.scrollbar.paddingStart+r.scrollbar.paddingEnd,n=(r.scrollbar.size-t)*e;return Math.max(n,18)}function LD(r,e,t,n="ltr"){const s=Fc(t),i=s/2,a=e||i,l=s-a,u=t.scrollbar.paddingStart+a,d=t.scrollbar.size-t.scrollbar.paddingEnd-l,h=t.content-t.viewport,m=n==="ltr"?[0,h]:[h*-1,0];return W_([u,d],m)(r)}function _y(r,e,t="ltr"){const n=Fc(e),s=e.scrollbar.paddingStart+e.scrollbar.paddingEnd,i=e.scrollbar.size-s,a=e.content-e.viewport,l=i-n,u=t==="ltr"?[0,a]:[a*-1,0],d=kD(r,u);return W_([0,a],[0,l])(d)}function W_(r,e){return t=>{if(r[0]===r[1]||e[0]===e[1])return e[0];const n=(e[1]-e[0])/(r[1]-r[0]);return e[0]+n*(t-r[0])}}function G_(r,e){return r>0&&r<e}var VD=(r,e=()=>{})=>{let t={left:r.scrollLeft,top:r.scrollTop},n=0;return function s(){const i={left:r.scrollLeft,top:r.scrollTop},a=t.left!==i.left,l=t.top!==i.top;(a||l)&&e(),t=i,n=window.requestAnimationFrame(s)}(),()=>window.cancelAnimationFrame(n)};function Uc(r,e){const t=or(r),n=p.useRef(0);return p.useEffect(()=>()=>window.clearTimeout(n.current),[]),p.useCallback(()=>{window.clearTimeout(n.current),n.current=window.setTimeout(t,e)},[t,e])}function Po(r,e){const t=or(e);Hy(()=>{let n=0;if(r){const s=new ResizeObserver(()=>{cancelAnimationFrame(n),n=window.requestAnimationFrame(t)});return s.observe(r),()=>{window.cancelAnimationFrame(n),s.unobserve(r)}}},[r,t])}var K_=L_,FD=F_,UD=q_;const $c=p.forwardRef(({className:r,children:e,...t},n)=>o.jsxs(K_,{ref:n,className:te("relative overflow-hidden",r),...t,children:[o.jsx(FD,{className:"h-full w-full rounded-[inherit]",children:e}),o.jsx(Q_,{}),o.jsx(UD,{})]}));$c.displayName=K_.displayName;const Q_=p.forwardRef(({className:r,orientation:e="vertical",...t},n)=>o.jsx($f,{ref:n,orientation:e,className:te("flex touch-none select-none transition-colors",e==="vertical"&&"h-full w-2.5 border-l border-l-transparent p-[1px]",e==="horizontal"&&"h-2.5 flex-col border-t border-t-transparent p-[1px]",r),...t,children:o.jsx(z_,{className:"relative flex-1 rounded-full bg-border"})}));Q_.displayName=$f.displayName;const $e=p.forwardRef(({className:r,type:e,...t},n)=>o.jsx("input",{type:e,className:te("flex h-10 w-full rounded-md border border-input bg-background px-3 py-2 text-base file:border-0 file:bg-transparent file:text-sm file:font-medium file:text-foreground placeholder:text-muted-foreground disabled:cursor-not-allowed disabled:opacity-50 md:text-sm",r),ref:n,...t}));$e.displayName="Input";function Y_({isEnabled:r,onToggle:e,isHost:t=!1}){const{user:n,isAuthenticated:s}=Ht(),[i,a]=p.useState(null),[l,u]=p.useState(!1),[d,h]=p.useState(!0),[m,g]=p.useState([]),[x,S]=p.useState(""),[b,v]=p.useState([]),[E,T]=p.useState(!1),N=p.useRef(null),{colors:P}=ue(),F=(i==null?void 0:i.activeSubscription)||!1;p.useEffect(()=>{s&&F&&(v([{id:"1",username:"MetalHead",isOnline:!0,isHost:!1},{id:"2",username:"RockStar",isOnline:!0,isHost:!0},{id:"3",username:"PunkRock",isOnline:!0,isHost:!1}]),g([{id:"1",userId:"2",username:"RockStar",message:"Welcome to the live chat!",timestamp:new Date(Date.now()-6e4),userProfile:{isAdmin:!0}},{id:"2",userId:"1",username:"MetalHead",message:"Thanks! This is awesome!",timestamp:new Date(Date.now()-3e4),userProfile:{isPremium:!0}},{id:"3",userId:"3",username:"PunkRock",message:"Great music playing right now!",timestamp:new Date(Date.now()-15e3),userProfile:{}}]))},[s,F]),p.useEffect(()=>{var w;!s||!n||a({userID:n.uid,firstName:((w=n.displayName)==null?void 0:w.split(" ")[0])||"User",userProfileImage:n.photoURL||void 0,activeSubscription:!0})},[s,n]),p.useEffect(()=>{if(!s||!F)return;const w=setInterval(()=>{if(Math.random()>.7){const C={id:Date.now().toString(),userId:"2",username:"RockStar",message:"Keep the music playing! 🤘",timestamp:new Date,userProfile:{isAdmin:!0}};g(j=>[...j,C])}},3e4);return()=>clearInterval(w)},[s,F]),p.useEffect(()=>{N.current&&(N.current.scrollTop=N.current.scrollHeight)},[m]);const U=async()=>{if(!x.trim()||!i)return;const w={id:Date.now().toString(),userId:i.userID,username:i.firstName||"Anonymous",message:x.trim(),timestamp:new Date,userProfile:{avatar:i.userProfileImage,isPremium:F,isAdmin:!1}};try{await Af("live_chat_send_message",async()=>{g(C=>[...C,w]),S(""),setTimeout(()=>{N.current&&(N.current.scrollTop=N.current.scrollHeight)},100)},{message_length:x.trim().length,user_premium:F?1:0})}catch(C){console.error("Failed to send message:",C)}},A=w=>w.toLocaleTimeString("en-US",{hour:"2-digit",minute:"2-digit",hour12:!0});return!s&&!d?o.jsx("div",{className:"fixed bottom-4 right-4 z-50",children:o.jsx(Z,{onClick:()=>h(!0),className:"bg-primary hover:bg-primary/90 text-white rounded-full p-3 shadow-lg",style:{background:`linear-gradient(45deg, ${P.primary}, ${P.secondary})`,boxShadow:`0 4px 16px ${P.primary}40`},children:o.jsx(Ys,{className:"h-5 w-5"})})}):!s&&d?o.jsx("div",{className:"fixed bottom-4 right-4 z-40",children:o.jsx(se,{className:"w-80 shadow-lg backdrop-blur-sm border-0 live-chat-card",style:{background:`linear-gradient(135deg, ${P.primary}15, ${P.primary}05)`,border:`1px solid ${P.primary}30`},children:o.jsxs(oe,{className:"p-4 relative",children:[o.jsxs("button",{onClick:()=>h(!1),className:"absolute right-2 top-2 rounded-full opacity-70 transition-all duration-200 hover:opacity-100 focus:outline-none focus:ring-0 disabled:pointer-events-none flex items-center justify-center cursor-pointer",style:{color:P.text,backgroundColor:"transparent",border:"none",width:"24px",height:"24px"},onMouseEnter:w=>{w.currentTarget.style.color=P.primary},onMouseLeave:w=>{w.currentTarget.style.color=P.text},children:[o.jsx(Un,{className:"h-4 w-4"}),o.jsx("span",{className:"sr-only",children:"Close"})]}),o.jsxs("div",{className:"text-center space-y-3",children:[o.jsx(Ys,{className:"w-8 h-8 mx-auto",style:{color:P.primary}}),o.jsx("h3",{className:"font-bold text-lg",style:{color:P.primary},children:"Live Chat"}),o.jsx("p",{className:"text-sm text-foreground",children:"Sign in to join the live chat with other metalheads!"}),o.jsxs("div",{className:"space-y-2",children:[o.jsx("p",{className:"text-xs text-muted-foreground",children:"✓ Real-time messaging ✓ Premium community ✓ Song requests"}),o.jsxs("div",{className:"flex gap-2",children:[o.jsxs(Z,{size:"sm",className:"flex-1 border-0 focus:outline-none focus:ring-0",style:{backgroundColor:P.primary,color:P.primaryText||"white",border:`1px solid ${P.primary}30`},onClick:()=>{const w=new CustomEvent("openAuthModal",{detail:{mode:"login"}});window.dispatchEvent(w)},children:[o.jsx(n_,{className:"w-4 h-4 mr-1"}),"Sign In"]}),o.jsx(Z,{size:"sm",variant:"outline",onClick:()=>{const w=new CustomEvent("openAuthModal",{detail:{mode:"register"}});window.dispatchEvent(w)},className:"flex-1 border-0 focus:outline-none focus:ring-0",style:{borderColor:P.primary+"40",color:P.primary,backgroundColor:"transparent",border:`1px solid ${P.primary}30`},children:"Sign Up"})]})]})]})]})})}):F?r?o.jsxs(o.Fragment,{children:[!l&&o.jsxs(Z,{onClick:()=>{s?u(!0):h(!0)},className:"fixed bottom-4 right-4 z-50 bg-primary hover:bg-primary/90 text-white rounded-full p-4 shadow-lg",style:{background:`linear-gradient(45deg, ${P.primary}, ${P.secondary})`,boxShadow:`0 8px 32px ${P.primary}40`},children:[o.jsx(Ys,{className:"h-6 w-6"}),o.jsx(Ke,{className:"absolute -top-2 -right-2 bg-red-500 text-white text-xs px-1.5 py-0.5",children:b.length})]}),l&&o.jsx("div",{className:"fixed bottom-4 right-4 w-80 h-96 z-50",children:o.jsxs(se,{className:"h-full shadow-2xl backdrop-blur-sm border-0 live-chat-card",style:{background:`linear-gradient(135deg, ${P.surface}95, ${P.surface}85)`,border:`1px solid ${P.primary}30`},children:[o.jsx(Ye,{className:"pb-3",children:o.jsxs("div",{className:"flex items-center justify-between",children:[o.jsxs("div",{className:"flex items-center gap-2",children:[o.jsx(Je,{className:"text-sm font-semibold",style:{color:P.text},children:"Live Chat"}),o.jsxs(Ke,{variant:"secondary",className:"text-xs",style:{backgroundColor:P.primary+"20",color:P.primary},children:[o.jsx("div",{className:"w-2 h-2 rounded-full mr-1",style:{backgroundColor:P.primary}}),"LIVE"]})]}),o.jsxs("div",{className:"flex items-center gap-2",children:[o.jsxs("div",{className:"flex items-center gap-1 text-xs",style:{color:P.textSecondary},children:[o.jsx(r5,{className:"h-3 w-3"}),b.length]}),t&&o.jsx(Z,{onClick:e,variant:"ghost",size:"sm",className:"p-1 focus:outline-none focus:ring-0",style:{color:P.textSecondary},children:o.jsx(BM,{className:"h-4 w-4"})}),o.jsx(Z,{onClick:()=>u(!1),variant:"ghost",size:"sm",className:"p-1 focus:outline-none focus:ring-0",style:{color:P.textSecondary},children:o.jsx(Un,{className:"h-4 w-4"})})]})]})}),o.jsxs(oe,{className:"p-0 flex flex-col h-full",children:[o.jsx($c,{className:"flex-1 px-4",ref:N,children:o.jsx("div",{className:"space-y-3 py-2",children:m.length===0?o.jsxs("div",{className:"text-center py-8",style:{color:P.textSecondary},children:[o.jsx(Ys,{className:"h-8 w-8 mx-auto mb-2",style:{color:P.textSecondary}}),o.jsx("p",{className:"text-sm",children:"Welcome to the live chat!"}),o.jsx("p",{className:"text-xs",children:"Be respectful and enjoy the show."})]}):m.map(w=>{var C;return o.jsxs("div",{className:"flex gap-2",children:[o.jsxs(P_,{className:"w-8 h-8 flex-shrink-0",children:[o.jsx(M_,{src:(C=w.userProfile)==null?void 0:C.avatar}),o.jsx(D_,{className:"text-xs",style:{backgroundColor:P.primary,color:P.primaryText||"white"},children:w.username.charAt(0).toUpperCase()})]}),o.jsxs("div",{className:"flex-1 min-w-0",children:[o.jsxs("div",{className:"flex items-center gap-2 text-xs mb-1",children:[o.jsx("span",{className:"font-medium truncate",style:{color:P.text},children:w.username}),o.jsx("span",{style:{color:P.textSecondary},children:A(w.timestamp)})]}),o.jsx("p",{className:"text-sm rounded px-3 py-2",style:{backgroundColor:P.primary+"10",color:P.text,border:`1px solid ${P.primary}20`},children:w.message})]})]},w.id)})})}),o.jsx("div",{className:"p-4 border-t",style:{borderColor:P.primary+"20"},children:o.jsxs("form",{onSubmit:w=>{w.preventDefault(),U()},className:"flex gap-2",children:[o.jsx($e,{value:x,onChange:w=>S(w.target.value),placeholder:"Type your message...",className:"flex-1 text-sm",style:{backgroundColor:P.surface,borderColor:P.primary+"30",color:P.text},maxLength:200,disabled:E}),o.jsx(Z,{type:"submit",size:"sm",className:"px-3 focus:outline-none focus:ring-0",style:{backgroundColor:P.primary,color:P.primaryText||"white"},disabled:!x.trim()||E,children:o.jsx(qi,{className:"h-4 w-4"})})]})})]})]})})]}):null:o.jsx("div",{className:"fixed bottom-4 right-4 z-40",children:o.jsx(se,{className:"w-80 shadow-lg backdrop-blur-sm border-0 live-chat-card",style:{background:`linear-gradient(135deg, ${P.primary}15, ${P.primary}05)`,border:`1px solid ${P.primary}30`},children:o.jsx(oe,{className:"p-4",children:o.jsxs("div",{className:"text-center space-y-3",children:[o.jsx(dr,{className:"w-8 h-8 mx-auto",style:{color:P.primary}}),o.jsx("h3",{className:"font-bold text-lg",style:{color:P.primary},children:"Premium Feature"}),o.jsx("p",{className:"text-sm text-foreground",children:"Live chat is available exclusively to premium subscribers."}),o.jsxs("div",{className:"space-y-2",children:[o.jsx("p",{className:"text-xs text-muted-foreground",children:"✓ Live Chat Access ✓ Song Submissions ✓ Exclusive Content"}),o.jsxs("div",{className:"flex gap-2",children:[o.jsx(Z,{size:"sm",className:"flex-1 border-0",style:{backgroundColor:P.primary,color:P.primaryText||"white",border:`1px solid ${P.primary}30`},onClick:()=>window.location.href="/subscribe",children:"Upgrade Now"}),o.jsx(Z,{size:"sm",variant:"outline",onClick:e,className:"flex-1",style:{borderColor:P.primary+"40",color:P.primary,backgroundColor:"transparent"},children:"Close"})]})]})]})})})})}const $D=async()=>{try{const r=new Date;r.setDate(r.getDate()-7);const e=Ol(Ml(ur,"chat_messages"),Ll("timestamp","<",r)),t=await Vl(e),n=Bb(ur);let s=0;return t.forEach(i=>{n.delete(i.ref),s++}),s>0&&await n.commit(),s}catch(r){throw console.error("Error cleaning up old messages:",r),r}},BD=async()=>{try{const r=new Date;r.setDate(r.getDate()-1);const e=Ol(Ml(ur,"chat_users"),Ll("lastSeen","<",r)),t=await Vl(e),n=Bb(ur);let s=0;return t.forEach(i=>{n.delete(i.ref),s++}),s>0&&await n.commit(),s}catch(r){throw console.error("Error cleaning up old user status:",r),r}},zD=async()=>{try{console.log("Starting scheduled chat cleanup...");const r=await $D(),e=await BD();return console.log(`Chat cleanup completed: ${r} messages and ${e} user records deleted`),{messagesDeleted:r,usersDeleted:e}}catch(r){throw console.error("Error during scheduled cleanup:",r),r}},qD=()=>{const e=()=>{zD().catch(console.error)};setTimeout(e,3600*1e3),setInterval(e,864e5),console.log("Chat cleanup schedule initialized")};function HD({showMetrics:r=!1,logToConsole:e=!0}){const[t,n]=p.useState({fcp:null,lcp:null,fid:null,cls:null,ttfb:null,domLoad:null,windowLoad:null}),s=p.useCallback(i=>{n(a=>({...a,...i}))},[]);return p.useEffect(()=>{if(!("PerformanceObserver"in window))return;const i=new PerformanceObserver(h=>{const m=h.getEntries(),g=m[m.length-1];if(g){const x=Math.round(g.startTime);s({fcp:x}),e&&console.log("FCP:",x+"ms")}});i.observe({entryTypes:["paint"]});const a=new PerformanceObserver(h=>{const m=h.getEntries(),g=m[m.length-1];if(g){const x=Math.round(g.startTime);s({lcp:x}),e&&console.log("LCP:",x+"ms")}});a.observe({entryTypes:["largest-contentful-paint"]});const l=new PerformanceObserver(h=>{h.getEntries().forEach(g=>{const x=g,S=Math.round(x.processingStart-x.startTime);s({fid:S}),e&&console.log("FID:",S+"ms")})});l.observe({entryTypes:["first-input"]});const u=new PerformanceObserver(h=>{let m=0;h.getEntries().forEach(x=>{x.hadRecentInput||(m+=x.value)});const g=Math.round(m*1e3)/1e3;s({cls:g}),e&&console.log("CLS:",g)});u.observe({entryTypes:["layout-shift"]});const d=performance.getEntriesByType("navigation")[0];if(d){const h=Math.round(d.responseStart-d.requestStart),m=Math.round(d.domContentLoadedEventEnd-d.domContentLoadedEventStart),g=Math.round(d.loadEventEnd-d.loadEventStart);s({ttfb:h,domLoad:m,windowLoad:g}),e&&(console.log("TTFB:",h+"ms"),console.log("DOM Load:",m+"ms"),console.log("Window Load:",g+"ms"))}if("memory"in performance){const h=performance.memory,m=()=>{const x=Math.round(h.usedJSHeapSize/1024/1024),S=Math.round(h.totalJSHeapSize/1024/1024),b=Math.round(h.jsHeapSizeLimit/1024/1024);e&&console.log(`Memory: ${x}MB / ${S}MB (${b}MB limit)`),x>b*.8&&console.warn("High memory usage detected!")},g=setInterval(m,3e4);return m(),()=>{clearInterval(g),i.disconnect(),a.disconnect(),l.disconnect(),u.disconnect()}}return()=>{i.disconnect(),a.disconnect(),l.disconnect(),u.disconnect()}},[s,e]),p.useEffect(()=>{const i=()=>{const a=[];t.fcp&&t.fcp>1800&&a.push("First Contentful Paint is slow. Consider optimizing critical rendering path."),t.lcp&&t.lcp>2500&&a.push("Largest Contentful Paint is slow. Optimize images and reduce render-blocking resources."),t.fid&&t.fid>100&&a.push("First Input Delay is high. Reduce JavaScript execution time."),t.cls&&t.cls>.1&&a.push("Cumulative Layout Shift is high. Avoid layout shifts during page load."),a.length>0&&e&&(console.group("Performance Optimization Suggestions:"),a.forEach(l=>console.log("•",l)),console.groupEnd())};Object.values(t).some(a=>a!==null)&&i()},[t,e]),r?o.jsxs("div",{className:"fixed bottom-4 right-4 bg-black/80 text-white p-4 rounded-lg text-xs font-mono z-50",children:[o.jsx("div",{className:"mb-2 font-bold",children:"Performance Metrics"}),o.jsxs("div",{children:["FCP: ",t.fcp?`${t.fcp}ms`:"..."]}),o.jsxs("div",{children:["LCP: ",t.lcp?`${t.lcp}ms`:"..."]}),o.jsxs("div",{children:["FID: ",t.fid?`${t.fid}ms`:"..."]}),o.jsxs("div",{children:["CLS: ",t.cls?t.cls:"..."]}),o.jsxs("div",{children:["TTFB: ",t.ttfb?`${t.ttfb}ms`:"..."]})]}):null}const X_=sE,J_=oE,WD=p.forwardRef(({className:r,inset:e,children:t,...n},s)=>o.jsxs(tx,{ref:s,className:te("flex cursor-default select-none items-center gap-2 rounded-sm px-2 py-1.5 text-sm   data-[state=open]:bg-accent [&_svg]:pointer-events-none [&_svg]:size-4 [&_svg]:shrink-0",e&&"pl-8",r),...n,children:[t,o.jsx(Jw,{className:"ml-auto"})]}));WD.displayName=tx.displayName;const GD=p.forwardRef(({className:r,...e},t)=>o.jsx(rx,{ref:t,className:te("z-50 min-w-[8rem] overflow-hidden rounded-md bg-popover p-1 text-popover-foreground shadow-lg data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2 origin-[--radix-dropdown-menu-content-transform-origin]",r),...e}));GD.displayName=rx.displayName;const qf=p.forwardRef(({className:r,sideOffset:e=4,...t},n)=>o.jsx(nE,{children:o.jsx(nx,{ref:n,sideOffset:e,className:te("z-50 max-h-[var(--radix-dropdown-menu-content-available-height)] min-w-[8rem] overflow-y-auto overflow-x-hidden rounded-md bg-popover p-1 text-popover-foreground shadow-md data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2 origin-[--radix-dropdown-menu-content-transform-origin]",r),...t})}));qf.displayName=nx.displayName;const co=p.forwardRef(({className:r,inset:e,...t},n)=>o.jsx(sx,{ref:n,className:te("relative flex cursor-default select-none items-center gap-2 rounded-sm px-2 py-1.5 text-sm  transition-colors  focus:text-accent-foreground data-[disabled]:pointer-events-none data-[disabled]:opacity-50 [&_svg]:pointer-events-none [&_svg]:size-4 [&_svg]:shrink-0",e&&"pl-8",r),...t}));co.displayName=sx.displayName;const KD=p.forwardRef(({className:r,children:e,checked:t,...n},s)=>o.jsxs(ox,{ref:s,className:te("relative flex cursor-default select-none items-center rounded-sm py-1.5 pl-8 pr-2 text-sm  transition-colors  focus:text-accent-foreground data-[disabled]:pointer-events-none data-[disabled]:opacity-50",r),checked:t,...n,children:[o.jsx("span",{className:"absolute left-2 flex h-3.5 w-3.5 items-center justify-center",children:o.jsx(ix,{children:o.jsx(pa,{className:"h-4 w-4"})})}),e]}));KD.displayName=ox.displayName;const QD=p.forwardRef(({className:r,children:e,...t},n)=>o.jsxs(ax,{ref:n,className:te("relative flex cursor-default select-none items-center rounded-sm py-1.5 pl-8 pr-2 text-sm  transition-colors  focus:text-accent-foreground data-[disabled]:pointer-events-none data-[disabled]:opacity-50",r),...t,children:[o.jsx("span",{className:"absolute left-2 flex h-3.5 w-3.5 items-center justify-center",children:o.jsx(ix,{children:o.jsx(MM,{className:"h-2 w-2 fill-current"})})}),e]}));QD.displayName=ax.displayName;const YD=p.forwardRef(({className:r,inset:e,...t},n)=>o.jsx(lx,{ref:n,className:te("px-2 py-1.5 text-sm font-semibold",e&&"pl-8",r),...t}));YD.displayName=lx.displayName;const th=p.forwardRef(({className:r,...e},t)=>o.jsx(cx,{ref:t,className:te("-mx-1 my-1 h-px bg-muted",r),...e}));th.displayName=cx.displayName;var Z_="AlertDialog",[XD,t6]=$n(Z_,[ux]),Gr=ux(),e1=r=>{const{__scopeAlertDialog:e,...t}=r,n=Gr(e);return o.jsx(hx,{...n,...t,modal:!0})};e1.displayName=Z_;var JD="AlertDialogTrigger",ZD=p.forwardRef((r,e)=>{const{__scopeAlertDialog:t,...n}=r,s=Gr(t);return o.jsx(aE,{...s,...n,ref:e})});ZD.displayName=JD;var eO="AlertDialogPortal",t1=r=>{const{__scopeAlertDialog:e,...t}=r,n=Gr(e);return o.jsx(dx,{...n,...t})};t1.displayName=eO;var tO="AlertDialogOverlay",r1=p.forwardRef((r,e)=>{const{__scopeAlertDialog:t,...n}=r,s=Gr(t);return o.jsx(ih,{...s,...n,ref:e})});r1.displayName=tO;var uo="AlertDialogContent",[rO,nO]=XD(uo),sO=Ky("AlertDialogContent"),n1=p.forwardRef((r,e)=>{const{__scopeAlertDialog:t,children:n,...s}=r,i=Gr(t),a=p.useRef(null),l=at(e,a),u=p.useRef(null);return o.jsx(iE,{contentName:uo,titleName:s1,docsSlug:"alert-dialog",children:o.jsx(rO,{scope:t,cancelRef:u,children:o.jsxs(ah,{role:"alertdialog",...i,...s,ref:l,onOpenAutoFocus:_e(s.onOpenAutoFocus,d=>{var h;d.preventDefault(),(h=u.current)==null||h.focus({preventScroll:!0})}),onPointerDownOutside:d=>d.preventDefault(),onInteractOutside:d=>d.preventDefault(),children:[o.jsx(sO,{children:n}),o.jsx(iO,{contentRef:a})]})})})});n1.displayName=uo;var s1="AlertDialogTitle",o1=p.forwardRef((r,e)=>{const{__scopeAlertDialog:t,...n}=r,s=Gr(t);return o.jsx(lh,{...s,...n,ref:e})});o1.displayName=s1;var i1="AlertDialogDescription",a1=p.forwardRef((r,e)=>{const{__scopeAlertDialog:t,...n}=r,s=Gr(t);return o.jsx(ch,{...s,...n,ref:e})});a1.displayName=i1;var oO="AlertDialogAction",l1=p.forwardRef((r,e)=>{const{__scopeAlertDialog:t,...n}=r,s=Gr(t);return o.jsx(uh,{...s,...n,ref:e})});l1.displayName=oO;var c1="AlertDialogCancel",u1=p.forwardRef((r,e)=>{const{__scopeAlertDialog:t,...n}=r,{cancelRef:s}=nO(c1,t),i=Gr(t),a=at(e,s);return o.jsx(uh,{...i,...n,ref:a})});u1.displayName=c1;var iO=({contentRef:r})=>{const e=`\`${uo}\` requires a description for the component to be accessible for screen reader users.

You can add a description to the \`${uo}\` by passing a \`${i1}\` component as a child, which also benefits sighted users by adding visible context to the dialog.

Alternatively, you can use your own component as a description by assigning it an \`id\` and passing the same value to the \`aria-describedby\` prop in \`${uo}\`. If the description is confusing or duplicative for sighted users, you can use the \`@radix-ui/react-visually-hidden\` primitive as a wrapper around your description component.

For more information, see https://radix-ui.com/primitives/docs/components/alert-dialog`;return p.useEffect(()=>{var n;document.getElementById((n=r.current)==null?void 0:n.getAttribute("aria-describedby"))||console.warn(e)},[e,r]),null},aO=e1,lO=t1,d1=r1,h1=n1,f1=l1,m1=u1,p1=o1,g1=a1;const rh=aO,cO=lO,y1=p.forwardRef(({className:r,...e},t)=>o.jsx(d1,{className:te("fixed inset-0 z-50 bg-black/80 data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0",r),...e,ref:t}));y1.displayName=d1.displayName;const Gl=p.forwardRef(({className:r,...e},t)=>o.jsxs(cO,{children:[o.jsx(y1,{}),o.jsx(h1,{ref:t,className:te("fixed left-[50%] top-[50%] z-[9999] grid w-full max-w-lg translate-x-[-50%] translate-y-[-50%] gap-4 border bg-background p-6 shadow-lg duration-200 data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[state=closed]:slide-out-to-left-1/2 data-[state=closed]:slide-out-to-top-[48%] data-[state=open]:slide-in-from-left-1/2 data-[state=open]:slide-in-from-top-[48%] sm:rounded-lg",r),...e})]}));Gl.displayName=h1.displayName;const Kl=({className:r,...e})=>o.jsx("div",{className:te("flex flex-col space-y-2 text-center sm:text-left",r),...e});Kl.displayName="AlertDialogHeader";const Ql=({className:r,...e})=>o.jsx("div",{className:te("flex flex-col-reverse sm:flex-row sm:justify-end sm:space-x-2",r),...e});Ql.displayName="AlertDialogFooter";const Yl=p.forwardRef(({className:r,...e},t)=>o.jsx(p1,{ref:t,className:te("text-lg font-semibold",r),...e}));Yl.displayName=p1.displayName;const Xl=p.forwardRef(({className:r,...e},t)=>o.jsx(g1,{ref:t,className:te("text-sm text-muted-foreground",r),...e}));Xl.displayName=g1.displayName;const Jl=p.forwardRef(({className:r,...e},t)=>o.jsx(f1,{ref:t,className:te(Ff(),r),...e}));Jl.displayName=f1.displayName;const Zl=p.forwardRef(({className:r,...e},t)=>o.jsx(m1,{ref:t,className:te(Ff({variant:"outline"}),"mt-2 sm:mt-0",r),...e}));Zl.displayName=m1.displayName;var Bc="Popover",[x1,r6]=$n(Bc,[tc]),ga=tc(),[uO,Gn]=x1(Bc),b1=r=>{const{__scopePopover:e,children:t,open:n,defaultOpen:s,onOpenChange:i,modal:a=!1}=r,l=ga(e),u=p.useRef(null),[d,h]=p.useState(!1),[m,g]=Do({prop:n,defaultProp:s??!1,onChange:i,caller:Bc});return o.jsx(Qy,{...l,children:o.jsx(uO,{scope:e,contentId:sh(),triggerRef:u,open:m,onOpenChange:g,onOpenToggle:p.useCallback(()=>g(x=>!x),[g]),hasCustomAnchor:d,onCustomAnchorAdd:p.useCallback(()=>h(!0),[]),onCustomAnchorRemove:p.useCallback(()=>h(!1),[]),modal:a,children:t})})};b1.displayName=Bc;var v1="PopoverAnchor",dO=p.forwardRef((r,e)=>{const{__scopePopover:t,...n}=r,s=Gn(v1,t),i=ga(t),{onCustomAnchorAdd:a,onCustomAnchorRemove:l}=s;return p.useEffect(()=>(a(),()=>l()),[a,l]),o.jsx(oh,{...i,...n,ref:e})});dO.displayName=v1;var w1="PopoverTrigger",_1=p.forwardRef((r,e)=>{const{__scopePopover:t,...n}=r,s=Gn(w1,t),i=ga(t),a=at(e,s.triggerRef),l=o.jsx(De.button,{type:"button","aria-haspopup":"dialog","aria-expanded":s.open,"aria-controls":s.contentId,"data-state":k1(s.open),...n,ref:a,onClick:_e(r.onClick,s.onOpenToggle)});return s.hasCustomAnchor?l:o.jsx(oh,{asChild:!0,...i,children:l})});_1.displayName=w1;var Hf="PopoverPortal",[hO,fO]=x1(Hf,{forceMount:void 0}),T1=r=>{const{__scopePopover:e,forceMount:t,children:n,container:s}=r,i=Gn(Hf,e);return o.jsx(hO,{scope:e,forceMount:t,children:o.jsx(kr,{present:t||i.open,children:o.jsx(qy,{asChild:!0,container:s,children:n})})})};T1.displayName=Hf;var Mo="PopoverContent",E1=p.forwardRef((r,e)=>{const t=fO(Mo,r.__scopePopover),{forceMount:n=t.forceMount,...s}=r,i=Gn(Mo,r.__scopePopover);return o.jsx(kr,{present:n||i.open,children:i.modal?o.jsx(pO,{...s,ref:e}):o.jsx(gO,{...s,ref:e})})});E1.displayName=Mo;var mO=uE("PopoverContent.RemoveScroll"),pO=p.forwardRef((r,e)=>{const t=Gn(Mo,r.__scopePopover),n=p.useRef(null),s=at(e,n),i=p.useRef(!1);return p.useEffect(()=>{const a=n.current;if(a)return lE(a)},[]),o.jsx(cE,{as:mO,allowPinchZoom:!0,children:o.jsx(N1,{...r,ref:s,trapFocus:t.open,disableOutsidePointerEvents:!0,onCloseAutoFocus:_e(r.onCloseAutoFocus,a=>{var l;a.preventDefault(),i.current||(l=t.triggerRef.current)==null||l.focus()}),onPointerDownOutside:_e(r.onPointerDownOutside,a=>{const l=a.detail.originalEvent,u=l.button===0&&l.ctrlKey===!0,d=l.button===2||u;i.current=d},{checkForDefaultPrevented:!1}),onFocusOutside:_e(r.onFocusOutside,a=>a.preventDefault(),{checkForDefaultPrevented:!1})})})}),gO=p.forwardRef((r,e)=>{const t=Gn(Mo,r.__scopePopover),n=p.useRef(!1),s=p.useRef(!1);return o.jsx(N1,{...r,ref:e,trapFocus:!1,disableOutsidePointerEvents:!1,onCloseAutoFocus:i=>{var a,l;(a=r.onCloseAutoFocus)==null||a.call(r,i),i.defaultPrevented||(n.current||(l=t.triggerRef.current)==null||l.focus(),i.preventDefault()),n.current=!1,s.current=!1},onInteractOutside:i=>{var u,d;(u=r.onInteractOutside)==null||u.call(r,i),i.defaultPrevented||(n.current=!0,i.detail.originalEvent.type==="pointerdown"&&(s.current=!0));const a=i.target;((d=t.triggerRef.current)==null?void 0:d.contains(a))&&i.preventDefault(),i.detail.originalEvent.type==="focusin"&&s.current&&i.preventDefault()}})}),N1=p.forwardRef((r,e)=>{const{__scopePopover:t,trapFocus:n,onOpenAutoFocus:s,onCloseAutoFocus:i,disableOutsidePointerEvents:a,onEscapeKeyDown:l,onPointerDownOutside:u,onFocusOutside:d,onInteractOutside:h,...m}=r,g=Gn(Mo,t),x=ga(t);return dE(),o.jsx(hE,{asChild:!0,loop:!0,trapped:n,onMountAutoFocus:s,onUnmountAutoFocus:i,children:o.jsx(Wy,{asChild:!0,disableOutsidePointerEvents:a,onInteractOutside:h,onEscapeKeyDown:l,onPointerDownOutside:u,onFocusOutside:d,onDismiss:()=>g.onOpenChange(!1),children:o.jsx(Gy,{"data-state":k1(g.open),role:"dialog",id:g.contentId,...x,...m,ref:e,style:{...m.style,"--radix-popover-content-transform-origin":"var(--radix-popper-transform-origin)","--radix-popover-content-available-width":"var(--radix-popper-available-width)","--radix-popover-content-available-height":"var(--radix-popper-available-height)","--radix-popover-trigger-width":"var(--radix-popper-anchor-width)","--radix-popover-trigger-height":"var(--radix-popper-anchor-height)"}})})})}),C1="PopoverClose",yO=p.forwardRef((r,e)=>{const{__scopePopover:t,...n}=r,s=Gn(C1,t);return o.jsx(De.button,{type:"button",...n,ref:e,onClick:_e(r.onClick,()=>s.onOpenChange(!1))})});yO.displayName=C1;var xO="PopoverArrow",bO=p.forwardRef((r,e)=>{const{__scopePopover:t,...n}=r,s=ga(t);return o.jsx(Yy,{...s,...n,ref:e})});bO.displayName=xO;function k1(r){return r?"open":"closed"}var vO=b1,wO=_1,_O=T1,S1=E1;const TO=vO,EO=wO,j1=p.forwardRef(({className:r,align:e="center",sideOffset:t=4,...n},s)=>o.jsx(_O,{children:o.jsx(S1,{ref:s,align:e,sideOffset:t,className:te("z-50 w-72 rounded-md border bg-popover p-4 text-popover-foreground shadow-md  data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2 origin-[--radix-popover-content-transform-origin]",r),...n})}));j1.displayName=S1.displayName;const Wf=hx,NO=dx,I1=p.forwardRef(({className:r,...e},t)=>o.jsx(ih,{ref:t,className:te("fixed inset-0 z-50 bg-black/80 data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 backdrop-blur-sm",r),...e}));I1.displayName=ih.displayName;const zc=p.forwardRef(({className:r,children:e,...t},n)=>o.jsxs(NO,{children:[o.jsx(I1,{}),o.jsxs(ah,{ref:n,className:te("fixed left-[50%] top-[50%] z-[9999] grid w-full max-w-lg translate-x-[-50%] translate-y-[-50%] gap-4 border bg-background p-6 shadow-lg duration-200 data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[state=closed]:slide-out-to-left-1/2 data-[state=closed]:slide-out-to-top-[48%] data-[state=open]:slide-in-from-left-1/2 data-[state=open]:slide-in-from-top-[48%] sm:rounded-lg",r),style:{maxHeight:"90vh",overflowY:"auto",margin:"20px"},"aria-describedby":"dialog-description",...t,children:[e,o.jsxs(uh,{className:"absolute right-4 top-4 rounded-sm opacity-70 transition-opacity hover:opacity-100 disabled:pointer-events-none data-[state=open]:bg-accent data-[state=open]:text-muted-foreground",children:[o.jsx(Un,{className:"h-4 w-4"}),o.jsx("span",{className:"sr-only",children:"Close"})]})]})]}));zc.displayName=ah.displayName;const qc=({className:r,...e})=>o.jsx("div",{className:te("flex flex-col space-y-1.5 text-center sm:text-left",r),...e});qc.displayName="DialogHeader";const Hc=p.forwardRef(({className:r,...e},t)=>o.jsx(lh,{ref:t,className:te("text-lg font-semibold leading-none tracking-tight",r),...e}));Hc.displayName=lh.displayName;const A1=p.forwardRef(({className:r,...e},t)=>o.jsx(ch,{ref:t,className:te("text-sm text-muted-foreground",r),...e}));A1.displayName=ch.displayName;const CO={"classic-metal":o.jsx(FM,{className:"w-4 h-4"}),"black-metal":o.jsx(yy,{className:"w-4 h-4"}),"death-metal":o.jsx(yy,{className:"w-4 h-4"}),"power-metal":o.jsx(dr,{className:"w-4 h-4"}),"doom-metal":o.jsx(t5,{className:"w-4 h-4"}),"thrash-metal":o.jsx(a_,{className:"w-4 h-4"}),"gothic-metal":o.jsx(Qs,{className:"w-4 h-4"}),"light-mode":o.jsx(ZM,{className:"w-4 h-4"}),"dark-mode":o.jsx(qM,{className:"w-4 h-4"}),"glassmorphism-premium":o.jsx(s_,{className:"w-4 h-4"})};function Ty(){const{currentTheme:r,setTheme:e,getColors:t}=ue(),{user:n}=Ht(),[s,i]=p.useState(!1),[a,l]=p.useState(!1),u=t(),d=(g,x)=>{if(x.isPremium){l(!0);return}e(g),i(!1)},h=()=>{l(!1),i(!1);const g=document.getElementById("subscription-section");g&&g.scrollIntoView({behavior:"smooth",block:"center"})},m=Object.entries(Xs).sort(([g,x],[S,b])=>g===r?-1:S===r?1:x.isPremium&&!b.isPremium?-1:!x.isPremium&&b.isPremium?1:0);return o.jsx("div",{className:"flex items-center gap-2",children:o.jsxs(TO,{open:s,onOpenChange:i,children:[o.jsx(EO,{asChild:!0,children:o.jsxs(Z,{variant:"ghost",size:"sm",className:"flex items-center gap-2 hover:bg-opacity-20 theme-button-border focus:outline-none focus:ring-0",style:{color:r==="light-mode"?"#000000":u.text,backgroundColor:"transparent"},children:[o.jsx(py,{className:"w-4 h-4",style:{color:u.primary}}),o.jsx("span",{className:"hidden sm:inline text-sm font-medium",style:{color:r==="light-mode"?"#3B82F6":u.text},children:Xs[r].name})]})}),o.jsx(j1,{className:"w-80 p-0 border-0 max-h-[80vh] overflow-hidden",style:{backgroundColor:u.surface,border:`1px solid ${u.border}`},children:o.jsxs(se,{className:"border-0 shadow-xl",style:{backgroundColor:u.surface},children:[o.jsxs(Ye,{className:"pb-3",children:[o.jsxs(Je,{className:"text-lg font-black flex items-center gap-2",style:{color:u.text},children:[o.jsx(py,{className:"w-5 h-5",style:{color:u.primary}}),"Theme Selector"]}),o.jsx("p",{className:"text-sm",style:{color:u.textSecondary},children:"Choose your visual theme"})]}),o.jsx(oe,{className:"space-y-2 max-h-[60vh] overflow-y-auto pt-4",children:m.map(([g,x])=>{const S=r===g,b=g==="light-mode",v=x.colors[b?"light":"dark"],E=x.isPremium,T=E&&!0;return o.jsx(Z,{onClick:()=>d(g,x),variant:"ghost",className:`w-full justify-start p-3 h-auto transition-all duration-200 focus:outline-none focus:ring-0 ${S?"ring-2":""} ${T?"opacity-75":""}`,style:{backgroundColor:S?u.primary:"transparent",borderColor:S?u.primary:"transparent",color:S?"white":u.text},onMouseEnter:N=>{if(!S&&!T){const P=g==="glassmorphism-premium"?"30":"15";N.currentTarget.style.backgroundColor=`${v.primary}${P}`,N.currentTarget.style.color=v.text}},onMouseLeave:N=>{S||(N.currentTarget.style.backgroundColor="transparent",N.currentTarget.style.color=u.text)},children:o.jsxs("div",{className:"flex items-start gap-3 w-full",children:[o.jsx("div",{className:"w-8 h-8 rounded-full flex items-center justify-center flex-shrink-0",style:{background:g==="dark-mode"?"linear-gradient(135deg, #0a0a0a 0%, #1a1a1a 100%)":g==="glassmorphism-premium"?"linear-gradient(135deg, #8b0080 0%, #ff0080 25%, #ff6600 50%, #cc9900 75%, #ff0080 100%)":x.gradient,color:"#ffffff"},children:CO[g]}),o.jsxs("div",{className:"flex-1 text-left min-w-0",children:[o.jsx("div",{className:"flex items-center gap-2 justify-between",children:o.jsxs("div",{className:"flex items-center gap-2 flex-1",children:[o.jsx("span",{className:"font-semibold text-sm",style:{color:S?"white":v.primary},children:x.name}),E&&!S&&o.jsx(Ho,{className:"w-4 h-4 flex-shrink-0",style:{color:"#ffd700",fill:"#ffd700",filter:T?"grayscale(100%) opacity(0.5)":"drop-shadow(0 0 1px rgba(255, 215, 0, 0.3))"}}),S&&o.jsx(Ke,{variant:"secondary",className:"text-xs px-2 py-0",style:{backgroundColor:"white",color:u.primary},children:"Active"})]})}),o.jsx("p",{className:"text-xs mt-1 break-words leading-relaxed whitespace-pre-wrap overflow-hidden",style:{color:S?"rgba(255, 255, 255, 0.8)":`${v.primary}80`,wordBreak:"break-word",overflowWrap:"break-word"},children:x.description}),o.jsx("div",{className:"flex gap-1 mt-2",children:g==="glassmorphism-premium"?o.jsxs("div",{className:"flex gap-1",children:[o.jsx("div",{className:"w-3 h-3 rounded-full border",style:{backgroundColor:"#8b0080",borderColor:u.border}}),o.jsx("div",{className:"w-3 h-3 rounded-full border",style:{backgroundColor:"#ff0080",borderColor:u.border}}),o.jsx("div",{className:"w-3 h-3 rounded-full border",style:{backgroundColor:"#ff6600",borderColor:u.border}}),o.jsx("div",{className:"w-3 h-3 rounded-full border",style:{backgroundColor:"#cc9900",borderColor:u.border}})]}):o.jsxs(o.Fragment,{children:[o.jsx("div",{className:"w-3 h-3 rounded-full border",style:{backgroundColor:v.primary,borderColor:u.border}}),o.jsx("div",{className:"w-3 h-3 rounded-full border",style:{backgroundColor:v.secondary,borderColor:u.border}}),o.jsx("div",{className:"w-3 h-3 rounded-full border",style:{backgroundColor:v.accent,borderColor:u.border}})]})})]})]})},g)})}),o.jsx(Wf,{open:a,onOpenChange:l,children:o.jsx(zc,{className:"sm:max-w-md border-0",style:{background:"linear-gradient(135deg, #8b0080 0%, #ff0080 25%, #ff6600 50%, #cc9900 75%, #ff0080 100%)",backgroundSize:"400% 400%",animation:"glassmorphGradient 8s ease infinite",backdropFilter:"blur(20px)",border:"1px solid rgba(255, 255, 255, 0.18)"},children:o.jsxs("div",{className:"rounded-lg p-4 max-w-md mx-auto",style:{backgroundColor:"rgba(255, 255, 255, 0.08)",backdropFilter:"blur(20px)",border:"1px solid rgba(255, 255, 255, 0.18)"},children:[o.jsxs(qc,{className:"text-center space-y-3",children:[o.jsx("div",{className:"flex justify-center",children:o.jsx("div",{className:"w-12 h-12 rounded-full flex items-center justify-center",style:{background:"rgba(255, 255, 255, 0.1)",backdropFilter:"blur(20px)",border:"1px solid rgba(255, 255, 255, 0.2)"},children:o.jsx(s_,{className:"w-6 h-6 text-white"})})}),o.jsx(Hc,{className:"text-xl font-bold text-white leading-tight text-center",children:"Glassmorphism Rock Theme"}),o.jsx(A1,{className:"text-white/90 text-sm leading-relaxed text-center px-2",children:"Experience the ultimate rock vibe with our premium glassmorphism theme featuring vibrant colors and stunning glass effects."})]}),o.jsxs("div",{className:"mt-4 space-y-4",children:[o.jsxs("div",{className:"text-center",children:[o.jsx("p",{className:"text-white/80 text-xs text-center",children:"This premium theme includes:"}),o.jsxs("ul",{className:"text-white text-xs mt-2 space-y-1 leading-relaxed text-center list-none",children:[o.jsx("li",{children:"• Vibrant gradient backgrounds"}),o.jsx("li",{children:"• Glass morphism effects"}),o.jsx("li",{children:"• Rock-inspired color palette"}),o.jsx("li",{children:"• Enhanced visual experience"})]})]}),o.jsxs("div",{className:"flex gap-2 mt-4",children:[o.jsx(Z,{onClick:()=>l(!1),variant:"ghost",className:"flex-1 text-white border border-primary/30 hover:bg-white/20 font-semibold px-4 py-2 text-sm focus:outline-none focus:ring-0",style:{backgroundColor:"rgba(255, 255, 255, 0.1)",backdropFilter:"blur(10px)",border:"1px solid rgba(59, 130, 246, 0.3)",borderRadius:"6px"},children:"Cancel"}),o.jsx(Z,{onClick:h,className:"flex-1 font-bold px-4 py-2 text-sm text-white focus:outline-none focus:ring-0",style:{background:"rgba(255, 255, 255, 0.15)",backdropFilter:"blur(15px)",border:"1px solid rgba(59, 130, 246, 0.3)",borderRadius:"6px",boxShadow:"0 4px 20px rgba(59, 130, 246, 0.1)"},children:"Get Premium"})]}),o.jsx("div",{className:"mt-3 pt-3 border-t border-primary/20",children:o.jsx(Z,{onClick:()=>{e("glassmorphism-premium"),l(!1),i(!1)},className:"w-full font-semibold px-4 py-2 text-xs focus:outline-none focus:ring-0",style:{background:`${u.accent}20`,backdropFilter:"blur(15px)",border:`1px solid ${u.accent}40`,borderRadius:"6px",boxShadow:`0 4px 20px ${u.accent}20`,color:u.accent},children:"Preview Theme (Development Only)"})})]})]})})})]})})]})})}var kO="Label",R1=p.forwardRef((r,e)=>o.jsx(De.label,{...r,ref:e,onMouseDown:t=>{var s;t.target.closest("button, input, select, textarea")||((s=r.onMouseDown)==null||s.call(r,t),!t.defaultPrevented&&t.detail>1&&t.preventDefault())}}));R1.displayName=kO;var P1=R1;const SO=Mc("text-sm font-medium leading-none peer-disabled:cursor-not-allowed peer-disabled:opacity-70"),Re=p.forwardRef(({className:r,...e},t)=>o.jsx(P1,{ref:t,className:te(SO(),r),...e}));Re.displayName=P1.displayName;const jO="/GoogleLogoIcon.png";function IO({isOpen:r,onClose:e,initialMode:t="login"}){const[n,s]=p.useState(t);p.useEffect(()=>{s(t)},[t]);const[i,a]=p.useState(""),[l,u]=p.useState(""),[d,h]=p.useState(""),[m,g]=p.useState(""),[x,S]=p.useState(""),[b,v]=p.useState(""),[E,T]=p.useState(!1),[N,P]=p.useState(""),{isAuthenticated:F,signInWithGoogle:U,register:A,signIn:w}=Ht(),{getColors:C}=ue(),{toast:j}=Sr(),_=C(),M=async()=>{try{T(!0),await U(),e()}catch(R){j({title:"Sign In Failed",description:R.message||"Failed to sign in with Google.",variant:"destructive"})}finally{T(!1)}},I=R=>{const z=R.replace(/[^\d]/g,""),H=(z==null?void 0:z.length)||0;return H<4?z:H<7?`(${z.slice(0,3)}) ${z.slice(3)}`:`(${z.slice(0,3)}) ${z.slice(3,6)}-${z.slice(6,10)}`},X=R=>{const z=I(R.target.value);v(z)},le=async R=>{R.preventDefault(),T(!0);try{if(n==="login"){const z=await w(i,l);if(!z.success)throw new Error(z.error||"Login failed");j({title:"Welcome back!",description:"You've successfully logged in."}),e(),window.location.reload()}else{const z=await A(i,l,m,x,b.replace(/[^\d]/g,""));if(!z.success)throw new Error(z.error||"Registration failed");j({title:"Account created!",description:"Welcome to Spandex Salvation Radio!"}),e(),window.location.reload()}he()}catch(z){j({title:n==="login"?"Login failed":"Registration failed",description:z.message||"Please try again.",variant:"destructive"})}finally{T(!1)}},he=()=>{a(""),u(""),h(""),g(""),S(""),v("")},ee=()=>{s(n==="login"?"register":"login"),he()};return o.jsx(Wf,{open:r,onOpenChange:e,children:o.jsxs(zc,{className:"w-full max-w-md animate-in fade-in zoom-in duration-300",style:{backgroundColor:_.background||"rgba(0, 0, 0, 0.95)",border:`2px solid ${_.primary}40`,borderRadius:"16px",boxShadow:`0 25px 50px -12px ${_.primary}20`},children:[o.jsx(qc,{children:o.jsx(Hc,{className:"flex items-center gap-2",style:{color:_.text},children:n==="login"?o.jsxs(o.Fragment,{children:[o.jsx(n_,{className:"h-5 w-5",style:{color:_.primary}}),"Sign In"]}):o.jsxs(o.Fragment,{children:[o.jsx(i_,{className:"h-5 w-5",style:{color:_.primary}}),"Create Account"]})})}),o.jsxs("form",{onSubmit:le,className:"space-y-4",children:[n==="register"&&o.jsxs(o.Fragment,{children:[o.jsxs("div",{className:"space-y-2",children:[o.jsx(Re,{htmlFor:"username",style:{color:_.text,fontWeight:"600"},children:"Username"}),o.jsxs("div",{className:"relative",children:[o.jsx(Dt,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 h-4 w-4 text-gray-400"}),o.jsx($e,{id:"username",value:d,onChange:R=>h(R.target.value),className:"pl-10 transition-all duration-200",style:{color:_.text,backgroundColor:_.background||"rgba(0, 0, 0, 0.5)",borderColor:_.primary+"40",borderRadius:"8px"},onFocus:R=>R.currentTarget.style.borderColor=_.primary,onBlur:R=>R.currentTarget.style.borderColor=_.primary+"40",placeholder:"Username",required:!0})]})]}),o.jsxs("div",{className:"grid grid-cols-2 gap-3",children:[o.jsxs("div",{className:"space-y-2",children:[o.jsx(Re,{htmlFor:"firstName",style:{color:_.text,fontWeight:"600"},children:"First Name"}),o.jsxs("div",{className:"relative",children:[o.jsx(Dt,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 h-4 w-4 text-gray-400"}),o.jsx($e,{id:"firstName",value:m,onChange:R=>g(R.target.value),className:"pl-10 transition-all duration-200",style:{color:_.text,backgroundColor:_.background||"rgba(0, 0, 0, 0.5)",borderColor:_.primary+"40",borderRadius:"8px"},onFocus:R=>R.currentTarget.style.borderColor=_.primary,onBlur:R=>R.currentTarget.style.borderColor=_.primary+"40",placeholder:"John",required:!0})]})]}),o.jsxs("div",{className:"space-y-2",children:[o.jsx(Re,{htmlFor:"lastName",style:{color:_.text,fontWeight:"600"},children:"Last Name"}),o.jsxs("div",{className:"relative",children:[o.jsx(Dt,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 h-4 w-4 text-gray-400"}),o.jsx($e,{id:"lastName",value:x,onChange:R=>S(R.target.value),className:"pl-10 transition-all duration-200",style:{color:_.text,backgroundColor:_.background||"rgba(0, 0, 0, 0.5)",borderColor:_.primary+"40",borderRadius:"8px"},onFocus:R=>R.currentTarget.style.borderColor=_.primary,onBlur:R=>R.currentTarget.style.borderColor=_.primary+"40",placeholder:"Doe",required:!0})]})]})]}),o.jsxs("div",{className:"space-y-2",children:[o.jsx(Re,{htmlFor:"phoneNumber",style:{color:_.text,fontWeight:"600"},children:"Phone Number"}),o.jsxs("div",{className:"relative",children:[o.jsx(Xd,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 h-4 w-4 text-gray-400"}),o.jsx($e,{id:"phoneNumber",type:"tel",value:b,onChange:X,className:"pl-10 transition-all duration-200",style:{color:_.text,backgroundColor:_.background||"rgba(0, 0, 0, 0.5)",borderColor:_.primary+"40",borderRadius:"8px"},onFocus:R=>R.currentTarget.style.borderColor=_.primary,onBlur:R=>R.currentTarget.style.borderColor=_.primary+"40",placeholder:"(555) 123-4567",required:!0})]})]})]}),o.jsxs("div",{className:"space-y-2",children:[o.jsx(Re,{htmlFor:"email",style:{color:_.text,fontWeight:"600"},children:"Email"}),o.jsxs("div",{className:"relative",children:[o.jsx(ql,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 h-4 w-4 text-gray-400"}),o.jsx($e,{id:"email",type:"email",value:i,onChange:R=>a(R.target.value),className:"pl-10 transition-all duration-200",style:{color:_.text,backgroundColor:_.background||"rgba(0, 0, 0, 0.5)",borderColor:_.primary+"40",borderRadius:"8px"},onFocus:R=>R.currentTarget.style.borderColor=_.primary,onBlur:R=>R.currentTarget.style.borderColor=_.primary+"40",placeholder:"email@example.com",required:!0})]})]}),o.jsxs("div",{className:"space-y-2",children:[o.jsx(Re,{htmlFor:"password",style:{color:_.text,fontWeight:"600"},children:"Password"}),o.jsxs("div",{className:"relative",children:[o.jsx(Kd,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 h-4 w-4 text-gray-400"}),o.jsx($e,{id:"password",type:"password",value:l,onChange:R=>u(R.target.value),className:"pl-10 transition-all duration-200",style:{color:_.text,backgroundColor:_.background||"rgba(0, 0, 0, 0.5)",borderColor:_.primary+"40",borderRadius:"8px"},onFocus:R=>R.currentTarget.style.borderColor=_.primary,onBlur:R=>R.currentTarget.style.borderColor=_.primary+"40",placeholder:"Password",autoComplete:n==="login"?"current-password":"new-password",required:!0})]})]}),o.jsx(Z,{type:"submit",className:"w-full text-white border-0 rounded-lg transition-all duration-200 hover:scale-105 focus:outline-none focus:ring-0",style:{backgroundColor:_.primary,border:`2px solid ${_.primary}`,boxShadow:`0 4px 20px ${_.primary}40`},onMouseEnter:R=>R.currentTarget.style.backgroundColor=_.secondary,onMouseLeave:R=>R.currentTarget.style.backgroundColor=_.primary,disabled:E,children:E?o.jsxs(o.Fragment,{children:[o.jsx(r_,{className:"mr-2 h-4 w-4 animate-spin"}),n==="login"?"Logging In...":"Creating Account..."]}):n==="login"?"Login":"Create Account"}),o.jsxs("div",{className:"relative",children:[o.jsx("div",{className:"absolute inset-0 flex items-center",children:o.jsx("span",{className:"w-full border-t border-gray-600"})}),o.jsx("div",{className:"relative flex justify-center text-xs uppercase",children:o.jsx("span",{className:"bg-black px-2 text-gray-400",children:"Or continue with"})})]}),o.jsxs(Z,{type:"button",variant:"outline",onClick:M,className:"w-full rounded-lg transition-all duration-200 hover:scale-105 focus:outline-none focus:ring-0",style:{backgroundColor:_.background||"rgba(255, 255, 255, 0.1)",color:_.text,border:`2px solid ${_.primary}40`,backdropFilter:"blur(10px)"},onMouseEnter:R=>{R.currentTarget.style.backgroundColor=_.primary+"20",R.currentTarget.style.borderColor=_.primary},onMouseLeave:R=>{R.currentTarget.style.backgroundColor=_.background||"rgba(255, 255, 255, 0.1)",R.currentTarget.style.borderColor=_.primary+"40"},disabled:E,children:[o.jsx("img",{src:jO,alt:"Google",className:"mr-2 h-4 w-4"}),n==="login"?"Continue with Google":"Sign Up with Google"]}),o.jsx("div",{className:"text-center",children:o.jsx("button",{type:"button",onClick:ee,className:"text-sm transition-colors duration-200 focus:outline-none focus:ring-0",style:{color:_.primary},onMouseEnter:R=>R.currentTarget.style.color=_.secondary,onMouseLeave:R=>R.currentTarget.style.color=_.primary,children:n==="login"?"Don't have an account? Sign up":"Already have an account? Sign in"})})]})]})})}const M1="/MusicLogoIcon.png";function Gf(){var ee;const[r,e]=p.useState(!1),[t,n]=p.useState(!1),[s,i]=p.useState(!1),[a,l]=p.useState("login"),[u,d]=p.useState(!1);p.useEffect(()=>{const R=z=>{var H;l(((H=z.detail)==null?void 0:H.mode)||"login"),i(!0)};return window.addEventListener("openAuthModal",R),()=>window.removeEventListener("openAuthModal",R)},[]);const{colors:h,gradient:m,toggleTheme:g,isDarkMode:x,currentTheme:S}=ue(),{user:b,signOut:v}=Ht(),E=async()=>{try{await v(),window.location.href="/"}catch(R){console.error("Logout error:",R),window.location.href="/"}},T=p.useRef(null),N=p.useRef(null),P=p.useRef(null),F=p.useRef(null),U=p.useRef(null),[A,w]=p.useState(0);p.useEffect(()=>{const R=z=>{r&&T.current&&!T.current.contains(z.target)&&P.current&&!P.current.contains(z.target)&&e(!1),t&&N.current&&!N.current.contains(z.target)&&n(!1)};if(r||t)return document.addEventListener("click",R),()=>document.removeEventListener("click",R)},[r,t]),p.useEffect(()=>{const R=()=>{if(U.current){const H=window.innerWidth,xe=U.current.offsetWidth||400,W=H/2-xe/2;w(W)}};R();const z=setTimeout(R,100);return window.addEventListener("resize",R),()=>{clearTimeout(z),window.removeEventListener("resize",R)}},[]);const[C,j]=zo(),_=(R,z)=>{if(console.log(`Navigation: ${R}, route: ${z}`),e(!1),n(!1),z&&z!==C){j(z),R&&R!==z.replace("/","")&&setTimeout(()=>{const H=document.getElementById(R);H&&H.scrollIntoView({behavior:"smooth",block:"start"})},200);return}if(R){if(C!=="/"){window.location.href=`/#${R}`;return}setTimeout(()=>{const H=document.getElementById(R);H&&H.scrollIntoView({behavior:"smooth",block:"start"})},50)}},M=()=>{C==="/"?window.scrollTo({top:0,behavior:"smooth"}):j("/")},I=()=>{e(!1),n(!1),l("login"),i(!0)},X=()=>{e(!1),n(!1),l("register"),i(!0)},le=()=>{e(!1),n(!1),E()},he=[{id:1,label:"MUSIC",icon:Ao,action:()=>_("music","/music"),tooltip:"Listen to live radio and music"},{id:2,label:"SCHEDULE",icon:os,action:()=>_("schedule","/schedule"),tooltip:"View show schedule and programming"},{id:3,label:"SUPPORT US",icon:Qs,action:()=>_("subscribe","/support"),tooltip:"Support the station with premium subscriptions"},{id:4,label:"SUBMISSIONS",icon:qi,action:()=>_("submissions","/submissions"),tooltip:"Submit song requests and feedback"},{id:5,label:"CONTACT",icon:Xd,action:()=>_("contact","/contact"),tooltip:"Get in touch with the station"},{id:6,label:"LISTEN MAP",icon:Yd,action:()=>_("map","/map"),tooltip:"View live listener map worldwide"},{id:7,label:"FEATURES",icon:Qs,action:()=>_("features","/features"),tooltip:"Explore premium features and subscription tiers"}];return o.jsxs(k_,{children:[o.jsx("nav",{className:"fixed top-0 left-0 right-0 z-50 bg-card/80 backdrop-blur-sm transition-colors duration-300 safe-area-inset-top",children:o.jsxs("div",{className:"w-full relative",children:[o.jsxs("div",{className:"xl:relative flex justify-between items-center h-16",style:{paddingLeft:"15px",paddingRight:"15px"},children:[o.jsxs("div",{className:"flex items-center space-x-4",children:[o.jsx("div",{className:"flex items-center justify-center w-8 h-8 rounded-full cursor-pointer logo-container",style:{background:m,padding:"5px"},onClick:M,onMouseEnter:R=>{const z=R.currentTarget.querySelector("img");z&&!z.classList.contains("logo-spin-easter-egg")&&z.classList.add("logo-spin-easter-egg")},children:o.jsx("img",{src:M1,alt:"Music Logo",className:"w-full h-full object-contain",onAnimationEnd:R=>{R.currentTarget.classList.remove("logo-spin-easter-egg")}})}),o.jsxs("div",{className:"flex flex-col",id:"brand-text",ref:F,children:[o.jsx("div",{className:"text-sm font-black leading-tight transition-colors duration-300",style:{color:h.textMuted},children:"SPANDEX SALVATION"}),o.jsx("div",{className:"text-sm font-black leading-tight",style:{color:h.primary},children:"RADIO"})]})]}),o.jsxs("div",{ref:U,className:"hidden xl:flex items-center space-x-4 absolute",style:{left:`${A}px`,top:"50%",transform:"translateY(-50%)",transition:"left 0.3s ease"},children:[he.slice(0,3).map(R=>{const z=R.icon;return o.jsxs(zu,{children:[o.jsx(qu,{asChild:!0,children:o.jsxs("button",{onClick:R.action,className:"flex items-center space-x-2 text-sm font-semibold transition-all duration-200 px-3 py-2 rounded-md hover:shadow-lg hover:scale-105 active:scale-95 focus:outline-none focus:ring-0",style:{color:h.text,transform:"scale(1)",transition:"all 0.2s ease"},onMouseEnter:H=>{H.currentTarget.style.backgroundColor=h.primary+"20",H.currentTarget.style.color="white",H.currentTarget.style.transform="scale(1.05)"},onMouseLeave:H=>{H.currentTarget.style.backgroundColor="transparent",H.currentTarget.style.color=h.text,H.currentTarget.style.transform="scale(1)"},onMouseDown:H=>{H.currentTarget.style.transform="scale(0.95)"},onMouseUp:H=>{H.currentTarget.style.transform="scale(1.05)"},children:[o.jsx(z,{size:16,style:{color:h.primary}}),o.jsx("span",{children:R.label})]})}),o.jsx(hl,{side:"bottom",children:R.tooltip})]},R.id)}),o.jsxs("div",{className:"relative",ref:N,children:[o.jsxs(zu,{children:[o.jsx(qu,{asChild:!0,children:o.jsxs("button",{onClick:()=>n(!t),className:"flex items-center space-x-1 text-sm font-semibold transition-all duration-200 px-3 py-2 rounded-md hover:shadow-lg hover:scale-105 active:scale-95 focus:outline-none focus:ring-0",style:{color:t?"white":h.text,backgroundColor:t?h.primary:"transparent",transform:"scale(1)",transition:"all 0.2s ease"},onMouseEnter:R=>{t||(R.currentTarget.style.backgroundColor=h.primary+"20",R.currentTarget.style.color="white",R.currentTarget.style.transform="scale(1.05)")},onMouseLeave:R=>{t||(R.currentTarget.style.backgroundColor=t?h.primary:"transparent",R.currentTarget.style.color=t?"white":h.text,R.currentTarget.style.transform="scale(1)")},onMouseDown:R=>{R.currentTarget.style.transform="scale(0.95)"},onMouseUp:R=>{R.currentTarget.style.transform="scale(1.05)"},children:[o.jsx(my,{size:16,style:{color:t?"white":h.primary,marginLeft:"2px"}}),o.jsx("span",{children:"MORE"}),o.jsx(zl,{size:16,className:"transition-transform duration-300 ease-out",style:{color:h.text,transform:t?"rotate(180deg)":"rotate(0deg)"}})]})}),o.jsx(hl,{side:"bottom",children:"View more navigation options"})]}),t&&o.jsx("div",{className:"absolute left-1/2 transform -translate-x-1/2 mt-2 py-2 rounded-xl shadow-xl border animate-in fade-in-0 slide-in-from-top-2 duration-200 backdrop-blur-md",style:{backgroundColor:x?"rgba(0, 0, 0, 0.95)":"rgba(255, 255, 255, 0.95)",borderColor:h.primary+"40",width:"auto",minWidth:"max-content",zIndex:50},children:he.slice(3).map(R=>{const z=R.icon,H=x?h.text:"#000000";return o.jsxs(zu,{children:[o.jsx(qu,{asChild:!0,children:o.jsxs("button",{onClick:R.action,className:"flex items-center space-x-3 px-4 py-3 text-sm font-semibold transition-all duration-200 whitespace-nowrap hover:rounded-lg hover:scale-105 active:scale-95 w-full focus:outline-none focus:ring-0",style:{color:H,transform:"scale(1)",transition:"all 0.2s ease"},onMouseEnter:xe=>{xe.currentTarget.style.backgroundColor=h.primary+"20",xe.currentTarget.style.color="white",xe.currentTarget.style.transform="scale(1.05)"},onMouseLeave:xe=>{xe.currentTarget.style.backgroundColor="transparent",xe.currentTarget.style.color=H,xe.currentTarget.style.transform="scale(1)"},onMouseDown:xe=>{xe.currentTarget.style.transform="scale(0.95)"},onMouseUp:xe=>{xe.currentTarget.style.transform="scale(1.05)"},children:[o.jsx(z,{size:16,style:{color:h.primary}}),o.jsx("span",{children:R.label})]})}),o.jsx(hl,{side:"left",align:"center",sideOffset:5,children:R.tooltip})]},R.id)})})]})]}),o.jsxs("div",{className:"hidden xl:flex items-center space-x-1 absolute right-4 top-1/2 transform -translate-y-1/2",children:[o.jsx(Ty,{}),b?o.jsx("div",{className:"flex items-center",children:o.jsxs(X_,{children:[o.jsx(J_,{asChild:!0,children:o.jsxs("button",{className:"relative flex items-center space-x-2 p-1 rounded-full transition-all duration-200 hover:scale-105 active:scale-95 focus:outline-none",style:{backgroundColor:"transparent"},children:[o.jsxs("div",{className:"relative",children:[o.jsx("div",{className:"w-10 h-10 rounded-full bg-gradient-to-br flex items-center justify-center shadow-lg ring-2 ring-offset-2",style:{background:b!=null&&b.photoURL?`url(${b.photoURL}) center/cover`:m,"--ring-color":h.primary,"--ring-offset-color":x?"#000000":"#ffffff"},children:!(b!=null&&b.photoURL)&&o.jsx(Dt,{size:20,className:"text-white"})}),(b==null?void 0:b.displayName)&&o.jsx("div",{className:"absolute -bottom-1 -right-1 w-5 h-5 rounded-full flex items-center justify-center shadow-md",style:{backgroundColor:h.primary,border:`2px solid ${x?"#000000":h.primary}`},children:o.jsx("svg",{width:"12",height:"12",viewBox:"0 0 24 24",fill:"none",className:"text-white",children:o.jsx("path",{d:"M9 12L11 14L15 10M21 12C21 16.9706 16.9706 21 12 21C7.02944 21 3 16.9706 3 12C3 7.02944 7.02944 3 12 3C16.9706 3 21 7.02944 21 12Z",stroke:"currentColor",strokeWidth:"2.5",strokeLinecap:"round",strokeLinejoin:"round"})})})]}),o.jsx(zl,{size:16,className:"transition-transform duration-200",style:{color:h.text}})]})}),o.jsxs(qf,{align:"end",className:"w-64 p-2 mt-2 shadow-2xl animate-in fade-in-0 zoom-in-95 slide-in-from-top-2 duration-200 ease-out",style:{backgroundColor:x?"rgba(0, 0, 0, 0.95)":"rgba(255, 255, 255, 0.95)",backdropFilter:"blur(10px)"},children:[o.jsxs("div",{className:"px-3 py-2 mb-2",children:[o.jsx("p",{className:"font-black text-sm",style:{color:x?h.text:"#000000"},children:(b==null?void 0:b.displayName)||((ee=b==null?void 0:b.email)==null?void 0:ee.split("@")[0])||"User"}),o.jsx("p",{className:"text-xs opacity-70",style:{color:x?h.text:"#000000"},children:b==null?void 0:b.email})]}),o.jsx(th,{className:"opacity-20"}),o.jsxs(co,{onClick:()=>j("/profile?section=profile"),className:"flex items-center space-x-3 p-3 rounded-lg cursor-pointer transition-all duration-200",style:{color:x?h.text:"#000000"},children:[o.jsx(Dt,{size:18,style:{color:h.primary}}),o.jsx("span",{className:"font-semibold",children:"Profile"})]}),o.jsxs(co,{onClick:()=>j("/profile?section=submissions"),className:"flex items-center space-x-3 p-3 rounded-lg cursor-pointer transition-all duration-200",style:{color:x?h.text:"#000000"},children:[o.jsx(Gd,{size:18,style:{color:h.primary}}),o.jsxs("span",{className:"font-semibold",children:["Submission",o.jsx("br",{}),"Requests"]})]}),o.jsx(th,{className:"opacity-20"}),o.jsxs(co,{onClick:()=>d(!0),className:"flex items-center space-x-3 p-3 rounded-lg cursor-pointer transition-all duration-200",style:{color:"#EF4444"},children:[o.jsx(Qd,{size:18,className:"text-red-500"}),o.jsx("span",{className:"font-semibold",children:"Logout"})]})]})]})}):o.jsxs("div",{className:"flex items-center space-x-3",children:[o.jsx("button",{onClick:I,className:"px-4 py-2 text-sm font-semibold rounded-lg transition-all duration-200 hover:scale-105 active:scale-95 focus:outline-none focus:ring-0",style:{color:h.text,border:`2px solid ${h.primary}`,backgroundColor:"transparent",borderRadius:"8px",height:"32px",minWidth:"80px",transform:"scale(1)",transition:"all 0.2s ease"},onMouseEnter:R=>{R.currentTarget.style.transform="scale(1.05)",R.currentTarget.style.backgroundColor=h.primary+"10"},onMouseLeave:R=>{R.currentTarget.style.transform="scale(1)",R.currentTarget.style.backgroundColor="transparent"},onMouseDown:R=>{R.currentTarget.style.transform="scale(0.95)"},onMouseUp:R=>{R.currentTarget.style.transform="scale(1.05)"},children:"LOGIN"}),o.jsx("button",{onClick:X,className:"px-4 py-2 text-sm font-semibold rounded-lg transition-all duration-200 hover:scale-105 active:scale-95 focus:outline-none whitespace-nowrap",style:{backgroundColor:h.primary,color:"white",border:`2px solid ${h.primary}`,borderRadius:"8px",height:"32px",minWidth:"80px"},children:"SIGN UP"})]})]}),o.jsxs("div",{className:"xl:hidden flex items-center space-x-3",children:[o.jsx(Ty,{}),o.jsx("button",{ref:T,onClick:()=>e(!r),className:"p-2 rounded-lg transition-all duration-200 flex items-center justify-center hover:scale-105 active:scale-95 focus:outline-none focus:ring-0",style:{backgroundColor:r?h.primary:"transparent",color:r?"white":h.primary,transform:"scale(1)",transition:"all 0.2s ease"},onMouseEnter:R=>{r||(R.currentTarget.style.transform="scale(1.05)")},onMouseLeave:R=>{r||(R.currentTarget.style.transform="scale(1)")},onMouseDown:R=>{R.currentTarget.style.transform="scale(0.95)"},onMouseUp:R=>{R.currentTarget.style.transform="scale(1.05)"},"aria-label":r?"Close navigation menu":"Open navigation menu",children:o.jsx(my,{size:24})})]})]}),r&&o.jsx("div",{ref:P,className:"xl:hidden absolute top-full right-4 bg-black/90 backdrop-blur-md border rounded-xl animate-in fade-in-0 slide-in-from-top-2 duration-300 ease-out shadow-xl",style:{borderColor:h.primary+"40",minWidth:"280px",maxWidth:"320px",zIndex:9999},children:o.jsxs("div",{className:"p-4 space-y-2",children:[o.jsxs("a",{href:"/music",className:"flex items-center space-x-3 px-4 py-3 text-base font-semibold rounded-lg transition-all duration-200 w-full hover:bg-opacity-20 hover:scale-105 active:scale-95 no-underline focus:outline-none",style:{color:"#ffffff",backgroundColor:"transparent",display:"flex",textDecoration:"none"},onMouseEnter:R=>{R.currentTarget.style.backgroundColor=h.primary+"20",R.currentTarget.style.color="white"},onMouseLeave:R=>{R.currentTarget.style.backgroundColor="transparent",R.currentTarget.style.color="#ffffff"},children:[o.jsx(Ao,{size:20,style:{color:h.primary}}),o.jsx("span",{children:"MUSIC"})]}),o.jsxs("a",{href:"/schedule",className:"flex items-center gap-3 px-4 py-3 text-sm font-medium transition-all duration-200 hover:scale-105 active:scale-95 rounded-lg focus:outline-none",style:{color:"#ffffff",backgroundColor:"transparent",textDecoration:"none"},onMouseEnter:R=>{R.currentTarget.style.backgroundColor=h.primary+"20"},onMouseLeave:R=>{R.currentTarget.style.backgroundColor="transparent"},children:[o.jsx(os,{size:20,style:{color:h.primary}}),o.jsx("span",{children:"SCHEDULE"})]}),o.jsxs("a",{href:"/support",className:"flex items-center space-x-3 px-4 py-3 text-base font-semibold rounded-lg transition-all duration-200 w-full hover:bg-opacity-20 hover:scale-105 active:scale-95 no-underline focus:outline-none",style:{color:"#ffffff",backgroundColor:"transparent",display:"flex",textDecoration:"none"},onMouseEnter:R=>{R.currentTarget.style.backgroundColor=h.primary+"20",R.currentTarget.style.color="white"},onMouseLeave:R=>{R.currentTarget.style.backgroundColor="transparent",R.currentTarget.style.color="#ffffff"},children:[o.jsx(Qs,{size:20,style:{color:h.primary}}),o.jsx("span",{children:"SUPPORT US"})]}),o.jsxs("a",{href:"/features",className:"flex items-center space-x-3 px-4 py-3 text-base font-semibold rounded-lg transition-all duration-200 w-full hover:bg-opacity-20 hover:scale-105 active:scale-95 no-underline focus:outline-none focus:ring-2 focus:ring-offset-2",style:{color:"#ffffff",backgroundColor:"transparent",display:"flex",textDecoration:"none","--tw-ring-color":h.primary,"--tw-ring-offset-color":"#000000"},onMouseEnter:R=>{R.currentTarget.style.backgroundColor=h.primary+"20",R.currentTarget.style.color="white"},onMouseLeave:R=>{R.currentTarget.style.backgroundColor="transparent",R.currentTarget.style.color="#ffffff"},children:[o.jsx(Qs,{size:20,style:{color:h.primary}}),o.jsx("span",{children:"FEATURES"})]}),o.jsxs("a",{href:"/map",className:"flex items-center space-x-3 px-4 py-3 text-base font-semibold rounded-lg transition-all duration-200 w-full hover:bg-opacity-20 hover:scale-105 active:scale-95 no-underline focus:outline-none focus:ring-2 focus:ring-offset-2",style:{color:"#ffffff",backgroundColor:"transparent",display:"flex",textDecoration:"none","--tw-ring-color":h.primary,"--tw-ring-offset-color":"#000000"},onMouseEnter:R=>{R.currentTarget.style.backgroundColor=h.primary+"20",R.currentTarget.style.color="white"},onMouseLeave:R=>{R.currentTarget.style.backgroundColor="transparent",R.currentTarget.style.color="#ffffff"},children:[o.jsx(Yd,{size:20,style:{color:h.primary}}),o.jsx("span",{children:"LISTEN MAP"})]}),o.jsxs("a",{href:"/submissions",className:"flex items-center space-x-3 px-4 py-3 text-base font-semibold rounded-lg transition-all duration-200 w-full hover:bg-opacity-20 hover:scale-105 active:scale-95 no-underline focus:outline-none focus:ring-2 focus:ring-offset-2",style:{color:"#ffffff",backgroundColor:"transparent",display:"flex",textDecoration:"none","--tw-ring-color":h.primary,"--tw-ring-offset-color":"#000000"},onMouseEnter:R=>{R.currentTarget.style.backgroundColor=h.primary+"20",R.currentTarget.style.color="white"},onMouseLeave:R=>{R.currentTarget.style.backgroundColor="transparent",R.currentTarget.style.color="#ffffff"},children:[o.jsx(qi,{size:20,style:{color:h.primary}}),o.jsx("span",{children:"SUBMISSIONS"})]}),o.jsxs("a",{href:"/contact",className:"flex items-center space-x-3 px-4 py-3 text-base font-semibold rounded-lg transition-all duration-200 w-full hover:bg-opacity-20 hover:scale-105 active:scale-95 no-underline focus:outline-none focus:ring-2 focus:ring-offset-2",style:{color:"#ffffff",backgroundColor:"transparent",display:"flex",textDecoration:"none","--tw-ring-color":h.primary,"--tw-ring-offset-color":"#000000"},onMouseEnter:R=>{R.currentTarget.style.backgroundColor=h.primary+"20",R.currentTarget.style.color="white"},onMouseLeave:R=>{R.currentTarget.style.backgroundColor="transparent",R.currentTarget.style.color="#ffffff"},children:[o.jsx(Xd,{size:20,style:{color:h.primary}}),o.jsx("span",{children:"CONTACT"})]}),o.jsx("div",{className:"border-t my-3",style:{borderColor:h.primary+"40"}}),b?o.jsxs(o.Fragment,{children:[o.jsxs("a",{href:"/profile",className:"flex items-center space-x-3 px-4 py-3 text-base font-semibold rounded-lg transition-all duration-200 w-full no-underline",style:{color:h.text,backgroundColor:h.primary+"20",display:"flex",textDecoration:"none"},onMouseEnter:R=>{R.currentTarget.style.backgroundColor=h.primary+"30",R.currentTarget.style.color="white"},onMouseLeave:R=>{R.currentTarget.style.backgroundColor=h.primary+"20",R.currentTarget.style.color=h.text},children:[o.jsx(Dt,{size:16,style:{color:h.primary}}),o.jsx("span",{children:"PROFILE"})]}),o.jsxs("button",{onClick:le,className:"flex items-center space-x-3 px-4 py-3 text-base font-semibold rounded-lg transition-all duration-200 w-full no-underline focus:outline-none focus:ring-2 focus:ring-offset-2",style:{color:h.primary,backgroundColor:"transparent",border:`1px solid ${h.primary}`,display:"flex",textDecoration:"none","--tw-ring-color":h.primary,"--tw-ring-offset-color":"#000000"},onMouseEnter:R=>{R.currentTarget.style.backgroundColor=h.primary+"20",R.currentTarget.style.color="white"},onMouseLeave:R=>{R.currentTarget.style.backgroundColor="transparent",R.currentTarget.style.color=h.primary},children:[o.jsx(Qd,{size:16,style:{color:h.primary}}),o.jsx("span",{children:"SIGN OUT"})]})]}):o.jsxs(o.Fragment,{children:[o.jsxs("div",{onClick:()=>{setTimeout(()=>{l("login"),i(!0)},100),e(!1)},className:"flex items-center justify-center space-x-3 px-6 py-3 text-sm font-bold rounded-full transition-all duration-300 w-full cursor-pointer shadow-lg",style:{color:"white",background:`linear-gradient(135deg, ${h.primary}, ${h.secondary||h.primary})`,border:"none",transform:"scale(1)"},onMouseEnter:R=>{R.currentTarget.style.transform="scale(1.05)",R.currentTarget.style.boxShadow=`0 8px 25px -8px ${h.primary}60`},onMouseLeave:R=>{R.currentTarget.style.transform="scale(1)",R.currentTarget.style.boxShadow="0 4px 15px -4px rgba(0,0,0,0.2)"},children:[o.jsx(Dt,{size:18,style:{color:"white"}}),o.jsx("span",{children:"LOGIN"})]}),o.jsxs("div",{onClick:()=>{setTimeout(()=>{l("register"),i(!0)},100),e(!1)},className:"flex items-center justify-center space-x-3 px-6 py-3 text-sm font-bold rounded-full transition-all duration-300 w-full cursor-pointer shadow-lg",style:{color:h.primary,background:"rgba(255, 255, 255, 0.1)",border:`2px solid ${h.primary}`,backdropFilter:"blur(10px)",transform:"scale(1)"},onMouseEnter:R=>{R.currentTarget.style.transform="scale(1.05)",R.currentTarget.style.background=`${h.primary}15`,R.currentTarget.style.boxShadow=`0 8px 25px -8px ${h.primary}40`},onMouseLeave:R=>{R.currentTarget.style.transform="scale(1)",R.currentTarget.style.background="rgba(255, 255, 255, 0.1)",R.currentTarget.style.boxShadow="0 4px 15px -4px rgba(0,0,0,0.2)"},children:[o.jsx(i_,{size:18,style:{color:h.primary}}),o.jsx("span",{children:"SIGN UP"})]})]})]})})]})}),o.jsx(rh,{open:u,onOpenChange:d,children:o.jsxs(Gl,{className:"max-w-md animate-in fade-in zoom-in duration-300",style:{backgroundColor:x?"rgba(0, 0, 0, 0.95)":"rgba(255, 255, 255, 0.95)",border:`2px solid ${h.primary}40`},children:[o.jsxs(Kl,{children:[o.jsx(Yl,{className:"text-xl font-black",style:{color:h.text},children:"Confirm Logout"}),o.jsx(Xl,{className:"text-base",style:{color:h.text,opacity:.8},children:"Are you sure you want to log out of your account?"})]}),o.jsxs(Ql,{className:"flex gap-3",children:[o.jsx(Zl,{className:"font-semibold px-6 py-2 rounded-lg transition-all duration-200 focus:outline-none focus:ring-2 focus:ring-offset-2",style:{backgroundColor:"transparent",color:h.text,border:`1px solid ${h.primary}40`,"--tw-ring-color":h.primary,"--tw-ring-offset-color":x?"#000000":"#ffffff"},children:"Cancel"}),o.jsx(Jl,{onClick:le,className:"font-semibold px-6 py-2 rounded-lg transition-all duration-200 focus:outline-none focus:ring-2 focus:ring-offset-2",style:{backgroundColor:"#EF4444",color:"white",border:"1px solid #EF4444","--tw-ring-color":"#EF4444","--tw-ring-offset-color":x?"#000000":"#ffffff"},children:"Logout"})]})]})}),o.jsx(IO,{isOpen:s,onClose:()=>i(!1),initialMode:a})]})}function D1({text:r,className:e="",style:t={},maxWidth:n="100%",isFloating:s=!1,backgroundColor:i="transparent",alignment:a="center"}){const[l,u]=p.useState(!1),[d,h]=p.useState(!1),m=p.useRef(null),g=p.useRef(null);return p.useEffect(()=>{const x=()=>{if(m.current&&g.current){const S=m.current.scrollWidth,b=g.current.clientWidth,v=S>b;h(v),v||u(!1)}};return x(),window.addEventListener("resize",x),()=>window.removeEventListener("resize",x)},[r]),p.useEffect(()=>{if(d){const x=setTimeout(()=>{u(!0)},1e3);return()=>clearTimeout(x)}else u(!1)},[d]),d?o.jsxs("div",{ref:g,className:"relative overflow-hidden whitespace-nowrap",style:{maxWidth:n,backgroundColor:i},children:[o.jsxs("div",{ref:m,className:`${e} whitespace-nowrap`,style:{...t,display:"inline-block",whiteSpace:"nowrap",animation:l&&d?"scrollLeftToRight 12s linear infinite":"none",transform:"translateX(0)"},children:[r,d&&l&&o.jsx("span",{style:{paddingLeft:"50px"},children:r})]}),o.jsx("style",{children:`
        @keyframes scrollLeftToRight {
          0% {
            transform: translateX(0%);
          }
          100% {
            transform: translateX(-100%);
          }
        }
      `})]}):o.jsx("div",{ref:g,className:`flex overflow-hidden ${a==="left"?"justify-start":"justify-center"}`,style:{maxWidth:n,backgroundColor:i},children:o.jsx("div",{ref:m,className:e,style:t,children:r})})}function AO({size:r="md",className:e=""}){const{getColors:t,getGradient:n}=ue(),s=t(),i=n(),a={sm:"w-12 h-12",md:"w-16 h-16",lg:"w-24 h-24"},l={sm:"w-6 h-6",md:"w-8 h-8",lg:"w-12 h-12"};return o.jsx("div",{className:`${a[r]} rounded-xl flex items-center justify-center shadow-lg ${e}`,style:{background:i,border:`2px solid ${s.primary}`},children:o.jsx(Ao,{className:`${l[r]} text-white`})})}class Js{constructor(){this.cache=new Map}static getInstance(){return Js.instance||(Js.instance=new Js),Js.instance}isPlaylistCover(e){const t=["playlist","mix","dj","radio","station","live","stream","broadcast","show","program","session","set"],n=e.toLowerCase();return t.some(s=>n.includes(s))}isGenericArtwork(e){const t=["default","placeholder","unknown","no-artwork","music-note","album-cover","generic"],n=e.toLowerCase();return t.some(s=>n.includes(s))}async searchSpotify(e,t){var n,s,i,a;try{const l=encodeURIComponent(`${e} ${t}`),u=await fetch(`https://api.spotify.com/v1/search?q=${l}&type=track&limit=1`,{headers:{Authorization:"Bearer YOUR_SPOTIFY_TOKEN"}});if(u.ok){const h=(s=(n=(await u.json()).tracks)==null?void 0:n.items)==null?void 0:s[0];if(((a=(i=h==null?void 0:h.album)==null?void 0:i.images)==null?void 0:a.length)>0){const m=h.album.images[0];return{url:m.url,source:"spotify",quality:m.height>=640?"high":"medium"}}}}catch(l){console.warn("Spotify artwork search failed:",l)}return null}async searchiTunes(e,t){var n;try{const s=encodeURIComponent(`${e} ${t}`),i=await fetch(`https://itunes.apple.com/search?term=${s}&media=music&entity=song&limit=1`);if(i.ok){const l=(n=(await i.json()).results)==null?void 0:n[0];if(l!=null&&l.artworkUrl512||l!=null&&l.artworkUrl100)return{url:(l.artworkUrl512||l.artworkUrl100).replace("100x100","512x512").replace("60x60","512x512"),source:"itunes",quality:"high"}}}catch(s){console.warn("iTunes artwork search failed:",s)}return null}async searchLastFM(e,t){var n,s,i;try{const a=encodeURIComponent(`${e} ${t}`),l=await fetch(`https://ws.audioscrobbler.com/2.0/?method=track.getInfo&track=${a}&artist=${encodeURIComponent(t)}&api_key=YOUR_LASTFM_KEY&format=json`);if(l.ok){const d=(await l.json()).track;if((i=(s=(n=d==null?void 0:d.album)==null?void 0:n.image)==null?void 0:s[2])!=null&&i["#text"])return{url:d.album.image[2]["#text"],source:"lastfm",quality:"medium"}}}catch(a){console.warn("Last.fm artwork search failed:",a)}return null}async generateAIArtwork(e,t){try{const n=`Album cover art for "${e}" by ${t}, modern design, vibrant colors`;return console.log("AI artwork generation requested for:",n),{url:`https://via.placeholder.com/512/1f2937/ffffff?text=${encodeURIComponent(`${e}
by ${t}`)}`,source:"ai-generated",quality:"medium"}}catch(n){console.warn("AI artwork generation failed:",n)}return null}async getArtworkWithFallback(e,t,n){if(!e||e==="advertisement")return this.searchFallbackArtwork(t,n);if(this.isPlaylistCover(e)||this.isGenericArtwork(e))return console.log("Detected playlist/generic artwork, searching for better alternative"),await this.searchFallbackArtwork(t,n)||e;try{if(!(await fetch(e,{method:"HEAD"})).ok)return console.log("Original artwork failed to load, trying fallbacks"),await this.searchFallbackArtwork(t,n)||e}catch{return console.log("Original artwork failed to load, trying fallbacks"),await this.searchFallbackArtwork(t,n)||e}return e}async searchFallbackArtwork(e,t){const n=`${e}-${t}`.toLowerCase();if(this.cache.has(n))return this.cache.get(n).url;const s=[()=>this.searchiTunes(e,t),()=>this.searchSpotify(e,t),()=>this.searchLastFM(e,t),()=>this.generateAIArtwork(e,t)];for(const i of s)try{const a=await i();if(a)return this.cache.set(n,a),a.url}catch(a){console.warn("Artwork source failed:",a)}return null}clearCache(){this.cache.clear()}getCacheStats(){return{size:this.cache.size,entries:Array.from(this.cache.keys())}}}const RO=Js.getInstance();function O1({artwork:r,title:e,artist:t,isPlaying:n=!1,size:s="md",className:i="",isAd:a=!1}){const{getGradient:l,getColors:u,currentTheme:d}=ue();u();const[h,m]=p.useState(!1),[g,x]=p.useState(!1),[S,b]=p.useState(l()),[v,E]=p.useState(!1),[T,N]=p.useState(null),[P,F]=p.useState(!1),U={sm:"w-10 h-10 sm:w-12 sm:h-12",md:"w-24 h-24 sm:w-32 sm:h-32",lg:"w-32 h-32 sm:w-48 sm:h-48"},A={sm:"sm",md:"md",lg:"lg"};p.useEffect(()=>{const j=l();if(j!==S&&!r){E(!0);const _=setTimeout(()=>{b(j),E(!1)},300);return()=>clearTimeout(_)}},[d,l,S,r]),p.useEffect(()=>{if(v){const j=setTimeout(()=>{E(!1)},300);return()=>clearTimeout(j)}},[v]);const w=()=>{x(!0)},C=async()=>{if(x(!1),console.warn(`Failed to load artwork for "${e}" by ${t}. Searching for fallback...`),!P){F(!0);try{const j=await RO.getArtworkWithFallback(r,e,t);j&&j!==r&&(N(j),console.log(`Found fallback artwork for "${e}" by ${t}`))}catch(j){console.warn("Fallback artwork search failed:",j)}finally{F(!1)}}};return o.jsxs("div",{className:`relative ${U[s]} rounded-xl overflow-hidden shadow-lg cursor-pointer transition-all duration-300 ${i}`,onMouseEnter:()=>m(!0),onMouseLeave:()=>m(!1),style:{transform:h?"scale(1.05)":"scale(1)",boxShadow:h?`0 20px 40px -12px ${l()}40`:"0 4px 8px rgba(0,0,0,0.2)"},children:[o.jsx("div",{className:"absolute inset-0 flex items-center justify-center transition-all duration-500",style:{background:a?"linear-gradient(45deg, #ff4444, #cc0000)":l(),opacity:!r||r===""||!g||r==="advertisement"?1:0,transform:h?"scale(1.1)":"scale(1)"},children:a?o.jsxs("div",{className:"text-center text-white",children:[o.jsx("div",{className:"text-2xl mb-1",children:"📢"}),o.jsx("div",{className:"text-xs font-bold",children:"AD"}),o.jsx("div",{className:"text-xs opacity-80",children:"ADVERTISEMENT"})]}):o.jsx(AO,{size:A[s]})}),(r&&r.trim()&&r!=="advertisement"||T)&&o.jsxs("div",{className:"absolute inset-0 transition-all duration-500",style:{opacity:g?1:0,transform:h?"scale(1.05)":"scale(1)"},children:[o.jsx("img",{src:T||r,alt:`${e} by ${t}`,className:"w-full h-full object-cover",onLoad:w,onError:C,referrerPolicy:"no-referrer",crossOrigin:"anonymous"}),o.jsx("div",{className:"absolute inset-0 transition-opacity duration-300",style:{background:`linear-gradient(45deg, ${l()}20, transparent)`,opacity:h?1:0}}),h&&o.jsx("div",{className:"absolute inset-0 transition-opacity duration-300",style:{background:"linear-gradient(135deg, rgba(255,255,255,0.1) 0%, transparent 50%)",opacity:.6}})]}),r&&!g&&o.jsx("div",{className:"absolute inset-0 bg-gradient-to-r from-transparent via-white/10 to-transparent animate-pulse"})]})}const Ls=[{id:"hot-97",stationId:"hot-97",name:"Hot 97",frequency:"97.1 FM",location:"New York, NY",genre:"Hip Hop & R&B",streamUrl:"https://stream.revma.ihrhls.com/zc6046",description:"New York's #1 Hip Hop & R&B",icon:"🔥"},{id:"power-106",stationId:"power-106",name:"Power 105.1",frequency:"105.1 FM",location:"New York, NY",genre:"Hip Hop & R&B",streamUrl:"https://stream.revma.ihrhls.com/zc1481",description:"New York's Power 105.1",icon:"⚡"},{id:"beat-955",stationId:"beat-955",name:"95.5 The Beat",frequency:"95.5 FM",location:"Dallas, TX",genre:"Hip Hop & R&B",streamUrl:"https://playerservices.streamtheworld.com/api/livestream-redirect/KBFBFMAAC.aac",description:"Dallas' #1 Hip Hop & R&B",icon:"🎵"},{id:"hot-105",stationId:"hot-105",name:"Hot 105",frequency:"105.1 FM",location:"Miami, FL",genre:"Urban R&B",streamUrl:"https://stream.revma.ihrhls.com/zc5907",description:"Miami's Today's R&B and Old School",icon:"🌴"},{id:"q-93",stationId:"q-93",name:"Q93",frequency:"93.3 FM",location:"New Orleans, LA",genre:"Hip Hop & R&B",streamUrl:"https://stream.revma.ihrhls.com/zc1037",description:"New Orleans Hip Hop & R&B",icon:"🎺"},{id:"somafm-metal",stationId:"somafm-metal",name:"SomaFM Metal",frequency:"Online",location:"San Francisco, CA",genre:"Metal",streamUrl:"https://ice1.somafm.com/metal-128-mp3",description:"Heavy Metal & Hard Rock",icon:"🤘"}];function L1(){const{currentTrack:r,isPlaying:e,isLoading:t,error:n,togglePlayback:s,volume:i,setVolume:a,isMuted:l,toggleMute:u,changeStation:d,currentStation:h,isAdPlaying:m,adInfo:g}=Vc(),{user:x,updateListeningStatus:S}=Ht(),{getColors:b,getGradient:v,currentTheme:E}=ue(),T=b(),{toast:N}=Sr(),[P,F]=p.useState(()=>{if(typeof window<"u"){const J=localStorage.getItem("debug-mode");return J?JSON.parse(J):!1}return!1}),[U,A]=p.useState(!1),[w,C]=p.useState(Ls[0]),[j,_]=p.useState(!1);p.useEffect(()=>{const J=Ls[0];J&&!w&&C(J)},[]),p.useEffect(()=>{h&&C(h)},[h]);const M=async J=>{try{X(!0),C(J),A(!1),await d(J),P&&N({title:"Station Changed",description:`Now playing ${J.name}`,variant:"default"})}catch(Ee){console.error("Failed to change station:",Ee),C(h||Ls[0]),N({title:"Station Change Failed",description:"Failed to switch to the selected station",variant:"error"})}finally{X(!1)}},[I,X]=p.useState(!1),[le,he]=p.useState(!1);p.useRef(null);const ee=p.useRef(null),R=p.useRef(null),z=p.useRef(null),H=p.useRef(null);p.useEffect(()=>{const J=Ee=>{z.current&&!z.current.contains(Ee.target)&&A(!1)};if(U)return document.addEventListener("mousedown",J),()=>document.removeEventListener("mousedown",J)},[U]);const xe=()=>{H.current&&(clearTimeout(H.current),H.current=null),_(!0)},ze=()=>{H.current=setTimeout(()=>{_(!1)},150)};p.useEffect(()=>()=>{H.current&&clearTimeout(H.current)},[]);const W=async()=>{try{await s(),x&&await S(!e)}catch(J){console.error("Error toggling playback:",J)}};return o.jsxs("section",{className:"backdrop-blur-md rounded-2xl shadow-xl transition-all duration-1000 ease-in-out mx-auto overflow-visible",role:"region","aria-label":"Radio player controls",style:{background:r!=null&&r.artwork&&r.artwork!=="advertisement"?`linear-gradient(135deg, ${T.primary}40, ${T.secondary}20)`:"rgba(255, 255, 255, 0.12)",backdropFilter:"blur(40px) saturate(250%)",WebkitBackdropFilter:"blur(40px) saturate(250%)",boxShadow:`0 16px 64px ${T.primary}30, inset 0 1px 0 rgba(255, 255, 255, 0.25), 0 0 0 1px rgba(255, 255, 255, 0.15), 0 0 32px ${T.primary}15`,color:T.text,border:"none",width:"clamp(400px, 30vw, 600px)",minWidth:"400px",maxWidth:"600px",paddingTop:"20px",paddingLeft:"20px",paddingRight:"20px",paddingBottom:j?"100px":"68px",contain:"layout"},children:[o.jsx("div",{className:"mb-6",children:o.jsxs("div",{className:"relative",ref:z,children:[o.jsxs(Z,{variant:"outline",size:"sm",onClick:()=>A(!U),className:"bg-card/95 backdrop-blur-sm hover:bg-card/100 transition-all duration-200 text-xs px-3 py-1",style:{borderColor:T.primary,borderWidth:"2px",borderRadius:"12px",width:"auto","--tw-ring-color":T.primary},children:[o.jsx(zi,{className:"w-3 h-3 mr-1",style:{color:T.primary}}),o.jsx("span",{style:{color:T.primary},children:(w==null?void 0:w.name)||"95.5 The Beat"}),o.jsx(zl,{className:`w-3 h-3 ml-1 transition-transform duration-300 ease-in-out transform ${U?"rotate-180":"rotate-0"}`,style:{opacity:.6,color:T.primary}})]}),U&&o.jsx("div",{className:"absolute mt-1 left-1/2 transform -translate-x-1/2 max-h-60 overflow-y-auto shadow-xl z-20 scrollbar-thin",style:{background:"rgba(0, 0, 0, 0.98)",backdropFilter:"blur(32px) saturate(220%)",WebkitBackdropFilter:"blur(32px) saturate(220%)",borderColor:T.primary+"60",borderRadius:"12px",minWidth:"300px",border:"2px solid",boxShadow:`0 12px 48px ${T.primary}30, 0 0 0 1px rgba(255, 255, 255, 0.15), 0 0 24px rgba(0, 0, 0, 0.3)`},children:o.jsxs("div",{className:"p-2",children:[w&&o.jsx("button",{onClick:()=>M(w),className:"w-full p-3 text-left rounded-md transition-all duration-300 hover:bg-muted/20 focus:outline-none focus:ring-0",style:{background:`linear-gradient(135deg, ${T.primary}40, ${T.secondary}25)`,border:`1px solid ${T.primary}80`,boxShadow:`0 2px 8px ${T.primary}20`},children:o.jsxs("div",{className:"flex items-center gap-3",children:[o.jsx("div",{className:"flex items-center justify-center w-10 h-10 rounded-full",children:o.jsx("span",{className:"text-lg",children:w.icon})}),o.jsxs("div",{className:"flex-1 min-w-0 flex items-center",children:[o.jsxs("div",{className:"flex-1",children:[o.jsx("div",{className:"font-semibold text-sm truncate",style:{color:T.text||"#ffffff",textShadow:"0 1px 2px rgba(0, 0, 0, 0.8)",fontWeight:"600"},children:w.name}),o.jsxs("div",{className:"text-xs truncate",style:{color:T.textMuted||"#e5e7eb",textShadow:"0 1px 2px rgba(0, 0, 0, 0.6)"},children:[w.frequency," •"," ",w.location]}),o.jsx("div",{className:"text-xs truncate",style:{color:T.textMuted||"#d1d5db",opacity:.9,textShadow:"0 1px 2px rgba(0, 0, 0, 0.5)"},children:w.description})]}),e&&o.jsx("div",{className:"flex items-center justify-center w-9 h-9",children:o.jsx("div",{className:"flex items-center justify-center h-full",children:o.jsxs("svg",{className:"w-6 h-6",fill:"none",xmlns:"http://www.w3.org/2000/svg",children:[o.jsx("path",{d:"M11 5L6 9H2V15H6L11 19V5Z",fill:T.primary}),o.jsx("path",{d:"M14 9.5C15.1 10.6 15.1 12.4 14 13.5",stroke:T.primary,strokeWidth:"1.5",className:"animate-pulse",style:{animation:"pulse 1.5s ease-in-out infinite"}}),o.jsx("path",{d:"M16 7.5C18.2 9.7 18.2 13.3 16 15.5",stroke:T.primary,strokeWidth:"1.5",className:"animate-pulse",style:{animation:"pulse 1.5s ease-in-out infinite",animationDelay:"0.3s"}}),o.jsx("path",{d:"M18 5.5C21.3 8.8 21.3 14.2 18 17.5",stroke:T.primary,strokeWidth:"1.5",className:"animate-pulse",style:{animation:"pulse 1.5s ease-in-out infinite",animationDelay:"0.6s"}})]})})})]})]})},w.id+"-selected"),Ls==null?void 0:Ls.filter(J=>J.id!==(w==null?void 0:w.id)).map(J=>o.jsx("button",{onClick:()=>M(J),className:"w-full p-3 text-left rounded-md transition-all duration-300 hover:bg-muted/20 focus:outline-none focus:ring-0",style:{backgroundColor:"transparent"},children:o.jsxs("div",{className:"flex items-center gap-3",children:[o.jsx("div",{className:"flex items-center justify-center w-10 h-10 rounded-full",style:{background:`linear-gradient(135deg, ${T.primary}40, ${T.secondary}20)`,backdropFilter:"blur(10px)"},children:o.jsx("span",{className:"text-lg",children:J.icon})}),o.jsxs("div",{className:"flex-1 min-w-0",children:[o.jsx("div",{className:"font-semibold text-sm truncate",style:{color:T.text||"#ffffff",textShadow:"0 1px 2px rgba(0, 0, 0, 0.7)",fontWeight:"600"},children:J.name}),o.jsxs("div",{className:"text-xs truncate",style:{color:T.textMuted||"#e5e7eb",textShadow:"0 1px 2px rgba(0, 0, 0, 0.5)"},children:[J.frequency," • ",J.location]}),o.jsx("div",{className:"text-xs truncate",style:{color:T.textMuted||"#d1d5db",opacity:.9,textShadow:"0 1px 2px rgba(0, 0, 0, 0.4)"},children:J.description})]})]})},J.id))]})})]})}),o.jsxs("div",{className:"flex justify-center mb-6 relative",children:[o.jsx("div",{className:`transition-all duration-1000 transform ${I?"opacity-0 scale-75 rotate-12 blur-md":"opacity-100 scale-100 rotate-0 blur-0"}`,style:{transformOrigin:"center",filter:I?"blur(4px) saturate(0.3)":m?"blur(0px) saturate(1.2) hue-rotate(0deg)":"blur(0px) saturate(1)",animation:I?"none":m?"adPulse 2s ease-in-out infinite":"albumReveal 1.2s cubic-bezier(0.25, 0.46, 0.45, 0.94)"},children:o.jsx(O1,{artwork:m&&g.artwork?g.artwork:r.artwork,title:r.title,artist:r.artist,size:"lg",isAd:m})}),o.jsx("div",{className:"absolute top-0 left-1/2 transform -translate-x-1/2 -translate-y-1/2",children:o.jsxs("div",{className:`flex items-center gap-1 px-2 py-0.5 rounded-full text-xs font-bold ${m?"bg-red-600 text-white":"bg-red-500 text-white"}`,children:[o.jsx("div",{className:"w-1 h-1 bg-white rounded-full animate-pulse opacity-90 relative",style:{top:"0px"}}),o.jsx("span",{className:"opacity-90",children:m?"AD":"LIVE"})]})})]}),o.jsx("div",{className:"text-center mb-6",children:o.jsxs("div",{className:"text-center transition-all duration-1000",style:{opacity:I?.3:1,transform:I?"scale(0.95)":"scale(1)",filter:I?"blur(2px)":"blur(0px)",animation:I?"none":"slideInFromBottom 0.8s cubic-bezier(0.68, -0.55, 0.265, 1.55)"},children:[m&&o.jsx("div",{className:"mb-3 flex justify-center",children:o.jsxs("div",{className:"inline-flex items-center px-3 py-1 rounded-full text-xs font-bold text-white animate-pulse",style:{background:"linear-gradient(45deg, #ff4444, #cc0000)",boxShadow:"0 2px 8px #ff444460"},children:[o.jsx("span",{className:"mr-1",children:"📢"}),"ADVERTISEMENT",g.company&&o.jsxs("span",{className:"ml-1 opacity-80",children:["• ",g.company]})]})}),r.lastUpdated&&o.jsx("div",{className:"mb-2 flex justify-center",children:o.jsxs("div",{className:"inline-flex items-center px-2 py-1 rounded-full text-xs font-medium text-green-400 bg-green-400/10",children:[o.jsx("div",{className:"w-2 h-2 bg-green-400 rounded-full mr-1 animate-pulse relative",style:{top:"0px"}}),"LIVE"]})}),o.jsx("div",{className:"flex justify-center mb-2 w-full overflow-hidden",children:o.jsx("div",{className:`w-full max-w-[90%] ${I?"song-change-shimmer":""}`,children:o.jsx(D1,{text:r.title,className:"font-black whitespace-nowrap text-center",style:{fontSize:"28px",lineHeight:"1",color:m?"#f87171":T.text,textAlign:"center"},maxWidth:"90%",backgroundColor:"transparent",alignment:"center"})})}),r.artist&&r.artist!==r.title&&r.artist!=="Live Stream"&&r.artist!==((w==null?void 0:w.name)||"95.5 The Beat")&&o.jsx("p",{className:"font-black text-2xl mb-1 transition-opacity duration-500 text-center",style:{color:m?"#fca5a5":T.text,textAlign:"center"},children:r.artist}),r.album&&r.album!=="New York's Hip Hop & R&B"&&r.album!=="Live Stream"&&r.album!==r.title&&r.album!==r.artist&&r.album!==((w==null?void 0:w.name)||"95.5 The Beat")&&o.jsx("p",{className:"text-sm font-medium mb-2 transition-opacity duration-500 text-center",style:{color:m?"#fecaca":T.textMuted,textAlign:"center"},children:r.album}),r.stationName&&o.jsxs("p",{className:"text-sm font-medium mb-1 transition-opacity duration-500 text-center",style:{color:T.textMuted,textAlign:"center"},children:[r.stationName," • ",r.frequency]}),r.genre&&o.jsx("p",{className:"text-xs font-medium transition-opacity duration-500 text-center",style:{color:T.textMuted,textAlign:"center"},children:r.genre}),m&&g.reason&&o.jsx("p",{className:"text-red-300 text-xs font-medium mt-2 transition-opacity duration-500 text-center",children:g.reason})]})}),o.jsxs("div",{className:"flex flex-col items-center justify-center space-y-4 relative",children:[o.jsx("div",{className:"flex items-center justify-center w-full",children:o.jsx(Z,{onClick:W,disabled:t,className:"w-16 h-16 rounded-full flex items-center justify-center transition-all duration-300 group shadow-lg hover:shadow-xl border-0 focus:outline-none focus:ring-0",style:{background:`linear-gradient(45deg, ${T.primary}, ${T.secondary})`,boxShadow:`0 4px 20px ${T.primary}60`,opacity:t?.5:1,border:"none",outline:"none"},children:t?o.jsx("div",{className:"w-7 h-7 border-2 border-t-transparent rounded-full animate-spin",style:{borderLeftColor:T.primary,borderRightColor:T.primary,borderBottomColor:T.primary,borderTopColor:"transparent"}}):e?o.jsxs("svg",{className:"h-10 w-10",fill:"#ffffff",viewBox:"0 0 24 24",children:[o.jsx("rect",{x:"6",y:"4",width:"4",height:"16",rx:"1",fill:"#ffffff"}),o.jsx("rect",{x:"14",y:"4",width:"4",height:"16",rx:"1",fill:"#ffffff"})]}):o.jsx("svg",{className:"h-10 w-10",fill:"#ffffff",viewBox:"0 0 24 24",style:{animation:"pulse 2s ease-in-out infinite"},children:o.jsx("path",{d:"M8 5c0-.6.4-1 1-1 .2 0 .5.1.7.3l9 7c.8.6.8 1.8 0 2.4l-9 7c-.2.2-.5.3-.7.3-.6 0-1-.4-1-1V5z",fill:"#ffffff"})})})}),e&&o.jsx("div",{className:"relative transition-all duration-500 ease-in-out transform opacity-100 translate-y-0 scale-100",ref:ee,onMouseEnter:xe,onMouseLeave:ze,children:o.jsxs("div",{className:"relative flex items-center justify-center pb-16",children:[o.jsx(Z,{onClick:u,variant:"ghost",size:"sm",className:"rounded-full flex items-center justify-center transition-all duration-300 hover:scale-105 focus:outline-none focus:ring-0",style:{color:l?"#ef4444":E==="light-mode"?"#1f2937":"#ffffff",background:l||i===0?`${T.primary}40`:E==="light-mode"?"rgba(0, 0, 0, 0.05)":"rgba(255, 255, 255, 0.05)",backdropFilter:"blur(20px)",padding:"5px",width:"auto",height:"auto"},onMouseEnter:J=>{J.currentTarget.style.backgroundColor=E==="light-mode"?"rgba(0, 0, 0, 0.1)":"rgba(255, 255, 255, 0.1)"},onMouseLeave:J=>{J.currentTarget.style.backgroundColor=l||i===0?`${T.primary}40`:E==="light-mode"?"rgba(0, 0, 0, 0.05)":"rgba(255, 255, 255, 0.05)"},"aria-label":l?"Unmute":"Mute",children:l||i===0?o.jsx("div",{className:"transition-all duration-300 ease-in-out",children:o.jsx(s5,{className:"w-10 h-10"})}):o.jsx("div",{className:"relative flex items-center justify-center transition-all duration-300 ease-in-out",children:o.jsxs("svg",{width:"40",height:"40",viewBox:"0 0 24 24",fill:"none",className:"relative",children:[o.jsx("path",{d:"M11 5L6 9H2v6h4l5 4V5z",fill:"currentColor",strokeLinejoin:"round",strokeLinecap:"round"}),o.jsx("path",{d:"M15.54 8.46a5 5 0 0 1 0 7.07",stroke:"currentColor",strokeWidth:"1.5",strokeLinecap:"round",className:"animate-pulse",style:{animation:"pulse 1.5s ease-in-out infinite",animationDelay:"0s"}}),o.jsx("path",{d:"M19.07 4.93a10 10 0 0 1 0 14.14",stroke:"currentColor",strokeWidth:"1.5",strokeLinecap:"round",className:"animate-pulse",style:{animation:"pulse 1.5s ease-in-out infinite",animationDelay:"0.6s"}})]})})}),o.jsx("div",{ref:R,className:`absolute top-full left-1/2 -translate-x-1/2 mt-2 z-50 ${j?"pointer-events-auto":"pointer-events-none"}`,style:{transformOrigin:"top center",transition:"all 0.4s cubic-bezier(0.68, -0.55, 0.265, 1.55)",transform:j?"translateX(-50%) translateY(0px) scale(1) rotateX(0deg)":"translateX(-50%) translateY(-20px) scale(0.3) rotateX(-90deg)",opacity:j?1:0,filter:j?"blur(0px)":"blur(2px)",perspective:"200px"},children:o.jsxs("div",{className:"flex items-center space-x-2",children:[o.jsxs("div",{className:"w-32 h-2 rounded-full relative",style:{backgroundColor:E==="light-mode"?"#d1d5db":"#374151"},children:[o.jsx("div",{className:"h-2 rounded-full transition-all duration-150",style:{width:`${(l?0:i)*100}%`,background:`linear-gradient(45deg, ${T.primary}, ${T.secondary})`}}),o.jsx("input",{type:"range",min:"0",max:"100",value:(l?0:i)*100,onChange:J=>{const Ee=parseInt(J.target.value)/100;a(Ee),l&&Ee>0&&u()},className:"absolute inset-0 w-full h-full opacity-0 cursor-pointer focus:outline-none focus:ring-0","aria-label":"Volume control",title:"Adjust volume",style:{outline:"none",border:"none"}})]}),o.jsxs("span",{className:"text-xs font-medium min-w-[30px] text-center",style:{color:E==="light-mode"?"#6b7280":"#9ca3af"},children:[Math.round((l?0:i)*100),"%"]})]})})]})})]}),n&&o.jsx("div",{className:"mt-4 text-center text-red-400 text-sm font-medium",children:n})]})}const PO=fx.memo(function(){const{isDarkMode:e,getColors:t,currentTheme:n}=ue(),s=t();p.useCallback(()=>{var x;(x=document.getElementById("schedule"))==null||x.scrollIntoView({behavior:"smooth"})},[]);const[i,a]=p.useState({days:0,hours:0,minutes:0,seconds:0}),l=p.useMemo(()=>new Date("2025-08-10T12:00:00").getTime(),[]);p.useEffect(()=>{const x=()=>{const b=new Date().getTime(),v=l-b;v>0&&a({days:Math.floor(v/864e5),hours:Math.floor(v%864e5/36e5),minutes:Math.floor(v%36e5/6e4),seconds:Math.floor(v%6e4/1e3)})};x();const S=setInterval(x,1e3);return()=>clearInterval(S)},[l]);const u=p.useMemo(()=>({color:s.text,textShadow:`0 0 20px ${s.primary}40`}),[s.text,s.primary]),d=p.useMemo(()=>({background:`linear-gradient(135deg, ${s.background}80, ${s.background}40)`}),[s.background]),h=p.useMemo(()=>({background:`radial-gradient(circle at center, transparent 0%, ${s.background}90 70%, ${s.background} 100%)`}),[s.background]),m=p.useMemo(()=>({color:n==="light-mode"?"#374151":s.textMuted}),[n,s.textMuted]),g=p.useMemo(()=>({color:n==="light-mode"?"#212936":s.textMuted}),[n,s.textMuted]);return o.jsxs(o.Fragment,{children:[o.jsx("style",{children:`
          @keyframes customPulse {
            0%, 100% {
              opacity: 1;
              transform: scale(1);
            }
            50% {
              opacity: 0.5;
              transform: scale(1.1);
            }
          }
        `}),o.jsxs("div",{className:"relative min-h-screen flex items-center justify-center overflow-hidden pt-20",children:[o.jsxs("div",{className:"absolute inset-0 -top-16",children:[o.jsx("div",{className:"absolute inset-0 bg-cover bg-center opacity-25 dark:opacity-20 light:opacity-35",style:{backgroundImage:"url('https://images.unsplash.com/photo-1493225457124-a3eb161ffa5f?ixlib=rb-4.0.3&auto=format&fit=crop&w=1920&h=1080')"}}),o.jsx("div",{className:"absolute inset-0 transition-all duration-300",style:d}),o.jsx("div",{className:"absolute inset-0 transition-all duration-300",style:h})]}),o.jsxs("div",{className:"relative z-10 text-center max-w-4xl mx-auto px-4 pt-12",children:[o.jsxs("h1",{className:"font-orbitron font-black text-5xl md:text-8xl mb-8",style:u,children:[o.jsx("div",{children:"SPANDEX"}),o.jsx("div",{children:"SALVATION"}),o.jsx("div",{children:"RADIO"})]}),o.jsxs("p",{className:"text-lg md:text-xl font-orbitron font-semibold mb-6 max-w-2xl mx-auto text-center",style:{color:n==="light-mode"?"#212936":s.textMuted},children:["Bringing you the best of old-school metal with legendary",o.jsx("br",{}),"bands like Skid Row, Twisted Sister, and more.",o.jsx("br",{}),"Join the hairspray rebellion!"]}),o.jsxs("div",{className:"mb-8 flex flex-col justify-center items-center",children:[o.jsx("p",{className:"font-orbitron font-black text-xl md:text-2xl mb-1",style:{color:s.primary},children:"Old School Metal"}),o.jsx("p",{className:"font-orbitron font-black text-base md:text-lg",style:{color:s.primary},children:"24/7 Live Stream"})]}),o.jsxs("div",{className:"mb-8 flex flex-col items-center",role:"timer","aria-label":"Live broadcast countdown",children:[o.jsxs("div",{className:"flex flex-col items-center mb-4",children:[o.jsx("div",{className:"relative mb-3 flex justify-center","aria-hidden":"true",children:o.jsx("div",{className:"w-4 h-4 bg-gradient-to-r from-red-500 to-primary rounded-full shadow-lg",style:{animation:"customPulse 2s ease-in-out infinite"}})}),o.jsx("div",{className:"text-center w-full",children:o.jsx("span",{className:"text-transparent bg-gradient-to-r from-red-500 to-primary bg-clip-text text-xl font-black tracking-wider",children:"LIVE IN"})})]}),o.jsxs("div",{className:"flex justify-center items-center space-x-4 text-center mb-4 w-full max-w-md mx-auto",children:[o.jsxs("div",{className:"flex-1 flex flex-col items-center justify-center p-3 min-w-[80px] transition-colors duration-300",children:[o.jsx("div",{className:"text-3xl font-bold text-red-500 mb-2 text-center w-full leading-none",children:i.days}),o.jsx("div",{className:"text-xs font-semibold text-center w-full leading-tight",style:m,children:"DAYS"})]}),o.jsxs("div",{className:"flex-1 flex flex-col items-center justify-center p-3 min-w-[80px] transition-colors duration-300",children:[o.jsx("div",{className:"text-3xl font-bold text-red-500 mb-2 text-center w-full leading-none",children:i.hours}),o.jsx("div",{className:"text-xs font-semibold text-center w-full leading-tight",style:m,children:"HOURS"})]}),o.jsxs("div",{className:"flex-1 flex flex-col items-center justify-center p-3 min-w-[80px] transition-colors duration-300",children:[o.jsx("div",{className:"text-3xl font-bold text-red-500 mb-2 text-center w-full leading-none",children:i.minutes}),o.jsx("div",{className:"text-xs font-semibold text-center w-full leading-tight",style:m,children:"MINS"})]}),o.jsxs("div",{className:"flex-1 flex flex-col items-center justify-center p-3 min-w-[80px] transition-colors duration-300",children:[o.jsx("div",{className:"text-3xl font-bold text-red-500 mb-2 text-center w-full leading-none",children:i.seconds}),o.jsx("div",{className:"text-xs font-semibold text-center w-full leading-tight",style:m,children:"SECS"})]})]}),o.jsx("div",{className:"text-center w-full",children:o.jsx("p",{className:"text-sm font-semibold opacity-80",style:g,children:"First Broadcast Countdown"})})]}),o.jsx("div",{className:"flex flex-col items-center justify-center space-y-6 mb-12 mt-8",children:o.jsx(L1,{})})]}),o.jsx("div",{className:"absolute bottom-0 left-0 right-0 h-32 bg-gradient-to-t from-background via-background/50 to-transparent transition-colors duration-300"})]})]})});function MO(){const{data:r}=Ri({queryKey:["/api/stream-stats"]}),{getColors:e,isDarkMode:t,currentTheme:n}=ue(),s=e(),[i,a]=p.useState(null);s.primary;const l=d=>{const h=document.getElementById(d);h&&h.scrollIntoView({behavior:"smooth"})},u=()=>{const d=document.getElementById("home");if(d){const h=d.querySelector('[role="region"][aria-label="Radio player controls"]');h?h.scrollIntoView({behavior:"smooth",block:"center"}):d.scrollIntoView({behavior:"smooth",block:"start"})}};return o.jsx("section",{id:"features",className:"py-20 transition-colors duration-300",style:{backgroundColor:s.background},"aria-label":"Platform features",children:o.jsxs("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8",children:[o.jsxs("div",{className:"text-center mb-16",children:[o.jsx("h2",{className:"font-orbitron font-black text-4xl md:text-5xl mb-6",style:{color:n==="light-mode"?"#000000":s.text},children:"ROCK THE AIRWAVES"}),o.jsx("p",{className:"text-xl font-semibold max-w-2xl mx-auto",style:{color:s.textMuted},children:"Experience the ultimate old-school metal radio experience with live streaming, interactive features, and exclusive content."})]}),o.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-8",children:[o.jsxs("div",{className:"relative",children:[o.jsx("div",{className:"absolute inset-2 rounded-2xl overflow-hidden",children:o.jsx("div",{className:"absolute inset-0 blur-xl opacity-0 transition-opacity duration-300",style:{background:`linear-gradient(135deg, ${s.primary}, ${s.secondary||s.primary})`,opacity:i==="streaming"?.3:0}})}),o.jsx(se,{className:"relative group cursor-pointer transition-all duration-300 hover:scale-105 hover:shadow-2xl border-2 p-8 flex flex-col h-full enhanced-glow feature-container shadow-none",style:{backgroundColor:s.background,borderColor:s.primary,borderWidth:"2px",borderStyle:"solid",transform:i==="streaming"?"scale(1.05)":"scale(1)",boxShadow:"none"},onClick:u,onMouseEnter:()=>a("streaming"),onMouseLeave:()=>a(null),children:o.jsxs(oe,{className:"p-0 flex flex-col h-full",children:[o.jsx("div",{className:"w-16 h-16 rounded-xl flex items-center justify-center mb-6 shadow-lg",style:{backgroundColor:s.primary},children:o.jsx(zi,{className:"text-white h-8 w-8"})}),o.jsx("h3",{className:"font-black text-2xl mb-4 h-16 flex items-center text-left",style:{color:s.text},children:"24/7 Live Streaming"}),o.jsx("p",{className:"font-semibold text-lg leading-relaxed mb-6 flex-grow text-left",style:{color:s.textMuted,minHeight:"4.5rem"},children:"Non-stop old-school metal streaming with high-quality audio and minimal buffering."}),o.jsxs("div",{className:"flex items-center text-sm font-bold mt-auto text-left",style:{color:s.primary},children:[o.jsx("div",{className:"w-3 h-3 rounded-full mr-3 animate-pulse",style:{backgroundColor:s.primary}}),o.jsx("span",{children:"Currently Live"})]})]})})]}),o.jsxs("div",{className:"relative",children:[o.jsx("div",{className:"absolute inset-2 rounded-2xl overflow-hidden",children:o.jsx("div",{className:"absolute inset-0 blur-xl opacity-0 transition-opacity duration-300",style:{background:`linear-gradient(135deg, ${s.primary}, ${s.accent||s.primary})`,opacity:i==="archives"?.3:0}})}),o.jsx(se,{className:"relative group cursor-pointer transition-all duration-300 hover:scale-105 hover:shadow-2xl border-2 p-8 flex flex-col h-full enhanced-glow feature-container shadow-none",style:{backgroundColor:s.background,borderColor:s.primary,borderWidth:"2px",borderStyle:"solid",transform:i==="archives"?"scale(1.05)":"scale(1)",boxShadow:"none"},onClick:()=>l("schedule"),onMouseEnter:()=>a("archives"),onMouseLeave:()=>a(null),children:o.jsxs(oe,{className:"p-0 flex flex-col h-full",children:[o.jsx("div",{className:"w-16 h-16 rounded-xl flex items-center justify-center mb-6 shadow-lg",style:{backgroundColor:s.primary},children:o.jsx(IM,{className:"text-white h-8 w-8"})}),o.jsx("h3",{className:"font-black text-2xl mb-4 h-16 flex items-center text-left",style:{color:s.text},children:"Show Archives"}),o.jsx("p",{className:"font-semibold text-lg leading-relaxed mb-6 flex-grow text-left",style:{color:s.textMuted,minHeight:"4.5rem"},children:"Access past shows, special episodes, and exclusive metal content on-demand."}),o.jsxs("div",{className:"flex items-center text-sm font-bold mt-auto text-left",style:{color:s.primary},children:[o.jsx("div",{className:"w-3 h-3 rounded-full mr-3 animate-pulse",style:{backgroundColor:s.primary}}),o.jsx("span",{children:"200+ hours of content"})]})]})})]}),o.jsxs("div",{className:"relative",children:[o.jsx("div",{className:"absolute inset-2 rounded-2xl overflow-hidden",children:o.jsx("div",{className:"absolute inset-0 blur-xl opacity-0 transition-opacity duration-300",style:{background:`linear-gradient(135deg, ${s.secondary||s.primary}, ${s.primary})`,opacity:i==="map"?.3:0}})}),o.jsx(se,{className:"relative group cursor-pointer transition-all duration-300 hover:scale-105 hover:shadow-2xl border-2 p-8 flex flex-col h-full enhanced-glow feature-container shadow-none",style:{backgroundColor:s.background,borderColor:s.primary,borderWidth:"2px",borderStyle:"solid",transform:i==="map"?"scale(1.05)":"scale(1)",boxShadow:"none"},onClick:()=>l("map"),onMouseEnter:()=>a("map"),onMouseLeave:()=>a(null),children:o.jsxs(oe,{className:"p-0 flex flex-col h-full",children:[o.jsx("div",{className:"w-16 h-16 rounded-xl flex items-center justify-center mb-6 shadow-lg",style:{backgroundColor:s.primary},children:o.jsx(dl,{className:"text-white h-8 w-8"})}),o.jsx("h3",{className:"font-black text-2xl mb-4 h-16 flex items-center text-left",style:{color:s.text},children:"Global Listener Map"}),o.jsx("p",{className:"font-semibold text-lg leading-relaxed mb-6 flex-grow text-left",style:{color:s.textMuted,minHeight:"4.5rem"},children:"See where metalheads around the world are tuning in from in real-time."}),o.jsxs("div",{className:"flex items-center text-sm font-bold mt-auto text-left",style:{color:s.primary},children:[o.jsx("div",{className:"w-3 h-3 rounded-full mr-3 animate-pulse",style:{backgroundColor:s.primary}}),o.jsxs("span",{children:[(r==null?void 0:r.currentListeners)||42," listeners online"]})]})]})})]}),o.jsxs("div",{className:"relative",children:[o.jsx("div",{className:"absolute inset-2 rounded-2xl overflow-hidden",children:o.jsx("div",{className:"absolute inset-0 blur-xl opacity-0 transition-opacity duration-300",style:{background:`linear-gradient(135deg, ${s.accent||s.primary}, ${s.primary})`,opacity:i==="rebellion"?.3:0}})}),o.jsx(se,{className:"relative group cursor-pointer transition-all duration-300 hover:scale-105 hover:shadow-2xl border-2 p-8 flex flex-col h-full enhanced-glow feature-container shadow-none",style:{backgroundColor:s.background,borderColor:s.primary,borderWidth:"2px",borderStyle:"solid",transform:i==="rebellion"?"scale(1.05)":"scale(1)",boxShadow:"none"},onClick:()=>l("subscribe"),onMouseEnter:()=>a("rebellion"),onMouseLeave:()=>a(null),children:o.jsxs(oe,{className:"p-0 flex flex-col h-full",children:[o.jsx("div",{className:"w-16 h-16 rounded-xl flex items-center justify-center mb-6 shadow-lg",style:{backgroundColor:s.primary},children:o.jsx(dr,{className:"text-white h-8 w-8"})}),o.jsx("h3",{className:"font-black text-2xl mb-4 h-16 flex items-center text-left",style:{color:s.text},children:"Hairspray Rebellion"}),o.jsx("p",{className:"font-semibold mb-6 text-lg leading-relaxed flex-grow text-left",style:{color:s.textMuted},children:"Join our premium membership for exclusive content, early access, and special perks."}),o.jsx("div",{className:"flex justify-start",children:o.jsxs(Z,{className:"font-bold text-lg px-6 py-3 rounded-xl transition-all duration-300 hover:scale-105 border-0 flex items-center focus:outline-none focus:ring-0",style:{color:s.primary,backgroundColor:"transparent",border:"none"},onMouseEnter:d=>{d.currentTarget.style.backgroundColor=s.primary,d.currentTarget.style.color=s.primaryText||"white"},onMouseLeave:d=>{d.currentTarget.style.backgroundColor="transparent",d.currentTarget.style.color=s.primary},onClick:d=>{d.stopPropagation(),l("subscribe")},children:[o.jsx("span",{className:"text-left",children:"Learn More"}),o.jsx(dr,{className:"w-4 h-4 ml-2"})]})})]})})]}),o.jsxs("div",{className:"relative",children:[o.jsx("div",{className:"absolute inset-2 rounded-2xl overflow-hidden",children:o.jsx("div",{className:"absolute inset-0 blur-xl opacity-0 transition-opacity duration-300",style:{background:`linear-gradient(135deg, ${s.primary}, ${s.secondary||s.primary})`,opacity:i==="requests"?.3:0}})}),o.jsx(se,{className:"relative group cursor-pointer transition-all duration-300 hover:scale-105 hover:shadow-2xl border-2 p-8 flex flex-col h-full enhanced-glow feature-container shadow-none",style:{backgroundColor:s.background,borderColor:s.primary,borderWidth:"2px",borderStyle:"solid",transform:i==="requests"?"scale(1.05)":"scale(1)",boxShadow:"none"},onClick:()=>l("submissions"),onMouseEnter:()=>a("requests"),onMouseLeave:()=>a(null),children:o.jsxs(oe,{className:"p-0 flex flex-col h-full",children:[o.jsx("div",{className:"w-16 h-16 rounded-xl flex items-center justify-center mb-6 shadow-lg",style:{backgroundColor:s.primary},children:o.jsx(Ao,{className:"text-white h-8 w-8"})}),o.jsx("h3",{className:"font-black text-2xl mb-4 h-16 flex items-center text-left",style:{color:s.text},children:"Song Requests"}),o.jsx("p",{className:"font-semibold mb-6 text-lg leading-relaxed flex-grow text-left",style:{color:s.textMuted},children:"Submit your favorite metal tracks and artist suggestions to be featured on air."}),o.jsx("div",{className:"flex justify-start",children:o.jsxs(Z,{className:"font-bold text-lg px-6 py-3 rounded-xl transition-all duration-300 hover:scale-105 border-0 flex items-center focus:outline-none focus:ring-0",style:{color:s.primary,backgroundColor:"transparent",border:"none"},onMouseEnter:d=>{d.currentTarget.style.backgroundColor=s.primary,d.currentTarget.style.color=s.primaryText||"white"},onMouseLeave:d=>{d.currentTarget.style.backgroundColor="transparent",d.currentTarget.style.color=s.primary},onClick:d=>{d.stopPropagation(),l("submissions")},children:[o.jsx("span",{className:"text-left",children:"Submit Request"}),o.jsx(Ao,{className:"w-4 h-4 ml-2"})]})})]})})]}),o.jsxs("div",{className:"relative",children:[o.jsx("div",{className:"absolute inset-2 rounded-2xl overflow-hidden",children:o.jsx("div",{className:"absolute inset-0 blur-xl opacity-0 transition-opacity duration-300",style:{background:`linear-gradient(135deg, ${s.secondary||s.primary}, ${s.accent||s.primary})`,opacity:i==="merch"?.3:0}})}),o.jsx(se,{className:"relative group cursor-pointer transition-all duration-300 hover:scale-105 hover:shadow-2xl border-2 p-8 flex flex-col h-full enhanced-glow feature-container shadow-none",style:{backgroundColor:s.background,borderColor:s.primary,borderWidth:"2px",borderStyle:"solid",transform:i==="merch"?"scale(1.05)":"scale(1)",boxShadow:"none"},onClick:()=>l("shop"),onMouseEnter:()=>a("merch"),onMouseLeave:()=>a(null),children:o.jsxs(oe,{className:"p-0 flex flex-col h-full",children:[o.jsx("div",{className:"w-16 h-16 rounded-xl flex items-center justify-center mb-6 shadow-lg",style:{backgroundColor:s.primary},children:o.jsx(gy,{className:"text-white h-8 w-8"})}),o.jsx("h3",{className:"font-black text-2xl mb-4 h-16 flex items-center text-left",style:{color:s.text},children:"Official Merch"}),o.jsx("p",{className:"font-semibold mb-6 text-lg leading-relaxed flex-grow text-left",style:{color:s.textMuted},children:"Show your metal pride with official Spandex Salvation Radio merchandise and apparel."}),o.jsx("div",{className:"flex justify-start",children:o.jsxs(Z,{className:"font-bold text-lg px-6 py-3 rounded-xl transition-all duration-300 hover:scale-105 border-0 flex items-center focus:outline-none focus:ring-0",style:{color:s.primary,backgroundColor:"transparent",border:"none"},onMouseEnter:d=>{d.currentTarget.style.backgroundColor=s.primary,d.currentTarget.style.color=s.primaryText||"white"},onMouseLeave:d=>{d.currentTarget.style.backgroundColor="transparent",d.currentTarget.style.color=s.primary},onClick:d=>{d.stopPropagation(),l("merch")},children:[o.jsx("span",{className:"text-left",children:"Shop Now"}),o.jsx(gy,{className:"w-4 h-4 ml-2"})]})})]})})]})]})]})})}function V1(){const[r,e]=p.useState(0),[t,n]=p.useState("none"),[s,i]=p.useState(!1),a=p.useRef(0),l=p.useRef(0),u=p.useRef(),d=p.useRef(),h=p.useRef(!1),m=p.useCallback(()=>{h.current||(h.current=!0,d.current=requestAnimationFrame(()=>{const g=window.scrollY,x=Date.now(),S=x-l.current,b=g-a.current;if(S>0){const v=Math.abs(b)/S;Math.abs(v-r)>.1&&e(v),b>0?n("down"):b<0?n("up"):n("none"),i(!0),u.current&&clearTimeout(u.current),u.current=setTimeout(()=>{i(!1),e(0),n("none")},100)}a.current=g,l.current=x,h.current=!1}))},[r]);return p.useEffect(()=>(a.current=window.scrollY,l.current=Date.now(),window.addEventListener("scroll",m,{passive:!0}),()=>{window.removeEventListener("scroll",m),u.current&&clearTimeout(u.current),d.current&&cancelAnimationFrame(d.current)}),[m]),{velocity:r,direction:t,isScrolling:s}}function DO(r,e,t=150,n){let a=r;if(e>1){const l=Math.min(e/1,3);a=r*(.3+.7/l)}else e>.2,a=r;return a=Math.max(a,t),Math.round(a)}function F1({threshold:r=.1,rootMargin:e="0px"}={}){const t=p.useRef(null),[n,s]=p.useState(!1),i=p.useCallback(a=>{const[l]=a;l.isIntersecting&&(s(!0),t.current&&l.target.remove())},[]);return p.useEffect(()=>{const a=new IntersectionObserver(i,{threshold:r,rootMargin:e});return t.current&&a.observe(t.current),()=>{t.current&&a.unobserve(t.current)}},[r,e,i]),{ref:t,isVisible:n}}function OO(){const{velocity:r}=V1(),{ref:e}=F1({threshold:.1}),{currentTheme:t,isDarkMode:n,colors:s}=ue(),i=p.useMemo(()=>Math.min(Math.abs(r)/1e3,1),[r]),a=p.useMemo(()=>i*20,[i]),l=p.useMemo(()=>({...{background:n?"rgba(0, 0, 0, 0.8)":"rgba(255, 255, 255, 0.9)",color:n?"#ffffff":"#000000",borderColor:n?"rgba(255, 255, 255, 0.2)":"rgba(0, 0, 0, 0.2)"},accentColor:s.accent}),[n,s.accent]),u=p.useMemo(()=>[{title:"About Spandex Salvation Radio",content:"Your ultimate destination for the heaviest metal, hardest rock, and most intense music from around the world. We're not just a radio station - we're a movement, a community, and a way of life for metalheads everywhere."},{title:"What We Do",content:"We broadcast 24/7, bringing you the best in metal, rock, punk, and alternative music. From classic heavy metal to modern deathcore, from underground black metal to mainstream rock anthems - we've got it all."},{title:"Our Mission",content:"To unite metalheads worldwide through the power of music, to discover and promote emerging artists, and to keep the spirit of metal alive and thriving for generations to come."}],[]),d=p.useCallback((h,m)=>o.jsxs("div",{className:"mb-8 p-6 rounded-lg border backdrop-blur-sm transition-all duration-300 hover:scale-105",style:{background:l.background,color:l.color,borderColor:l.borderColor,transform:`translateY(${a*(m+1)}px)`},children:[o.jsx("h3",{className:"text-2xl font-bold mb-4",style:{color:l.accentColor},children:h.title}),o.jsx("p",{className:"text-lg leading-relaxed",children:h.content})]},h.title),[l,a]);return o.jsx("section",{ref:e,className:"py-16 px-4 min-h-screen flex items-center justify-center",style:{background:`linear-gradient(135deg, ${l.background}, ${l.background}dd)`,transform:`translateY(${a}px)`},children:o.jsxs("div",{className:"max-w-4xl mx-auto text-center",children:[o.jsx("h2",{className:"text-5xl md:text-7xl font-bold mb-8",style:{color:l.accentColor},children:"About Us"}),o.jsx("div",{className:"space-y-6",children:u.map((h,m)=>d(h,m))}),o.jsxs("div",{className:"mt-12 p-8 rounded-xl border backdrop-blur-md transition-all duration-500 hover:scale-105",style:{background:l.background,borderColor:l.borderColor,transform:`translateY(${a*2}px)`},children:[o.jsx("p",{className:"text-xl font-semibold mb-4",style:{color:l.accentColor},children:"Join the Metal Revolution"}),o.jsx("p",{className:"text-lg",children:"Whether you're a lifelong metalhead or just discovering the genre, Spandex Salvation Radio is your gateway to the most intense, powerful, and authentic metal music experience."})]})]})})}function LO(){const{getColors:r,currentTheme:e}=ue(),t=r(),{setCurrentTrack:n}=Vc(),[s,i]=p.useState(null),[a,l]=p.useState(null),[u,d]=p.useState(null),h=[{id:1,title:"Morning Metal",host:"DJ Metalhead",dayOfWeek:"Monday",time:"9:00 AM",duration:120,description:"Start your week with the best metal hits",isActive:!0},{id:2,title:"Thrash Tuesday",host:"DJ Thrash",dayOfWeek:"Tuesday",time:"7:00 PM",duration:180,description:"Pure thrash metal madness",isActive:!0},{id:3,title:"Death Metal Wednesday",host:"DJ Death",dayOfWeek:"Wednesday",time:"8:00 PM",duration:150,description:"The heaviest death metal around",isActive:!0}],m=[{id:1,title:"Classic Metal Hour",host:"DJ Classic",date:new Date,duration:60,description:"The best classic metal tracks",audioUrl:"/audio/classic-metal-hour.mp3"}],g=N=>{const P=new Date,F=[],U=P.getDay(),A=["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"];for(let w=0;w<7;w++){const C=(U+w)%7,j=A[C],_=(N||[]).filter(M=>M.dayOfWeek===j);if(w===0){const M=P.getHours()*60+P.getMinutes(),I=(_||[]).filter(X=>{const[le,he]=X.time.split(" "),[ee,R]=le.split(":").map(Number);let z=ee*60+R;return he==="PM"&&ee!==12?z+=720:he==="AM"&&ee===12&&(z=R),z>M});I.sort((X,le)=>{const he=x(X.time),ee=x(le.time);return he-ee}),F.push(...I)}else{const M=(_||[]).sort((I,X)=>{const le=x(I.time),he=x(X.time);return le-he});F.push(...M)}}return F},x=N=>{const[P,F]=N.split(" "),[U,A]=P.split(":").map(Number);let w=U*60+A;return F==="PM"&&U!==12?w+=720:F==="AM"&&U===12&&(w=A),w},S=g(h),b=N=>new Date(N).toLocaleDateString("en-US",{weekday:"long",month:"long",day:"numeric",year:"numeric"}),v=(N,P)=>{const F=new Date(N).toLocaleDateString("en-US",{month:"long",day:"numeric",year:"numeric"});if(P){const U=Math.floor(P/60),A=P%60;return U===0?`${F}, ${A} min`:A===0?`${F}, ${U} hr`:`${F}, ${U} hr ${A} min`}return F},E=N=>{try{const[P,F]=N.split(":").map(Number),U=new Date;return U.setHours(P,F||0,0,0),U.toLocaleTimeString("en-US",{hour:"numeric",minute:"2-digit",hour12:!0,timeZone:Intl.DateTimeFormat().resolvedOptions().timeZone})}catch{return N}},T=N=>{i(N);const P=`${N.title} - ${b(N.date)}`;n({title:P,artist:N.host||"Spandex Salvation Radio",album:"Past Show Archive",artwork:""})};return o.jsxs("section",{id:"schedule",className:"py-20 transition-colors duration-300",style:{backgroundColor:t.background},children:[o.jsxs("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8",children:[o.jsxs("div",{className:"text-center mb-16",children:[o.jsx("h2",{className:"font-orbitron font-black text-3xl md:text-4xl mb-4",style:{color:e==="light-mode"?"#000000":t.text},children:"SHOW SCHEDULE"}),o.jsx("p",{className:"text-lg font-semibold",style:{color:t.textMuted},children:"Catch your favorite metal shows and discover new content throughout the week."})]}),o.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-8",children:[o.jsxs("div",{children:[o.jsx("h3",{className:"font-black text-xl mb-6 text-center",style:{color:"var(--color-primary)"},children:"This Week's Lineup"}),o.jsx("div",{className:"space-y-4",children:(S||[]).map(N=>o.jsxs("div",{className:"relative",children:[o.jsx("div",{className:"absolute inset-2 rounded-2xl overflow-hidden",children:o.jsx("div",{className:"absolute inset-0 blur-xl opacity-0 transition-opacity duration-300",style:{background:`linear-gradient(135deg, ${t.primary}, ${t.secondary||t.primary})`,opacity:u===`weekly-${N.id}`?.3:0}})}),o.jsx(se,{className:"relative group cursor-pointer transition-all duration-300 border-2 p-4 enhanced-glow show-container shadow-none",style:{backgroundColor:t.background,borderColor:t.primary,height:"160px",transform:u===`weekly-${N.id}`?"scale(1.05)":"scale(1)",boxShadow:"none"},onClick:()=>l(N),onMouseEnter:()=>d(`weekly-${N.id}`),onMouseLeave:()=>d(null),children:o.jsxs(oe,{className:"p-0",style:{height:"100%",display:"flex",flexDirection:"column"},children:[o.jsxs("div",{className:"text-center mb-2",children:[o.jsx("h4",{className:"font-black text-lg",children:N.title}),o.jsxs("p",{className:"text-gray-500 text-sm font-semibold mt-1",children:["Hosted by: ",N.host]})]}),o.jsx("p",{className:"text-gray-400 text-sm font-semibold mb-1 text-center flex-1",children:N.description}),o.jsxs("div",{className:"flex items-center justify-center space-x-2",style:{marginTop:"auto",paddingTop:"8px"},children:[o.jsx(os,{className:"text-gray-500 h-3 w-3"}),o.jsxs("span",{className:"text-gray-500 text-xs font-bold",children:[N.dayOfWeek," at ",E(N.time)]})]})]})})]},N.id))})]}),((m==null?void 0:m.length)||0)>0&&o.jsxs("div",{children:[o.jsx("h3",{className:"font-black text-xl mb-6 text-center",style:{color:t.primary},children:"Past Shows"}),o.jsx("div",{className:"space-y-4",children:(m||[]).slice(0,3).map(N=>o.jsxs("div",{className:"relative",children:[o.jsx("div",{className:"absolute inset-2 rounded-2xl overflow-hidden",children:o.jsx("div",{className:"absolute inset-0 blur-xl opacity-0 transition-opacity duration-300",style:{background:`linear-gradient(135deg, ${t.secondary||t.primary}, ${t.accent||t.primary})`,opacity:u===`past-${N.id}`?.3:0}})}),o.jsx(se,{className:"relative group cursor-pointer transition-all duration-300 border-2 p-4 enhanced-glow show-container shadow-none",style:{backgroundColor:t.background,borderColor:t.primary,height:"160px",transform:u===`past-${N.id}`?"scale(1.05)":"scale(1)",boxShadow:"none"},onClick:()=>i(N),onMouseEnter:()=>d(`past-${N.id}`),onMouseLeave:()=>d(null),children:o.jsxs(oe,{className:"p-0",style:{height:"100%",display:"flex",flexDirection:"row",alignItems:"center"},children:[o.jsxs("div",{style:{flex:"1",display:"flex",flexDirection:"column",height:"100%",justifyContent:"space-between"},children:[o.jsxs("div",{className:"text-center mb-2",children:[o.jsx("h4",{className:"font-black text-lg",style:{color:t.text},children:N.title}),o.jsxs("p",{className:"text-gray-500 text-sm font-semibold mt-1",children:["Hosted by: ",N.host||"Spandex Salvation Radio"]})]}),o.jsx("p",{className:"text-gray-400 text-sm font-semibold text-center flex-1 flex items-center justify-center",children:N.description||"Past episode archive"}),o.jsxs("div",{className:"flex items-center justify-center space-x-2",style:{marginTop:"auto",paddingTop:"8px"},children:[o.jsx(os,{className:"text-gray-500 h-3 w-3"}),o.jsx("span",{className:"text-gray-500 text-xs font-bold",children:v(N.date,N.duration||0)})]})]}),o.jsx("div",{style:{display:"flex",alignItems:"center",paddingLeft:"16px"},children:o.jsx(Z,{className:"rounded-full transition-all duration-300 hover:scale-110 focus:outline-none focus:ring-0",style:{backgroundColor:t.primary,color:"white",border:"none",width:"48px",height:"48px",minWidth:"48px",maxWidth:"48px",display:"flex",alignItems:"center",justifyContent:"center",padding:"0"},onMouseEnter:P=>{P.currentTarget.style.backgroundColor=t.secondary||t.primary,P.currentTarget.style.transform="scale(1.1)"},onMouseLeave:P=>{P.currentTarget.style.backgroundColor=t.primary,P.currentTarget.style.transform="scale(1)"},onClick:P=>{P.stopPropagation(),T(N)},children:o.jsx(WM,{className:"h-5 w-5",style:{strokeLinecap:"round",strokeLinejoin:"round"},fill:"currentColor"})})})]})})]},N.id))})]})]}),o.jsx("div",{className:"mt-12 flex justify-center w-full",children:o.jsx(Z,{className:"px-6 py-3 rounded-full font-bold transition-all duration-300 border-0 focus:outline-none focus:ring-0",style:{backgroundColor:t.primary,color:t.primaryText||"white",width:"25%",minWidth:"200px",maxWidth:"300px"},onMouseEnter:N=>{N.currentTarget.style.backgroundColor=t.primaryDark||t.primary,N.currentTarget.style.transform="scale(1.05)"},onMouseLeave:N=>{N.currentTarget.style.backgroundColor=t.primary,N.currentTarget.style.transform="scale(1)"},children:"VIEW ALL ARCHIVES"})})]}),a&&o.jsx("div",{className:"fixed inset-0 bg-black/80 backdrop-blur-md flex items-center justify-center z-50 p-4",onClick:()=>l(null),style:{display:"flex",alignItems:"center",justifyContent:"center",minHeight:"100vh",width:"100vw"},children:o.jsxs("div",{className:"bg-background/95 backdrop-blur-sm border-2 rounded-xl p-8 max-w-md w-full relative show-popup-content",style:{borderColor:t.primary,backgroundColor:t.background,margin:"auto",maxHeight:"90vh",overflow:"auto"},onClick:N=>N.stopPropagation(),children:[o.jsx("button",{onClick:()=>l(null),className:"absolute top-4 right-4 p-2 rounded-full transition-all duration-200 hover:scale-110 flex items-center justify-center focus:outline-none focus:ring-0",style:{color:t.primary,backgroundColor:`${t.primary}20`,width:"40px",height:"40px"},onMouseEnter:N=>{N.currentTarget.style.backgroundColor=t.primary,N.currentTarget.style.color="white"},onMouseLeave:N=>{N.currentTarget.style.backgroundColor=`${t.primary}20`,N.currentTarget.style.color=t.primary},title:"Close show details","aria-label":"Close show details",children:o.jsx(Un,{className:"h-5 w-5"})}),o.jsxs("div",{className:"text-center space-y-4",children:[o.jsx("h2",{className:"font-black text-2xl",style:{color:t.text},children:a.title}),o.jsxs("p",{className:"font-semibold text-base",style:{color:t.text},children:["Hosted by: ",a.host]}),o.jsxs("div",{className:"flex items-center justify-center space-x-2",children:[o.jsx(os,{className:"h-4 w-4",style:{color:t.primary}}),o.jsxs("span",{className:"text-sm font-bold",style:{color:t.text},children:[a.dayOfWeek," at ",E(a.time)]})]}),o.jsx("p",{className:"text-gray-400 text-sm font-semibold leading-relaxed",children:a.description})]})]})}),s&&o.jsx("div",{className:"fixed inset-0 bg-black/80 backdrop-blur-md flex items-center justify-center z-50 p-4",onClick:()=>i(null),style:{display:"flex",alignItems:"center",justifyContent:"center",minHeight:"100vh",width:"100vw"},children:o.jsxs("div",{className:"bg-background/95 backdrop-blur-sm border-2 rounded-xl p-8 max-w-md w-full relative show-popup-content",style:{borderColor:t.primary,backgroundColor:t.background,margin:"auto",maxHeight:"90vh",overflow:"auto"},onClick:N=>N.stopPropagation(),children:[o.jsx("button",{onClick:()=>i(null),className:"absolute top-4 right-4 p-2 rounded-full transition-all duration-200 hover:scale-110 flex items-center justify-center focus:outline-none focus:ring-0",style:{color:t.primary,backgroundColor:`${t.primary}20`,width:"40px",height:"40px"},onMouseEnter:N=>{N.currentTarget.style.backgroundColor=t.primary,N.currentTarget.style.color="white"},onMouseLeave:N=>{N.currentTarget.style.backgroundColor=`${t.primary}20`,N.currentTarget.style.color=t.primary},title:"Close show details","aria-label":"Close show details",children:o.jsx(Un,{className:"h-5 w-5"})}),o.jsxs("div",{className:"text-center space-y-4",children:[o.jsx("h2",{className:"font-black text-2xl",style:{color:t.text},children:s.title}),o.jsxs("p",{className:"font-semibold text-base",style:{color:t.text},children:["Hosted by: ",s.host]}),o.jsxs("div",{className:"flex items-center justify-center space-x-2",children:[o.jsx(os,{className:"h-4 w-4",style:{color:t.primary}}),o.jsx("span",{className:"text-sm font-bold",style:{color:t.text},children:b(s.date)})]}),o.jsxs("div",{className:"flex items-center justify-center space-x-2",children:[o.jsx(e_,{className:"h-4 w-4",style:{color:t.primary}}),o.jsxs("span",{className:"text-sm font-bold",style:{color:t.text},children:[s.duration," minutes"]})]}),o.jsx("p",{className:"text-gray-400 text-sm font-semibold leading-relaxed",children:s.description})]})]})})]})}const Kf=p.forwardRef(({className:r,...e},t)=>o.jsx("textarea",{className:te("flex min-h-[80px] w-full rounded-md border border-input bg-background px-3 py-2 text-base placeholder:text-muted-foreground disabled:cursor-not-allowed disabled:opacity-50 md:text-sm",r),ref:t,...e}));Kf.displayName="Textarea";function U1(r){const e=p.useRef({value:r,previous:r});return p.useMemo(()=>(e.current.value!==r&&(e.current.previous=e.current.value,e.current.value=r),e.current.previous),[r])}var Wc="Checkbox",[VO,n6]=$n(Wc),[FO,Qf]=VO(Wc);function UO(r){const{__scopeCheckbox:e,checked:t,children:n,defaultChecked:s,disabled:i,form:a,name:l,onCheckedChange:u,required:d,value:h="on",internal_do_not_use_render:m}=r,[g,x]=Do({prop:t,defaultProp:s??!1,onChange:u,caller:Wc}),[S,b]=p.useState(null),[v,E]=p.useState(null),T=p.useRef(!1),N=S?!!a||!!S.closest("form"):!0,P={checked:g,disabled:i,setChecked:x,control:S,setControl:b,name:l,form:a,value:h,hasConsumerStoppedPropagationRef:T,required:d,defaultChecked:Sn(s)?!1:s,isFormControl:N,bubbleInput:v,setBubbleInput:E};return o.jsx(FO,{scope:e,...P,children:$O(m)?m(P):n})}var $1="CheckboxTrigger",B1=p.forwardRef(({__scopeCheckbox:r,onKeyDown:e,onClick:t,...n},s)=>{const{control:i,value:a,disabled:l,checked:u,required:d,setControl:h,setChecked:m,hasConsumerStoppedPropagationRef:g,isFormControl:x,bubbleInput:S}=Qf($1,r),b=at(s,h),v=p.useRef(u);return p.useEffect(()=>{const E=i==null?void 0:i.form;if(E){const T=()=>m(v.current);return E.addEventListener("reset",T),()=>E.removeEventListener("reset",T)}},[i,m]),o.jsx(De.button,{type:"button",role:"checkbox","aria-checked":Sn(u)?"mixed":u,"aria-required":d,"data-state":G1(u),"data-disabled":l?"":void 0,disabled:l,value:a,...n,ref:b,onKeyDown:_e(e,E=>{E.key==="Enter"&&E.preventDefault()}),onClick:_e(t,E=>{m(T=>Sn(T)?!0:!T),S&&x&&(g.current=E.isPropagationStopped(),g.current||E.stopPropagation())})})});B1.displayName=$1;var Yf=p.forwardRef((r,e)=>{const{__scopeCheckbox:t,name:n,checked:s,defaultChecked:i,required:a,disabled:l,value:u,onCheckedChange:d,form:h,...m}=r;return o.jsx(UO,{__scopeCheckbox:t,checked:s,defaultChecked:i,disabled:l,required:a,onCheckedChange:d,name:n,form:h,value:u,internal_do_not_use_render:({isFormControl:g})=>o.jsxs(o.Fragment,{children:[o.jsx(B1,{...m,ref:e,__scopeCheckbox:t}),g&&o.jsx(W1,{__scopeCheckbox:t})]})})});Yf.displayName=Wc;var z1="CheckboxIndicator",q1=p.forwardRef((r,e)=>{const{__scopeCheckbox:t,forceMount:n,...s}=r,i=Qf(z1,t);return o.jsx(kr,{present:n||Sn(i.checked)||i.checked===!0,children:o.jsx(De.span,{"data-state":G1(i.checked),"data-disabled":i.disabled?"":void 0,...s,ref:e,style:{pointerEvents:"none",...r.style}})})});q1.displayName=z1;var H1="CheckboxBubbleInput",W1=p.forwardRef(({__scopeCheckbox:r,...e},t)=>{const{control:n,hasConsumerStoppedPropagationRef:s,checked:i,defaultChecked:a,required:l,disabled:u,name:d,value:h,form:m,bubbleInput:g,setBubbleInput:x}=Qf(H1,r),S=at(t,x),b=U1(i),v=mx(n);p.useEffect(()=>{const T=g;if(!T)return;const N=window.HTMLInputElement.prototype,F=Object.getOwnPropertyDescriptor(N,"checked").set,U=!s.current;if(b!==i&&F){const A=new Event("click",{bubbles:U});T.indeterminate=Sn(i),F.call(T,Sn(i)?!1:i),T.dispatchEvent(A)}},[g,b,i,s]);const E=p.useRef(Sn(i)?!1:i);return o.jsx(De.input,{type:"checkbox","aria-hidden":!0,defaultChecked:a??E.current,required:l,disabled:u,name:d,value:h,form:m,...e,tabIndex:-1,ref:S,style:{...e.style,...v,position:"absolute",pointerEvents:"none",opacity:0,margin:0,transform:"translateX(-100%)"}})});W1.displayName=H1;function $O(r){return typeof r=="function"}function Sn(r){return r==="indeterminate"}function G1(r){return Sn(r)?"indeterminate":r?"checked":"unchecked"}const K1=p.forwardRef(({className:r,...e},t)=>o.jsx(Yf,{ref:t,className:te("peer h-4 w-4 shrink-0 rounded-sm border border-primary disabled:cursor-not-allowed disabled:opacity-50 data-[state=checked]:bg-primary data-[state=checked]:text-primary-foreground",r),...e,children:o.jsx(q1,{className:te("flex items-center justify-center text-current"),children:o.jsx(pa,{className:"h-4 w-4"})})}));K1.displayName=Yf.displayName;function BO(){const[r,e]=p.useState({name:"",email:"",songTitle:"",artist:"",genre:"",message:"",status:"pending"}),[t,n]=p.useState(!1),{toast:s}=Sr(),i=Ac(),{user:a,isAuthenticated:l}=Ht(),{getColors:u,currentTheme:d}=ue(),h=u(),{data:m=[]}=Ri({queryKey:["/api/submissions"]}),g=Gs({mutationFn:async N=>{if(!l){window.location.href="/#/login";return}if(!T){E(!0);return}return(await Sw("POST","/api/submissions",N)).json()},onSuccess:()=>{s({title:"Submission Successful!",description:"Your song request has been submitted for review."}),e({name:"",email:"",songTitle:"",artist:"",genre:"",message:"",status:"pending"}),n(!1),i.invalidateQueries({queryKey:["/api/submissions"]})},onError:()=>{s({title:"Submission Failed",description:"Please check your information and try again.",variant:"destructive"})}}),x=N=>{if(N.preventDefault(),!t){s({title:"Terms Required",description:"Please agree to the terms and conditions.",variant:"destructive"});return}g.mutate(r)},S=(N,P)=>{e(F=>({...F,[N]:P}))},b=N=>new Date(N).toLocaleDateString("en-US",{month:"short",day:"numeric"}),[v,E]=p.useState(!1),T=(a==null?void 0:a.stripeSubscriptionId)||!1;return o.jsx("section",{id:"submissions",className:"py-20 transition-colors duration-300",style:{backgroundColor:h.background},children:o.jsxs("div",{className:"max-w-4xl mx-auto px-4 sm:px-6 lg:px-8",children:[o.jsxs("div",{className:"text-center mb-12",children:[o.jsx("h2",{className:"font-orbitron font-bold text-3xl md:text-4xl mb-4",style:{color:d==="light-mode"?"#000000":h.text},children:"SUBMIT YOUR REQUESTS"}),o.jsx("p",{className:"text-lg",style:{color:h.textMuted},children:"Got a metal track that needs to be heard? Submit your requests and help shape our playlist."})]}),!l||!T?o.jsx("div",{className:"mt-6",children:o.jsxs("div",{className:"p-6 rounded-lg text-center transition-all duration-300 animate-in fade-in slide-in-from-top-4",style:{backgroundColor:`${h.primary}25`,border:"none"},children:[o.jsxs("div",{className:"flex items-center justify-center gap-2 mb-4",style:{color:h.primary},children:[o.jsx(dr,{className:"h-5 w-5"}),o.jsx("span",{className:"font-semibold",children:"Premium Feature - Paid Subscription Required"})]}),o.jsx("p",{className:"mb-6",style:{color:h.textMuted},children:"Song submissions are available exclusively to paid subscribers. Sign in and upgrade to submit your favorite tracks."}),o.jsxs("div",{className:"flex gap-4 justify-center",children:[o.jsx(Z,{onClick:()=>{const N=new CustomEvent("openAuthModal",{detail:{mode:"login"}});window.dispatchEvent(N)},className:"px-6 py-3 rounded-full font-semibold transition-all duration-300 border-0",style:{backgroundColor:h.primary,color:h.primaryText||"white"},onMouseEnter:N=>{N.currentTarget.style.backgroundColor=h.primaryDark||h.primary,N.currentTarget.style.transform="scale(1.05)"},onMouseLeave:N=>{N.currentTarget.style.backgroundColor=h.primary,N.currentTarget.style.transform="scale(1)"},children:"Login"}),o.jsx(Z,{onClick:()=>{var N;return(N=document.getElementById("subscribe"))==null?void 0:N.scrollIntoView({behavior:"smooth"})},variant:"outline",className:"px-6 py-3 rounded-full font-semibold transition-all duration-300",style:{borderColor:h.primary,color:h.primary,backgroundColor:"transparent"},onMouseEnter:N=>{N.currentTarget.style.backgroundColor=`${h.primary}10`,N.currentTarget.style.transform="scale(1.05)"},onMouseLeave:N=>{N.currentTarget.style.backgroundColor="transparent",N.currentTarget.style.transform="scale(1)"},children:"View Subscriptions"})]})]})}):o.jsx(se,{className:"bg-dark-surface border-dark-border mb-12",children:o.jsx(oe,{className:"p-8",children:o.jsxs("form",{onSubmit:x,className:"space-y-6",children:[o.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[o.jsxs("div",{children:[o.jsx(Re,{htmlFor:"songTitle",className:"text-gray-300 font-semibold",children:"Song Title *"}),o.jsx($e,{id:"songTitle",value:r.songTitle,onChange:N=>S("songTitle",N.target.value),placeholder:"Enter song title",required:!0,className:"bg-dark-bg border-dark-border text-white placeholder-gray-500 focus:border-primary"})]}),o.jsxs("div",{children:[o.jsx(Re,{htmlFor:"artist",className:"text-gray-300 font-semibold",children:"Artist/Band *"}),o.jsx($e,{id:"artist",value:r.artist,onChange:N=>S("artist",N.target.value),placeholder:"Enter artist name",required:!0,className:"bg-dark-bg border-dark-border text-white placeholder-gray-500 focus:border-primary"})]})]}),o.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[o.jsxs("div",{children:[o.jsx(Re,{htmlFor:"name",className:"text-gray-300 font-semibold",children:"Your Name"}),o.jsx($e,{id:"name",value:r.name,onChange:N=>S("name",N.target.value),placeholder:"Enter your name",required:!0,className:"bg-dark-bg border-dark-border text-white placeholder-gray-400/60 focus:border-primary"})]}),o.jsxs("div",{children:[o.jsx(Re,{htmlFor:"email",className:"text-gray-300 font-semibold",children:"Your Email"}),o.jsx($e,{id:"email",type:"email",value:r.email,onChange:N=>S("email",N.target.value),placeholder:"Enter your email",required:!0,className:"bg-dark-bg border-dark-border text-white placeholder-gray-400/60 focus:border-primary"})]})]}),o.jsxs("div",{children:[o.jsx(Re,{htmlFor:"message",className:"text-gray-300 font-semibold",children:"Additional Message"}),o.jsx(Kf,{id:"message",value:r.message||"",onChange:N=>S("message",N.target.value),placeholder:"Tell us why this song rocks or share any additional details...",rows:4,className:"bg-dark-bg border-dark-border text-white placeholder-gray-400/60 focus:border-primary resize-none"})]}),o.jsxs("div",{className:"flex items-center space-x-2",children:[o.jsx(K1,{id:"terms",checked:t,onCheckedChange:N=>n(N===!0),className:"border-dark-border"}),o.jsx(Re,{htmlFor:"terms",className:"text-gray-400 text-sm",children:"I agree that this submission follows metal music guidelines and community standards."})]}),o.jsxs(Z,{type:"submit",disabled:g.isPending,className:"w-full md:w-auto bg-metal-orange hover:bg-orange-600 text-white px-8 py-3 rounded-full font-bold text-lg transition-all duration-300 animate-glow focus:outline-none focus:ring-0",children:[o.jsx(qi,{className:"mr-2 h-4 w-4"}),g.isPending?"SUBMITTING...":"SUBMIT REQUEST"]})]})})}),(m||[]).length>0&&l&&T&&o.jsxs("div",{className:"mt-16",children:[o.jsx("h3",{className:"font-bold text-xl mb-6",style:{color:"var(--color-primary)"},children:"Recent Submissions"}),o.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:(m||[]).slice(0,4).map(N=>o.jsx(se,{className:"bg-dark-surface border-dark-border",children:o.jsxs(oe,{className:"p-4",children:[o.jsxs("div",{className:"flex items-start justify-between mb-2",children:[o.jsxs("div",{children:[o.jsx("h4",{className:"font-semibold",children:N.songTitle}),o.jsx("p",{className:"text-gray-400 text-sm",children:N.artistName})]}),o.jsx("span",{className:`text-xs px-2 py-1 rounded ${N.status==="approved"?"text-metal-orange bg-metal-orange/20":N.status==="rejected"?"text-metal-red bg-metal-red/20":"text-metal-gold bg-metal-gold/20"}`,children:N.status==="approved"?"Approved":N.status==="rejected"?"Rejected":"Pending"})]}),o.jsx("p",{className:"text-gray-500 text-xs",children:N.submitterName?`Submitted by: ${N.submitterName}`:"Anonymous"}),o.jsx("p",{className:"text-gray-500 text-xs",children:N.createdAt?b(N.createdAt):"Recently"})]})},N.id))})]}),v&&o.jsx(Y_,{isEnabled:!0,onToggle:()=>E(!1)})]})})}const zO={"01d":"clear-day.svg","01n":"clear-night.svg","02d":"partly-cloudy-day.svg","02n":"partly-cloudy-night.svg","03d":"cloudy-day.svg","03n":"cloudy-night.svg","04d":"cloudy.svg","04n":"cloudy.svg","09d":"rainy-day.svg","09n":"rainy-night.svg","10d":"rainy.svg","10n":"rainy.svg","11d":"thunder.svg","11n":"thunder.svg","13d":"snowy.svg","13n":"snowy.svg","50d":"fog.svg","50n":"fog.svg"},Q1=()=>{const{isDarkMode:r,colors:e}=ue(),t=p.useRef(null),n=p.useRef(null),[s,i]=p.useState(null),[a,l]=p.useState(!1),[u,d]=p.useState(null),[h,m]=p.useState(!0),[g,x]=p.useState(!1),[S,b]=p.useState(!1),[v,E]=p.useState([]),[T,N]=p.useState(null),[P,F]=p.useState(null);p.useEffect(()=>()=>{a&&(document.body.style.overflow="auto",document.body.style.position="static",document.body.style.width="",document.body.style.height="",document.body.style.top="",document.body.style.left="",delete document.body.dataset.originalOverflow,delete document.body.dataset.originalPosition)},[a]);const U=p.useMemo(()=>({googleMapsApiKey:"AIzaSyCBoEZeDucpm7p9OEDgaUGLzhn5HpItseQ",googleMapsSigningSecret:"",openWeatherApiKey:"bc23ce0746d4fc5c04d1d765589dadc5",googleMapsMapId:"spandex-salvation-radio-map"}),[]),A=p.useCallback(ee=>zO[ee]||"clear-day.svg",[]);p.useCallback(async(ee,R)=>{try{const z=await fetch(`/api/weather?lat=${ee}&lon=${R}`);if(z.ok){const H=await z.json();N(H)}else console.error("Failed to fetch weather data"),N({location:"New York, NY",temperature:72,description:"Partly Cloudy",icon:"02d",humidity:65,windSpeed:8,feelsLike:74})}catch(z){console.error("Error fetching weather:",z),N({location:"New York, NY",temperature:72,description:"Partly Cloudy",icon:"02d",humidity:65,windSpeed:8,feelsLike:74})}},[]);const w=p.useMemo(()=>[{lat:40.7128,lng:-74.006,city:"New York",country:"USA"},{lat:51.5074,lng:-.1278,city:"London",country:"UK"},{lat:35.6762,lng:139.6503,city:"Tokyo",country:"Japan"},{lat:52.52,lng:13.405,city:"Berlin",country:"Germany"},{lat:37.7749,lng:-122.4194,city:"San Francisco",country:"USA"},{lat:-33.8688,lng:151.2093,city:"Sydney",country:"Australia"}],[]),C=p.useCallback((ee,R,z,H=!1)=>{const xe=new google.maps.Marker({position:ee,map:z,title:R,icon:{path:google.maps.SymbolPath.CIRCLE,scale:H?8:6,fillColor:H?"#4285F4":"#ff4444",fillOpacity:.9,strokeColor:H?"#4285F4":"#ffffff",strokeWeight:2},zIndex:H?1e3:1}),ze=new google.maps.Marker({position:ee,map:z,icon:{path:google.maps.SymbolPath.CIRCLE,scale:H?12:10,fillColor:H?"#4285F4":"#ff4444",fillOpacity:.3,strokeColor:H?"#4285F4":"#ff4444",strokeWeight:1},zIndex:H?999:0}),W=new google.maps.InfoWindow({content:`
        <div style="padding: 12px; text-align: center; font-family: Arial, sans-serif; background: ${e.background}; color: ${e.text}; border-radius: 8px; min-width: 200px;">
          <div style="font-weight: bold; margin-bottom: 6px; color: ${e.text}; font-size: 14px;">${R}</div>
          <div style="font-size: 12px; color: ${e.textMuted||e.text};">
            ${H?"📍 Your Location":"🎧 Active Listener"}
          </div>
        </div>
      `});return xe.addListener("click",()=>{W.open(z,xe)}),(()=>{let Ee=H?12:10,ht=.3,ft=!0;const Lt=()=>{ft?(Ee+=.2,ht-=.01,Ee>=(H?20:18)&&(ft=!1)):(Ee-=.2,ht+=.01,Ee<=(H?12:10)&&(ft=!0)),ze.setIcon({path:google.maps.SymbolPath.CIRCLE,scale:Math.max(0,Ee),fillColor:H?"#4285F4":"#ff4444",fillOpacity:Math.max(0,Math.min(1,ht)),strokeColor:H?"#4285F4":"#ff4444",strokeWeight:1}),requestAnimationFrame(Lt)};Lt()})(),{marker:xe,pulse:ze,infoWindow:W}},[e.background,e.text,e.textMuted]),j=p.useCallback(()=>{if(!(!t.current||S||s)){b(!0),console.log("Initializing Google Maps...");try{const ee=new google.maps.Map(t.current,{center:{lat:20,lng:0},zoom:2,mapId:U.googleMapsMapId,disableDefaultUI:!0,zoomControl:!1,streetViewControl:!1,mapTypeControl:!1,fullscreenControl:!1,gestureHandling:"greedy",backgroundColor:r?"#1a1a1a":"#ffffff"}),R=[];if(u){const z=C(u,"Your Location",ee,!0);R.push(z)}w.forEach(z=>{try{const H=C({lat:z.lat,lng:z.lng},`${z.city}, ${z.country}`,ee,!1);R.push(H)}catch(H){console.error("Error creating marker:",H)}}),i(ee),E(R),m(!1),b(!1),console.log("Google Maps initialized successfully"),setTimeout(()=>{ee&&google.maps.event.trigger(ee,"resize")},100)}catch(ee){console.error("Error initializing map:",ee),m(!1),x(!0),b(!1)}}},[U.googleMapsMapId,r,u,w,S,s,C]);p.useEffect(()=>{if(!(U!=null&&U.googleMapsApiKey)||s||S)return;if(window.google&&window.google.maps&&window.google.maps.Map){console.log("Google Maps already loaded, initializing...");const z=setTimeout(()=>{j()},100);return()=>clearTimeout(z)}if(document.querySelector('script[src*="maps.googleapis.com"]')){console.log("Google Maps script already exists, waiting for load...");const z=setTimeout(()=>{window.google&&window.google.maps&&window.google.maps.Map&&!s&&j()},1e3);return()=>clearTimeout(z)}console.log("Loading Google Maps script...");const R=document.createElement("script");return R.src=`https://maps.googleapis.com/maps/api/js?key=${U.googleMapsApiKey}&libraries=places&callback=initMap&loading=async`,R.async=!0,R.defer=!0,window.initMap=()=>{console.log("Google Maps script loaded successfully");const z=setTimeout(()=>{s||j()},200);window.initMapTimeoutId=z},R.onerror=z=>{console.error("Error loading Google Maps script:",z),m(!1),x(!0),b(!1)},R.onload=()=>{console.log("Google Maps script loaded successfully");const z=setTimeout(()=>{window.google&&window.google.maps&&window.google.maps.Map&&!s?j():(console.error("Google Maps API not available after script load"),x(!0),m(!1),b(!1))},500);window.scriptLoadTimeoutId=z},document.head.appendChild(R),()=>{window.initMapTimeoutId&&(clearTimeout(window.initMapTimeoutId),delete window.initMapTimeoutId),window.scriptLoadTimeoutId&&(clearTimeout(window.scriptLoadTimeoutId),delete window.scriptLoadTimeoutId),window.initMap&&delete window.initMap}},[U.googleMapsApiKey,s,S,j]),p.useEffect(()=>()=>{s&&(v.forEach(ee=>{ee.marker.setMap(null),ee.pulse.setMap(null),ee.infoWindow.close()}),i(null),E([])),window.initMapTimeoutId&&(clearTimeout(window.initMapTimeoutId),delete window.initMapTimeoutId),window.scriptLoadTimeoutId&&(clearTimeout(window.scriptLoadTimeoutId),delete window.scriptLoadTimeoutId),window.initMap&&delete window.initMap},[s,v]);const _=p.useCallback(()=>{s&&s.setZoom((s.getZoom()||2)+1)},[s]),M=p.useCallback(()=>{s&&s.setZoom((s.getZoom()||2)-1)},[s]),I=p.useCallback(()=>{s&&u?(s.setCenter(u),s.setZoom(10)):le()},[s,u]),X=p.useCallback(()=>{s&&(s.setCenter({lat:20,lng:0}),s.setZoom(2))},[s]),le=p.useCallback(async()=>{try{console.log("Requesting location permission...");const ee=await new Promise((z,H)=>{navigator.geolocation.getCurrentPosition(z,H,{enableHighAccuracy:!0,timeout:1e4,maximumAge:6e4})}),R={lat:ee.coords.latitude,lng:ee.coords.longitude};if(console.log("User location obtained:",R),d(R),s){console.log("Adding user location marker to existing map...");const z=C(R,"Your Location",s,!0);E(H=>[...H,z])}}catch(ee){console.error("Error getting user location:",ee);const R={lat:40.7128,lng:-74.006};console.log("Setting default location for testing:",R),d(R)}},[s,C]),he=p.useCallback(()=>{if(a){l(!1);const ee=document.body.dataset.originalOverflow||"auto",R=document.body.dataset.originalPosition||"static";document.body.style.overflow=ee,document.body.style.position=R,document.body.style.width="",document.body.style.height="",document.body.style.top="",document.body.style.left="",delete document.body.dataset.originalOverflow,delete document.body.dataset.originalPosition}else{l(!0);const ee=document.body.style.overflow,R=document.body.style.position;document.body.dataset.originalOverflow=ee,document.body.dataset.originalPosition=R,document.body.style.overflow="hidden",document.body.style.position="fixed",document.body.style.width="100%",document.body.style.height="100%",document.body.style.top="0",document.body.style.left="0"}},[a]);return g?o.jsx("div",{className:"w-full h-96 flex items-center justify-center bg-red-50 dark:bg-red-900/20 rounded-xl border border-red-200 dark:border-red-800",children:o.jsxs("div",{className:"text-center",children:[o.jsx("div",{className:"text-red-600 dark:text-red-400 text-lg font-semibold mb-2",children:"Failed to load map"}),o.jsx(Z,{onClick:j,variant:"outline",className:"border-red-300 dark:border-red-700",children:"Try Again"})]})}):o.jsxs(o.Fragment,{children:[!a&&o.jsx("section",{className:"w-full py-8",children:o.jsxs("div",{className:"container mx-auto px-4",children:[o.jsxs("div",{className:"text-center mb-8",children:[o.jsx("h2",{className:`text-4xl md:text-5xl font-bold mb-4 ${r?"text-white":"text-black"} drop-shadow-lg`,children:"Live Interactive Map"}),o.jsx("p",{className:`text-lg ${r?"text-zinc-300":"text-gray-600"} max-w-2xl mx-auto`,children:"Explore our global community of metalheads and see where the music is playing live"})]}),T&&o.jsx("div",{className:"w-full max-w-4xl mx-auto mb-8",children:o.jsx(se,{className:`${r?"bg-zinc-900/50":"bg-white/90"} backdrop-blur-xl ${r?"border-zinc-800/50":"border-gray-200"} shadow-2xl`,children:o.jsx(oe,{className:"p-6",children:o.jsxs("div",{className:"flex items-center justify-center gap-6",children:[o.jsxs("div",{className:"flex items-center gap-3",children:[o.jsx("img",{src:`/animated_weather_icons/${A(T.icon)}`,alt:T.description,className:"w-12 h-12 object-contain"}),o.jsxs("div",{className:"text-center",children:[o.jsxs("div",{className:`text-2xl font-bold ${r?"text-white":"text-black"}`,children:[Math.round(T.temperature),"°F"]}),o.jsx("div",{className:`text-sm ${r?"text-zinc-400":"text-gray-600"}`,children:T.description})]})]}),o.jsxs("div",{className:"text-center",children:[o.jsx("div",{className:`text-lg font-semibold ${r?"text-white":"text-black"}`,children:T.location}),o.jsxs("div",{className:`text-sm ${r?"text-zinc-400":"text-gray-600"}`,children:["Humidity: ",T.humidity,"% | Wind: ",T.windSpeed," mph"]})]})]})})})}),o.jsxs("div",{className:"w-full max-w-4xl mx-auto mb-8 relative",children:[h&&o.jsx("div",{className:"absolute inset-0 z-10 flex items-center justify-center bg-gray-900/50 rounded-xl",children:o.jsxs("div",{className:"text-center",children:[o.jsx(r_,{className:"w-8 h-8 animate-spin text-white mx-auto mb-2"}),o.jsx("div",{className:"text-white text-sm",children:"Loading map..."})]})}),o.jsx("div",{ref:t,className:`w-full ${a?"h-screen":"h-96 md:h-[500px] lg:h-[600px]"} rounded-2xl shadow-2xl border-2 ${r?"border-zinc-800/50":"border-gray-200"} overflow-hidden`,style:{boxShadow:`0 25px 50px -12px ${r?"rgba(0, 0, 0, 0.5)":"rgba(0, 0, 0, 0.25)"}`}}),o.jsx("div",{className:"absolute top-4 left-4 flex flex-col gap-2",children:o.jsx(Z,{onClick:he,size:"sm",variant:"secondary",className:`${r?"bg-zinc-800/80 hover:bg-zinc-700/80":"bg-white/80 hover:bg-white/90"} backdrop-blur-sm border ${r?"border-zinc-700/50":"border-gray-300/50"} shadow-lg`,children:o.jsx($M,{className:"w-4 h-4"})})}),o.jsxs("div",{className:"absolute top-4 right-4 flex flex-col gap-2",children:[o.jsx(Z,{onClick:_,size:"sm",variant:"secondary",className:`${r?"bg-zinc-800/80 hover:bg-zinc-700/80":"bg-white/80 hover:bg-white/90"} backdrop-blur-sm border ${r?"border-zinc-700/50":"border-gray-300/50"} shadow-lg`,children:o.jsx(o5,{className:"w-4 h-4"})}),o.jsx(Z,{onClick:M,size:"sm",variant:"secondary",className:`${r?"bg-zinc-800/80 hover:bg-zinc-700/80":"bg-white/80 hover:bg-white/90"} backdrop-blur-sm border ${r?"border-zinc-700/50":"border-gray-300/50"} shadow-lg`,children:o.jsx(i5,{className:"w-4 h-4"})}),o.jsx(Z,{onClick:I,size:"sm",variant:"secondary",className:`${r?"bg-zinc-800/80 hover:bg-zinc-700/80":"bg-white/80 hover:bg-white/90"} backdrop-blur-sm border ${r?"border-zinc-700/50":"border-gray-300/50"} shadow-lg`,children:o.jsx(Yd,{className:"w-4 h-4"})}),o.jsx(Z,{onClick:X,size:"sm",variant:"secondary",className:`${r?"bg-zinc-800/80 hover:bg-zinc-700/80":"bg-white/80 hover:bg-white/90"} backdrop-blur-sm border ${r?"border-zinc-700/50":"border-gray-300/50"} shadow-lg`,children:o.jsx(QM,{className:"w-4 h-4"})})]}),P==="denied"&&o.jsx("div",{className:"absolute bottom-4 left-4 right-4",children:o.jsx(se,{className:`${r?"bg-zinc-800/90":"bg-white/90"} backdrop-blur-xl border ${r?"border-zinc-700/50":"border-gray-300/50"} shadow-lg`,children:o.jsx(oe,{className:"p-4",children:o.jsxs("div",{className:"flex items-center justify-between",children:[o.jsxs("div",{className:"text-sm",children:[o.jsx("div",{className:`font-medium ${r?"text-white":"text-black"}`,children:"Location access needed"}),o.jsx("div",{className:`text-xs ${r?"text-zinc-400":"text-gray-600"}`,children:"Enable location to see your position on the map"})]}),o.jsx(Z,{onClick:le,size:"sm",variant:"outline",children:"Enable"})]})})})})]})]})}),a&&o.jsxs("div",{className:"fixed inset-0 z-50 bg-black",children:[o.jsx("div",{className:"absolute top-4 right-4 z-10",children:o.jsx(Z,{onClick:he,size:"sm",variant:"secondary",className:"bg-white/80 hover:bg-white/90 backdrop-blur-sm border border-gray-300/50 shadow-lg",children:o.jsx(zM,{className:"w-4 h-4"})})}),o.jsx("div",{ref:n,className:"w-full h-full"})]})]})};function Ey(){const{getColors:r,currentTheme:e}=ue(),t=r(),[n,s]=p.useState([]),[i,a]=p.useState(!0);p.useEffect(()=>{(()=>{const h=[{id:"1",city:"Los Angeles",country:"United States",listeners:1247,coordinates:{lat:34.0522,lng:-118.2437},flag:"🇺🇸",timezone:"America/Los_Angeles",localTime:new Date().toLocaleTimeString("en-US",{timeZone:"America/Los_Angeles"})},{id:"2",city:"London",country:"United Kingdom",listeners:892,coordinates:{lat:51.5074,lng:-.1278},flag:"🇬🇧",timezone:"Europe/London",localTime:new Date().toLocaleTimeString("en-GB",{timeZone:"Europe/London"})},{id:"3",city:"Tokyo",country:"Japan",listeners:634,coordinates:{lat:35.6762,lng:139.6503},flag:"🇯🇵",timezone:"Asia/Tokyo",localTime:new Date().toLocaleTimeString("ja-JP",{timeZone:"Asia/Tokyo"})},{id:"4",city:"Berlin",country:"Germany",listeners:578,coordinates:{lat:52.52,lng:13.405},flag:"🇩🇪",timezone:"Europe/Berlin",localTime:new Date().toLocaleTimeString("de-DE",{timeZone:"Europe/Berlin"})},{id:"5",city:"Sydney",country:"Australia",listeners:423,coordinates:{lat:-33.8688,lng:151.2093},flag:"🇦🇺",timezone:"Australia/Sydney",localTime:new Date().toLocaleTimeString("en-AU",{timeZone:"Australia/Sydney"})},{id:"6",city:"São Paulo",country:"Brazil",listeners:312,coordinates:{lat:-23.5505,lng:-46.6333},flag:"🇧🇷",timezone:"America/Sao_Paulo",localTime:new Date().toLocaleTimeString("pt-BR",{timeZone:"America/Sao_Paulo"})}];setTimeout(()=>{s(h),a(!1)},1e3)})();const d=setInterval(()=>{s(h=>h.map(m=>({...m,localTime:new Date().toLocaleTimeString("en-US",{timeZone:m.timezone})})))},6e4);return()=>clearInterval(d)},[]);const l=n.reduce((u,d)=>u+d.listeners,0);return i?o.jsx("div",{className:"p-6 rounded-xl",style:{backgroundColor:t.cardBackground},children:o.jsxs("div",{className:"animate-pulse",children:[o.jsx("div",{className:"h-6 w-48 mb-4 rounded",style:{backgroundColor:t.border}}),o.jsx("div",{className:"space-y-3",children:[1,2,3,4,5,6].map(u=>o.jsxs("div",{className:"flex items-center space-x-3",children:[o.jsx("div",{className:"h-4 w-4 rounded",style:{backgroundColor:t.border}}),o.jsx("div",{className:"h-4 flex-1 rounded",style:{backgroundColor:t.border}}),o.jsx("div",{className:"h-4 w-16 rounded",style:{backgroundColor:t.border}})]},u))})]})}):o.jsxs("div",{className:"p-8 rounded-xl shadow-lg transition-all duration-300 hover:shadow-xl overflow-hidden",style:{backgroundColor:t.cardBackground,border:"none",minHeight:"600px"},children:[o.jsxs("div",{className:"flex items-center justify-between mb-6",children:[o.jsx("h3",{className:"font-orbitron font-bold text-xl",style:{color:t.text},children:"🌍 ACTIVE LOCATIONS"}),o.jsxs("div",{className:"px-3 py-1 rounded-full text-sm font-semibold flex items-center justify-center",style:{backgroundColor:t.accent,color:t.background},children:[l.toLocaleString()," Live"]})]}),o.jsx("div",{className:"space-y-3 max-h-80 overflow-y-auto px-4 py-2",children:n.map(u=>o.jsxs("div",{className:"flex items-center justify-between p-3 rounded-lg transition-all duration-200 hover:scale-105 relative group",style:{backgroundColor:e==="light-mode"?"rgba(0, 0, 0, 0.02)":"rgba(255, 255, 255, 0.05)",border:"none",transformOrigin:"center",zIndex:1,margin:"2px 0"},children:[o.jsxs("div",{className:"flex items-center space-x-3 min-w-0 flex-1 overflow-hidden",children:[o.jsx("span",{className:"text-2xl flex-shrink-0",children:u.flag}),o.jsxs("div",{className:"min-w-0 flex-1 overflow-hidden",children:[o.jsx("div",{className:"font-semibold text-sm truncate",style:{color:t.text},title:u.city,children:u.city}),o.jsx("div",{className:"text-xs truncate",style:{color:t.textMuted},title:u.country,children:u.country})]})]}),o.jsxs("div",{className:"text-right flex-shrink-0 ml-3 min-w-0",children:[o.jsx("div",{className:"font-bold text-sm truncate",style:{color:t.accent},title:u.listeners.toLocaleString(),children:u.listeners.toLocaleString()}),o.jsx("div",{className:"text-xs truncate",style:{color:t.textMuted},title:u.localTime,children:u.localTime})]})]},u.id))}),o.jsx("div",{className:"mt-4 pt-4 text-center text-xs",style:{color:t.textMuted,borderTop:"none"},children:"Updates every minute • Live data"})]})}function Ny(){const{getColors:r,currentTheme:e}=ue(),t=r(),[n,s]=p.useState([]),[i,a]=p.useState(!0);p.useEffect(()=>{(()=>{const m=[{id:"1",label:"Live Listeners",value:4086,unit:"",icon:"🎧",trend:"up",percentage:12.5,format:"number"},{id:"2",label:"Stream Uptime (days)",value:847,unit:"",icon:"📡",trend:"up",percentage:100,format:"number"},{id:"3",label:"Songs Played Today",value:342,unit:"",icon:"🎸",trend:"up",percentage:8.3,format:"number"},{id:"4",label:"Peak Listeners Today",value:5247,unit:"",icon:"📈",trend:"up",percentage:15.7,format:"number"},{id:"5",label:"Active Countries",value:67,unit:"",icon:"🌍",trend:"stable",percentage:2.1,format:"number"},{id:"6",label:"Avg Session (Mins)",value:47,unit:"",icon:"⏱️",trend:"up",percentage:6.8,format:"time"}];setTimeout(()=>{s(m),a(!1)},800)})();const h=setInterval(()=>{s(m=>m.map(g=>({...g,value:g.id==="1"?Math.floor(Math.random()*500)+3800:g.value,percentage:Math.random()*20-5})))},3e4);return()=>clearInterval(h)},[]);const l=d=>{switch(d.format){case"number":return d.value.toLocaleString();case"time":return`${d.value}`;case"percentage":return`${d.value}%`;default:return d.value.toString()}},u=d=>{switch(d){case"up":return"#10B981";case"down":return"#EF4444";case"stable":return"#6B7280";default:return"#6B7280"}};return i?o.jsx("div",{className:"p-6 rounded-xl",style:{backgroundColor:t.cardBackground},children:o.jsxs("div",{className:"animate-pulse",children:[o.jsx("div",{className:"h-6 w-48 mb-6 rounded",style:{backgroundColor:t.border}}),o.jsx("div",{className:"grid grid-cols-2 gap-4",children:[1,2,3,4,5,6].map(d=>o.jsxs("div",{className:"p-4 rounded-lg",style:{backgroundColor:t.border},children:[o.jsx("div",{className:"h-4 w-3/4 mb-2 rounded",style:{backgroundColor:t.background}}),o.jsx("div",{className:"h-8 w-1/2 mb-2 rounded",style:{backgroundColor:t.background}}),o.jsx("div",{className:"h-3 w-full rounded",style:{backgroundColor:t.background}})]},d))})]})}):o.jsxs("div",{className:"p-8 rounded-xl shadow-lg transition-all duration-300 hover:shadow-xl",style:{backgroundColor:t.cardBackground,border:"none",minHeight:"600px"},children:[o.jsxs("div",{className:"flex items-center justify-between mb-6",children:[o.jsx("h3",{className:"font-orbitron font-bold text-xl",style:{color:t.text},children:"📊 LIVE STATISTICS"}),o.jsxs("div",{className:"flex items-center space-x-2 px-3 py-1 rounded-full",style:{backgroundColor:"#10B981",border:"none"},children:[o.jsx("div",{className:"w-2 h-2 rounded-full animate-pulse flex-shrink-0",style:{backgroundColor:"#ffffff"}}),o.jsx("span",{className:"text-sm font-semibold flex-shrink-0",style:{color:"#ffffff"},children:"LIVE"})]})]}),o.jsx("div",{className:"grid grid-cols-2 gap-4",children:n.map(d=>o.jsxs("div",{className:"p-4 rounded-lg transition-all duration-300 hover:scale-105 hover:shadow-md",style:{backgroundColor:e==="light-mode"?"rgba(0, 0, 0, 0.02)":"rgba(255, 255, 255, 0.05)",border:"none"},children:[o.jsxs("div",{className:"flex items-center justify-between mb-2",children:[o.jsx("span",{className:"text-lg",children:d.icon}),o.jsxs("span",{className:"text-base font-semibold",style:{color:u(d.trend)},children:[Math.abs(d.percentage).toFixed(1),"%"]})]}),o.jsx("div",{className:"text-2xl font-bold mb-1",style:{color:t.text},children:l(d)}),o.jsx("div",{className:"text-sm font-medium",style:{color:t.textMuted},children:d.label}),d.unit&&o.jsx("div",{className:"text-xs mt-1",style:{color:t.accent},children:d.unit})]},d.id))}),o.jsxs("div",{className:"mt-6 text-center",style:{border:"none"},children:[o.jsxs("div",{className:"flex items-center justify-center space-x-2 text-xs",style:{color:t.textMuted},children:[o.jsx("div",{className:"w-2 h-2 rounded-full animate-pulse flex-shrink-0",style:{backgroundColor:"#10B981"}}),o.jsx("span",{className:"leading-none",children:"Real-time data • Updates every 30 seconds"})]}),o.jsx("div",{className:"mt-2 text-xs font-semibold",style:{color:t.accent},children:"🎸 Keep the metal alive! 🎸"})]})]})}function qO(){const{getColors:r,currentTheme:e}=ue(),t=r(),[n,s]=p.useState("stats");return o.jsx("section",{className:"py-16 transition-colors duration-300",style:{backgroundColor:t.background,border:"none"},children:o.jsxs("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8",children:[o.jsxs("div",{className:"text-center mb-12",children:[o.jsx("h2",{className:"font-orbitron font-black text-3xl md:text-4xl mb-4",style:{color:e==="light-mode"?"#000000":t.text},children:"Real-Time Dashboard"}),o.jsx("p",{className:"text-lg font-semibold max-w-2xl mx-auto",style:{color:e==="light-mode"?"rgba(0, 0, 0, 0.7)":t.textMuted},children:"Monitor live listener activity and global engagement across all platforms"})]}),o.jsx("div",{className:"md:hidden mb-6",children:o.jsxs("div",{className:"flex rounded-lg p-1 relative",style:{backgroundColor:t.cardBackground,border:"none"},children:[o.jsx("div",{className:"absolute top-1 bottom-1 rounded-md transition-all duration-300 ease-out",style:{backgroundColor:t.accent,left:n==="stats"?"4px":"calc(50% + 2px)",width:"calc(50% - 4px)",zIndex:1}}),o.jsx("button",{onClick:()=>s("stats"),className:"flex-1 py-2 px-4 rounded-md text-sm font-semibold transition-all duration-200 relative z-10 focus:outline-none focus:ring-0",style:{color:n==="stats"?t.background:t.textMuted,border:"none"},children:"Live Statistics"}),o.jsx("button",{onClick:()=>s("locations"),className:"flex-1 py-2 px-4 rounded-md text-sm font-semibold transition-all duration-200 relative z-10 focus:outline-none focus:ring-0",style:{color:n==="locations"?t.background:t.textMuted,border:"none"},children:"Active Locations"})]})}),o.jsxs("div",{className:"hidden md:grid md:grid-cols-2 gap-8",children:[o.jsx(Ny,{}),o.jsx(Ey,{})]}),o.jsxs("div",{className:"md:hidden",children:[n==="stats"&&o.jsx(Ny,{}),n==="locations"&&o.jsx(Ey,{})]}),o.jsx("div",{className:"mt-16 text-center",children:o.jsxs("div",{className:"inline-flex items-center space-x-2 px-4 py-2 rounded-full",style:{backgroundColor:t.cardBackground,border:"none"},children:[o.jsx("div",{className:"w-2 h-2 rounded-full animate-pulse flex-shrink-0 relative",style:{backgroundColor:"#10B981",top:"0px"}}),o.jsx("span",{className:"text-sm font-semibold leading-none",style:{color:t.text},children:"Real-time data • Updates every 30 seconds"})]})})]})})}function HO(){const[r,e]=p.useState({name:"",email:"",message:""}),[t,n]=p.useState([]),[s,i]=p.useState(!1),[a,l]=p.useState(!1),[u,d]=p.useState(""),{toast:h}=Sr(),{getColors:m,currentTheme:g}=ue(),x=m(),S=Gs({mutationFn:async N=>(await Sw("POST","/api/contacts",N)).json(),onSuccess:()=>{d(r.message),i(!0),e({name:"",email:"",message:""}),n([])},onError:()=>{d(r.message),l(!0)}}),b=N=>{N.preventDefault();const P=[];r.name.trim()||P.push("Name"),r.email.trim()||P.push("Email Address"),r.message.trim()||P.push("Message");const F=/^[^\s@]+@[^\s@]+\.[^\s@]+$/;if(r.email&&!F.test(r.email)&&P.push("Please enter a valid email address"),((P==null?void 0:P.length)||0)>0){n(P);return}n([]),S.mutate(r)},v=()=>{u&&(navigator.clipboard.writeText(u),h({title:"Message Copied",description:"Your message has been copied to clipboard."}))},E=()=>{l(!1),i(!1)},T=(N,P)=>{e(F=>({...F,[N]:P}))};return o.jsx("section",{id:"contact",className:"py-20 transition-colors duration-300",style:{backgroundColor:x.background},children:o.jsxs("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8",children:[o.jsxs("div",{className:"text-center mb-12",children:[o.jsx("h2",{className:"font-orbitron font-black text-3xl md:text-4xl mb-4",style:{color:g==="light-mode"?"#000000":x.text},children:"GET IN TOUCH"}),o.jsx("p",{className:"text-lg font-semibold",style:{color:x.textMuted},children:"Have questions, feedback, or want to get involved? Drop us a line!"})]}),o.jsx("div",{className:"flex justify-center items-center min-h-[500px]",children:o.jsx("div",{className:"w-full max-w-lg",children:o.jsx(se,{className:"transition-all duration-300 mx-auto border-0",style:{backgroundColor:x.card},children:o.jsxs(oe,{className:"p-8",children:[!s&&!a&&o.jsxs(o.Fragment,{children:[o.jsx("h3",{className:"font-black text-xl mb-6 text-center",style:{color:x.primary},children:"Send us a Message"}),((t==null?void 0:t.length)||0)>0&&o.jsxs("div",{className:"mb-4 p-3 bg-red-900/20 border border-red-500 rounded-md",children:[o.jsx("p",{className:"text-red-400 text-sm font-semibold",children:"Please fill out the following required fields:"}),o.jsx("ul",{className:"text-red-300 text-sm mt-1",children:t.map((N,P)=>o.jsxs("li",{children:["• ",N]},P))})]}),o.jsxs("form",{onSubmit:b,className:"space-y-6",children:[o.jsxs("div",{children:[o.jsxs(Re,{htmlFor:"name",className:"font-semibold",style:{color:x.textSecondary},children:["Full Name",t.includes("Name")&&o.jsx("span",{className:"text-red-500",children:"*"})]}),o.jsx($e,{id:"name",value:r.name,onChange:N=>T("name",N.target.value),placeholder:"John Doe",required:!0,className:"transition-colors duration-300 placeholder:text-gray-400 placeholder:opacity-50",style:{backgroundColor:x.surface,border:"none",color:x.text}})]}),o.jsxs("div",{children:[o.jsxs(Re,{htmlFor:"email",className:"font-semibold",style:{color:x.textSecondary},children:["Email Address",t.includes("Email Address")&&o.jsx("span",{className:"text-red-500",children:"*"})]}),o.jsx($e,{id:"email",type:"email",value:r.email,onChange:N=>T("email",N.target.value),placeholder:"john@example.com",required:!0,className:"transition-colors duration-300 placeholder:text-gray-400 placeholder:opacity-50",style:{backgroundColor:x.surface,border:"none",color:x.text}})]}),o.jsxs("div",{children:[o.jsxs(Re,{htmlFor:"contactMessage",className:"font-semibold",style:{color:x.textSecondary},children:["Message",t.includes("Message")&&o.jsx("span",{className:"text-red-500",children:"*"})]}),o.jsx(Kf,{id:"contactMessage",value:r.message,onChange:N=>T("message",N.target.value),placeholder:"Tell us what's on your mind...",rows:5,required:!0,className:"resize-none transition-colors duration-300 placeholder:text-gray-400 placeholder:opacity-50",style:{backgroundColor:x.surface,border:"none",color:x.text}})]}),o.jsxs(Z,{type:"submit",disabled:S.isPending,className:"w-full px-6 py-3 rounded-full font-bold transition-all duration-300 focus:outline-none focus:ring-0",style:{backgroundColor:x.primary,color:x.primaryText||"white"},onMouseEnter:N=>{N.currentTarget.style.backgroundColor=x.primaryDark||x.primary,N.currentTarget.style.transform="scale(1.02)"},onMouseLeave:N=>{N.currentTarget.style.backgroundColor=x.primary,N.currentTarget.style.transform="scale(1)"},children:[o.jsx(qi,{className:"mr-2 h-4 w-4"}),S.isPending?"SENDING...":"SEND MESSAGE"]})]})]}),s&&o.jsxs("div",{className:"text-center animate-in fade-in duration-500",children:[o.jsxs("div",{className:"relative inline-flex items-center justify-center mb-4",children:[o.jsx("div",{className:"absolute w-16 h-16 rounded-full opacity-50",style:{backgroundColor:x.primary}}),o.jsx(pa,{className:"w-8 h-8 text-green-400 relative z-10"})]}),o.jsx("h3",{className:"font-black text-xl mb-2 text-green-400",children:"Message Sent Successfully!"}),o.jsx("p",{className:"text-gray-300 text-sm",children:"We'll get back to you within 24-48 hours."}),o.jsx(Z,{onClick:E,className:"mt-4 px-6 py-2 rounded-full font-bold transition-all duration-300 focus:outline-none focus:ring-0",style:{backgroundColor:x.primary,color:x.primaryText||"white"},children:"Send Another Message"})]}),a&&o.jsxs("div",{className:"text-center animate-in fade-in duration-500",children:[o.jsxs("div",{className:"relative inline-flex items-center justify-center mb-4",children:[o.jsx("div",{className:"absolute w-16 h-16 rounded-full bg-red-600 opacity-50"}),o.jsx(Un,{className:"w-8 h-8 text-red-400 relative z-10"})]}),o.jsx("h3",{className:"font-black text-xl mb-2 text-red-400",children:"Message Failed to Send"}),o.jsx("p",{className:"text-gray-300 text-sm mb-4",children:"Please refresh the site and try again."}),o.jsxs("div",{className:"space-y-3",children:[o.jsxs(Z,{onClick:v,className:"w-full px-6 py-2 rounded-full font-bold transition-all duration-300 bg-gray-600 hover:bg-gray-500 text-white focus:outline-none focus:ring-0",children:[o.jsx(DM,{className:"mr-2 h-4 w-4"}),"Copy Message to Clipboard"]}),o.jsx(Z,{onClick:E,className:"w-full px-6 py-2 rounded-full font-bold transition-all duration-300 focus:outline-none focus:ring-0",style:{backgroundColor:x.primary,color:x.primaryText||"white"},children:"Try Again"})]})]})]})})})})]})})}const WO=[{id:"1",title:"Spandex Salvation Classic Tee",description:"Premium cotton tee with vintage logo design. Perfect for any metal fan.",price:24.99,compareAtPrice:29.99,images:["https://images.unsplash.com/photo-1521572163474-6864f9cf17ab?ixlib=rb-4.0.3&auto=format&fit=crop&w=800&h=800"],variants:[{id:"1-s",title:"Small",price:24.99,available:!0,option1:"S"},{id:"1-m",title:"Medium",price:24.99,available:!0,option1:"M"},{id:"1-l",title:"Large",price:24.99,available:!0,option1:"L"},{id:"1-xl",title:"X-Large",price:24.99,available:!1,option1:"XL"}],tags:["apparel","tee","classic"],rating:4.8,reviewCount:127,inStock:!0,featured:!0},{id:"2",title:"Rebellion Hoodie",description:"Heavy-duty hoodie with embroidered logo. Built for the coldest metal nights.",price:49.99,images:["https://images.unsplash.com/photo-1556821840-3a63f95609a7?ixlib=rb-4.0.3&auto=format&fit=crop&w=800&h=800"],variants:[{id:"2-s",title:"Small",price:49.99,available:!0,option1:"S"},{id:"2-m",title:"Medium",price:49.99,available:!0,option1:"M"},{id:"2-l",title:"Large",price:49.99,available:!0,option1:"L"}],tags:["apparel","hoodie","winter"],rating:4.9,reviewCount:89,inStock:!0},{id:"3",title:"Metal Fuel Coffee Mug",description:"15oz ceramic mug to fuel your metal mornings. Dishwasher safe.",price:19.99,images:["https://images.unsplash.com/photo-1544787219-7f47ccb76574?ixlib=rb-4.0.3&auto=format&fit=crop&w=800&h=800"],variants:[{id:"3-default",title:"Default",price:19.99,available:!0}],tags:["accessories","mug","coffee"],rating:4.6,reviewCount:234,inStock:!0,featured:!0},{id:"4",title:"Limited Edition Vinyl Collection",description:"Exclusive compilation of classic metal hits. Limited to 500 copies.",price:34.99,images:["https://images.unsplash.com/photo-1493225457124-a3eb161ffa5f?ixlib=rb-4.0.3&auto=format&fit=crop&w=800&h=800"],variants:[{id:"4-default",title:"Limited Edition",price:34.99,available:!0}],tags:["music","vinyl","limited"],rating:5,reviewCount:45,inStock:!0,featured:!0}];function GO(){const[r,e]=p.useState([]),[t,n]=p.useState([]),[s,i]=p.useState(null),[a,l]=p.useState(null),[u,d]=p.useState(!0),{toast:h}=Sr(),{getColors:m,currentTheme:g}=ue(),x=m();p.useEffect(()=>{setTimeout(()=>{e(WO),d(!1)},1e3)},[]);const S=(E,T,N=1)=>{const P=t.find(F=>F.variantId===T.id);n(P?t.map(F=>F.variantId===T.id?{...F,quantity:F.quantity+N}:F):[...t,{productId:E.id,variantId:T.id,quantity:N,title:`${E.title} - ${T.title}`,price:T.price,image:E.images[0]}]),h({title:"Added to Cart",description:`${E.title} has been added to your cart.`})},b=()=>t.reduce((E,T)=>E+T.price*T.quantity,0),v=async()=>{const E=`https://spandex-salvation-radio.myshopify.com/cart/${(t||[]).map(T=>`${T.variantId}:${T.quantity}`).join(",")}`;h({title:"Redirecting to Checkout",description:"Taking you to secure Shopify checkout..."}),console.log("Redirecting to:",E)};return u?o.jsx("div",{className:"flex items-center justify-center py-20",children:o.jsx("div",{className:"animate-spin w-8 h-8 border-4 border-primary border-t-transparent rounded-full"})}):o.jsx("section",{id:"merch",className:"py-20 transition-colors duration-300",style:{backgroundColor:x.background},children:o.jsxs("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8",children:[o.jsxs("div",{className:"text-center mb-12",children:[o.jsx("h2",{className:"font-orbitron font-black text-3xl md:text-4xl mb-4",style:{color:g==="light-mode"?"#000000":x.text},children:"OFFICIAL MERCH STORE"}),o.jsx("p",{className:"text-lg font-semibold",style:{color:x.textMuted},children:"Show your metal pride with exclusive Spandex Salvation Radio merchandise."})]}),(t||[]).length>0&&o.jsx("div",{className:"mb-8",children:o.jsx(se,{className:"transition-all duration-300",style:{backgroundColor:g==="light-mode"?"rgba(255, 255, 255, 0.9)":"rgba(30, 30, 30, 0.5)"},children:o.jsx(oe,{className:"p-4",children:o.jsxs("div",{className:"flex items-center justify-between",children:[o.jsxs("div",{className:"flex items-center",children:[o.jsx(Df,{className:"h-5 w-5 mr-2",style:{color:x.primary}}),o.jsxs("span",{className:"font-black",style:{color:g==="light-mode"?"#000000":"#ffffff"},children:[(t||[]).reduce((E,T)=>E+T.quantity,0)," ","items in cart"]})]}),o.jsxs("div",{className:"flex items-center space-x-4",children:[o.jsxs("span",{className:"font-black text-xl text-metal-orange",children:["$",b().toFixed(2)]}),o.jsx(Z,{onClick:v,className:"bg-metal-orange hover:bg-orange-600 text-white px-6 py-2 rounded-full font-bold",children:"Checkout"})]})]})})})}),o.jsxs("div",{className:"mb-12 text-center",children:[o.jsx("h3",{className:"font-black text-xl mb-6 text-center",style:{color:x.primary},children:"Featured Products"}),o.jsx("div",{className:"w-full flex justify-center",children:o.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6 justify-items-center",children:r==null?void 0:r.filter(E=>E.featured).map(E=>o.jsx(KO,{product:E,onAddToCart:(T,N)=>S(E,T,N),onViewDetails:()=>i(E)},E.id))})})]}),s&&o.jsx(QO,{product:s,onClose:()=>i(null),onAddToCart:(E,T)=>S(s,E,T)})]})})}function KO({product:r,onAddToCart:e,onViewDetails:t}){const[n,s]=p.useState(r.variants[0]),{getColors:i,currentTheme:a}=ue(),l=i();return o.jsx(se,{className:"transition-all duration-300 group h-full flex flex-col",style:{backgroundColor:a==="light-mode"?"#ffffff":"rgba(30, 30, 30, 0.5)",border:"none"},children:o.jsxs(oe,{className:"p-4 flex flex-col h-full",children:[o.jsxs("div",{className:"relative mb-4",children:[o.jsx("img",{src:r.images[0],alt:r.title,className:"w-full h-48 object-cover rounded-lg"}),r.featured&&o.jsx(Ke,{className:"absolute top-2 left-2",style:{backgroundColor:l.primary,color:"white"},children:"Featured"}),r.compareAtPrice&&o.jsx(Ke,{className:"absolute top-2 left-2 w-auto",style:{backgroundColor:"#dc2626",color:"white",marginTop:r.featured?"30px":"0"},children:"Sale"}),o.jsxs("div",{className:"absolute inset-0 bg-black/50 opacity-0 group-hover:opacity-100 transition-opacity flex items-center justify-center space-x-2",children:[o.jsx(Z,{size:"sm",variant:"secondary",onClick:t,className:"bg-white/90 text-black hover:bg-white focus:outline-none focus:ring-0",children:o.jsx(t_,{className:"h-4 w-4"})}),o.jsx(Z,{size:"sm",variant:"secondary",className:"bg-white/90 text-black hover:bg-white focus:outline-none focus:ring-0",children:o.jsx(Qs,{className:"h-4 w-4"})}),o.jsx(Z,{size:"sm",variant:"secondary",className:"bg-white/90 text-black hover:bg-white focus:outline-none focus:ring-0",children:o.jsx(XM,{className:"h-4 w-4"})})]})]}),o.jsx("h4",{className:"font-black mb-2",style:{color:a==="light-mode"?"#000000":"#ffffff"},children:r.title}),o.jsx("p",{className:"text-sm font-semibold line-clamp-2 flex-grow",style:{color:l.textMuted},children:r.description}),o.jsxs("div",{className:"flex flex-col items-center mb-3 mt-3",children:[o.jsxs("div",{className:"flex items-center",children:[[...Array(5)].map((u,d)=>o.jsx(Ho,{className:`h-4 w-4 ${d<Math.floor(r.rating)?"fill-current":"text-gray-600"}`,style:{color:d<Math.floor(r.rating)?l.accent:void 0}},d)),o.jsxs("span",{className:"text-sm font-semibold ml-2",style:{color:a==="light-mode"?"#6b7280":"#9ca3af"},children:["(",r.reviewCount,")"]})]}),o.jsxs("div",{className:"mt-2 mb-3",children:[o.jsxs("span",{className:"text-xl font-black text-metal-orange",children:["$",r.price]}),r.compareAtPrice&&o.jsxs("span",{className:"line-through ml-2",style:{color:a==="light-mode"?"#6b7280":"#9ca3af"},children:["$",r.compareAtPrice]})]}),!r.inStock&&o.jsx(Ke,{variant:"secondary",className:"bg-gray-600 text-white mt-2",children:"Out of Stock"})]}),o.jsxs("div",{className:"mt-auto",children:[(r.variants||[]).length>1&&o.jsxs("div",{className:"relative mb-3",children:[o.jsx("select",{value:n.id,onChange:u=>{var d;return s((d=r.variants)==null?void 0:d.find(h=>h.id===u.target.value))},className:"w-full p-2 rounded appearance-none pr-8 text-center",style:{backgroundColor:a==="light-mode"?"rgba(255, 255, 255, 0.9)":"rgba(30, 30, 30, 0.5)",color:a==="light-mode"?"#000000":"#ffffff",borderColor:l.primary,textAlign:"center"},children:(r.variants||[]).map(u=>o.jsxs("option",{value:u.id,disabled:!u.available,children:[u.title," ",!u.available&&"(Out of Stock)"]},u.id))}),o.jsx("div",{className:"absolute inset-y-0 right-2 flex items-center pointer-events-none",children:o.jsx("svg",{className:"w-4 h-4 text-gray-400",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:o.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M19 9l-7 7-7-7"})})})]}),o.jsxs(Z,{onClick:()=>console.log("Buy now:",r,n),disabled:!r.inStock||!n.available,className:"w-full font-bold transition-all duration-300 focus:outline-none focus:ring-0",style:{backgroundColor:l.primary,color:l.primaryText||"white"},onMouseEnter:u=>{u.currentTarget.style.backgroundColor=l.primaryDark||l.primary,u.currentTarget.style.transform="scale(1.02)"},onMouseLeave:u=>{u.currentTarget.style.backgroundColor=l.primary,u.currentTarget.style.transform="scale(1)"},children:[o.jsx(Df,{className:"mr-2 h-4 w-4"}),"Buy Now"]})]})]})})}function QO({product:r,onClose:e,onAddToCart:t}){const[n,s]=p.useState(r.variants[0]),[i,a]=p.useState(1);return o.jsx("div",{className:"fixed inset-0 z-50 flex items-center justify-center p-4 bg-black/50",children:o.jsx(se,{className:"bg-dark-bg max-w-2xl w-full max-h-[90vh] overflow-y-auto",children:o.jsxs(oe,{className:"p-6",children:[o.jsxs("div",{className:"flex justify-between items-start mb-6",children:[o.jsx("h3",{className:"font-black text-2xl",style:{color:"#ffffff"},children:r.title}),o.jsx(Z,{variant:"ghost",onClick:e,className:"text-gray-400 hover:text-white",children:"×"})]}),o.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[o.jsx("div",{children:o.jsx("img",{src:r.images[0],alt:r.title,className:"w-full h-64 object-cover rounded-lg"})}),o.jsxs("div",{children:[o.jsx("p",{className:"font-semibold mb-4",style:{color:"#9ca3af"},children:r.description}),o.jsxs("div",{className:"flex items-center mb-4",children:[o.jsx("div",{className:"flex items-center",children:[...Array(5)].map((l,u)=>o.jsx(Ho,{className:`h-5 w-5 ${u<Math.floor(r.rating)?"fill-current":"text-gray-600"}`,style:{color:u<Math.floor(r.rating)?"#f59e0b":void 0}},u))}),o.jsxs("span",{className:"font-semibold ml-2",style:{color:"#9ca3af"},children:[r.rating," (",r.reviewCount," reviews)"]})]}),o.jsxs("div",{className:"mb-4",children:[o.jsxs("span",{className:"text-2xl font-black text-metal-orange",children:["$",n.price]}),r.compareAtPrice&&o.jsxs("span",{className:"line-through ml-2",style:{color:"#9ca3af"},children:["$",r.compareAtPrice]})]}),(r.variants||[]).length>1&&o.jsxs("div",{className:"mb-4",children:[o.jsx("label",{className:"block text-gray-300 font-semibold mb-2",children:"Size:"}),o.jsx("select",{value:n.id,onChange:l=>{var u;return s((u=r.variants)==null?void 0:u.find(d=>d.id===l.target.value))},className:"w-full p-2 bg-dark-bg text-white placeholder-gray-500 rounded text-center",style:{textAlign:"center"},children:(r.variants||[]).map(l=>o.jsxs("option",{value:l.id,disabled:!l.available,children:[l.title," ",!l.available&&"(Out of Stock)"]},l.id))})]}),o.jsxs("div",{className:"mb-6",children:[o.jsx("label",{className:"block text-gray-300 font-semibold mb-2",children:"Quantity:"}),o.jsx("input",{type:"number",min:"1",max:"10",value:i,onChange:l=>a(parseInt(l.target.value)),className:"w-20 p-2 bg-dark-bg/50 text-white rounded"})]}),o.jsxs(Z,{onClick:()=>{console.log("Buy now:",r,n),e()},disabled:!r.inStock||!n.available,className:"w-full bg-metal-orange hover:bg-orange-600 text-white font-bold focus:outline-none focus:ring-0",children:[o.jsx(Df,{className:"mr-2 h-4 w-4"}),"Buy Now - $",(n.price*i).toFixed(2)]})]})]})]})})})}var Gc="Switch",[YO,s6]=$n(Gc),[XO,JO]=YO(Gc),Y1=p.forwardRef((r,e)=>{const{__scopeSwitch:t,name:n,checked:s,defaultChecked:i,required:a,disabled:l,value:u="on",onCheckedChange:d,form:h,...m}=r,[g,x]=p.useState(null),S=at(e,N=>x(N)),b=p.useRef(!1),v=g?h||!!g.closest("form"):!0,[E,T]=Do({prop:s,defaultProp:i??!1,onChange:d,caller:Gc});return o.jsxs(XO,{scope:t,checked:E,disabled:l,children:[o.jsx(De.button,{type:"button",role:"switch","aria-checked":E,"aria-required":a,"data-state":eT(E),"data-disabled":l?"":void 0,disabled:l,value:u,...m,ref:S,onClick:_e(r.onClick,N=>{T(P=>!P),v&&(b.current=N.isPropagationStopped(),b.current||N.stopPropagation())})}),v&&o.jsx(Z1,{control:g,bubbles:!b.current,name:n,value:u,checked:E,required:a,disabled:l,form:h,style:{transform:"translateX(-100%)"}})]})});Y1.displayName=Gc;var X1="SwitchThumb",J1=p.forwardRef((r,e)=>{const{__scopeSwitch:t,...n}=r,s=JO(X1,t);return o.jsx(De.span,{"data-state":eT(s.checked),"data-disabled":s.disabled?"":void 0,...n,ref:e})});J1.displayName=X1;var ZO="SwitchBubbleInput",Z1=p.forwardRef(({__scopeSwitch:r,control:e,checked:t,bubbles:n=!0,...s},i)=>{const a=p.useRef(null),l=at(a,i),u=U1(t),d=mx(e);return p.useEffect(()=>{const h=a.current;if(!h)return;const m=window.HTMLInputElement.prototype,x=Object.getOwnPropertyDescriptor(m,"checked").set;if(u!==t&&x){const S=new Event("click",{bubbles:n});x.call(h,t),h.dispatchEvent(S)}},[u,t,n]),o.jsx("input",{type:"checkbox","aria-hidden":!0,defaultChecked:t,...s,tabIndex:-1,ref:l,style:{...s.style,...d,position:"absolute",pointerEvents:"none",opacity:0,margin:0}})});Z1.displayName=ZO;function eT(r){return r?"checked":"unchecked"}var tT=Y1,e3=J1;const qs=p.forwardRef(({className:r,...e},t)=>o.jsx(tT,{className:te("peer inline-flex h-6 w-11 shrink-0 cursor-pointer items-center rounded-full border-2 border-transparent transition-colors disabled:cursor-not-allowed disabled:opacity-50 data-[state=checked]:bg-primary data-[state=unchecked]:bg-input",r),...e,ref:t,children:o.jsx(e3,{className:te("pointer-events-none block h-5 w-5 rounded-full bg-background shadow-lg transition-transform data-[state=checked]:translate-x-5 data-[state=unchecked]:translate-x-0")})}));qs.displayName=tT.displayName;var Kc="Tabs",[t3,o6]=$n(Kc,[px]),rT=px(),[r3,Xf]=t3(Kc),nT=p.forwardRef((r,e)=>{const{__scopeTabs:t,value:n,onValueChange:s,defaultValue:i,orientation:a="horizontal",dir:l,activationMode:u="automatic",...d}=r,h=ex(l),[m,g]=Do({prop:n,onChange:s,defaultProp:i??"",caller:Kc});return o.jsx(r3,{scope:t,baseId:sh(),value:m,onValueChange:g,orientation:a,dir:h,activationMode:u,children:o.jsx(De.div,{dir:h,"data-orientation":a,...d,ref:e})})});nT.displayName=Kc;var sT="TabsList",oT=p.forwardRef((r,e)=>{const{__scopeTabs:t,loop:n=!0,...s}=r,i=Xf(sT,t),a=rT(t);return o.jsx(fE,{asChild:!0,...a,orientation:i.orientation,dir:i.dir,loop:n,children:o.jsx(De.div,{role:"tablist","aria-orientation":i.orientation,...s,ref:e})})});oT.displayName=sT;var iT="TabsTrigger",aT=p.forwardRef((r,e)=>{const{__scopeTabs:t,value:n,disabled:s=!1,...i}=r,a=Xf(iT,t),l=rT(t),u=uT(a.baseId,n),d=dT(a.baseId,n),h=n===a.value;return o.jsx(mE,{asChild:!0,...l,focusable:!s,active:h,children:o.jsx(De.button,{type:"button",role:"tab","aria-selected":h,"aria-controls":d,"data-state":h?"active":"inactive","data-disabled":s?"":void 0,disabled:s,id:u,...i,ref:e,onMouseDown:_e(r.onMouseDown,m=>{!s&&m.button===0&&m.ctrlKey===!1?a.onValueChange(n):m.preventDefault()}),onKeyDown:_e(r.onKeyDown,m=>{[" ","Enter"].includes(m.key)&&a.onValueChange(n)}),onFocus:_e(r.onFocus,()=>{const m=a.activationMode!=="manual";!h&&!s&&m&&a.onValueChange(n)})})})});aT.displayName=iT;var lT="TabsContent",cT=p.forwardRef((r,e)=>{const{__scopeTabs:t,value:n,forceMount:s,children:i,...a}=r,l=Xf(lT,t),u=uT(l.baseId,n),d=dT(l.baseId,n),h=n===l.value,m=p.useRef(h);return p.useEffect(()=>{const g=requestAnimationFrame(()=>m.current=!1);return()=>cancelAnimationFrame(g)},[]),o.jsx(kr,{present:s||h,children:({present:g})=>o.jsx(De.div,{"data-state":h?"active":"inactive","data-orientation":l.orientation,role:"tabpanel","aria-labelledby":u,hidden:!g,id:d,tabIndex:0,...a,ref:e,style:{...r.style,animationDuration:m.current?"0s":void 0},children:g&&i})})});cT.displayName=lT;function uT(r,e){return`${r}-trigger-${e}`}function dT(r,e){return`${r}-content-${e}`}var n3=nT,hT=oT,fT=aT,mT=cT;const Jf=n3,Qc=p.forwardRef(({className:r,...e},t)=>o.jsx(hT,{ref:t,className:te("inline-flex h-10 items-center justify-center rounded-md bg-muted p-1 text-muted-foreground",r),...e}));Qc.displayName=hT.displayName;const Ft=p.forwardRef(({className:r,...e},t)=>o.jsx(fT,{ref:t,className:te("inline-flex items-center justify-center whitespace-nowrap rounded-sm px-3 py-1.5 text-sm font-medium transition-all disabled:pointer-events-none disabled:opacity-50 data-[state=active]:bg-background data-[state=active]:text-foreground data-[state=active]:shadow-sm",r),...e}));Ft.displayName=fT.displayName;const Ut=p.forwardRef(({className:r,...e},t)=>o.jsx(mT,{ref:t,className:te("mt-2",r),...e}));Ut.displayName=mT.displayName;const s3=()=>{const[r,e]=p.useState({pageLoads:[],apiRequests:[],componentRenders:[],errors:[],customTraces:[]}),[t,n]=p.useState({currentUsers:0,activeSessions:0,averageResponseTime:0,errorRate:0,throughput:0}),[s,i]=p.useState(!1),[a,l]=p.useState(new Date),{getColors:u}=ue(),d=u(),h=(b,v)=>b.map(E=>{let T="good";return v==="page_load"?E.unit==="ms"?E.value>3e3?T="error":E.value>2e3&&(T="warning"):E.unit==="score"&&E.name==="CLS"&&(E.value>.25?T="error":E.value>.1&&(T="warning")):v==="api_request"?E.value>1e3?T="error":E.value>500&&(T="warning"):v==="component_render"&&(E.value>100?T="error":E.value>50&&(T="warning")),{name:E.name,value:E.value,unit:E.unit,status:T,timestamp:E.timestamp,description:`${v.replace("_"," ")} performance metric`}}),m=async()=>{i(!0);try{const b=fl.getMetrics(),v=fl.getMetricsSummary(),E=Array.from(b.pageLoads.values()).flat(),T=Array.from(b.apiRequests.values()).flat(),N=Array.from(b.componentRenders.values()).flat(),P=Array.from(b.errors.values()).flat(),F=Array.from(b.customTraces.values()).flat();e({pageLoads:h(E,"page_load"),apiRequests:h(T,"api_request"),componentRenders:h(N,"component_render"),errors:h(P,"error"),customTraces:h(F,"custom_trace")});const U=new Set(E.map(_=>_.sessionId)).size,A=T.length>0?T.reduce((_,M)=>_+M.value,0)/T.length:0,w=P.length,C=v.totalEvents,j=C>0?w/C*100:0;n({currentUsers:U,activeSessions:U,averageResponseTime:Math.round(A),errorRate:Math.round(j*100)/100,throughput:Math.round(C/10)}),l(new Date)}catch(b){console.error("Failed to refresh performance data:",b)}finally{i(!1)}};p.useEffect(()=>{const b=fl.subscribe(E=>{m()});m();const v=setInterval(m,3e4);return()=>{b(),clearInterval(v)}},[]);const g=b=>{switch(b){case"good":return o.jsx(Ks,{className:"h-4 w-4 text-green-500"});case"warning":return o.jsx($u,{className:"h-4 w-4 text-yellow-500"});case"error":return o.jsx(PM,{className:"h-4 w-4 text-red-500"})}},x=b=>{switch(b){case"good":return"bg-green-100 text-green-800 border-green-200";case"warning":return"bg-yellow-100 text-yellow-800 border-yellow-200";case"error":return"bg-red-100 text-red-800 border-red-200"}},S=b=>b.toLocaleTimeString("en-US",{hour:"2-digit",minute:"2-digit",second:"2-digit"});return o.jsxs("div",{className:"space-y-6 p-6",style:{backgroundColor:d.background,color:d.text},children:[o.jsxs("div",{className:"flex items-center justify-between",children:[o.jsxs("div",{children:[o.jsx("h1",{className:"text-3xl font-bold",style:{color:d.text},children:"Performance Monitoring Dashboard"}),o.jsx("p",{className:"text-muted-foreground mt-2",children:"Real-time performance metrics and monitoring data"})]}),o.jsxs("div",{className:"flex items-center gap-4",children:[o.jsxs(Ke,{variant:"outline",className:"text-sm",children:["Last updated: ",S(a)]}),o.jsxs(Z,{onClick:m,disabled:s,className:"flex items-center gap-2",style:{background:`linear-gradient(45deg, ${d.primary}, ${d.secondary})`,border:"none",color:"white"},children:[o.jsx(KM,{className:`h-4 w-4 ${s?"animate-spin":""}`}),"Refresh"]})]})]}),o.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-5 gap-4",children:[o.jsx(se,{style:{backgroundColor:d.surface,borderColor:d.border},children:o.jsx(oe,{className:"p-4",children:o.jsxs("div",{className:"flex items-center justify-between",children:[o.jsxs("div",{children:[o.jsx("p",{className:"text-sm font-medium text-muted-foreground",children:"Current Users"}),o.jsx("p",{className:"text-2xl font-bold",children:t.currentUsers})]}),o.jsx(dl,{className:"h-8 w-8 text-blue-500"})]})})}),o.jsx(se,{style:{backgroundColor:d.surface,borderColor:d.border},children:o.jsx(oe,{className:"p-4",children:o.jsxs("div",{className:"flex items-center justify-between",children:[o.jsxs("div",{children:[o.jsx("p",{className:"text-sm font-medium text-muted-foreground",children:"Active Sessions"}),o.jsx("p",{className:"text-2xl font-bold",children:t.activeSessions})]}),o.jsx(Hd,{className:"h-8 w-8 text-green-500"})]})})}),o.jsx(se,{style:{backgroundColor:d.surface,borderColor:d.border},children:o.jsx(oe,{className:"p-4",children:o.jsxs("div",{className:"flex items-center justify-between",children:[o.jsxs("div",{children:[o.jsx("p",{className:"text-sm font-medium text-muted-foreground",children:"Avg Response"}),o.jsxs("p",{className:"text-2xl font-bold",children:[t.averageResponseTime,"ms"]})]}),o.jsx(e_,{className:"h-8 w-8 text-purple-500"})]})})}),o.jsx(se,{style:{backgroundColor:d.surface,borderColor:d.border},children:o.jsx(oe,{className:"p-4",children:o.jsxs("div",{className:"flex items-center justify-between",children:[o.jsxs("div",{children:[o.jsx("p",{className:"text-sm font-medium text-muted-foreground",children:"Error Rate"}),o.jsxs("p",{className:"text-2xl font-bold",children:[t.errorRate,"%"]})]}),o.jsx($u,{className:"h-8 w-8 text-red-500"})]})})}),o.jsx(se,{style:{backgroundColor:d.surface,borderColor:d.border},children:o.jsx(oe,{className:"p-4",children:o.jsxs("div",{className:"flex items-center justify-between",children:[o.jsxs("div",{children:[o.jsx("p",{className:"text-sm font-medium text-muted-foreground",children:"Throughput"}),o.jsxs("p",{className:"text-2xl font-bold",children:[t.throughput,"/min"]})]}),o.jsx(xy,{className:"h-8 w-8 text-orange-500"})]})})})]}),o.jsxs(Jf,{defaultValue:"overview",className:"w-full",children:[o.jsxs(Qc,{className:"grid w-full grid-cols-6",style:{backgroundColor:d.surface},children:[o.jsx(Ft,{value:"overview",children:"Overview"}),o.jsx(Ft,{value:"pages",children:"Page Loads"}),o.jsx(Ft,{value:"api",children:"API Requests"}),o.jsx(Ft,{value:"components",children:"Components"}),o.jsx(Ft,{value:"errors",children:"Errors"}),o.jsx(Ft,{value:"traces",children:"Custom Traces"})]}),o.jsx(Ut,{value:"overview",className:"space-y-4",children:o.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6",children:[o.jsxs(se,{style:{backgroundColor:d.surface,borderColor:d.border},children:[o.jsx(Ye,{children:o.jsxs(Je,{className:"flex items-center gap-2",children:[o.jsx(xy,{className:"h-5 w-5"}),"Performance Summary"]})}),o.jsx(oe,{className:"space-y-4",children:o.jsxs("div",{className:"space-y-2",children:[o.jsxs("div",{className:"flex justify-between",children:[o.jsx("span",{children:"Page Load Performance"}),o.jsx(Ke,{className:x("good"),children:"Good"})]}),o.jsxs("div",{className:"flex justify-between",children:[o.jsx("span",{children:"API Response Times"}),o.jsx(Ke,{className:x("warning"),children:"Warning"})]}),o.jsxs("div",{className:"flex justify-between",children:[o.jsx("span",{children:"Component Rendering"}),o.jsx(Ke,{className:x("good"),children:"Good"})]}),o.jsxs("div",{className:"flex justify-between",children:[o.jsx("span",{children:"Error Rate"}),o.jsx(Ke,{className:x("good"),children:"Good"})]})]})})]}),o.jsxs(se,{style:{backgroundColor:d.surface,borderColor:d.border},children:[o.jsx(Ye,{children:o.jsxs(Je,{className:"flex items-center gap-2",children:[o.jsx(Hd,{className:"h-5 w-5"}),"Recent Activity"]})}),o.jsx(oe,{className:"space-y-3",children:r.pageLoads.slice(0,3).map((b,v)=>o.jsxs("div",{className:"flex items-center justify-between text-sm",children:[o.jsx("span",{children:b.name}),o.jsxs("div",{className:"flex items-center gap-2",children:[o.jsxs("span",{children:[b.value,b.unit]}),g(b.status)]})]},v))})]})]})}),o.jsx(Ut,{value:"pages",className:"space-y-4",children:o.jsxs(se,{style:{backgroundColor:d.surface,borderColor:d.border},children:[o.jsx(Ye,{children:o.jsxs(Je,{className:"flex items-center gap-2",children:[o.jsx(dl,{className:"h-5 w-5"}),"Page Load Performance"]})}),o.jsx(oe,{children:o.jsx("div",{className:"space-y-3",children:r.pageLoads.map((b,v)=>o.jsxs("div",{className:"flex items-center justify-between p-3 rounded-lg border",style:{borderColor:d.border},children:[o.jsxs("div",{children:[o.jsx("p",{className:"font-medium",children:b.name}),o.jsx("p",{className:"text-sm text-muted-foreground",children:b.description})]}),o.jsxs("div",{className:"flex items-center gap-3",children:[o.jsxs("span",{className:"text-lg font-bold",children:[b.value,b.unit]}),o.jsxs(Ke,{className:x(b.status),children:[g(b.status),b.status]}),o.jsx("span",{className:"text-xs text-muted-foreground",children:S(b.timestamp)})]})]},v))})})]})}),o.jsx(Ut,{value:"api",className:"space-y-4",children:o.jsxs(se,{style:{backgroundColor:d.surface,borderColor:d.border},children:[o.jsx(Ye,{children:o.jsxs(Je,{className:"flex items-center gap-2",children:[o.jsx(HM,{className:"h-5 w-5"}),"API Request Performance"]})}),o.jsx(oe,{children:o.jsx("div",{className:"space-y-3",children:r.apiRequests.map((b,v)=>o.jsxs("div",{className:"flex items-center justify-between p-3 rounded-lg border",style:{borderColor:d.border},children:[o.jsxs("div",{children:[o.jsx("p",{className:"font-medium",children:b.name}),o.jsx("p",{className:"text-sm text-muted-foreground",children:b.description})]}),o.jsxs("div",{className:"flex items-center gap-3",children:[o.jsxs("span",{className:"text-lg font-bold",children:[b.value,b.unit]}),o.jsxs(Ke,{className:x(b.status),children:[g(b.status),b.status]}),o.jsx("span",{className:"text-xs text-muted-foreground",children:S(b.timestamp)})]})]},v))})})]})}),o.jsx(Ut,{value:"components",className:"space-y-4",children:o.jsxs(se,{style:{backgroundColor:d.surface,borderColor:d.border},children:[o.jsx(Ye,{children:o.jsxs(Je,{className:"flex items-center gap-2",children:[o.jsx(UM,{className:"h-5 w-5"}),"Component Render Performance"]})}),o.jsx(oe,{children:o.jsx("div",{className:"space-y-3",children:r.componentRenders.map((b,v)=>o.jsxs("div",{className:"flex items-center justify-between p-3 rounded-lg border",style:{borderColor:d.border},children:[o.jsxs("div",{children:[o.jsx("p",{className:"font-medium",children:b.name}),o.jsx("p",{className:"text-sm text-muted-foreground",children:b.description})]}),o.jsxs("div",{className:"flex items-center gap-3",children:[o.jsxs("span",{className:"text-lg font-bold",children:[b.value,b.unit]}),o.jsxs(Ke,{className:x(b.status),children:[g(b.status),b.status]}),o.jsx("span",{className:"text-xs text-muted-foreground",children:S(b.timestamp)})]})]},v))})})]})}),o.jsx(Ut,{value:"errors",className:"space-y-4",children:o.jsxs(se,{style:{backgroundColor:d.surface,borderColor:d.border},children:[o.jsx(Ye,{children:o.jsxs(Je,{className:"flex items-center gap-2",children:[o.jsx($u,{className:"h-5 w-5"}),"Error Monitoring"]})}),o.jsx(oe,{children:o.jsx("div",{className:"space-y-3",children:r.errors.map((b,v)=>o.jsxs("div",{className:"flex items-center justify-between p-3 rounded-lg border",style:{borderColor:d.border},children:[o.jsxs("div",{children:[o.jsx("p",{className:"font-medium",children:b.name}),o.jsx("p",{className:"text-sm text-muted-foreground",children:b.description})]}),o.jsxs("div",{className:"flex items-center gap-3",children:[o.jsxs("span",{className:"text-lg font-bold",children:[b.value,b.unit]}),o.jsxs(Ke,{className:x(b.status),children:[g(b.status),b.status]}),o.jsx("span",{className:"text-xs text-muted-foreground",children:S(b.timestamp)})]})]},v))})})]})}),o.jsx(Ut,{value:"traces",className:"space-y-4",children:o.jsxs(se,{style:{backgroundColor:d.surface,borderColor:d.border},children:[o.jsx(Ye,{children:o.jsxs(Je,{className:"flex items-center gap-2",children:[o.jsx(OM,{className:"h-5 w-5"}),"Custom Performance Traces"]})}),o.jsx(oe,{children:o.jsx("div",{className:"space-y-3",children:r.customTraces.map((b,v)=>o.jsxs("div",{className:"flex items-center justify-between p-3 rounded-lg border",style:{borderColor:d.border},children:[o.jsxs("div",{children:[o.jsx("p",{className:"font-medium",children:b.name}),o.jsx("p",{className:"text-sm text-muted-foreground",children:b.description})]}),o.jsxs("div",{className:"flex items-center gap-3",children:[o.jsxs("span",{className:"text-lg font-bold",children:[b.value,b.unit]}),o.jsxs(Ke,{className:x(b.status),children:[g(b.status),b.status]}),o.jsx("span",{className:"text-xs text-muted-foreground",children:S(b.timestamp)})]})]},v))})})]})})]}),o.jsx(se,{style:{backgroundColor:d.surface,borderColor:d.border},children:o.jsx(oe,{className:"p-6",children:o.jsxs("div",{className:"text-center",children:[o.jsx("h3",{className:"text-lg font-semibold mb-2",children:"View Detailed Analytics in Firebase Console"}),o.jsx("p",{className:"text-muted-foreground mb-4",children:"Access comprehensive performance data, set up alerts, and configure monitoring rules"}),o.jsxs(Z,{onClick:()=>window.open("https://console.firebase.google.com/","_blank"),className:"flex items-center gap-2 mx-auto",style:{background:`linear-gradient(45deg, ${d.primary}, ${d.secondary})`,border:"none",color:"white"},children:[o.jsx(dl,{className:"h-4 w-4"}),"Open Firebase Console"]})]})})})]})};function o3({onClose:r}){const{user:e}=Ht(),{isAdmin:t,useMockData:n,setUseMockData:s,useLiveData:i,setUseLiveData:a}=dD(),l=Ac(),[u,d]=p.useState(!1),[h,m]=p.useState(null),[g,x]=p.useState({name:"",url:"",genre:"",country:"",language:"",bitrate:128}),{data:S=[],isLoading:b}=Ri({queryKey:["radioStations"],queryFn:async()=>{const _=await fetch(`/api/admin/radio-stations?useMockData=${n}`);if(!_.ok)throw new Error("Failed to fetch stations");return _.json()}}),{data:v=[],isLoading:E}=Ri({queryKey:["activeListeners",n],queryFn:async()=>{const _=await fetch(`/api/admin/active-listeners?useMockData=${n}`);if(!_.ok)throw new Error("Failed to fetch active listeners");return _.json()}}),{data:T=[],isLoading:N}=Ri({queryKey:["userStats",n],queryFn:async()=>{const _=await fetch(`/api/admin/user-statistics?useMockData=${n}`);if(!_.ok)throw new Error("Failed to fetch user statistics");return _.json()}}),P=Gs({mutationFn:async _=>{const M=await fetch("/api/admin/radio-stations",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(_)});if(!M.ok)throw new Error("Failed to add radio station");return M.json()},onSuccess:()=>{l.invalidateQueries({queryKey:["radioStations"]}),d(!1),x({name:"",url:"",genre:"",country:"",language:"",bitrate:128})}}),F=Gs({mutationFn:async({id:_,data:M})=>{const I=await fetch(`/api/admin/radio-stations/${_}`,{method:"PUT",headers:{"Content-Type":"application/json"},body:JSON.stringify(M)});if(!I.ok)throw new Error("Failed to update radio station");return I.json()},onSuccess:()=>{l.invalidateQueries({queryKey:["radioStations"]}),m(null),x({name:"",url:"",genre:"",country:"",language:"",bitrate:128})}}),U=Gs({mutationFn:async _=>{const M=await fetch(`/api/admin/radio-stations/${_}`,{method:"DELETE"});if(!M.ok)throw new Error("Failed to delete radio station");return M.json()},onSuccess:()=>{l.invalidateQueries({queryKey:["radioStations"]})}}),A=Gs({mutationFn:async({id:_,isActive:M})=>{const I=await fetch(`/api/admin/radio-stations/${_}/toggle-status`,{method:"PUT",headers:{"Content-Type":"application/json"},body:JSON.stringify({isActive:M})});if(!I.ok)throw new Error("Failed to toggle station status");return I.json()},onSuccess:()=>{l.invalidateQueries({queryKey:["radioStations"]})}}),w=_=>{_.preventDefault(),h?F.mutate({id:h.id,data:g}):P.mutate(g)},C=_=>{m(_),x({name:_.name,url:_.url,genre:_.genre,country:_.country,language:_.language,bitrate:_.bitrate})},j=()=>{m(null),d(!1),x({name:"",url:"",genre:"",country:"",language:"",bitrate:128})};return t?o.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50",children:o.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-lg p-6 max-w-6xl w-full max-h-[90vh] overflow-y-auto",children:[o.jsxs("div",{className:"flex justify-between items-center mb-6",children:[o.jsx("h2",{className:"text-2xl font-bold text-gray-900 dark:text-white",children:"Admin Panel"}),o.jsx("button",{onClick:r,className:"text-gray-500 hover:text-gray-700 dark:text-gray-400 dark:hover:text-gray-200 focus:outline-none focus:ring-0",children:o.jsx(Un,{className:"h-6 w-6"})})]}),o.jsxs("div",{className:"mb-6 p-4 bg-gray-50 dark:bg-gray-700 rounded-lg",children:[o.jsx("h3",{className:"text-lg font-semibold mb-3 text-gray-900 dark:text-white",children:"Data Mode Controls"}),o.jsxs("div",{className:"flex flex-wrap gap-4",children:[o.jsxs("div",{className:"flex items-center space-x-2",children:[o.jsx(qs,{checked:n,onCheckedChange:s,className:"data-[state=checked]:bg-blue-600"}),o.jsx(Re,{htmlFor:"test-mode",className:"text-sm font-medium",children:"Test Mode (Mock Data)"})]}),o.jsxs("div",{className:"flex items-center space-x-2",children:[o.jsx(qs,{checked:i,onCheckedChange:a,className:"data-[state=checked]:bg-green-600"}),o.jsx(Re,{htmlFor:"live-data",className:"text-sm font-medium",children:"Live Data (Firebase)"})]})]}),o.jsx("p",{className:"text-xs text-gray-600 dark:text-gray-400 mt-2",children:i?"Using real Firebase data":"Using mock/test data"})]}),o.jsxs(Jf,{defaultValue:"radio-stations",className:"w-full",children:[o.jsxs(Qc,{className:"grid w-full grid-cols-4 bg-gray-700",children:[o.jsxs(Ft,{value:"radio-stations",className:"flex items-center gap-2",children:[o.jsx(zi,{className:"h-4 w-4"}),"Radio Stations"]}),o.jsxs(Ft,{value:"performance",className:"flex items-center gap-2",children:[o.jsx(Hd,{className:"h-4 w-4"}),"Performance"]}),o.jsxs(Ft,{value:"analytics",className:"flex items-center gap-2",children:[o.jsx(AM,{className:"h-4 w-4"}),"Analytics"]}),o.jsxs(Ft,{value:"settings",className:"flex items-center gap-2",children:[o.jsx(YM,{className:"h-4 w-4"}),"Settings"]})]}),o.jsxs(Ut,{value:"radio-stations",className:"space-y-6",children:[(u||h)&&o.jsxs("div",{className:"bg-gray-800/50 border border-gray-700 rounded-lg p-6",children:[o.jsx("h2",{className:"text-2xl font-semibold mb-4",children:h?"Edit Radio Station":"Add New Radio Station"}),o.jsxs("form",{onSubmit:w,className:"space-y-4",children:[o.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[o.jsxs("div",{children:[o.jsx("label",{className:"block text-sm font-medium mb-2",children:"Name"}),o.jsx("input",{type:"text",value:g.name,onChange:_=>x({...g,name:_.target.value}),className:"w-full bg-gray-700 border border-gray-600 rounded-lg px-4 py-2 text-white focus:ring-2 focus:ring-purple-500 focus:border-transparent",required:!0})]}),o.jsxs("div",{children:[o.jsx("label",{className:"block text-sm font-medium mb-2",children:"URL"}),o.jsx("input",{type:"url",value:g.url,onChange:_=>x({...g,url:_.target.value}),className:"w-full bg-gray-700 border border-gray-600 rounded-lg px-4 py-2 text-white focus:ring-2 focus:ring-purple-500 focus:border-transparent",required:!0})]}),o.jsxs("div",{children:[o.jsx("label",{className:"block text-sm font-medium mb-2",children:"Genre"}),o.jsx("input",{type:"text",value:g.genre,onChange:_=>x({...g,genre:_.target.value}),className:"w-full bg-gray-700 border border-gray-600 rounded-lg px-4 py-2 text-white focus:ring-2 focus:ring-purple-500 focus:border-transparent",required:!0})]}),o.jsxs("div",{children:[o.jsx("label",{className:"block text-sm font-medium mb-2",children:"Country"}),o.jsx("input",{type:"text",value:g.country,onChange:_=>x({...g,country:_.target.value}),className:"w-full bg-gray-700 border border-gray-600 rounded-lg px-4 py-2 text-white focus:ring-2 focus:ring-purple-500 focus:border-transparent",required:!0})]}),o.jsxs("div",{children:[o.jsx("label",{className:"block text-sm font-medium mb-2",children:"Language"}),o.jsx("input",{type:"text",value:g.language,onChange:_=>x({...g,language:_.target.value}),className:"w-full bg-gray-700 border border-gray-600 rounded-lg px-4 py-2 text-white focus:ring-2 focus:ring-purple-500 focus:border-transparent",required:!0})]}),o.jsxs("div",{children:[o.jsx("label",{className:"block text-sm font-medium mb-2",children:"Bitrate"}),o.jsx("input",{type:"number",value:g.bitrate,onChange:_=>x({...g,bitrate:parseInt(_.target.value)}),className:"w-full bg-gray-700 border border-gray-600 rounded-lg px-4 py-2 text-white focus:ring-2 focus:ring-purple-500 focus:border-transparent",min:"32",max:"320",required:!0})]})]}),o.jsxs("div",{className:"flex gap-3 pt-4",children:[o.jsx("button",{type:"submit",className:"bg-purple-600 hover:bg-purple-700 text-white px-6 py-2 rounded-lg transition-colors focus:outline-none focus:ring-0",children:P.isPending||F.isPending?"Saving...":"Save"}),o.jsx("button",{type:"button",onClick:j,className:"bg-gray-600 hover:bg-gray-700 text-white px-6 py-2 rounded-lg transition-colors focus:outline-none focus:ring-0",children:"Cancel"})]})]})]}),!u&&!h&&o.jsxs("div",{className:"flex justify-between items-center",children:[o.jsx("h2",{className:"text-2xl font-semibold",children:"Radio Stations"}),o.jsxs("button",{onClick:()=>d(!0),className:"bg-purple-600 hover:bg-purple-700 text-white px-4 py-2 rounded-lg transition-colors focus:outline-none focus:ring-0 flex items-center gap-2",children:[o.jsx(GM,{className:"h-4 w-4"}),"Add Station"]})]}),o.jsx("div",{className:"bg-gray-800/50 border border-gray-700 rounded-lg p-6",children:b?o.jsxs("div",{className:"text-center py-8",children:[o.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-purple-500 mx-auto"}),o.jsx("p",{className:"mt-4 text-gray-300",children:"Loading stations..."})]}):S.length===0?o.jsxs("div",{className:"text-center py-8 text-gray-300",children:[o.jsx(zi,{className:"w-16 h-16 mx-auto mb-4 text-gray-600"}),o.jsx("p",{children:"No radio stations found."})]}):o.jsx("div",{className:"overflow-x-auto",children:o.jsxs("table",{className:"w-full",children:[o.jsx("thead",{children:o.jsxs("tr",{className:"border-b border-gray-700",children:[o.jsx("th",{className:"text-left py-3 px-4",children:"Name"}),o.jsx("th",{className:"text-left py-3 px-4",children:"Genre"}),o.jsx("th",{className:"text-left py-3 px-4",children:"Country"}),o.jsx("th",{className:"text-left py-3 px-4",children:"Language"}),o.jsx("th",{className:"text-left py-3 px-4",children:"Bitrate"}),o.jsx("th",{className:"text-left py-3 px-4",children:"Status"}),o.jsx("th",{className:"text-left py-3 px-4",children:"Actions"})]})}),o.jsx("tbody",{children:S.map(_=>o.jsxs("tr",{className:"border-b border-gray-700/50 hover:bg-gray-700/30",children:[o.jsx("td",{className:"py-3 px-4",children:o.jsxs("div",{children:[o.jsx("div",{className:"font-medium",children:_.name}),o.jsx("div",{className:"text-sm text-gray-400 truncate max-w-xs",children:_.url})]})}),o.jsx("td",{className:"py-3 px-4",children:_.genre}),o.jsx("td",{className:"py-3 px-4",children:_.country}),o.jsx("td",{className:"py-3 px-4",children:_.language}),o.jsxs("td",{className:"py-3 px-4",children:[_.bitrate," kbps"]}),o.jsx("td",{className:"py-3 px-4",children:o.jsx("button",{onClick:()=>A.mutate({id:_.id,isActive:!_.isActive}),disabled:A.isPending,className:`px-3 py-1 rounded-full text-xs font-medium transition-colors focus:outline-none focus:ring-0 ${_.isActive?"bg-green-600/20 text-green-400 border border-green-500/50":"bg-red-600/20 text-red-400 border border-red-500/50"}`,children:_.isActive?"Active":"Inactive"})}),o.jsx("td",{className:"py-3 px-4",children:o.jsxs("div",{className:"flex gap-2",children:[o.jsx("button",{onClick:()=>C(_),className:"bg-blue-600 hover:bg-blue-700 text-white p-2 rounded-lg transition-colors focus:outline-none focus:ring-0",title:"Edit",children:o.jsx(JM,{className:"w-4 h-4"})}),o.jsx("button",{onClick:()=>U.mutate(_.id),disabled:U.isPending,className:"bg-red-600 hover:bg-red-700 text-white p-2 rounded-lg transition-colors focus:outline-none focus:ring-0",title:"Delete",children:o.jsx(e5,{className:"w-4 h-4"})})]})})]},_.id))})]})})})]}),o.jsx(Ut,{value:"performance",className:"mt-6",children:o.jsx(s3,{})}),o.jsx(Ut,{value:"analytics",className:"mt-6",children:o.jsxs("div",{className:"bg-gray-800/50 border border-gray-700 rounded-lg p-6",children:[o.jsx("h2",{className:"text-2xl font-semibold mb-6",children:"Analytics Dashboard"}),o.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:[o.jsxs("div",{className:"bg-gray-700/50 p-4 rounded-lg",children:[o.jsx("h3",{className:"text-lg font-medium mb-2",children:"Active Listeners"}),E?o.jsx("div",{className:"animate-pin rounded-full h-8 w-8 border-b-2 border-purple-500"}):o.jsx("p",{className:"text-3xl font-bold text-purple-400",children:v.length})]}),o.jsxs("div",{className:"bg-gray-700/50 p-4 rounded-lg",children:[o.jsx("h3",{className:"text-lg font-medium mb-2",children:"Total Users"}),N?o.jsx("div",{className:"animate-pin rounded-full h-8 w-8 border-b-2 border-purple-500"}):o.jsx("p",{className:"text-3xl font-bold text-blue-400",children:T.length})]}),o.jsxs("div",{className:"bg-gray-700/50 p-4 rounded-lg",children:[o.jsx("h3",{className:"text-lg font-medium mb-2",children:"Radio Stations"}),b?o.jsx("div",{className:"animate-pin rounded-full h-8 w-8 border-b-2 border-purple-500"}):o.jsx("p",{className:"text-3xl font-bold text-green-400",children:S.length})]})]})]})}),o.jsx(Ut,{value:"settings",className:"mt-6",children:o.jsxs("div",{className:"bg-gray-800/50 border border-gray-700 rounded-lg p-6",children:[o.jsx("h2",{className:"text-2xl font-semibold mb-6",children:"Admin Settings"}),o.jsxs("div",{className:"space-y-4",children:[o.jsxs("div",{className:"flex items-center justify-between p-4 bg-gray-700/50 rounded-lg",children:[o.jsxs("div",{children:[o.jsx("h3",{className:"font-medium",children:"Performance Monitoring"}),o.jsx("p",{className:"text-sm text-gray-400",children:"Track site performance and user experience"})]}),o.jsx(qs,{checked:!0,disabled:!0,className:"data-[state=checked]:bg-green-600"})]}),o.jsxs("div",{className:"flex items-center justify-between p-4 bg-gray-700/50 rounded-lg",children:[o.jsxs("div",{children:[o.jsx("h3",{className:"font-medium",children:"Firebase Integration"}),o.jsx("p",{className:"text-sm text-gray-400",children:"Real-time data synchronization"})]}),o.jsx(qs,{checked:i,onCheckedChange:a,className:"data-[state=checked]:bg-green-600"})]}),o.jsxs("div",{className:"flex items-center justify-between p-4 bg-gray-700/50 rounded-lg",children:[o.jsxs("div",{children:[o.jsx("h3",{className:"font-medium",children:"Test Mode"}),o.jsx("p",{className:"text-sm text-gray-400",children:"Use mock data for testing"})]}),o.jsx(qs,{checked:n,onCheckedChange:s,className:"data-[state=checked]:bg-blue-600"})]})]})]})})]})]})}):o.jsx("div",{className:"min-h-screen bg-gradient-to-br from-gray-900 via-purple-900 to-gray-900 text-white p-8",children:o.jsx("div",{className:"max-w-6xl mx-auto",children:o.jsxs("div",{className:"text-center",children:[o.jsx("h1",{className:"text-4xl font-bold mb-4",children:"Access Denied"}),o.jsx("p",{className:"text-xl",children:"You don't have permission to access the admin panel."})]})})})}function i3(){const{colors:r,gradient:e,currentTheme:t}=ue(),[n,s]=p.useState(!1),i=a=>{const l=document.getElementById(a);l&&l.scrollIntoView({behavior:"smooth"})};return o.jsxs("footer",{className:"py-12 transition-colors duration-300",style:{backgroundColor:r.background},children:[o.jsxs("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8",children:[o.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-8 mb-8",children:[o.jsxs("div",{children:[o.jsxs("div",{className:"flex items-center space-x-4 mb-4",children:[o.jsx("div",{className:"flex items-center justify-center w-8 h-8 rounded-full",style:{background:e,padding:"5px"},children:o.jsx("img",{src:M1,alt:"Music Logo",className:"w-full h-full object-contain"})}),o.jsxs("div",{className:"flex flex-col",children:[o.jsx("div",{className:"text-sm font-black leading-tight",style:{color:t==="light-mode"?"#000000":r.text},children:"SPANDEX SALVATION"}),o.jsx("div",{className:"text-sm font-black leading-tight",style:{color:r.primary},children:"RADIO"})]})]}),o.jsx("p",{className:"text-sm",style:{color:r.textMuted},children:"Your home for old-school metal music. Broadcasting the rebellion since 2025."}),o.jsx("button",{onClick:()=>window.open("mailto:support@spandexsalvationradio.com","_blank"),className:"text-sm transition-colors duration-300 block mt-2 text-left p-0 m-0 bg-transparent border-0 cursor-pointer focus:outline-none focus:ring-0",style:{color:r.textMuted},onMouseEnter:a=>a.currentTarget.style.color=r.primary,onMouseLeave:a=>a.currentTarget.style.color=r.textMuted,children:"Email Support"})]}),o.jsxs("div",{children:[o.jsx("h4",{className:"font-semibold mb-4",style:{color:t==="light-mode"?"#000000":r.text},children:"Quick Links"}),o.jsxs("ul",{className:"space-y-3 text-sm",children:[o.jsx("li",{children:o.jsx("button",{onClick:()=>i("hero"),className:"transition-colors text-left block p-0 m-0 bg-transparent focus:outline-none focus:ring-0",style:{color:r.textMuted},onMouseEnter:a=>a.currentTarget.style.color=r.primary,onMouseLeave:a=>a.currentTarget.style.color=r.textMuted,children:"Home"})}),o.jsx("li",{children:o.jsx("button",{onClick:()=>i("schedule"),className:"transition-colors text-left block p-0 m-0 bg-transparent border-0 focus:outline-none focus:ring-0",style:{color:r.textMuted},onMouseEnter:a=>a.currentTarget.style.color=r.primary,onMouseLeave:a=>a.currentTarget.style.color=r.textMuted,children:"Schedule"})}),o.jsx("li",{children:o.jsx("button",{onClick:()=>i("submissions"),className:"transition-colors text-left block p-0 m-0 bg-transparent border-0",style:{color:r.textMuted},onMouseEnter:a=>a.currentTarget.style.color=r.primary,onMouseLeave:a=>a.currentTarget.style.color=r.textMuted,children:"Submissions"})}),o.jsx("li",{children:o.jsx("button",{onClick:()=>i("contact"),className:"transition-colors text-left block p-0 m-0 bg-transparent border-0",style:{color:r.textMuted},onMouseEnter:a=>a.currentTarget.style.color=r.primary,onMouseLeave:a=>a.currentTarget.style.color=r.textMuted,children:"Contact"})}),o.jsx("li",{children:o.jsx("button",{onClick:()=>i("subscribe"),className:"transition-colors text-left block p-0 m-0 bg-transparent border-0",style:{color:r.textMuted},onMouseEnter:a=>a.currentTarget.style.color=r.primary,onMouseLeave:a=>a.currentTarget.style.color=r.textMuted,children:"Subscribe"})})]})]}),o.jsxs("div",{children:[o.jsx("h4",{className:"font-semibold mb-4",style:{color:t==="light-mode"?"#000000":r.text},children:"Support"}),o.jsxs("ul",{className:"space-y-3 text-sm",children:[o.jsx("li",{children:o.jsx("button",{onClick:()=>window.location.href="/help",className:"transition-colors text-left block p-0 m-0 bg-transparent border-0",style:{color:r.textMuted},onMouseEnter:a=>a.currentTarget.style.color=r.primary,onMouseLeave:a=>a.currentTarget.style.color=r.textMuted,children:"Help Center"})}),o.jsx("li",{children:o.jsx("button",{onClick:()=>i("contact"),className:"transition-colors text-left block p-0 m-0 bg-transparent border-0",style:{color:r.textMuted},onMouseEnter:a=>a.currentTarget.style.color=r.primary,onMouseLeave:a=>a.currentTarget.style.color=r.textMuted,children:"Technical Support"})}),o.jsx("li",{children:o.jsx("button",{onClick:()=>i("submissions"),className:"transition-colors text-left block p-0 m-0 bg-transparent border-0",style:{color:r.textMuted},onMouseEnter:a=>a.currentTarget.style.color=r.primary,onMouseLeave:a=>a.currentTarget.style.color=r.textMuted,children:"Submit Songs"})}),o.jsx("li",{children:o.jsx("button",{onClick:()=>window.location.href="/guidelines",className:"transition-colors text-left block p-0 m-0 bg-transparent border-0",style:{color:r.textMuted},onMouseEnter:a=>a.currentTarget.style.color=r.primary,onMouseLeave:a=>a.currentTarget.style.color=r.textMuted,children:"Community Guidelines"})}),o.jsx("li",{children:o.jsx("button",{onClick:()=>window.location.href="/privacy",className:"transition-colors text-left block p-0 m-0 bg-transparent border-0",style:{color:r.textMuted},onMouseEnter:a=>a.currentTarget.style.color=r.primary,onMouseLeave:a=>a.currentTarget.style.color=r.textMuted,children:"Privacy Policy"})})]})]}),o.jsxs("div",{children:[o.jsx("h4",{className:"font-semibold mb-4",style:{color:t==="light-mode"?"#000000":r.text},children:"Stream Info"}),o.jsxs("ul",{className:"space-y-3 text-sm",children:[o.jsx("li",{children:o.jsxs("div",{className:"flex items-center",style:{color:r.textMuted},children:[o.jsx("span",{className:"mr-3 flex-shrink-0",style:{color:r.primary},children:o.jsx(zi,{className:"h-4 w-4"})}),o.jsx("span",{children:"24/7 Live Stream"})]})}),o.jsx("li",{children:o.jsxs("div",{className:"flex items-center",style:{color:r.textMuted},children:[o.jsx("span",{className:"mr-3 flex-shrink-0 text-center w-4",style:{color:r.primary},children:"♪"}),o.jsx("span",{children:"320kbps Quality"})]})}),o.jsx("li",{children:o.jsxs("div",{className:"flex items-center",style:{color:r.textMuted},children:[o.jsx("span",{className:"mr-3 flex-shrink-0 text-center w-4",style:{color:r.primary},children:"🌍"}),o.jsx("span",{children:"Global Coverage"})]})}),o.jsx("li",{children:o.jsxs("div",{className:"flex items-center",style:{color:r.textMuted},children:[o.jsx("span",{className:"mr-3 flex-shrink-0 text-center w-4",style:{color:r.primary},children:"🛡️"}),o.jsx("span",{children:"Secure & Reliable"})]})})]})]})]}),o.jsx("div",{className:"pt-8",children:o.jsxs("div",{className:"flex flex-wrap items-center justify-center md:justify-between gap-6 text-sm",children:[o.jsx("div",{className:"font-semibold",style:{color:t==="light-mode"?"rgba(0, 0, 0, 0.7)":r.textMuted},children:"© 2025 Spandex Salvation Radio. All rights reserved."}),o.jsx("a",{href:"/terms",className:"font-semibold transition-colors duration-300",style:{color:t==="light-mode"?"rgba(0, 0, 0, 0.7)":r.textMuted},onMouseEnter:a=>a.currentTarget.style.color=r.primary,onMouseLeave:a=>a.currentTarget.style.color=t==="light-mode"?"rgba(0, 0, 0, 0.7)":r.textMuted,children:"Terms of Service"}),o.jsx("a",{href:"/privacy",className:"font-semibold transition-colors duration-300",style:{color:t==="light-mode"?"rgba(0, 0, 0, 0.7)":r.textMuted},onMouseEnter:a=>a.currentTarget.style.color=r.primary,onMouseLeave:a=>a.currentTarget.style.color=t==="light-mode"?"rgba(0, 0, 0, 0.7)":r.textMuted,children:"Privacy Policy"}),o.jsx("a",{href:"/cookies",className:"font-semibold transition-colors duration-300",style:{color:t==="light-mode"?"rgba(0, 0, 0, 0.7)":r.textMuted},onMouseEnter:a=>a.currentTarget.style.color=r.primary,onMouseLeave:a=>a.currentTarget.style.color=t==="light-mode"?"rgba(0, 0, 0, 0.7)":r.textMuted,children:"Cookies"}),o.jsx("button",{onClick:()=>s(!0),className:"font-semibold transition-colors duration-300 bg-transparent border-0 p-0 focus:outline-none focus:ring-0",style:{color:t==="light-mode"?"rgba(0, 0, 0, 0.7)":r.textMuted},onMouseEnter:a=>a.currentTarget.style.color=r.primary,onMouseLeave:a=>a.currentTarget.style.color=t==="light-mode"?"rgba(0, 0, 0, 0.7)":r.textMuted,children:"Admin"})]})})]}),n&&o.jsx(o3,{onClose:()=>s(!1)})]})}function pT(){const{isPlaying:r,volume:e,currentTrack:t,stationName:n,togglePlayback:s,setVolume:i,isLoading:a,isMuted:l,toggleMute:u,isAdPlaying:d,adInfo:h,error:m}=Vc(),{user:g,updateListeningStatus:x}=Ht(),{getGradient:S,getColors:b,currentTheme:v}=ue(),E=b(),[T,N]=p.useState(!1),[P,F]=p.useState(0),U=w=>{const C=parseInt(w.target.value)/100;i(C),l&&C>0&&u()};p.useEffect(()=>{const w=()=>{const C=window.scrollY,j=document.documentElement.scrollHeight,_=window.innerHeight,I=C+_>=j-200;N(!I)};return window.addEventListener("scroll",w),()=>window.removeEventListener("scroll",w)},[]);const A=async()=>{try{await s(),g&&await x(!r)}catch(w){console.error("Error toggling playback:",w)}};return o.jsx("div",{className:`fixed bottom-2 left-4 backdrop-blur-md z-50 transition-all duration-1000 ease-in-out rounded-2xl shadow-2xl border-0 floating-player-no-focus ${T?"transform translate-y-0 opacity-100":"transform translate-y-full opacity-0"}`,style:{width:"320px",maxWidth:"calc(100vw - 32px)",background:"rgba(0, 0, 0, 0.12)",backdropFilter:"blur(32px) saturate(220%)",WebkitBackdropFilter:"blur(32px) saturate(220%)",boxShadow:`0 14px 48px ${E.primary}25, 0 0 24px ${E.primary}12`,color:E.text,border:"none",outline:"none"},role:"region","aria-label":"Floating audio player","aria-live":"polite",children:o.jsx("div",{className:"w-full px-3 py-2 relative",children:o.jsxs("div",{className:"flex items-center justify-between mb-2",children:[o.jsx(O1,{artwork:d&&h.artwork?h.artwork:t.artwork,title:t.title,artist:t.artist,size:"sm",className:"w-12 h-12 shadow-none",isAd:d}),o.jsxs("div",{className:"min-w-0 ml-3 focus-safe-area",style:{width:"60%"},children:[m&&o.jsxs("div",{className:"mb-1 flex justify-start items-center space-x-2",children:[o.jsxs("div",{className:"inline-flex items-center px-1.5 py-0.5 rounded-full text-xs font-bold text-white animate-pulse",style:{background:"linear-gradient(45deg, #ef4444, #dc2626)",boxShadow:"0 1px 4px #ef444460"},children:[o.jsx("span",{className:"mr-1 text-xs",children:"⚠️"}),"ERROR",o.jsxs("span",{className:"ml-1 opacity-80 text-xs",children:["• ",m.length>20?m.substring(0,20)+"...":m]})]}),o.jsx("button",{onClick:A,className:"px-2 py-0.5 text-xs font-medium rounded bg-red-600 hover:bg-red-700 text-white transition-colors focus:outline-none focus:ring-0",title:"Retry playback",children:"RETRY"})]}),d&&o.jsx("div",{className:"mb-1 flex justify-start",children:o.jsxs("div",{className:"inline-flex items-center px-1.5 py-0.5 rounded-full text-xs font-bold text-white animate-pulse",style:{background:"linear-gradient(45deg, #ff4444, #cc0000)",boxShadow:"0 1px 4px #ff444460"},children:[o.jsx("span",{className:"mr-1 text-xs",children:"📢"}),"AD",h.company&&o.jsxs("span",{className:"ml-1 opacity-80 text-xs",children:["• ",h.company]})]})}),o.jsx("div",{className:"w-full overflow-hidden",children:o.jsx(D1,{text:t.title!==n?t.title:n,className:"font-semibold text-xs whitespace-nowrap",style:{color:d?"#f87171":E.text},maxWidth:"85%",isFloating:!0,backgroundColor:"transparent",alignment:"left"})}),t.artist&&t.artist!==t.title&&t.artist!==n&&o.jsx("div",{className:"text-xs truncate mt-0.5",style:{color:E.textMuted},children:t.artist}),o.jsxs("div",{className:"flex items-center justify-between mt-1",children:[o.jsxs("div",{className:"flex items-center space-x-1",children:[o.jsx("div",{className:`w-2 h-2 rounded-full animate-pulse relative flex-shrink-0 ${d?"bg-red-600":"bg-red-500"}`,style:{top:"0px"}}),o.jsx("span",{className:`text-xs font-medium flex-shrink-0 ${d?"text-red-600":"text-red-500"}`,children:d?"AD":"LIVE"})]}),o.jsx("div",{className:"hidden sm:flex items-center justify-center flex-1 mx-2 focus-safe-area",children:o.jsxs("div",{className:"flex items-center space-x-2 focus-safe-area",children:[o.jsx(n5,{className:"h-3 w-3 cursor-pointer transition-colors flex-shrink-0 focus:outline-none focus:ring-0",style:{color:l?"#ef4444":v==="light-mode"?"#4b5563":"#9ca3af"},onMouseEnter:w=>{l||(w.currentTarget.style.color=v==="light-mode"?"#374151":"#d1d5db")},onMouseLeave:w=>{w.currentTarget.style.color=l?"#ef4444":v==="light-mode"?"#4b5563":"#9ca3af"},onClick:u,tabIndex:0,onKeyDown:w=>{(w.key==="Enter"||w.key===" ")&&(w.preventDefault(),u())}}),o.jsxs("div",{className:"w-16 h-1 rounded-full relative flex-shrink-0",style:{backgroundColor:v==="light-mode"?"#d1d5db":"#374151"},children:[o.jsx("div",{className:"h-1 rounded-full transition-all duration-150",style:{width:`${(l?0:e)*100}%`,background:`linear-gradient(45deg, ${E.primary}, ${E.secondary})`}}),o.jsx("input",{type:"range",min:"0",max:"100",value:(l?0:e)*100,onChange:U,className:"absolute inset-0 w-full h-full opacity-0 cursor-pointer focus:outline-none focus:ring-0","aria-label":"Volume control",title:"Adjust volume",style:{outline:"none",border:"none"}})]}),o.jsxs("span",{className:"text-xs font-medium min-w-[20px] text-center flex-shrink-0",style:{color:v==="light-mode"?"#6b7280":"#9ca3af"},children:[Math.round((l?0:e)*100),"%"]})]})})]})]}),o.jsxs("div",{className:"relative",children:[a&&o.jsx("div",{className:"absolute inset-0 flex items-center justify-center",children:o.jsx("div",{className:"w-7 h-7 border-2 border-t-transparent rounded-full animate-spin",style:{borderColor:E.primary,borderTopColor:"transparent"}})}),o.jsx(Z,{onClick:A,className:"text-white w-10 h-10 rounded-full flex items-center justify-center transition-all duration-300 hover:scale-110 shadow-lg hover:shadow-xl border-0 focus:outline-none focus:ring-0",style:{background:`linear-gradient(45deg, ${E.primary}, ${E.secondary})`,boxShadow:`0 4px 20px ${E.primary}60`,opacity:a?.5:1,border:"none",outline:"none","--tw-ring-color":E.primary,transform:"scale(1)",transition:"all 0.3s ease"},"aria-label":a?"Connecting...":r?"Pause radio stream":"Play radio stream",disabled:a,onMouseEnter:w=>{a||(w.currentTarget.style.transform="scale(1.1)",w.currentTarget.style.boxShadow=`0 6px 24px ${E.primary}80`)},onMouseLeave:w=>{a||(w.currentTarget.style.transform="scale(1)",w.currentTarget.style.boxShadow=`0 4px 20px ${E.primary}60`)},onMouseDown:w=>{a||(w.currentTarget.style.transform="scale(0.95)")},onMouseUp:w=>{a||(w.currentTarget.style.transform="scale(1.1)")},children:!a&&o.jsx(o.Fragment,{children:r?o.jsxs("svg",{className:"h-6 w-6",fill:"currentColor",viewBox:"0 0 24 24",children:[o.jsx("rect",{x:"6",y:"4",width:"4",height:"16",rx:"1",fill:"currentColor"}),o.jsx("rect",{x:"14",y:"4",width:"4",height:"16",rx:"1",fill:"currentColor"})]}):o.jsx("svg",{className:"h-6 w-6",fill:"currentColor",viewBox:"0 0 24 24",children:o.jsx("polygon",{points:"8 5 20 12 8 19 8 5"})})})})]})]})})})}function a3({onChatClick:r,onlineCount:e=0}){const{user:t,isAuthenticated:n}=Ht(),{getColors:s}=ue(),i=s(),a=(t==null?void 0:t.activeSubscription)||!1;return!n||!a?null:o.jsxs(Z,{onClick:r,size:"sm",variant:"ghost",className:"relative flex items-center gap-2 px-3 py-2 rounded-md transition-all duration-200 hover:scale-105 focus:outline-none focus:ring-0",style:{color:i.text,backgroundColor:"transparent"},onMouseEnter:l=>{l.currentTarget.style.backgroundColor=i.primary+"20",l.currentTarget.style.color="white"},onMouseLeave:l=>{l.currentTarget.style.backgroundColor="transparent",l.currentTarget.style.color=i.text},"aria-label":"Open live chat",children:[o.jsx(Ys,{size:16,style:{color:i.primary}}),o.jsx("span",{className:"font-semibold text-sm",children:"CHAT"}),e>0&&o.jsx(Ke,{className:"absolute -top-1 -right-1 bg-red-500 text-white text-xs px-1.5 py-0.5",style:{fontSize:"10px"},children:e})]})}const l3="/RebelPackageIcon.png",c3="/LegendPackageIcon.png",u3="/IconPackageIcon.png",tr=[{id:"rebel",name:"REBEL",price:5.99,priceId:"price_rebel_monthly",icon:l3,iconElement:o.jsx(a_,{className:"w-16 h-16"}),gradientStart:"#B56BFF",gradientEnd:"#FF50C3",description:"Start your metal journey",features:["Ad-free streaming experience","High-quality audio (320kbps)","Monthly exclusive playlist","Priority song requests"],perks:["🎸 Guitar picks monthly","⚡ Early access to new shows"]},{id:"legend",name:"LEGEND",price:12.99,priceId:"price_legend_monthly",popular:!0,icon:c3,iconElement:o.jsx(Ho,{className:"w-16 h-16"}),gradientStart:"#E520C6",gradientEnd:"#F4654F",description:"Become a true metal legend",features:["Everything in Rebel tier","Exclusive live show access","Artist interview archives","VIP Discord community","Monthly exclusive merch discount"],perks:["🎤 Monthly video calls with DJs","🎁 Quarterly mystery box","💿 Signed albums"]},{id:"icon",name:"ICON",price:24.99,priceId:"price_icon_monthly",icon:u3,iconElement:o.jsx(dr,{className:"w-16 h-16"}),gradientStart:"#00D4FF",gradientEnd:"#5200FF",description:"The ultimate metal experience",features:["Everything in Legend tier","Personal DJ requests","Exclusive artist meet & greets","Limited edition vinyl access","Co-host opportunities"],perks:["🎤 Name a weekly show segment","🏆 Annual VIP concert tickets","👕 Custom merch line"]}];function gT(){const[r,e]=p.useState(1),[t,n]=p.useState(!1),[s,i]=p.useState("right"),[a,l]=p.useState(null),{getColors:u,currentTheme:d}=ue(),h=u(),m=v=>{console.log("Subscribing to tier:",v.name),alert(`Redirecting to ${v.name} subscription...`)},g=p.useCallback(()=>{t||(console.log("Previous animation starting"),n(!0),i("right"),e(v=>(v-1+((tr==null?void 0:tr.length)||0))%((tr==null?void 0:tr.length)||1)),setTimeout(()=>{n(!1),console.log("Previous animation complete")},400))},[t]),x=p.useCallback(()=>{t||(console.log("Next animation starting"),n(!0),i("left"),e(v=>(v+1)%((tr==null?void 0:tr.length)||1)),setTimeout(()=>{n(!1),console.log("Next animation complete")},400))},[t]);p.useEffect(()=>{const v=E=>{E.key==="ArrowLeft"?(E.preventDefault(),g()):E.key==="ArrowRight"&&(E.preventDefault(),x())};return window.addEventListener("keydown",v),()=>window.removeEventListener("keydown",v)},[g,x]);const S=v=>{!t&&v!==r&&(n(!0),e(v),setTimeout(()=>n(!1),500))},b=tr[r];return o.jsxs("div",{className:"relative w-full max-w-6xl mx-auto px-4",children:[o.jsxs("div",{className:"relative perspective-1000 subscription-carousel-container overflow-visible py-2 sm:py-4 md:py-6 lg:py-8",style:{minHeight:"700px",height:"auto"},children:[o.jsx("button",{onClick:g,disabled:t,className:"absolute left-4 top-1/2 transform -translate-y-1/2 z-10 p-2 rounded-full bg-black/20 backdrop-blur-sm text-white hover:bg-black/40 transition-all duration-300 focus:outline-none focus:ring-0",style:{border:`1px solid ${h.border}`},children:o.jsx(RM,{className:"w-6 h-6"})}),o.jsx("button",{onClick:x,disabled:t,className:"absolute right-4 top-1/2 transform -translate-y-1/2 z-10 p-2 rounded-full bg-black/20 backdrop-blur-sm text-white hover:bg-black/40 transition-all duration-300 focus:outline-none focus:ring-0",style:{border:`1px solid ${h.border}`},children:o.jsx(Jw,{className:"w-6 h-6"})}),o.jsx("div",{className:"flex items-center justify-center h-full relative",children:o.jsxs("div",{className:"relative w-full max-w-md",style:{transform:t?s==="left"?"translateX(30px) scale(0.98)":"translateX(-30px) scale(0.98)":"translateX(0) scale(1)",opacity:t?.8:1,transition:"all 0.4s ease-in-out"},children:[o.jsx("div",{className:"absolute inset-4 rounded-3xl overflow-hidden",children:o.jsx("div",{className:"absolute inset-0 blur-2xl opacity-40",style:{background:`linear-gradient(135deg, ${b.gradientStart}, ${b.gradientEnd})`}})}),o.jsx("div",{className:"relative overflow-hidden transition-all duration-500",style:{borderRadius:"24px",background:`linear-gradient(45deg, ${b.gradientStart}, ${b.gradientEnd}, ${b.gradientStart}, ${b.gradientEnd})`,backgroundSize:"400% 400%",animation:"slowRotatingGradient 8s linear infinite",transform:a===b.id?"scale(1.05)":"scale(1)",padding:"5px"},children:o.jsxs("div",{className:"relative backdrop-blur-xl p-6 overflow-hidden flex flex-col subscription-card",style:{borderRadius:"19px",backgroundColor:h.background,background:h.background,boxShadow:b.popular?`0 0 60px ${b.gradientStart}60, 0 0 120px ${b.gradientEnd}40, 0 0 160px ${b.gradientStart}20, inset 0 0 0 1px ${b.gradientStart}40`:`0 20px 40px ${b.gradientStart}40, inset 0 0 0 1px ${b.gradientStart}30`,minHeight:"600px",height:"auto",transition:"none"},onMouseEnter:()=>l(b.id),onMouseLeave:()=>l(null),children:[o.jsx("div",{className:"flex justify-center mb-2 sm:mb-4",children:o.jsx("div",{className:"relative p-2 sm:p-3 rounded-full",style:{background:`linear-gradient(135deg, ${b.gradientStart}20, ${b.gradientEnd}20)`},children:o.jsx("img",{src:b.icon,alt:`${b.name} icon`,className:`w-16 h-16 sm:w-20 sm:h-20 object-contain animate-float ${r===1?"float-delay-1":r===2?"float-delay-2":""}`,style:{animation:"float 4s ease-in-out infinite",animationDelay:r===1?"0.5s":r===2?"1s":"0s"}})})}),o.jsxs("div",{className:"text-center mb-2 sm:mb-4",children:[o.jsx("h3",{className:"text-2xl sm:text-3xl font-black mb-1 sm:mb-2",children:o.jsx("span",{style:{background:`linear-gradient(90deg, ${b.gradientStart}, ${b.gradientEnd})`,WebkitBackgroundClip:"text",WebkitTextFillColor:"transparent",backgroundClip:"text",color:"transparent",display:"inline",padding:0,margin:0,fontWeight:"inherit"},children:b.name},b.id)}),o.jsx("p",{className:"text-sm sm:text-base",style:{color:d==="light-mode"?"rgba(0, 0, 0, 0.6)":"#9ca3af"},children:b.description}),b.popular&&o.jsx("div",{className:"mt-4",children:o.jsx("span",{className:"px-4 py-1 rounded-full text-xs font-bold",style:{background:"linear-gradient(135deg, #ff6b35, #f7931e)",color:"black",whiteSpace:"nowrap"},children:"MOST POPULAR"})})]}),o.jsx("div",{className:"text-center mb-3 sm:mb-6",children:o.jsxs("div",{className:"flex items-center justify-center",children:[o.jsxs("span",{className:"text-3xl sm:text-4xl font-black",style:{color:d==="light-mode"?"#000000":"#ffffff"},children:["$",b.price]}),o.jsx("span",{className:"ml-2 text-sm sm:text-base",style:{color:d==="light-mode"?"rgba(0, 0, 0, 0.6)":"#9ca3af"},children:"/month"})]})}),o.jsx("div",{className:"flex-1 flex items-center justify-center py-2 sm:py-4",children:o.jsx("div",{className:"w-full max-w-xs",children:(b.features||[]).sort((v,E)=>((v==null?void 0:v.length)||0)-((E==null?void 0:E.length)||0)).map((v,E)=>o.jsx("div",{className:"flex items-center justify-center mb-2 sm:mb-3 transform transition-all duration-300",style:{transform:a===b.id?"translateX(10px)":"translateX(0)",transitionDelay:`${E*50}ms`},children:o.jsxs("div",{className:"flex items-center",children:[o.jsx("div",{className:"w-3 h-3 sm:w-4 sm:h-4 rounded-full flex items-center justify-center flex-shrink-0 mr-2 sm:mr-3",style:{background:`linear-gradient(135deg, ${b.gradientStart}, ${b.gradientEnd})`},children:o.jsx(pa,{className:"w-2 h-2 sm:w-2.5 sm:h-2.5 text-white"})}),o.jsx("span",{className:"text-xs sm:text-sm font-medium text-center",style:{color:d==="light-mode"?"rgba(0, 0, 0, 0.7)":"#d1d5db"},children:v})]})},E))})}),o.jsx("div",{className:"mb-2 sm:mb-3",children:o.jsxs("div",{className:"bg-white/5 rounded-lg p-2 sm:p-3 max-w-xs mx-auto",children:[o.jsx("h4",{className:"text-xs font-bold mb-1 sm:mb-2 text-center",style:{color:d==="light-mode"?"rgba(0, 0, 0, 0.6)":"#9ca3af"},children:"EXCLUSIVE PERKS"}),o.jsx("div",{className:"space-y-0.5 sm:space-y-1",children:(b.perks||[]).map((v,E)=>o.jsx("div",{className:"text-xs text-center leading-tight",style:{color:d==="light-mode"?"rgba(0, 0, 0, 0.7)":"#d1d5db"},children:v},E))})]})}),o.jsx("div",{className:"mt-auto mb-3 sm:mb-4",children:o.jsxs(Z,{onClick:()=>m(b),className:"w-full py-3 px-6 rounded-xl font-bold text-lg transition-all duration-300 hover:scale-105 focus:outline-none focus:ring-0",style:{background:`linear-gradient(135deg, ${b.gradientStart}, ${b.gradientEnd})`,color:"white",boxShadow:`0 8px 32px ${b.gradientStart}40`},children:["Get ",b.name.charAt(0)+b.name.slice(1).toLowerCase()," Now"]})})]})})," "]})})]}),o.jsxs("div",{className:"text-center text-gray-500 text-sm mt-8",children:[o.jsx("span",{className:"md:hidden",children:"← Swipe to explore plans →"}),o.jsx("span",{className:"hidden md:inline",children:"← Click to explore plans →"})]}),o.jsx("div",{className:"flex justify-center items-center space-x-6 mt-6",children:(tr||[]).map((v,E)=>o.jsxs("button",{onClick:()=>S(E),className:te("relative transition-all duration-500 ease-in-out p-3 rounded-full focus:outline-none focus:ring-0",E===r?"scale-110":"opacity-40 hover:opacity-60 scale-90"),children:[o.jsx("div",{className:te("absolute inset-0 rounded-full transition-all duration-500",E===r?"opacity-100":"opacity-0"),style:{background:`radial-gradient(circle, ${v.gradientStart}20, transparent 70%)`,filter:"blur(12px)"}}),o.jsx("div",{className:te("relative rounded-full transition-all duration-500",E===r?"bg-black/20":"bg-transparent"),style:{padding:"0.5rem"},children:o.jsx("img",{src:v.icon,alt:`${v.name} icon`,className:te("object-contain transition-all duration-500",E===r?"w-8 h-8":"w-6 h-6"),style:{filter:E===r?"drop-shadow(0 0 8px rgba(255,255,255,0.5))":"grayscale(100%) opacity(0.7)"}})}),E===r&&o.jsx("div",{className:"absolute inset-0 rounded-full",style:{background:`linear-gradient(135deg, ${v.gradientStart}60, ${v.gradientEnd}60)`,padding:"2px",WebkitMask:"linear-gradient(#fff 0 0) content-box, linear-gradient(#fff 0 0)",WebkitMaskComposite:"xor",maskComposite:"exclude"}})]},v.id))}),o.jsx("style",{children:`
        @keyframes gradientFlow {
          0% { background-position: 0% 50%; }
          50% { background-position: 100% 50%; }
          100% { background-position: 0% 50%; }
        }
        .preserve-3d {
          transform-style: preserve-3d;
        }
      `})]})}function d3(){const[r,e]=p.useState(!1),{currentTheme:t,getColors:n}=ue(),s=n();return p.useEffect(()=>{Cw("home_page");const i=()=>{const a=window.location.hash.substring(1);a&&setTimeout(()=>{const l=document.getElementById(a);l&&l.scrollIntoView({behavior:"smooth",block:"start"})},100)};return i(),window.addEventListener("hashchange",i),()=>{window.removeEventListener("hashchange",i)}},[]),o.jsxs("div",{className:"min-h-screen transition-colors duration-300",style:{backgroundColor:s.background,color:s.text},children:[o.jsx("div",{id:"main-navigation",children:o.jsx(Gf,{})}),o.jsxs("main",{id:"main-content",children:[o.jsx(PO,{}),o.jsx(MO,{}),o.jsx(OO,{}),o.jsx(LO,{}),o.jsx("section",{id:"subscribe",className:"py-20 transition-colors duration-300",style:{backgroundColor:s.background},children:o.jsxs("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8",children:[o.jsxs("div",{className:"text-center mb-16",children:[o.jsx("h2",{className:"font-orbitron font-black text-3xl md:text-4xl mb-4",style:{color:t==="light-mode"?"#000000":s.text},children:"Supporters Enjoy More"}),o.jsx("p",{className:"text-lg font-semibold",style:{color:t==="light-mode"?"rgba(0, 0, 0, 0.7)":s.textMuted},children:"Support our growth and enjoy exclusive content."})]}),o.jsx(gT,{})]})}),o.jsx(BO,{}),o.jsx("section",{id:"map",className:"py-8",children:o.jsx(Q1,{})}),o.jsx(qO,{}),o.jsx(HO,{}),o.jsx(GO,{}),o.jsx(i3,{}),o.jsx(pT,{}),o.jsx(a3,{onChatClick:()=>e(!0)})]})]})}function h3(){const{colors:r}=ue(),[e,t]=p.useState("95.5 The Beat"),[n,s]=p.useState(!1),i=["95.5 The Beat","Hot 97","Power 106","SomaFM Metal"],l={"95.5 The Beat":{name:"95.5 The Beat",description:"Dallas' Hip Hop and R&B - Playing the hottest tracks 24/7",frequency:"95.5 FM",listeners:"100K+"},"Hot 97":{name:"Hot 97",description:"New York's Hip Hop & R&B - Where Hip Hop Lives",frequency:"97.1 FM",listeners:"500K+"},"Power 106":{name:"Power 106",description:"Los Angeles' Hip Hop Station - LA's #1 for Hip Hop",frequency:"105.9 FM",listeners:"300K+"},"SomaFM Metal":{name:"SomaFM Metal Detector",description:"From black to doom, prog to sludge, thrash to post, stoner to crossover",frequency:"Online",listeners:"50K+"}}[e];return o.jsxs(o.Fragment,{children:[o.jsx(Gf,{}),o.jsx("div",{id:"music",className:"min-h-screen bg-background pt-20 pb-8",children:o.jsxs("div",{className:"container mx-auto px-4",children:[o.jsxs("div",{className:"text-center mb-8",children:[o.jsx("h1",{className:"text-4xl font-black text-foreground mb-4",children:"LIVE RADIO"}),o.jsx("p",{className:"text-xl text-muted-foreground mb-6",children:"Stream Your Favorite Stations 24/7"})]}),o.jsx("div",{className:"max-w-4xl mx-auto mb-6",children:o.jsx("div",{className:"flex justify-center",children:o.jsxs("div",{className:"relative",children:[o.jsxs("button",{onClick:()=>s(!n),className:"flex items-center space-x-2 px-6 py-3 rounded-lg transition-all duration-200 font-semibold text-white",style:{backgroundColor:r.primary,border:`2px solid ${r.primary}`},onMouseEnter:u=>{u.currentTarget.style.backgroundColor=r.secondary},onMouseLeave:u=>{u.currentTarget.style.backgroundColor=r.primary},children:[o.jsx("span",{children:e}),o.jsx(zl,{size:16,style:{transform:n?"rotate(180deg)":"rotate(0deg)",transition:"transform 0.2s ease"}})]}),n&&o.jsx("div",{className:"absolute top-full left-1/2 transform -translate-x-1/2 mt-2 py-2 rounded-lg shadow-xl border backdrop-blur-md z-50",style:{backgroundColor:r.background==="#000000"?"rgba(0, 0, 0, 0.95)":"rgba(255, 255, 255, 0.95)",borderColor:r.primary+"40",minWidth:"200px"},children:i.map(u=>o.jsx("button",{onClick:()=>{t(u),s(!1)},className:"w-full px-4 py-2 text-left hover:rounded transition-colors duration-200",style:{color:e===u?"white":r.text,backgroundColor:e===u?r.primary:"transparent"},onMouseEnter:d=>{e!==u&&(d.currentTarget.style.backgroundColor=r.primary+"20")},onMouseLeave:d=>{e!==u&&(d.currentTarget.style.backgroundColor="transparent")},children:u},u))})]})})}),o.jsx("div",{className:"max-w-4xl mx-auto",children:o.jsx(L1,{})}),o.jsx("div",{className:"max-w-4xl mx-auto mt-8",children:o.jsxs("div",{className:"bg-black/90 backdrop-blur-md rounded-lg p-6 border",style:{borderColor:r.primary+"20"},children:[o.jsxs("h2",{className:"text-2xl font-bold mb-4",style:{color:r.text},children:["About ",l.name]}),o.jsx("p",{className:"mb-4",style:{color:r.text,opacity:.8},children:l.description}),o.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4 mt-6",children:[o.jsxs("div",{className:"text-center",children:[o.jsx("div",{className:"font-bold text-xl",style:{color:r.primary},children:"24/7"}),o.jsx("div",{style:{color:r.text,opacity:.6},children:"Live Broadcasting"})]}),o.jsxs("div",{className:"text-center",children:[o.jsx("div",{className:"font-bold text-xl",style:{color:r.primary},children:l.frequency}),o.jsx("div",{style:{color:r.text,opacity:.6},children:"Frequency"})]}),o.jsxs("div",{className:"text-center",children:[o.jsx("div",{className:"font-bold text-xl",style:{color:r.primary},children:l.listeners}),o.jsx("div",{style:{color:r.text,opacity:.6},children:"Active Listeners"})]})]})]})})]})}),o.jsx(pT,{})]})}function fr(r){const e=Object.prototype.toString.call(r);return r instanceof Date||typeof r=="object"&&e==="[object Date]"?new r.constructor(+r):typeof r=="number"||e==="[object Number]"||typeof r=="string"||e==="[object String]"?new Date(r):new Date(NaN)}function ks(r,e){return r instanceof Date?new r.constructor(e):new Date(e)}const yT=6048e5,f3=864e5;let m3={};function Yc(){return m3}function Wi(r,e){var l,u,d,h;const t=Yc(),n=(e==null?void 0:e.weekStartsOn)??((u=(l=e==null?void 0:e.locale)==null?void 0:l.options)==null?void 0:u.weekStartsOn)??t.weekStartsOn??((h=(d=t.locale)==null?void 0:d.options)==null?void 0:h.weekStartsOn)??0,s=fr(r),i=s.getDay(),a=(i<n?7:0)+i-n;return s.setDate(s.getDate()-a),s.setHours(0,0,0,0),s}function ec(r){return Wi(r,{weekStartsOn:1})}function xT(r){const e=fr(r),t=e.getFullYear(),n=ks(r,0);n.setFullYear(t+1,0,4),n.setHours(0,0,0,0);const s=ec(n),i=ks(r,0);i.setFullYear(t,0,4),i.setHours(0,0,0,0);const a=ec(i);return e.getTime()>=s.getTime()?t+1:e.getTime()>=a.getTime()?t:t-1}function Cy(r){const e=fr(r);return e.setHours(0,0,0,0),e}function ky(r){const e=fr(r),t=new Date(Date.UTC(e.getFullYear(),e.getMonth(),e.getDate(),e.getHours(),e.getMinutes(),e.getSeconds(),e.getMilliseconds()));return t.setUTCFullYear(e.getFullYear()),+r-+t}function p3(r,e){const t=Cy(r),n=Cy(e),s=+t-ky(t),i=+n-ky(n);return Math.round((s-i)/f3)}function g3(r){const e=xT(r),t=ks(r,0);return t.setFullYear(e,0,4),t.setHours(0,0,0,0),ec(t)}function y3(r){return r instanceof Date||typeof r=="object"&&Object.prototype.toString.call(r)==="[object Date]"}function x3(r){if(!y3(r)&&typeof r!="number")return!1;const e=fr(r);return!isNaN(Number(e))}function b3(r){const e=fr(r),t=ks(r,0);return t.setFullYear(e.getFullYear(),0,1),t.setHours(0,0,0,0),t}const v3={lessThanXSeconds:{one:"less than a second",other:"less than {{count}} seconds"},xSeconds:{one:"1 second",other:"{{count}} seconds"},halfAMinute:"half a minute",lessThanXMinutes:{one:"less than a minute",other:"less than {{count}} minutes"},xMinutes:{one:"1 minute",other:"{{count}} minutes"},aboutXHours:{one:"about 1 hour",other:"about {{count}} hours"},xHours:{one:"1 hour",other:"{{count}} hours"},xDays:{one:"1 day",other:"{{count}} days"},aboutXWeeks:{one:"about 1 week",other:"about {{count}} weeks"},xWeeks:{one:"1 week",other:"{{count}} weeks"},aboutXMonths:{one:"about 1 month",other:"about {{count}} months"},xMonths:{one:"1 month",other:"{{count}} months"},aboutXYears:{one:"about 1 year",other:"about {{count}} years"},xYears:{one:"1 year",other:"{{count}} years"},overXYears:{one:"over 1 year",other:"over {{count}} years"},almostXYears:{one:"almost 1 year",other:"almost {{count}} years"}},w3=(r,e,t)=>{let n;const s=v3[r];return typeof s=="string"?n=s:e===1?n=s.one:n=s.other.replace("{{count}}",e.toString()),t!=null&&t.addSuffix?t.comparison&&t.comparison>0?"in "+n:n+" ago":n};function Wu(r){return(e={})=>{const t=e.width?String(e.width):r.defaultWidth;return r.formats[t]||r.formats[r.defaultWidth]}}const _3={full:"EEEE, MMMM do, y",long:"MMMM do, y",medium:"MMM d, y",short:"MM/dd/yyyy"},T3={full:"h:mm:ss a zzzz",long:"h:mm:ss a z",medium:"h:mm:ss a",short:"h:mm a"},E3={full:"{{date}} 'at' {{time}}",long:"{{date}} 'at' {{time}}",medium:"{{date}}, {{time}}",short:"{{date}}, {{time}}"},N3={date:Wu({formats:_3,defaultWidth:"full"}),time:Wu({formats:T3,defaultWidth:"full"}),dateTime:Wu({formats:E3,defaultWidth:"full"})},C3={lastWeek:"'last' eeee 'at' p",yesterday:"'yesterday at' p",today:"'today at' p",tomorrow:"'tomorrow at' p",nextWeek:"eeee 'at' p",other:"P"},k3=(r,e,t,n)=>C3[r];function fi(r){return(e,t)=>{const n=t!=null&&t.context?String(t.context):"standalone";let s;if(n==="formatting"&&r.formattingValues){const a=r.defaultFormattingWidth||r.defaultWidth,l=t!=null&&t.width?String(t.width):a;s=r.formattingValues[l]||r.formattingValues[a]}else{const a=r.defaultWidth,l=t!=null&&t.width?String(t.width):r.defaultWidth;s=r.values[l]||r.values[a]}const i=r.argumentCallback?r.argumentCallback(e):e;return s[i]}}const S3={narrow:["B","A"],abbreviated:["BC","AD"],wide:["Before Christ","Anno Domini"]},j3={narrow:["1","2","3","4"],abbreviated:["Q1","Q2","Q3","Q4"],wide:["1st quarter","2nd quarter","3rd quarter","4th quarter"]},I3={narrow:["J","F","M","A","M","J","J","A","S","O","N","D"],abbreviated:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],wide:["January","February","March","April","May","June","July","August","September","October","November","December"]},A3={narrow:["S","M","T","W","T","F","S"],short:["Su","Mo","Tu","We","Th","Fr","Sa"],abbreviated:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],wide:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"]},R3={narrow:{am:"a",pm:"p",midnight:"mi",noon:"n",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"},abbreviated:{am:"AM",pm:"PM",midnight:"midnight",noon:"noon",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"},wide:{am:"a.m.",pm:"p.m.",midnight:"midnight",noon:"noon",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"}},P3={narrow:{am:"a",pm:"p",midnight:"mi",noon:"n",morning:"in the morning",afternoon:"in the afternoon",evening:"in the evening",night:"at night"},abbreviated:{am:"AM",pm:"PM",midnight:"midnight",noon:"noon",morning:"in the morning",afternoon:"in the afternoon",evening:"in the evening",night:"at night"},wide:{am:"a.m.",pm:"p.m.",midnight:"midnight",noon:"noon",morning:"in the morning",afternoon:"in the afternoon",evening:"in the evening",night:"at night"}},M3=(r,e)=>{const t=Number(r),n=t%100;if(n>20||n<10)switch(n%10){case 1:return t+"st";case 2:return t+"nd";case 3:return t+"rd"}return t+"th"},D3={ordinalNumber:M3,era:fi({values:S3,defaultWidth:"wide"}),quarter:fi({values:j3,defaultWidth:"wide",argumentCallback:r=>r-1}),month:fi({values:I3,defaultWidth:"wide"}),day:fi({values:A3,defaultWidth:"wide"}),dayPeriod:fi({values:R3,defaultWidth:"wide",formattingValues:P3,defaultFormattingWidth:"wide"})};function mi(r){return(e,t={})=>{const n=t.width,s=n&&r.matchPatterns[n]||r.matchPatterns[r.defaultMatchWidth],i=e.match(s);if(!i)return null;const a=i[0],l=n&&r.parsePatterns[n]||r.parsePatterns[r.defaultParseWidth],u=Array.isArray(l)?L3(l,m=>m.test(a)):O3(l,m=>m.test(a));let d;d=r.valueCallback?r.valueCallback(u):u,d=t.valueCallback?t.valueCallback(d):d;const h=e.slice(a.length);return{value:d,rest:h}}}function O3(r,e){for(const t in r)if(Object.prototype.hasOwnProperty.call(r,t)&&e(r[t]))return t}function L3(r,e){for(let t=0;t<r.length;t++)if(e(r[t]))return t}function V3(r){return(e,t={})=>{const n=e.match(r.matchPattern);if(!n)return null;const s=n[0],i=e.match(r.parsePattern);if(!i)return null;let a=r.valueCallback?r.valueCallback(i[0]):i[0];a=t.valueCallback?t.valueCallback(a):a;const l=e.slice(s.length);return{value:a,rest:l}}}const F3=/^(\d+)(th|st|nd|rd)?/i,U3=/\d+/i,$3={narrow:/^(b|a)/i,abbreviated:/^(b\.?\s?c\.?|b\.?\s?c\.?\s?e\.?|a\.?\s?d\.?|c\.?\s?e\.?)/i,wide:/^(before christ|before common era|anno domini|common era)/i},B3={any:[/^b/i,/^(a|c)/i]},z3={narrow:/^[1234]/i,abbreviated:/^q[1234]/i,wide:/^[1234](th|st|nd|rd)? quarter/i},q3={any:[/1/i,/2/i,/3/i,/4/i]},H3={narrow:/^[jfmasond]/i,abbreviated:/^(jan|feb|mar|apr|may|jun|jul|aug|sep|oct|nov|dec)/i,wide:/^(january|february|march|april|may|june|july|august|september|october|november|december)/i},W3={narrow:[/^j/i,/^f/i,/^m/i,/^a/i,/^m/i,/^j/i,/^j/i,/^a/i,/^s/i,/^o/i,/^n/i,/^d/i],any:[/^ja/i,/^f/i,/^mar/i,/^ap/i,/^may/i,/^jun/i,/^jul/i,/^au/i,/^s/i,/^o/i,/^n/i,/^d/i]},G3={narrow:/^[smtwf]/i,short:/^(su|mo|tu|we|th|fr|sa)/i,abbreviated:/^(sun|mon|tue|wed|thu|fri|sat)/i,wide:/^(sunday|monday|tuesday|wednesday|thursday|friday|saturday)/i},K3={narrow:[/^s/i,/^m/i,/^t/i,/^w/i,/^t/i,/^f/i,/^s/i],any:[/^su/i,/^m/i,/^tu/i,/^w/i,/^th/i,/^f/i,/^sa/i]},Q3={narrow:/^(a|p|mi|n|(in the|at) (morning|afternoon|evening|night))/i,any:/^([ap]\.?\s?m\.?|midnight|noon|(in the|at) (morning|afternoon|evening|night))/i},Y3={any:{am:/^a/i,pm:/^p/i,midnight:/^mi/i,noon:/^no/i,morning:/morning/i,afternoon:/afternoon/i,evening:/evening/i,night:/night/i}},X3={ordinalNumber:V3({matchPattern:F3,parsePattern:U3,valueCallback:r=>parseInt(r,10)}),era:mi({matchPatterns:$3,defaultMatchWidth:"wide",parsePatterns:B3,defaultParseWidth:"any"}),quarter:mi({matchPatterns:z3,defaultMatchWidth:"wide",parsePatterns:q3,defaultParseWidth:"any",valueCallback:r=>r+1}),month:mi({matchPatterns:H3,defaultMatchWidth:"wide",parsePatterns:W3,defaultParseWidth:"any"}),day:mi({matchPatterns:G3,defaultMatchWidth:"wide",parsePatterns:K3,defaultParseWidth:"any"}),dayPeriod:mi({matchPatterns:Q3,defaultMatchWidth:"any",parsePatterns:Y3,defaultParseWidth:"any"})},J3={code:"en-US",formatDistance:w3,formatLong:N3,formatRelative:k3,localize:D3,match:X3,options:{weekStartsOn:0,firstWeekContainsDate:1}};function Z3(r){const e=fr(r);return p3(e,b3(e))+1}function eL(r){const e=fr(r),t=+ec(e)-+g3(e);return Math.round(t/yT)+1}function bT(r,e){var h,m,g,x;const t=fr(r),n=t.getFullYear(),s=Yc(),i=(e==null?void 0:e.firstWeekContainsDate)??((m=(h=e==null?void 0:e.locale)==null?void 0:h.options)==null?void 0:m.firstWeekContainsDate)??s.firstWeekContainsDate??((x=(g=s.locale)==null?void 0:g.options)==null?void 0:x.firstWeekContainsDate)??1,a=ks(r,0);a.setFullYear(n+1,0,i),a.setHours(0,0,0,0);const l=Wi(a,e),u=ks(r,0);u.setFullYear(n,0,i),u.setHours(0,0,0,0);const d=Wi(u,e);return t.getTime()>=l.getTime()?n+1:t.getTime()>=d.getTime()?n:n-1}function tL(r,e){var l,u,d,h;const t=Yc(),n=(e==null?void 0:e.firstWeekContainsDate)??((u=(l=e==null?void 0:e.locale)==null?void 0:l.options)==null?void 0:u.firstWeekContainsDate)??t.firstWeekContainsDate??((h=(d=t.locale)==null?void 0:d.options)==null?void 0:h.firstWeekContainsDate)??1,s=bT(r,e),i=ks(r,0);return i.setFullYear(s,0,n),i.setHours(0,0,0,0),Wi(i,e)}function rL(r,e){const t=fr(r),n=+Wi(t,e)-+tL(t,e);return Math.round(n/yT)+1}function je(r,e){const t=r<0?"-":"",n=Math.abs(r).toString().padStart(e,"0");return t+n}const nn={y(r,e){const t=r.getFullYear(),n=t>0?t:1-t;return je(e==="yy"?n%100:n,e.length)},M(r,e){const t=r.getMonth();return e==="M"?String(t+1):je(t+1,2)},d(r,e){return je(r.getDate(),e.length)},a(r,e){const t=r.getHours()/12>=1?"pm":"am";switch(e){case"a":case"aa":return t.toUpperCase();case"aaa":return t;case"aaaaa":return t[0];case"aaaa":default:return t==="am"?"a.m.":"p.m."}},h(r,e){return je(r.getHours()%12||12,e.length)},H(r,e){return je(r.getHours(),e.length)},m(r,e){return je(r.getMinutes(),e.length)},s(r,e){return je(r.getSeconds(),e.length)},S(r,e){const t=e.length,n=r.getMilliseconds(),s=Math.trunc(n*Math.pow(10,t-3));return je(s,e.length)}},Vs={midnight:"midnight",noon:"noon",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"},Sy={G:function(r,e,t){const n=r.getFullYear()>0?1:0;switch(e){case"G":case"GG":case"GGG":return t.era(n,{width:"abbreviated"});case"GGGGG":return t.era(n,{width:"narrow"});case"GGGG":default:return t.era(n,{width:"wide"})}},y:function(r,e,t){if(e==="yo"){const n=r.getFullYear(),s=n>0?n:1-n;return t.ordinalNumber(s,{unit:"year"})}return nn.y(r,e)},Y:function(r,e,t,n){const s=bT(r,n),i=s>0?s:1-s;if(e==="YY"){const a=i%100;return je(a,2)}return e==="Yo"?t.ordinalNumber(i,{unit:"year"}):je(i,e.length)},R:function(r,e){const t=xT(r);return je(t,e.length)},u:function(r,e){const t=r.getFullYear();return je(t,e.length)},Q:function(r,e,t){const n=Math.ceil((r.getMonth()+1)/3);switch(e){case"Q":return String(n);case"QQ":return je(n,2);case"Qo":return t.ordinalNumber(n,{unit:"quarter"});case"QQQ":return t.quarter(n,{width:"abbreviated",context:"formatting"});case"QQQQQ":return t.quarter(n,{width:"narrow",context:"formatting"});case"QQQQ":default:return t.quarter(n,{width:"wide",context:"formatting"})}},q:function(r,e,t){const n=Math.ceil((r.getMonth()+1)/3);switch(e){case"q":return String(n);case"qq":return je(n,2);case"qo":return t.ordinalNumber(n,{unit:"quarter"});case"qqq":return t.quarter(n,{width:"abbreviated",context:"standalone"});case"qqqqq":return t.quarter(n,{width:"narrow",context:"standalone"});case"qqqq":default:return t.quarter(n,{width:"wide",context:"standalone"})}},M:function(r,e,t){const n=r.getMonth();switch(e){case"M":case"MM":return nn.M(r,e);case"Mo":return t.ordinalNumber(n+1,{unit:"month"});case"MMM":return t.month(n,{width:"abbreviated",context:"formatting"});case"MMMMM":return t.month(n,{width:"narrow",context:"formatting"});case"MMMM":default:return t.month(n,{width:"wide",context:"formatting"})}},L:function(r,e,t){const n=r.getMonth();switch(e){case"L":return String(n+1);case"LL":return je(n+1,2);case"Lo":return t.ordinalNumber(n+1,{unit:"month"});case"LLL":return t.month(n,{width:"abbreviated",context:"standalone"});case"LLLLL":return t.month(n,{width:"narrow",context:"standalone"});case"LLLL":default:return t.month(n,{width:"wide",context:"standalone"})}},w:function(r,e,t,n){const s=rL(r,n);return e==="wo"?t.ordinalNumber(s,{unit:"week"}):je(s,e.length)},I:function(r,e,t){const n=eL(r);return e==="Io"?t.ordinalNumber(n,{unit:"week"}):je(n,e.length)},d:function(r,e,t){return e==="do"?t.ordinalNumber(r.getDate(),{unit:"date"}):nn.d(r,e)},D:function(r,e,t){const n=Z3(r);return e==="Do"?t.ordinalNumber(n,{unit:"dayOfYear"}):je(n,e.length)},E:function(r,e,t){const n=r.getDay();switch(e){case"E":case"EE":case"EEE":return t.day(n,{width:"abbreviated",context:"formatting"});case"EEEEE":return t.day(n,{width:"narrow",context:"formatting"});case"EEEEEE":return t.day(n,{width:"short",context:"formatting"});case"EEEE":default:return t.day(n,{width:"wide",context:"formatting"})}},e:function(r,e,t,n){const s=r.getDay(),i=(s-n.weekStartsOn+8)%7||7;switch(e){case"e":return String(i);case"ee":return je(i,2);case"eo":return t.ordinalNumber(i,{unit:"day"});case"eee":return t.day(s,{width:"abbreviated",context:"formatting"});case"eeeee":return t.day(s,{width:"narrow",context:"formatting"});case"eeeeee":return t.day(s,{width:"short",context:"formatting"});case"eeee":default:return t.day(s,{width:"wide",context:"formatting"})}},c:function(r,e,t,n){const s=r.getDay(),i=(s-n.weekStartsOn+8)%7||7;switch(e){case"c":return String(i);case"cc":return je(i,e.length);case"co":return t.ordinalNumber(i,{unit:"day"});case"ccc":return t.day(s,{width:"abbreviated",context:"standalone"});case"ccccc":return t.day(s,{width:"narrow",context:"standalone"});case"cccccc":return t.day(s,{width:"short",context:"standalone"});case"cccc":default:return t.day(s,{width:"wide",context:"standalone"})}},i:function(r,e,t){const n=r.getDay(),s=n===0?7:n;switch(e){case"i":return String(s);case"ii":return je(s,e.length);case"io":return t.ordinalNumber(s,{unit:"day"});case"iii":return t.day(n,{width:"abbreviated",context:"formatting"});case"iiiii":return t.day(n,{width:"narrow",context:"formatting"});case"iiiiii":return t.day(n,{width:"short",context:"formatting"});case"iiii":default:return t.day(n,{width:"wide",context:"formatting"})}},a:function(r,e,t){const s=r.getHours()/12>=1?"pm":"am";switch(e){case"a":case"aa":return t.dayPeriod(s,{width:"abbreviated",context:"formatting"});case"aaa":return t.dayPeriod(s,{width:"abbreviated",context:"formatting"}).toLowerCase();case"aaaaa":return t.dayPeriod(s,{width:"narrow",context:"formatting"});case"aaaa":default:return t.dayPeriod(s,{width:"wide",context:"formatting"})}},b:function(r,e,t){const n=r.getHours();let s;switch(n===12?s=Vs.noon:n===0?s=Vs.midnight:s=n/12>=1?"pm":"am",e){case"b":case"bb":return t.dayPeriod(s,{width:"abbreviated",context:"formatting"});case"bbb":return t.dayPeriod(s,{width:"abbreviated",context:"formatting"}).toLowerCase();case"bbbbb":return t.dayPeriod(s,{width:"narrow",context:"formatting"});case"bbbb":default:return t.dayPeriod(s,{width:"wide",context:"formatting"})}},B:function(r,e,t){const n=r.getHours();let s;switch(n>=17?s=Vs.evening:n>=12?s=Vs.afternoon:n>=4?s=Vs.morning:s=Vs.night,e){case"B":case"BB":case"BBB":return t.dayPeriod(s,{width:"abbreviated",context:"formatting"});case"BBBBB":return t.dayPeriod(s,{width:"narrow",context:"formatting"});case"BBBB":default:return t.dayPeriod(s,{width:"wide",context:"formatting"})}},h:function(r,e,t){if(e==="ho"){let n=r.getHours()%12;return n===0&&(n=12),t.ordinalNumber(n,{unit:"hour"})}return nn.h(r,e)},H:function(r,e,t){return e==="Ho"?t.ordinalNumber(r.getHours(),{unit:"hour"}):nn.H(r,e)},K:function(r,e,t){const n=r.getHours()%12;return e==="Ko"?t.ordinalNumber(n,{unit:"hour"}):je(n,e.length)},k:function(r,e,t){let n=r.getHours();return n===0&&(n=24),e==="ko"?t.ordinalNumber(n,{unit:"hour"}):je(n,e.length)},m:function(r,e,t){return e==="mo"?t.ordinalNumber(r.getMinutes(),{unit:"minute"}):nn.m(r,e)},s:function(r,e,t){return e==="so"?t.ordinalNumber(r.getSeconds(),{unit:"second"}):nn.s(r,e)},S:function(r,e){return nn.S(r,e)},X:function(r,e,t){const n=r.getTimezoneOffset();if(n===0)return"Z";switch(e){case"X":return Iy(n);case"XXXX":case"XX":return ts(n);case"XXXXX":case"XXX":default:return ts(n,":")}},x:function(r,e,t){const n=r.getTimezoneOffset();switch(e){case"x":return Iy(n);case"xxxx":case"xx":return ts(n);case"xxxxx":case"xxx":default:return ts(n,":")}},O:function(r,e,t){const n=r.getTimezoneOffset();switch(e){case"O":case"OO":case"OOO":return"GMT"+jy(n,":");case"OOOO":default:return"GMT"+ts(n,":")}},z:function(r,e,t){const n=r.getTimezoneOffset();switch(e){case"z":case"zz":case"zzz":return"GMT"+jy(n,":");case"zzzz":default:return"GMT"+ts(n,":")}},t:function(r,e,t){const n=Math.trunc(r.getTime()/1e3);return je(n,e.length)},T:function(r,e,t){const n=r.getTime();return je(n,e.length)}};function jy(r,e=""){const t=r>0?"-":"+",n=Math.abs(r),s=Math.trunc(n/60),i=n%60;return i===0?t+String(s):t+String(s)+e+je(i,2)}function Iy(r,e){return r%60===0?(r>0?"-":"+")+je(Math.abs(r)/60,2):ts(r,e)}function ts(r,e=""){const t=r>0?"-":"+",n=Math.abs(r),s=je(Math.trunc(n/60),2),i=je(n%60,2);return t+s+e+i}const Ay=(r,e)=>{switch(r){case"P":return e.date({width:"short"});case"PP":return e.date({width:"medium"});case"PPP":return e.date({width:"long"});case"PPPP":default:return e.date({width:"full"})}},vT=(r,e)=>{switch(r){case"p":return e.time({width:"short"});case"pp":return e.time({width:"medium"});case"ppp":return e.time({width:"long"});case"pppp":default:return e.time({width:"full"})}},nL=(r,e)=>{const t=r.match(/(P+)(p+)?/)||[],n=t[1],s=t[2];if(!s)return Ay(r,e);let i;switch(n){case"P":i=e.dateTime({width:"short"});break;case"PP":i=e.dateTime({width:"medium"});break;case"PPP":i=e.dateTime({width:"long"});break;case"PPPP":default:i=e.dateTime({width:"full"});break}return i.replace("{{date}}",Ay(n,e)).replace("{{time}}",vT(s,e))},sL={p:vT,P:nL},oL=/^D+$/,iL=/^Y+$/,aL=["D","DD","YY","YYYY"];function lL(r){return oL.test(r)}function cL(r){return iL.test(r)}function uL(r,e,t){const n=dL(r,e,t);if(console.warn(n),aL.includes(r))throw new RangeError(n)}function dL(r,e,t){const n=r[0]==="Y"?"years":"days of the month";return`Use \`${r.toLowerCase()}\` instead of \`${r}\` (in \`${e}\`) for formatting ${n} to the input \`${t}\`; see: https://github.com/date-fns/date-fns/blob/master/docs/unicodeTokens.md`}const hL=/[yYQqMLwIdDecihHKkms]o|(\w)\1*|''|'(''|[^'])+('|$)|./g,fL=/P+p+|P+|p+|''|'(''|[^'])+('|$)|./g,mL=/^'([^]*?)'?$/,pL=/''/g,gL=/[a-zA-Z]/;function Ry(r,e,t){var h,m,g,x;const n=Yc(),s=n.locale??J3,i=n.firstWeekContainsDate??((m=(h=n.locale)==null?void 0:h.options)==null?void 0:m.firstWeekContainsDate)??1,a=n.weekStartsOn??((x=(g=n.locale)==null?void 0:g.options)==null?void 0:x.weekStartsOn)??0,l=fr(r);if(!x3(l))throw new RangeError("Invalid time value");let u=e.match(fL).map(S=>{const b=S[0];if(b==="p"||b==="P"){const v=sL[b];return v(S,s.formatLong)}return S}).join("").match(hL).map(S=>{if(S==="''")return{isToken:!1,value:"'"};const b=S[0];if(b==="'")return{isToken:!1,value:yL(S)};if(Sy[b])return{isToken:!0,value:S};if(b.match(gL))throw new RangeError("Format string contains an unescaped latin alphabet character `"+b+"`");return{isToken:!1,value:S}});s.localize.preprocessor&&(u=s.localize.preprocessor(l,u));const d={firstWeekContainsDate:i,weekStartsOn:a,locale:s};return u.map(S=>{if(!S.isToken)return S.value;const b=S.value;(cL(b)||lL(b))&&uL(b,e,String(r));const v=Sy[b[0]];return v(l,b,s.localize,d)}).join("")}function yL(r){const e=r.match(mL);return e?e[1].replace(pL,"'"):r}const St=(r,e=!1)=>`/Avatars/${e?"Premium_Avatars":"Default_Avatars"}/${r}`,xL=[{id:"Metal-Drummer-Cat",name:"Metal Drummer Cat",url:St("Metal-Drummer-Cat.png"),description:"A fierce cat drummer ready to rock",category:"free"},{id:"Metal-Bear-Bassist",name:"Metal Bear Bassist",url:St("Metal-Bear-Bassist.png"),description:"A powerful bear with bass skills",category:"free"},{id:"Metal-Skull-Guitarist",name:"Metal Skull Guitarist",url:St("Metal-Skull-Guitarist.png"),description:"A skull-headed guitar master",category:"free"},{id:"Metal-Wolf-Singer",name:"Metal Wolf Singer",url:St("Metal-Wolf-Singer.png"),description:"A howling wolf vocalist",category:"free"},{id:"Rock-Owl-Guitarist",name:"Rock Owl Guitarist",url:St("Rock-Owl-Guitarist.png"),description:"A wise owl shredding the guitar",category:"free"}],bL=[{id:"Bass-Bat",name:"Bass Bat",url:St("Bass-Bat.jpeg",!0),description:"A bat with killer bass skills",category:"premium",jumpingElements:!0},{id:"Drum-Dragon",name:"Drum Dragon",url:St("Drum-Dragon.jpeg",!0),description:"A dragon that sets the rhythm on fire",category:"premium",jumpingElements:!0},{id:"Guitar-Goblin",name:"Guitar Goblin",url:St("Guitar-Goblin.jpeg",!0),description:"A mischievous goblin with guitar magic",category:"premium",jumpingElements:!0},{id:"Headbanger-Hamster",name:"Headbanger Hamster",url:St("Headbanger-Hamster.jpeg",!0),description:"A tiny hamster with massive headbanging energy",category:"premium",jumpingElements:!0},{id:"Metal-Cat",name:"Metal Cat",url:St("Metal-Cat.jpeg",!0),description:"A fierce feline with metal attitude",category:"premium",jumpingElements:!0},{id:"Metal-Queen",name:"Metal Queen",url:St("Metal-Queen.jpeg",!0),description:"A regal queen of metal",category:"premium",jumpingElements:!0},{id:"Mosh-Pit-Monster",name:"Mosh Pit Monster",url:St("Mosh-Pit-Monster.jpeg",!0),description:"A monster born in the mosh pit",category:"premium",jumpingElements:!0},{id:"Punk-Panda",name:"Punk Panda",url:St("Punk-Panda.jpeg",!0),description:"A rebellious panda with punk spirit",category:"premium",jumpingElements:!0},{id:"Rebel-Raccoon",name:"Rebel Raccoon",url:St("Rebel-Raccoon.jpeg",!0),description:"A raccoon that breaks all the rules",category:"premium",jumpingElements:!0},{id:"Rock-Unicorn",name:"Rock Unicorn",url:St("Rock-Unicorn.jpeg",!0),description:"A magical unicorn that rocks hard",category:"premium",jumpingElements:!0}];function vL({isOpen:r,onClose:e,currentAvatar:t,onAvatarUpdate:n,userID:s}){const[i,a]=p.useState(t||""),[l,u]=p.useState(!1),[d,h]=p.useState(!1),m=p.useRef(null),{colors:g,isDarkMode:x}=ue(),{toast:S}=Sr(),b=async E=>{var N;const T=(N=E.target.files)==null?void 0:N[0];if(T){if(!T.type.startsWith("image/")){S({title:"Invalid File",description:"Please select an image file.",variant:"destructive"});return}if(T.size>5*1024*1024){S({title:"File Too Large",description:"Please select an image smaller than 5MB.",variant:"destructive"});return}u(!0);try{const P=await I_(T,s);a(P),S({title:"Upload Successful",description:"Your profile image has been uploaded."})}catch(P){S({title:"Upload Failed",description:P.message||"Failed to upload image. Please try again.",variant:"destructive"})}finally{u(!1)}}},v=async()=>{if(i){h(!0);try{n(i),S({title:"Avatar Updated",description:"Your profile avatar has been updated successfully."}),e()}catch(E){S({title:"Update Failed",description:E.message||"Failed to update avatar. Please try again.",variant:"destructive"})}finally{h(!1)}}};return o.jsx(Wf,{open:r,onOpenChange:e,children:o.jsxs(zc,{className:"sm:max-w-2xl max-h-[80vh] overflow-y-auto",style:{backgroundColor:g.cardBackground,borderColor:g.primary,color:g.text},children:[o.jsx(qc,{children:o.jsxs(Hc,{className:"flex items-center gap-3 text-xl font-bold",children:[o.jsx(Dt,{className:"h-6 w-6",style:{color:g.primary}}),"Choose Your Avatar"]})}),o.jsxs(Jf,{defaultValue:"avatars",className:"w-full",children:[o.jsxs(Qc,{className:"grid w-full grid-cols-2 mb-6",style:{backgroundColor:g.background},children:[o.jsx(Ft,{value:"avatars",style:{color:g.text},children:"Pre-made Avatars"}),o.jsx(Ft,{value:"upload",style:{color:g.text},children:"Upload Custom"})]}),o.jsxs(Ut,{value:"avatars",children:[o.jsxs("div",{className:"mb-8",children:[o.jsxs("h3",{className:"flex items-center gap-2 text-lg font-bold mb-4",style:{color:g.text},children:[o.jsx(Dt,{className:"h-5 w-5"}),"Free Avatars"]}),o.jsx("div",{className:"grid grid-cols-5 gap-4",children:xL.map(E=>o.jsxs("div",{className:`relative cursor-pointer rounded-lg p-2 transition-all duration-200 hover:scale-105 ${i===E.url?"ring-2 ring-offset-2":""}`,style:{borderColor:i===E.url?g.primary:"transparent",borderWidth:i===E.url?"2px":"0px","--tw-ring-color":g.primary,"--tw-ring-offset-color":x?"#000000":"#ffffff"},onClick:()=>a(E.url),children:[o.jsx("div",{className:"aspect-square rounded-lg overflow-hidden bg-gray-800",children:o.jsx("img",{src:E.url,alt:E.name,className:"w-full h-full object-cover",onError:T=>{const N=T.target;N.src=`https://ui-avatars.com/api/?name=${encodeURIComponent(E.name)}&background=f97316&color=fff&size=128`}})}),o.jsx("p",{className:"text-xs text-center mt-2 truncate",style:{color:g.text},children:E.name}),i===E.url&&o.jsx("div",{className:"absolute -top-2 -right-2 w-6 h-6 rounded-full flex items-center justify-center shadow-lg border-2 border-white",style:{backgroundColor:g.primary,zIndex:30},children:o.jsx("span",{className:"text-xs text-white font-bold",children:"✓"})})]},E.id))})]}),o.jsxs("div",{className:"mb-6",children:[o.jsxs("h3",{className:"flex items-center gap-2 text-lg font-bold mb-4",style:{color:g.primary},children:[o.jsx(dr,{className:"h-5 w-5"}),"Premium Avatars",o.jsx(Ho,{className:"h-4 w-4",style:{color:g.accent}})]}),o.jsx("div",{className:"grid grid-cols-5 gap-4",children:bL.map(E=>o.jsxs("div",{className:`relative cursor-pointer rounded-lg border-2 p-2 transition-all duration-200 hover:scale-105 ${i===E.url?"ring-2 ring-offset-2":""}`,style:{borderColor:i===E.url?g.primary:g.accent,background:`linear-gradient(135deg, ${g.accent}20, ${g.accent}10)`,"--tw-ring-color":g.primary,"--tw-ring-offset-color":x?"#000000":"#ffffff"},onClick:()=>a(E.url),children:[o.jsx("div",{className:"absolute -top-2 -right-2 z-20",children:o.jsx("div",{className:"rounded-full p-1",style:{background:`linear-gradient(to right, ${g.accent}, ${g.primary})`},children:o.jsx(dr,{className:"h-3 w-3 text-black"})})}),o.jsxs("div",{className:`aspect-square rounded-lg ${E.jumpingElements?"premium-avatar-container":"overflow-hidden"} bg-gradient-to-br from-gray-800 to-gray-900 relative`,children:[o.jsx("img",{src:E.url,alt:E.name,className:"w-full h-full object-cover rounded-lg",style:{clipPath:E.jumpingElements?"polygon(5% 0%, 95% 0%, 100% 5%, 100% 95%, 95% 100%, 5% 100%, 0% 95%, 0% 5%)":void 0}}),E.jumpingElements&&o.jsxs(o.Fragment,{children:[o.jsx("div",{className:"jumping-element top-0 left-0 text-lg",style:{color:g.accent},children:"🤘"}),o.jsx("div",{className:"jumping-element top-0 right-0 text-orange-500 text-lg",children:"⚡"}),o.jsx("div",{className:"jumping-element bottom-0 left-0 text-red-500 text-lg",children:"🔥"}),o.jsx("div",{className:"jumping-element bottom-0 right-0 text-purple-500 text-lg",children:"💀"})]})]}),o.jsx("p",{className:"text-xs text-center mt-2 truncate font-semibold",style:{color:g.accent},children:E.name}),i===E.url&&o.jsx("div",{className:"absolute -top-2 -right-2 w-6 h-6 rounded-full flex items-center justify-center shadow-lg border-2 border-white",style:{backgroundColor:g.primary,zIndex:30},children:o.jsx("span",{className:"text-xs text-white font-bold",children:"✓"})})]},E.id))})]})]}),o.jsx(Ut,{value:"upload",children:o.jsxs("div",{className:"space-y-6",children:[o.jsxs("div",{className:"text-center",children:[o.jsx("div",{className:"mx-auto w-32 h-32 rounded-full flex items-center justify-center cursor-pointer transition-colors",onClick:()=>{var E;return(E=m.current)==null?void 0:E.click()},style:{},children:i&&i.startsWith("data:")?o.jsx("img",{src:i,alt:"Uploaded avatar",className:"w-full h-full rounded-full object-cover"}):i&&!i.startsWith("/avatars/")?o.jsx("img",{src:i,alt:"Current avatar",className:"w-full h-full rounded-full object-cover"}):o.jsxs("div",{className:"text-center",children:[o.jsx(Xw,{className:"mx-auto h-8 w-8 mb-2",style:{color:g.text}}),o.jsx("p",{className:"text-sm",style:{color:g.text},children:l?"Uploading...":"Click to upload"})]})}),o.jsx("input",{ref:m,type:"file",accept:"image/*",onChange:b,className:"hidden",disabled:l}),o.jsxs(Z,{type:"button",variant:"outline",onClick:()=>{var E;return(E=m.current)==null?void 0:E.click()},disabled:l,className:"mt-4 focus:outline-none focus:ring-0",style:{borderColor:g.primary,color:g.primary},children:[o.jsx(o_,{className:"h-4 w-4 mr-2"}),l?"Uploading...":"Choose File"]})]}),o.jsxs("div",{className:"text-center text-sm opacity-75",style:{color:g.text},children:[o.jsx("p",{children:"Supported formats: JPG, PNG, GIF"}),o.jsx("p",{children:"Maximum size: 5MB"}),o.jsx("p",{children:"Recommended: 200x200 pixels or larger"})]})]})})]}),o.jsxs("div",{className:"flex justify-between pt-4 border-t",style:{borderColor:"#374151"},children:[o.jsx(Z,{type:"button",variant:"ghost",onClick:e,className:"focus:outline-none focus:ring-0",style:{color:g.text},children:"Cancel"}),o.jsx(Z,{type:"button",onClick:v,disabled:!i||d,className:"px-6 focus:outline-none focus:ring-0",style:{backgroundColor:g.primary,color:"white",opacity:!i||d?.6:1},children:d?"Saving...":"Save Avatar"})]})]})})}function wL(){const{user:r,signOut:e}=Ht(),[,t]=zo(),{colors:n,isDarkMode:s}=ue(),{toast:i}=Sr(),a=f4(),u=new URLSearchParams(a).get("section")||"profile",[d,h]=p.useState(u),[m,g]=p.useState({displayName:"",phoneNumber:"",email:"",profileImageUrl:""}),[x,S]=p.useState(null),[b,v]=p.useState(!0),[E,T]=p.useState(!1),[N,P]=p.useState(!1),[F,U]=p.useState(!1),[A,w]=p.useState(!1),[C,j]=p.useState(!1),[_,M]=p.useState(!1),[I,X]=p.useState([]);p.useEffect(()=>{h(u)},[u]),p.useEffect(()=>{r||t("/")},[r,t]),p.useEffect(()=>{var W;r&&g({displayName:r.displayName||((W=r.email)==null?void 0:W.split("@")[0])||"",phoneNumber:r.phoneNumber||"",email:r.email||"",profileImageUrl:r.photoURL||""})},[r]),p.useEffect(()=>{(async()=>{if(r){v(!0);try{const J=await zs(r.uid,r.email||"");J&&(S(J),g({displayName:`${J.firstName} ${J.lastName}`.trim(),phoneNumber:J.phoneNumber||"",email:J.emailAddress||r.email||"",profileImageUrl:J.userProfileImage||r.photoURL||""}))}catch(J){console.error("Failed to load user profile:",J)}finally{v(!1)}}})()},[r]),p.useEffect(()=>{r&&le()},[r]);const le=async()=>{try{const W=await fetch("/api/user/submissions",{credentials:"include"});if(W.ok){const J=await W.json();X(J)}}catch(W){console.error("Failed to load submissions:",W)}},he=async()=>{j(!0);try{const W=m.displayName.trim().split(" "),J=W[0]||"",Ee=W.slice(1).join(" ")||"";if(!x)throw new Error("User profile not found");if(await lo(x.userID,{firstName:J,lastName:Ee,phoneNumber:m.phoneNumber,userProfileImage:m.profileImageUrl,updatedAt:new Date().toISOString()}))S(ft=>ft?{...ft,firstName:J,lastName:Ee,phoneNumber:m.phoneNumber,userProfileImage:m.profileImageUrl,updatedAt:new Date().toISOString()}:null),i({title:"Profile Updated",description:"Your profile has been saved successfully."});else throw new Error("Failed to update profile")}catch(W){i({title:"Update Failed",description:W.message||"Failed to update profile.",variant:"destructive"})}finally{j(!1)}},ee=async W=>{var Ee;const J=(Ee=W.target.files)==null?void 0:Ee[0];if(J){M(!0);try{if(!x)throw new Error("User profile not found");const ht=await I_(J,x.userID);if(await lo(x.userID,{userProfileImage:ht,updatedAt:new Date().toISOString()}))g(Lt=>({...Lt,profileImageUrl:ht})),S(Lt=>Lt?{...Lt,userProfileImage:ht,updatedAt:new Date().toISOString()}:null),i({title:"Image Uploaded",description:"Your profile image has been updated successfully."});else throw new Error("Failed to update profile")}catch(ht){i({title:"Upload Failed",description:ht.message||"Failed to upload image.",variant:"destructive"})}finally{M(!1),T(!1)}}},R=async W=>{try{if(!x)throw new Error("User profile not found");if(await lo(x.userID,{userProfileImage:W,updatedAt:new Date().toISOString()}))g(Ee=>({...Ee,profileImageUrl:W})),S(Ee=>Ee?{...Ee,userProfileImage:W,updatedAt:new Date().toISOString()}:null),i({title:"Avatar Updated",description:"Your avatar has been updated successfully."});else throw new Error("Failed to update avatar")}catch(J){i({title:"Update Failed",description:J.message||"Failed to update avatar.",variant:"destructive"})}finally{P(!1)}},z=async()=>{try{if(!(await fetch("/api/subscription/cancel",{method:"POST",credentials:"include"})).ok)throw new Error("Failed to cancel subscription");U(!1),i({title:"Subscription Cancelled",description:"Your subscription has been cancelled and will end at the next billing cycle."})}catch(W){i({title:"Cancellation Failed",description:W.message||"Failed to cancel subscription.",variant:"destructive"})}},H=async()=>{await e(),t("/")};if(!r)return null;const xe=[{id:"profile",label:"Profile",icon:Dt},{id:"submissions",label:"Submission Requests",icon:Gd}],ze=`linear-gradient(135deg, ${n.primary} 0%, ${n.primary}80 100%)`;return o.jsxs("div",{className:"min-h-screen pt-20",style:{backgroundColor:n.background},children:[o.jsx("div",{className:"max-w-7xl mx-auto px-4 py-8",children:o.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-4 gap-8",children:[o.jsx("div",{className:"lg:col-span-1",children:o.jsx(se,{className:"border-2 shadow-xl overflow-hidden",style:{backgroundColor:s?"rgba(0, 0, 0, 0.5)":"rgba(255, 255, 255, 0.95)",borderColor:`${n.primary}40`,backdropFilter:"blur(10px)"},children:o.jsx(oe,{className:"p-0",children:o.jsxs("div",{className:"space-y-1 p-2",children:[(xe||[]).map(W=>o.jsxs("button",{className:`w-full flex items-center gap-3 px-4 py-3 rounded-lg font-semibold transition-all duration-200 ${d===W.id?"shadow-lg":"hover:shadow-md"}`,style:{backgroundColor:d===W.id?n.primary:"transparent",color:d===W.id?"white":n.text},onClick:()=>h(W.id),children:[o.jsx(W.icon,{size:20}),o.jsx("span",{children:W.label})]},W.id)),o.jsx("div",{className:"my-4 mx-4 border-t",style:{borderColor:`${n.primary}20`}}),o.jsxs("button",{className:"w-full flex items-center gap-3 px-4 py-3 rounded-lg font-semibold transition-all duration-200 hover:shadow-md",style:{backgroundColor:"transparent",color:"#EF4444"},onClick:()=>w(!0),children:[o.jsx(Qd,{size:20}),o.jsx("span",{children:"Logout"})]})]})})})}),o.jsxs("div",{className:"lg:col-span-3",children:[d==="profile"&&o.jsxs(se,{className:"border-2 shadow-xl",style:{backgroundColor:s?"rgba(0, 0, 0, 0.5)":"rgba(255, 255, 255, 0.95)",borderColor:`${n.primary}40`,backdropFilter:"blur(10px)"},children:[o.jsxs(Ye,{children:[o.jsx(Je,{className:"text-2xl font-black",style:{color:n.text},children:"Profile Settings"}),o.jsx(ml,{style:{color:`${n.text}80`},children:"Manage your account information and preferences"})]}),o.jsx(oe,{className:"space-y-6",children:b?o.jsxs("div",{className:"flex items-center justify-center py-8",children:[o.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2",style:{borderColor:n.primary}}),o.jsx("span",{className:"ml-3",style:{color:n.text},children:"Loading profile..."})]}):o.jsxs(o.Fragment,{children:[o.jsxs("div",{className:"flex items-start space-x-6",children:[o.jsxs("div",{className:"relative",children:[o.jsx("div",{className:"w-24 h-24 rounded-full shadow-lg ring-4 ring-offset-2",style:{background:m.profileImageUrl?`url(${m.profileImageUrl}) center/cover`:ze,"--ring-color":n.primary,"--ring-offset-color":s?"#000000":"#ffffff"},children:!m.profileImageUrl&&o.jsx("div",{className:"w-full h-full flex items-center justify-center",children:o.jsx(Dt,{size:40,className:"text-white"})})}),o.jsxs(X_,{open:E,onOpenChange:T,children:[o.jsx(J_,{asChild:!0,children:o.jsx("button",{className:"absolute bottom-0 right-0 w-8 h-8 rounded-full shadow-md flex items-center justify-center transition-all duration-200 hover:scale-110 focus:outline-none focus:ring-0",style:{backgroundColor:n.primary,border:`2px solid ${s?"#000000":n.primary}`},title:"Change profile picture","aria-label":"Change profile picture",children:o.jsx(Xw,{size:16,className:"text-white"})})}),o.jsxs(qf,{align:"start",className:"w-48",style:{backgroundColor:s?"rgba(0, 0, 0, 0.95)":"rgba(255, 255, 255, 0.95)",borderColor:`${n.primary}40`},children:[o.jsxs(co,{disabled:_,children:[o.jsx("label",{htmlFor:"image-upload",className:"flex items-center gap-2 cursor-pointer w-full",children:_?o.jsxs(o.Fragment,{children:[o.jsx("div",{className:"animate-spin rounded-full h-4 w-4 border-b-2",style:{borderColor:n.primary}}),o.jsx("span",{children:"Uploading..."})]}):o.jsxs(o.Fragment,{children:[o.jsx(o_,{size:16}),o.jsx("span",{children:"Upload Photo"})]})}),o.jsx("input",{id:"image-upload",type:"file",accept:"image/*",className:"hidden",onChange:ee,disabled:_})]}),o.jsxs(co,{onClick:()=>{P(!0),T(!1)},children:[o.jsx(dr,{size:16}),o.jsx("span",{children:"Premium Avatars"})]})]})]})]}),o.jsxs("div",{className:"flex-1 space-y-2",children:[o.jsx("h3",{className:"font-bold text-lg",style:{color:n.text},children:"Profile Picture"}),o.jsx("p",{className:"text-sm",style:{color:`${n.text}80`},children:"Upload a photo or choose from our premium avatar collection"})]})]}),o.jsxs("div",{className:"space-y-2",children:[o.jsx(Re,{htmlFor:"displayName",style:{color:n.text},children:"Display Name"}),o.jsx($e,{id:"displayName",value:m.displayName,onChange:W=>g(J=>({...J,displayName:W.target.value})),placeholder:"Enter your display name",className:"font-semibold",style:{backgroundColor:"transparent",borderColor:`${n.primary}40`,color:n.text}})]}),o.jsxs("div",{className:"space-y-2",children:[o.jsx(Re,{htmlFor:"email",style:{color:n.text},children:"Email Address"}),o.jsxs("div",{className:"flex items-center gap-2",children:[o.jsx($e,{id:"email",value:m.email,disabled:!0,className:"font-semibold",style:{backgroundColor:"transparent",borderColor:`${n.primary}40`,color:n.text,opacity:.7}}),(r==null?void 0:r.emailVerified)&&o.jsxs(Ke,{variant:"outline",className:"flex items-center gap-1",children:[o.jsx(Ks,{size:14}),"Verified"]})]})]}),o.jsxs("div",{className:"space-y-2",children:[o.jsx(Re,{htmlFor:"phoneNumber",style:{color:n.text},children:"Phone Number"}),o.jsxs("div",{className:"flex items-center gap-2",children:[o.jsx($e,{id:"phoneNumber",value:m.phoneNumber,onChange:W=>g(J=>({...J,phoneNumber:W.target.value})),placeholder:"+1 (555) 123-4567",className:"font-semibold",style:{backgroundColor:"transparent",borderColor:`${n.primary}40`,color:n.text}}),!1]})]}),o.jsx(Z,{onClick:he,disabled:C,className:"w-full font-bold shadow-lg",style:{backgroundColor:n.primary,color:"white"},children:C?"Saving...":"Save Changes"})]})})]}),d==="subscription"&&o.jsxs(se,{className:"border-2 shadow-xl",style:{backgroundColor:s?"rgba(0, 0, 0, 0.5)":"rgba(255, 255, 255, 0.95)",borderColor:`${n.primary}40`,backdropFilter:"blur(10px)"},children:[o.jsxs(Ye,{children:[o.jsx(Je,{className:"text-2xl font-black",style:{color:n.text},children:"Subscription Management"}),o.jsx(ml,{style:{color:`${n.text}80`},children:"Manage your subscription and billing information"})]}),o.jsxs(oe,{className:"space-y-6",children:[o.jsx("div",{className:"p-6 rounded-lg border-2",style:{borderColor:`${n.primary}40`},children:o.jsxs("div",{className:"flex items-start justify-between",children:[o.jsxs("div",{children:[o.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[o.jsx(dr,{size:24,style:{color:n.accent}}),o.jsx("h3",{className:"font-black text-xl",style:{color:n.text},children:"Legend Package"})]}),o.jsx("p",{className:"text-sm mb-4",style:{color:`${n.text}80`},children:"Premium access to all features"}),o.jsxs("div",{className:"space-y-2",children:[o.jsxs("div",{className:"flex items-center gap-2",children:[o.jsx(Ks,{size:16,style:{color:n.primary}}),o.jsx("span",{className:"text-sm",style:{color:n.text},children:"Unlimited song submissions"})]}),o.jsxs("div",{className:"flex items-center gap-2",children:[o.jsx(Ks,{size:16,style:{color:n.primary}}),o.jsx("span",{className:"text-sm",style:{color:n.text},children:"Premium avatars & badges"})]}),o.jsxs("div",{className:"flex items-center gap-2",children:[o.jsx(Ks,{size:16,style:{color:n.primary}}),o.jsx("span",{className:"text-sm",style:{color:n.text},children:"Early access to new features"})]})]})]}),o.jsxs("div",{className:"text-right",children:[o.jsx("p",{className:"font-black text-2xl",style:{color:n.primary},children:"$9.99"}),o.jsx("p",{className:"text-sm",style:{color:`${n.text}80`},children:"per month"})]})]})}),o.jsxs("div",{className:"space-y-4",children:[o.jsx("h4",{className:"font-bold",style:{color:n.text},children:"Billing Information"}),o.jsxs("div",{className:"space-y-3",children:[o.jsxs("div",{className:"flex items-center justify-between p-3 rounded-lg",style:{backgroundColor:`${n.primary}10`},children:[o.jsxs("div",{className:"flex items-center gap-3",children:[o.jsx(Wd,{size:20,style:{color:n.primary}}),o.jsx("span",{className:"font-semibold",style:{color:n.text},children:"•••• •••• •••• 4242"})]}),o.jsx(Ke,{variant:"outline",children:"Visa"})]}),o.jsxs("div",{className:"flex items-center justify-between p-3 rounded-lg",style:{backgroundColor:`${n.primary}10`},children:[o.jsxs("div",{className:"flex items-center gap-3",children:[o.jsx(os,{size:20,style:{color:n.primary}}),o.jsx("span",{className:"font-semibold",style:{color:n.text},children:"Next billing date"})]}),o.jsx("span",{style:{color:n.text},children:Ry(new Date(Date.now()+720*60*60*1e3),"MMM dd, yyyy")})]})]})]}),o.jsx("div",{className:"pt-4 border-t",style:{borderColor:`${n.primary}20`},children:o.jsx(Z,{variant:"outline",onClick:()=>U(!0),className:"w-full font-semibold focus:outline-none focus:ring-0",style:{borderColor:"#EF4444",color:"#EF4444"},children:"Cancel Subscription"})})]})]}),d==="submissions"&&o.jsxs(se,{className:"border-2 shadow-xl",style:{backgroundColor:s?"rgba(0, 0, 0, 0.5)":"rgba(255, 255, 255, 0.95)",borderColor:`${n.primary}40`,backdropFilter:"blur(10px)"},children:[o.jsxs(Ye,{children:[o.jsx(Je,{className:"text-2xl font-black",style:{color:n.text},children:"Submission Requests"}),o.jsx(ml,{style:{color:`${n.text}80`},children:"Track your song submission history"})]}),o.jsx(oe,{children:((I==null?void 0:I.length)||0)===0?o.jsxs("div",{className:"text-center py-12",children:[o.jsx(Gd,{size:48,className:"mx-auto mb-4 opacity-50",style:{color:n.primary}}),o.jsx("h3",{className:"font-bold text-lg mb-2",style:{color:n.text},children:"No Submissions Yet"}),o.jsx("p",{style:{color:`${n.text}80`},children:"You haven't submitted any songs yet"})]}):o.jsx("div",{className:"space-y-4",children:(I||[]).map(W=>o.jsx("div",{className:"p-4 rounded-lg border transition-all duration-200 hover:shadow-md",style:{borderColor:`${n.primary}20`,backgroundColor:`${n.primary}05`},children:o.jsxs("div",{className:"flex items-start justify-between",children:[o.jsxs("div",{children:[o.jsxs("h4",{className:"font-bold",style:{color:n.text},children:[W.artistName," - ",W.songTitle]}),o.jsxs("p",{className:"text-sm mt-1",style:{color:`${n.text}80`},children:["Submitted on ",Ry(new Date(W.createdAt),"MMM dd, yyyy")]})]}),o.jsx(Ke,{variant:W.status==="approved"?"default":W.status==="rejected"?"destructive":"secondary",children:W.status})]})},W.id))})})]})]})]})}),o.jsx(vL,{isOpen:N,onClose:()=>P(!1),currentAvatar:m.profileImageUrl,onAvatarUpdate:R,userID:(x==null?void 0:x.userID)||(r==null?void 0:r.uid)||""}),o.jsx(rh,{open:F,onOpenChange:U,children:o.jsxs(Gl,{style:{backgroundColor:s?"rgba(0, 0, 0, 0.95)":"rgba(255, 255, 255, 0.95)",borderColor:`${n.primary}40`},children:[o.jsxs(Kl,{children:[o.jsx(Yl,{className:"text-xl font-black",style:{color:n.text},children:"Cancel Subscription"}),o.jsxs(Xl,{style:{color:`${n.text}80`},children:[o.jsx(Zw,{className:"inline mr-2",size:16}),"Are you sure you want to cancel your subscription? You'll lose access to premium features at the end of your billing cycle."]})]}),o.jsxs(Ql,{children:[o.jsx(Zl,{style:{color:n.text},className:"focus:outline-none focus:ring-0",children:"Keep Subscription"}),o.jsx(Jl,{onClick:z,className:"bg-red-600 hover:bg-red-700 text-white focus:outline-none focus:ring-0",children:"Cancel Subscription"})]})]})}),o.jsx(rh,{open:A,onOpenChange:w,children:o.jsxs(Gl,{style:{backgroundColor:s?"rgba(0, 0, 0, 0.95)":"rgba(255, 255, 255, 0.95)",borderColor:`${n.primary}40`},children:[o.jsxs(Kl,{children:[o.jsx(Yl,{className:"text-xl font-black",style:{color:n.text},children:"Confirm Logout"}),o.jsx(Xl,{style:{color:`${n.text}80`},children:"Are you sure you want to log out of your account?"})]}),o.jsxs(Ql,{children:[o.jsx(Zl,{style:{color:n.text},className:"focus:outline-none focus:ring-0",children:"Cancel"}),o.jsx(Jl,{onClick:H,className:"bg-red-600 hover:bg-red-700 text-white focus:outline-none focus:ring-0",children:"Logout"})]})]})})]})}function _L(){return o.jsx(wL,{})}var TL="Separator",Py="horizontal",EL=["horizontal","vertical"],wT=p.forwardRef((r,e)=>{const{decorative:t,orientation:n=Py,...s}=r,i=NL(n)?n:Py,l=t?{role:"none"}:{"aria-orientation":i==="vertical"?i:void 0,role:"separator"};return o.jsx(De.div,{"data-orientation":i,...l,...s,ref:e})});wT.displayName=TL;function NL(r){return EL.includes(r)}var _T=wT;const Ve=p.forwardRef(({className:r,orientation:e="horizontal",decorative:t=!0,...n},s)=>o.jsx(_T,{ref:s,decorative:t,orientation:e,className:te("shrink-0 bg-border",e==="horizontal"?"h-[1px] w-full":"h-full w-[1px]",r),...n}));Ve.displayName=_T.displayName;function CL(){const[r,e]=p.useState(!0),[t,n]=p.useState(!1),[s,i]=p.useState(!1),[a,l]=p.useState({email:"",password:"",firstName:"",lastName:"",phoneNumber:"",confirmPassword:""}),{getColors:u,theme:d}=ue(),{toast:h}=Sr(),{register:m,signIn:g,signInWithGoogle:x,user:S}=Ht(),b=u();if(zo(),S)return window.location.href="/",null;const v=async T=>{T.preventDefault(),i(!0);try{if(r){const N=await g(a.email,a.password);N.success?(h({title:"Welcome Back!",description:"You have successfully signed in."}),window.location.href="/"):h({title:"Login Failed",description:N.error||"Please try again.",variant:"destructive"})}else{if(a.password!==a.confirmPassword){h({title:"Password Mismatch",description:"Passwords do not match.",variant:"destructive"}),i(!1);return}if(a.password.length<6){h({title:"Password Too Short",description:"Password must be at least 6 characters.",variant:"destructive"}),i(!1);return}const N=await m(a.email,a.password,a.firstName,a.lastName,a.phoneNumber);N.success?(h({title:"Account Created!",description:"Your account has been created successfully. Welcome to Spandex Salvation Radio!"}),window.location.href="/"):h({title:"Registration Failed",description:N.error||"Please try again.",variant:"destructive"})}}catch(N){console.error("Authentication error:",N),h({title:r?"Login Failed":"Registration Failed",description:N.message||"Please try again.",variant:"destructive"})}finally{i(!1)}},E=async()=>{try{i(!0),await x(),h({title:"Google Authentication Successful!",description:"Welcome to Spandex Salvation Radio!"}),window.location.href="/"}catch(T){console.error("Google authentication error:",T),h({title:"Google Authentication Failed",description:T.message||"Please try again.",variant:"destructive"})}finally{i(!1)}};return o.jsx("div",{className:te("min-h-screen flex items-center justify-center p-4",d==="light"?"bg-white":"bg-black"),children:o.jsxs(se,{className:"w-full max-w-md",children:[o.jsxs(Ye,{className:"space-y-4",children:[o.jsx("div",{className:"flex items-center space-x-2",children:o.jsx(uw,{href:"/",children:o.jsxs(Z,{variant:"ghost",size:"sm",children:[o.jsx(ma,{className:"h-4 w-4 mr-2"}),"Back to Home"]})})}),o.jsxs("div",{className:"text-center",children:[o.jsx(Je,{className:"text-2xl font-bold",children:r?"Welcome Back":"Create Account"}),o.jsx("p",{className:"text-muted-foreground mt-2",children:r?"Login to your Spandex Salvation account":"Join the metal revolution"})]})]}),o.jsxs(oe,{className:"space-y-6",children:[o.jsxs(Z,{type:"button",variant:"outline",className:"w-full bg-white text-black border-gray-300 hover:bg-gray-50",onClick:E,disabled:s,children:[o.jsx("img",{src:"/GoogleLogoIcon.png",alt:"Google",className:"w-4 h-4 mr-2"}),s?"Please wait...":r?"Continue with Google":"Sign Up with Google"]}),o.jsxs("div",{className:"relative",children:[o.jsx("div",{className:"absolute inset-0 flex items-center",children:o.jsx(Ve,{className:"w-full"})}),o.jsx("div",{className:"relative flex justify-center text-xs uppercase",children:o.jsx("span",{className:"bg-background px-2 text-muted-foreground",children:"Or continue with email"})})]}),o.jsxs("form",{onSubmit:v,className:"space-y-4",children:[!r&&o.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[o.jsxs("div",{children:[o.jsx(Re,{htmlFor:"firstName",children:"First Name"}),o.jsxs("div",{className:"relative",children:[o.jsx(Dt,{className:"absolute left-3 top-3 h-4 w-4 text-muted-foreground"}),o.jsx($e,{id:"firstName",type:"text",placeholder:"John",className:"pl-10",value:a.firstName,onChange:T=>l(N=>({...N,firstName:T.target.value})),required:!0})]})]}),o.jsxs("div",{children:[o.jsx(Re,{htmlFor:"lastName",children:"Last Name"}),o.jsxs("div",{className:"relative",children:[o.jsx(Dt,{className:"absolute left-3 top-3 h-4 w-4 text-muted-foreground"}),o.jsx($e,{id:"lastName",type:"text",placeholder:"Doe",className:"pl-10",value:a.lastName,onChange:T=>l(N=>({...N,lastName:T.target.value})),required:!0})]})]})]}),!r&&o.jsxs("div",{children:[o.jsx(Re,{htmlFor:"phoneNumber",children:"Phone Number (Optional)"}),o.jsxs("div",{className:"relative",children:[o.jsx(Dt,{className:"absolute left-3 top-3 h-4 w-4 text-muted-foreground"}),o.jsx($e,{id:"phoneNumber",type:"tel",placeholder:"+1 (555) 123-4567",className:"pl-10",value:a.phoneNumber,onChange:T=>l(N=>({...N,phoneNumber:T.target.value}))})]})]}),o.jsxs("div",{children:[o.jsx(Re,{htmlFor:"email",children:"Email"}),o.jsxs("div",{className:"relative",children:[o.jsx(ql,{className:"absolute left-3 top-3 h-4 w-4 text-muted-foreground"}),o.jsx($e,{id:"email",type:"email",placeholder:"john@example.com",className:"pl-10",value:a.email,onChange:T=>l(N=>({...N,email:T.target.value})),required:!0})]})]}),o.jsxs("div",{children:[o.jsx(Re,{htmlFor:"password",children:"Password"}),o.jsxs("div",{className:"relative",children:[o.jsx(Kd,{className:"absolute left-3 top-3 h-4 w-4 text-muted-foreground"}),o.jsx($e,{id:"password",type:t?"text":"password",placeholder:r?"Enter your password":"Create a password",className:"pl-10 pr-10",value:a.password,onChange:T=>l(N=>({...N,password:T.target.value})),required:!0}),o.jsx("button",{type:"button",onClick:()=>n(!t),className:"absolute right-3 top-3 text-muted-foreground hover:text-foreground",children:t?o.jsx(VM,{className:"h-4 w-4"}):o.jsx(t_,{className:"h-4 w-4"})})]})]}),!r&&o.jsxs("div",{children:[o.jsx(Re,{htmlFor:"confirmPassword",children:"Confirm Password"}),o.jsxs("div",{className:"relative",children:[o.jsx(Kd,{className:"absolute left-3 top-3 h-4 w-4 text-muted-foreground"}),o.jsx($e,{id:"confirmPassword",type:t?"text":"password",placeholder:"Confirm your password",className:"pl-10",value:a.confirmPassword,onChange:T=>l(N=>({...N,confirmPassword:T.target.value})),required:!0})]})]}),o.jsx(Z,{type:"submit",className:"w-full",disabled:s,style:{backgroundColor:b.primary},children:s?"Please wait...":r?"Login":"Create Account"})]}),o.jsx("div",{className:"text-center",children:o.jsx("button",{type:"button",onClick:()=>e(!r),className:"text-sm text-muted-foreground hover:text-foreground underline",children:r?"Don't have an account? Sign up":"Already have an account? Login"})})]})]})})}const kL=[{id:"rebel",name:"Rebel",price:4.99,popular:!1,features:["Ad-free streaming","High-quality audio","Basic song requests","Mobile app access"]},{id:"legend",name:"Legend",price:9.99,popular:!0,features:["Everything in Rebel","Live chat access","Priority song requests","Exclusive content","Premium avatars","Early show access"]},{id:"icon",name:"Icon",price:19.99,popular:!1,features:["Everything in Legend","VIP chat privileges","Direct DJ messaging","Custom playlists","Exclusive merchandise","Meet & greet opportunities"]}];function SL(){const[r,e]=p.useState("legend"),{getColors:t,theme:n}=ue(),s=t(),i=a=>{console.log(`Subscribing to ${a} tier`),window.location.href=`/api/subscribe/${a}`};return o.jsx("div",{className:te("min-h-screen p-4",n==="light"?"bg-white":"bg-black"),children:o.jsxs("div",{className:"max-w-6xl mx-auto",children:[o.jsxs("div",{className:"text-center space-y-4 mb-12",children:[o.jsx("div",{className:"flex items-center justify-center space-x-4 mb-6",children:o.jsx(uw,{href:"/",children:o.jsxs(Z,{variant:"ghost",size:"sm",children:[o.jsx(ma,{className:"h-4 w-4 mr-2"}),"Back to Home"]})})}),o.jsxs("h1",{className:"text-4xl font-black",children:["Choose Your ",o.jsx("span",{style:{color:s.primary},children:"Metal"})," ","Experience"]}),o.jsx("p",{className:"text-xl text-muted-foreground max-w-2xl mx-auto",children:"Join the Spandex Salvation revolution and unlock exclusive features, premium content, and VIP access to the metal community."})]}),o.jsx("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-8 mb-12",children:kL.map(a=>o.jsxs(se,{className:te("relative transition-all duration-300 hover:scale-105",r===a.id&&"ring-2",a.popular&&"border-2"),style:{"--ring-color":r===a.id?s.primary:void 0,borderColor:a.popular?s.primary:void 0},children:[a.popular&&o.jsx("div",{className:"absolute -top-3 left-1/2 transform -translate-x-1/2 px-4 py-1 rounded-full text-white text-sm font-bold",style:{backgroundColor:s.primary},children:"MOST POPULAR"}),o.jsx(Ye,{className:"text-center space-y-4",children:o.jsxs("div",{className:"space-y-2",children:[o.jsx("h3",{className:"text-2xl font-bold",children:a.name}),o.jsxs("div",{className:"flex items-center justify-center space-x-1",children:[o.jsxs("span",{className:"text-4xl font-black",children:["$",a.price]}),o.jsx("span",{className:"text-muted-foreground",children:"/month"})]})]})}),o.jsxs(oe,{className:"space-y-6",children:[o.jsx("ul",{className:"space-y-3",children:a.features.map((l,u)=>o.jsxs("li",{className:"flex items-center space-x-3",children:[o.jsx(pa,{className:"h-5 w-5 flex-shrink-0",style:{color:s.primary}}),o.jsx("span",{className:"text-sm",children:l})]},u))}),o.jsx(Z,{className:"w-full",variant:a.popular?"default":"outline",onClick:()=>i(a.id),style:a.popular?{backgroundColor:s.primary}:void 0,children:a.popular?"Get Started":"Choose Plan"})]})]},a.id))}),o.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6 mb-12",children:[o.jsxs(se,{className:"text-center p-6 transition-all duration-300 hover:scale-105 hover:shadow-2xl border-2 cursor-pointer",style:{backgroundColor:s.surface,borderColor:`${s.primary}80`,boxShadow:`0 8px 32px ${s.primary}20`},onMouseEnter:a=>{a.currentTarget.style.borderColor=s.primary,a.currentTarget.style.boxShadow=`0 15px 50px ${s.primary}60`},onMouseLeave:a=>{a.currentTarget.style.borderColor=`${s.primary}80`,a.currentTarget.style.boxShadow=`0 8px 32px ${s.primary}20`},children:[o.jsx(Ao,{className:"h-12 w-12 mx-auto mb-4",style:{color:s.primary}}),o.jsx("h3",{className:"font-bold mb-2",style:{color:s.text},children:"Premium Audio"}),o.jsx("p",{className:"text-sm",style:{color:s.textMuted},children:"High-quality streaming with zero ads"})]}),o.jsxs(se,{className:"text-center p-6 transition-all duration-300 hover:scale-105 hover:shadow-2xl border-2 cursor-pointer",style:{backgroundColor:s.surface,borderColor:`${s.primary}80`,boxShadow:`0 8px 32px ${s.primary}20`},onMouseEnter:a=>{a.currentTarget.style.borderColor=s.primary,a.currentTarget.style.boxShadow=`0 15px 50px ${s.primary}60`},onMouseLeave:a=>{a.currentTarget.style.borderColor=`${s.primary}80`,a.currentTarget.style.boxShadow=`0 8px 32px ${s.primary}20`},children:[o.jsx(Ys,{className:"h-12 w-12 mx-auto mb-4",style:{color:s.primary}}),o.jsx("h3",{className:"font-bold mb-2",style:{color:s.text},children:"Live Chat"}),o.jsx("p",{className:"text-sm",style:{color:s.textMuted},children:"Connect with the metal community"})]}),o.jsxs(se,{className:"text-center p-6 transition-all duration-300 hover:scale-105 hover:shadow-2xl border-2 cursor-pointer",style:{backgroundColor:s.surface,borderColor:`${s.primary}80`,boxShadow:`0 8px 32px ${s.primary}20`},onMouseEnter:a=>{a.currentTarget.style.borderColor=s.primary,a.currentTarget.style.boxShadow=`0 15px 50px ${s.primary}60`},onMouseLeave:a=>{a.currentTarget.style.borderColor=`${s.primary}80`,a.currentTarget.style.boxShadow=`0 8px 32px ${s.primary}20`},children:[o.jsx(dr,{className:"h-12 w-12 mx-auto mb-4",style:{color:s.primary}}),o.jsx("h3",{className:"font-bold mb-2",style:{color:s.text},children:"Exclusive Content"}),o.jsx("p",{className:"text-sm",style:{color:s.textMuted},children:"Access to special shows and interviews"})]}),o.jsxs(se,{className:"text-center p-6 transition-all duration-300 hover:scale-105 hover:shadow-2xl border-2 cursor-pointer",style:{backgroundColor:s.surface,borderColor:`${s.primary}80`,boxShadow:`0 8px 32px ${s.primary}20`},onMouseEnter:a=>{a.currentTarget.style.borderColor=s.primary,a.currentTarget.style.boxShadow=`0 15px 50px ${s.primary}60`},onMouseLeave:a=>{a.currentTarget.style.borderColor=`${s.primary}80`,a.currentTarget.style.boxShadow=`0 8px 32px ${s.primary}20`},children:[o.jsx(Ho,{className:"h-12 w-12 mx-auto mb-4",style:{color:s.primary}}),o.jsx("h3",{className:"font-bold mb-2",style:{color:s.text},children:"VIP Access"}),o.jsx("p",{className:"text-sm",style:{color:s.textMuted},children:"Priority requests and early access"})]})]}),o.jsxs(se,{className:"mb-12",children:[o.jsx(Ye,{children:o.jsx(Je,{className:"text-center",children:"Frequently Asked Questions"})}),o.jsxs(oe,{className:"space-y-4",children:[o.jsxs("div",{children:[o.jsx("h4",{className:"font-semibold mb-2",children:"Can I cancel anytime?"}),o.jsx("p",{className:"text-sm text-muted-foreground",children:"Yes, you can cancel your subscription at any time. You'll continue to have access until the end of your current billing period."})]}),o.jsxs("div",{children:[o.jsx("h4",{className:"font-semibold mb-2",children:"What payment methods do you accept?"}),o.jsx("p",{className:"text-sm text-muted-foreground",children:"We accept all major credit cards, PayPal, and other secure payment methods through Stripe."})]}),o.jsxs("div",{children:[o.jsx("h4",{className:"font-semibold mb-2",children:"Can I upgrade or downgrade my plan?"}),o.jsx("p",{className:"text-sm text-muted-foreground",children:"Absolutely! You can change your subscription tier at any time from your profile settings."})]})]})]})]})})}const Qa=new Set;let jL=0;function ya({children:r,className:e="",threshold:t=.1,direction:n="up",delay:s=0,duration:i}){const{ref:a,isVisible:l}=F1({threshold:t}),{velocity:u}=V1(),d=p.useRef(`fade-${++jL}`).current,h=p.useMemo(()=>i||DO(300,u),[i,u]),m=p.useMemo(()=>({up:"translateY(30px)",down:"translateY(-30px)",left:"translateX(30px)",right:"translateX(-30px)"})[n],[n]),g=p.useMemo(()=>!l||Qa.has(d)?{opacity:1,transform:"translateY(0)",transition:"none"}:{opacity:0,transform:m,transition:`opacity ${h}ms ease-out ${s}ms, transform ${h}ms ease-out ${s}ms`},[l,d,m,h,s]),x=p.useCallback(()=>{l&&!Qa.has(d)&&Qa.add(d)},[l,d]);return p.useEffect(()=>{if(l&&!Qa.has(d)){const S=a.current;S&&requestAnimationFrame(()=>{S.style.opacity="1",S.style.transform="translateY(0)"})}},[l,d,a]),o.jsx("div",{ref:a,className:e,style:g,onTransitionEnd:x,children:r})}function IL(){const{getColors:r,currentTheme:e}=ue(),t=r();return o.jsx("div",{className:"min-h-screen transition-colors duration-300",style:{backgroundColor:t.background,color:t.text},children:o.jsx("main",{id:"main-content",children:o.jsx(ya,{direction:"up",delay:0,children:o.jsx("section",{id:"subscribe",className:"py-20 transition-colors duration-300",style:{backgroundColor:t.background},children:o.jsxs("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8",children:[o.jsxs("div",{className:"text-center mb-16",children:[o.jsx("h1",{className:"font-orbitron font-black text-4xl md:text-5xl mb-4",style:{color:e==="light-mode"?"#000000":t.text},children:"Support Us"}),o.jsx("p",{className:"text-lg font-semibold",style:{color:e==="light-mode"?"rgba(0, 0, 0, 0.7)":t.textMuted},children:"Support our growth and enjoy exclusive content."})]}),o.jsx(gT,{})]})})})})})}function AL(){const{getColors:r,currentTheme:e}=ue(),t=r();return o.jsx("div",{className:"min-h-screen transition-colors duration-300",style:{backgroundColor:t.background,color:t.text},children:o.jsx("main",{id:"main-content",children:o.jsx(ya,{direction:"up",delay:0,children:o.jsx("section",{id:"schedule",className:"py-20 transition-colors duration-300",style:{backgroundColor:t.background},children:o.jsxs("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8",children:[o.jsxs("div",{className:"text-center mb-16",children:[o.jsx("h1",{className:"font-orbitron font-black text-4xl md:text-5xl mb-4",style:{color:e==="light-mode"?"#000000":t.text},children:"Schedule"}),o.jsx("p",{className:"text-lg font-semibold",style:{color:e==="light-mode"?"rgba(0, 0, 0, 0.7)":t.textMuted},children:"Check out our programming schedule and upcoming shows."})]}),o.jsx("div",{className:"text-center",children:o.jsx("p",{className:"text-lg mb-8",children:"Schedule content will be displayed here, matching the homepage schedule section."})})]})})})})})}function RL(){const{getColors:r,currentTheme:e}=ue(),t=r();return o.jsx("div",{className:"min-h-screen transition-colors duration-300",style:{backgroundColor:t.background,color:t.text},children:o.jsx("main",{id:"main-content",children:o.jsx(ya,{direction:"up",delay:0,children:o.jsx("section",{id:"features",className:"py-20 transition-colors duration-300",style:{backgroundColor:t.background},children:o.jsxs("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8",children:[o.jsxs("div",{className:"text-center mb-16",children:[o.jsx("h1",{className:"font-orbitron font-black text-4xl md:text-5xl mb-4",style:{color:e==="light-mode"?"#000000":t.text},children:"Features"}),o.jsx("p",{className:"text-lg font-semibold",style:{color:e==="light-mode"?"rgba(0, 0, 0, 0.7)":t.textMuted},children:"Explore our premium features and subscription tiers."})]}),o.jsx("div",{className:"text-center",children:o.jsx("p",{className:"text-lg",style:{color:t.textMuted},children:"Features content will be displayed here."})})]})})})})})}function PL(){const{currentTheme:r,colors:e}=ue(),{isAuthenticated:t,user:n}=Ht();return Vc(),o.jsxs("div",{className:"min-h-screen transition-colors duration-300",style:{backgroundColor:e.background,color:e.text},children:[o.jsx("div",{id:"main-navigation",children:o.jsx(Gf,{})}),o.jsxs("main",{id:"main-content",className:"pt-16",children:[o.jsx("section",{className:"py-20 transition-colors duration-300",children:o.jsx("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8",children:o.jsxs("div",{className:"text-center mb-12",children:[o.jsx("h1",{className:"font-orbitron font-black text-3xl md:text-4xl mb-4",style:{color:r==="light-mode"?"#000000":e.text},children:"LIVE INTERACTIVE MAP"}),o.jsx("p",{className:"text-lg",style:{color:e.textMuted},children:"Explore our global community of metalheads and see where the music is playing live."})]})})}),o.jsx("section",{className:"py-8",children:o.jsx(Q1,{})})]})]})}function ML(){const{getColors:r,currentTheme:e}=ue(),t=r();return o.jsx("div",{className:"min-h-screen transition-colors duration-300",style:{backgroundColor:t.background,color:t.text},children:o.jsx("main",{id:"main-content",children:o.jsx(ya,{direction:"up",delay:0,children:o.jsx("section",{id:"submissions",className:"py-20 transition-colors duration-300",style:{backgroundColor:t.background},children:o.jsxs("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8",children:[o.jsxs("div",{className:"text-center mb-16",children:[o.jsx("h1",{className:"font-orbitron font-black text-4xl md:text-5xl mb-4",style:{color:e==="light-mode"?"#000000":t.text},children:"Submissions"}),o.jsx("p",{className:"text-lg font-semibold",style:{color:e==="light-mode"?"rgba(0, 0, 0, 0.7)":t.textMuted},children:"Submit song requests and feedback."})]}),o.jsx("div",{className:"text-center",children:o.jsx("p",{className:"text-lg",style:{color:t.textMuted},children:"Submissions content will be displayed here."})})]})})})})})}function DL(){const{getColors:r,currentTheme:e}=ue(),t=r();return o.jsx("div",{className:"min-h-screen transition-colors duration-300",style:{backgroundColor:t.background,color:t.text},children:o.jsx("main",{id:"main-content",children:o.jsx(ya,{direction:"up",delay:0,children:o.jsx("section",{id:"contact",className:"py-20 transition-colors duration-300",style:{backgroundColor:t.background},children:o.jsxs("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8",children:[o.jsxs("div",{className:"text-center mb-16",children:[o.jsx("h1",{className:"font-orbitron font-black text-4xl md:text-5xl mb-4",style:{color:e==="light-mode"?"#000000":t.text},children:"Contact"}),o.jsx("p",{className:"text-lg font-semibold",style:{color:e==="light-mode"?"rgba(0, 0, 0, 0.7)":t.textMuted},children:"Get in touch with the station."})]}),o.jsx("div",{className:"text-center",children:o.jsx("p",{className:"text-lg",style:{color:t.textMuted},children:"Contact content will be displayed here."})})]})})})})})}function OL(){const{colors:r,currentTheme:e}=ue(),[,t]=zo();return o.jsxs("div",{className:"relative",children:[o.jsx("button",{className:"fixed top-4 left-4 z-50 rounded-full p-2 shadow-lg transition-colors duration-300",onClick:()=>t("/"),"aria-label":"Back to Home",style:{backdropFilter:"blur(4px)",backgroundColor:"rgba(0, 0, 0, 0.7)",color:"#ffffff"},onMouseEnter:n=>{n.currentTarget.style.backgroundColor="rgba(0, 0, 0, 0.9)"},onMouseLeave:n=>{n.currentTarget.style.backgroundColor="rgba(0, 0, 0, 0.7)"},children:o.jsx(ma,{className:"w-6 h-6"})}),o.jsx("div",{className:"min-h-screen p-4 md:p-8",children:o.jsx("div",{className:"max-w-4xl mx-auto",children:o.jsxs(se,{style:{backgroundColor:r.background,borderColor:r.primary},children:[o.jsxs(Ye,{className:"text-center",children:[o.jsx(Je,{className:"text-3xl font-bold",style:{color:r.text},children:"Terms of Service"}),o.jsxs("p",{className:"text-muted-foreground",children:["Last updated: ",new Date().toLocaleDateString()]})]}),o.jsx(oe,{children:o.jsx($c,{className:"h-[600px] pr-4",children:o.jsxs("div",{className:"space-y-6",style:{color:r.text},children:[o.jsxs("section",{children:[o.jsx("h2",{className:"text-xl font-semibold mb-3",style:{color:r.primary},children:"1. Acceptance of Terms"}),o.jsx("p",{className:"text-muted-foreground leading-relaxed",children:'By accessing and using Spandex Salvation Radio ("the Service"), you accept and agree to be bound by the terms and provision of this agreement. If you do not agree to abide by the above, please do not use this service.'})]}),o.jsx(Ve,{}),o.jsxs("section",{children:[o.jsx("h2",{className:"text-xl font-semibold mb-3",style:{color:r.primary},children:"2. Description of Service"}),o.jsx("p",{className:"text-muted-foreground leading-relaxed mb-3",children:"Spandex Salvation Radio is an online streaming platform that provides:"}),o.jsxs("ul",{className:"list-disc list-inside text-muted-foreground space-y-1 ml-4",children:[o.jsx("li",{children:"24/7 metal music streaming"}),o.jsx("li",{children:"Interactive radio show schedules"}),o.jsx("li",{children:"Song submission system"}),o.jsx("li",{children:"Community features and chat"}),o.jsx("li",{children:"Premium subscription services"})]})]}),o.jsx(Ve,{}),o.jsxs("section",{children:[o.jsx("h2",{className:"text-xl font-semibold mb-3",style:{color:r.primary},children:"3. User Accounts and Registration"}),o.jsx("p",{className:"text-muted-foreground leading-relaxed mb-3",children:"To access certain features, you must register for an account. You agree to:"}),o.jsxs("ul",{className:"list-disc list-inside text-muted-foreground space-y-1 ml-4",children:[o.jsx("li",{children:"Provide accurate and complete information"}),o.jsx("li",{children:"Maintain the security of your account credentials"}),o.jsx("li",{children:"Accept responsibility for all activities under your account"}),o.jsx("li",{children:"Notify us immediately of any unauthorized use"})]})]}),o.jsx(Ve,{}),o.jsxs("section",{children:[o.jsx("h2",{className:"text-xl font-semibold mb-3",style:{color:r.primary},children:"4. Content and Submissions"}),o.jsx("p",{className:"text-muted-foreground leading-relaxed mb-3",children:"When submitting content (songs, comments, etc.), you agree that:"}),o.jsxs("ul",{className:"list-disc list-inside text-muted-foreground space-y-1 ml-4",children:[o.jsx("li",{children:"You own or have rights to the submitted content"}),o.jsx("li",{children:"Content must comply with our community guidelines"}),o.jsx("li",{children:"We reserve the right to moderate and remove content"}),o.jsx("li",{children:"Inappropriate content may result in account suspension"})]})]}),o.jsx(Ve,{}),o.jsxs("section",{children:[o.jsx("h2",{className:"text-xl font-semibold mb-3",style:{color:r.primary},children:"5. Premium Subscriptions"}),o.jsx("p",{className:"text-muted-foreground leading-relaxed mb-3",children:"Premium subscription terms:"}),o.jsxs("ul",{className:"list-disc list-inside text-muted-foreground space-y-1 ml-4",children:[o.jsx("li",{children:"Subscriptions are billed monthly or annually"}),o.jsx("li",{children:"Cancellation takes effect at the end of current billing period"}),o.jsx("li",{children:"No refunds for partial months"}),o.jsx("li",{children:"Pricing subject to change with 30-day notice"})]})]}),o.jsx(Ve,{}),o.jsxs("section",{children:[o.jsx("h2",{className:"text-xl font-semibold mb-3",style:{color:r.primary},children:"6. Prohibited Uses"}),o.jsx("p",{className:"text-muted-foreground leading-relaxed mb-3",children:"You may not use our service to:"}),o.jsxs("ul",{className:"list-disc list-inside text-muted-foreground space-y-1 ml-4",children:[o.jsx("li",{children:"Violate any applicable laws or regulations"}),o.jsx("li",{children:"Transmit malicious code or harmful content"}),o.jsx("li",{children:"Attempt to gain unauthorized access to our systems"}),o.jsx("li",{children:"Interfere with or disrupt the service"}),o.jsx("li",{children:"Engage in harassment or abusive behavior"})]})]}),o.jsx(Ve,{}),o.jsxs("section",{children:[o.jsx("h2",{className:"text-xl font-semibold mb-3",style:{color:r.primary},children:"7. Intellectual Property"}),o.jsx("p",{className:"text-muted-foreground leading-relaxed",children:"All content on Spandex Salvation Radio, including but not limited to text, graphics, logos, and software, is protected by copyright and other intellectual property laws. You may not reproduce, distribute, or create derivative works without permission."})]}),o.jsx(Ve,{}),o.jsxs("section",{children:[o.jsx("h2",{className:"text-xl font-semibold mb-3",style:{color:r.primary},children:"8. Limitation of Liability"}),o.jsx("p",{className:"text-muted-foreground leading-relaxed",children:"Spandex Salvation Radio shall not be liable for any indirect, incidental, special, consequential, or punitive damages, including but not limited to loss of profits, data, or use, incurred by you or any third party."})]}),o.jsx(Ve,{}),o.jsxs("section",{children:[o.jsx("h2",{className:"text-xl font-semibold mb-3",style:{color:r.primary},children:"9. Termination"}),o.jsx("p",{className:"text-muted-foreground leading-relaxed",children:"We may terminate or suspend your account immediately, without prior notice, for conduct that we believe violates these Terms of Service or is harmful to other users, us, or third parties."})]}),o.jsx(Ve,{}),o.jsxs("section",{children:[o.jsx("h2",{className:"text-xl font-semibold mb-3",style:{color:r.primary},children:"10. Changes to Terms"}),o.jsx("p",{className:"text-muted-foreground leading-relaxed",children:"We reserve the right to modify these terms at any time. We will notify users of significant changes via email or prominent notice on our website. Continued use of the service constitutes acceptance of modified terms."})]}),o.jsx(Ve,{}),o.jsxs("section",{children:[o.jsx("h2",{className:"text-xl font-semibold mb-3",style:{color:r.primary},children:"11. Contact Information"}),o.jsxs("p",{className:"text-muted-foreground leading-relaxed",children:["For questions about these Terms of Service, please contact us at:",o.jsx("br",{}),"Email: legal@spandexsalvationradio.com",o.jsx("br",{}),"Address: [Your Business Address]"]})]})]})})})]})})})]})}function LL(){const{colors:r,currentTheme:e}=ue(),[,t]=zo();return o.jsxs("div",{className:"relative",children:[o.jsx("button",{className:"fixed top-4 left-4 z-50 rounded-full p-2 shadow-lg transition-colors duration-300",onClick:()=>t("/"),"aria-label":"Back to Home",style:{backdropFilter:"blur(4px)",backgroundColor:"rgba(0, 0, 0, 0.7)",color:"#ffffff"},onMouseEnter:n=>{n.currentTarget.style.backgroundColor="rgba(0, 0, 0, 0.9)"},onMouseLeave:n=>{n.currentTarget.style.backgroundColor="rgba(0, 0, 0, 0.7)"},children:o.jsx(ma,{className:"w-6 h-6"})}),o.jsx("div",{className:"min-h-screen p-4 md:p-8",children:o.jsx("div",{className:"max-w-4xl mx-auto",children:o.jsxs(se,{style:{backgroundColor:r.background,borderColor:r.primary},children:[o.jsxs(Ye,{className:"text-center",children:[o.jsx(Je,{className:"text-3xl font-bold",style:{color:r.text},children:"Privacy Policy"}),o.jsxs("p",{className:"text-muted-foreground",children:["Last updated: ",new Date().toLocaleDateString()]})]}),o.jsx(oe,{children:o.jsx($c,{className:"h-[600px] pr-4",children:o.jsxs("div",{className:"space-y-6",style:{color:r.text},children:[o.jsxs("section",{children:[o.jsx("h2",{className:"text-xl font-semibold mb-3",style:{color:r.primary},children:"1. Information We Collect"}),o.jsx("p",{className:"text-muted-foreground leading-relaxed mb-3",children:"We collect information you provide directly to us, such as when you:"}),o.jsxs("ul",{className:"list-disc list-inside text-muted-foreground space-y-1 ml-4",children:[o.jsx("li",{children:"Create an account or profile"}),o.jsx("li",{children:"Subscribe to our premium services"}),o.jsx("li",{children:"Submit song requests or feedback"}),o.jsx("li",{children:"Participate in chat or community features"}),o.jsx("li",{children:"Contact us for support"})]})]}),o.jsx(Ve,{}),o.jsxs("section",{children:[o.jsx("h2",{className:"text-xl font-semibold mb-3",style:{color:r.primary},children:"2. Personal Information"}),o.jsx("p",{className:"text-muted-foreground leading-relaxed mb-3",children:"The types of personal information we may collect include:"}),o.jsxs("ul",{className:"list-disc list-inside text-muted-foreground space-y-1 ml-4",children:[o.jsx("li",{children:"Name and email address"}),o.jsx("li",{children:"Phone number (for verification)"}),o.jsx("li",{children:"Payment information (processed securely via Stripe)"}),o.jsx("li",{children:"Profile preferences and listening history"}),o.jsx("li",{children:"Location data (if you choose to share)"})]})]}),o.jsx(Ve,{}),o.jsxs("section",{children:[o.jsx("h2",{className:"text-xl font-semibold mb-3",style:{color:r.primary},children:"3. Automatic Information Collection"}),o.jsx("p",{className:"text-muted-foreground leading-relaxed mb-3",children:"We automatically collect certain information when you use our service:"}),o.jsxs("ul",{className:"list-disc list-inside text-muted-foreground space-y-1 ml-4",children:[o.jsx("li",{children:"Device information (browser, operating system)"}),o.jsx("li",{children:"Usage data (pages visited, time spent)"}),o.jsx("li",{children:"IP address and approximate location"}),o.jsx("li",{children:"Cookies and similar tracking technologies"}),o.jsx("li",{children:"Streaming preferences and listening patterns"})]})]}),o.jsx(Ve,{}),o.jsxs("section",{children:[o.jsx("h2",{className:"text-xl font-semibold mb-3",style:{color:r.primary},children:"4. How We Use Your Information"}),o.jsx("p",{className:"text-muted-foreground leading-relaxed mb-3",children:"We use the information we collect to:"}),o.jsxs("ul",{className:"list-disc list-inside text-muted-foreground space-y-1 ml-4",children:[o.jsx("li",{children:"Provide and maintain our streaming service"}),o.jsx("li",{children:"Process payments and manage subscriptions"}),o.jsx("li",{children:"Personalize your listening experience"}),o.jsx("li",{children:"Send important updates and notifications"}),o.jsx("li",{children:"Improve our service and develop new features"}),o.jsx("li",{children:"Prevent fraud and ensure security"}),o.jsx("li",{children:"Comply with legal obligations"})]})]}),o.jsx(Ve,{}),o.jsxs("section",{children:[o.jsx("h2",{className:"text-xl font-semibold mb-3",style:{color:r.primary},children:"5. Information Sharing"}),o.jsx("p",{className:"text-muted-foreground leading-relaxed mb-3",children:"We do not sell, trade, or rent your personal information. We may share information in these situations:"}),o.jsxs("ul",{className:"list-disc list-inside text-muted-foreground space-y-1 ml-4",children:[o.jsx("li",{children:"With service providers (Stripe for payments, Firebase for authentication)"}),o.jsx("li",{children:"When required by law or legal process"}),o.jsx("li",{children:"To protect our rights or safety"}),o.jsx("li",{children:"In connection with a business transfer"}),o.jsx("li",{children:"With your explicit consent"})]})]}),o.jsx(Ve,{}),o.jsxs("section",{children:[o.jsx("h2",{className:"text-xl font-semibold mb-3",style:{color:r.primary},children:"6. Data Security"}),o.jsx("p",{className:"text-muted-foreground leading-relaxed",children:"We implement appropriate security measures to protect your personal information against unauthorized access, alteration, disclosure, or destruction. This includes encryption of sensitive data, secure server infrastructure, and regular security assessments."})]}),o.jsx(Ve,{}),o.jsxs("section",{children:[o.jsx("h2",{className:"text-xl font-semibold mb-3",style:{color:r.primary},children:"7. Cookies and Tracking"}),o.jsx("p",{className:"text-muted-foreground leading-relaxed mb-3",children:"We use cookies and similar technologies to:"}),o.jsxs("ul",{className:"list-disc list-inside text-muted-foreground space-y-1 ml-4",children:[o.jsx("li",{children:"Remember your preferences and settings"}),o.jsx("li",{children:"Maintain your login session"}),o.jsx("li",{children:"Analyze usage patterns and improve our service"}),o.jsx("li",{children:"Provide personalized content recommendations"})]}),o.jsx("p",{className:"text-muted-foreground leading-relaxed mt-3",children:"You can control cookie preferences through your browser settings."})]}),o.jsx(Ve,{}),o.jsxs("section",{children:[o.jsx("h2",{className:"text-xl font-semibold mb-3",style:{color:r.primary},children:"8. Third-Party Services"}),o.jsx("p",{className:"text-muted-foreground leading-relaxed mb-3",children:"Our service integrates with third-party providers:"}),o.jsxs("ul",{className:"list-disc list-inside text-muted-foreground space-y-1 ml-4",children:[o.jsxs("li",{children:[o.jsx("strong",{children:"Google OAuth:"})," For account authentication"]}),o.jsxs("li",{children:[o.jsx("strong",{children:"Stripe:"})," For payment processing"]}),o.jsxs("li",{children:[o.jsx("strong",{children:"Firebase:"})," For user data storage and authentication"]}),o.jsxs("li",{children:[o.jsx("strong",{children:"Google reCAPTCHA:"})," For spam and fraud prevention"]})]}),o.jsx("p",{className:"text-muted-foreground leading-relaxed mt-3",children:"These services have their own privacy policies that govern their use of your information."})]}),o.jsx(Ve,{}),o.jsxs("section",{children:[o.jsx("h2",{className:"text-xl font-semibold mb-3",style:{color:r.primary},children:"9. Your Rights and Choices"}),o.jsx("p",{className:"text-muted-foreground leading-relaxed mb-3",children:"You have the right to:"}),o.jsxs("ul",{className:"list-disc list-inside text-muted-foreground space-y-1 ml-4",children:[o.jsx("li",{children:"Access and update your personal information"}),o.jsx("li",{children:"Delete your account and associated data"}),o.jsx("li",{children:"Opt out of marketing communications"}),o.jsx("li",{children:"Request a copy of your data"}),o.jsx("li",{children:"Object to certain processing activities"})]})]}),o.jsx(Ve,{}),o.jsxs("section",{children:[o.jsx("h2",{className:"text-xl font-semibold mb-3",style:{color:r.primary},children:"10. Data Retention"}),o.jsx("p",{className:"text-muted-foreground leading-relaxed",children:"We retain your personal information for as long as necessary to provide our services, comply with legal obligations, resolve disputes, and enforce our agreements. When you delete your account, we will delete or anonymize your personal information within 30 days."})]}),o.jsx(Ve,{}),o.jsxs("section",{children:[o.jsx("h2",{className:"text-xl font-semibold mb-3",style:{color:r.primary},children:"11. Children's Privacy"}),o.jsx("p",{className:"text-muted-foreground leading-relaxed",children:"Our service is not intended for users under 13 years of age. We do not knowingly collect personal information from children under 13. If we become aware that we have collected such information, we will take steps to delete it promptly."})]}),o.jsx(Ve,{}),o.jsxs("section",{children:[o.jsx("h2",{className:"text-xl font-semibold mb-3",style:{color:r.primary},children:"12. International Users"}),o.jsx("p",{className:"text-muted-foreground leading-relaxed",children:"If you are accessing our service from outside the United States, please be aware that your information may be transferred to, stored, and processed in the United States where our servers are located."})]}),o.jsx(Ve,{}),o.jsxs("section",{children:[o.jsx("h2",{className:"text-xl font-semibold mb-3",style:{color:r.primary},children:"13. Changes to This Policy"}),o.jsx("p",{className:"text-muted-foreground leading-relaxed",children:'We may update this Privacy Policy from time to time. We will notify you of any material changes by posting the new policy on this page and updating the "Last updated" date. We encourage you to review this policy periodically.'})]}),o.jsx(Ve,{}),o.jsxs("section",{children:[o.jsx("h2",{className:"text-xl font-semibold mb-3",style:{color:r.primary},children:"14. Contact Us"}),o.jsxs("p",{className:"text-muted-foreground leading-relaxed",children:["If you have any questions about this Privacy Policy or our data practices, please contact us at:",o.jsx("br",{}),"Email: privacy@spandexsalvationradio.com",o.jsx("br",{}),"Address: [Your Business Address]"]})]})]})})})]})})})]})}function VL(){const[r,e]=zo(),[t,n]=p.useState(null),[s,i]=p.useState(!0),{getColors:a}=ue(),l=a();if(p.useEffect(()=>{const h=new URLSearchParams(window.location.search),m=h.get("order_id"),g=h.get("product_id");m?setTimeout(()=>{n({orderId:m,items:[{id:g||"1",title:"Spandex Salvation Classic Tee",variant:"Large",quantity:1,price:24.99,image:"https://images.unsplash.com/photo-1521572163474-6864f9cf17ab?ixlib=rb-4.0.3&auto=format&fit=crop&w=800&h=800"}],subtotal:24.99,shipping:5.99,tax:2.05,total:33.03,customerEmail:"customer@example.com",shippingAddress:{name:"John Doe",address1:"123 Metal Street",city:"Rock City",state:"CA",zip:"90210",country:"United States"},paymentMethod:"•••• 4242",estimatedDelivery:"3-5 business days",trackingNumber:"1Z999AA1234567890"}),i(!1)},1e3):i(!1)},[]),s)return o.jsx("div",{className:"min-h-screen bg-dark-bg flex items-center justify-center",children:o.jsxs("div",{className:"text-center",children:[o.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 mx-auto mb-4",style:{borderColor:l.primary}}),o.jsx("p",{className:"text-white font-semibold",children:"Loading order details..."})]})});if(!t)return o.jsx("div",{className:"min-h-screen bg-dark-bg flex items-center justify-center",children:o.jsx(se,{className:"bg-gray-900 border-gray-800 max-w-md w-full mx-4",children:o.jsxs(oe,{className:"p-8 text-center",children:[o.jsx(ui,{className:"h-12 w-12 text-gray-400 mx-auto mb-4"}),o.jsx("h2",{className:"text-xl font-bold text-white mb-2",children:"Order Not Found"}),o.jsx("p",{className:"text-gray-400 mb-6",children:"We couldn't find the order you're looking for."}),o.jsx(Z,{onClick:()=>e("/"),className:"w-full font-bold transition-all duration-300",style:{backgroundColor:l.primary},children:"Return to Home"})]})})});const u=()=>{e("/")},d=()=>{window.open(`https://spandexsalvation.myshopify.com/account/orders/${t.orderId}`,"_blank")};return o.jsx("div",{className:"min-h-screen bg-dark-bg py-12 px-4",children:o.jsxs("div",{className:"max-w-4xl mx-auto",children:[o.jsxs("div",{className:"text-center mb-8",children:[o.jsx("div",{className:"flex justify-center mb-4",children:o.jsx(Ks,{className:"h-16 w-16",style:{color:l.primary}})}),o.jsx("h1",{className:"text-3xl font-black text-white mb-2",children:"Order Confirmed!"}),o.jsxs("p",{className:"text-gray-400 text-lg",children:["Thank you for your order. We've sent a confirmation email to"," ",o.jsx("span",{className:"text-white font-semibold",children:t.customerEmail})]})]}),o.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-8",children:[o.jsxs(se,{className:"bg-gray-900 border-gray-800",children:[o.jsxs(Ye,{children:[o.jsx(Je,{className:"text-white font-black",children:"Order Summary"}),o.jsxs("p",{className:"text-gray-400",children:["Order #",t.orderId]})]}),o.jsxs(oe,{className:"space-y-4",children:[t.items.map(h=>o.jsxs("div",{className:"flex items-center space-x-4 p-4 bg-gray-800 rounded-lg",children:[o.jsx("img",{src:h.image,alt:h.title,className:"h-16 w-16 object-cover rounded-lg"}),o.jsxs("div",{className:"flex-1",children:[o.jsx("h3",{className:"font-bold text-white",children:h.title}),o.jsx("p",{className:"text-gray-400 text-sm",children:h.variant}),o.jsxs("div",{className:"flex justify-between items-center mt-2",children:[o.jsxs("span",{className:"text-gray-400",children:["Qty: ",h.quantity]}),o.jsxs("span",{className:"font-bold text-white",children:["$",h.price.toFixed(2)]})]})]})]},h.id)),o.jsxs("div",{className:"border-t border-gray-700 pt-4 space-y-2",children:[o.jsxs("div",{className:"flex justify-between text-gray-400",children:[o.jsx("span",{children:"Subtotal"}),o.jsxs("span",{children:["$",t.subtotal.toFixed(2)]})]}),o.jsxs("div",{className:"flex justify-between text-gray-400",children:[o.jsx("span",{children:"Shipping"}),o.jsxs("span",{children:["$",t.shipping.toFixed(2)]})]}),o.jsxs("div",{className:"flex justify-between text-gray-400",children:[o.jsx("span",{children:"Tax"}),o.jsxs("span",{children:["$",t.tax.toFixed(2)]})]}),o.jsxs("div",{className:"flex justify-between text-white font-bold text-lg pt-2 border-t border-gray-700",children:[o.jsx("span",{children:"Total"}),o.jsxs("span",{children:["$",t.total.toFixed(2)]})]})]})]})]}),o.jsxs("div",{className:"space-y-6",children:[o.jsxs(se,{className:"bg-gray-900 border-gray-800",children:[o.jsx(Ye,{children:o.jsxs(Je,{className:"text-white font-black flex items-center",children:[o.jsx(ui,{className:"h-5 w-5 mr-2"}),"Shipping Address"]})}),o.jsxs(oe,{children:[o.jsxs("div",{className:"text-gray-300 space-y-1",children:[o.jsx("p",{className:"font-semibold text-white",children:t.shippingAddress.name}),o.jsx("p",{children:t.shippingAddress.address1}),t.shippingAddress.address2&&o.jsx("p",{children:t.shippingAddress.address2}),o.jsxs("p",{children:[t.shippingAddress.city,", ",t.shippingAddress.state," ",t.shippingAddress.zip]}),o.jsx("p",{children:t.shippingAddress.country})]}),o.jsxs("div",{className:"mt-4 p-3 bg-gray-800 rounded-lg",children:[o.jsxs("div",{className:"flex items-center text-sm",children:[o.jsx(ql,{className:"h-4 w-4 mr-2",style:{color:l.primary}}),o.jsx("span",{className:"text-gray-400",children:"Estimated delivery: "}),o.jsx("span",{className:"text-white font-semibold ml-1",children:t.estimatedDelivery})]}),t.trackingNumber&&o.jsxs("div",{className:"flex items-center text-sm mt-2",children:[o.jsx(ui,{className:"h-4 w-4 mr-2",style:{color:l.primary}}),o.jsx("span",{className:"text-gray-400",children:"Tracking: "}),o.jsx("span",{className:"text-white font-semibold ml-1",children:t.trackingNumber})]})]})]})]}),o.jsxs(se,{className:"bg-gray-900 border-gray-800",children:[o.jsx(Ye,{children:o.jsxs(Je,{className:"text-white font-black flex items-center",children:[o.jsx(Wd,{className:"h-5 w-5 mr-2"}),"Payment Method"]})}),o.jsx(oe,{children:o.jsxs("div",{className:"flex items-center justify-between",children:[o.jsxs("div",{className:"flex items-center",children:[o.jsx(Wd,{className:"h-8 w-8 text-gray-400 mr-3"}),o.jsxs("div",{children:[o.jsxs("p",{className:"text-white font-semibold",children:["Card ending in ",t.paymentMethod]}),o.jsx("p",{className:"text-gray-400 text-sm",children:"Payment processed successfully"})]})]}),o.jsx(Ke,{variant:"secondary",className:"bg-green-600 text-white",children:"Paid"})]})})]}),o.jsxs("div",{className:"space-y-3",children:[o.jsxs(Z,{onClick:d,className:"w-full font-bold transition-all duration-300 focus:outline-none focus:ring-0",style:{backgroundColor:l.primary},children:[o.jsx(ui,{className:"h-4 w-4 mr-2"}),"View Order in Account"]}),o.jsxs(Z,{onClick:u,variant:"outline",className:"w-full font-bold transition-all duration-300 border-gray-600 text-gray-300 hover:bg-gray-800 focus:outline-none focus:ring-0",children:[o.jsx(ma,{className:"h-4 w-4 mr-2"}),"Continue Shopping"]})]})]})]}),o.jsx(se,{className:"bg-gray-900 border-gray-800 mt-8",children:o.jsxs(oe,{className:"p-6",children:[o.jsx("h3",{className:"text-white font-bold mb-3",children:"What's Next?"}),o.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4 text-sm",children:[o.jsxs("div",{className:"flex items-start space-x-3",children:[o.jsx(ql,{className:"h-5 w-5 mt-0.5",style:{color:l.primary}}),o.jsxs("div",{children:[o.jsx("p",{className:"text-white font-semibold",children:"Order Confirmation"}),o.jsx("p",{className:"text-gray-400",children:"You'll receive an email confirmation shortly"})]})]}),o.jsxs("div",{className:"flex items-start space-x-3",children:[o.jsx(ui,{className:"h-5 w-5 mt-0.5",style:{color:l.primary}}),o.jsxs("div",{children:[o.jsx("p",{className:"text-white font-semibold",children:"Processing"}),o.jsx("p",{className:"text-gray-400",children:"Your order will be processed within 1-2 business days"})]})]}),o.jsxs("div",{className:"flex items-start space-x-3",children:[o.jsx(LM,{className:"h-5 w-5 mt-0.5",style:{color:l.primary}}),o.jsxs("div",{children:[o.jsx("p",{className:"text-white font-semibold",children:"Tracking"}),o.jsx("p",{className:"text-gray-400",children:"You'll receive tracking information once shipped"})]})]})]})]})})]})})}function FL(){return o.jsx("div",{className:"min-h-screen w-full flex items-center justify-center bg-gray-50",children:o.jsx(se,{className:"w-full max-w-md mx-4",children:o.jsxs(oe,{className:"pt-6",children:[o.jsxs("div",{className:"flex mb-4 gap-2",children:[o.jsx(Zw,{className:"h-8 w-8 text-red-500"}),o.jsx("h1",{className:"text-2xl font-bold text-gray-900",children:"404 Page Not Found"})]}),o.jsx("p",{className:"mt-4 text-sm text-gray-600",children:"Did you forget to add the page to the router?"})]})})})}function UL({children:r}){return o.jsx(o.Fragment,{children:r})}function $L(){return o.jsxs(g4,{children:[o.jsx(Nt,{path:"/",component:d3}),o.jsx(Nt,{path:"/music",component:h3}),o.jsx(Nt,{path:"/profile",component:_L}),o.jsx(Nt,{path:"/login",component:CL}),o.jsx(Nt,{path:"/subscribe",component:SL}),o.jsx(Nt,{path:"/support",component:IL}),o.jsx(Nt,{path:"/schedule",component:AL}),o.jsx(Nt,{path:"/features",component:RL}),o.jsx(Nt,{path:"/map",component:PL}),o.jsx(Nt,{path:"/submissions",component:ML}),o.jsx(Nt,{path:"/contact",component:DL}),o.jsx(Nt,{path:"/terms",component:OL}),o.jsx(Nt,{path:"/privacy",component:LL}),o.jsx(Nt,{path:"/order-confirmation",component:VL}),o.jsx(Nt,{component:FL})]})}function BL(){const[r,e]=p.useState(!0);return p.useEffect(()=>(Q4(),qD(),console.log("Performance data collection initialized for site-wide monitoring"),()=>{fl.destroy()}),[]),o.jsx(ED,{children:o.jsx(L4,{client:X4,children:o.jsx(vD,{children:o.jsx(yD,{children:o.jsx(a5,{children:o.jsx(xD,{children:o.jsx(uD,{children:o.jsxs(k_,{children:[o.jsx(wD,{}),o.jsx(z5,{}),o.jsx(TD,{siteKey:"",children:o.jsxs(UL,{children:[o.jsx($L,{}),o.jsx(Y_,{isEnabled:r,onToggle:()=>e(!r)}),o.jsx(HD,{showMetrics:!1,logToConsole:!0})]})})]})})})})})})})})}"serviceWorker"in navigator&&window.addEventListener("load",()=>{navigator.serviceWorker.register("/sw.js").then(r=>{console.log("Service Worker registered successfully:",r)}).catch(r=>{console.log("Service Worker registration failed:",r)})});bE.createRoot(document.getElementById("root")).render(o.jsx(fx.StrictMode,{children:o.jsx(BL,{})}));
