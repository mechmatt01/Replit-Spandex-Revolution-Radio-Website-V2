var Jm=r=>{throw TypeError(r)};var mu=(r,e,t)=>e.has(r)||Jm("Cannot "+t);var D=(r,e,t)=>(mu(r,e,"read from private field"),t?t.call(r):e.get(r)),re=(r,e,t)=>e.has(r)?Jm("Cannot add the same private member more than once"):e instanceof WeakSet?e.add(r):e.set(r,t),K=(r,e,t,n)=>(mu(r,e,"write to private field"),n?n.call(r,t):e.set(r,t),t),pe=(r,e,t)=>(mu(r,e,"access private method"),t);var Da=(r,e,t,n)=>({set _(s){K(r,e,s,t)},get _(){return D(r,e,n)}});import{_ as ih,r as m,R as JT,s as ZT,j as o,P as De,c as Bn,a as eE,u as at,B as tE,b as Do,d as Sr,e as _e,f as ir,g as rE,h as nE,i as Qy,k as Yy,l as sE,m as rc,D as Xy,C as Jy,n as Zy,o as ah,p as ex,A as lh,q as tx,S as oE,t as rx,I as nx,F as sx,v as ox,w as ix,x as ax,y as iE,z as lx,E as cx,G as ux,H as dx,J as hx,L as fx,K as mx,M as aE,T as lE,N as px,O as ch,Q as gx,W as cE,U as uh,V as dh,X as hh,Y as fh,Z as yx,$ as uE,a0 as dE,a1 as hE,a2 as fE,a3 as mE,a4 as pE,a5 as xx,a6 as bx,a7 as vx,a8 as gE,a9 as yE}from"./ui-Co9B5ooE.js";import{a as xE,g as bE}from"./vendor-BtP0CW_r.js";(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const s of document.querySelectorAll('link[rel="modulepreload"]'))n(s);new MutationObserver(s=>{for(const i of s)if(i.type==="childList")for(const a of i.addedNodes)a.tagName==="LINK"&&a.rel==="modulepreload"&&n(a)}).observe(document,{childList:!0,subtree:!0});function t(s){const i={};return s.integrity&&(i.integrity=s.integrity),s.referrerPolicy&&(i.referrerPolicy=s.referrerPolicy),s.crossOrigin==="use-credentials"?i.credentials="include":s.crossOrigin==="anonymous"?i.credentials="omit":i.credentials="same-origin",i}function n(s){if(s.ep)return;s.ep=!0;const i=t(s);fetch(s.href,i)}})();var Oa={},Zm;function vE(){if(Zm)return Oa;Zm=1;var r=xE();return Oa.createRoot=r.createRoot,Oa.hydrateRoot=r.hydrateRoot,Oa}var wE=vE();const _E=bE(wE),TE=()=>{};var ep={};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const wx=function(r){const e=[];let t=0;for(let n=0;n<r.length;n++){let s=r.charCodeAt(n);s<128?e[t++]=s:s<2048?(e[t++]=s>>6|192,e[t++]=s&63|128):(s&64512)===55296&&n+1<r.length&&(r.charCodeAt(n+1)&64512)===56320?(s=65536+((s&1023)<<10)+(r.charCodeAt(++n)&1023),e[t++]=s>>18|240,e[t++]=s>>12&63|128,e[t++]=s>>6&63|128,e[t++]=s&63|128):(e[t++]=s>>12|224,e[t++]=s>>6&63|128,e[t++]=s&63|128)}return e},EE=function(r){const e=[];let t=0,n=0;for(;t<r.length;){const s=r[t++];if(s<128)e[n++]=String.fromCharCode(s);else if(s>191&&s<224){const i=r[t++];e[n++]=String.fromCharCode((s&31)<<6|i&63)}else if(s>239&&s<365){const i=r[t++],a=r[t++],l=r[t++],u=((s&7)<<18|(i&63)<<12|(a&63)<<6|l&63)-65536;e[n++]=String.fromCharCode(55296+(u>>10)),e[n++]=String.fromCharCode(56320+(u&1023))}else{const i=r[t++],a=r[t++];e[n++]=String.fromCharCode((s&15)<<12|(i&63)<<6|a&63)}}return e.join("")},_x={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:typeof atob=="function",encodeByteArray(r,e){if(!Array.isArray(r))throw Error("encodeByteArray takes an array as a parameter");this.init_();const t=e?this.byteToCharMapWebSafe_:this.byteToCharMap_,n=[];for(let s=0;s<r.length;s+=3){const i=r[s],a=s+1<r.length,l=a?r[s+1]:0,u=s+2<r.length,d=u?r[s+2]:0,h=i>>2,p=(i&3)<<4|l>>4;let g=(l&15)<<2|d>>6,b=d&63;u||(b=64,a||(g=64)),n.push(t[h],t[p],t[g],t[b])}return n.join("")},encodeString(r,e){return this.HAS_NATIVE_SUPPORT&&!e?btoa(r):this.encodeByteArray(wx(r),e)},decodeString(r,e){return this.HAS_NATIVE_SUPPORT&&!e?atob(r):EE(this.decodeStringToByteArray(r,e))},decodeStringToByteArray(r,e){this.init_();const t=e?this.charToByteMapWebSafe_:this.charToByteMap_,n=[];for(let s=0;s<r.length;){const i=t[r.charAt(s++)],l=s<r.length?t[r.charAt(s)]:0;++s;const d=s<r.length?t[r.charAt(s)]:64;++s;const p=s<r.length?t[r.charAt(s)]:64;if(++s,i==null||l==null||d==null||p==null)throw new NE;const g=i<<2|l>>4;if(n.push(g),d!==64){const b=l<<4&240|d>>2;if(n.push(b),p!==64){const C=d<<6&192|p;n.push(C)}}}return n},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let r=0;r<this.ENCODED_VALS.length;r++)this.byteToCharMap_[r]=this.ENCODED_VALS.charAt(r),this.charToByteMap_[this.byteToCharMap_[r]]=r,this.byteToCharMapWebSafe_[r]=this.ENCODED_VALS_WEBSAFE.charAt(r),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[r]]=r,r>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(r)]=r,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(r)]=r)}}};class NE extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}}const CE=function(r){const e=wx(r);return _x.encodeByteArray(e,!0)},gl=function(r){return CE(r).replace(/\./g,"")},Tx=function(r){try{return _x.decodeString(r,!0)}catch(e){console.error("base64Decode failed: ",e)}return null};/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function kE(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("Unable to locate global object.")}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const SE=()=>kE().__FIREBASE_DEFAULTS__,jE=()=>{if(typeof process>"u"||typeof ep>"u")return;const r=ep.__FIREBASE_DEFAULTS__;if(r)return JSON.parse(r)},IE=()=>{if(typeof document>"u")return;let r;try{r=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch{return}const e=r&&Tx(r[1]);return e&&JSON.parse(e)},nc=()=>{try{return TE()||SE()||jE()||IE()}catch(r){console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${r}`);return}},Ex=r=>{var e,t;return(t=(e=nc())===null||e===void 0?void 0:e.emulatorHosts)===null||t===void 0?void 0:t[r]},Nx=r=>{const e=Ex(r);if(!e)return;const t=e.lastIndexOf(":");if(t<=0||t+1===e.length)throw new Error(`Invalid host ${e} with no separate hostname and port!`);const n=parseInt(e.substring(t+1),10);return e[0]==="["?[e.substring(1,t-1),n]:[e.substring(0,t),n]},Cx=()=>{var r;return(r=nc())===null||r===void 0?void 0:r.config},kx=r=>{var e;return(e=nc())===null||e===void 0?void 0:e[`_${r}`]};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class AE{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((e,t)=>{this.resolve=e,this.reject=t})}wrapCallback(e){return(t,n)=>{t?this.reject(t):this.resolve(n),typeof e=="function"&&(this.promise.catch(()=>{}),e.length===1?e(t):e(t,n))}}}/**
 * @license
 * Copyright 2025 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function zn(r){try{return(r.startsWith("http://")||r.startsWith("https://")?new URL(r).hostname:r).endsWith(".cloudworkstations.dev")}catch{return!1}}async function mh(r){return(await fetch(r,{credentials:"include"})).ok}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Sx(r,e){if(r.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');const t={alg:"none",type:"JWT"},n=e||"demo-project",s=r.iat||0,i=r.sub||r.user_id;if(!i)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");const a=Object.assign({iss:`https://securetoken.google.com/${n}`,aud:n,iat:s,exp:s+3600,auth_time:s,sub:i,user_id:i,firebase:{sign_in_provider:"custom",identities:{}}},r);return[gl(JSON.stringify(t)),gl(JSON.stringify(a)),""].join(".")}const _i={};function RE(){const r={prod:[],emulator:[]};for(const e of Object.keys(_i))_i[e]?r.emulator.push(e):r.prod.push(e);return r}function PE(r){let e=document.getElementById(r),t=!1;return e||(e=document.createElement("div"),e.setAttribute("id",r),t=!0),{created:t,element:e}}let tp=!1;function ph(r,e){if(typeof window>"u"||typeof document>"u"||!zn(window.location.host)||_i[r]===e||_i[r]||tp)return;_i[r]=e;function t(g){return`__firebase__banner__${g}`}const n="__firebase__banner",i=RE().prod.length>0;function a(){const g=document.getElementById(n);g&&g.remove()}function l(g){g.style.display="flex",g.style.background="#7faaf0",g.style.position="fixed",g.style.bottom="5px",g.style.left="5px",g.style.padding=".5em",g.style.borderRadius="5px",g.style.alignItems="center"}function u(g,b){g.setAttribute("width","24"),g.setAttribute("id",b),g.setAttribute("height","24"),g.setAttribute("viewBox","0 0 24 24"),g.setAttribute("fill","none"),g.style.marginLeft="-6px"}function d(){const g=document.createElement("span");return g.style.cursor="pointer",g.style.marginLeft="16px",g.style.fontSize="24px",g.innerHTML=" &times;",g.onclick=()=>{tp=!0,a()},g}function h(g,b){g.setAttribute("id",b),g.innerText="Learn more",g.href="https://firebase.google.com/docs/studio/preview-apps#preview-backend",g.setAttribute("target","__blank"),g.style.paddingLeft="5px",g.style.textDecoration="underline"}function p(){const g=PE(n),b=t("text"),C=document.getElementById(b)||document.createElement("span"),x=t("learnmore"),v=document.getElementById(x)||document.createElement("a"),E=t("preprendIcon"),T=document.getElementById(E)||document.createElementNS("http://www.w3.org/2000/svg","svg");if(g.created){const N=g.element;l(N),h(v,x);const R=d();u(T,E),N.append(T,C,v,R),document.body.appendChild(N)}i?(C.innerText="Preview backend disconnected.",T.innerHTML=`<g clip-path="url(#clip0_6013_33858)">
<path d="M4.8 17.6L12 5.6L19.2 17.6H4.8ZM6.91667 16.4H17.0833L12 7.93333L6.91667 16.4ZM12 15.6C12.1667 15.6 12.3056 15.5444 12.4167 15.4333C12.5389 15.3111 12.6 15.1667 12.6 15C12.6 14.8333 12.5389 14.6944 12.4167 14.5833C12.3056 14.4611 12.1667 14.4 12 14.4C11.8333 14.4 11.6889 14.4611 11.5667 14.5833C11.4556 14.6944 11.4 14.8333 11.4 15C11.4 15.1667 11.4556 15.3111 11.5667 15.4333C11.6889 15.5444 11.8333 15.6 12 15.6ZM11.4 13.6H12.6V10.4H11.4V13.6Z" fill="#212121"/>
</g>
<defs>
<clipPath id="clip0_6013_33858">
<rect width="24" height="24" fill="white"/>
</clipPath>
</defs>`):(T.innerHTML=`<g clip-path="url(#clip0_6083_34804)">
<path d="M11.4 15.2H12.6V11.2H11.4V15.2ZM12 10C12.1667 10 12.3056 9.94444 12.4167 9.83333C12.5389 9.71111 12.6 9.56667 12.6 9.4C12.6 9.23333 12.5389 9.09444 12.4167 8.98333C12.3056 8.86111 12.1667 8.8 12 8.8C11.8333 8.8 11.6889 8.86111 11.5667 8.98333C11.4556 9.09444 11.4 9.23333 11.4 9.4C11.4 9.56667 11.4556 9.71111 11.5667 9.83333C11.6889 9.94444 11.8333 10 12 10ZM12 18.4C11.1222 18.4 10.2944 18.2333 9.51667 17.9C8.73889 17.5667 8.05556 17.1111 7.46667 16.5333C6.88889 15.9444 6.43333 15.2611 6.1 14.4833C5.76667 13.7056 5.6 12.8778 5.6 12C5.6 11.1111 5.76667 10.2833 6.1 9.51667C6.43333 8.73889 6.88889 8.06111 7.46667 7.48333C8.05556 6.89444 8.73889 6.43333 9.51667 6.1C10.2944 5.76667 11.1222 5.6 12 5.6C12.8889 5.6 13.7167 5.76667 14.4833 6.1C15.2611 6.43333 15.9389 6.89444 16.5167 7.48333C17.1056 8.06111 17.5667 8.73889 17.9 9.51667C18.2333 10.2833 18.4 11.1111 18.4 12C18.4 12.8778 18.2333 13.7056 17.9 14.4833C17.5667 15.2611 17.1056 15.9444 16.5167 16.5333C15.9389 17.1111 15.2611 17.5667 14.4833 17.9C13.7167 18.2333 12.8889 18.4 12 18.4ZM12 17.2C13.4444 17.2 14.6722 16.6944 15.6833 15.6833C16.6944 14.6722 17.2 13.4444 17.2 12C17.2 10.5556 16.6944 9.32778 15.6833 8.31667C14.6722 7.30555 13.4444 6.8 12 6.8C10.5556 6.8 9.32778 7.30555 8.31667 8.31667C7.30556 9.32778 6.8 10.5556 6.8 12C6.8 13.4444 7.30556 14.6722 8.31667 15.6833C9.32778 16.6944 10.5556 17.2 12 17.2Z" fill="#212121"/>
</g>
<defs>
<clipPath id="clip0_6083_34804">
<rect width="24" height="24" fill="white"/>
</clipPath>
</defs>`,C.innerText="Preview backend running in this workspace."),C.setAttribute("id",b)}document.readyState==="loading"?window.addEventListener("DOMContentLoaded",p):p()}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function wt(){return typeof navigator<"u"&&typeof navigator.userAgent=="string"?navigator.userAgent:""}function ME(){return typeof window<"u"&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(wt())}function DE(){var r;const e=(r=nc())===null||r===void 0?void 0:r.forceEnvironment;if(e==="node")return!0;if(e==="browser")return!1;try{return Object.prototype.toString.call(global.process)==="[object process]"}catch{return!1}}function OE(){return typeof navigator<"u"&&navigator.userAgent==="Cloudflare-Workers"}function LE(){const r=typeof chrome=="object"?chrome.runtime:typeof browser=="object"?browser.runtime:void 0;return typeof r=="object"&&r.id!==void 0}function VE(){return typeof navigator=="object"&&navigator.product==="ReactNative"}function FE(){const r=wt();return r.indexOf("MSIE ")>=0||r.indexOf("Trident/")>=0}function UE(){return!DE()&&!!navigator.userAgent&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")}function jx(){try{return typeof indexedDB=="object"}catch{return!1}}function Ix(){return new Promise((r,e)=>{try{let t=!0;const n="validate-browser-context-for-indexeddb-analytics-module",s=self.indexedDB.open(n);s.onsuccess=()=>{s.result.close(),t||self.indexedDB.deleteDatabase(n),r(!0)},s.onupgradeneeded=()=>{t=!1},s.onerror=()=>{var i;e(((i=s.error)===null||i===void 0?void 0:i.message)||"")}}catch(t){e(t)}})}function $E(){return!(typeof navigator>"u"||!navigator.cookieEnabled)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const BE="FirebaseError";class fr extends Error{constructor(e,t,n){super(t),this.code=e,this.customData=n,this.name=BE,Object.setPrototypeOf(this,fr.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,js.prototype.create)}}class js{constructor(e,t,n){this.service=e,this.serviceName=t,this.errors=n}create(e,...t){const n=t[0]||{},s=`${this.service}/${e}`,i=this.errors[e],a=i?zE(i,n):"Error",l=`${this.serviceName}: ${a} (${s}).`;return new fr(s,l,n)}}function zE(r,e){return r.replace(qE,(t,n)=>{const s=e[n];return s!=null?String(s):`<${n}?>`})}const qE=/\{\$([^}]+)}/g;function HE(r){for(const e in r)if(Object.prototype.hasOwnProperty.call(r,e))return!1;return!0}function xs(r,e){if(r===e)return!0;const t=Object.keys(r),n=Object.keys(e);for(const s of t){if(!n.includes(s))return!1;const i=r[s],a=e[s];if(rp(i)&&rp(a)){if(!xs(i,a))return!1}else if(i!==a)return!1}for(const s of n)if(!t.includes(s))return!1;return!0}function rp(r){return r!==null&&typeof r=="object"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Zi(r){const e=[];for(const[t,n]of Object.entries(r))Array.isArray(n)?n.forEach(s=>{e.push(encodeURIComponent(t)+"="+encodeURIComponent(s))}):e.push(encodeURIComponent(t)+"="+encodeURIComponent(n));return e.length?"&"+e.join("&"):""}function gi(r){const e={};return r.replace(/^\?/,"").split("&").forEach(n=>{if(n){const[s,i]=n.split("=");e[decodeURIComponent(s)]=decodeURIComponent(i)}}),e}function yi(r){const e=r.indexOf("?");if(!e)return"";const t=r.indexOf("#",e);return r.substring(e,t>0?t:void 0)}function WE(r,e){const t=new GE(r,e);return t.subscribe.bind(t)}class GE{constructor(e,t){this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=t,this.task.then(()=>{e(this)}).catch(n=>{this.error(n)})}next(e){this.forEachObserver(t=>{t.next(e)})}error(e){this.forEachObserver(t=>{t.error(e)}),this.close(e)}complete(){this.forEachObserver(e=>{e.complete()}),this.close()}subscribe(e,t,n){let s;if(e===void 0&&t===void 0&&n===void 0)throw new Error("Missing Observer.");KE(e,["next","error","complete"])?s=e:s={next:e,error:t,complete:n},s.next===void 0&&(s.next=pu),s.error===void 0&&(s.error=pu),s.complete===void 0&&(s.complete=pu);const i=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then(()=>{try{this.finalError?s.error(this.finalError):s.complete()}catch{}}),this.observers.push(s),i}unsubscribeOne(e){this.observers===void 0||this.observers[e]===void 0||(delete this.observers[e],this.observerCount-=1,this.observerCount===0&&this.onNoObservers!==void 0&&this.onNoObservers(this))}forEachObserver(e){if(!this.finalized)for(let t=0;t<this.observers.length;t++)this.sendOne(t,e)}sendOne(e,t){this.task.then(()=>{if(this.observers!==void 0&&this.observers[e]!==void 0)try{t(this.observers[e])}catch(n){typeof console<"u"&&console.error&&console.error(n)}})}close(e){this.finalized||(this.finalized=!0,e!==void 0&&(this.finalError=e),this.task.then(()=>{this.observers=void 0,this.onNoObservers=void 0}))}}function KE(r,e){if(typeof r!="object"||r===null)return!1;for(const t of e)if(t in r&&typeof r[t]=="function")return!0;return!1}function pu(){}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Me(r){return r&&r._delegate?r._delegate:r}class cr{constructor(e,t,n){this.name=e,this.instanceFactory=t,this.type=n,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(e){return this.instantiationMode=e,this}setMultipleInstances(e){return this.multipleInstances=e,this}setServiceProps(e){return this.serviceProps=e,this}setInstanceCreatedCallback(e){return this.onInstanceCreated=e,this}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ts="[DEFAULT]";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let QE=class{constructor(e,t){this.name=e,this.container=t,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(e){const t=this.normalizeInstanceIdentifier(e);if(!this.instancesDeferred.has(t)){const n=new AE;if(this.instancesDeferred.set(t,n),this.isInitialized(t)||this.shouldAutoInitialize())try{const s=this.getOrInitializeService({instanceIdentifier:t});s&&n.resolve(s)}catch{}}return this.instancesDeferred.get(t).promise}getImmediate(e){var t;const n=this.normalizeInstanceIdentifier(e==null?void 0:e.identifier),s=(t=e==null?void 0:e.optional)!==null&&t!==void 0?t:!1;if(this.isInitialized(n)||this.shouldAutoInitialize())try{return this.getOrInitializeService({instanceIdentifier:n})}catch(i){if(s)return null;throw i}else{if(s)return null;throw Error(`Service ${this.name} is not available`)}}getComponent(){return this.component}setComponent(e){if(e.name!==this.name)throw Error(`Mismatching Component ${e.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=e,!!this.shouldAutoInitialize()){if(XE(e))try{this.getOrInitializeService({instanceIdentifier:ts})}catch{}for(const[t,n]of this.instancesDeferred.entries()){const s=this.normalizeInstanceIdentifier(t);try{const i=this.getOrInitializeService({instanceIdentifier:s});n.resolve(i)}catch{}}}}clearInstance(e=ts){this.instancesDeferred.delete(e),this.instancesOptions.delete(e),this.instances.delete(e)}async delete(){const e=Array.from(this.instances.values());await Promise.all([...e.filter(t=>"INTERNAL"in t).map(t=>t.INTERNAL.delete()),...e.filter(t=>"_delete"in t).map(t=>t._delete())])}isComponentSet(){return this.component!=null}isInitialized(e=ts){return this.instances.has(e)}getOptions(e=ts){return this.instancesOptions.get(e)||{}}initialize(e={}){const{options:t={}}=e,n=this.normalizeInstanceIdentifier(e.instanceIdentifier);if(this.isInitialized(n))throw Error(`${this.name}(${n}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);const s=this.getOrInitializeService({instanceIdentifier:n,options:t});for(const[i,a]of this.instancesDeferred.entries()){const l=this.normalizeInstanceIdentifier(i);n===l&&a.resolve(s)}return s}onInit(e,t){var n;const s=this.normalizeInstanceIdentifier(t),i=(n=this.onInitCallbacks.get(s))!==null&&n!==void 0?n:new Set;i.add(e),this.onInitCallbacks.set(s,i);const a=this.instances.get(s);return a&&e(a,s),()=>{i.delete(e)}}invokeOnInitCallbacks(e,t){const n=this.onInitCallbacks.get(t);if(n)for(const s of n)try{s(e,t)}catch{}}getOrInitializeService({instanceIdentifier:e,options:t={}}){let n=this.instances.get(e);if(!n&&this.component&&(n=this.component.instanceFactory(this.container,{instanceIdentifier:YE(e),options:t}),this.instances.set(e,n),this.instancesOptions.set(e,t),this.invokeOnInitCallbacks(n,e),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,e,n)}catch{}return n||null}normalizeInstanceIdentifier(e=ts){return this.component?this.component.multipleInstances?e:ts:e}shouldAutoInitialize(){return!!this.component&&this.component.instantiationMode!=="EXPLICIT"}};function YE(r){return r===ts?void 0:r}function XE(r){return r.instantiationMode==="EAGER"}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class JE{constructor(e){this.name=e,this.providers=new Map}addComponent(e){const t=this.getProvider(e.name);if(t.isComponentSet())throw new Error(`Component ${e.name} has already been registered with ${this.name}`);t.setComponent(e)}addOrOverwriteComponent(e){this.getProvider(e.name).isComponentSet()&&this.providers.delete(e.name),this.addComponent(e)}getProvider(e){if(this.providers.has(e))return this.providers.get(e);const t=new QE(e,this);return this.providers.set(e,t),t}getProviders(){return Array.from(this.providers.values())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var be;(function(r){r[r.DEBUG=0]="DEBUG",r[r.VERBOSE=1]="VERBOSE",r[r.INFO=2]="INFO",r[r.WARN=3]="WARN",r[r.ERROR=4]="ERROR",r[r.SILENT=5]="SILENT"})(be||(be={}));const ZE={debug:be.DEBUG,verbose:be.VERBOSE,info:be.INFO,warn:be.WARN,error:be.ERROR,silent:be.SILENT},eN=be.INFO,tN={[be.DEBUG]:"log",[be.VERBOSE]:"log",[be.INFO]:"info",[be.WARN]:"warn",[be.ERROR]:"error"},rN=(r,e,...t)=>{if(e<r.logLevel)return;const n=new Date().toISOString(),s=tN[e];if(s)console[s](`[${n}]  ${r.name}:`,...t);else throw new Error(`Attempted to log a message with an invalid logType (value: ${e})`)};class sc{constructor(e){this.name=e,this._logLevel=eN,this._logHandler=rN,this._userLogHandler=null}get logLevel(){return this._logLevel}set logLevel(e){if(!(e in be))throw new TypeError(`Invalid value "${e}" assigned to \`logLevel\``);this._logLevel=e}setLogLevel(e){this._logLevel=typeof e=="string"?ZE[e]:e}get logHandler(){return this._logHandler}set logHandler(e){if(typeof e!="function")throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=e}get userLogHandler(){return this._userLogHandler}set userLogHandler(e){this._userLogHandler=e}debug(...e){this._userLogHandler&&this._userLogHandler(this,be.DEBUG,...e),this._logHandler(this,be.DEBUG,...e)}log(...e){this._userLogHandler&&this._userLogHandler(this,be.VERBOSE,...e),this._logHandler(this,be.VERBOSE,...e)}info(...e){this._userLogHandler&&this._userLogHandler(this,be.INFO,...e),this._logHandler(this,be.INFO,...e)}warn(...e){this._userLogHandler&&this._userLogHandler(this,be.WARN,...e),this._logHandler(this,be.WARN,...e)}error(...e){this._userLogHandler&&this._userLogHandler(this,be.ERROR,...e),this._logHandler(this,be.ERROR,...e)}}const nN=(r,e)=>e.some(t=>r instanceof t);let np,sp;function sN(){return np||(np=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}function oN(){return sp||(sp=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}const Ax=new WeakMap,Qu=new WeakMap,Rx=new WeakMap,gu=new WeakMap,gh=new WeakMap;function iN(r){const e=new Promise((t,n)=>{const s=()=>{r.removeEventListener("success",i),r.removeEventListener("error",a)},i=()=>{t(Tn(r.result)),s()},a=()=>{n(r.error),s()};r.addEventListener("success",i),r.addEventListener("error",a)});return e.then(t=>{t instanceof IDBCursor&&Ax.set(t,r)}).catch(()=>{}),gh.set(e,r),e}function aN(r){if(Qu.has(r))return;const e=new Promise((t,n)=>{const s=()=>{r.removeEventListener("complete",i),r.removeEventListener("error",a),r.removeEventListener("abort",a)},i=()=>{t(),s()},a=()=>{n(r.error||new DOMException("AbortError","AbortError")),s()};r.addEventListener("complete",i),r.addEventListener("error",a),r.addEventListener("abort",a)});Qu.set(r,e)}let Yu={get(r,e,t){if(r instanceof IDBTransaction){if(e==="done")return Qu.get(r);if(e==="objectStoreNames")return r.objectStoreNames||Rx.get(r);if(e==="store")return t.objectStoreNames[1]?void 0:t.objectStore(t.objectStoreNames[0])}return Tn(r[e])},set(r,e,t){return r[e]=t,!0},has(r,e){return r instanceof IDBTransaction&&(e==="done"||e==="store")?!0:e in r}};function lN(r){Yu=r(Yu)}function cN(r){return r===IDBDatabase.prototype.transaction&&!("objectStoreNames"in IDBTransaction.prototype)?function(e,...t){const n=r.call(yu(this),e,...t);return Rx.set(n,e.sort?e.sort():[e]),Tn(n)}:oN().includes(r)?function(...e){return r.apply(yu(this),e),Tn(Ax.get(this))}:function(...e){return Tn(r.apply(yu(this),e))}}function uN(r){return typeof r=="function"?cN(r):(r instanceof IDBTransaction&&aN(r),nN(r,sN())?new Proxy(r,Yu):r)}function Tn(r){if(r instanceof IDBRequest)return iN(r);if(gu.has(r))return gu.get(r);const e=uN(r);return e!==r&&(gu.set(r,e),gh.set(e,r)),e}const yu=r=>gh.get(r);function Px(r,e,{blocked:t,upgrade:n,blocking:s,terminated:i}={}){const a=indexedDB.open(r,e),l=Tn(a);return n&&a.addEventListener("upgradeneeded",u=>{n(Tn(a.result),u.oldVersion,u.newVersion,Tn(a.transaction),u)}),t&&a.addEventListener("blocked",u=>t(u.oldVersion,u.newVersion,u)),l.then(u=>{i&&u.addEventListener("close",()=>i()),s&&u.addEventListener("versionchange",d=>s(d.oldVersion,d.newVersion,d))}).catch(()=>{}),l}const dN=["get","getKey","getAll","getAllKeys","count"],hN=["put","add","delete","clear"],xu=new Map;function op(r,e){if(!(r instanceof IDBDatabase&&!(e in r)&&typeof e=="string"))return;if(xu.get(e))return xu.get(e);const t=e.replace(/FromIndex$/,""),n=e!==t,s=hN.includes(t);if(!(t in(n?IDBIndex:IDBObjectStore).prototype)||!(s||dN.includes(t)))return;const i=async function(a,...l){const u=this.transaction(a,s?"readwrite":"readonly");let d=u.store;return n&&(d=d.index(l.shift())),(await Promise.all([d[t](...l),s&&u.done]))[0]};return xu.set(e,i),i}lN(r=>({...r,get:(e,t,n)=>op(e,t)||r.get(e,t,n),has:(e,t)=>!!op(e,t)||r.has(e,t)}));/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class fN{constructor(e){this.container=e}getPlatformInfoString(){return this.container.getProviders().map(t=>{if(mN(t)){const n=t.getImmediate();return`${n.library}/${n.version}`}else return null}).filter(t=>t).join(" ")}}function mN(r){const e=r.getComponent();return(e==null?void 0:e.type)==="VERSION"}const Xu="@firebase/app",ip="0.13.2";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Br=new sc("@firebase/app"),pN="@firebase/app-compat",gN="@firebase/analytics-compat",yN="@firebase/analytics",xN="@firebase/app-check-compat",bN="@firebase/app-check",vN="@firebase/auth",wN="@firebase/auth-compat",_N="@firebase/database",TN="@firebase/data-connect",EN="@firebase/database-compat",NN="@firebase/functions",CN="@firebase/functions-compat",kN="@firebase/installations",SN="@firebase/installations-compat",jN="@firebase/messaging",IN="@firebase/messaging-compat",AN="@firebase/performance",RN="@firebase/performance-compat",PN="@firebase/remote-config",MN="@firebase/remote-config-compat",DN="@firebase/storage",ON="@firebase/storage-compat",LN="@firebase/firestore",VN="@firebase/ai",FN="@firebase/firestore-compat",UN="firebase",$N="11.10.0";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ju="[DEFAULT]",BN={[Xu]:"fire-core",[pN]:"fire-core-compat",[yN]:"fire-analytics",[gN]:"fire-analytics-compat",[bN]:"fire-app-check",[xN]:"fire-app-check-compat",[vN]:"fire-auth",[wN]:"fire-auth-compat",[_N]:"fire-rtdb",[TN]:"fire-data-connect",[EN]:"fire-rtdb-compat",[NN]:"fire-fn",[CN]:"fire-fn-compat",[kN]:"fire-iid",[SN]:"fire-iid-compat",[jN]:"fire-fcm",[IN]:"fire-fcm-compat",[AN]:"fire-perf",[RN]:"fire-perf-compat",[PN]:"fire-rc",[MN]:"fire-rc-compat",[DN]:"fire-gcs",[ON]:"fire-gcs-compat",[LN]:"fire-fst",[FN]:"fire-fst-compat",[VN]:"fire-vertex","fire-js":"fire-js",[UN]:"fire-js-all"};/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const yl=new Map,zN=new Map,Zu=new Map;function ap(r,e){try{r.container.addComponent(e)}catch(t){Br.debug(`Component ${e.name} failed to register with FirebaseApp ${r.name}`,t)}}function Cr(r){const e=r.name;if(Zu.has(e))return Br.debug(`There were multiple attempts to register component ${e}.`),!1;Zu.set(e,r);for(const t of yl.values())ap(t,r);for(const t of zN.values())ap(t,r);return!0}function Is(r,e){const t=r.container.getProvider("heartbeat").getImmediate({optional:!0});return t&&t.triggerHeartbeat(),r.container.getProvider(e)}function Mt(r){return r==null?!1:r.settings!==void 0}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const qN={"no-app":"No Firebase App '{$appName}' has been created - call initializeApp() first","bad-app-name":"Illegal App name: '{$appName}'","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","server-app-deleted":"Firebase Server App has been deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}.","finalization-registry-not-supported":"FirebaseServerApp deleteOnDeref field defined but the JS runtime does not support FinalizationRegistry.","invalid-server-app-environment":"FirebaseServerApp is not for use in browser environments."},En=new js("app","Firebase",qN);/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class HN{constructor(e,t,n){this._isDeleted=!1,this._options=Object.assign({},e),this._config=Object.assign({},t),this._name=t.name,this._automaticDataCollectionEnabled=t.automaticDataCollectionEnabled,this._container=n,this.container.addComponent(new cr("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(e){this.checkDestroyed(),this._automaticDataCollectionEnabled=e}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(e){this._isDeleted=e}checkDestroyed(){if(this.isDeleted)throw En.create("app-deleted",{appName:this._name})}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const As=$N;function ed(r,e={}){let t=r;typeof e!="object"&&(e={name:e});const n=Object.assign({name:Ju,automaticDataCollectionEnabled:!0},e),s=n.name;if(typeof s!="string"||!s)throw En.create("bad-app-name",{appName:String(s)});if(t||(t=Cx()),!t)throw En.create("no-options");const i=yl.get(s);if(i){if(xs(t,i.options)&&xs(n,i.config))return i;throw En.create("duplicate-app",{appName:s})}const a=new JE(s);for(const u of Zu.values())a.addComponent(u);const l=new HN(t,n,a);return yl.set(s,l),l}function oc(r=Ju){const e=yl.get(r);if(!e&&r===Ju&&Cx())return ed();if(!e)throw En.create("no-app",{appName:r});return e}function Lt(r,e,t){var n;let s=(n=BN[r])!==null&&n!==void 0?n:r;t&&(s+=`-${t}`);const i=s.match(/\s|\//),a=e.match(/\s|\//);if(i||a){const l=[`Unable to register library "${s}" with version "${e}":`];i&&l.push(`library name "${s}" contains illegal characters (whitespace or "/")`),i&&a&&l.push("and"),a&&l.push(`version name "${e}" contains illegal characters (whitespace or "/")`),Br.warn(l.join(" "));return}Cr(new cr(`${s}-version`,()=>({library:s,version:e}),"VERSION"))}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const WN="firebase-heartbeat-database",GN=1,Di="firebase-heartbeat-store";let bu=null;function Mx(){return bu||(bu=Px(WN,GN,{upgrade:(r,e)=>{switch(e){case 0:try{r.createObjectStore(Di)}catch(t){console.warn(t)}}}}).catch(r=>{throw En.create("idb-open",{originalErrorMessage:r.message})})),bu}async function KN(r){try{const t=(await Mx()).transaction(Di),n=await t.objectStore(Di).get(Dx(r));return await t.done,n}catch(e){if(e instanceof fr)Br.warn(e.message);else{const t=En.create("idb-get",{originalErrorMessage:e==null?void 0:e.message});Br.warn(t.message)}}}async function lp(r,e){try{const n=(await Mx()).transaction(Di,"readwrite");await n.objectStore(Di).put(e,Dx(r)),await n.done}catch(t){if(t instanceof fr)Br.warn(t.message);else{const n=En.create("idb-set",{originalErrorMessage:t==null?void 0:t.message});Br.warn(n.message)}}}function Dx(r){return`${r.name}!${r.options.appId}`}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const QN=1024,YN=30;class XN{constructor(e){this.container=e,this._heartbeatsCache=null;const t=this.container.getProvider("app").getImmediate();this._storage=new ZN(t),this._heartbeatsCachePromise=this._storage.read().then(n=>(this._heartbeatsCache=n,n))}async triggerHeartbeat(){var e,t;try{const s=this.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),i=cp();if(((e=this._heartbeatsCache)===null||e===void 0?void 0:e.heartbeats)==null&&(this._heartbeatsCache=await this._heartbeatsCachePromise,((t=this._heartbeatsCache)===null||t===void 0?void 0:t.heartbeats)==null)||this._heartbeatsCache.lastSentHeartbeatDate===i||this._heartbeatsCache.heartbeats.some(a=>a.date===i))return;if(this._heartbeatsCache.heartbeats.push({date:i,agent:s}),this._heartbeatsCache.heartbeats.length>YN){const a=eC(this._heartbeatsCache.heartbeats);this._heartbeatsCache.heartbeats.splice(a,1)}return this._storage.overwrite(this._heartbeatsCache)}catch(n){Br.warn(n)}}async getHeartbeatsHeader(){var e;try{if(this._heartbeatsCache===null&&await this._heartbeatsCachePromise,((e=this._heartbeatsCache)===null||e===void 0?void 0:e.heartbeats)==null||this._heartbeatsCache.heartbeats.length===0)return"";const t=cp(),{heartbeatsToSend:n,unsentEntries:s}=JN(this._heartbeatsCache.heartbeats),i=gl(JSON.stringify({version:2,heartbeats:n}));return this._heartbeatsCache.lastSentHeartbeatDate=t,s.length>0?(this._heartbeatsCache.heartbeats=s,await this._storage.overwrite(this._heartbeatsCache)):(this._heartbeatsCache.heartbeats=[],this._storage.overwrite(this._heartbeatsCache)),i}catch(t){return Br.warn(t),""}}}function cp(){return new Date().toISOString().substring(0,10)}function JN(r,e=QN){const t=[];let n=r.slice();for(const s of r){const i=t.find(a=>a.agent===s.agent);if(i){if(i.dates.push(s.date),up(t)>e){i.dates.pop();break}}else if(t.push({agent:s.agent,dates:[s.date]}),up(t)>e){t.pop();break}n=n.slice(1)}return{heartbeatsToSend:t,unsentEntries:n}}class ZN{constructor(e){this.app=e,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}async runIndexedDBEnvironmentCheck(){return jx()?Ix().then(()=>!0).catch(()=>!1):!1}async read(){if(await this._canUseIndexedDBPromise){const t=await KN(this.app);return t!=null&&t.heartbeats?t:{heartbeats:[]}}else return{heartbeats:[]}}async overwrite(e){var t;if(await this._canUseIndexedDBPromise){const s=await this.read();return lp(this.app,{lastSentHeartbeatDate:(t=e.lastSentHeartbeatDate)!==null&&t!==void 0?t:s.lastSentHeartbeatDate,heartbeats:e.heartbeats})}else return}async add(e){var t;if(await this._canUseIndexedDBPromise){const s=await this.read();return lp(this.app,{lastSentHeartbeatDate:(t=e.lastSentHeartbeatDate)!==null&&t!==void 0?t:s.lastSentHeartbeatDate,heartbeats:[...s.heartbeats,...e.heartbeats]})}else return}}function up(r){return gl(JSON.stringify({version:2,heartbeats:r})).length}function eC(r){if(r.length===0)return-1;let e=0,t=r[0].date;for(let n=1;n<r.length;n++)r[n].date<t&&(t=r[n].date,e=n);return e}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function tC(r){Cr(new cr("platform-logger",e=>new fN(e),"PRIVATE")),Cr(new cr("heartbeat",e=>new XN(e),"PRIVATE")),Lt(Xu,ip,r),Lt(Xu,ip,"esm2017"),Lt("fire-js","")}tC("");var rC="firebase",nC="11.10.0";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */Lt(rC,nC,"app");function Ox(){return{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}}const sC=Ox,Lx=new js("auth","Firebase",Ox());/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const xl=new sc("@firebase/auth");function oC(r,...e){xl.logLevel<=be.WARN&&xl.warn(`Auth (${As}): ${r}`,...e)}function Xa(r,...e){xl.logLevel<=be.ERROR&&xl.error(`Auth (${As}): ${r}`,...e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Yt(r,...e){throw xh(r,...e)}function lr(r,...e){return xh(r,...e)}function yh(r,e,t){const n=Object.assign(Object.assign({},sC()),{[e]:t});return new js("auth","Firebase",n).create(e,{appName:r.name})}function Ur(r){return yh(r,"operation-not-supported-in-this-environment","Operations that alter the current user are not supported in conjunction with FirebaseServerApp")}function iC(r,e,t){const n=t;if(!(e instanceof n))throw n.name!==e.constructor.name&&Yt(r,"argument-error"),yh(r,"argument-error",`Type of ${e.constructor.name} does not match expected instance.Did you pass a reference from a different Auth SDK?`)}function xh(r,...e){if(typeof r!="string"){const t=e[0],n=[...e.slice(1)];return n[0]&&(n[0].appName=r.name),r._errorFactory.create(t,...n)}return Lx.create(r,...e)}function ie(r,e,...t){if(!r)throw xh(e,...t)}function Vr(r){const e="INTERNAL ASSERTION FAILED: "+r;throw Xa(e),new Error(e)}function zr(r,e){r||Vr(e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function td(){var r;return typeof self<"u"&&((r=self.location)===null||r===void 0?void 0:r.href)||""}function aC(){return dp()==="http:"||dp()==="https:"}function dp(){var r;return typeof self<"u"&&((r=self.location)===null||r===void 0?void 0:r.protocol)||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function lC(){return typeof navigator<"u"&&navigator&&"onLine"in navigator&&typeof navigator.onLine=="boolean"&&(aC()||LE()||"connection"in navigator)?navigator.onLine:!0}function cC(){if(typeof navigator>"u")return null;const r=navigator;return r.languages&&r.languages[0]||r.language||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ea{constructor(e,t){this.shortDelay=e,this.longDelay=t,zr(t>e,"Short delay should be less than long delay!"),this.isMobile=ME()||VE()}get(){return lC()?this.isMobile?this.longDelay:this.shortDelay:Math.min(5e3,this.shortDelay)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function bh(r,e){zr(r.emulator,"Emulator should always be set here");const{url:t}=r.emulator;return e?`${t}${e.startsWith("/")?e.slice(1):e}`:t}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Vx{static initialize(e,t,n){this.fetchImpl=e,t&&(this.headersImpl=t),n&&(this.responseImpl=n)}static fetch(){if(this.fetchImpl)return this.fetchImpl;if(typeof self<"u"&&"fetch"in self)return self.fetch;if(typeof globalThis<"u"&&globalThis.fetch)return globalThis.fetch;if(typeof fetch<"u")return fetch;Vr("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static headers(){if(this.headersImpl)return this.headersImpl;if(typeof self<"u"&&"Headers"in self)return self.Headers;if(typeof globalThis<"u"&&globalThis.Headers)return globalThis.Headers;if(typeof Headers<"u")return Headers;Vr("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static response(){if(this.responseImpl)return this.responseImpl;if(typeof self<"u"&&"Response"in self)return self.Response;if(typeof globalThis<"u"&&globalThis.Response)return globalThis.Response;if(typeof Response<"u")return Response;Vr("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const uC={CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_PASSWORD:"wrong-password",MISSING_PASSWORD:"missing-password",INVALID_LOGIN_CREDENTIALS:"invalid-credential",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_REQ_TYPE:"internal-error",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",PASSWORD_DOES_NOT_MEET_REQUIREMENTS:"password-does-not-meet-requirements",INVALID_CODE:"invalid-verification-code",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_SESSION_INFO:"missing-verification-id",SESSION_EXPIRED:"code-expired",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",BLOCKING_FUNCTION_ERROR_RESPONSE:"internal-error",RECAPTCHA_NOT_ENABLED:"recaptcha-not-enabled",MISSING_RECAPTCHA_TOKEN:"missing-recaptcha-token",INVALID_RECAPTCHA_TOKEN:"invalid-recaptcha-token",INVALID_RECAPTCHA_ACTION:"invalid-recaptcha-action",MISSING_CLIENT_TYPE:"missing-client-type",MISSING_RECAPTCHA_VERSION:"missing-recaptcha-version",INVALID_RECAPTCHA_VERSION:"invalid-recaptcha-version",INVALID_REQ_TYPE:"invalid-req-type"};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const dC=["/v1/accounts:signInWithCustomToken","/v1/accounts:signInWithEmailLink","/v1/accounts:signInWithIdp","/v1/accounts:signInWithPassword","/v1/accounts:signInWithPhoneNumber","/v1/token"],hC=new ea(3e4,6e4);function qn(r,e){return r.tenantId&&!e.tenantId?Object.assign(Object.assign({},e),{tenantId:r.tenantId}):e}async function Wr(r,e,t,n,s={}){return Fx(r,s,async()=>{let i={},a={};n&&(e==="GET"?a=n:i={body:JSON.stringify(n)});const l=Zi(Object.assign({key:r.config.apiKey},a)).slice(1),u=await r._getAdditionalHeaders();u["Content-Type"]="application/json",r.languageCode&&(u["X-Firebase-Locale"]=r.languageCode);const d=Object.assign({method:e,headers:u},i);return OE()||(d.referrerPolicy="no-referrer"),r.emulatorConfig&&zn(r.emulatorConfig.host)&&(d.credentials="include"),Vx.fetch()(await Ux(r,r.config.apiHost,t,l),d)})}async function Fx(r,e,t){r._canInitEmulator=!1;const n=Object.assign(Object.assign({},uC),e);try{const s=new mC(r),i=await Promise.race([t(),s.promise]);s.clearNetworkTimeout();const a=await i.json();if("needConfirmation"in a)throw La(r,"account-exists-with-different-credential",a);if(i.ok&&!("errorMessage"in a))return a;{const l=i.ok?a.errorMessage:a.error.message,[u,d]=l.split(" : ");if(u==="FEDERATED_USER_ID_ALREADY_LINKED")throw La(r,"credential-already-in-use",a);if(u==="EMAIL_EXISTS")throw La(r,"email-already-in-use",a);if(u==="USER_DISABLED")throw La(r,"user-disabled",a);const h=n[u]||u.toLowerCase().replace(/[_\s]+/g,"-");if(d)throw yh(r,h,d);Yt(r,h)}}catch(s){if(s instanceof fr)throw s;Yt(r,"network-request-failed",{message:String(s)})}}async function ta(r,e,t,n,s={}){const i=await Wr(r,e,t,n,s);return"mfaPendingCredential"in i&&Yt(r,"multi-factor-auth-required",{_serverResponse:i}),i}async function Ux(r,e,t,n){const s=`${e}${t}?${n}`,i=r,a=i.config.emulator?bh(r.config,s):`${r.config.apiScheme}://${s}`;return dC.includes(t)&&(await i._persistenceManagerAvailable,i._getPersistenceType()==="COOKIE")?i._getPersistence()._getFinalTarget(a).toString():a}function fC(r){switch(r){case"ENFORCE":return"ENFORCE";case"AUDIT":return"AUDIT";case"OFF":return"OFF";default:return"ENFORCEMENT_STATE_UNSPECIFIED"}}class mC{clearNetworkTimeout(){clearTimeout(this.timer)}constructor(e){this.auth=e,this.timer=null,this.promise=new Promise((t,n)=>{this.timer=setTimeout(()=>n(lr(this.auth,"network-request-failed")),hC.get())})}}function La(r,e,t){const n={appName:r.name};t.email&&(n.email=t.email),t.phoneNumber&&(n.phoneNumber=t.phoneNumber);const s=lr(r,e,n);return s.customData._tokenResponse=t,s}function hp(r){return r!==void 0&&r.enterprise!==void 0}class pC{constructor(e){if(this.siteKey="",this.recaptchaEnforcementState=[],e.recaptchaKey===void 0)throw new Error("recaptchaKey undefined");this.siteKey=e.recaptchaKey.split("/")[3],this.recaptchaEnforcementState=e.recaptchaEnforcementState}getProviderEnforcementState(e){if(!this.recaptchaEnforcementState||this.recaptchaEnforcementState.length===0)return null;for(const t of this.recaptchaEnforcementState)if(t.provider&&t.provider===e)return fC(t.enforcementState);return null}isProviderEnabled(e){return this.getProviderEnforcementState(e)==="ENFORCE"||this.getProviderEnforcementState(e)==="AUDIT"}isAnyProviderEnabled(){return this.isProviderEnabled("EMAIL_PASSWORD_PROVIDER")||this.isProviderEnabled("PHONE_PROVIDER")}}async function gC(r,e){return Wr(r,"GET","/v2/recaptchaConfig",qn(r,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function yC(r,e){return Wr(r,"POST","/v1/accounts:delete",e)}async function bl(r,e){return Wr(r,"POST","/v1/accounts:lookup",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ti(r){if(r)try{const e=new Date(Number(r));if(!isNaN(e.getTime()))return e.toUTCString()}catch{}}async function xC(r,e=!1){const t=Me(r),n=await t.getIdToken(e),s=vh(n);ie(s&&s.exp&&s.auth_time&&s.iat,t.auth,"internal-error");const i=typeof s.firebase=="object"?s.firebase:void 0,a=i==null?void 0:i.sign_in_provider;return{claims:s,token:n,authTime:Ti(vu(s.auth_time)),issuedAtTime:Ti(vu(s.iat)),expirationTime:Ti(vu(s.exp)),signInProvider:a||null,signInSecondFactor:(i==null?void 0:i.sign_in_second_factor)||null}}function vu(r){return Number(r)*1e3}function vh(r){const[e,t,n]=r.split(".");if(e===void 0||t===void 0||n===void 0)return Xa("JWT malformed, contained fewer than 3 sections"),null;try{const s=Tx(t);return s?JSON.parse(s):(Xa("Failed to decode base64 JWT payload"),null)}catch(s){return Xa("Caught error parsing JWT payload as JSON",s==null?void 0:s.toString()),null}}function fp(r){const e=vh(r);return ie(e,"internal-error"),ie(typeof e.exp<"u","internal-error"),ie(typeof e.iat<"u","internal-error"),Number(e.exp)-Number(e.iat)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Eo(r,e,t=!1){if(t)return e;try{return await e}catch(n){throw n instanceof fr&&bC(n)&&r.auth.currentUser===r&&await r.auth.signOut(),n}}function bC({code:r}){return r==="auth/user-disabled"||r==="auth/user-token-expired"}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class vC{constructor(e){this.user=e,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}_start(){this.isRunning||(this.isRunning=!0,this.schedule())}_stop(){this.isRunning&&(this.isRunning=!1,this.timerId!==null&&clearTimeout(this.timerId))}getInterval(e){var t;if(e){const n=this.errorBackoff;return this.errorBackoff=Math.min(this.errorBackoff*2,96e4),n}else{this.errorBackoff=3e4;const s=((t=this.user.stsTokenManager.expirationTime)!==null&&t!==void 0?t:0)-Date.now()-3e5;return Math.max(0,s)}}schedule(e=!1){if(!this.isRunning)return;const t=this.getInterval(e);this.timerId=setTimeout(async()=>{await this.iteration()},t)}async iteration(){try{await this.user.getIdToken(!0)}catch(e){(e==null?void 0:e.code)==="auth/network-request-failed"&&this.schedule(!0);return}this.schedule()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class rd{constructor(e,t){this.createdAt=e,this.lastLoginAt=t,this._initializeTime()}_initializeTime(){this.lastSignInTime=Ti(this.lastLoginAt),this.creationTime=Ti(this.createdAt)}_copy(e){this.createdAt=e.createdAt,this.lastLoginAt=e.lastLoginAt,this._initializeTime()}toJSON(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function vl(r){var e;const t=r.auth,n=await r.getIdToken(),s=await Eo(r,bl(t,{idToken:n}));ie(s==null?void 0:s.users.length,t,"internal-error");const i=s.users[0];r._notifyReloadListener(i);const a=!((e=i.providerUserInfo)===null||e===void 0)&&e.length?$x(i.providerUserInfo):[],l=_C(r.providerData,a),u=r.isAnonymous,d=!(r.email&&i.passwordHash)&&!(l!=null&&l.length),h=u?d:!1,p={uid:i.localId,displayName:i.displayName||null,photoURL:i.photoUrl||null,email:i.email||null,emailVerified:i.emailVerified||!1,phoneNumber:i.phoneNumber||null,tenantId:i.tenantId||null,providerData:l,metadata:new rd(i.createdAt,i.lastLoginAt),isAnonymous:h};Object.assign(r,p)}async function wC(r){const e=Me(r);await vl(e),await e.auth._persistUserIfCurrent(e),e.auth._notifyListenersIfCurrent(e)}function _C(r,e){return[...r.filter(n=>!e.some(s=>s.providerId===n.providerId)),...e]}function $x(r){return r.map(e=>{var{providerId:t}=e,n=ih(e,["providerId"]);return{providerId:t,uid:n.rawId||"",displayName:n.displayName||null,email:n.email||null,phoneNumber:n.phoneNumber||null,photoURL:n.photoUrl||null}})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function TC(r,e){const t=await Fx(r,{},async()=>{const n=Zi({grant_type:"refresh_token",refresh_token:e}).slice(1),{tokenApiHost:s,apiKey:i}=r.config,a=await Ux(r,s,"/v1/token",`key=${i}`),l=await r._getAdditionalHeaders();l["Content-Type"]="application/x-www-form-urlencoded";const u={method:"POST",headers:l,body:n};return r.emulatorConfig&&zn(r.emulatorConfig.host)&&(u.credentials="include"),Vx.fetch()(a,u)});return{accessToken:t.access_token,expiresIn:t.expires_in,refreshToken:t.refresh_token}}async function EC(r,e){return Wr(r,"POST","/v2/accounts:revokeToken",qn(r,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Zs{constructor(){this.refreshToken=null,this.accessToken=null,this.expirationTime=null}get isExpired(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}updateFromServerResponse(e){ie(e.idToken,"internal-error"),ie(typeof e.idToken<"u","internal-error"),ie(typeof e.refreshToken<"u","internal-error");const t="expiresIn"in e&&typeof e.expiresIn<"u"?Number(e.expiresIn):fp(e.idToken);this.updateTokensAndExpiration(e.idToken,e.refreshToken,t)}updateFromIdToken(e){ie(e.length!==0,"internal-error");const t=fp(e);this.updateTokensAndExpiration(e,null,t)}async getToken(e,t=!1){return!t&&this.accessToken&&!this.isExpired?this.accessToken:(ie(this.refreshToken,e,"user-token-expired"),this.refreshToken?(await this.refresh(e,this.refreshToken),this.accessToken):null)}clearRefreshToken(){this.refreshToken=null}async refresh(e,t){const{accessToken:n,refreshToken:s,expiresIn:i}=await TC(e,t);this.updateTokensAndExpiration(n,s,Number(i))}updateTokensAndExpiration(e,t,n){this.refreshToken=t||null,this.accessToken=e||null,this.expirationTime=Date.now()+n*1e3}static fromJSON(e,t){const{refreshToken:n,accessToken:s,expirationTime:i}=t,a=new Zs;return n&&(ie(typeof n=="string","internal-error",{appName:e}),a.refreshToken=n),s&&(ie(typeof s=="string","internal-error",{appName:e}),a.accessToken=s),i&&(ie(typeof i=="number","internal-error",{appName:e}),a.expirationTime=i),a}toJSON(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}_assign(e){this.accessToken=e.accessToken,this.refreshToken=e.refreshToken,this.expirationTime=e.expirationTime}_clone(){return Object.assign(new Zs,this.toJSON())}_performRefresh(){return Vr("not implemented")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function tn(r,e){ie(typeof r=="string"||typeof r>"u","internal-error",{appName:e})}class ar{constructor(e){var{uid:t,auth:n,stsTokenManager:s}=e,i=ih(e,["uid","auth","stsTokenManager"]);this.providerId="firebase",this.proactiveRefresh=new vC(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=t,this.auth=n,this.stsTokenManager=s,this.accessToken=s.accessToken,this.displayName=i.displayName||null,this.email=i.email||null,this.emailVerified=i.emailVerified||!1,this.phoneNumber=i.phoneNumber||null,this.photoURL=i.photoURL||null,this.isAnonymous=i.isAnonymous||!1,this.tenantId=i.tenantId||null,this.providerData=i.providerData?[...i.providerData]:[],this.metadata=new rd(i.createdAt||void 0,i.lastLoginAt||void 0)}async getIdToken(e){const t=await Eo(this,this.stsTokenManager.getToken(this.auth,e));return ie(t,this.auth,"internal-error"),this.accessToken!==t&&(this.accessToken=t,await this.auth._persistUserIfCurrent(this),this.auth._notifyListenersIfCurrent(this)),t}getIdTokenResult(e){return xC(this,e)}reload(){return wC(this)}_assign(e){this!==e&&(ie(this.uid===e.uid,this.auth,"internal-error"),this.displayName=e.displayName,this.photoURL=e.photoURL,this.email=e.email,this.emailVerified=e.emailVerified,this.phoneNumber=e.phoneNumber,this.isAnonymous=e.isAnonymous,this.tenantId=e.tenantId,this.providerData=e.providerData.map(t=>Object.assign({},t)),this.metadata._copy(e.metadata),this.stsTokenManager._assign(e.stsTokenManager))}_clone(e){const t=new ar(Object.assign(Object.assign({},this),{auth:e,stsTokenManager:this.stsTokenManager._clone()}));return t.metadata._copy(this.metadata),t}_onReload(e){ie(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=e,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}_notifyReloadListener(e){this.reloadListener?this.reloadListener(e):this.reloadUserInfo=e}_startProactiveRefresh(){this.proactiveRefresh._start()}_stopProactiveRefresh(){this.proactiveRefresh._stop()}async _updateTokensIfNecessary(e,t=!1){let n=!1;e.idToken&&e.idToken!==this.stsTokenManager.accessToken&&(this.stsTokenManager.updateFromServerResponse(e),n=!0),t&&await vl(this),await this.auth._persistUserIfCurrent(this),n&&this.auth._notifyListenersIfCurrent(this)}async delete(){if(Mt(this.auth.app))return Promise.reject(Ur(this.auth));const e=await this.getIdToken();return await Eo(this,yC(this.auth,{idToken:e})),this.stsTokenManager.clearRefreshToken(),this.auth.signOut()}toJSON(){return Object.assign(Object.assign({uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map(e=>Object.assign({},e)),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId},this.metadata.toJSON()),{apiKey:this.auth.config.apiKey,appName:this.auth.name})}get refreshToken(){return this.stsTokenManager.refreshToken||""}static _fromJSON(e,t){var n,s,i,a,l,u,d,h;const p=(n=t.displayName)!==null&&n!==void 0?n:void 0,g=(s=t.email)!==null&&s!==void 0?s:void 0,b=(i=t.phoneNumber)!==null&&i!==void 0?i:void 0,C=(a=t.photoURL)!==null&&a!==void 0?a:void 0,x=(l=t.tenantId)!==null&&l!==void 0?l:void 0,v=(u=t._redirectEventId)!==null&&u!==void 0?u:void 0,E=(d=t.createdAt)!==null&&d!==void 0?d:void 0,T=(h=t.lastLoginAt)!==null&&h!==void 0?h:void 0,{uid:N,emailVerified:R,isAnonymous:L,providerData:U,stsTokenManager:A}=t;ie(N&&A,e,"internal-error");const w=Zs.fromJSON(this.name,A);ie(typeof N=="string",e,"internal-error"),tn(p,e.name),tn(g,e.name),ie(typeof R=="boolean",e,"internal-error"),ie(typeof L=="boolean",e,"internal-error"),tn(b,e.name),tn(C,e.name),tn(x,e.name),tn(v,e.name),tn(E,e.name),tn(T,e.name);const k=new ar({uid:N,auth:e,email:g,emailVerified:R,displayName:p,isAnonymous:L,photoURL:C,phoneNumber:b,tenantId:x,stsTokenManager:w,createdAt:E,lastLoginAt:T});return U&&Array.isArray(U)&&(k.providerData=U.map(j=>Object.assign({},j))),v&&(k._redirectEventId=v),k}static async _fromIdTokenResponse(e,t,n=!1){const s=new Zs;s.updateFromServerResponse(t);const i=new ar({uid:t.localId,auth:e,stsTokenManager:s,isAnonymous:n});return await vl(i),i}static async _fromGetAccountInfoResponse(e,t,n){const s=t.users[0];ie(s.localId!==void 0,"internal-error");const i=s.providerUserInfo!==void 0?$x(s.providerUserInfo):[],a=!(s.email&&s.passwordHash)&&!(i!=null&&i.length),l=new Zs;l.updateFromIdToken(n);const u=new ar({uid:s.localId,auth:e,stsTokenManager:l,isAnonymous:a}),d={uid:s.localId,displayName:s.displayName||null,photoURL:s.photoUrl||null,email:s.email||null,emailVerified:s.emailVerified||!1,phoneNumber:s.phoneNumber||null,tenantId:s.tenantId||null,providerData:i,metadata:new rd(s.createdAt,s.lastLoginAt),isAnonymous:!(s.email&&s.passwordHash)&&!(i!=null&&i.length)};return Object.assign(u,d),u}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const mp=new Map;function Fr(r){zr(r instanceof Function,"Expected a class definition");let e=mp.get(r);return e?(zr(e instanceof r,"Instance stored in cache mismatched with class"),e):(e=new r,mp.set(r,e),e)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Bx{constructor(){this.type="NONE",this.storage={}}async _isAvailable(){return!0}async _set(e,t){this.storage[e]=t}async _get(e){const t=this.storage[e];return t===void 0?null:t}async _remove(e){delete this.storage[e]}_addListener(e,t){}_removeListener(e,t){}}Bx.type="NONE";const pp=Bx;/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ja(r,e,t){return`firebase:${r}:${e}:${t}`}class eo{constructor(e,t,n){this.persistence=e,this.auth=t,this.userKey=n;const{config:s,name:i}=this.auth;this.fullUserKey=Ja(this.userKey,s.apiKey,i),this.fullPersistenceKey=Ja("persistence",s.apiKey,i),this.boundEventHandler=t._onStorageEvent.bind(t),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}setCurrentUser(e){return this.persistence._set(this.fullUserKey,e.toJSON())}async getCurrentUser(){const e=await this.persistence._get(this.fullUserKey);if(!e)return null;if(typeof e=="string"){const t=await bl(this.auth,{idToken:e}).catch(()=>{});return t?ar._fromGetAccountInfoResponse(this.auth,t,e):null}return ar._fromJSON(this.auth,e)}removeCurrentUser(){return this.persistence._remove(this.fullUserKey)}savePersistenceForRedirect(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}async setPersistence(e){if(this.persistence===e)return;const t=await this.getCurrentUser();if(await this.removeCurrentUser(),this.persistence=e,t)return this.setCurrentUser(t)}delete(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}static async create(e,t,n="authUser"){if(!t.length)return new eo(Fr(pp),e,n);const s=(await Promise.all(t.map(async d=>{if(await d._isAvailable())return d}))).filter(d=>d);let i=s[0]||Fr(pp);const a=Ja(n,e.config.apiKey,e.name);let l=null;for(const d of t)try{const h=await d._get(a);if(h){let p;if(typeof h=="string"){const g=await bl(e,{idToken:h}).catch(()=>{});if(!g)break;p=await ar._fromGetAccountInfoResponse(e,g,h)}else p=ar._fromJSON(e,h);d!==i&&(l=p),i=d;break}}catch{}const u=s.filter(d=>d._shouldAllowMigration);return!i._shouldAllowMigration||!u.length?new eo(i,e,n):(i=u[0],l&&await i._set(a,l.toJSON()),await Promise.all(t.map(async d=>{if(d!==i)try{await d._remove(a)}catch{}})),new eo(i,e,n))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function gp(r){const e=r.toLowerCase();if(e.includes("opera/")||e.includes("opr/")||e.includes("opios/"))return"Opera";if(Wx(e))return"IEMobile";if(e.includes("msie")||e.includes("trident/"))return"IE";if(e.includes("edge/"))return"Edge";if(zx(e))return"Firefox";if(e.includes("silk/"))return"Silk";if(Kx(e))return"Blackberry";if(Qx(e))return"Webos";if(qx(e))return"Safari";if((e.includes("chrome/")||Hx(e))&&!e.includes("edge/"))return"Chrome";if(Gx(e))return"Android";{const t=/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/,n=r.match(t);if((n==null?void 0:n.length)===2)return n[1]}return"Other"}function zx(r=wt()){return/firefox\//i.test(r)}function qx(r=wt()){const e=r.toLowerCase();return e.includes("safari/")&&!e.includes("chrome/")&&!e.includes("crios/")&&!e.includes("android")}function Hx(r=wt()){return/crios\//i.test(r)}function Wx(r=wt()){return/iemobile/i.test(r)}function Gx(r=wt()){return/android/i.test(r)}function Kx(r=wt()){return/blackberry/i.test(r)}function Qx(r=wt()){return/webos/i.test(r)}function wh(r=wt()){return/iphone|ipad|ipod/i.test(r)||/macintosh/i.test(r)&&/mobile/i.test(r)}function NC(r=wt()){var e;return wh(r)&&!!(!((e=window.navigator)===null||e===void 0)&&e.standalone)}function CC(){return FE()&&document.documentMode===10}function Yx(r=wt()){return wh(r)||Gx(r)||Qx(r)||Kx(r)||/windows phone/i.test(r)||Wx(r)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Xx(r,e=[]){let t;switch(r){case"Browser":t=gp(wt());break;case"Worker":t=`${gp(wt())}-${r}`;break;default:t=r}const n=e.length?e.join(","):"FirebaseCore-web";return`${t}/JsCore/${As}/${n}`}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class kC{constructor(e){this.auth=e,this.queue=[]}pushCallback(e,t){const n=i=>new Promise((a,l)=>{try{const u=e(i);a(u)}catch(u){l(u)}});n.onAbort=t,this.queue.push(n);const s=this.queue.length-1;return()=>{this.queue[s]=()=>Promise.resolve()}}async runMiddleware(e){if(this.auth.currentUser===e)return;const t=[];try{for(const n of this.queue)await n(e),n.onAbort&&t.push(n.onAbort)}catch(n){t.reverse();for(const s of t)try{s()}catch{}throw this.auth._errorFactory.create("login-blocked",{originalMessage:n==null?void 0:n.message})}}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function SC(r,e={}){return Wr(r,"GET","/v2/passwordPolicy",qn(r,e))}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const jC=6;class IC{constructor(e){var t,n,s,i;const a=e.customStrengthOptions;this.customStrengthOptions={},this.customStrengthOptions.minPasswordLength=(t=a.minPasswordLength)!==null&&t!==void 0?t:jC,a.maxPasswordLength&&(this.customStrengthOptions.maxPasswordLength=a.maxPasswordLength),a.containsLowercaseCharacter!==void 0&&(this.customStrengthOptions.containsLowercaseLetter=a.containsLowercaseCharacter),a.containsUppercaseCharacter!==void 0&&(this.customStrengthOptions.containsUppercaseLetter=a.containsUppercaseCharacter),a.containsNumericCharacter!==void 0&&(this.customStrengthOptions.containsNumericCharacter=a.containsNumericCharacter),a.containsNonAlphanumericCharacter!==void 0&&(this.customStrengthOptions.containsNonAlphanumericCharacter=a.containsNonAlphanumericCharacter),this.enforcementState=e.enforcementState,this.enforcementState==="ENFORCEMENT_STATE_UNSPECIFIED"&&(this.enforcementState="OFF"),this.allowedNonAlphanumericCharacters=(s=(n=e.allowedNonAlphanumericCharacters)===null||n===void 0?void 0:n.join(""))!==null&&s!==void 0?s:"",this.forceUpgradeOnSignin=(i=e.forceUpgradeOnSignin)!==null&&i!==void 0?i:!1,this.schemaVersion=e.schemaVersion}validatePassword(e){var t,n,s,i,a,l;const u={isValid:!0,passwordPolicy:this};return this.validatePasswordLengthOptions(e,u),this.validatePasswordCharacterOptions(e,u),u.isValid&&(u.isValid=(t=u.meetsMinPasswordLength)!==null&&t!==void 0?t:!0),u.isValid&&(u.isValid=(n=u.meetsMaxPasswordLength)!==null&&n!==void 0?n:!0),u.isValid&&(u.isValid=(s=u.containsLowercaseLetter)!==null&&s!==void 0?s:!0),u.isValid&&(u.isValid=(i=u.containsUppercaseLetter)!==null&&i!==void 0?i:!0),u.isValid&&(u.isValid=(a=u.containsNumericCharacter)!==null&&a!==void 0?a:!0),u.isValid&&(u.isValid=(l=u.containsNonAlphanumericCharacter)!==null&&l!==void 0?l:!0),u}validatePasswordLengthOptions(e,t){const n=this.customStrengthOptions.minPasswordLength,s=this.customStrengthOptions.maxPasswordLength;n&&(t.meetsMinPasswordLength=e.length>=n),s&&(t.meetsMaxPasswordLength=e.length<=s)}validatePasswordCharacterOptions(e,t){this.updatePasswordCharacterOptionsStatuses(t,!1,!1,!1,!1);let n;for(let s=0;s<e.length;s++)n=e.charAt(s),this.updatePasswordCharacterOptionsStatuses(t,n>="a"&&n<="z",n>="A"&&n<="Z",n>="0"&&n<="9",this.allowedNonAlphanumericCharacters.includes(n))}updatePasswordCharacterOptionsStatuses(e,t,n,s,i){this.customStrengthOptions.containsLowercaseLetter&&(e.containsLowercaseLetter||(e.containsLowercaseLetter=t)),this.customStrengthOptions.containsUppercaseLetter&&(e.containsUppercaseLetter||(e.containsUppercaseLetter=n)),this.customStrengthOptions.containsNumericCharacter&&(e.containsNumericCharacter||(e.containsNumericCharacter=s)),this.customStrengthOptions.containsNonAlphanumericCharacter&&(e.containsNonAlphanumericCharacter||(e.containsNonAlphanumericCharacter=i))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class AC{constructor(e,t,n,s){this.app=e,this.heartbeatServiceProvider=t,this.appCheckServiceProvider=n,this.config=s,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new yp(this),this.idTokenSubscription=new yp(this),this.beforeStateQueue=new kC(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION=1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=Lx,this._agentRecaptchaConfig=null,this._tenantRecaptchaConfigs={},this._projectPasswordPolicy=null,this._tenantPasswordPolicies={},this._resolvePersistenceManagerAvailable=void 0,this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=e.name,this.clientVersion=s.sdkClientVersion,this._persistenceManagerAvailable=new Promise(i=>this._resolvePersistenceManagerAvailable=i)}_initializeWithPersistence(e,t){return t&&(this._popupRedirectResolver=Fr(t)),this._initializationPromise=this.queue(async()=>{var n,s,i;if(!this._deleted&&(this.persistenceManager=await eo.create(this,e),(n=this._resolvePersistenceManagerAvailable)===null||n===void 0||n.call(this),!this._deleted)){if(!((s=this._popupRedirectResolver)===null||s===void 0)&&s._shouldInitProactively)try{await this._popupRedirectResolver._initialize(this)}catch{}await this.initializeCurrentUser(t),this.lastNotifiedUid=((i=this.currentUser)===null||i===void 0?void 0:i.uid)||null,!this._deleted&&(this._isInitialized=!0)}}),this._initializationPromise}async _onStorageEvent(){if(this._deleted)return;const e=await this.assertedPersistence.getCurrentUser();if(!(!this.currentUser&&!e)){if(this.currentUser&&e&&this.currentUser.uid===e.uid){this._currentUser._assign(e),await this.currentUser.getIdToken();return}await this._updateCurrentUser(e,!0)}}async initializeCurrentUserFromIdToken(e){try{const t=await bl(this,{idToken:e}),n=await ar._fromGetAccountInfoResponse(this,t,e);await this.directlySetCurrentUser(n)}catch(t){console.warn("FirebaseServerApp could not login user with provided authIdToken: ",t),await this.directlySetCurrentUser(null)}}async initializeCurrentUser(e){var t;if(Mt(this.app)){const a=this.app.settings.authIdToken;return a?new Promise(l=>{setTimeout(()=>this.initializeCurrentUserFromIdToken(a).then(l,l))}):this.directlySetCurrentUser(null)}const n=await this.assertedPersistence.getCurrentUser();let s=n,i=!1;if(e&&this.config.authDomain){await this.getOrInitRedirectPersistenceManager();const a=(t=this.redirectUser)===null||t===void 0?void 0:t._redirectEventId,l=s==null?void 0:s._redirectEventId,u=await this.tryRedirectSignIn(e);(!a||a===l)&&(u!=null&&u.user)&&(s=u.user,i=!0)}if(!s)return this.directlySetCurrentUser(null);if(!s._redirectEventId){if(i)try{await this.beforeStateQueue.runMiddleware(s)}catch(a){s=n,this._popupRedirectResolver._overrideRedirectResult(this,()=>Promise.reject(a))}return s?this.reloadAndSetCurrentUserOrClear(s):this.directlySetCurrentUser(null)}return ie(this._popupRedirectResolver,this,"argument-error"),await this.getOrInitRedirectPersistenceManager(),this.redirectUser&&this.redirectUser._redirectEventId===s._redirectEventId?this.directlySetCurrentUser(s):this.reloadAndSetCurrentUserOrClear(s)}async tryRedirectSignIn(e){let t=null;try{t=await this._popupRedirectResolver._completeRedirectFn(this,e,!0)}catch{await this._setRedirectUser(null)}return t}async reloadAndSetCurrentUserOrClear(e){try{await vl(e)}catch(t){if((t==null?void 0:t.code)!=="auth/network-request-failed")return this.directlySetCurrentUser(null)}return this.directlySetCurrentUser(e)}useDeviceLanguage(){this.languageCode=cC()}async _delete(){this._deleted=!0}async updateCurrentUser(e){if(Mt(this.app))return Promise.reject(Ur(this));const t=e?Me(e):null;return t&&ie(t.auth.config.apiKey===this.config.apiKey,this,"invalid-user-token"),this._updateCurrentUser(t&&t._clone(this))}async _updateCurrentUser(e,t=!1){if(!this._deleted)return e&&ie(this.tenantId===e.tenantId,this,"tenant-id-mismatch"),t||await this.beforeStateQueue.runMiddleware(e),this.queue(async()=>{await this.directlySetCurrentUser(e),this.notifyAuthListeners()})}async signOut(){return Mt(this.app)?Promise.reject(Ur(this)):(await this.beforeStateQueue.runMiddleware(null),(this.redirectPersistenceManager||this._popupRedirectResolver)&&await this._setRedirectUser(null),this._updateCurrentUser(null,!0))}setPersistence(e){return Mt(this.app)?Promise.reject(Ur(this)):this.queue(async()=>{await this.assertedPersistence.setPersistence(Fr(e))})}_getRecaptchaConfig(){return this.tenantId==null?this._agentRecaptchaConfig:this._tenantRecaptchaConfigs[this.tenantId]}async validatePassword(e){this._getPasswordPolicyInternal()||await this._updatePasswordPolicy();const t=this._getPasswordPolicyInternal();return t.schemaVersion!==this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION?Promise.reject(this._errorFactory.create("unsupported-password-policy-schema-version",{})):t.validatePassword(e)}_getPasswordPolicyInternal(){return this.tenantId===null?this._projectPasswordPolicy:this._tenantPasswordPolicies[this.tenantId]}async _updatePasswordPolicy(){const e=await SC(this),t=new IC(e);this.tenantId===null?this._projectPasswordPolicy=t:this._tenantPasswordPolicies[this.tenantId]=t}_getPersistenceType(){return this.assertedPersistence.persistence.type}_getPersistence(){return this.assertedPersistence.persistence}_updateErrorMap(e){this._errorFactory=new js("auth","Firebase",e())}onAuthStateChanged(e,t,n){return this.registerStateListener(this.authStateSubscription,e,t,n)}beforeAuthStateChanged(e,t){return this.beforeStateQueue.pushCallback(e,t)}onIdTokenChanged(e,t,n){return this.registerStateListener(this.idTokenSubscription,e,t,n)}authStateReady(){return new Promise((e,t)=>{if(this.currentUser)e();else{const n=this.onAuthStateChanged(()=>{n(),e()},t)}})}async revokeAccessToken(e){if(this.currentUser){const t=await this.currentUser.getIdToken(),n={providerId:"apple.com",tokenType:"ACCESS_TOKEN",token:e,idToken:t};this.tenantId!=null&&(n.tenantId=this.tenantId),await EC(this,n)}}toJSON(){var e;return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:(e=this._currentUser)===null||e===void 0?void 0:e.toJSON()}}async _setRedirectUser(e,t){const n=await this.getOrInitRedirectPersistenceManager(t);return e===null?n.removeCurrentUser():n.setCurrentUser(e)}async getOrInitRedirectPersistenceManager(e){if(!this.redirectPersistenceManager){const t=e&&Fr(e)||this._popupRedirectResolver;ie(t,this,"argument-error"),this.redirectPersistenceManager=await eo.create(this,[Fr(t._redirectPersistence)],"redirectUser"),this.redirectUser=await this.redirectPersistenceManager.getCurrentUser()}return this.redirectPersistenceManager}async _redirectUserForId(e){var t,n;return this._isInitialized&&await this.queue(async()=>{}),((t=this._currentUser)===null||t===void 0?void 0:t._redirectEventId)===e?this._currentUser:((n=this.redirectUser)===null||n===void 0?void 0:n._redirectEventId)===e?this.redirectUser:null}async _persistUserIfCurrent(e){if(e===this.currentUser)return this.queue(async()=>this.directlySetCurrentUser(e))}_notifyListenersIfCurrent(e){e===this.currentUser&&this.notifyAuthListeners()}_key(){return`${this.config.authDomain}:${this.config.apiKey}:${this.name}`}_startProactiveRefresh(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}_stopProactiveRefresh(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}get _currentUser(){return this.currentUser}notifyAuthListeners(){var e,t;if(!this._isInitialized)return;this.idTokenSubscription.next(this.currentUser);const n=(t=(e=this.currentUser)===null||e===void 0?void 0:e.uid)!==null&&t!==void 0?t:null;this.lastNotifiedUid!==n&&(this.lastNotifiedUid=n,this.authStateSubscription.next(this.currentUser))}registerStateListener(e,t,n,s){if(this._deleted)return()=>{};const i=typeof t=="function"?t:t.next.bind(t);let a=!1;const l=this._isInitialized?Promise.resolve():this._initializationPromise;if(ie(l,this,"internal-error"),l.then(()=>{a||i(this.currentUser)}),typeof t=="function"){const u=e.addObserver(t,n,s);return()=>{a=!0,u()}}else{const u=e.addObserver(t);return()=>{a=!0,u()}}}async directlySetCurrentUser(e){this.currentUser&&this.currentUser!==e&&this._currentUser._stopProactiveRefresh(),e&&this.isProactiveRefreshEnabled&&e._startProactiveRefresh(),this.currentUser=e,e?await this.assertedPersistence.setCurrentUser(e):await this.assertedPersistence.removeCurrentUser()}queue(e){return this.operations=this.operations.then(e,e),this.operations}get assertedPersistence(){return ie(this.persistenceManager,this,"internal-error"),this.persistenceManager}_logFramework(e){!e||this.frameworks.includes(e)||(this.frameworks.push(e),this.frameworks.sort(),this.clientVersion=Xx(this.config.clientPlatform,this._getFrameworks()))}_getFrameworks(){return this.frameworks}async _getAdditionalHeaders(){var e;const t={"X-Client-Version":this.clientVersion};this.app.options.appId&&(t["X-Firebase-gmpid"]=this.app.options.appId);const n=await((e=this.heartbeatServiceProvider.getImmediate({optional:!0}))===null||e===void 0?void 0:e.getHeartbeatsHeader());n&&(t["X-Firebase-Client"]=n);const s=await this._getAppCheckToken();return s&&(t["X-Firebase-AppCheck"]=s),t}async _getAppCheckToken(){var e;if(Mt(this.app)&&this.app.settings.appCheckToken)return this.app.settings.appCheckToken;const t=await((e=this.appCheckServiceProvider.getImmediate({optional:!0}))===null||e===void 0?void 0:e.getToken());return t!=null&&t.error&&oC(`Error while retrieving App Check token: ${t.error}`),t==null?void 0:t.token}}function Hn(r){return Me(r)}class yp{constructor(e){this.auth=e,this.observer=null,this.addObserver=WE(t=>this.observer=t)}get next(){return ie(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let ic={async loadJS(){throw new Error("Unable to load external scripts")},recaptchaV2Script:"",recaptchaEnterpriseScript:"",gapiScript:""};function RC(r){ic=r}function Jx(r){return ic.loadJS(r)}function PC(){return ic.recaptchaEnterpriseScript}function MC(){return ic.gapiScript}function DC(r){return`__${r}${Math.floor(Math.random()*1e6)}`}class OC{constructor(){this.enterprise=new LC}ready(e){e()}execute(e,t){return Promise.resolve("token")}render(e,t){return""}}class LC{ready(e){e()}execute(e,t){return Promise.resolve("token")}render(e,t){return""}}const VC="recaptcha-enterprise",Zx="NO_RECAPTCHA";class FC{constructor(e){this.type=VC,this.auth=Hn(e)}async verify(e="verify",t=!1){async function n(i){if(!t){if(i.tenantId==null&&i._agentRecaptchaConfig!=null)return i._agentRecaptchaConfig.siteKey;if(i.tenantId!=null&&i._tenantRecaptchaConfigs[i.tenantId]!==void 0)return i._tenantRecaptchaConfigs[i.tenantId].siteKey}return new Promise(async(a,l)=>{gC(i,{clientType:"CLIENT_TYPE_WEB",version:"RECAPTCHA_ENTERPRISE"}).then(u=>{if(u.recaptchaKey===void 0)l(new Error("recaptcha Enterprise site key undefined"));else{const d=new pC(u);return i.tenantId==null?i._agentRecaptchaConfig=d:i._tenantRecaptchaConfigs[i.tenantId]=d,a(d.siteKey)}}).catch(u=>{l(u)})})}function s(i,a,l){const u=window.grecaptcha;hp(u)?u.enterprise.ready(()=>{u.enterprise.execute(i,{action:e}).then(d=>{a(d)}).catch(()=>{a(Zx)})}):l(Error("No reCAPTCHA enterprise script loaded."))}return this.auth.settings.appVerificationDisabledForTesting?new OC().execute("siteKey",{action:"verify"}):new Promise((i,a)=>{n(this.auth).then(l=>{if(!t&&hp(window.grecaptcha))s(l,i,a);else{if(typeof window>"u"){a(new Error("RecaptchaVerifier is only supported in browser"));return}let u=PC();u.length!==0&&(u+=l),Jx(u).then(()=>{s(l,i,a)}).catch(d=>{a(d)})}}).catch(l=>{a(l)})})}}async function xp(r,e,t,n=!1,s=!1){const i=new FC(r);let a;if(s)a=Zx;else try{a=await i.verify(t)}catch{a=await i.verify(t,!0)}const l=Object.assign({},e);if(t==="mfaSmsEnrollment"||t==="mfaSmsSignIn"){if("phoneEnrollmentInfo"in l){const u=l.phoneEnrollmentInfo.phoneNumber,d=l.phoneEnrollmentInfo.recaptchaToken;Object.assign(l,{phoneEnrollmentInfo:{phoneNumber:u,recaptchaToken:d,captchaResponse:a,clientType:"CLIENT_TYPE_WEB",recaptchaVersion:"RECAPTCHA_ENTERPRISE"}})}else if("phoneSignInInfo"in l){const u=l.phoneSignInInfo.recaptchaToken;Object.assign(l,{phoneSignInInfo:{recaptchaToken:u,captchaResponse:a,clientType:"CLIENT_TYPE_WEB",recaptchaVersion:"RECAPTCHA_ENTERPRISE"}})}return l}return n?Object.assign(l,{captchaResp:a}):Object.assign(l,{captchaResponse:a}),Object.assign(l,{clientType:"CLIENT_TYPE_WEB"}),Object.assign(l,{recaptchaVersion:"RECAPTCHA_ENTERPRISE"}),l}async function nd(r,e,t,n,s){var i;if(!((i=r._getRecaptchaConfig())===null||i===void 0)&&i.isProviderEnabled("EMAIL_PASSWORD_PROVIDER")){const a=await xp(r,e,t,t==="getOobCode");return n(r,a)}else return n(r,e).catch(async a=>{if(a.code==="auth/missing-recaptcha-token"){console.log(`${t} is protected by reCAPTCHA Enterprise for this project. Automatically triggering the reCAPTCHA flow and restarting the flow.`);const l=await xp(r,e,t,t==="getOobCode");return n(r,l)}else return Promise.reject(a)})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function UC(r,e){const t=Is(r,"auth");if(t.isInitialized()){const s=t.getImmediate(),i=t.getOptions();if(xs(i,e??{}))return s;Yt(s,"already-initialized")}return t.initialize({options:e})}function $C(r,e){const t=(e==null?void 0:e.persistence)||[],n=(Array.isArray(t)?t:[t]).map(Fr);e!=null&&e.errorMap&&r._updateErrorMap(e.errorMap),r._initializeWithPersistence(n,e==null?void 0:e.popupRedirectResolver)}function BC(r,e,t){const n=Hn(r);ie(/^https?:\/\//.test(e),n,"invalid-emulator-scheme");const s=!1,i=e0(e),{host:a,port:l}=zC(e),u=l===null?"":`:${l}`,d={url:`${i}//${a}${u}/`},h=Object.freeze({host:a,port:l,protocol:i.replace(":",""),options:Object.freeze({disableWarnings:s})});if(!n._canInitEmulator){ie(n.config.emulator&&n.emulatorConfig,n,"emulator-config-failed"),ie(xs(d,n.config.emulator)&&xs(h,n.emulatorConfig),n,"emulator-config-failed");return}n.config.emulator=d,n.emulatorConfig=h,n.settings.appVerificationDisabledForTesting=!0,zn(a)?(mh(`${i}//${a}${u}`),ph("Auth",!0)):qC()}function e0(r){const e=r.indexOf(":");return e<0?"":r.substr(0,e+1)}function zC(r){const e=e0(r),t=/(\/\/)?([^?#/]+)/.exec(r.substr(e.length));if(!t)return{host:"",port:null};const n=t[2].split("@").pop()||"",s=/^(\[[^\]]+\])(:|$)/.exec(n);if(s){const i=s[1];return{host:i,port:bp(n.substr(i.length+1))}}else{const[i,a]=n.split(":");return{host:i,port:bp(a)}}}function bp(r){if(!r)return null;const e=Number(r);return isNaN(e)?null:e}function qC(){function r(){const e=document.createElement("p"),t=e.style;e.innerText="Running in emulator mode. Do not use with production credentials.",t.position="fixed",t.width="100%",t.backgroundColor="#ffffff",t.border=".1em solid #000000",t.color="#b50000",t.bottom="0px",t.left="0px",t.margin="0px",t.zIndex="10000",t.textAlign="center",e.classList.add("firebase-emulator-warning"),document.body.appendChild(e)}typeof console<"u"&&typeof console.info=="function"&&console.info("WARNING: You are using the Auth Emulator, which is intended for local testing only.  Do not use with production credentials."),typeof window<"u"&&typeof document<"u"&&(document.readyState==="loading"?window.addEventListener("DOMContentLoaded",r):r())}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _h{constructor(e,t){this.providerId=e,this.signInMethod=t}toJSON(){return Vr("not implemented")}_getIdTokenResponse(e){return Vr("not implemented")}_linkToIdToken(e,t){return Vr("not implemented")}_getReauthenticationResolver(e){return Vr("not implemented")}}async function HC(r,e){return Wr(r,"POST","/v1/accounts:signUp",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function WC(r,e){return ta(r,"POST","/v1/accounts:signInWithPassword",qn(r,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function GC(r,e){return ta(r,"POST","/v1/accounts:signInWithEmailLink",qn(r,e))}async function KC(r,e){return ta(r,"POST","/v1/accounts:signInWithEmailLink",qn(r,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Oi extends _h{constructor(e,t,n,s=null){super("password",n),this._email=e,this._password=t,this._tenantId=s}static _fromEmailAndPassword(e,t){return new Oi(e,t,"password")}static _fromEmailAndCode(e,t,n=null){return new Oi(e,t,"emailLink",n)}toJSON(){return{email:this._email,password:this._password,signInMethod:this.signInMethod,tenantId:this._tenantId}}static fromJSON(e){const t=typeof e=="string"?JSON.parse(e):e;if(t!=null&&t.email&&(t!=null&&t.password)){if(t.signInMethod==="password")return this._fromEmailAndPassword(t.email,t.password);if(t.signInMethod==="emailLink")return this._fromEmailAndCode(t.email,t.password,t.tenantId)}return null}async _getIdTokenResponse(e){switch(this.signInMethod){case"password":const t={returnSecureToken:!0,email:this._email,password:this._password,clientType:"CLIENT_TYPE_WEB"};return nd(e,t,"signInWithPassword",WC);case"emailLink":return GC(e,{email:this._email,oobCode:this._password});default:Yt(e,"internal-error")}}async _linkToIdToken(e,t){switch(this.signInMethod){case"password":const n={idToken:t,returnSecureToken:!0,email:this._email,password:this._password,clientType:"CLIENT_TYPE_WEB"};return nd(e,n,"signUpPassword",HC);case"emailLink":return KC(e,{idToken:t,email:this._email,oobCode:this._password});default:Yt(e,"internal-error")}}_getReauthenticationResolver(e){return this._getIdTokenResponse(e)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function to(r,e){return ta(r,"POST","/v1/accounts:signInWithIdp",qn(r,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const QC="http://localhost";class bs extends _h{constructor(){super(...arguments),this.pendingToken=null}static _fromParams(e){const t=new bs(e.providerId,e.signInMethod);return e.idToken||e.accessToken?(e.idToken&&(t.idToken=e.idToken),e.accessToken&&(t.accessToken=e.accessToken),e.nonce&&!e.pendingToken&&(t.nonce=e.nonce),e.pendingToken&&(t.pendingToken=e.pendingToken)):e.oauthToken&&e.oauthTokenSecret?(t.accessToken=e.oauthToken,t.secret=e.oauthTokenSecret):Yt("argument-error"),t}toJSON(){return{idToken:this.idToken,accessToken:this.accessToken,secret:this.secret,nonce:this.nonce,pendingToken:this.pendingToken,providerId:this.providerId,signInMethod:this.signInMethod}}static fromJSON(e){const t=typeof e=="string"?JSON.parse(e):e,{providerId:n,signInMethod:s}=t,i=ih(t,["providerId","signInMethod"]);if(!n||!s)return null;const a=new bs(n,s);return a.idToken=i.idToken||void 0,a.accessToken=i.accessToken||void 0,a.secret=i.secret,a.nonce=i.nonce,a.pendingToken=i.pendingToken||null,a}_getIdTokenResponse(e){const t=this.buildRequest();return to(e,t)}_linkToIdToken(e,t){const n=this.buildRequest();return n.idToken=t,to(e,n)}_getReauthenticationResolver(e){const t=this.buildRequest();return t.autoCreate=!1,to(e,t)}buildRequest(){const e={requestUri:QC,returnSecureToken:!0};if(this.pendingToken)e.pendingToken=this.pendingToken;else{const t={};this.idToken&&(t.id_token=this.idToken),this.accessToken&&(t.access_token=this.accessToken),this.secret&&(t.oauth_token_secret=this.secret),t.providerId=this.providerId,this.nonce&&!this.pendingToken&&(t.nonce=this.nonce),e.postBody=Zi(t)}return e}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function YC(r){switch(r){case"recoverEmail":return"RECOVER_EMAIL";case"resetPassword":return"PASSWORD_RESET";case"signIn":return"EMAIL_SIGNIN";case"verifyEmail":return"VERIFY_EMAIL";case"verifyAndChangeEmail":return"VERIFY_AND_CHANGE_EMAIL";case"revertSecondFactorAddition":return"REVERT_SECOND_FACTOR_ADDITION";default:return null}}function XC(r){const e=gi(yi(r)).link,t=e?gi(yi(e)).deep_link_id:null,n=gi(yi(r)).deep_link_id;return(n?gi(yi(n)).link:null)||n||t||e||r}class Th{constructor(e){var t,n,s,i,a,l;const u=gi(yi(e)),d=(t=u.apiKey)!==null&&t!==void 0?t:null,h=(n=u.oobCode)!==null&&n!==void 0?n:null,p=YC((s=u.mode)!==null&&s!==void 0?s:null);ie(d&&h&&p,"argument-error"),this.apiKey=d,this.operation=p,this.code=h,this.continueUrl=(i=u.continueUrl)!==null&&i!==void 0?i:null,this.languageCode=(a=u.lang)!==null&&a!==void 0?a:null,this.tenantId=(l=u.tenantId)!==null&&l!==void 0?l:null}static parseLink(e){const t=XC(e);try{return new Th(t)}catch{return null}}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Oo{constructor(){this.providerId=Oo.PROVIDER_ID}static credential(e,t){return Oi._fromEmailAndPassword(e,t)}static credentialWithLink(e,t){const n=Th.parseLink(t);return ie(n,"argument-error"),Oi._fromEmailAndCode(e,n.code,n.tenantId)}}Oo.PROVIDER_ID="password";Oo.EMAIL_PASSWORD_SIGN_IN_METHOD="password";Oo.EMAIL_LINK_SIGN_IN_METHOD="emailLink";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Eh{constructor(e){this.providerId=e,this.defaultLanguageCode=null,this.customParameters={}}setDefaultLanguage(e){this.defaultLanguageCode=e}setCustomParameters(e){return this.customParameters=e,this}getCustomParameters(){return this.customParameters}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ra extends Eh{constructor(){super(...arguments),this.scopes=[]}addScope(e){return this.scopes.includes(e)||this.scopes.push(e),this}getScopes(){return[...this.scopes]}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class an extends ra{constructor(){super("facebook.com")}static credential(e){return bs._fromParams({providerId:an.PROVIDER_ID,signInMethod:an.FACEBOOK_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return an.credentialFromTaggedObject(e)}static credentialFromError(e){return an.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return an.credential(e.oauthAccessToken)}catch{return null}}}an.FACEBOOK_SIGN_IN_METHOD="facebook.com";an.PROVIDER_ID="facebook.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class br extends ra{constructor(){super("google.com"),this.addScope("profile")}static credential(e,t){return bs._fromParams({providerId:br.PROVIDER_ID,signInMethod:br.GOOGLE_SIGN_IN_METHOD,idToken:e,accessToken:t})}static credentialFromResult(e){return br.credentialFromTaggedObject(e)}static credentialFromError(e){return br.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthIdToken:t,oauthAccessToken:n}=e;if(!t&&!n)return null;try{return br.credential(t,n)}catch{return null}}}br.GOOGLE_SIGN_IN_METHOD="google.com";br.PROVIDER_ID="google.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ln extends ra{constructor(){super("github.com")}static credential(e){return bs._fromParams({providerId:ln.PROVIDER_ID,signInMethod:ln.GITHUB_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return ln.credentialFromTaggedObject(e)}static credentialFromError(e){return ln.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return ln.credential(e.oauthAccessToken)}catch{return null}}}ln.GITHUB_SIGN_IN_METHOD="github.com";ln.PROVIDER_ID="github.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class cn extends ra{constructor(){super("twitter.com")}static credential(e,t){return bs._fromParams({providerId:cn.PROVIDER_ID,signInMethod:cn.TWITTER_SIGN_IN_METHOD,oauthToken:e,oauthTokenSecret:t})}static credentialFromResult(e){return cn.credentialFromTaggedObject(e)}static credentialFromError(e){return cn.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthAccessToken:t,oauthTokenSecret:n}=e;if(!t||!n)return null;try{return cn.credential(t,n)}catch{return null}}}cn.TWITTER_SIGN_IN_METHOD="twitter.com";cn.PROVIDER_ID="twitter.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function JC(r,e){return ta(r,"POST","/v1/accounts:signUp",qn(r,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class vs{constructor(e){this.user=e.user,this.providerId=e.providerId,this._tokenResponse=e._tokenResponse,this.operationType=e.operationType}static async _fromIdTokenResponse(e,t,n,s=!1){const i=await ar._fromIdTokenResponse(e,n,s),a=vp(n);return new vs({user:i,providerId:a,_tokenResponse:n,operationType:t})}static async _forOperation(e,t,n){await e._updateTokensIfNecessary(n,!0);const s=vp(n);return new vs({user:e,providerId:s,_tokenResponse:n,operationType:t})}}function vp(r){return r.providerId?r.providerId:"phoneNumber"in r?"phone":null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class wl extends fr{constructor(e,t,n,s){var i;super(t.code,t.message),this.operationType=n,this.user=s,Object.setPrototypeOf(this,wl.prototype),this.customData={appName:e.name,tenantId:(i=e.tenantId)!==null&&i!==void 0?i:void 0,_serverResponse:t.customData._serverResponse,operationType:n}}static _fromErrorAndOperation(e,t,n,s){return new wl(e,t,n,s)}}function t0(r,e,t,n){return(e==="reauthenticate"?t._getReauthenticationResolver(r):t._getIdTokenResponse(r)).catch(i=>{throw i.code==="auth/multi-factor-auth-required"?wl._fromErrorAndOperation(r,i,e,n):i})}async function ZC(r,e,t=!1){const n=await Eo(r,e._linkToIdToken(r.auth,await r.getIdToken()),t);return vs._forOperation(r,"link",n)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function ek(r,e,t=!1){const{auth:n}=r;if(Mt(n.app))return Promise.reject(Ur(n));const s="reauthenticate";try{const i=await Eo(r,t0(n,s,e,r),t);ie(i.idToken,n,"internal-error");const a=vh(i.idToken);ie(a,n,"internal-error");const{sub:l}=a;return ie(r.uid===l,n,"user-mismatch"),vs._forOperation(r,s,i)}catch(i){throw(i==null?void 0:i.code)==="auth/user-not-found"&&Yt(n,"user-mismatch"),i}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function r0(r,e,t=!1){if(Mt(r.app))return Promise.reject(Ur(r));const n="signIn",s=await t0(r,n,e),i=await vs._fromIdTokenResponse(r,n,s);return t||await r._updateCurrentUser(i.user),i}async function tk(r,e){return r0(Hn(r),e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function n0(r){const e=Hn(r);e._getPasswordPolicyInternal()&&await e._updatePasswordPolicy()}async function rk(r,e,t){if(Mt(r.app))return Promise.reject(Ur(r));const n=Hn(r),a=await nd(n,{returnSecureToken:!0,email:e,password:t,clientType:"CLIENT_TYPE_WEB"},"signUpPassword",JC).catch(u=>{throw u.code==="auth/password-does-not-meet-requirements"&&n0(r),u}),l=await vs._fromIdTokenResponse(n,"signIn",a);return await n._updateCurrentUser(l.user),l}function nk(r,e,t){return Mt(r.app)?Promise.reject(Ur(r)):tk(Me(r),Oo.credential(e,t)).catch(async n=>{throw n.code==="auth/password-does-not-meet-requirements"&&n0(r),n})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function sk(r,e){return Wr(r,"POST","/v1/accounts:update",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function ok(r,{displayName:e,photoURL:t}){if(e===void 0&&t===void 0)return;const n=Me(r),i={idToken:await n.getIdToken(),displayName:e,photoUrl:t,returnSecureToken:!0},a=await Eo(n,sk(n.auth,i));n.displayName=a.displayName||null,n.photoURL=a.photoUrl||null;const l=n.providerData.find(({providerId:u})=>u==="password");l&&(l.displayName=n.displayName,l.photoURL=n.photoURL),await n._updateTokensIfNecessary(a)}function ik(r,e,t,n){return Me(r).onIdTokenChanged(e,t,n)}function ak(r,e,t){return Me(r).beforeAuthStateChanged(e,t)}function lk(r,e,t,n){return Me(r).onAuthStateChanged(e,t,n)}const _l="__sak";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class s0{constructor(e,t){this.storageRetriever=e,this.type=t}_isAvailable(){try{return this.storage?(this.storage.setItem(_l,"1"),this.storage.removeItem(_l),Promise.resolve(!0)):Promise.resolve(!1)}catch{return Promise.resolve(!1)}}_set(e,t){return this.storage.setItem(e,JSON.stringify(t)),Promise.resolve()}_get(e){const t=this.storage.getItem(e);return Promise.resolve(t?JSON.parse(t):null)}_remove(e){return this.storage.removeItem(e),Promise.resolve()}get storage(){return this.storageRetriever()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ck=1e3,uk=10;class o0 extends s0{constructor(){super(()=>window.localStorage,"LOCAL"),this.boundEventHandler=(e,t)=>this.onStorageEvent(e,t),this.listeners={},this.localCache={},this.pollTimer=null,this.fallbackToPolling=Yx(),this._shouldAllowMigration=!0}forAllChangedKeys(e){for(const t of Object.keys(this.listeners)){const n=this.storage.getItem(t),s=this.localCache[t];n!==s&&e(t,s,n)}}onStorageEvent(e,t=!1){if(!e.key){this.forAllChangedKeys((a,l,u)=>{this.notifyListeners(a,u)});return}const n=e.key;t?this.detachListener():this.stopPolling();const s=()=>{const a=this.storage.getItem(n);!t&&this.localCache[n]===a||this.notifyListeners(n,a)},i=this.storage.getItem(n);CC()&&i!==e.newValue&&e.newValue!==e.oldValue?setTimeout(s,uk):s()}notifyListeners(e,t){this.localCache[e]=t;const n=this.listeners[e];if(n)for(const s of Array.from(n))s(t&&JSON.parse(t))}startPolling(){this.stopPolling(),this.pollTimer=setInterval(()=>{this.forAllChangedKeys((e,t,n)=>{this.onStorageEvent(new StorageEvent("storage",{key:e,oldValue:t,newValue:n}),!0)})},ck)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}attachListener(){window.addEventListener("storage",this.boundEventHandler)}detachListener(){window.removeEventListener("storage",this.boundEventHandler)}_addListener(e,t){Object.keys(this.listeners).length===0&&(this.fallbackToPolling?this.startPolling():this.attachListener()),this.listeners[e]||(this.listeners[e]=new Set,this.localCache[e]=this.storage.getItem(e)),this.listeners[e].add(t)}_removeListener(e,t){this.listeners[e]&&(this.listeners[e].delete(t),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&(this.detachListener(),this.stopPolling())}async _set(e,t){await super._set(e,t),this.localCache[e]=JSON.stringify(t)}async _get(e){const t=await super._get(e);return this.localCache[e]=JSON.stringify(t),t}async _remove(e){await super._remove(e),delete this.localCache[e]}}o0.type="LOCAL";const dk=o0;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class i0 extends s0{constructor(){super(()=>window.sessionStorage,"SESSION")}_addListener(e,t){}_removeListener(e,t){}}i0.type="SESSION";const a0=i0;/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function hk(r){return Promise.all(r.map(async e=>{try{return{fulfilled:!0,value:await e}}catch(t){return{fulfilled:!1,reason:t}}}))}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ac{constructor(e){this.eventTarget=e,this.handlersMap={},this.boundEventHandler=this.handleEvent.bind(this)}static _getInstance(e){const t=this.receivers.find(s=>s.isListeningto(e));if(t)return t;const n=new ac(e);return this.receivers.push(n),n}isListeningto(e){return this.eventTarget===e}async handleEvent(e){const t=e,{eventId:n,eventType:s,data:i}=t.data,a=this.handlersMap[s];if(!(a!=null&&a.size))return;t.ports[0].postMessage({status:"ack",eventId:n,eventType:s});const l=Array.from(a).map(async d=>d(t.origin,i)),u=await hk(l);t.ports[0].postMessage({status:"done",eventId:n,eventType:s,response:u})}_subscribe(e,t){Object.keys(this.handlersMap).length===0&&this.eventTarget.addEventListener("message",this.boundEventHandler),this.handlersMap[e]||(this.handlersMap[e]=new Set),this.handlersMap[e].add(t)}_unsubscribe(e,t){this.handlersMap[e]&&t&&this.handlersMap[e].delete(t),(!t||this.handlersMap[e].size===0)&&delete this.handlersMap[e],Object.keys(this.handlersMap).length===0&&this.eventTarget.removeEventListener("message",this.boundEventHandler)}}ac.receivers=[];/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Nh(r="",e=10){let t="";for(let n=0;n<e;n++)t+=Math.floor(Math.random()*10);return r+t}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class fk{constructor(e){this.target=e,this.handlers=new Set}removeMessageHandler(e){e.messageChannel&&(e.messageChannel.port1.removeEventListener("message",e.onMessage),e.messageChannel.port1.close()),this.handlers.delete(e)}async _send(e,t,n=50){const s=typeof MessageChannel<"u"?new MessageChannel:null;if(!s)throw new Error("connection_unavailable");let i,a;return new Promise((l,u)=>{const d=Nh("",20);s.port1.start();const h=setTimeout(()=>{u(new Error("unsupported_event"))},n);a={messageChannel:s,onMessage(p){const g=p;if(g.data.eventId===d)switch(g.data.status){case"ack":clearTimeout(h),i=setTimeout(()=>{u(new Error("timeout"))},3e3);break;case"done":clearTimeout(i),l(g.data.response);break;default:clearTimeout(h),clearTimeout(i),u(new Error("invalid_response"));break}}},this.handlers.add(a),s.port1.addEventListener("message",a.onMessage),this.target.postMessage({eventType:e,eventId:d,data:t},[s.port2])}).finally(()=>{a&&this.removeMessageHandler(a)})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function wr(){return window}function mk(r){wr().location.href=r}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function l0(){return typeof wr().WorkerGlobalScope<"u"&&typeof wr().importScripts=="function"}async function pk(){if(!(navigator!=null&&navigator.serviceWorker))return null;try{return(await navigator.serviceWorker.ready).active}catch{return null}}function gk(){var r;return((r=navigator==null?void 0:navigator.serviceWorker)===null||r===void 0?void 0:r.controller)||null}function yk(){return l0()?self:null}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const c0="firebaseLocalStorageDb",xk=1,Tl="firebaseLocalStorage",u0="fbase_key";class na{constructor(e){this.request=e}toPromise(){return new Promise((e,t)=>{this.request.addEventListener("success",()=>{e(this.request.result)}),this.request.addEventListener("error",()=>{t(this.request.error)})})}}function lc(r,e){return r.transaction([Tl],e?"readwrite":"readonly").objectStore(Tl)}function bk(){const r=indexedDB.deleteDatabase(c0);return new na(r).toPromise()}function sd(){const r=indexedDB.open(c0,xk);return new Promise((e,t)=>{r.addEventListener("error",()=>{t(r.error)}),r.addEventListener("upgradeneeded",()=>{const n=r.result;try{n.createObjectStore(Tl,{keyPath:u0})}catch(s){t(s)}}),r.addEventListener("success",async()=>{const n=r.result;n.objectStoreNames.contains(Tl)?e(n):(n.close(),await bk(),e(await sd()))})})}async function wp(r,e,t){const n=lc(r,!0).put({[u0]:e,value:t});return new na(n).toPromise()}async function vk(r,e){const t=lc(r,!1).get(e),n=await new na(t).toPromise();return n===void 0?null:n.value}function _p(r,e){const t=lc(r,!0).delete(e);return new na(t).toPromise()}const wk=800,_k=3;class d0{constructor(){this.type="LOCAL",this._shouldAllowMigration=!0,this.listeners={},this.localCache={},this.pollTimer=null,this.pendingWrites=0,this.receiver=null,this.sender=null,this.serviceWorkerReceiverAvailable=!1,this.activeServiceWorker=null,this._workerInitializationPromise=this.initializeServiceWorkerMessaging().then(()=>{},()=>{})}async _openDb(){return this.db?this.db:(this.db=await sd(),this.db)}async _withRetries(e){let t=0;for(;;)try{const n=await this._openDb();return await e(n)}catch(n){if(t++>_k)throw n;this.db&&(this.db.close(),this.db=void 0)}}async initializeServiceWorkerMessaging(){return l0()?this.initializeReceiver():this.initializeSender()}async initializeReceiver(){this.receiver=ac._getInstance(yk()),this.receiver._subscribe("keyChanged",async(e,t)=>({keyProcessed:(await this._poll()).includes(t.key)})),this.receiver._subscribe("ping",async(e,t)=>["keyChanged"])}async initializeSender(){var e,t;if(this.activeServiceWorker=await pk(),!this.activeServiceWorker)return;this.sender=new fk(this.activeServiceWorker);const n=await this.sender._send("ping",{},800);n&&!((e=n[0])===null||e===void 0)&&e.fulfilled&&!((t=n[0])===null||t===void 0)&&t.value.includes("keyChanged")&&(this.serviceWorkerReceiverAvailable=!0)}async notifyServiceWorker(e){if(!(!this.sender||!this.activeServiceWorker||gk()!==this.activeServiceWorker))try{await this.sender._send("keyChanged",{key:e},this.serviceWorkerReceiverAvailable?800:50)}catch{}}async _isAvailable(){try{if(!indexedDB)return!1;const e=await sd();return await wp(e,_l,"1"),await _p(e,_l),!0}catch{}return!1}async _withPendingWrite(e){this.pendingWrites++;try{await e()}finally{this.pendingWrites--}}async _set(e,t){return this._withPendingWrite(async()=>(await this._withRetries(n=>wp(n,e,t)),this.localCache[e]=t,this.notifyServiceWorker(e)))}async _get(e){const t=await this._withRetries(n=>vk(n,e));return this.localCache[e]=t,t}async _remove(e){return this._withPendingWrite(async()=>(await this._withRetries(t=>_p(t,e)),delete this.localCache[e],this.notifyServiceWorker(e)))}async _poll(){const e=await this._withRetries(s=>{const i=lc(s,!1).getAll();return new na(i).toPromise()});if(!e)return[];if(this.pendingWrites!==0)return[];const t=[],n=new Set;if(e.length!==0)for(const{fbase_key:s,value:i}of e)n.add(s),JSON.stringify(this.localCache[s])!==JSON.stringify(i)&&(this.notifyListeners(s,i),t.push(s));for(const s of Object.keys(this.localCache))this.localCache[s]&&!n.has(s)&&(this.notifyListeners(s,null),t.push(s));return t}notifyListeners(e,t){this.localCache[e]=t;const n=this.listeners[e];if(n)for(const s of Array.from(n))s(t)}startPolling(){this.stopPolling(),this.pollTimer=setInterval(async()=>this._poll(),wk)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}_addListener(e,t){Object.keys(this.listeners).length===0&&this.startPolling(),this.listeners[e]||(this.listeners[e]=new Set,this._get(e)),this.listeners[e].add(t)}_removeListener(e,t){this.listeners[e]&&(this.listeners[e].delete(t),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&this.stopPolling()}}d0.type="LOCAL";const Tk=d0;new ea(3e4,6e4);/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function h0(r,e){return e?Fr(e):(ie(r._popupRedirectResolver,r,"argument-error"),r._popupRedirectResolver)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ch extends _h{constructor(e){super("custom","custom"),this.params=e}_getIdTokenResponse(e){return to(e,this._buildIdpRequest())}_linkToIdToken(e,t){return to(e,this._buildIdpRequest(t))}_getReauthenticationResolver(e){return to(e,this._buildIdpRequest())}_buildIdpRequest(e){const t={requestUri:this.params.requestUri,sessionId:this.params.sessionId,postBody:this.params.postBody,tenantId:this.params.tenantId,pendingToken:this.params.pendingToken,returnSecureToken:!0,returnIdpCredential:!0};return e&&(t.idToken=e),t}}function Ek(r){return r0(r.auth,new Ch(r),r.bypassAuthState)}function Nk(r){const{auth:e,user:t}=r;return ie(t,e,"internal-error"),ek(t,new Ch(r),r.bypassAuthState)}async function Ck(r){const{auth:e,user:t}=r;return ie(t,e,"internal-error"),ZC(t,new Ch(r),r.bypassAuthState)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class f0{constructor(e,t,n,s,i=!1){this.auth=e,this.resolver=n,this.user=s,this.bypassAuthState=i,this.pendingPromise=null,this.eventManager=null,this.filter=Array.isArray(t)?t:[t]}execute(){return new Promise(async(e,t)=>{this.pendingPromise={resolve:e,reject:t};try{this.eventManager=await this.resolver._initialize(this.auth),await this.onExecution(),this.eventManager.registerConsumer(this)}catch(n){this.reject(n)}})}async onAuthEvent(e){const{urlResponse:t,sessionId:n,postBody:s,tenantId:i,error:a,type:l}=e;if(a){this.reject(a);return}const u={auth:this.auth,requestUri:t,sessionId:n,tenantId:i||void 0,postBody:s||void 0,user:this.user,bypassAuthState:this.bypassAuthState};try{this.resolve(await this.getIdpTask(l)(u))}catch(d){this.reject(d)}}onError(e){this.reject(e)}getIdpTask(e){switch(e){case"signInViaPopup":case"signInViaRedirect":return Ek;case"linkViaPopup":case"linkViaRedirect":return Ck;case"reauthViaPopup":case"reauthViaRedirect":return Nk;default:Yt(this.auth,"internal-error")}}resolve(e){zr(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.resolve(e),this.unregisterAndCleanUp()}reject(e){zr(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.reject(e),this.unregisterAndCleanUp()}unregisterAndCleanUp(){this.eventManager&&this.eventManager.unregisterConsumer(this),this.pendingPromise=null,this.cleanUp()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const kk=new ea(2e3,1e4);async function Sk(r,e,t){if(Mt(r.app))return Promise.reject(lr(r,"operation-not-supported-in-this-environment"));const n=Hn(r);iC(r,e,Eh);const s=h0(n,t);return new ns(n,"signInViaPopup",e,s).executeNotNull()}class ns extends f0{constructor(e,t,n,s,i){super(e,t,s,i),this.provider=n,this.authWindow=null,this.pollId=null,ns.currentPopupAction&&ns.currentPopupAction.cancel(),ns.currentPopupAction=this}async executeNotNull(){const e=await this.execute();return ie(e,this.auth,"internal-error"),e}async onExecution(){zr(this.filter.length===1,"Popup operations only handle one event");const e=Nh();this.authWindow=await this.resolver._openPopup(this.auth,this.provider,this.filter[0],e),this.authWindow.associatedEvent=e,this.resolver._originValidation(this.auth).catch(t=>{this.reject(t)}),this.resolver._isIframeWebStorageSupported(this.auth,t=>{t||this.reject(lr(this.auth,"web-storage-unsupported"))}),this.pollUserCancellation()}get eventId(){var e;return((e=this.authWindow)===null||e===void 0?void 0:e.associatedEvent)||null}cancel(){this.reject(lr(this.auth,"cancelled-popup-request"))}cleanUp(){this.authWindow&&this.authWindow.close(),this.pollId&&window.clearTimeout(this.pollId),this.authWindow=null,this.pollId=null,ns.currentPopupAction=null}pollUserCancellation(){const e=()=>{var t,n;if(!((n=(t=this.authWindow)===null||t===void 0?void 0:t.window)===null||n===void 0)&&n.closed){this.pollId=window.setTimeout(()=>{this.pollId=null,this.reject(lr(this.auth,"popup-closed-by-user"))},8e3);return}this.pollId=window.setTimeout(e,kk.get())};e()}}ns.currentPopupAction=null;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const jk="pendingRedirect",Za=new Map;class Ik extends f0{constructor(e,t,n=!1){super(e,["signInViaRedirect","linkViaRedirect","reauthViaRedirect","unknown"],t,void 0,n),this.eventId=null}async execute(){let e=Za.get(this.auth._key());if(!e){try{const n=await Ak(this.resolver,this.auth)?await super.execute():null;e=()=>Promise.resolve(n)}catch(t){e=()=>Promise.reject(t)}Za.set(this.auth._key(),e)}return this.bypassAuthState||Za.set(this.auth._key(),()=>Promise.resolve(null)),e()}async onAuthEvent(e){if(e.type==="signInViaRedirect")return super.onAuthEvent(e);if(e.type==="unknown"){this.resolve(null);return}if(e.eventId){const t=await this.auth._redirectUserForId(e.eventId);if(t)return this.user=t,super.onAuthEvent(e);this.resolve(null)}}async onExecution(){}cleanUp(){}}async function Ak(r,e){const t=Mk(e),n=Pk(r);if(!await n._isAvailable())return!1;const s=await n._get(t)==="true";return await n._remove(t),s}function Rk(r,e){Za.set(r._key(),e)}function Pk(r){return Fr(r._redirectPersistence)}function Mk(r){return Ja(jk,r.config.apiKey,r.name)}async function Dk(r,e,t=!1){if(Mt(r.app))return Promise.reject(Ur(r));const n=Hn(r),s=h0(n,e),a=await new Ik(n,s,t).execute();return a&&!t&&(delete a.user._redirectEventId,await n._persistUserIfCurrent(a.user),await n._setRedirectUser(null,e)),a}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ok=600*1e3;class Lk{constructor(e){this.auth=e,this.cachedEventUids=new Set,this.consumers=new Set,this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1,this.lastProcessedEventTime=Date.now()}registerConsumer(e){this.consumers.add(e),this.queuedRedirectEvent&&this.isEventForConsumer(this.queuedRedirectEvent,e)&&(this.sendToConsumer(this.queuedRedirectEvent,e),this.saveEventToCache(this.queuedRedirectEvent),this.queuedRedirectEvent=null)}unregisterConsumer(e){this.consumers.delete(e)}onEvent(e){if(this.hasEventBeenHandled(e))return!1;let t=!1;return this.consumers.forEach(n=>{this.isEventForConsumer(e,n)&&(t=!0,this.sendToConsumer(e,n),this.saveEventToCache(e))}),this.hasHandledPotentialRedirect||!Vk(e)||(this.hasHandledPotentialRedirect=!0,t||(this.queuedRedirectEvent=e,t=!0)),t}sendToConsumer(e,t){var n;if(e.error&&!m0(e)){const s=((n=e.error.code)===null||n===void 0?void 0:n.split("auth/")[1])||"internal-error";t.onError(lr(this.auth,s))}else t.onAuthEvent(e)}isEventForConsumer(e,t){const n=t.eventId===null||!!e.eventId&&e.eventId===t.eventId;return t.filter.includes(e.type)&&n}hasEventBeenHandled(e){return Date.now()-this.lastProcessedEventTime>=Ok&&this.cachedEventUids.clear(),this.cachedEventUids.has(Tp(e))}saveEventToCache(e){this.cachedEventUids.add(Tp(e)),this.lastProcessedEventTime=Date.now()}}function Tp(r){return[r.type,r.eventId,r.sessionId,r.tenantId].filter(e=>e).join("-")}function m0({type:r,error:e}){return r==="unknown"&&(e==null?void 0:e.code)==="auth/no-auth-event"}function Vk(r){switch(r.type){case"signInViaRedirect":case"linkViaRedirect":case"reauthViaRedirect":return!0;case"unknown":return m0(r);default:return!1}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Fk(r,e={}){return Wr(r,"GET","/v1/projects",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Uk=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,$k=/^https?/;async function Bk(r){if(r.config.emulator)return;const{authorizedDomains:e}=await Fk(r);for(const t of e)try{if(zk(t))return}catch{}Yt(r,"unauthorized-domain")}function zk(r){const e=td(),{protocol:t,hostname:n}=new URL(e);if(r.startsWith("chrome-extension://")){const a=new URL(r);return a.hostname===""&&n===""?t==="chrome-extension:"&&r.replace("chrome-extension://","")===e.replace("chrome-extension://",""):t==="chrome-extension:"&&a.hostname===n}if(!$k.test(t))return!1;if(Uk.test(r))return n===r;const s=r.replace(/\./g,"\\.");return new RegExp("^(.+\\."+s+"|"+s+")$","i").test(n)}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const qk=new ea(3e4,6e4);function Ep(){const r=wr().___jsl;if(r!=null&&r.H){for(const e of Object.keys(r.H))if(r.H[e].r=r.H[e].r||[],r.H[e].L=r.H[e].L||[],r.H[e].r=[...r.H[e].L],r.CP)for(let t=0;t<r.CP.length;t++)r.CP[t]=null}}function Hk(r){return new Promise((e,t)=>{var n,s,i;function a(){Ep(),gapi.load("gapi.iframes",{callback:()=>{e(gapi.iframes.getContext())},ontimeout:()=>{Ep(),t(lr(r,"network-request-failed"))},timeout:qk.get()})}if(!((s=(n=wr().gapi)===null||n===void 0?void 0:n.iframes)===null||s===void 0)&&s.Iframe)e(gapi.iframes.getContext());else if(!((i=wr().gapi)===null||i===void 0)&&i.load)a();else{const l=DC("iframefcb");return wr()[l]=()=>{gapi.load?a():t(lr(r,"network-request-failed"))},Jx(`${MC()}?onload=${l}`).catch(u=>t(u))}}).catch(e=>{throw el=null,e})}let el=null;function Wk(r){return el=el||Hk(r),el}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Gk=new ea(5e3,15e3),Kk="__/auth/iframe",Qk="emulator/auth/iframe",Yk={style:{position:"absolute",top:"-100px",width:"1px",height:"1px"},"aria-hidden":"true",tabindex:"-1"},Xk=new Map([["identitytoolkit.googleapis.com","p"],["staging-identitytoolkit.sandbox.googleapis.com","s"],["test-identitytoolkit.sandbox.googleapis.com","t"]]);function Jk(r){const e=r.config;ie(e.authDomain,r,"auth-domain-config-required");const t=e.emulator?bh(e,Qk):`https://${r.config.authDomain}/${Kk}`,n={apiKey:e.apiKey,appName:r.name,v:As},s=Xk.get(r.config.apiHost);s&&(n.eid=s);const i=r._getFrameworks();return i.length&&(n.fw=i.join(",")),`${t}?${Zi(n).slice(1)}`}async function Zk(r){const e=await Wk(r),t=wr().gapi;return ie(t,r,"internal-error"),e.open({where:document.body,url:Jk(r),messageHandlersFilter:t.iframes.CROSS_ORIGIN_IFRAMES_FILTER,attributes:Yk,dontclear:!0},n=>new Promise(async(s,i)=>{await n.restyle({setHideOnLeave:!1});const a=lr(r,"network-request-failed"),l=wr().setTimeout(()=>{i(a)},Gk.get());function u(){wr().clearTimeout(l),s(n)}n.ping(u).then(u,()=>{i(a)})}))}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const eS={location:"yes",resizable:"yes",statusbar:"yes",toolbar:"no"},tS=500,rS=600,nS="_blank",sS="http://localhost";class Np{constructor(e){this.window=e,this.associatedEvent=null}close(){if(this.window)try{this.window.close()}catch{}}}function oS(r,e,t,n=tS,s=rS){const i=Math.max((window.screen.availHeight-s)/2,0).toString(),a=Math.max((window.screen.availWidth-n)/2,0).toString();let l="";const u=Object.assign(Object.assign({},eS),{width:n.toString(),height:s.toString(),top:i,left:a}),d=wt().toLowerCase();t&&(l=Hx(d)?nS:t),zx(d)&&(e=e||sS,u.scrollbars="yes");const h=Object.entries(u).reduce((g,[b,C])=>`${g}${b}=${C},`,"");if(NC(d)&&l!=="_self")return iS(e||"",l),new Np(null);const p=window.open(e||"",l,h);ie(p,r,"popup-blocked");try{p.focus()}catch{}return new Np(p)}function iS(r,e){const t=document.createElement("a");t.href=r,t.target=e;const n=document.createEvent("MouseEvent");n.initMouseEvent("click",!0,!0,window,1,0,0,0,0,!1,!1,!1,!1,1,null),t.dispatchEvent(n)}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const aS="__/auth/handler",lS="emulator/auth/handler",cS=encodeURIComponent("fac");async function Cp(r,e,t,n,s,i){ie(r.config.authDomain,r,"auth-domain-config-required"),ie(r.config.apiKey,r,"invalid-api-key");const a={apiKey:r.config.apiKey,appName:r.name,authType:t,redirectUrl:n,v:As,eventId:s};if(e instanceof Eh){e.setDefaultLanguage(r.languageCode),a.providerId=e.providerId||"",HE(e.getCustomParameters())||(a.customParameters=JSON.stringify(e.getCustomParameters()));for(const[h,p]of Object.entries({}))a[h]=p}if(e instanceof ra){const h=e.getScopes().filter(p=>p!=="");h.length>0&&(a.scopes=h.join(","))}r.tenantId&&(a.tid=r.tenantId);const l=a;for(const h of Object.keys(l))l[h]===void 0&&delete l[h];const u=await r._getAppCheckToken(),d=u?`#${cS}=${encodeURIComponent(u)}`:"";return`${uS(r)}?${Zi(l).slice(1)}${d}`}function uS({config:r}){return r.emulator?bh(r,lS):`https://${r.authDomain}/${aS}`}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const wu="webStorageSupport";class dS{constructor(){this.eventManagers={},this.iframes={},this.originValidationPromises={},this._redirectPersistence=a0,this._completeRedirectFn=Dk,this._overrideRedirectResult=Rk}async _openPopup(e,t,n,s){var i;zr((i=this.eventManagers[e._key()])===null||i===void 0?void 0:i.manager,"_initialize() not called before _openPopup()");const a=await Cp(e,t,n,td(),s);return oS(e,a,Nh())}async _openRedirect(e,t,n,s){await this._originValidation(e);const i=await Cp(e,t,n,td(),s);return mk(i),new Promise(()=>{})}_initialize(e){const t=e._key();if(this.eventManagers[t]){const{manager:s,promise:i}=this.eventManagers[t];return s?Promise.resolve(s):(zr(i,"If manager is not set, promise should be"),i)}const n=this.initAndGetManager(e);return this.eventManagers[t]={promise:n},n.catch(()=>{delete this.eventManagers[t]}),n}async initAndGetManager(e){const t=await Zk(e),n=new Lk(e);return t.register("authEvent",s=>(ie(s==null?void 0:s.authEvent,e,"invalid-auth-event"),{status:n.onEvent(s.authEvent)?"ACK":"ERROR"}),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER),this.eventManagers[e._key()]={manager:n},this.iframes[e._key()]=t,n}_isIframeWebStorageSupported(e,t){this.iframes[e._key()].send(wu,{type:wu},s=>{var i;const a=(i=s==null?void 0:s[0])===null||i===void 0?void 0:i[wu];a!==void 0&&t(!!a),Yt(e,"internal-error")},gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER)}_originValidation(e){const t=e._key();return this.originValidationPromises[t]||(this.originValidationPromises[t]=Bk(e)),this.originValidationPromises[t]}get _shouldInitProactively(){return Yx()||qx()||wh()}}const hS=dS;var kp="@firebase/auth",Sp="1.10.8";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class fS{constructor(e){this.auth=e,this.internalListeners=new Map}getUid(){var e;return this.assertAuthConfigured(),((e=this.auth.currentUser)===null||e===void 0?void 0:e.uid)||null}async getToken(e){return this.assertAuthConfigured(),await this.auth._initializationPromise,this.auth.currentUser?{accessToken:await this.auth.currentUser.getIdToken(e)}:null}addAuthTokenListener(e){if(this.assertAuthConfigured(),this.internalListeners.has(e))return;const t=this.auth.onIdTokenChanged(n=>{e((n==null?void 0:n.stsTokenManager.accessToken)||null)});this.internalListeners.set(e,t),this.updateProactiveRefresh()}removeAuthTokenListener(e){this.assertAuthConfigured();const t=this.internalListeners.get(e);t&&(this.internalListeners.delete(e),t(),this.updateProactiveRefresh())}assertAuthConfigured(){ie(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}updateProactiveRefresh(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function mS(r){switch(r){case"Node":return"node";case"ReactNative":return"rn";case"Worker":return"webworker";case"Cordova":return"cordova";case"WebExtension":return"web-extension";default:return}}function pS(r){Cr(new cr("auth",(e,{options:t})=>{const n=e.getProvider("app").getImmediate(),s=e.getProvider("heartbeat"),i=e.getProvider("app-check-internal"),{apiKey:a,authDomain:l}=n.options;ie(a&&!a.includes(":"),"invalid-api-key",{appName:n.name});const u={apiKey:a,authDomain:l,clientPlatform:r,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:Xx(r)},d=new AC(n,s,i,u);return $C(d,t),d},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((e,t,n)=>{e.getProvider("auth-internal").initialize()})),Cr(new cr("auth-internal",e=>{const t=Hn(e.getProvider("auth").getImmediate());return(n=>new fS(n))(t)},"PRIVATE").setInstantiationMode("EXPLICIT")),Lt(kp,Sp,mS(r)),Lt(kp,Sp,"esm2017")}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const gS=300,yS=kx("authIdTokenMaxAge")||gS;let jp=null;const xS=r=>async e=>{const t=e&&await e.getIdTokenResult(),n=t&&(new Date().getTime()-Date.parse(t.issuedAtTime))/1e3;if(n&&n>yS)return;const s=t==null?void 0:t.token;jp!==s&&(jp=s,await fetch(r,{method:s?"POST":"DELETE",headers:s?{Authorization:`Bearer ${s}`}:{}}))};function bS(r=oc()){const e=Is(r,"auth");if(e.isInitialized())return e.getImmediate();const t=UC(r,{popupRedirectResolver:hS,persistence:[Tk,dk,a0]}),n=kx("authTokenSyncURL");if(n&&typeof isSecureContext=="boolean"&&isSecureContext){const i=new URL(n,location.origin);if(location.origin===i.origin){const a=xS(i.toString());ak(t,a,()=>a(t.currentUser)),ik(t,l=>a(l))}}const s=Ex("auth");return s&&BC(t,`http://${s}`),t}function vS(){var r,e;return(e=(r=document.getElementsByTagName("head"))===null||r===void 0?void 0:r[0])!==null&&e!==void 0?e:document}RC({loadJS(r){return new Promise((e,t)=>{const n=document.createElement("script");n.setAttribute("src",r),n.onload=e,n.onerror=s=>{const i=lr("internal-error");i.customData=s,t(i)},n.type="text/javascript",n.charset="UTF-8",vS().appendChild(n)})},gapiScript:"https://apis.google.com/js/api.js",recaptchaV2Script:"https://www.google.com/recaptcha/api.js",recaptchaEnterpriseScript:"https://www.google.com/recaptcha/enterprise.js?render="});pS("Browser");var Ip=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var Nn,p0;(function(){var r;/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/function e(A,w){function k(){}k.prototype=w.prototype,A.D=w.prototype,A.prototype=new k,A.prototype.constructor=A,A.C=function(j,_,M){for(var I=Array(arguments.length-2),X=2;X<arguments.length;X++)I[X-2]=arguments[X];return w.prototype[_].apply(j,I)}}function t(){this.blockSize=-1}function n(){this.blockSize=-1,this.blockSize=64,this.g=Array(4),this.B=Array(this.blockSize),this.o=this.h=0,this.s()}e(n,t),n.prototype.s=function(){this.g[0]=1732584193,this.g[1]=4023233417,this.g[2]=2562383102,this.g[3]=271733878,this.o=this.h=0};function s(A,w,k){k||(k=0);var j=Array(16);if(typeof w=="string")for(var _=0;16>_;++_)j[_]=w.charCodeAt(k++)|w.charCodeAt(k++)<<8|w.charCodeAt(k++)<<16|w.charCodeAt(k++)<<24;else for(_=0;16>_;++_)j[_]=w[k++]|w[k++]<<8|w[k++]<<16|w[k++]<<24;w=A.g[0],k=A.g[1],_=A.g[2];var M=A.g[3],I=w+(M^k&(_^M))+j[0]+3614090360&4294967295;w=k+(I<<7&4294967295|I>>>25),I=M+(_^w&(k^_))+j[1]+3905402710&4294967295,M=w+(I<<12&4294967295|I>>>20),I=_+(k^M&(w^k))+j[2]+606105819&4294967295,_=M+(I<<17&4294967295|I>>>15),I=k+(w^_&(M^w))+j[3]+3250441966&4294967295,k=_+(I<<22&4294967295|I>>>10),I=w+(M^k&(_^M))+j[4]+4118548399&4294967295,w=k+(I<<7&4294967295|I>>>25),I=M+(_^w&(k^_))+j[5]+1200080426&4294967295,M=w+(I<<12&4294967295|I>>>20),I=_+(k^M&(w^k))+j[6]+2821735955&4294967295,_=M+(I<<17&4294967295|I>>>15),I=k+(w^_&(M^w))+j[7]+4249261313&4294967295,k=_+(I<<22&4294967295|I>>>10),I=w+(M^k&(_^M))+j[8]+1770035416&4294967295,w=k+(I<<7&4294967295|I>>>25),I=M+(_^w&(k^_))+j[9]+2336552879&4294967295,M=w+(I<<12&4294967295|I>>>20),I=_+(k^M&(w^k))+j[10]+4294925233&4294967295,_=M+(I<<17&4294967295|I>>>15),I=k+(w^_&(M^w))+j[11]+2304563134&4294967295,k=_+(I<<22&4294967295|I>>>10),I=w+(M^k&(_^M))+j[12]+1804603682&4294967295,w=k+(I<<7&4294967295|I>>>25),I=M+(_^w&(k^_))+j[13]+4254626195&4294967295,M=w+(I<<12&4294967295|I>>>20),I=_+(k^M&(w^k))+j[14]+2792965006&4294967295,_=M+(I<<17&4294967295|I>>>15),I=k+(w^_&(M^w))+j[15]+1236535329&4294967295,k=_+(I<<22&4294967295|I>>>10),I=w+(_^M&(k^_))+j[1]+4129170786&4294967295,w=k+(I<<5&4294967295|I>>>27),I=M+(k^_&(w^k))+j[6]+3225465664&4294967295,M=w+(I<<9&4294967295|I>>>23),I=_+(w^k&(M^w))+j[11]+643717713&4294967295,_=M+(I<<14&4294967295|I>>>18),I=k+(M^w&(_^M))+j[0]+3921069994&4294967295,k=_+(I<<20&4294967295|I>>>12),I=w+(_^M&(k^_))+j[5]+3593408605&4294967295,w=k+(I<<5&4294967295|I>>>27),I=M+(k^_&(w^k))+j[10]+38016083&4294967295,M=w+(I<<9&4294967295|I>>>23),I=_+(w^k&(M^w))+j[15]+3634488961&4294967295,_=M+(I<<14&4294967295|I>>>18),I=k+(M^w&(_^M))+j[4]+3889429448&4294967295,k=_+(I<<20&4294967295|I>>>12),I=w+(_^M&(k^_))+j[9]+568446438&4294967295,w=k+(I<<5&4294967295|I>>>27),I=M+(k^_&(w^k))+j[14]+3275163606&4294967295,M=w+(I<<9&4294967295|I>>>23),I=_+(w^k&(M^w))+j[3]+4107603335&4294967295,_=M+(I<<14&4294967295|I>>>18),I=k+(M^w&(_^M))+j[8]+1163531501&4294967295,k=_+(I<<20&4294967295|I>>>12),I=w+(_^M&(k^_))+j[13]+2850285829&4294967295,w=k+(I<<5&4294967295|I>>>27),I=M+(k^_&(w^k))+j[2]+4243563512&4294967295,M=w+(I<<9&4294967295|I>>>23),I=_+(w^k&(M^w))+j[7]+1735328473&4294967295,_=M+(I<<14&4294967295|I>>>18),I=k+(M^w&(_^M))+j[12]+2368359562&4294967295,k=_+(I<<20&4294967295|I>>>12),I=w+(k^_^M)+j[5]+4294588738&4294967295,w=k+(I<<4&4294967295|I>>>28),I=M+(w^k^_)+j[8]+2272392833&4294967295,M=w+(I<<11&4294967295|I>>>21),I=_+(M^w^k)+j[11]+1839030562&4294967295,_=M+(I<<16&4294967295|I>>>16),I=k+(_^M^w)+j[14]+4259657740&4294967295,k=_+(I<<23&4294967295|I>>>9),I=w+(k^_^M)+j[1]+2763975236&4294967295,w=k+(I<<4&4294967295|I>>>28),I=M+(w^k^_)+j[4]+1272893353&4294967295,M=w+(I<<11&4294967295|I>>>21),I=_+(M^w^k)+j[7]+4139469664&4294967295,_=M+(I<<16&4294967295|I>>>16),I=k+(_^M^w)+j[10]+3200236656&4294967295,k=_+(I<<23&4294967295|I>>>9),I=w+(k^_^M)+j[13]+681279174&4294967295,w=k+(I<<4&4294967295|I>>>28),I=M+(w^k^_)+j[0]+3936430074&4294967295,M=w+(I<<11&4294967295|I>>>21),I=_+(M^w^k)+j[3]+3572445317&4294967295,_=M+(I<<16&4294967295|I>>>16),I=k+(_^M^w)+j[6]+76029189&4294967295,k=_+(I<<23&4294967295|I>>>9),I=w+(k^_^M)+j[9]+3654602809&4294967295,w=k+(I<<4&4294967295|I>>>28),I=M+(w^k^_)+j[12]+3873151461&4294967295,M=w+(I<<11&4294967295|I>>>21),I=_+(M^w^k)+j[15]+530742520&4294967295,_=M+(I<<16&4294967295|I>>>16),I=k+(_^M^w)+j[2]+3299628645&4294967295,k=_+(I<<23&4294967295|I>>>9),I=w+(_^(k|~M))+j[0]+4096336452&4294967295,w=k+(I<<6&4294967295|I>>>26),I=M+(k^(w|~_))+j[7]+1126891415&4294967295,M=w+(I<<10&4294967295|I>>>22),I=_+(w^(M|~k))+j[14]+2878612391&4294967295,_=M+(I<<15&4294967295|I>>>17),I=k+(M^(_|~w))+j[5]+4237533241&4294967295,k=_+(I<<21&4294967295|I>>>11),I=w+(_^(k|~M))+j[12]+1700485571&4294967295,w=k+(I<<6&4294967295|I>>>26),I=M+(k^(w|~_))+j[3]+2399980690&4294967295,M=w+(I<<10&4294967295|I>>>22),I=_+(w^(M|~k))+j[10]+4293915773&4294967295,_=M+(I<<15&4294967295|I>>>17),I=k+(M^(_|~w))+j[1]+2240044497&4294967295,k=_+(I<<21&4294967295|I>>>11),I=w+(_^(k|~M))+j[8]+1873313359&4294967295,w=k+(I<<6&4294967295|I>>>26),I=M+(k^(w|~_))+j[15]+4264355552&4294967295,M=w+(I<<10&4294967295|I>>>22),I=_+(w^(M|~k))+j[6]+2734768916&4294967295,_=M+(I<<15&4294967295|I>>>17),I=k+(M^(_|~w))+j[13]+1309151649&4294967295,k=_+(I<<21&4294967295|I>>>11),I=w+(_^(k|~M))+j[4]+4149444226&4294967295,w=k+(I<<6&4294967295|I>>>26),I=M+(k^(w|~_))+j[11]+3174756917&4294967295,M=w+(I<<10&4294967295|I>>>22),I=_+(w^(M|~k))+j[2]+718787259&4294967295,_=M+(I<<15&4294967295|I>>>17),I=k+(M^(_|~w))+j[9]+3951481745&4294967295,A.g[0]=A.g[0]+w&4294967295,A.g[1]=A.g[1]+(_+(I<<21&4294967295|I>>>11))&4294967295,A.g[2]=A.g[2]+_&4294967295,A.g[3]=A.g[3]+M&4294967295}n.prototype.u=function(A,w){w===void 0&&(w=A.length);for(var k=w-this.blockSize,j=this.B,_=this.h,M=0;M<w;){if(_==0)for(;M<=k;)s(this,A,M),M+=this.blockSize;if(typeof A=="string"){for(;M<w;)if(j[_++]=A.charCodeAt(M++),_==this.blockSize){s(this,j),_=0;break}}else for(;M<w;)if(j[_++]=A[M++],_==this.blockSize){s(this,j),_=0;break}}this.h=_,this.o+=w},n.prototype.v=function(){var A=Array((56>this.h?this.blockSize:2*this.blockSize)-this.h);A[0]=128;for(var w=1;w<A.length-8;++w)A[w]=0;var k=8*this.o;for(w=A.length-8;w<A.length;++w)A[w]=k&255,k/=256;for(this.u(A),A=Array(16),w=k=0;4>w;++w)for(var j=0;32>j;j+=8)A[k++]=this.g[w]>>>j&255;return A};function i(A,w){var k=l;return Object.prototype.hasOwnProperty.call(k,A)?k[A]:k[A]=w(A)}function a(A,w){this.h=w;for(var k=[],j=!0,_=A.length-1;0<=_;_--){var M=A[_]|0;j&&M==w||(k[_]=M,j=!1)}this.g=k}var l={};function u(A){return-128<=A&&128>A?i(A,function(w){return new a([w|0],0>w?-1:0)}):new a([A|0],0>A?-1:0)}function d(A){if(isNaN(A)||!isFinite(A))return p;if(0>A)return v(d(-A));for(var w=[],k=1,j=0;A>=k;j++)w[j]=A/k|0,k*=4294967296;return new a(w,0)}function h(A,w){if(A.length==0)throw Error("number format error: empty string");if(w=w||10,2>w||36<w)throw Error("radix out of range: "+w);if(A.charAt(0)=="-")return v(h(A.substring(1),w));if(0<=A.indexOf("-"))throw Error('number format error: interior "-" character');for(var k=d(Math.pow(w,8)),j=p,_=0;_<A.length;_+=8){var M=Math.min(8,A.length-_),I=parseInt(A.substring(_,_+M),w);8>M?(M=d(Math.pow(w,M)),j=j.j(M).add(d(I))):(j=j.j(k),j=j.add(d(I)))}return j}var p=u(0),g=u(1),b=u(16777216);r=a.prototype,r.m=function(){if(x(this))return-v(this).m();for(var A=0,w=1,k=0;k<this.g.length;k++){var j=this.i(k);A+=(0<=j?j:4294967296+j)*w,w*=4294967296}return A},r.toString=function(A){if(A=A||10,2>A||36<A)throw Error("radix out of range: "+A);if(C(this))return"0";if(x(this))return"-"+v(this).toString(A);for(var w=d(Math.pow(A,6)),k=this,j="";;){var _=R(k,w).g;k=E(k,_.j(w));var M=((0<k.g.length?k.g[0]:k.h)>>>0).toString(A);if(k=_,C(k))return M+j;for(;6>M.length;)M="0"+M;j=M+j}},r.i=function(A){return 0>A?0:A<this.g.length?this.g[A]:this.h};function C(A){if(A.h!=0)return!1;for(var w=0;w<A.g.length;w++)if(A.g[w]!=0)return!1;return!0}function x(A){return A.h==-1}r.l=function(A){return A=E(this,A),x(A)?-1:C(A)?0:1};function v(A){for(var w=A.g.length,k=[],j=0;j<w;j++)k[j]=~A.g[j];return new a(k,~A.h).add(g)}r.abs=function(){return x(this)?v(this):this},r.add=function(A){for(var w=Math.max(this.g.length,A.g.length),k=[],j=0,_=0;_<=w;_++){var M=j+(this.i(_)&65535)+(A.i(_)&65535),I=(M>>>16)+(this.i(_)>>>16)+(A.i(_)>>>16);j=I>>>16,M&=65535,I&=65535,k[_]=I<<16|M}return new a(k,k[k.length-1]&-2147483648?-1:0)};function E(A,w){return A.add(v(w))}r.j=function(A){if(C(this)||C(A))return p;if(x(this))return x(A)?v(this).j(v(A)):v(v(this).j(A));if(x(A))return v(this.j(v(A)));if(0>this.l(b)&&0>A.l(b))return d(this.m()*A.m());for(var w=this.g.length+A.g.length,k=[],j=0;j<2*w;j++)k[j]=0;for(j=0;j<this.g.length;j++)for(var _=0;_<A.g.length;_++){var M=this.i(j)>>>16,I=this.i(j)&65535,X=A.i(_)>>>16,se=A.i(_)&65535;k[2*j+2*_]+=I*se,T(k,2*j+2*_),k[2*j+2*_+1]+=M*se,T(k,2*j+2*_+1),k[2*j+2*_+1]+=I*X,T(k,2*j+2*_+1),k[2*j+2*_+2]+=M*X,T(k,2*j+2*_+2)}for(j=0;j<w;j++)k[j]=k[2*j+1]<<16|k[2*j];for(j=w;j<2*w;j++)k[j]=0;return new a(k,0)};function T(A,w){for(;(A[w]&65535)!=A[w];)A[w+1]+=A[w]>>>16,A[w]&=65535,w++}function N(A,w){this.g=A,this.h=w}function R(A,w){if(C(w))throw Error("division by zero");if(C(A))return new N(p,p);if(x(A))return w=R(v(A),w),new N(v(w.g),v(w.h));if(x(w))return w=R(A,v(w)),new N(v(w.g),w.h);if(30<A.g.length){if(x(A)||x(w))throw Error("slowDivide_ only works with positive integers.");for(var k=g,j=w;0>=j.l(A);)k=L(k),j=L(j);var _=U(k,1),M=U(j,1);for(j=U(j,2),k=U(k,2);!C(j);){var I=M.add(j);0>=I.l(A)&&(_=_.add(k),M=I),j=U(j,1),k=U(k,1)}return w=E(A,_.j(w)),new N(_,w)}for(_=p;0<=A.l(w);){for(k=Math.max(1,Math.floor(A.m()/w.m())),j=Math.ceil(Math.log(k)/Math.LN2),j=48>=j?1:Math.pow(2,j-48),M=d(k),I=M.j(w);x(I)||0<I.l(A);)k-=j,M=d(k),I=M.j(w);C(M)&&(M=g),_=_.add(M),A=E(A,I)}return new N(_,A)}r.A=function(A){return R(this,A).h},r.and=function(A){for(var w=Math.max(this.g.length,A.g.length),k=[],j=0;j<w;j++)k[j]=this.i(j)&A.i(j);return new a(k,this.h&A.h)},r.or=function(A){for(var w=Math.max(this.g.length,A.g.length),k=[],j=0;j<w;j++)k[j]=this.i(j)|A.i(j);return new a(k,this.h|A.h)},r.xor=function(A){for(var w=Math.max(this.g.length,A.g.length),k=[],j=0;j<w;j++)k[j]=this.i(j)^A.i(j);return new a(k,this.h^A.h)};function L(A){for(var w=A.g.length+1,k=[],j=0;j<w;j++)k[j]=A.i(j)<<1|A.i(j-1)>>>31;return new a(k,A.h)}function U(A,w){var k=w>>5;w%=32;for(var j=A.g.length-k,_=[],M=0;M<j;M++)_[M]=0<w?A.i(M+k)>>>w|A.i(M+k+1)<<32-w:A.i(M+k);return new a(_,A.h)}n.prototype.digest=n.prototype.v,n.prototype.reset=n.prototype.s,n.prototype.update=n.prototype.u,p0=n,a.prototype.add=a.prototype.add,a.prototype.multiply=a.prototype.j,a.prototype.modulo=a.prototype.A,a.prototype.compare=a.prototype.l,a.prototype.toNumber=a.prototype.m,a.prototype.toString=a.prototype.toString,a.prototype.getBits=a.prototype.i,a.fromNumber=d,a.fromString=h,Nn=a}).apply(typeof Ip<"u"?Ip:typeof self<"u"?self:typeof window<"u"?window:{});var Va=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var g0,xi,y0,tl,od,x0,b0,v0;(function(){var r,e=typeof Object.defineProperties=="function"?Object.defineProperty:function(c,f,y){return c==Array.prototype||c==Object.prototype||(c[f]=y.value),c};function t(c){c=[typeof globalThis=="object"&&globalThis,c,typeof window=="object"&&window,typeof self=="object"&&self,typeof Va=="object"&&Va];for(var f=0;f<c.length;++f){var y=c[f];if(y&&y.Math==Math)return y}throw Error("Cannot find global object")}var n=t(this);function s(c,f){if(f)e:{var y=n;c=c.split(".");for(var S=0;S<c.length-1;S++){var O=c[S];if(!(O in y))break e;y=y[O]}c=c[c.length-1],S=y[c],f=f(S),f!=S&&f!=null&&e(y,c,{configurable:!0,writable:!0,value:f})}}function i(c,f){c instanceof String&&(c+="");var y=0,S=!1,O={next:function(){if(!S&&y<c.length){var F=y++;return{value:f(F,c[F]),done:!1}}return S=!0,{done:!0,value:void 0}}};return O[Symbol.iterator]=function(){return O},O}s("Array.prototype.values",function(c){return c||function(){return i(this,function(f,y){return y})}});/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/var a=a||{},l=this||self;function u(c){var f=typeof c;return f=f!="object"?f:c?Array.isArray(c)?"array":f:"null",f=="array"||f=="object"&&typeof c.length=="number"}function d(c){var f=typeof c;return f=="object"&&c!=null||f=="function"}function h(c,f,y){return c.call.apply(c.bind,arguments)}function p(c,f,y){if(!c)throw Error();if(2<arguments.length){var S=Array.prototype.slice.call(arguments,2);return function(){var O=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(O,S),c.apply(f,O)}}return function(){return c.apply(f,arguments)}}function g(c,f,y){return g=Function.prototype.bind&&Function.prototype.bind.toString().indexOf("native code")!=-1?h:p,g.apply(null,arguments)}function b(c,f){var y=Array.prototype.slice.call(arguments,1);return function(){var S=y.slice();return S.push.apply(S,arguments),c.apply(this,S)}}function C(c,f){function y(){}y.prototype=f.prototype,c.aa=f.prototype,c.prototype=new y,c.prototype.constructor=c,c.Qb=function(S,O,F){for(var H=Array(arguments.length-2),Ie=2;Ie<arguments.length;Ie++)H[Ie-2]=arguments[Ie];return f.prototype[O].apply(S,H)}}function x(c){const f=c.length;if(0<f){const y=Array(f);for(let S=0;S<f;S++)y[S]=c[S];return y}return[]}function v(c,f){for(let y=1;y<arguments.length;y++){const S=arguments[y];if(u(S)){const O=c.length||0,F=S.length||0;c.length=O+F;for(let H=0;H<F;H++)c[O+H]=S[H]}else c.push(S)}}class E{constructor(f,y){this.i=f,this.j=y,this.h=0,this.g=null}get(){let f;return 0<this.h?(this.h--,f=this.g,this.g=f.next,f.next=null):f=this.i(),f}}function T(c){return/^[\s\xa0]*$/.test(c)}function N(){var c=l.navigator;return c&&(c=c.userAgent)?c:""}function R(c){return R[" "](c),c}R[" "]=function(){};var L=N().indexOf("Gecko")!=-1&&!(N().toLowerCase().indexOf("webkit")!=-1&&N().indexOf("Edge")==-1)&&!(N().indexOf("Trident")!=-1||N().indexOf("MSIE")!=-1)&&N().indexOf("Edge")==-1;function U(c,f,y){for(const S in c)f.call(y,c[S],S,c)}function A(c,f){for(const y in c)f.call(void 0,c[y],y,c)}function w(c){const f={};for(const y in c)f[y]=c[y];return f}const k="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function j(c,f){let y,S;for(let O=1;O<arguments.length;O++){S=arguments[O];for(y in S)c[y]=S[y];for(let F=0;F<k.length;F++)y=k[F],Object.prototype.hasOwnProperty.call(S,y)&&(c[y]=S[y])}}function _(c){var f=1;c=c.split(":");const y=[];for(;0<f&&c.length;)y.push(c.shift()),f--;return c.length&&y.push(c.join(":")),y}function M(c){l.setTimeout(()=>{throw c},0)}function I(){var c=z;let f=null;return c.g&&(f=c.g,c.g=c.g.next,c.g||(c.h=null),f.next=null),f}class X{constructor(){this.h=this.g=null}add(f,y){const S=se.get();S.set(f,y),this.h?this.h.next=S:this.g=S,this.h=S}}var se=new E(()=>new le,c=>c.reset());class le{constructor(){this.next=this.g=this.h=null}set(f,y){this.h=f,this.g=y,this.next=null}reset(){this.next=this.g=this.h=null}}let Z,P=!1,z=new X,Y=()=>{const c=l.Promise.resolve(void 0);Z=()=>{c.then(xe)}};var xe=()=>{for(var c;c=I();){try{c.h.call(c.g)}catch(y){M(y)}var f=se;f.j(c),100>f.h&&(f.h++,c.next=f.g,f.g=c)}P=!1};function $e(){this.s=this.s,this.C=this.C}$e.prototype.s=!1,$e.prototype.ma=function(){this.s||(this.s=!0,this.N())},$e.prototype.N=function(){if(this.C)for(;this.C.length;)this.C.shift()()};function q(c,f){this.type=c,this.g=this.target=f,this.defaultPrevented=!1}q.prototype.h=function(){this.defaultPrevented=!0};var he=function(){if(!l.addEventListener||!Object.defineProperty)return!1;var c=!1,f=Object.defineProperty({},"passive",{get:function(){c=!0}});try{const y=()=>{};l.addEventListener("test",y,f),l.removeEventListener("test",y,f)}catch{}return c}();function Re(c,f){if(q.call(this,c?c.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,c){var y=this.type=c.type,S=c.changedTouches&&c.changedTouches.length?c.changedTouches[0]:null;if(this.target=c.target||c.srcElement,this.g=f,f=c.relatedTarget){if(L){e:{try{R(f.nodeName);var O=!0;break e}catch{}O=!1}O||(f=null)}}else y=="mouseover"?f=c.fromElement:y=="mouseout"&&(f=c.toElement);this.relatedTarget=f,S?(this.clientX=S.clientX!==void 0?S.clientX:S.pageX,this.clientY=S.clientY!==void 0?S.clientY:S.pageY,this.screenX=S.screenX||0,this.screenY=S.screenY||0):(this.clientX=c.clientX!==void 0?c.clientX:c.pageX,this.clientY=c.clientY!==void 0?c.clientY:c.pageY,this.screenX=c.screenX||0,this.screenY=c.screenY||0),this.button=c.button,this.key=c.key||"",this.ctrlKey=c.ctrlKey,this.altKey=c.altKey,this.shiftKey=c.shiftKey,this.metaKey=c.metaKey,this.pointerId=c.pointerId||0,this.pointerType=typeof c.pointerType=="string"?c.pointerType:ht[c.pointerType]||"",this.state=c.state,this.i=c,c.defaultPrevented&&Re.aa.h.call(this)}}C(Re,q);var ht={2:"touch",3:"pen",4:"mouse"};Re.prototype.h=function(){Re.aa.h.call(this);var c=this.i;c.preventDefault?c.preventDefault():c.returnValue=!1};var ft="closure_listenable_"+(1e6*Math.random()|0),Vt=0;function Go(c,f,y,S,O){this.listener=c,this.proxy=null,this.src=f,this.type=y,this.capture=!!S,this.ha=O,this.key=++Vt,this.da=this.fa=!1}function Qr(c){c.da=!0,c.listener=null,c.proxy=null,c.src=null,c.ha=null}function Yr(c){this.src=c,this.g={},this.h=0}Yr.prototype.add=function(c,f,y,S,O){var F=c.toString();c=this.g[F],c||(c=this.g[F]=[],this.h++);var H=Ko(c,f,S,O);return-1<H?(f=c[H],y||(f.fa=!1)):(f=new Go(f,this.src,F,!!S,O),f.fa=y,c.push(f)),f};function Qn(c,f){var y=f.type;if(y in c.g){var S=c.g[y],O=Array.prototype.indexOf.call(S,f,void 0),F;(F=0<=O)&&Array.prototype.splice.call(S,O,1),F&&(Qr(f),c.g[y].length==0&&(delete c.g[y],c.h--))}}function Ko(c,f,y,S){for(var O=0;O<c.length;++O){var F=c[O];if(!F.da&&F.listener==f&&F.capture==!!y&&F.ha==S)return O}return-1}var Qo="closure_lm_"+(1e6*Math.random()|0),V={};function fe(c,f,y,S,O){if(Array.isArray(f)){for(var F=0;F<f.length;F++)fe(c,f[F],y,S,O);return null}return y=Xr(y),c&&c[ft]?c.K(f,y,d(S)?!!S.capture:!1,O):ye(c,f,y,!1,S,O)}function ye(c,f,y,S,O,F){if(!f)throw Error("Invalid event type");var H=d(O)?!!O.capture:!!O,Ie=Zt(c);if(Ie||(c[Qo]=Ie=new Yr(c)),y=Ie.add(f,y,S,H,F),y.proxy)return y;if(S=ke(),y.proxy=S,S.src=c,S.listener=y,c.addEventListener)he||(O=H),O===void 0&&(O=!1),c.addEventListener(f.toString(),S,O);else if(c.attachEvent)c.attachEvent(Jt(f.toString()),S);else if(c.addListener&&c.removeListener)c.addListener(S);else throw Error("addEventListener and attachEvent are unavailable.");return y}function ke(){function c(y){return f.call(c.src,c.listener,y)}const f=Yn;return c}function je(c,f,y,S,O){if(Array.isArray(f))for(var F=0;F<f.length;F++)je(c,f[F],y,S,O);else S=d(S)?!!S.capture:!!S,y=Xr(y),c&&c[ft]?(c=c.i,f=String(f).toString(),f in c.g&&(F=c.g[f],y=Ko(F,y,S,O),-1<y&&(Qr(F[y]),Array.prototype.splice.call(F,y,1),F.length==0&&(delete c.g[f],c.h--)))):c&&(c=Zt(c))&&(f=c.g[f.toString()],c=-1,f&&(c=Ko(f,y,S,O)),(y=-1<c?f[c]:null)&&Ue(y))}function Ue(c){if(typeof c!="number"&&c&&!c.da){var f=c.src;if(f&&f[ft])Qn(f.i,c);else{var y=c.type,S=c.proxy;f.removeEventListener?f.removeEventListener(y,S,c.capture):f.detachEvent?f.detachEvent(Jt(y),S):f.addListener&&f.removeListener&&f.removeListener(S),(y=Zt(f))?(Qn(y,c),y.h==0&&(y.src=null,f[Qo]=null)):Qr(c)}}}function Jt(c){return c in V?V[c]:V[c]="on"+c}function Yn(c,f){if(c.da)c=!0;else{f=new Re(f,this);var y=c.listener,S=c.ha||c.src;c.fa&&Ue(c),c=y.call(S,f)}return c}function Zt(c){return c=c[Qo],c instanceof Yr?c:null}var Ir="__closure_events_fn_"+(1e9*Math.random()>>>0);function Xr(c){return typeof c=="function"?c:(c[Ir]||(c[Ir]=function(f){return c.handleEvent(f)}),c[Ir])}function rt(){$e.call(this),this.i=new Yr(this),this.M=this,this.F=null}C(rt,$e),rt.prototype[ft]=!0,rt.prototype.removeEventListener=function(c,f,y,S){je(this,c,f,y,S)};function _t(c,f){var y,S=c.F;if(S)for(y=[];S;S=S.F)y.push(S);if(c=c.M,S=f.type||f,typeof f=="string")f=new q(f,c);else if(f instanceof q)f.target=f.target||c;else{var O=f;f=new q(S,c),j(f,O)}if(O=!0,y)for(var F=y.length-1;0<=F;F--){var H=f.g=y[F];O=ba(H,S,!0,f)&&O}if(H=f.g=c,O=ba(H,S,!0,f)&&O,O=ba(H,S,!1,f)&&O,y)for(F=0;F<y.length;F++)H=f.g=y[F],O=ba(H,S,!1,f)&&O}rt.prototype.N=function(){if(rt.aa.N.call(this),this.i){var c=this.i,f;for(f in c.g){for(var y=c.g[f],S=0;S<y.length;S++)Qr(y[S]);delete c.g[f],c.h--}}this.F=null},rt.prototype.K=function(c,f,y,S){return this.i.add(String(c),f,!1,y,S)},rt.prototype.L=function(c,f,y,S){return this.i.add(String(c),f,!0,y,S)};function ba(c,f,y,S){if(f=c.i.g[String(f)],!f)return!0;f=f.concat();for(var O=!0,F=0;F<f.length;++F){var H=f[F];if(H&&!H.da&&H.capture==y){var Ie=H.listener,lt=H.ha||H.src;H.fa&&Qn(c.i,H),O=Ie.call(lt,S)!==!1&&O}}return O&&!S.defaultPrevented}function nm(c,f,y){if(typeof c=="function")y&&(c=g(c,y));else if(c&&typeof c.handleEvent=="function")c=g(c.handleEvent,c);else throw Error("Invalid listener argument");return 2147483647<Number(f)?-1:l.setTimeout(c,f||0)}function sm(c){c.g=nm(()=>{c.g=null,c.i&&(c.i=!1,sm(c))},c.l);const f=c.h;c.h=null,c.m.apply(null,f)}class CT extends $e{constructor(f,y){super(),this.m=f,this.l=y,this.h=null,this.i=!1,this.g=null}j(f){this.h=arguments,this.g?this.i=!0:sm(this)}N(){super.N(),this.g&&(l.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function Yo(c){$e.call(this),this.h=c,this.g={}}C(Yo,$e);var om=[];function im(c){U(c.g,function(f,y){this.g.hasOwnProperty(y)&&Ue(f)},c),c.g={}}Yo.prototype.N=function(){Yo.aa.N.call(this),im(this)},Yo.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")};var Jc=l.JSON.stringify,kT=l.JSON.parse,ST=class{stringify(c){return l.JSON.stringify(c,void 0)}parse(c){return l.JSON.parse(c,void 0)}};function Zc(){}Zc.prototype.h=null;function am(c){return c.h||(c.h=c.i())}function lm(){}var Xo={OPEN:"a",kb:"b",Ja:"c",wb:"d"};function eu(){q.call(this,"d")}C(eu,q);function tu(){q.call(this,"c")}C(tu,q);var Xn={},cm=null;function va(){return cm=cm||new rt}Xn.La="serverreachability";function um(c){q.call(this,Xn.La,c)}C(um,q);function Jo(c){const f=va();_t(f,new um(f))}Xn.STAT_EVENT="statevent";function dm(c,f){q.call(this,Xn.STAT_EVENT,c),this.stat=f}C(dm,q);function Tt(c){const f=va();_t(f,new dm(f,c))}Xn.Ma="timingevent";function hm(c,f){q.call(this,Xn.Ma,c),this.size=f}C(hm,q);function Zo(c,f){if(typeof c!="function")throw Error("Fn must not be null and must be a function");return l.setTimeout(function(){c()},f)}function ei(){this.g=!0}ei.prototype.xa=function(){this.g=!1};function jT(c,f,y,S,O,F){c.info(function(){if(c.g)if(F)for(var H="",Ie=F.split("&"),lt=0;lt<Ie.length;lt++){var Ee=Ie[lt].split("=");if(1<Ee.length){var mt=Ee[0];Ee=Ee[1];var pt=mt.split("_");H=2<=pt.length&&pt[1]=="type"?H+(mt+"="+Ee+"&"):H+(mt+"=redacted&")}}else H=null;else H=F;return"XMLHTTP REQ ("+S+") [attempt "+O+"]: "+f+`
`+y+`
`+H})}function IT(c,f,y,S,O,F,H){c.info(function(){return"XMLHTTP RESP ("+S+") [ attempt "+O+"]: "+f+`
`+y+`
`+F+" "+H})}function Ms(c,f,y,S){c.info(function(){return"XMLHTTP TEXT ("+f+"): "+RT(c,y)+(S?" "+S:"")})}function AT(c,f){c.info(function(){return"TIMEOUT: "+f})}ei.prototype.info=function(){};function RT(c,f){if(!c.g)return f;if(!f)return null;try{var y=JSON.parse(f);if(y){for(c=0;c<y.length;c++)if(Array.isArray(y[c])){var S=y[c];if(!(2>S.length)){var O=S[1];if(Array.isArray(O)&&!(1>O.length)){var F=O[0];if(F!="noop"&&F!="stop"&&F!="close")for(var H=1;H<O.length;H++)O[H]=""}}}}return Jc(y)}catch{return f}}var wa={NO_ERROR:0,gb:1,tb:2,sb:3,nb:4,rb:5,ub:6,Ia:7,TIMEOUT:8,xb:9},fm={lb:"complete",Hb:"success",Ja:"error",Ia:"abort",zb:"ready",Ab:"readystatechange",TIMEOUT:"timeout",vb:"incrementaldata",yb:"progress",ob:"downloadprogress",Pb:"uploadprogress"},ru;function _a(){}C(_a,Zc),_a.prototype.g=function(){return new XMLHttpRequest},_a.prototype.i=function(){return{}},ru=new _a;function Jr(c,f,y,S){this.j=c,this.i=f,this.l=y,this.R=S||1,this.U=new Yo(this),this.I=45e3,this.H=null,this.o=!1,this.m=this.A=this.v=this.L=this.F=this.S=this.B=null,this.D=[],this.g=null,this.C=0,this.s=this.u=null,this.X=-1,this.J=!1,this.O=0,this.M=null,this.W=this.K=this.T=this.P=!1,this.h=new mm}function mm(){this.i=null,this.g="",this.h=!1}var pm={},nu={};function su(c,f,y){c.L=1,c.v=Ca(Ar(f)),c.m=y,c.P=!0,gm(c,null)}function gm(c,f){c.F=Date.now(),Ta(c),c.A=Ar(c.v);var y=c.A,S=c.R;Array.isArray(S)||(S=[String(S)]),Im(y.i,"t",S),c.C=0,y=c.j.J,c.h=new mm,c.g=Km(c.j,y?f:null,!c.m),0<c.O&&(c.M=new CT(g(c.Y,c,c.g),c.O)),f=c.U,y=c.g,S=c.ca;var O="readystatechange";Array.isArray(O)||(O&&(om[0]=O.toString()),O=om);for(var F=0;F<O.length;F++){var H=fe(y,O[F],S||f.handleEvent,!1,f.h||f);if(!H)break;f.g[H.key]=H}f=c.H?w(c.H):{},c.m?(c.u||(c.u="POST"),f["Content-Type"]="application/x-www-form-urlencoded",c.g.ea(c.A,c.u,c.m,f)):(c.u="GET",c.g.ea(c.A,c.u,null,f)),Jo(),jT(c.i,c.u,c.A,c.l,c.R,c.m)}Jr.prototype.ca=function(c){c=c.target;const f=this.M;f&&Rr(c)==3?f.j():this.Y(c)},Jr.prototype.Y=function(c){try{if(c==this.g)e:{const pt=Rr(this.g);var f=this.g.Ba();const Ls=this.g.Z();if(!(3>pt)&&(pt!=3||this.g&&(this.h.h||this.g.oa()||Lm(this.g)))){this.J||pt!=4||f==7||(f==8||0>=Ls?Jo(3):Jo(2)),ou(this);var y=this.g.Z();this.X=y;t:if(ym(this)){var S=Lm(this.g);c="";var O=S.length,F=Rr(this.g)==4;if(!this.h.i){if(typeof TextDecoder>"u"){Jn(this),ti(this);var H="";break t}this.h.i=new l.TextDecoder}for(f=0;f<O;f++)this.h.h=!0,c+=this.h.i.decode(S[f],{stream:!(F&&f==O-1)});S.length=0,this.h.g+=c,this.C=0,H=this.h.g}else H=this.g.oa();if(this.o=y==200,IT(this.i,this.u,this.A,this.l,this.R,pt,y),this.o){if(this.T&&!this.K){t:{if(this.g){var Ie,lt=this.g;if((Ie=lt.g?lt.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!T(Ie)){var Ee=Ie;break t}}Ee=null}if(y=Ee)Ms(this.i,this.l,y,"Initial handshake response via X-HTTP-Initial-Response"),this.K=!0,iu(this,y);else{this.o=!1,this.s=3,Tt(12),Jn(this),ti(this);break e}}if(this.P){y=!0;let er;for(;!this.J&&this.C<H.length;)if(er=PT(this,H),er==nu){pt==4&&(this.s=4,Tt(14),y=!1),Ms(this.i,this.l,null,"[Incomplete Response]");break}else if(er==pm){this.s=4,Tt(15),Ms(this.i,this.l,H,"[Invalid Chunk]"),y=!1;break}else Ms(this.i,this.l,er,null),iu(this,er);if(ym(this)&&this.C!=0&&(this.h.g=this.h.g.slice(this.C),this.C=0),pt!=4||H.length!=0||this.h.h||(this.s=1,Tt(16),y=!1),this.o=this.o&&y,!y)Ms(this.i,this.l,H,"[Invalid Chunked Response]"),Jn(this),ti(this);else if(0<H.length&&!this.W){this.W=!0;var mt=this.j;mt.g==this&&mt.ba&&!mt.M&&(mt.j.info("Great, no buffering proxy detected. Bytes received: "+H.length),hu(mt),mt.M=!0,Tt(11))}}else Ms(this.i,this.l,H,null),iu(this,H);pt==4&&Jn(this),this.o&&!this.J&&(pt==4?qm(this.j,this):(this.o=!1,Ta(this)))}else YT(this.g),y==400&&0<H.indexOf("Unknown SID")?(this.s=3,Tt(12)):(this.s=0,Tt(13)),Jn(this),ti(this)}}}catch{}finally{}};function ym(c){return c.g?c.u=="GET"&&c.L!=2&&c.j.Ca:!1}function PT(c,f){var y=c.C,S=f.indexOf(`
`,y);return S==-1?nu:(y=Number(f.substring(y,S)),isNaN(y)?pm:(S+=1,S+y>f.length?nu:(f=f.slice(S,S+y),c.C=S+y,f)))}Jr.prototype.cancel=function(){this.J=!0,Jn(this)};function Ta(c){c.S=Date.now()+c.I,xm(c,c.I)}function xm(c,f){if(c.B!=null)throw Error("WatchDog timer not null");c.B=Zo(g(c.ba,c),f)}function ou(c){c.B&&(l.clearTimeout(c.B),c.B=null)}Jr.prototype.ba=function(){this.B=null;const c=Date.now();0<=c-this.S?(AT(this.i,this.A),this.L!=2&&(Jo(),Tt(17)),Jn(this),this.s=2,ti(this)):xm(this,this.S-c)};function ti(c){c.j.G==0||c.J||qm(c.j,c)}function Jn(c){ou(c);var f=c.M;f&&typeof f.ma=="function"&&f.ma(),c.M=null,im(c.U),c.g&&(f=c.g,c.g=null,f.abort(),f.ma())}function iu(c,f){try{var y=c.j;if(y.G!=0&&(y.g==c||au(y.h,c))){if(!c.K&&au(y.h,c)&&y.G==3){try{var S=y.Da.g.parse(f)}catch{S=null}if(Array.isArray(S)&&S.length==3){var O=S;if(O[0]==0){e:if(!y.u){if(y.g)if(y.g.F+3e3<c.F)Ra(y),Ia(y);else break e;du(y),Tt(18)}}else y.za=O[1],0<y.za-y.T&&37500>O[2]&&y.F&&y.v==0&&!y.C&&(y.C=Zo(g(y.Za,y),6e3));if(1>=wm(y.h)&&y.ca){try{y.ca()}catch{}y.ca=void 0}}else es(y,11)}else if((c.K||y.g==c)&&Ra(y),!T(f))for(O=y.Da.g.parse(f),f=0;f<O.length;f++){let Ee=O[f];if(y.T=Ee[0],Ee=Ee[1],y.G==2)if(Ee[0]=="c"){y.K=Ee[1],y.ia=Ee[2];const mt=Ee[3];mt!=null&&(y.la=mt,y.j.info("VER="+y.la));const pt=Ee[4];pt!=null&&(y.Aa=pt,y.j.info("SVER="+y.Aa));const Ls=Ee[5];Ls!=null&&typeof Ls=="number"&&0<Ls&&(S=1.5*Ls,y.L=S,y.j.info("backChannelRequestTimeoutMs_="+S)),S=y;const er=c.g;if(er){const Ma=er.g?er.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(Ma){var F=S.h;F.g||Ma.indexOf("spdy")==-1&&Ma.indexOf("quic")==-1&&Ma.indexOf("h2")==-1||(F.j=F.l,F.g=new Set,F.h&&(lu(F,F.h),F.h=null))}if(S.D){const fu=er.g?er.g.getResponseHeader("X-HTTP-Session-Id"):null;fu&&(S.ya=fu,Oe(S.I,S.D,fu))}}y.G=3,y.l&&y.l.ua(),y.ba&&(y.R=Date.now()-c.F,y.j.info("Handshake RTT: "+y.R+"ms")),S=y;var H=c;if(S.qa=Gm(S,S.J?S.ia:null,S.W),H.K){_m(S.h,H);var Ie=H,lt=S.L;lt&&(Ie.I=lt),Ie.B&&(ou(Ie),Ta(Ie)),S.g=H}else Bm(S);0<y.i.length&&Aa(y)}else Ee[0]!="stop"&&Ee[0]!="close"||es(y,7);else y.G==3&&(Ee[0]=="stop"||Ee[0]=="close"?Ee[0]=="stop"?es(y,7):uu(y):Ee[0]!="noop"&&y.l&&y.l.ta(Ee),y.v=0)}}Jo(4)}catch{}}var MT=class{constructor(c,f){this.g=c,this.map=f}};function bm(c){this.l=c||10,l.PerformanceNavigationTiming?(c=l.performance.getEntriesByType("navigation"),c=0<c.length&&(c[0].nextHopProtocol=="hq"||c[0].nextHopProtocol=="h2")):c=!!(l.chrome&&l.chrome.loadTimes&&l.chrome.loadTimes()&&l.chrome.loadTimes().wasFetchedViaSpdy),this.j=c?this.l:1,this.g=null,1<this.j&&(this.g=new Set),this.h=null,this.i=[]}function vm(c){return c.h?!0:c.g?c.g.size>=c.j:!1}function wm(c){return c.h?1:c.g?c.g.size:0}function au(c,f){return c.h?c.h==f:c.g?c.g.has(f):!1}function lu(c,f){c.g?c.g.add(f):c.h=f}function _m(c,f){c.h&&c.h==f?c.h=null:c.g&&c.g.has(f)&&c.g.delete(f)}bm.prototype.cancel=function(){if(this.i=Tm(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&this.g.size!==0){for(const c of this.g.values())c.cancel();this.g.clear()}};function Tm(c){if(c.h!=null)return c.i.concat(c.h.D);if(c.g!=null&&c.g.size!==0){let f=c.i;for(const y of c.g.values())f=f.concat(y.D);return f}return x(c.i)}function DT(c){if(c.V&&typeof c.V=="function")return c.V();if(typeof Map<"u"&&c instanceof Map||typeof Set<"u"&&c instanceof Set)return Array.from(c.values());if(typeof c=="string")return c.split("");if(u(c)){for(var f=[],y=c.length,S=0;S<y;S++)f.push(c[S]);return f}f=[],y=0;for(S in c)f[y++]=c[S];return f}function OT(c){if(c.na&&typeof c.na=="function")return c.na();if(!c.V||typeof c.V!="function"){if(typeof Map<"u"&&c instanceof Map)return Array.from(c.keys());if(!(typeof Set<"u"&&c instanceof Set)){if(u(c)||typeof c=="string"){var f=[];c=c.length;for(var y=0;y<c;y++)f.push(y);return f}f=[],y=0;for(const S in c)f[y++]=S;return f}}}function Em(c,f){if(c.forEach&&typeof c.forEach=="function")c.forEach(f,void 0);else if(u(c)||typeof c=="string")Array.prototype.forEach.call(c,f,void 0);else for(var y=OT(c),S=DT(c),O=S.length,F=0;F<O;F++)f.call(void 0,S[F],y&&y[F],c)}var Nm=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function LT(c,f){if(c){c=c.split("&");for(var y=0;y<c.length;y++){var S=c[y].indexOf("="),O=null;if(0<=S){var F=c[y].substring(0,S);O=c[y].substring(S+1)}else F=c[y];f(F,O?decodeURIComponent(O.replace(/\+/g," ")):"")}}}function Zn(c){if(this.g=this.o=this.j="",this.s=null,this.m=this.l="",this.h=!1,c instanceof Zn){this.h=c.h,Ea(this,c.j),this.o=c.o,this.g=c.g,Na(this,c.s),this.l=c.l;var f=c.i,y=new si;y.i=f.i,f.g&&(y.g=new Map(f.g),y.h=f.h),Cm(this,y),this.m=c.m}else c&&(f=String(c).match(Nm))?(this.h=!1,Ea(this,f[1]||"",!0),this.o=ri(f[2]||""),this.g=ri(f[3]||"",!0),Na(this,f[4]),this.l=ri(f[5]||"",!0),Cm(this,f[6]||"",!0),this.m=ri(f[7]||"")):(this.h=!1,this.i=new si(null,this.h))}Zn.prototype.toString=function(){var c=[],f=this.j;f&&c.push(ni(f,km,!0),":");var y=this.g;return(y||f=="file")&&(c.push("//"),(f=this.o)&&c.push(ni(f,km,!0),"@"),c.push(encodeURIComponent(String(y)).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),y=this.s,y!=null&&c.push(":",String(y))),(y=this.l)&&(this.g&&y.charAt(0)!="/"&&c.push("/"),c.push(ni(y,y.charAt(0)=="/"?UT:FT,!0))),(y=this.i.toString())&&c.push("?",y),(y=this.m)&&c.push("#",ni(y,BT)),c.join("")};function Ar(c){return new Zn(c)}function Ea(c,f,y){c.j=y?ri(f,!0):f,c.j&&(c.j=c.j.replace(/:$/,""))}function Na(c,f){if(f){if(f=Number(f),isNaN(f)||0>f)throw Error("Bad port number "+f);c.s=f}else c.s=null}function Cm(c,f,y){f instanceof si?(c.i=f,zT(c.i,c.h)):(y||(f=ni(f,$T)),c.i=new si(f,c.h))}function Oe(c,f,y){c.i.set(f,y)}function Ca(c){return Oe(c,"zx",Math.floor(2147483648*Math.random()).toString(36)+Math.abs(Math.floor(2147483648*Math.random())^Date.now()).toString(36)),c}function ri(c,f){return c?f?decodeURI(c.replace(/%25/g,"%2525")):decodeURIComponent(c):""}function ni(c,f,y){return typeof c=="string"?(c=encodeURI(c).replace(f,VT),y&&(c=c.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),c):null}function VT(c){return c=c.charCodeAt(0),"%"+(c>>4&15).toString(16)+(c&15).toString(16)}var km=/[#\/\?@]/g,FT=/[#\?:]/g,UT=/[#\?]/g,$T=/[#\?@]/g,BT=/#/g;function si(c,f){this.h=this.g=null,this.i=c||null,this.j=!!f}function Zr(c){c.g||(c.g=new Map,c.h=0,c.i&&LT(c.i,function(f,y){c.add(decodeURIComponent(f.replace(/\+/g," ")),y)}))}r=si.prototype,r.add=function(c,f){Zr(this),this.i=null,c=Ds(this,c);var y=this.g.get(c);return y||this.g.set(c,y=[]),y.push(f),this.h+=1,this};function Sm(c,f){Zr(c),f=Ds(c,f),c.g.has(f)&&(c.i=null,c.h-=c.g.get(f).length,c.g.delete(f))}function jm(c,f){return Zr(c),f=Ds(c,f),c.g.has(f)}r.forEach=function(c,f){Zr(this),this.g.forEach(function(y,S){y.forEach(function(O){c.call(f,O,S,this)},this)},this)},r.na=function(){Zr(this);const c=Array.from(this.g.values()),f=Array.from(this.g.keys()),y=[];for(let S=0;S<f.length;S++){const O=c[S];for(let F=0;F<O.length;F++)y.push(f[S])}return y},r.V=function(c){Zr(this);let f=[];if(typeof c=="string")jm(this,c)&&(f=f.concat(this.g.get(Ds(this,c))));else{c=Array.from(this.g.values());for(let y=0;y<c.length;y++)f=f.concat(c[y])}return f},r.set=function(c,f){return Zr(this),this.i=null,c=Ds(this,c),jm(this,c)&&(this.h-=this.g.get(c).length),this.g.set(c,[f]),this.h+=1,this},r.get=function(c,f){return c?(c=this.V(c),0<c.length?String(c[0]):f):f};function Im(c,f,y){Sm(c,f),0<y.length&&(c.i=null,c.g.set(Ds(c,f),x(y)),c.h+=y.length)}r.toString=function(){if(this.i)return this.i;if(!this.g)return"";const c=[],f=Array.from(this.g.keys());for(var y=0;y<f.length;y++){var S=f[y];const F=encodeURIComponent(String(S)),H=this.V(S);for(S=0;S<H.length;S++){var O=F;H[S]!==""&&(O+="="+encodeURIComponent(String(H[S]))),c.push(O)}}return this.i=c.join("&")};function Ds(c,f){return f=String(f),c.j&&(f=f.toLowerCase()),f}function zT(c,f){f&&!c.j&&(Zr(c),c.i=null,c.g.forEach(function(y,S){var O=S.toLowerCase();S!=O&&(Sm(this,S),Im(this,O,y))},c)),c.j=f}function qT(c,f){const y=new ei;if(l.Image){const S=new Image;S.onload=b(en,y,"TestLoadImage: loaded",!0,f,S),S.onerror=b(en,y,"TestLoadImage: error",!1,f,S),S.onabort=b(en,y,"TestLoadImage: abort",!1,f,S),S.ontimeout=b(en,y,"TestLoadImage: timeout",!1,f,S),l.setTimeout(function(){S.ontimeout&&S.ontimeout()},1e4),S.src=c}else f(!1)}function HT(c,f){const y=new ei,S=new AbortController,O=setTimeout(()=>{S.abort(),en(y,"TestPingServer: timeout",!1,f)},1e4);fetch(c,{signal:S.signal}).then(F=>{clearTimeout(O),F.ok?en(y,"TestPingServer: ok",!0,f):en(y,"TestPingServer: server error",!1,f)}).catch(()=>{clearTimeout(O),en(y,"TestPingServer: error",!1,f)})}function en(c,f,y,S,O){try{O&&(O.onload=null,O.onerror=null,O.onabort=null,O.ontimeout=null),S(y)}catch{}}function WT(){this.g=new ST}function GT(c,f,y){const S=y||"";try{Em(c,function(O,F){let H=O;d(O)&&(H=Jc(O)),f.push(S+F+"="+encodeURIComponent(H))})}catch(O){throw f.push(S+"type="+encodeURIComponent("_badmap")),O}}function ka(c){this.l=c.Ub||null,this.j=c.eb||!1}C(ka,Zc),ka.prototype.g=function(){return new Sa(this.l,this.j)},ka.prototype.i=function(c){return function(){return c}}({});function Sa(c,f){rt.call(this),this.D=c,this.o=f,this.m=void 0,this.status=this.readyState=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.u=new Headers,this.h=null,this.B="GET",this.A="",this.g=!1,this.v=this.j=this.l=null}C(Sa,rt),r=Sa.prototype,r.open=function(c,f){if(this.readyState!=0)throw this.abort(),Error("Error reopening a connection");this.B=c,this.A=f,this.readyState=1,ii(this)},r.send=function(c){if(this.readyState!=1)throw this.abort(),Error("need to call open() first. ");this.g=!0;const f={headers:this.u,method:this.B,credentials:this.m,cache:void 0};c&&(f.body=c),(this.D||l).fetch(new Request(this.A,f)).then(this.Sa.bind(this),this.ga.bind(this))},r.abort=function(){this.response=this.responseText="",this.u=new Headers,this.status=0,this.j&&this.j.cancel("Request was aborted.").catch(()=>{}),1<=this.readyState&&this.g&&this.readyState!=4&&(this.g=!1,oi(this)),this.readyState=0},r.Sa=function(c){if(this.g&&(this.l=c,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=c.headers,this.readyState=2,ii(this)),this.g&&(this.readyState=3,ii(this),this.g)))if(this.responseType==="arraybuffer")c.arrayBuffer().then(this.Qa.bind(this),this.ga.bind(this));else if(typeof l.ReadableStream<"u"&&"body"in c){if(this.j=c.body.getReader(),this.o){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.v=new TextDecoder;Am(this)}else c.text().then(this.Ra.bind(this),this.ga.bind(this))};function Am(c){c.j.read().then(c.Pa.bind(c)).catch(c.ga.bind(c))}r.Pa=function(c){if(this.g){if(this.o&&c.value)this.response.push(c.value);else if(!this.o){var f=c.value?c.value:new Uint8Array(0);(f=this.v.decode(f,{stream:!c.done}))&&(this.response=this.responseText+=f)}c.done?oi(this):ii(this),this.readyState==3&&Am(this)}},r.Ra=function(c){this.g&&(this.response=this.responseText=c,oi(this))},r.Qa=function(c){this.g&&(this.response=c,oi(this))},r.ga=function(){this.g&&oi(this)};function oi(c){c.readyState=4,c.l=null,c.j=null,c.v=null,ii(c)}r.setRequestHeader=function(c,f){this.u.append(c,f)},r.getResponseHeader=function(c){return this.h&&this.h.get(c.toLowerCase())||""},r.getAllResponseHeaders=function(){if(!this.h)return"";const c=[],f=this.h.entries();for(var y=f.next();!y.done;)y=y.value,c.push(y[0]+": "+y[1]),y=f.next();return c.join(`\r
`)};function ii(c){c.onreadystatechange&&c.onreadystatechange.call(c)}Object.defineProperty(Sa.prototype,"withCredentials",{get:function(){return this.m==="include"},set:function(c){this.m=c?"include":"same-origin"}});function Rm(c){let f="";return U(c,function(y,S){f+=S,f+=":",f+=y,f+=`\r
`}),f}function cu(c,f,y){e:{for(S in y){var S=!1;break e}S=!0}S||(y=Rm(y),typeof c=="string"?y!=null&&encodeURIComponent(String(y)):Oe(c,f,y))}function qe(c){rt.call(this),this.headers=new Map,this.o=c||null,this.h=!1,this.v=this.g=null,this.D="",this.m=0,this.l="",this.j=this.B=this.u=this.A=!1,this.I=null,this.H="",this.J=!1}C(qe,rt);var KT=/^https?$/i,QT=["POST","PUT"];r=qe.prototype,r.Ha=function(c){this.J=c},r.ea=function(c,f,y,S){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.D+"; newUri="+c);f=f?f.toUpperCase():"GET",this.D=c,this.l="",this.m=0,this.A=!1,this.h=!0,this.g=this.o?this.o.g():ru.g(),this.v=this.o?am(this.o):am(ru),this.g.onreadystatechange=g(this.Ea,this);try{this.B=!0,this.g.open(f,String(c),!0),this.B=!1}catch(F){Pm(this,F);return}if(c=y||"",y=new Map(this.headers),S)if(Object.getPrototypeOf(S)===Object.prototype)for(var O in S)y.set(O,S[O]);else if(typeof S.keys=="function"&&typeof S.get=="function")for(const F of S.keys())y.set(F,S.get(F));else throw Error("Unknown input type for opt_headers: "+String(S));S=Array.from(y.keys()).find(F=>F.toLowerCase()=="content-type"),O=l.FormData&&c instanceof l.FormData,!(0<=Array.prototype.indexOf.call(QT,f,void 0))||S||O||y.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");for(const[F,H]of y)this.g.setRequestHeader(F,H);this.H&&(this.g.responseType=this.H),"withCredentials"in this.g&&this.g.withCredentials!==this.J&&(this.g.withCredentials=this.J);try{Om(this),this.u=!0,this.g.send(c),this.u=!1}catch(F){Pm(this,F)}};function Pm(c,f){c.h=!1,c.g&&(c.j=!0,c.g.abort(),c.j=!1),c.l=f,c.m=5,Mm(c),ja(c)}function Mm(c){c.A||(c.A=!0,_t(c,"complete"),_t(c,"error"))}r.abort=function(c){this.g&&this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1,this.m=c||7,_t(this,"complete"),_t(this,"abort"),ja(this))},r.N=function(){this.g&&(this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1),ja(this,!0)),qe.aa.N.call(this)},r.Ea=function(){this.s||(this.B||this.u||this.j?Dm(this):this.bb())},r.bb=function(){Dm(this)};function Dm(c){if(c.h&&typeof a<"u"&&(!c.v[1]||Rr(c)!=4||c.Z()!=2)){if(c.u&&Rr(c)==4)nm(c.Ea,0,c);else if(_t(c,"readystatechange"),Rr(c)==4){c.h=!1;try{const H=c.Z();e:switch(H){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var f=!0;break e;default:f=!1}var y;if(!(y=f)){var S;if(S=H===0){var O=String(c.D).match(Nm)[1]||null;!O&&l.self&&l.self.location&&(O=l.self.location.protocol.slice(0,-1)),S=!KT.test(O?O.toLowerCase():"")}y=S}if(y)_t(c,"complete"),_t(c,"success");else{c.m=6;try{var F=2<Rr(c)?c.g.statusText:""}catch{F=""}c.l=F+" ["+c.Z()+"]",Mm(c)}}finally{ja(c)}}}}function ja(c,f){if(c.g){Om(c);const y=c.g,S=c.v[0]?()=>{}:null;c.g=null,c.v=null,f||_t(c,"ready");try{y.onreadystatechange=S}catch{}}}function Om(c){c.I&&(l.clearTimeout(c.I),c.I=null)}r.isActive=function(){return!!this.g};function Rr(c){return c.g?c.g.readyState:0}r.Z=function(){try{return 2<Rr(this)?this.g.status:-1}catch{return-1}},r.oa=function(){try{return this.g?this.g.responseText:""}catch{return""}},r.Oa=function(c){if(this.g){var f=this.g.responseText;return c&&f.indexOf(c)==0&&(f=f.substring(c.length)),kT(f)}};function Lm(c){try{if(!c.g)return null;if("response"in c.g)return c.g.response;switch(c.H){case"":case"text":return c.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in c.g)return c.g.mozResponseArrayBuffer}return null}catch{return null}}function YT(c){const f={};c=(c.g&&2<=Rr(c)&&c.g.getAllResponseHeaders()||"").split(`\r
`);for(let S=0;S<c.length;S++){if(T(c[S]))continue;var y=_(c[S]);const O=y[0];if(y=y[1],typeof y!="string")continue;y=y.trim();const F=f[O]||[];f[O]=F,F.push(y)}A(f,function(S){return S.join(", ")})}r.Ba=function(){return this.m},r.Ka=function(){return typeof this.l=="string"?this.l:String(this.l)};function ai(c,f,y){return y&&y.internalChannelParams&&y.internalChannelParams[c]||f}function Vm(c){this.Aa=0,this.i=[],this.j=new ei,this.ia=this.qa=this.I=this.W=this.g=this.ya=this.D=this.H=this.m=this.S=this.o=null,this.Ya=this.U=0,this.Va=ai("failFast",!1,c),this.F=this.C=this.u=this.s=this.l=null,this.X=!0,this.za=this.T=-1,this.Y=this.v=this.B=0,this.Ta=ai("baseRetryDelayMs",5e3,c),this.cb=ai("retryDelaySeedMs",1e4,c),this.Wa=ai("forwardChannelMaxRetries",2,c),this.wa=ai("forwardChannelRequestTimeoutMs",2e4,c),this.pa=c&&c.xmlHttpFactory||void 0,this.Xa=c&&c.Tb||void 0,this.Ca=c&&c.useFetchStreams||!1,this.L=void 0,this.J=c&&c.supportsCrossDomainXhr||!1,this.K="",this.h=new bm(c&&c.concurrentRequestLimit),this.Da=new WT,this.P=c&&c.fastHandshake||!1,this.O=c&&c.encodeInitMessageHeaders||!1,this.P&&this.O&&(this.O=!1),this.Ua=c&&c.Rb||!1,c&&c.xa&&this.j.xa(),c&&c.forceLongPolling&&(this.X=!1),this.ba=!this.P&&this.X&&c&&c.detectBufferingProxy||!1,this.ja=void 0,c&&c.longPollingTimeout&&0<c.longPollingTimeout&&(this.ja=c.longPollingTimeout),this.ca=void 0,this.R=0,this.M=!1,this.ka=this.A=null}r=Vm.prototype,r.la=8,r.G=1,r.connect=function(c,f,y,S){Tt(0),this.W=c,this.H=f||{},y&&S!==void 0&&(this.H.OSID=y,this.H.OAID=S),this.F=this.X,this.I=Gm(this,null,this.W),Aa(this)};function uu(c){if(Fm(c),c.G==3){var f=c.U++,y=Ar(c.I);if(Oe(y,"SID",c.K),Oe(y,"RID",f),Oe(y,"TYPE","terminate"),li(c,y),f=new Jr(c,c.j,f),f.L=2,f.v=Ca(Ar(y)),y=!1,l.navigator&&l.navigator.sendBeacon)try{y=l.navigator.sendBeacon(f.v.toString(),"")}catch{}!y&&l.Image&&(new Image().src=f.v,y=!0),y||(f.g=Km(f.j,null),f.g.ea(f.v)),f.F=Date.now(),Ta(f)}Wm(c)}function Ia(c){c.g&&(hu(c),c.g.cancel(),c.g=null)}function Fm(c){Ia(c),c.u&&(l.clearTimeout(c.u),c.u=null),Ra(c),c.h.cancel(),c.s&&(typeof c.s=="number"&&l.clearTimeout(c.s),c.s=null)}function Aa(c){if(!vm(c.h)&&!c.s){c.s=!0;var f=c.Ga;Z||Y(),P||(Z(),P=!0),z.add(f,c),c.B=0}}function XT(c,f){return wm(c.h)>=c.h.j-(c.s?1:0)?!1:c.s?(c.i=f.D.concat(c.i),!0):c.G==1||c.G==2||c.B>=(c.Va?0:c.Wa)?!1:(c.s=Zo(g(c.Ga,c,f),Hm(c,c.B)),c.B++,!0)}r.Ga=function(c){if(this.s)if(this.s=null,this.G==1){if(!c){this.U=Math.floor(1e5*Math.random()),c=this.U++;const O=new Jr(this,this.j,c);let F=this.o;if(this.S&&(F?(F=w(F),j(F,this.S)):F=this.S),this.m!==null||this.O||(O.H=F,F=null),this.P)e:{for(var f=0,y=0;y<this.i.length;y++){t:{var S=this.i[y];if("__data__"in S.map&&(S=S.map.__data__,typeof S=="string")){S=S.length;break t}S=void 0}if(S===void 0)break;if(f+=S,4096<f){f=y;break e}if(f===4096||y===this.i.length-1){f=y+1;break e}}f=1e3}else f=1e3;f=$m(this,O,f),y=Ar(this.I),Oe(y,"RID",c),Oe(y,"CVER",22),this.D&&Oe(y,"X-HTTP-Session-Id",this.D),li(this,y),F&&(this.O?f="headers="+encodeURIComponent(String(Rm(F)))+"&"+f:this.m&&cu(y,this.m,F)),lu(this.h,O),this.Ua&&Oe(y,"TYPE","init"),this.P?(Oe(y,"$req",f),Oe(y,"SID","null"),O.T=!0,su(O,y,null)):su(O,y,f),this.G=2}}else this.G==3&&(c?Um(this,c):this.i.length==0||vm(this.h)||Um(this))};function Um(c,f){var y;f?y=f.l:y=c.U++;const S=Ar(c.I);Oe(S,"SID",c.K),Oe(S,"RID",y),Oe(S,"AID",c.T),li(c,S),c.m&&c.o&&cu(S,c.m,c.o),y=new Jr(c,c.j,y,c.B+1),c.m===null&&(y.H=c.o),f&&(c.i=f.D.concat(c.i)),f=$m(c,y,1e3),y.I=Math.round(.5*c.wa)+Math.round(.5*c.wa*Math.random()),lu(c.h,y),su(y,S,f)}function li(c,f){c.H&&U(c.H,function(y,S){Oe(f,S,y)}),c.l&&Em({},function(y,S){Oe(f,S,y)})}function $m(c,f,y){y=Math.min(c.i.length,y);var S=c.l?g(c.l.Na,c.l,c):null;e:{var O=c.i;let F=-1;for(;;){const H=["count="+y];F==-1?0<y?(F=O[0].g,H.push("ofs="+F)):F=0:H.push("ofs="+F);let Ie=!0;for(let lt=0;lt<y;lt++){let Ee=O[lt].g;const mt=O[lt].map;if(Ee-=F,0>Ee)F=Math.max(0,O[lt].g-100),Ie=!1;else try{GT(mt,H,"req"+Ee+"_")}catch{S&&S(mt)}}if(Ie){S=H.join("&");break e}}}return c=c.i.splice(0,y),f.D=c,S}function Bm(c){if(!c.g&&!c.u){c.Y=1;var f=c.Fa;Z||Y(),P||(Z(),P=!0),z.add(f,c),c.v=0}}function du(c){return c.g||c.u||3<=c.v?!1:(c.Y++,c.u=Zo(g(c.Fa,c),Hm(c,c.v)),c.v++,!0)}r.Fa=function(){if(this.u=null,zm(this),this.ba&&!(this.M||this.g==null||0>=this.R)){var c=2*this.R;this.j.info("BP detection timer enabled: "+c),this.A=Zo(g(this.ab,this),c)}},r.ab=function(){this.A&&(this.A=null,this.j.info("BP detection timeout reached."),this.j.info("Buffering proxy detected and switch to long-polling!"),this.F=!1,this.M=!0,Tt(10),Ia(this),zm(this))};function hu(c){c.A!=null&&(l.clearTimeout(c.A),c.A=null)}function zm(c){c.g=new Jr(c,c.j,"rpc",c.Y),c.m===null&&(c.g.H=c.o),c.g.O=0;var f=Ar(c.qa);Oe(f,"RID","rpc"),Oe(f,"SID",c.K),Oe(f,"AID",c.T),Oe(f,"CI",c.F?"0":"1"),!c.F&&c.ja&&Oe(f,"TO",c.ja),Oe(f,"TYPE","xmlhttp"),li(c,f),c.m&&c.o&&cu(f,c.m,c.o),c.L&&(c.g.I=c.L);var y=c.g;c=c.ia,y.L=1,y.v=Ca(Ar(f)),y.m=null,y.P=!0,gm(y,c)}r.Za=function(){this.C!=null&&(this.C=null,Ia(this),du(this),Tt(19))};function Ra(c){c.C!=null&&(l.clearTimeout(c.C),c.C=null)}function qm(c,f){var y=null;if(c.g==f){Ra(c),hu(c),c.g=null;var S=2}else if(au(c.h,f))y=f.D,_m(c.h,f),S=1;else return;if(c.G!=0){if(f.o)if(S==1){y=f.m?f.m.length:0,f=Date.now()-f.F;var O=c.B;S=va(),_t(S,new hm(S,y)),Aa(c)}else Bm(c);else if(O=f.s,O==3||O==0&&0<f.X||!(S==1&&XT(c,f)||S==2&&du(c)))switch(y&&0<y.length&&(f=c.h,f.i=f.i.concat(y)),O){case 1:es(c,5);break;case 4:es(c,10);break;case 3:es(c,6);break;default:es(c,2)}}}function Hm(c,f){let y=c.Ta+Math.floor(Math.random()*c.cb);return c.isActive()||(y*=2),y*f}function es(c,f){if(c.j.info("Error code "+f),f==2){var y=g(c.fb,c),S=c.Xa;const O=!S;S=new Zn(S||"//www.google.com/images/cleardot.gif"),l.location&&l.location.protocol=="http"||Ea(S,"https"),Ca(S),O?qT(S.toString(),y):HT(S.toString(),y)}else Tt(2);c.G=0,c.l&&c.l.sa(f),Wm(c),Fm(c)}r.fb=function(c){c?(this.j.info("Successfully pinged google.com"),Tt(2)):(this.j.info("Failed to ping google.com"),Tt(1))};function Wm(c){if(c.G=0,c.ka=[],c.l){const f=Tm(c.h);(f.length!=0||c.i.length!=0)&&(v(c.ka,f),v(c.ka,c.i),c.h.i.length=0,x(c.i),c.i.length=0),c.l.ra()}}function Gm(c,f,y){var S=y instanceof Zn?Ar(y):new Zn(y);if(S.g!="")f&&(S.g=f+"."+S.g),Na(S,S.s);else{var O=l.location;S=O.protocol,f=f?f+"."+O.hostname:O.hostname,O=+O.port;var F=new Zn(null);S&&Ea(F,S),f&&(F.g=f),O&&Na(F,O),y&&(F.l=y),S=F}return y=c.D,f=c.ya,y&&f&&Oe(S,y,f),Oe(S,"VER",c.la),li(c,S),S}function Km(c,f,y){if(f&&!c.J)throw Error("Can't create secondary domain capable XhrIo object.");return f=c.Ca&&!c.pa?new qe(new ka({eb:y})):new qe(c.pa),f.Ha(c.J),f}r.isActive=function(){return!!this.l&&this.l.isActive(this)};function Qm(){}r=Qm.prototype,r.ua=function(){},r.ta=function(){},r.sa=function(){},r.ra=function(){},r.isActive=function(){return!0},r.Na=function(){};function Pa(){}Pa.prototype.g=function(c,f){return new Ft(c,f)};function Ft(c,f){rt.call(this),this.g=new Vm(f),this.l=c,this.h=f&&f.messageUrlParams||null,c=f&&f.messageHeaders||null,f&&f.clientProtocolHeaderRequired&&(c?c["X-Client-Protocol"]="webchannel":c={"X-Client-Protocol":"webchannel"}),this.g.o=c,c=f&&f.initMessageHeaders||null,f&&f.messageContentType&&(c?c["X-WebChannel-Content-Type"]=f.messageContentType:c={"X-WebChannel-Content-Type":f.messageContentType}),f&&f.va&&(c?c["X-WebChannel-Client-Profile"]=f.va:c={"X-WebChannel-Client-Profile":f.va}),this.g.S=c,(c=f&&f.Sb)&&!T(c)&&(this.g.m=c),this.v=f&&f.supportsCrossDomainXhr||!1,this.u=f&&f.sendRawJson||!1,(f=f&&f.httpSessionIdParam)&&!T(f)&&(this.g.D=f,c=this.h,c!==null&&f in c&&(c=this.h,f in c&&delete c[f])),this.j=new Os(this)}C(Ft,rt),Ft.prototype.m=function(){this.g.l=this.j,this.v&&(this.g.J=!0),this.g.connect(this.l,this.h||void 0)},Ft.prototype.close=function(){uu(this.g)},Ft.prototype.o=function(c){var f=this.g;if(typeof c=="string"){var y={};y.__data__=c,c=y}else this.u&&(y={},y.__data__=Jc(c),c=y);f.i.push(new MT(f.Ya++,c)),f.G==3&&Aa(f)},Ft.prototype.N=function(){this.g.l=null,delete this.j,uu(this.g),delete this.g,Ft.aa.N.call(this)};function Ym(c){eu.call(this),c.__headers__&&(this.headers=c.__headers__,this.statusCode=c.__status__,delete c.__headers__,delete c.__status__);var f=c.__sm__;if(f){e:{for(const y in f){c=y;break e}c=void 0}(this.i=c)&&(c=this.i,f=f!==null&&c in f?f[c]:void 0),this.data=f}else this.data=c}C(Ym,eu);function Xm(){tu.call(this),this.status=1}C(Xm,tu);function Os(c){this.g=c}C(Os,Qm),Os.prototype.ua=function(){_t(this.g,"a")},Os.prototype.ta=function(c){_t(this.g,new Ym(c))},Os.prototype.sa=function(c){_t(this.g,new Xm)},Os.prototype.ra=function(){_t(this.g,"b")},Pa.prototype.createWebChannel=Pa.prototype.g,Ft.prototype.send=Ft.prototype.o,Ft.prototype.open=Ft.prototype.m,Ft.prototype.close=Ft.prototype.close,v0=function(){return new Pa},b0=function(){return va()},x0=Xn,od={mb:0,pb:1,qb:2,Jb:3,Ob:4,Lb:5,Mb:6,Kb:7,Ib:8,Nb:9,PROXY:10,NOPROXY:11,Gb:12,Cb:13,Db:14,Bb:15,Eb:16,Fb:17,ib:18,hb:19,jb:20},wa.NO_ERROR=0,wa.TIMEOUT=8,wa.HTTP_ERROR=6,tl=wa,fm.COMPLETE="complete",y0=fm,lm.EventType=Xo,Xo.OPEN="a",Xo.CLOSE="b",Xo.ERROR="c",Xo.MESSAGE="d",rt.prototype.listen=rt.prototype.K,xi=lm,qe.prototype.listenOnce=qe.prototype.L,qe.prototype.getLastError=qe.prototype.Ka,qe.prototype.getLastErrorCode=qe.prototype.Ba,qe.prototype.getStatus=qe.prototype.Z,qe.prototype.getResponseJson=qe.prototype.Oa,qe.prototype.getResponseText=qe.prototype.oa,qe.prototype.send=qe.prototype.ea,qe.prototype.setWithCredentials=qe.prototype.Ha,g0=qe}).apply(typeof Va<"u"?Va:typeof self<"u"?self:typeof window<"u"?window:{});const Ap="@firebase/firestore",Rp="4.8.0";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let xt=class{constructor(e){this.uid=e}isAuthenticated(){return this.uid!=null}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(e){return e.uid===this.uid}};xt.UNAUTHENTICATED=new xt(null),xt.GOOGLE_CREDENTIALS=new xt("google-credentials-uid"),xt.FIRST_PARTY=new xt("first-party-uid"),xt.MOCK_USER=new xt("mock-user");/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Lo="11.10.0";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ws=new sc("@firebase/firestore");function Fs(){return ws.logLevel}function Q(r,...e){if(ws.logLevel<=be.DEBUG){const t=e.map(kh);ws.debug(`Firestore (${Lo}): ${r}`,...t)}}function qr(r,...e){if(ws.logLevel<=be.ERROR){const t=e.map(kh);ws.error(`Firestore (${Lo}): ${r}`,...t)}}function In(r,...e){if(ws.logLevel<=be.WARN){const t=e.map(kh);ws.warn(`Firestore (${Lo}): ${r}`,...t)}}function kh(r){if(typeof r=="string")return r;try{/**
* @license
* Copyright 2020 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/return function(t){return JSON.stringify(t)}(r)}catch{return r}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ae(r,e,t){let n="Unexpected state";typeof e=="string"?n=e:t=e,w0(r,n,t)}function w0(r,e,t){let n=`FIRESTORE (${Lo}) INTERNAL ASSERTION FAILED: ${e} (ID: ${r.toString(16)})`;if(t!==void 0)try{n+=" CONTEXT: "+JSON.stringify(t)}catch{n+=" CONTEXT: "+t}throw qr(n),new Error(n)}function Ce(r,e,t,n){let s="Unexpected state";typeof t=="string"?s=t:n=t,r||w0(e,s,n)}function de(r,e){return r}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const $={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class G extends fr{constructor(e,t){super(e,t),this.code=e,this.message=t,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Cn{constructor(){this.promise=new Promise((e,t)=>{this.resolve=e,this.reject=t})}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _0{constructor(e,t){this.user=t,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${e}`)}}class wS{getToken(){return Promise.resolve(null)}invalidateToken(){}start(e,t){e.enqueueRetryable(()=>t(xt.UNAUTHENTICATED))}shutdown(){}}class _S{constructor(e){this.token=e,this.changeListener=null}getToken(){return Promise.resolve(this.token)}invalidateToken(){}start(e,t){this.changeListener=t,e.enqueueRetryable(()=>t(this.token.user))}shutdown(){this.changeListener=null}}class TS{constructor(e){this.t=e,this.currentUser=xt.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(e,t){Ce(this.o===void 0,42304);let n=this.i;const s=u=>this.i!==n?(n=this.i,t(u)):Promise.resolve();let i=new Cn;this.o=()=>{this.i++,this.currentUser=this.u(),i.resolve(),i=new Cn,e.enqueueRetryable(()=>s(this.currentUser))};const a=()=>{const u=i;e.enqueueRetryable(async()=>{await u.promise,await s(this.currentUser)})},l=u=>{Q("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=u,this.o&&(this.auth.addAuthTokenListener(this.o),a())};this.t.onInit(u=>l(u)),setTimeout(()=>{if(!this.auth){const u=this.t.getImmediate({optional:!0});u?l(u):(Q("FirebaseAuthCredentialsProvider","Auth not yet detected"),i.resolve(),i=new Cn)}},0),a()}getToken(){const e=this.i,t=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(t).then(n=>this.i!==e?(Q("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):n?(Ce(typeof n.accessToken=="string",31837,{l:n}),new _0(n.accessToken,this.currentUser)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.o&&this.auth.removeAuthTokenListener(this.o),this.o=void 0}u(){const e=this.auth&&this.auth.getUid();return Ce(e===null||typeof e=="string",2055,{h:e}),new xt(e)}}class ES{constructor(e,t,n){this.P=e,this.T=t,this.I=n,this.type="FirstParty",this.user=xt.FIRST_PARTY,this.A=new Map}R(){return this.I?this.I():null}get headers(){this.A.set("X-Goog-AuthUser",this.P);const e=this.R();return e&&this.A.set("Authorization",e),this.T&&this.A.set("X-Goog-Iam-Authorization-Token",this.T),this.A}}class NS{constructor(e,t,n){this.P=e,this.T=t,this.I=n}getToken(){return Promise.resolve(new ES(this.P,this.T,this.I))}start(e,t){e.enqueueRetryable(()=>t(xt.FIRST_PARTY))}shutdown(){}invalidateToken(){}}class Pp{constructor(e){this.value=e,this.type="AppCheck",this.headers=new Map,e&&e.length>0&&this.headers.set("x-firebase-appcheck",this.value)}}class CS{constructor(e,t){this.V=t,this.forceRefresh=!1,this.appCheck=null,this.m=null,this.p=null,Mt(e)&&e.settings.appCheckToken&&(this.p=e.settings.appCheckToken)}start(e,t){Ce(this.o===void 0,3512);const n=i=>{i.error!=null&&Q("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${i.error.message}`);const a=i.token!==this.m;return this.m=i.token,Q("FirebaseAppCheckTokenProvider",`Received ${a?"new":"existing"} token.`),a?t(i.token):Promise.resolve()};this.o=i=>{e.enqueueRetryable(()=>n(i))};const s=i=>{Q("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=i,this.o&&this.appCheck.addTokenListener(this.o)};this.V.onInit(i=>s(i)),setTimeout(()=>{if(!this.appCheck){const i=this.V.getImmediate({optional:!0});i?s(i):Q("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}},0)}getToken(){if(this.p)return Promise.resolve(new Pp(this.p));const e=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(e).then(t=>t?(Ce(typeof t.token=="string",44558,{tokenResult:t}),this.m=t.token,new Pp(t.token)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.o&&this.appCheck.removeTokenListener(this.o),this.o=void 0}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function kS(r){const e=typeof self<"u"&&(self.crypto||self.msCrypto),t=new Uint8Array(r);if(e&&typeof e.getRandomValues=="function")e.getRandomValues(t);else for(let n=0;n<r;n++)t[n]=Math.floor(256*Math.random());return t}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function T0(){return new TextEncoder}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Sh{static newId(){const e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",t=62*Math.floor(4.129032258064516);let n="";for(;n.length<20;){const s=kS(40);for(let i=0;i<s.length;++i)n.length<20&&s[i]<t&&(n+=e.charAt(s[i]%62))}return n}}function ge(r,e){return r<e?-1:r>e?1:0}function id(r,e){let t=0;for(;t<r.length&&t<e.length;){const n=r.codePointAt(t),s=e.codePointAt(t);if(n!==s){if(n<128&&s<128)return ge(n,s);{const i=T0(),a=SS(i.encode(Mp(r,t)),i.encode(Mp(e,t)));return a!==0?a:ge(n,s)}}t+=n>65535?2:1}return ge(r.length,e.length)}function Mp(r,e){return r.codePointAt(e)>65535?r.substring(e,e+2):r.substring(e,e+1)}function SS(r,e){for(let t=0;t<r.length&&t<e.length;++t)if(r[t]!==e[t])return ge(r[t],e[t]);return ge(r.length,e.length)}function No(r,e,t){return r.length===e.length&&r.every((n,s)=>t(n,e[s]))}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Dp="__name__";class pr{constructor(e,t,n){t===void 0?t=0:t>e.length&&ae(637,{offset:t,range:e.length}),n===void 0?n=e.length-t:n>e.length-t&&ae(1746,{length:n,range:e.length-t}),this.segments=e,this.offset=t,this.len=n}get length(){return this.len}isEqual(e){return pr.comparator(this,e)===0}child(e){const t=this.segments.slice(this.offset,this.limit());return e instanceof pr?e.forEach(n=>{t.push(n)}):t.push(e),this.construct(t)}limit(){return this.offset+this.length}popFirst(e){return e=e===void 0?1:e,this.construct(this.segments,this.offset+e,this.length-e)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(e){return this.segments[this.offset+e]}isEmpty(){return this.length===0}isPrefixOf(e){if(e.length<this.length)return!1;for(let t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}isImmediateParentOf(e){if(this.length+1!==e.length)return!1;for(let t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}forEach(e){for(let t=this.offset,n=this.limit();t<n;t++)e(this.segments[t])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(e,t){const n=Math.min(e.length,t.length);for(let s=0;s<n;s++){const i=pr.compareSegments(e.get(s),t.get(s));if(i!==0)return i}return ge(e.length,t.length)}static compareSegments(e,t){const n=pr.isNumericId(e),s=pr.isNumericId(t);return n&&!s?-1:!n&&s?1:n&&s?pr.extractNumericId(e).compare(pr.extractNumericId(t)):id(e,t)}static isNumericId(e){return e.startsWith("__id")&&e.endsWith("__")}static extractNumericId(e){return Nn.fromString(e.substring(4,e.length-2))}}class Pe extends pr{construct(e,t,n){return new Pe(e,t,n)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}toUriEncodedString(){return this.toArray().map(encodeURIComponent).join("/")}static fromString(...e){const t=[];for(const n of e){if(n.indexOf("//")>=0)throw new G($.INVALID_ARGUMENT,`Invalid segment (${n}). Paths must not contain // in them.`);t.push(...n.split("/").filter(s=>s.length>0))}return new Pe(t)}static emptyPath(){return new Pe([])}}const jS=/^[_a-zA-Z][_a-zA-Z0-9]*$/;class ut extends pr{construct(e,t,n){return new ut(e,t,n)}static isValidIdentifier(e){return jS.test(e)}canonicalString(){return this.toArray().map(e=>(e=e.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),ut.isValidIdentifier(e)||(e="`"+e+"`"),e)).join(".")}toString(){return this.canonicalString()}isKeyField(){return this.length===1&&this.get(0)===Dp}static keyField(){return new ut([Dp])}static fromServerFormat(e){const t=[];let n="",s=0;const i=()=>{if(n.length===0)throw new G($.INVALID_ARGUMENT,`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);t.push(n),n=""};let a=!1;for(;s<e.length;){const l=e[s];if(l==="\\"){if(s+1===e.length)throw new G($.INVALID_ARGUMENT,"Path has trailing escape character: "+e);const u=e[s+1];if(u!=="\\"&&u!=="."&&u!=="`")throw new G($.INVALID_ARGUMENT,"Path has invalid escape sequence: "+e);n+=u,s+=2}else l==="`"?(a=!a,s++):l!=="."||a?(n+=l,s++):(i(),s++)}if(i(),a)throw new G($.INVALID_ARGUMENT,"Unterminated ` in path: "+e);return new ut(t)}static emptyPath(){return new ut([])}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class te{constructor(e){this.path=e}static fromPath(e){return new te(Pe.fromString(e))}static fromName(e){return new te(Pe.fromString(e).popFirst(5))}static empty(){return new te(Pe.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(e){return this.path.length>=2&&this.path.get(this.path.length-2)===e}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(e){return e!==null&&Pe.comparator(this.path,e.path)===0}toString(){return this.path.toString()}static comparator(e,t){return Pe.comparator(e.path,t.path)}static isDocumentKey(e){return e.length%2==0}static fromSegments(e){return new te(new Pe(e.slice()))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function E0(r,e,t){if(!t)throw new G($.INVALID_ARGUMENT,`Function ${r}() cannot be called with an empty ${e}.`)}function IS(r,e,t,n){if(e===!0&&n===!0)throw new G($.INVALID_ARGUMENT,`${r} and ${t} cannot be used together.`)}function Op(r){if(!te.isDocumentKey(r))throw new G($.INVALID_ARGUMENT,`Invalid document reference. Document references must have an even number of segments, but ${r} has ${r.length}.`)}function Lp(r){if(te.isDocumentKey(r))throw new G($.INVALID_ARGUMENT,`Invalid collection reference. Collection references must have an odd number of segments, but ${r} has ${r.length}.`)}function N0(r){return typeof r=="object"&&r!==null&&(Object.getPrototypeOf(r)===Object.prototype||Object.getPrototypeOf(r)===null)}function cc(r){if(r===void 0)return"undefined";if(r===null)return"null";if(typeof r=="string")return r.length>20&&(r=`${r.substring(0,20)}...`),JSON.stringify(r);if(typeof r=="number"||typeof r=="boolean")return""+r;if(typeof r=="object"){if(r instanceof Array)return"an array";{const e=function(n){return n.constructor?n.constructor.name:null}(r);return e?`a custom ${e} object`:"an object"}}return typeof r=="function"?"a function":ae(12329,{type:typeof r})}function An(r,e){if("_delegate"in r&&(r=r._delegate),!(r instanceof e)){if(e.name===r.constructor.name)throw new G($.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{const t=cc(r);throw new G($.INVALID_ARGUMENT,`Expected type '${e.name}', but it was: ${t}`)}}return r}/**
 * @license
 * Copyright 2025 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function et(r,e){const t={typeString:r};return e&&(t.value=e),t}function sa(r,e){if(!N0(r))throw new G($.INVALID_ARGUMENT,"JSON must be an object");let t;for(const n in e)if(e[n]){const s=e[n].typeString,i="value"in e[n]?{value:e[n].value}:void 0;if(!(n in r)){t=`JSON missing required field: '${n}'`;break}const a=r[n];if(s&&typeof a!==s){t=`JSON field '${n}' must be a ${s}.`;break}if(i!==void 0&&a!==i.value){t=`Expected '${n}' field to equal '${i.value}'`;break}}if(t)throw new G($.INVALID_ARGUMENT,t);return!0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Vp=-62135596800,Fp=1e6;class Fe{static now(){return Fe.fromMillis(Date.now())}static fromDate(e){return Fe.fromMillis(e.getTime())}static fromMillis(e){const t=Math.floor(e/1e3),n=Math.floor((e-1e3*t)*Fp);return new Fe(t,n)}constructor(e,t){if(this.seconds=e,this.nanoseconds=t,t<0)throw new G($.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+t);if(t>=1e9)throw new G($.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+t);if(e<Vp)throw new G($.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e);if(e>=253402300800)throw new G($.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/Fp}_compareTo(e){return this.seconds===e.seconds?ge(this.nanoseconds,e.nanoseconds):ge(this.seconds,e.seconds)}isEqual(e){return e.seconds===this.seconds&&e.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{type:Fe._jsonSchemaVersion,seconds:this.seconds,nanoseconds:this.nanoseconds}}static fromJSON(e){if(sa(e,Fe._jsonSchema))return new Fe(e.seconds,e.nanoseconds)}valueOf(){const e=this.seconds-Vp;return String(e).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}}Fe._jsonSchemaVersion="firestore/timestamp/1.0",Fe._jsonSchema={type:et("string",Fe._jsonSchemaVersion),seconds:et("number"),nanoseconds:et("number")};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ce{static fromTimestamp(e){return new ce(e)}static min(){return new ce(new Fe(0,0))}static max(){return new ce(new Fe(253402300799,999999999))}constructor(e){this.timestamp=e}compareTo(e){return this.timestamp._compareTo(e.timestamp)}isEqual(e){return this.timestamp.isEqual(e.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Li=-1;function AS(r,e){const t=r.toTimestamp().seconds,n=r.toTimestamp().nanoseconds+1,s=ce.fromTimestamp(n===1e9?new Fe(t+1,0):new Fe(t,n));return new Rn(s,te.empty(),e)}function RS(r){return new Rn(r.readTime,r.key,Li)}class Rn{constructor(e,t,n){this.readTime=e,this.documentKey=t,this.largestBatchId=n}static min(){return new Rn(ce.min(),te.empty(),Li)}static max(){return new Rn(ce.max(),te.empty(),Li)}}function PS(r,e){let t=r.readTime.compareTo(e.readTime);return t!==0?t:(t=te.comparator(r.documentKey,e.documentKey),t!==0?t:ge(r.largestBatchId,e.largestBatchId))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const MS="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.";class DS{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(e){this.onCommittedListeners.push(e)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach(e=>e())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Vo(r){if(r.code!==$.FAILED_PRECONDITION||r.message!==MS)throw r;Q("LocalStore","Unexpectedly lost primary lease")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class B{constructor(e){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,e(t=>{this.isDone=!0,this.result=t,this.nextCallback&&this.nextCallback(t)},t=>{this.isDone=!0,this.error=t,this.catchCallback&&this.catchCallback(t)})}catch(e){return this.next(void 0,e)}next(e,t){return this.callbackAttached&&ae(59440),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(t,this.error):this.wrapSuccess(e,this.result):new B((n,s)=>{this.nextCallback=i=>{this.wrapSuccess(e,i).next(n,s)},this.catchCallback=i=>{this.wrapFailure(t,i).next(n,s)}})}toPromise(){return new Promise((e,t)=>{this.next(e,t)})}wrapUserFunction(e){try{const t=e();return t instanceof B?t:B.resolve(t)}catch(t){return B.reject(t)}}wrapSuccess(e,t){return e?this.wrapUserFunction(()=>e(t)):B.resolve(t)}wrapFailure(e,t){return e?this.wrapUserFunction(()=>e(t)):B.reject(t)}static resolve(e){return new B((t,n)=>{t(e)})}static reject(e){return new B((t,n)=>{n(e)})}static waitFor(e){return new B((t,n)=>{let s=0,i=0,a=!1;e.forEach(l=>{++s,l.next(()=>{++i,a&&i===s&&t()},u=>n(u))}),a=!0,i===s&&t()})}static or(e){let t=B.resolve(!1);for(const n of e)t=t.next(s=>s?B.resolve(s):n());return t}static forEach(e,t){const n=[];return e.forEach((s,i)=>{n.push(t.call(this,s,i))}),this.waitFor(n)}static mapArray(e,t){return new B((n,s)=>{const i=e.length,a=new Array(i);let l=0;for(let u=0;u<i;u++){const d=u;t(e[d]).next(h=>{a[d]=h,++l,l===i&&n(a)},h=>s(h))}})}static doWhile(e,t){return new B((n,s)=>{const i=()=>{e()===!0?t().next(()=>{i()},s):n()};i()})}}function OS(r){const e=r.match(/Android ([\d.]+)/i),t=e?e[1].split(".").slice(0,2).join("."):"-1";return Number(t)}function Fo(r){return r.name==="IndexedDbTransactionError"}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class uc{constructor(e,t){this.previousValue=e,t&&(t.sequenceNumberHandler=n=>this._e(n),this.ae=n=>t.writeSequenceNumber(n))}_e(e){return this.previousValue=Math.max(e,this.previousValue),this.previousValue}next(){const e=++this.previousValue;return this.ae&&this.ae(e),e}}uc.ue=-1;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const jh=-1;function dc(r){return r==null}function El(r){return r===0&&1/r==-1/0}function LS(r){return typeof r=="number"&&Number.isInteger(r)&&!El(r)&&r<=Number.MAX_SAFE_INTEGER&&r>=Number.MIN_SAFE_INTEGER}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const C0="";function VS(r){let e="";for(let t=0;t<r.length;t++)e.length>0&&(e=Up(e)),e=FS(r.get(t),e);return Up(e)}function FS(r,e){let t=e;const n=r.length;for(let s=0;s<n;s++){const i=r.charAt(s);switch(i){case"\0":t+="";break;case C0:t+="";break;default:t+=i}}return t}function Up(r){return r+C0+""}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function $p(r){let e=0;for(const t in r)Object.prototype.hasOwnProperty.call(r,t)&&e++;return e}function Wn(r,e){for(const t in r)Object.prototype.hasOwnProperty.call(r,t)&&e(t,r[t])}function k0(r){for(const e in r)if(Object.prototype.hasOwnProperty.call(r,e))return!1;return!0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ze{constructor(e,t){this.comparator=e,this.root=t||ct.EMPTY}insert(e,t){return new ze(this.comparator,this.root.insert(e,t,this.comparator).copy(null,null,ct.BLACK,null,null))}remove(e){return new ze(this.comparator,this.root.remove(e,this.comparator).copy(null,null,ct.BLACK,null,null))}get(e){let t=this.root;for(;!t.isEmpty();){const n=this.comparator(e,t.key);if(n===0)return t.value;n<0?t=t.left:n>0&&(t=t.right)}return null}indexOf(e){let t=0,n=this.root;for(;!n.isEmpty();){const s=this.comparator(e,n.key);if(s===0)return t+n.left.size;s<0?n=n.left:(t+=n.left.size+1,n=n.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(e){return this.root.inorderTraversal(e)}forEach(e){this.inorderTraversal((t,n)=>(e(t,n),!1))}toString(){const e=[];return this.inorderTraversal((t,n)=>(e.push(`${t}:${n}`),!1)),`{${e.join(", ")}}`}reverseTraversal(e){return this.root.reverseTraversal(e)}getIterator(){return new Fa(this.root,null,this.comparator,!1)}getIteratorFrom(e){return new Fa(this.root,e,this.comparator,!1)}getReverseIterator(){return new Fa(this.root,null,this.comparator,!0)}getReverseIteratorFrom(e){return new Fa(this.root,e,this.comparator,!0)}}class Fa{constructor(e,t,n,s){this.isReverse=s,this.nodeStack=[];let i=1;for(;!e.isEmpty();)if(i=t?n(e.key,t):1,t&&s&&(i*=-1),i<0)e=this.isReverse?e.left:e.right;else{if(i===0){this.nodeStack.push(e);break}this.nodeStack.push(e),e=this.isReverse?e.right:e.left}}getNext(){let e=this.nodeStack.pop();const t={key:e.key,value:e.value};if(this.isReverse)for(e=e.left;!e.isEmpty();)this.nodeStack.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack.push(e),e=e.left;return t}hasNext(){return this.nodeStack.length>0}peek(){if(this.nodeStack.length===0)return null;const e=this.nodeStack[this.nodeStack.length-1];return{key:e.key,value:e.value}}}class ct{constructor(e,t,n,s,i){this.key=e,this.value=t,this.color=n??ct.RED,this.left=s??ct.EMPTY,this.right=i??ct.EMPTY,this.size=this.left.size+1+this.right.size}copy(e,t,n,s,i){return new ct(e??this.key,t??this.value,n??this.color,s??this.left,i??this.right)}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,t,n){let s=this;const i=n(e,s.key);return s=i<0?s.copy(null,null,null,s.left.insert(e,t,n),null):i===0?s.copy(null,t,null,null,null):s.copy(null,null,null,null,s.right.insert(e,t,n)),s.fixUp()}removeMin(){if(this.left.isEmpty())return ct.EMPTY;let e=this;return e.left.isRed()||e.left.left.isRed()||(e=e.moveRedLeft()),e=e.copy(null,null,null,e.left.removeMin(),null),e.fixUp()}remove(e,t){let n,s=this;if(t(e,s.key)<0)s.left.isEmpty()||s.left.isRed()||s.left.left.isRed()||(s=s.moveRedLeft()),s=s.copy(null,null,null,s.left.remove(e,t),null);else{if(s.left.isRed()&&(s=s.rotateRight()),s.right.isEmpty()||s.right.isRed()||s.right.left.isRed()||(s=s.moveRedRight()),t(e,s.key)===0){if(s.right.isEmpty())return ct.EMPTY;n=s.right.min(),s=s.copy(n.key,n.value,null,null,s.right.removeMin())}s=s.copy(null,null,null,null,s.right.remove(e,t))}return s.fixUp()}isRed(){return this.color}fixUp(){let e=this;return e.right.isRed()&&!e.left.isRed()&&(e=e.rotateLeft()),e.left.isRed()&&e.left.left.isRed()&&(e=e.rotateRight()),e.left.isRed()&&e.right.isRed()&&(e=e.colorFlip()),e}moveRedLeft(){let e=this.colorFlip();return e.right.left.isRed()&&(e=e.copy(null,null,null,null,e.right.rotateRight()),e=e.rotateLeft(),e=e.colorFlip()),e}moveRedRight(){let e=this.colorFlip();return e.left.left.isRed()&&(e=e.rotateRight(),e=e.colorFlip()),e}rotateLeft(){const e=this.copy(null,null,ct.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight(){const e=this.copy(null,null,ct.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip(){const e=this.left.copy(null,null,!this.left.color,null,null),t=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,t)}checkMaxDepth(){const e=this.check();return Math.pow(2,e)<=this.size+1}check(){if(this.isRed()&&this.left.isRed())throw ae(43730,{key:this.key,value:this.value});if(this.right.isRed())throw ae(14113,{key:this.key,value:this.value});const e=this.left.check();if(e!==this.right.check())throw ae(27949);return e+(this.isRed()?0:1)}}ct.EMPTY=null,ct.RED=!0,ct.BLACK=!1;ct.EMPTY=new class{constructor(){this.size=0}get key(){throw ae(57766)}get value(){throw ae(16141)}get color(){throw ae(16727)}get left(){throw ae(29726)}get right(){throw ae(36894)}copy(e,t,n,s,i){return this}insert(e,t,n){return new ct(e,t)}remove(e,t){return this}isEmpty(){return!0}inorderTraversal(e){return!1}reverseTraversal(e){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class st{constructor(e){this.comparator=e,this.data=new ze(this.comparator)}has(e){return this.data.get(e)!==null}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(e){return this.data.indexOf(e)}forEach(e){this.data.inorderTraversal((t,n)=>(e(t),!1))}forEachInRange(e,t){const n=this.data.getIteratorFrom(e[0]);for(;n.hasNext();){const s=n.getNext();if(this.comparator(s.key,e[1])>=0)return;t(s.key)}}forEachWhile(e,t){let n;for(n=t!==void 0?this.data.getIteratorFrom(t):this.data.getIterator();n.hasNext();)if(!e(n.getNext().key))return}firstAfterOrEqual(e){const t=this.data.getIteratorFrom(e);return t.hasNext()?t.getNext().key:null}getIterator(){return new Bp(this.data.getIterator())}getIteratorFrom(e){return new Bp(this.data.getIteratorFrom(e))}add(e){return this.copy(this.data.remove(e).insert(e,!0))}delete(e){return this.has(e)?this.copy(this.data.remove(e)):this}isEmpty(){return this.data.isEmpty()}unionWith(e){let t=this;return t.size<e.size&&(t=e,e=this),e.forEach(n=>{t=t.add(n)}),t}isEqual(e){if(!(e instanceof st)||this.size!==e.size)return!1;const t=this.data.getIterator(),n=e.data.getIterator();for(;t.hasNext();){const s=t.getNext().key,i=n.getNext().key;if(this.comparator(s,i)!==0)return!1}return!0}toArray(){const e=[];return this.forEach(t=>{e.push(t)}),e}toString(){const e=[];return this.forEach(t=>e.push(t)),"SortedSet("+e.toString()+")"}copy(e){const t=new st(this.comparator);return t.data=e,t}}class Bp{constructor(e){this.iter=e}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Bt{constructor(e){this.fields=e,e.sort(ut.comparator)}static empty(){return new Bt([])}unionWith(e){let t=new st(ut.comparator);for(const n of this.fields)t=t.add(n);for(const n of e)t=t.add(n);return new Bt(t.toArray())}covers(e){for(const t of this.fields)if(t.isPrefixOf(e))return!0;return!1}isEqual(e){return No(this.fields,e.fields,(t,n)=>t.isEqual(n))}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class S0 extends Error{constructor(){super(...arguments),this.name="Base64DecodeError"}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class dt{constructor(e){this.binaryString=e}static fromBase64String(e){const t=function(s){try{return atob(s)}catch(i){throw typeof DOMException<"u"&&i instanceof DOMException?new S0("Invalid base64 string: "+i):i}}(e);return new dt(t)}static fromUint8Array(e){const t=function(s){let i="";for(let a=0;a<s.length;++a)i+=String.fromCharCode(s[a]);return i}(e);return new dt(t)}[Symbol.iterator](){let e=0;return{next:()=>e<this.binaryString.length?{value:this.binaryString.charCodeAt(e++),done:!1}:{value:void 0,done:!0}}}toBase64(){return function(t){return btoa(t)}(this.binaryString)}toUint8Array(){return function(t){const n=new Uint8Array(t.length);for(let s=0;s<t.length;s++)n[s]=t.charCodeAt(s);return n}(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(e){return ge(this.binaryString,e.binaryString)}isEqual(e){return this.binaryString===e.binaryString}}dt.EMPTY_BYTE_STRING=new dt("");const US=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function Pn(r){if(Ce(!!r,39018),typeof r=="string"){let e=0;const t=US.exec(r);if(Ce(!!t,46558,{timestamp:r}),t[1]){let s=t[1];s=(s+"000000000").substr(0,9),e=Number(s)}const n=new Date(r);return{seconds:Math.floor(n.getTime()/1e3),nanos:e}}return{seconds:Qe(r.seconds),nanos:Qe(r.nanos)}}function Qe(r){return typeof r=="number"?r:typeof r=="string"?Number(r):0}function Mn(r){return typeof r=="string"?dt.fromBase64String(r):dt.fromUint8Array(r)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const j0="server_timestamp",I0="__type__",A0="__previous_value__",R0="__local_write_time__";function Ih(r){var e,t;return((t=(((e=r==null?void 0:r.mapValue)===null||e===void 0?void 0:e.fields)||{})[I0])===null||t===void 0?void 0:t.stringValue)===j0}function hc(r){const e=r.mapValue.fields[A0];return Ih(e)?hc(e):e}function Vi(r){const e=Pn(r.mapValue.fields[R0].timestampValue);return new Fe(e.seconds,e.nanos)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $S{constructor(e,t,n,s,i,a,l,u,d,h){this.databaseId=e,this.appId=t,this.persistenceKey=n,this.host=s,this.ssl=i,this.forceLongPolling=a,this.autoDetectLongPolling=l,this.longPollingOptions=u,this.useFetchStreams=d,this.isUsingEmulator=h}}const Nl="(default)";class Fi{constructor(e,t){this.projectId=e,this.database=t||Nl}static empty(){return new Fi("","")}get isDefaultDatabase(){return this.database===Nl}isEqual(e){return e instanceof Fi&&e.projectId===this.projectId&&e.database===this.database}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const P0="__type__",BS="__max__",Ua={mapValue:{}},M0="__vector__",Cl="value";function Dn(r){return"nullValue"in r?0:"booleanValue"in r?1:"integerValue"in r||"doubleValue"in r?2:"timestampValue"in r?3:"stringValue"in r?5:"bytesValue"in r?6:"referenceValue"in r?7:"geoPointValue"in r?8:"arrayValue"in r?9:"mapValue"in r?Ih(r)?4:qS(r)?9007199254740991:zS(r)?10:11:ae(28295,{value:r})}function kr(r,e){if(r===e)return!0;const t=Dn(r);if(t!==Dn(e))return!1;switch(t){case 0:case 9007199254740991:return!0;case 1:return r.booleanValue===e.booleanValue;case 4:return Vi(r).isEqual(Vi(e));case 3:return function(s,i){if(typeof s.timestampValue=="string"&&typeof i.timestampValue=="string"&&s.timestampValue.length===i.timestampValue.length)return s.timestampValue===i.timestampValue;const a=Pn(s.timestampValue),l=Pn(i.timestampValue);return a.seconds===l.seconds&&a.nanos===l.nanos}(r,e);case 5:return r.stringValue===e.stringValue;case 6:return function(s,i){return Mn(s.bytesValue).isEqual(Mn(i.bytesValue))}(r,e);case 7:return r.referenceValue===e.referenceValue;case 8:return function(s,i){return Qe(s.geoPointValue.latitude)===Qe(i.geoPointValue.latitude)&&Qe(s.geoPointValue.longitude)===Qe(i.geoPointValue.longitude)}(r,e);case 2:return function(s,i){if("integerValue"in s&&"integerValue"in i)return Qe(s.integerValue)===Qe(i.integerValue);if("doubleValue"in s&&"doubleValue"in i){const a=Qe(s.doubleValue),l=Qe(i.doubleValue);return a===l?El(a)===El(l):isNaN(a)&&isNaN(l)}return!1}(r,e);case 9:return No(r.arrayValue.values||[],e.arrayValue.values||[],kr);case 10:case 11:return function(s,i){const a=s.mapValue.fields||{},l=i.mapValue.fields||{};if($p(a)!==$p(l))return!1;for(const u in a)if(a.hasOwnProperty(u)&&(l[u]===void 0||!kr(a[u],l[u])))return!1;return!0}(r,e);default:return ae(52216,{left:r})}}function Ui(r,e){return(r.values||[]).find(t=>kr(t,e))!==void 0}function Co(r,e){if(r===e)return 0;const t=Dn(r),n=Dn(e);if(t!==n)return ge(t,n);switch(t){case 0:case 9007199254740991:return 0;case 1:return ge(r.booleanValue,e.booleanValue);case 2:return function(i,a){const l=Qe(i.integerValue||i.doubleValue),u=Qe(a.integerValue||a.doubleValue);return l<u?-1:l>u?1:l===u?0:isNaN(l)?isNaN(u)?0:-1:1}(r,e);case 3:return zp(r.timestampValue,e.timestampValue);case 4:return zp(Vi(r),Vi(e));case 5:return id(r.stringValue,e.stringValue);case 6:return function(i,a){const l=Mn(i),u=Mn(a);return l.compareTo(u)}(r.bytesValue,e.bytesValue);case 7:return function(i,a){const l=i.split("/"),u=a.split("/");for(let d=0;d<l.length&&d<u.length;d++){const h=ge(l[d],u[d]);if(h!==0)return h}return ge(l.length,u.length)}(r.referenceValue,e.referenceValue);case 8:return function(i,a){const l=ge(Qe(i.latitude),Qe(a.latitude));return l!==0?l:ge(Qe(i.longitude),Qe(a.longitude))}(r.geoPointValue,e.geoPointValue);case 9:return qp(r.arrayValue,e.arrayValue);case 10:return function(i,a){var l,u,d,h;const p=i.fields||{},g=a.fields||{},b=(l=p[Cl])===null||l===void 0?void 0:l.arrayValue,C=(u=g[Cl])===null||u===void 0?void 0:u.arrayValue,x=ge(((d=b==null?void 0:b.values)===null||d===void 0?void 0:d.length)||0,((h=C==null?void 0:C.values)===null||h===void 0?void 0:h.length)||0);return x!==0?x:qp(b,C)}(r.mapValue,e.mapValue);case 11:return function(i,a){if(i===Ua.mapValue&&a===Ua.mapValue)return 0;if(i===Ua.mapValue)return 1;if(a===Ua.mapValue)return-1;const l=i.fields||{},u=Object.keys(l),d=a.fields||{},h=Object.keys(d);u.sort(),h.sort();for(let p=0;p<u.length&&p<h.length;++p){const g=id(u[p],h[p]);if(g!==0)return g;const b=Co(l[u[p]],d[h[p]]);if(b!==0)return b}return ge(u.length,h.length)}(r.mapValue,e.mapValue);default:throw ae(23264,{le:t})}}function zp(r,e){if(typeof r=="string"&&typeof e=="string"&&r.length===e.length)return ge(r,e);const t=Pn(r),n=Pn(e),s=ge(t.seconds,n.seconds);return s!==0?s:ge(t.nanos,n.nanos)}function qp(r,e){const t=r.values||[],n=e.values||[];for(let s=0;s<t.length&&s<n.length;++s){const i=Co(t[s],n[s]);if(i)return i}return ge(t.length,n.length)}function ko(r){return ad(r)}function ad(r){return"nullValue"in r?"null":"booleanValue"in r?""+r.booleanValue:"integerValue"in r?""+r.integerValue:"doubleValue"in r?""+r.doubleValue:"timestampValue"in r?function(t){const n=Pn(t);return`time(${n.seconds},${n.nanos})`}(r.timestampValue):"stringValue"in r?r.stringValue:"bytesValue"in r?function(t){return Mn(t).toBase64()}(r.bytesValue):"referenceValue"in r?function(t){return te.fromName(t).toString()}(r.referenceValue):"geoPointValue"in r?function(t){return`geo(${t.latitude},${t.longitude})`}(r.geoPointValue):"arrayValue"in r?function(t){let n="[",s=!0;for(const i of t.values||[])s?s=!1:n+=",",n+=ad(i);return n+"]"}(r.arrayValue):"mapValue"in r?function(t){const n=Object.keys(t.fields||{}).sort();let s="{",i=!0;for(const a of n)i?i=!1:s+=",",s+=`${a}:${ad(t.fields[a])}`;return s+"}"}(r.mapValue):ae(61005,{value:r})}function rl(r){switch(Dn(r)){case 0:case 1:return 4;case 2:return 8;case 3:case 8:return 16;case 4:const e=hc(r);return e?16+rl(e):16;case 5:return 2*r.stringValue.length;case 6:return Mn(r.bytesValue).approximateByteSize();case 7:return r.referenceValue.length;case 9:return function(n){return(n.values||[]).reduce((s,i)=>s+rl(i),0)}(r.arrayValue);case 10:case 11:return function(n){let s=0;return Wn(n.fields,(i,a)=>{s+=i.length+rl(a)}),s}(r.mapValue);default:throw ae(13486,{value:r})}}function Hp(r,e){return{referenceValue:`projects/${r.projectId}/databases/${r.database}/documents/${e.path.canonicalString()}`}}function ld(r){return!!r&&"integerValue"in r}function Ah(r){return!!r&&"arrayValue"in r}function Wp(r){return!!r&&"nullValue"in r}function Gp(r){return!!r&&"doubleValue"in r&&isNaN(Number(r.doubleValue))}function nl(r){return!!r&&"mapValue"in r}function zS(r){var e,t;return((t=(((e=r==null?void 0:r.mapValue)===null||e===void 0?void 0:e.fields)||{})[P0])===null||t===void 0?void 0:t.stringValue)===M0}function Ei(r){if(r.geoPointValue)return{geoPointValue:Object.assign({},r.geoPointValue)};if(r.timestampValue&&typeof r.timestampValue=="object")return{timestampValue:Object.assign({},r.timestampValue)};if(r.mapValue){const e={mapValue:{fields:{}}};return Wn(r.mapValue.fields,(t,n)=>e.mapValue.fields[t]=Ei(n)),e}if(r.arrayValue){const e={arrayValue:{values:[]}};for(let t=0;t<(r.arrayValue.values||[]).length;++t)e.arrayValue.values[t]=Ei(r.arrayValue.values[t]);return e}return Object.assign({},r)}function qS(r){return(((r.mapValue||{}).fields||{}).__type__||{}).stringValue===BS}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Dt{constructor(e){this.value=e}static empty(){return new Dt({mapValue:{}})}field(e){if(e.isEmpty())return this.value;{let t=this.value;for(let n=0;n<e.length-1;++n)if(t=(t.mapValue.fields||{})[e.get(n)],!nl(t))return null;return t=(t.mapValue.fields||{})[e.lastSegment()],t||null}}set(e,t){this.getFieldsMap(e.popLast())[e.lastSegment()]=Ei(t)}setAll(e){let t=ut.emptyPath(),n={},s=[];e.forEach((a,l)=>{if(!t.isImmediateParentOf(l)){const u=this.getFieldsMap(t);this.applyChanges(u,n,s),n={},s=[],t=l.popLast()}a?n[l.lastSegment()]=Ei(a):s.push(l.lastSegment())});const i=this.getFieldsMap(t);this.applyChanges(i,n,s)}delete(e){const t=this.field(e.popLast());nl(t)&&t.mapValue.fields&&delete t.mapValue.fields[e.lastSegment()]}isEqual(e){return kr(this.value,e.value)}getFieldsMap(e){let t=this.value;t.mapValue.fields||(t.mapValue={fields:{}});for(let n=0;n<e.length;++n){let s=t.mapValue.fields[e.get(n)];nl(s)&&s.mapValue.fields||(s={mapValue:{fields:{}}},t.mapValue.fields[e.get(n)]=s),t=s}return t.mapValue.fields}applyChanges(e,t,n){Wn(t,(s,i)=>e[s]=i);for(const s of n)delete e[s]}clone(){return new Dt(Ei(this.value))}}function D0(r){const e=[];return Wn(r.fields,(t,n)=>{const s=new ut([t]);if(nl(n)){const i=D0(n.mapValue).fields;if(i.length===0)e.push(s);else for(const a of i)e.push(s.child(a))}else e.push(s)}),new Bt(e)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class vt{constructor(e,t,n,s,i,a,l){this.key=e,this.documentType=t,this.version=n,this.readTime=s,this.createTime=i,this.data=a,this.documentState=l}static newInvalidDocument(e){return new vt(e,0,ce.min(),ce.min(),ce.min(),Dt.empty(),0)}static newFoundDocument(e,t,n,s){return new vt(e,1,t,ce.min(),n,s,0)}static newNoDocument(e,t){return new vt(e,2,t,ce.min(),ce.min(),Dt.empty(),0)}static newUnknownDocument(e,t){return new vt(e,3,t,ce.min(),ce.min(),Dt.empty(),2)}convertToFoundDocument(e,t){return!this.createTime.isEqual(ce.min())||this.documentType!==2&&this.documentType!==0||(this.createTime=e),this.version=e,this.documentType=1,this.data=t,this.documentState=0,this}convertToNoDocument(e){return this.version=e,this.documentType=2,this.data=Dt.empty(),this.documentState=0,this}convertToUnknownDocument(e){return this.version=e,this.documentType=3,this.data=Dt.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=ce.min(),this}setReadTime(e){return this.readTime=e,this}get hasLocalMutations(){return this.documentState===1}get hasCommittedMutations(){return this.documentState===2}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return this.documentType!==0}isFoundDocument(){return this.documentType===1}isNoDocument(){return this.documentType===2}isUnknownDocument(){return this.documentType===3}isEqual(e){return e instanceof vt&&this.key.isEqual(e.key)&&this.version.isEqual(e.version)&&this.documentType===e.documentType&&this.documentState===e.documentState&&this.data.isEqual(e.data)}mutableCopy(){return new vt(this.key,this.documentType,this.version,this.readTime,this.createTime,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {createTime: ${this.createTime}}), {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class kl{constructor(e,t){this.position=e,this.inclusive=t}}function Kp(r,e,t){let n=0;for(let s=0;s<r.position.length;s++){const i=e[s],a=r.position[s];if(i.field.isKeyField()?n=te.comparator(te.fromName(a.referenceValue),t.key):n=Co(a,t.data.field(i.field)),i.dir==="desc"&&(n*=-1),n!==0)break}return n}function Qp(r,e){if(r===null)return e===null;if(e===null||r.inclusive!==e.inclusive||r.position.length!==e.position.length)return!1;for(let t=0;t<r.position.length;t++)if(!kr(r.position[t],e.position[t]))return!1;return!0}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Sl{constructor(e,t="asc"){this.field=e,this.dir=t}}function HS(r,e){return r.dir===e.dir&&r.field.isEqual(e.field)}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class O0{}class Ze extends O0{constructor(e,t,n){super(),this.field=e,this.op=t,this.value=n}static create(e,t,n){return e.isKeyField()?t==="in"||t==="not-in"?this.createKeyFieldInFilter(e,t,n):new GS(e,t,n):t==="array-contains"?new YS(e,n):t==="in"?new XS(e,n):t==="not-in"?new JS(e,n):t==="array-contains-any"?new ZS(e,n):new Ze(e,t,n)}static createKeyFieldInFilter(e,t,n){return t==="in"?new KS(e,n):new QS(e,n)}matches(e){const t=e.data.field(this.field);return this.op==="!="?t!==null&&t.nullValue===void 0&&this.matchesComparison(Co(t,this.value)):t!==null&&Dn(this.value)===Dn(t)&&this.matchesComparison(Co(t,this.value))}matchesComparison(e){switch(this.op){case"<":return e<0;case"<=":return e<=0;case"==":return e===0;case"!=":return e!==0;case">":return e>0;case">=":return e>=0;default:return ae(47266,{operator:this.op})}}isInequality(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}getFlattenedFilters(){return[this]}getFilters(){return[this]}}class ur extends O0{constructor(e,t){super(),this.filters=e,this.op=t,this.he=null}static create(e,t){return new ur(e,t)}matches(e){return L0(this)?this.filters.find(t=>!t.matches(e))===void 0:this.filters.find(t=>t.matches(e))!==void 0}getFlattenedFilters(){return this.he!==null||(this.he=this.filters.reduce((e,t)=>e.concat(t.getFlattenedFilters()),[])),this.he}getFilters(){return Object.assign([],this.filters)}}function L0(r){return r.op==="and"}function V0(r){return WS(r)&&L0(r)}function WS(r){for(const e of r.filters)if(e instanceof ur)return!1;return!0}function cd(r){if(r instanceof Ze)return r.field.canonicalString()+r.op.toString()+ko(r.value);if(V0(r))return r.filters.map(e=>cd(e)).join(",");{const e=r.filters.map(t=>cd(t)).join(",");return`${r.op}(${e})`}}function F0(r,e){return r instanceof Ze?function(n,s){return s instanceof Ze&&n.op===s.op&&n.field.isEqual(s.field)&&kr(n.value,s.value)}(r,e):r instanceof ur?function(n,s){return s instanceof ur&&n.op===s.op&&n.filters.length===s.filters.length?n.filters.reduce((i,a,l)=>i&&F0(a,s.filters[l]),!0):!1}(r,e):void ae(19439)}function U0(r){return r instanceof Ze?function(t){return`${t.field.canonicalString()} ${t.op} ${ko(t.value)}`}(r):r instanceof ur?function(t){return t.op.toString()+" {"+t.getFilters().map(U0).join(" ,")+"}"}(r):"Filter"}class GS extends Ze{constructor(e,t,n){super(e,t,n),this.key=te.fromName(n.referenceValue)}matches(e){const t=te.comparator(e.key,this.key);return this.matchesComparison(t)}}class KS extends Ze{constructor(e,t){super(e,"in",t),this.keys=$0("in",t)}matches(e){return this.keys.some(t=>t.isEqual(e.key))}}class QS extends Ze{constructor(e,t){super(e,"not-in",t),this.keys=$0("not-in",t)}matches(e){return!this.keys.some(t=>t.isEqual(e.key))}}function $0(r,e){var t;return(((t=e.arrayValue)===null||t===void 0?void 0:t.values)||[]).map(n=>te.fromName(n.referenceValue))}class YS extends Ze{constructor(e,t){super(e,"array-contains",t)}matches(e){const t=e.data.field(this.field);return Ah(t)&&Ui(t.arrayValue,this.value)}}class XS extends Ze{constructor(e,t){super(e,"in",t)}matches(e){const t=e.data.field(this.field);return t!==null&&Ui(this.value.arrayValue,t)}}class JS extends Ze{constructor(e,t){super(e,"not-in",t)}matches(e){if(Ui(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;const t=e.data.field(this.field);return t!==null&&t.nullValue===void 0&&!Ui(this.value.arrayValue,t)}}class ZS extends Ze{constructor(e,t){super(e,"array-contains-any",t)}matches(e){const t=e.data.field(this.field);return!(!Ah(t)||!t.arrayValue.values)&&t.arrayValue.values.some(n=>Ui(this.value.arrayValue,n))}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class e2{constructor(e,t=null,n=[],s=[],i=null,a=null,l=null){this.path=e,this.collectionGroup=t,this.orderBy=n,this.filters=s,this.limit=i,this.startAt=a,this.endAt=l,this.Pe=null}}function Yp(r,e=null,t=[],n=[],s=null,i=null,a=null){return new e2(r,e,t,n,s,i,a)}function Rh(r){const e=de(r);if(e.Pe===null){let t=e.path.canonicalString();e.collectionGroup!==null&&(t+="|cg:"+e.collectionGroup),t+="|f:",t+=e.filters.map(n=>cd(n)).join(","),t+="|ob:",t+=e.orderBy.map(n=>function(i){return i.field.canonicalString()+i.dir}(n)).join(","),dc(e.limit)||(t+="|l:",t+=e.limit),e.startAt&&(t+="|lb:",t+=e.startAt.inclusive?"b:":"a:",t+=e.startAt.position.map(n=>ko(n)).join(",")),e.endAt&&(t+="|ub:",t+=e.endAt.inclusive?"a:":"b:",t+=e.endAt.position.map(n=>ko(n)).join(",")),e.Pe=t}return e.Pe}function Ph(r,e){if(r.limit!==e.limit||r.orderBy.length!==e.orderBy.length)return!1;for(let t=0;t<r.orderBy.length;t++)if(!HS(r.orderBy[t],e.orderBy[t]))return!1;if(r.filters.length!==e.filters.length)return!1;for(let t=0;t<r.filters.length;t++)if(!F0(r.filters[t],e.filters[t]))return!1;return r.collectionGroup===e.collectionGroup&&!!r.path.isEqual(e.path)&&!!Qp(r.startAt,e.startAt)&&Qp(r.endAt,e.endAt)}function ud(r){return te.isDocumentKey(r.path)&&r.collectionGroup===null&&r.filters.length===0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class oa{constructor(e,t=null,n=[],s=[],i=null,a="F",l=null,u=null){this.path=e,this.collectionGroup=t,this.explicitOrderBy=n,this.filters=s,this.limit=i,this.limitType=a,this.startAt=l,this.endAt=u,this.Te=null,this.Ie=null,this.de=null,this.startAt,this.endAt}}function t2(r,e,t,n,s,i,a,l){return new oa(r,e,t,n,s,i,a,l)}function B0(r){return new oa(r)}function Xp(r){return r.filters.length===0&&r.limit===null&&r.startAt==null&&r.endAt==null&&(r.explicitOrderBy.length===0||r.explicitOrderBy.length===1&&r.explicitOrderBy[0].field.isKeyField())}function z0(r){return r.collectionGroup!==null}function Ni(r){const e=de(r);if(e.Te===null){e.Te=[];const t=new Set;for(const i of e.explicitOrderBy)e.Te.push(i),t.add(i.field.canonicalString());const n=e.explicitOrderBy.length>0?e.explicitOrderBy[e.explicitOrderBy.length-1].dir:"asc";(function(a){let l=new st(ut.comparator);return a.filters.forEach(u=>{u.getFlattenedFilters().forEach(d=>{d.isInequality()&&(l=l.add(d.field))})}),l})(e).forEach(i=>{t.has(i.canonicalString())||i.isKeyField()||e.Te.push(new Sl(i,n))}),t.has(ut.keyField().canonicalString())||e.Te.push(new Sl(ut.keyField(),n))}return e.Te}function _r(r){const e=de(r);return e.Ie||(e.Ie=r2(e,Ni(r))),e.Ie}function r2(r,e){if(r.limitType==="F")return Yp(r.path,r.collectionGroup,e,r.filters,r.limit,r.startAt,r.endAt);{e=e.map(s=>{const i=s.dir==="desc"?"asc":"desc";return new Sl(s.field,i)});const t=r.endAt?new kl(r.endAt.position,r.endAt.inclusive):null,n=r.startAt?new kl(r.startAt.position,r.startAt.inclusive):null;return Yp(r.path,r.collectionGroup,e,r.filters,r.limit,t,n)}}function dd(r,e){const t=r.filters.concat([e]);return new oa(r.path,r.collectionGroup,r.explicitOrderBy.slice(),t,r.limit,r.limitType,r.startAt,r.endAt)}function hd(r,e,t){return new oa(r.path,r.collectionGroup,r.explicitOrderBy.slice(),r.filters.slice(),e,t,r.startAt,r.endAt)}function fc(r,e){return Ph(_r(r),_r(e))&&r.limitType===e.limitType}function q0(r){return`${Rh(_r(r))}|lt:${r.limitType}`}function Us(r){return`Query(target=${function(t){let n=t.path.canonicalString();return t.collectionGroup!==null&&(n+=" collectionGroup="+t.collectionGroup),t.filters.length>0&&(n+=`, filters: [${t.filters.map(s=>U0(s)).join(", ")}]`),dc(t.limit)||(n+=", limit: "+t.limit),t.orderBy.length>0&&(n+=`, orderBy: [${t.orderBy.map(s=>function(a){return`${a.field.canonicalString()} (${a.dir})`}(s)).join(", ")}]`),t.startAt&&(n+=", startAt: ",n+=t.startAt.inclusive?"b:":"a:",n+=t.startAt.position.map(s=>ko(s)).join(",")),t.endAt&&(n+=", endAt: ",n+=t.endAt.inclusive?"a:":"b:",n+=t.endAt.position.map(s=>ko(s)).join(",")),`Target(${n})`}(_r(r))}; limitType=${r.limitType})`}function mc(r,e){return e.isFoundDocument()&&function(n,s){const i=s.key.path;return n.collectionGroup!==null?s.key.hasCollectionId(n.collectionGroup)&&n.path.isPrefixOf(i):te.isDocumentKey(n.path)?n.path.isEqual(i):n.path.isImmediateParentOf(i)}(r,e)&&function(n,s){for(const i of Ni(n))if(!i.field.isKeyField()&&s.data.field(i.field)===null)return!1;return!0}(r,e)&&function(n,s){for(const i of n.filters)if(!i.matches(s))return!1;return!0}(r,e)&&function(n,s){return!(n.startAt&&!function(a,l,u){const d=Kp(a,l,u);return a.inclusive?d<=0:d<0}(n.startAt,Ni(n),s)||n.endAt&&!function(a,l,u){const d=Kp(a,l,u);return a.inclusive?d>=0:d>0}(n.endAt,Ni(n),s))}(r,e)}function n2(r){return r.collectionGroup||(r.path.length%2==1?r.path.lastSegment():r.path.get(r.path.length-2))}function H0(r){return(e,t)=>{let n=!1;for(const s of Ni(r)){const i=s2(s,e,t);if(i!==0)return i;n=n||s.field.isKeyField()}return 0}}function s2(r,e,t){const n=r.field.isKeyField()?te.comparator(e.key,t.key):function(i,a,l){const u=a.data.field(i),d=l.data.field(i);return u!==null&&d!==null?Co(u,d):ae(42886)}(r.field,e,t);switch(r.dir){case"asc":return n;case"desc":return-1*n;default:return ae(19790,{direction:r.dir})}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Rs{constructor(e,t){this.mapKeyFn=e,this.equalsFn=t,this.inner={},this.innerSize=0}get(e){const t=this.mapKeyFn(e),n=this.inner[t];if(n!==void 0){for(const[s,i]of n)if(this.equalsFn(s,e))return i}}has(e){return this.get(e)!==void 0}set(e,t){const n=this.mapKeyFn(e),s=this.inner[n];if(s===void 0)return this.inner[n]=[[e,t]],void this.innerSize++;for(let i=0;i<s.length;i++)if(this.equalsFn(s[i][0],e))return void(s[i]=[e,t]);s.push([e,t]),this.innerSize++}delete(e){const t=this.mapKeyFn(e),n=this.inner[t];if(n===void 0)return!1;for(let s=0;s<n.length;s++)if(this.equalsFn(n[s][0],e))return n.length===1?delete this.inner[t]:n.splice(s,1),this.innerSize--,!0;return!1}forEach(e){Wn(this.inner,(t,n)=>{for(const[s,i]of n)e(s,i)})}isEmpty(){return k0(this.inner)}size(){return this.innerSize}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const o2=new ze(te.comparator);function Hr(){return o2}const W0=new ze(te.comparator);function bi(...r){let e=W0;for(const t of r)e=e.insert(t.key,t);return e}function G0(r){let e=W0;return r.forEach((t,n)=>e=e.insert(t,n.overlayedDocument)),e}function ss(){return Ci()}function K0(){return Ci()}function Ci(){return new Rs(r=>r.toString(),(r,e)=>r.isEqual(e))}const i2=new ze(te.comparator),a2=new st(te.comparator);function ve(...r){let e=a2;for(const t of r)e=e.add(t);return e}const l2=new st(ge);function c2(){return l2}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Mh(r,e){if(r.useProto3Json){if(isNaN(e))return{doubleValue:"NaN"};if(e===1/0)return{doubleValue:"Infinity"};if(e===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:El(e)?"-0":e}}function Q0(r){return{integerValue:""+r}}function u2(r,e){return LS(e)?Q0(e):Mh(r,e)}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class pc{constructor(){this._=void 0}}function d2(r,e,t){return r instanceof jl?function(s,i){const a={fields:{[I0]:{stringValue:j0},[R0]:{timestampValue:{seconds:s.seconds,nanos:s.nanoseconds}}}};return i&&Ih(i)&&(i=hc(i)),i&&(a.fields[A0]=i),{mapValue:a}}(t,e):r instanceof $i?X0(r,e):r instanceof Bi?J0(r,e):function(s,i){const a=Y0(s,i),l=Jp(a)+Jp(s.Ee);return ld(a)&&ld(s.Ee)?Q0(l):Mh(s.serializer,l)}(r,e)}function h2(r,e,t){return r instanceof $i?X0(r,e):r instanceof Bi?J0(r,e):t}function Y0(r,e){return r instanceof Il?function(n){return ld(n)||function(i){return!!i&&"doubleValue"in i}(n)}(e)?e:{integerValue:0}:null}class jl extends pc{}class $i extends pc{constructor(e){super(),this.elements=e}}function X0(r,e){const t=Z0(e);for(const n of r.elements)t.some(s=>kr(s,n))||t.push(n);return{arrayValue:{values:t}}}class Bi extends pc{constructor(e){super(),this.elements=e}}function J0(r,e){let t=Z0(e);for(const n of r.elements)t=t.filter(s=>!kr(s,n));return{arrayValue:{values:t}}}class Il extends pc{constructor(e,t){super(),this.serializer=e,this.Ee=t}}function Jp(r){return Qe(r.integerValue||r.doubleValue)}function Z0(r){return Ah(r)&&r.arrayValue.values?r.arrayValue.values.slice():[]}function f2(r,e){return r.field.isEqual(e.field)&&function(n,s){return n instanceof $i&&s instanceof $i||n instanceof Bi&&s instanceof Bi?No(n.elements,s.elements,kr):n instanceof Il&&s instanceof Il?kr(n.Ee,s.Ee):n instanceof jl&&s instanceof jl}(r.transform,e.transform)}class m2{constructor(e,t){this.version=e,this.transformResults=t}}class Ht{constructor(e,t){this.updateTime=e,this.exists=t}static none(){return new Ht}static exists(e){return new Ht(void 0,e)}static updateTime(e){return new Ht(e)}get isNone(){return this.updateTime===void 0&&this.exists===void 0}isEqual(e){return this.exists===e.exists&&(this.updateTime?!!e.updateTime&&this.updateTime.isEqual(e.updateTime):!e.updateTime)}}function sl(r,e){return r.updateTime!==void 0?e.isFoundDocument()&&e.version.isEqual(r.updateTime):r.exists===void 0||r.exists===e.isFoundDocument()}let gc=class{};function eb(r,e){if(!r.hasLocalMutations||e&&e.fields.length===0)return null;if(e===null)return r.isNoDocument()?new Dh(r.key,Ht.none()):new ia(r.key,r.data,Ht.none());{const t=r.data,n=Dt.empty();let s=new st(ut.comparator);for(let i of e.fields)if(!s.has(i)){let a=t.field(i);a===null&&i.length>1&&(i=i.popLast(),a=t.field(i)),a===null?n.delete(i):n.set(i,a),s=s.add(i)}return new Gn(r.key,n,new Bt(s.toArray()),Ht.none())}}function p2(r,e,t){r instanceof ia?function(s,i,a){const l=s.value.clone(),u=eg(s.fieldTransforms,i,a.transformResults);l.setAll(u),i.convertToFoundDocument(a.version,l).setHasCommittedMutations()}(r,e,t):r instanceof Gn?function(s,i,a){if(!sl(s.precondition,i))return void i.convertToUnknownDocument(a.version);const l=eg(s.fieldTransforms,i,a.transformResults),u=i.data;u.setAll(tb(s)),u.setAll(l),i.convertToFoundDocument(a.version,u).setHasCommittedMutations()}(r,e,t):function(s,i,a){i.convertToNoDocument(a.version).setHasCommittedMutations()}(0,e,t)}function ki(r,e,t,n){return r instanceof ia?function(i,a,l,u){if(!sl(i.precondition,a))return l;const d=i.value.clone(),h=tg(i.fieldTransforms,u,a);return d.setAll(h),a.convertToFoundDocument(a.version,d).setHasLocalMutations(),null}(r,e,t,n):r instanceof Gn?function(i,a,l,u){if(!sl(i.precondition,a))return l;const d=tg(i.fieldTransforms,u,a),h=a.data;return h.setAll(tb(i)),h.setAll(d),a.convertToFoundDocument(a.version,h).setHasLocalMutations(),l===null?null:l.unionWith(i.fieldMask.fields).unionWith(i.fieldTransforms.map(p=>p.field))}(r,e,t,n):function(i,a,l){return sl(i.precondition,a)?(a.convertToNoDocument(a.version).setHasLocalMutations(),null):l}(r,e,t)}function g2(r,e){let t=null;for(const n of r.fieldTransforms){const s=e.data.field(n.field),i=Y0(n.transform,s||null);i!=null&&(t===null&&(t=Dt.empty()),t.set(n.field,i))}return t||null}function Zp(r,e){return r.type===e.type&&!!r.key.isEqual(e.key)&&!!r.precondition.isEqual(e.precondition)&&!!function(n,s){return n===void 0&&s===void 0||!(!n||!s)&&No(n,s,(i,a)=>f2(i,a))}(r.fieldTransforms,e.fieldTransforms)&&(r.type===0?r.value.isEqual(e.value):r.type!==1||r.data.isEqual(e.data)&&r.fieldMask.isEqual(e.fieldMask))}class ia extends gc{constructor(e,t,n,s=[]){super(),this.key=e,this.value=t,this.precondition=n,this.fieldTransforms=s,this.type=0}getFieldMask(){return null}}class Gn extends gc{constructor(e,t,n,s,i=[]){super(),this.key=e,this.data=t,this.fieldMask=n,this.precondition=s,this.fieldTransforms=i,this.type=1}getFieldMask(){return this.fieldMask}}function tb(r){const e=new Map;return r.fieldMask.fields.forEach(t=>{if(!t.isEmpty()){const n=r.data.field(t);e.set(t,n)}}),e}function eg(r,e,t){const n=new Map;Ce(r.length===t.length,32656,{Ae:t.length,Re:r.length});for(let s=0;s<t.length;s++){const i=r[s],a=i.transform,l=e.data.field(i.field);n.set(i.field,h2(a,l,t[s]))}return n}function tg(r,e,t){const n=new Map;for(const s of r){const i=s.transform,a=t.data.field(s.field);n.set(s.field,d2(i,a,e))}return n}class Dh extends gc{constructor(e,t){super(),this.key=e,this.precondition=t,this.type=2,this.fieldTransforms=[]}getFieldMask(){return null}}class y2 extends gc{constructor(e,t){super(),this.key=e,this.precondition=t,this.type=3,this.fieldTransforms=[]}getFieldMask(){return null}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class x2{constructor(e,t,n,s){this.batchId=e,this.localWriteTime=t,this.baseMutations=n,this.mutations=s}applyToRemoteDocument(e,t){const n=t.mutationResults;for(let s=0;s<this.mutations.length;s++){const i=this.mutations[s];i.key.isEqual(e.key)&&p2(i,e,n[s])}}applyToLocalView(e,t){for(const n of this.baseMutations)n.key.isEqual(e.key)&&(t=ki(n,e,t,this.localWriteTime));for(const n of this.mutations)n.key.isEqual(e.key)&&(t=ki(n,e,t,this.localWriteTime));return t}applyToLocalDocumentSet(e,t){const n=K0();return this.mutations.forEach(s=>{const i=e.get(s.key),a=i.overlayedDocument;let l=this.applyToLocalView(a,i.mutatedFields);l=t.has(s.key)?null:l;const u=eb(a,l);u!==null&&n.set(s.key,u),a.isValidDocument()||a.convertToNoDocument(ce.min())}),n}keys(){return this.mutations.reduce((e,t)=>e.add(t.key),ve())}isEqual(e){return this.batchId===e.batchId&&No(this.mutations,e.mutations,(t,n)=>Zp(t,n))&&No(this.baseMutations,e.baseMutations,(t,n)=>Zp(t,n))}}class Oh{constructor(e,t,n,s){this.batch=e,this.commitVersion=t,this.mutationResults=n,this.docVersions=s}static from(e,t,n){Ce(e.mutations.length===n.length,58842,{Ve:e.mutations.length,me:n.length});let s=function(){return i2}();const i=e.mutations;for(let a=0;a<i.length;a++)s=s.insert(i[a].key,n[a].version);return new Oh(e,t,n,s)}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class b2{constructor(e,t){this.largestBatchId=e,this.mutation=t}getKey(){return this.mutation.key}isEqual(e){return e!==null&&this.mutation===e.mutation}toString(){return`Overlay{
      largestBatchId: ${this.largestBatchId},
      mutation: ${this.mutation.toString()}
    }`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class v2{constructor(e,t){this.count=e,this.unchangedNames=t}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var Xe,Te;function w2(r){switch(r){case $.OK:return ae(64938);case $.CANCELLED:case $.UNKNOWN:case $.DEADLINE_EXCEEDED:case $.RESOURCE_EXHAUSTED:case $.INTERNAL:case $.UNAVAILABLE:case $.UNAUTHENTICATED:return!1;case $.INVALID_ARGUMENT:case $.NOT_FOUND:case $.ALREADY_EXISTS:case $.PERMISSION_DENIED:case $.FAILED_PRECONDITION:case $.ABORTED:case $.OUT_OF_RANGE:case $.UNIMPLEMENTED:case $.DATA_LOSS:return!0;default:return ae(15467,{code:r})}}function rb(r){if(r===void 0)return qr("GRPC error has no .code"),$.UNKNOWN;switch(r){case Xe.OK:return $.OK;case Xe.CANCELLED:return $.CANCELLED;case Xe.UNKNOWN:return $.UNKNOWN;case Xe.DEADLINE_EXCEEDED:return $.DEADLINE_EXCEEDED;case Xe.RESOURCE_EXHAUSTED:return $.RESOURCE_EXHAUSTED;case Xe.INTERNAL:return $.INTERNAL;case Xe.UNAVAILABLE:return $.UNAVAILABLE;case Xe.UNAUTHENTICATED:return $.UNAUTHENTICATED;case Xe.INVALID_ARGUMENT:return $.INVALID_ARGUMENT;case Xe.NOT_FOUND:return $.NOT_FOUND;case Xe.ALREADY_EXISTS:return $.ALREADY_EXISTS;case Xe.PERMISSION_DENIED:return $.PERMISSION_DENIED;case Xe.FAILED_PRECONDITION:return $.FAILED_PRECONDITION;case Xe.ABORTED:return $.ABORTED;case Xe.OUT_OF_RANGE:return $.OUT_OF_RANGE;case Xe.UNIMPLEMENTED:return $.UNIMPLEMENTED;case Xe.DATA_LOSS:return $.DATA_LOSS;default:return ae(39323,{code:r})}}(Te=Xe||(Xe={}))[Te.OK=0]="OK",Te[Te.CANCELLED=1]="CANCELLED",Te[Te.UNKNOWN=2]="UNKNOWN",Te[Te.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",Te[Te.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",Te[Te.NOT_FOUND=5]="NOT_FOUND",Te[Te.ALREADY_EXISTS=6]="ALREADY_EXISTS",Te[Te.PERMISSION_DENIED=7]="PERMISSION_DENIED",Te[Te.UNAUTHENTICATED=16]="UNAUTHENTICATED",Te[Te.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",Te[Te.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",Te[Te.ABORTED=10]="ABORTED",Te[Te.OUT_OF_RANGE=11]="OUT_OF_RANGE",Te[Te.UNIMPLEMENTED=12]="UNIMPLEMENTED",Te[Te.INTERNAL=13]="INTERNAL",Te[Te.UNAVAILABLE=14]="UNAVAILABLE",Te[Te.DATA_LOSS=15]="DATA_LOSS";/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const _2=new Nn([4294967295,4294967295],0);function rg(r){const e=T0().encode(r),t=new p0;return t.update(e),new Uint8Array(t.digest())}function ng(r){const e=new DataView(r.buffer),t=e.getUint32(0,!0),n=e.getUint32(4,!0),s=e.getUint32(8,!0),i=e.getUint32(12,!0);return[new Nn([t,n],0),new Nn([s,i],0)]}class Lh{constructor(e,t,n){if(this.bitmap=e,this.padding=t,this.hashCount=n,t<0||t>=8)throw new vi(`Invalid padding: ${t}`);if(n<0)throw new vi(`Invalid hash count: ${n}`);if(e.length>0&&this.hashCount===0)throw new vi(`Invalid hash count: ${n}`);if(e.length===0&&t!==0)throw new vi(`Invalid padding when bitmap length is 0: ${t}`);this.fe=8*e.length-t,this.ge=Nn.fromNumber(this.fe)}pe(e,t,n){let s=e.add(t.multiply(Nn.fromNumber(n)));return s.compare(_2)===1&&(s=new Nn([s.getBits(0),s.getBits(1)],0)),s.modulo(this.ge).toNumber()}ye(e){return!!(this.bitmap[Math.floor(e/8)]&1<<e%8)}mightContain(e){if(this.fe===0)return!1;const t=rg(e),[n,s]=ng(t);for(let i=0;i<this.hashCount;i++){const a=this.pe(n,s,i);if(!this.ye(a))return!1}return!0}static create(e,t,n){const s=e%8==0?0:8-e%8,i=new Uint8Array(Math.ceil(e/8)),a=new Lh(i,s,t);return n.forEach(l=>a.insert(l)),a}insert(e){if(this.fe===0)return;const t=rg(e),[n,s]=ng(t);for(let i=0;i<this.hashCount;i++){const a=this.pe(n,s,i);this.we(a)}}we(e){const t=Math.floor(e/8),n=e%8;this.bitmap[t]|=1<<n}}class vi extends Error{constructor(){super(...arguments),this.name="BloomFilterError"}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class yc{constructor(e,t,n,s,i){this.snapshotVersion=e,this.targetChanges=t,this.targetMismatches=n,this.documentUpdates=s,this.resolvedLimboDocuments=i}static createSynthesizedRemoteEventForCurrentChange(e,t,n){const s=new Map;return s.set(e,aa.createSynthesizedTargetChangeForCurrentChange(e,t,n)),new yc(ce.min(),s,new ze(ge),Hr(),ve())}}class aa{constructor(e,t,n,s,i){this.resumeToken=e,this.current=t,this.addedDocuments=n,this.modifiedDocuments=s,this.removedDocuments=i}static createSynthesizedTargetChangeForCurrentChange(e,t,n){return new aa(n,t,ve(),ve(),ve())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ol{constructor(e,t,n,s){this.Se=e,this.removedTargetIds=t,this.key=n,this.be=s}}class nb{constructor(e,t){this.targetId=e,this.De=t}}class sb{constructor(e,t,n=dt.EMPTY_BYTE_STRING,s=null){this.state=e,this.targetIds=t,this.resumeToken=n,this.cause=s}}class sg{constructor(){this.ve=0,this.Ce=og(),this.Fe=dt.EMPTY_BYTE_STRING,this.Me=!1,this.xe=!0}get current(){return this.Me}get resumeToken(){return this.Fe}get Oe(){return this.ve!==0}get Ne(){return this.xe}Be(e){e.approximateByteSize()>0&&(this.xe=!0,this.Fe=e)}Le(){let e=ve(),t=ve(),n=ve();return this.Ce.forEach((s,i)=>{switch(i){case 0:e=e.add(s);break;case 2:t=t.add(s);break;case 1:n=n.add(s);break;default:ae(38017,{changeType:i})}}),new aa(this.Fe,this.Me,e,t,n)}ke(){this.xe=!1,this.Ce=og()}qe(e,t){this.xe=!0,this.Ce=this.Ce.insert(e,t)}Qe(e){this.xe=!0,this.Ce=this.Ce.remove(e)}$e(){this.ve+=1}Ue(){this.ve-=1,Ce(this.ve>=0,3241,{ve:this.ve})}Ke(){this.xe=!0,this.Me=!0}}class T2{constructor(e){this.We=e,this.Ge=new Map,this.ze=Hr(),this.je=$a(),this.Je=$a(),this.He=new ze(ge)}Ye(e){for(const t of e.Se)e.be&&e.be.isFoundDocument()?this.Ze(t,e.be):this.Xe(t,e.key,e.be);for(const t of e.removedTargetIds)this.Xe(t,e.key,e.be)}et(e){this.forEachTarget(e,t=>{const n=this.tt(t);switch(e.state){case 0:this.nt(t)&&n.Be(e.resumeToken);break;case 1:n.Ue(),n.Oe||n.ke(),n.Be(e.resumeToken);break;case 2:n.Ue(),n.Oe||this.removeTarget(t);break;case 3:this.nt(t)&&(n.Ke(),n.Be(e.resumeToken));break;case 4:this.nt(t)&&(this.rt(t),n.Be(e.resumeToken));break;default:ae(56790,{state:e.state})}})}forEachTarget(e,t){e.targetIds.length>0?e.targetIds.forEach(t):this.Ge.forEach((n,s)=>{this.nt(s)&&t(s)})}it(e){const t=e.targetId,n=e.De.count,s=this.st(t);if(s){const i=s.target;if(ud(i))if(n===0){const a=new te(i.path);this.Xe(t,a,vt.newNoDocument(a,ce.min()))}else Ce(n===1,20013,{expectedCount:n});else{const a=this.ot(t);if(a!==n){const l=this._t(e),u=l?this.ut(l,e,a):1;if(u!==0){this.rt(t);const d=u===2?"TargetPurposeExistenceFilterMismatchBloom":"TargetPurposeExistenceFilterMismatch";this.He=this.He.insert(t,d)}}}}}_t(e){const t=e.De.unchangedNames;if(!t||!t.bits)return null;const{bits:{bitmap:n="",padding:s=0},hashCount:i=0}=t;let a,l;try{a=Mn(n).toUint8Array()}catch(u){if(u instanceof S0)return In("Decoding the base64 bloom filter in existence filter failed ("+u.message+"); ignoring the bloom filter and falling back to full re-query."),null;throw u}try{l=new Lh(a,s,i)}catch(u){return In(u instanceof vi?"BloomFilter error: ":"Applying bloom filter failed: ",u),null}return l.fe===0?null:l}ut(e,t,n){return t.De.count===n-this.ht(e,t.targetId)?0:2}ht(e,t){const n=this.We.getRemoteKeysForTarget(t);let s=0;return n.forEach(i=>{const a=this.We.lt(),l=`projects/${a.projectId}/databases/${a.database}/documents/${i.path.canonicalString()}`;e.mightContain(l)||(this.Xe(t,i,null),s++)}),s}Pt(e){const t=new Map;this.Ge.forEach((i,a)=>{const l=this.st(a);if(l){if(i.current&&ud(l.target)){const u=new te(l.target.path);this.Tt(u).has(a)||this.It(a,u)||this.Xe(a,u,vt.newNoDocument(u,e))}i.Ne&&(t.set(a,i.Le()),i.ke())}});let n=ve();this.Je.forEach((i,a)=>{let l=!0;a.forEachWhile(u=>{const d=this.st(u);return!d||d.purpose==="TargetPurposeLimboResolution"||(l=!1,!1)}),l&&(n=n.add(i))}),this.ze.forEach((i,a)=>a.setReadTime(e));const s=new yc(e,t,this.He,this.ze,n);return this.ze=Hr(),this.je=$a(),this.Je=$a(),this.He=new ze(ge),s}Ze(e,t){if(!this.nt(e))return;const n=this.It(e,t.key)?2:0;this.tt(e).qe(t.key,n),this.ze=this.ze.insert(t.key,t),this.je=this.je.insert(t.key,this.Tt(t.key).add(e)),this.Je=this.Je.insert(t.key,this.dt(t.key).add(e))}Xe(e,t,n){if(!this.nt(e))return;const s=this.tt(e);this.It(e,t)?s.qe(t,1):s.Qe(t),this.Je=this.Je.insert(t,this.dt(t).delete(e)),this.Je=this.Je.insert(t,this.dt(t).add(e)),n&&(this.ze=this.ze.insert(t,n))}removeTarget(e){this.Ge.delete(e)}ot(e){const t=this.tt(e).Le();return this.We.getRemoteKeysForTarget(e).size+t.addedDocuments.size-t.removedDocuments.size}$e(e){this.tt(e).$e()}tt(e){let t=this.Ge.get(e);return t||(t=new sg,this.Ge.set(e,t)),t}dt(e){let t=this.Je.get(e);return t||(t=new st(ge),this.Je=this.Je.insert(e,t)),t}Tt(e){let t=this.je.get(e);return t||(t=new st(ge),this.je=this.je.insert(e,t)),t}nt(e){const t=this.st(e)!==null;return t||Q("WatchChangeAggregator","Detected inactive target",e),t}st(e){const t=this.Ge.get(e);return t&&t.Oe?null:this.We.Et(e)}rt(e){this.Ge.set(e,new sg),this.We.getRemoteKeysForTarget(e).forEach(t=>{this.Xe(e,t,null)})}It(e,t){return this.We.getRemoteKeysForTarget(e).has(t)}}function $a(){return new ze(te.comparator)}function og(){return new ze(te.comparator)}const E2={asc:"ASCENDING",desc:"DESCENDING"},N2={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"},C2={and:"AND",or:"OR"};class k2{constructor(e,t){this.databaseId=e,this.useProto3Json=t}}function fd(r,e){return r.useProto3Json||dc(e)?e:{value:e}}function Al(r,e){return r.useProto3Json?`${new Date(1e3*e.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+e.nanoseconds).slice(-9)}Z`:{seconds:""+e.seconds,nanos:e.nanoseconds}}function ob(r,e){return r.useProto3Json?e.toBase64():e.toUint8Array()}function S2(r,e){return Al(r,e.toTimestamp())}function Tr(r){return Ce(!!r,49232),ce.fromTimestamp(function(t){const n=Pn(t);return new Fe(n.seconds,n.nanos)}(r))}function Vh(r,e){return md(r,e).canonicalString()}function md(r,e){const t=function(s){return new Pe(["projects",s.projectId,"databases",s.database])}(r).child("documents");return e===void 0?t:t.child(e)}function ib(r){const e=Pe.fromString(r);return Ce(db(e),10190,{key:e.toString()}),e}function pd(r,e){return Vh(r.databaseId,e.path)}function _u(r,e){const t=ib(e);if(t.get(1)!==r.databaseId.projectId)throw new G($.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+t.get(1)+" vs "+r.databaseId.projectId);if(t.get(3)!==r.databaseId.database)throw new G($.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+t.get(3)+" vs "+r.databaseId.database);return new te(lb(t))}function ab(r,e){return Vh(r.databaseId,e)}function j2(r){const e=ib(r);return e.length===4?Pe.emptyPath():lb(e)}function gd(r){return new Pe(["projects",r.databaseId.projectId,"databases",r.databaseId.database]).canonicalString()}function lb(r){return Ce(r.length>4&&r.get(4)==="documents",29091,{key:r.toString()}),r.popFirst(5)}function ig(r,e,t){return{name:pd(r,e),fields:t.value.mapValue.fields}}function I2(r,e){let t;if("targetChange"in e){e.targetChange;const n=function(d){return d==="NO_CHANGE"?0:d==="ADD"?1:d==="REMOVE"?2:d==="CURRENT"?3:d==="RESET"?4:ae(39313,{state:d})}(e.targetChange.targetChangeType||"NO_CHANGE"),s=e.targetChange.targetIds||[],i=function(d,h){return d.useProto3Json?(Ce(h===void 0||typeof h=="string",58123),dt.fromBase64String(h||"")):(Ce(h===void 0||h instanceof Buffer||h instanceof Uint8Array,16193),dt.fromUint8Array(h||new Uint8Array))}(r,e.targetChange.resumeToken),a=e.targetChange.cause,l=a&&function(d){const h=d.code===void 0?$.UNKNOWN:rb(d.code);return new G(h,d.message||"")}(a);t=new sb(n,s,i,l||null)}else if("documentChange"in e){e.documentChange;const n=e.documentChange;n.document,n.document.name,n.document.updateTime;const s=_u(r,n.document.name),i=Tr(n.document.updateTime),a=n.document.createTime?Tr(n.document.createTime):ce.min(),l=new Dt({mapValue:{fields:n.document.fields}}),u=vt.newFoundDocument(s,i,a,l),d=n.targetIds||[],h=n.removedTargetIds||[];t=new ol(d,h,u.key,u)}else if("documentDelete"in e){e.documentDelete;const n=e.documentDelete;n.document;const s=_u(r,n.document),i=n.readTime?Tr(n.readTime):ce.min(),a=vt.newNoDocument(s,i),l=n.removedTargetIds||[];t=new ol([],l,a.key,a)}else if("documentRemove"in e){e.documentRemove;const n=e.documentRemove;n.document;const s=_u(r,n.document),i=n.removedTargetIds||[];t=new ol([],i,s,null)}else{if(!("filter"in e))return ae(11601,{At:e});{e.filter;const n=e.filter;n.targetId;const{count:s=0,unchangedNames:i}=n,a=new v2(s,i),l=n.targetId;t=new nb(l,a)}}return t}function A2(r,e){let t;if(e instanceof ia)t={update:ig(r,e.key,e.value)};else if(e instanceof Dh)t={delete:pd(r,e.key)};else if(e instanceof Gn)t={update:ig(r,e.key,e.data),updateMask:U2(e.fieldMask)};else{if(!(e instanceof y2))return ae(16599,{Rt:e.type});t={verify:pd(r,e.key)}}return e.fieldTransforms.length>0&&(t.updateTransforms=e.fieldTransforms.map(n=>function(i,a){const l=a.transform;if(l instanceof jl)return{fieldPath:a.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(l instanceof $i)return{fieldPath:a.field.canonicalString(),appendMissingElements:{values:l.elements}};if(l instanceof Bi)return{fieldPath:a.field.canonicalString(),removeAllFromArray:{values:l.elements}};if(l instanceof Il)return{fieldPath:a.field.canonicalString(),increment:l.Ee};throw ae(20930,{transform:a.transform})}(0,n))),e.precondition.isNone||(t.currentDocument=function(s,i){return i.updateTime!==void 0?{updateTime:S2(s,i.updateTime)}:i.exists!==void 0?{exists:i.exists}:ae(27497)}(r,e.precondition)),t}function R2(r,e){return r&&r.length>0?(Ce(e!==void 0,14353),r.map(t=>function(s,i){let a=s.updateTime?Tr(s.updateTime):Tr(i);return a.isEqual(ce.min())&&(a=Tr(i)),new m2(a,s.transformResults||[])}(t,e))):[]}function P2(r,e){return{documents:[ab(r,e.path)]}}function M2(r,e){const t={structuredQuery:{}},n=e.path;let s;e.collectionGroup!==null?(s=n,t.structuredQuery.from=[{collectionId:e.collectionGroup,allDescendants:!0}]):(s=n.popLast(),t.structuredQuery.from=[{collectionId:n.lastSegment()}]),t.parent=ab(r,s);const i=function(d){if(d.length!==0)return ub(ur.create(d,"and"))}(e.filters);i&&(t.structuredQuery.where=i);const a=function(d){if(d.length!==0)return d.map(h=>function(g){return{field:$s(g.field),direction:L2(g.dir)}}(h))}(e.orderBy);a&&(t.structuredQuery.orderBy=a);const l=fd(r,e.limit);return l!==null&&(t.structuredQuery.limit=l),e.startAt&&(t.structuredQuery.startAt=function(d){return{before:d.inclusive,values:d.position}}(e.startAt)),e.endAt&&(t.structuredQuery.endAt=function(d){return{before:!d.inclusive,values:d.position}}(e.endAt)),{Vt:t,parent:s}}function D2(r){let e=j2(r.parent);const t=r.structuredQuery,n=t.from?t.from.length:0;let s=null;if(n>0){Ce(n===1,65062);const h=t.from[0];h.allDescendants?s=h.collectionId:e=e.child(h.collectionId)}let i=[];t.where&&(i=function(p){const g=cb(p);return g instanceof ur&&V0(g)?g.getFilters():[g]}(t.where));let a=[];t.orderBy&&(a=function(p){return p.map(g=>function(C){return new Sl(Bs(C.field),function(v){switch(v){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}}(C.direction))}(g))}(t.orderBy));let l=null;t.limit&&(l=function(p){let g;return g=typeof p=="object"?p.value:p,dc(g)?null:g}(t.limit));let u=null;t.startAt&&(u=function(p){const g=!!p.before,b=p.values||[];return new kl(b,g)}(t.startAt));let d=null;return t.endAt&&(d=function(p){const g=!p.before,b=p.values||[];return new kl(b,g)}(t.endAt)),t2(e,s,a,i,l,"F",u,d)}function O2(r,e){const t=function(s){switch(s){case"TargetPurposeListen":return null;case"TargetPurposeExistenceFilterMismatch":return"existence-filter-mismatch";case"TargetPurposeExistenceFilterMismatchBloom":return"existence-filter-mismatch-bloom";case"TargetPurposeLimboResolution":return"limbo-document";default:return ae(28987,{purpose:s})}}(e.purpose);return t==null?null:{"goog-listen-tags":t}}function cb(r){return r.unaryFilter!==void 0?function(t){switch(t.unaryFilter.op){case"IS_NAN":const n=Bs(t.unaryFilter.field);return Ze.create(n,"==",{doubleValue:NaN});case"IS_NULL":const s=Bs(t.unaryFilter.field);return Ze.create(s,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":const i=Bs(t.unaryFilter.field);return Ze.create(i,"!=",{doubleValue:NaN});case"IS_NOT_NULL":const a=Bs(t.unaryFilter.field);return Ze.create(a,"!=",{nullValue:"NULL_VALUE"});case"OPERATOR_UNSPECIFIED":return ae(61313);default:return ae(60726)}}(r):r.fieldFilter!==void 0?function(t){return Ze.create(Bs(t.fieldFilter.field),function(s){switch(s){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";case"OPERATOR_UNSPECIFIED":return ae(58110);default:return ae(50506)}}(t.fieldFilter.op),t.fieldFilter.value)}(r):r.compositeFilter!==void 0?function(t){return ur.create(t.compositeFilter.filters.map(n=>cb(n)),function(s){switch(s){case"AND":return"and";case"OR":return"or";default:return ae(1026)}}(t.compositeFilter.op))}(r):ae(30097,{filter:r})}function L2(r){return E2[r]}function V2(r){return N2[r]}function F2(r){return C2[r]}function $s(r){return{fieldPath:r.canonicalString()}}function Bs(r){return ut.fromServerFormat(r.fieldPath)}function ub(r){return r instanceof Ze?function(t){if(t.op==="=="){if(Gp(t.value))return{unaryFilter:{field:$s(t.field),op:"IS_NAN"}};if(Wp(t.value))return{unaryFilter:{field:$s(t.field),op:"IS_NULL"}}}else if(t.op==="!="){if(Gp(t.value))return{unaryFilter:{field:$s(t.field),op:"IS_NOT_NAN"}};if(Wp(t.value))return{unaryFilter:{field:$s(t.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:$s(t.field),op:V2(t.op),value:t.value}}}(r):r instanceof ur?function(t){const n=t.getFilters().map(s=>ub(s));return n.length===1?n[0]:{compositeFilter:{op:F2(t.op),filters:n}}}(r):ae(54877,{filter:r})}function U2(r){const e=[];return r.fields.forEach(t=>e.push(t.canonicalString())),{fieldPaths:e}}function db(r){return r.length>=4&&r.get(0)==="projects"&&r.get(2)==="databases"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _n{constructor(e,t,n,s,i=ce.min(),a=ce.min(),l=dt.EMPTY_BYTE_STRING,u=null){this.target=e,this.targetId=t,this.purpose=n,this.sequenceNumber=s,this.snapshotVersion=i,this.lastLimboFreeSnapshotVersion=a,this.resumeToken=l,this.expectedCount=u}withSequenceNumber(e){return new _n(this.target,this.targetId,this.purpose,e,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,this.expectedCount)}withResumeToken(e,t){return new _n(this.target,this.targetId,this.purpose,this.sequenceNumber,t,this.lastLimboFreeSnapshotVersion,e,null)}withExpectedCount(e){return new _n(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,e)}withLastLimboFreeSnapshotVersion(e){return new _n(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,e,this.resumeToken,this.expectedCount)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $2{constructor(e){this.gt=e}}function B2(r){const e=D2({parent:r.parent,structuredQuery:r.structuredQuery});return r.limitType==="LAST"?hd(e,e.limit,"L"):e}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class z2{constructor(){this.Dn=new q2}addToCollectionParentIndex(e,t){return this.Dn.add(t),B.resolve()}getCollectionParents(e,t){return B.resolve(this.Dn.getEntries(t))}addFieldIndex(e,t){return B.resolve()}deleteFieldIndex(e,t){return B.resolve()}deleteAllFieldIndexes(e){return B.resolve()}createTargetIndexes(e,t){return B.resolve()}getDocumentsMatchingTarget(e,t){return B.resolve(null)}getIndexType(e,t){return B.resolve(0)}getFieldIndexes(e,t){return B.resolve([])}getNextCollectionGroupToUpdate(e){return B.resolve(null)}getMinOffset(e,t){return B.resolve(Rn.min())}getMinOffsetFromCollectionGroup(e,t){return B.resolve(Rn.min())}updateCollectionGroup(e,t,n){return B.resolve()}updateIndexEntries(e,t){return B.resolve()}}class q2{constructor(){this.index={}}add(e){const t=e.lastSegment(),n=e.popLast(),s=this.index[t]||new st(Pe.comparator),i=!s.has(n);return this.index[t]=s.add(n),i}has(e){const t=e.lastSegment(),n=e.popLast(),s=this.index[t];return s&&s.has(n)}getEntries(e){return(this.index[e]||new st(Pe.comparator)).toArray()}}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ag={didRun:!1,sequenceNumbersCollected:0,targetsRemoved:0,documentsRemoved:0},hb=41943040;class Pt{static withCacheSize(e){return new Pt(e,Pt.DEFAULT_COLLECTION_PERCENTILE,Pt.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)}constructor(e,t,n){this.cacheSizeCollectionThreshold=e,this.percentileToCollect=t,this.maximumSequenceNumbersToCollect=n}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */Pt.DEFAULT_COLLECTION_PERCENTILE=10,Pt.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,Pt.DEFAULT=new Pt(hb,Pt.DEFAULT_COLLECTION_PERCENTILE,Pt.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),Pt.DISABLED=new Pt(-1,0,0);/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class So{constructor(e){this._r=e}next(){return this._r+=2,this._r}static ar(){return new So(0)}static ur(){return new So(-1)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const lg="LruGarbageCollector",H2=1048576;function cg([r,e],[t,n]){const s=ge(r,t);return s===0?ge(e,n):s}class W2{constructor(e){this.Tr=e,this.buffer=new st(cg),this.Ir=0}dr(){return++this.Ir}Er(e){const t=[e,this.dr()];if(this.buffer.size<this.Tr)this.buffer=this.buffer.add(t);else{const n=this.buffer.last();cg(t,n)<0&&(this.buffer=this.buffer.delete(n).add(t))}}get maxValue(){return this.buffer.last()[0]}}class G2{constructor(e,t,n){this.garbageCollector=e,this.asyncQueue=t,this.localStore=n,this.Ar=null}start(){this.garbageCollector.params.cacheSizeCollectionThreshold!==-1&&this.Rr(6e4)}stop(){this.Ar&&(this.Ar.cancel(),this.Ar=null)}get started(){return this.Ar!==null}Rr(e){Q(lg,`Garbage collection scheduled in ${e}ms`),this.Ar=this.asyncQueue.enqueueAfterDelay("lru_garbage_collection",e,async()=>{this.Ar=null;try{await this.localStore.collectGarbage(this.garbageCollector)}catch(t){Fo(t)?Q(lg,"Ignoring IndexedDB error during garbage collection: ",t):await Vo(t)}await this.Rr(3e5)})}}class K2{constructor(e,t){this.Vr=e,this.params=t}calculateTargetCount(e,t){return this.Vr.mr(e).next(n=>Math.floor(t/100*n))}nthSequenceNumber(e,t){if(t===0)return B.resolve(uc.ue);const n=new W2(t);return this.Vr.forEachTarget(e,s=>n.Er(s.sequenceNumber)).next(()=>this.Vr.gr(e,s=>n.Er(s))).next(()=>n.maxValue)}removeTargets(e,t,n){return this.Vr.removeTargets(e,t,n)}removeOrphanedDocuments(e,t){return this.Vr.removeOrphanedDocuments(e,t)}collect(e,t){return this.params.cacheSizeCollectionThreshold===-1?(Q("LruGarbageCollector","Garbage collection skipped; disabled"),B.resolve(ag)):this.getCacheSize(e).next(n=>n<this.params.cacheSizeCollectionThreshold?(Q("LruGarbageCollector",`Garbage collection skipped; Cache size ${n} is lower than threshold ${this.params.cacheSizeCollectionThreshold}`),ag):this.pr(e,t))}getCacheSize(e){return this.Vr.getCacheSize(e)}pr(e,t){let n,s,i,a,l,u,d;const h=Date.now();return this.calculateTargetCount(e,this.params.percentileToCollect).next(p=>(p>this.params.maximumSequenceNumbersToCollect?(Q("LruGarbageCollector",`Capping sequence numbers to collect down to the maximum of ${this.params.maximumSequenceNumbersToCollect} from ${p}`),s=this.params.maximumSequenceNumbersToCollect):s=p,a=Date.now(),this.nthSequenceNumber(e,s))).next(p=>(n=p,l=Date.now(),this.removeTargets(e,n,t))).next(p=>(i=p,u=Date.now(),this.removeOrphanedDocuments(e,n))).next(p=>(d=Date.now(),Fs()<=be.DEBUG&&Q("LruGarbageCollector",`LRU Garbage Collection
	Counted targets in ${a-h}ms
	Determined least recently used ${s} in `+(l-a)+`ms
	Removed ${i} targets in `+(u-l)+`ms
	Removed ${p} documents in `+(d-u)+`ms
Total Duration: ${d-h}ms`),B.resolve({didRun:!0,sequenceNumbersCollected:s,targetsRemoved:i,documentsRemoved:p})))}}function Q2(r,e){return new K2(r,e)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Y2{constructor(){this.changes=new Rs(e=>e.toString(),(e,t)=>e.isEqual(t)),this.changesApplied=!1}addEntry(e){this.assertNotApplied(),this.changes.set(e.key,e)}removeEntry(e,t){this.assertNotApplied(),this.changes.set(e,vt.newInvalidDocument(e).setReadTime(t))}getEntry(e,t){this.assertNotApplied();const n=this.changes.get(t);return n!==void 0?B.resolve(n):this.getFromCache(e,t)}getEntries(e,t){return this.getAllFromCache(e,t)}apply(e){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(e)}assertNotApplied(){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class X2{constructor(e,t){this.overlayedDocument=e,this.mutatedFields=t}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class J2{constructor(e,t,n,s){this.remoteDocumentCache=e,this.mutationQueue=t,this.documentOverlayCache=n,this.indexManager=s}getDocument(e,t){let n=null;return this.documentOverlayCache.getOverlay(e,t).next(s=>(n=s,this.remoteDocumentCache.getEntry(e,t))).next(s=>(n!==null&&ki(n.mutation,s,Bt.empty(),Fe.now()),s))}getDocuments(e,t){return this.remoteDocumentCache.getEntries(e,t).next(n=>this.getLocalViewOfDocuments(e,n,ve()).next(()=>n))}getLocalViewOfDocuments(e,t,n=ve()){const s=ss();return this.populateOverlays(e,s,t).next(()=>this.computeViews(e,t,s,n).next(i=>{let a=bi();return i.forEach((l,u)=>{a=a.insert(l,u.overlayedDocument)}),a}))}getOverlayedDocuments(e,t){const n=ss();return this.populateOverlays(e,n,t).next(()=>this.computeViews(e,t,n,ve()))}populateOverlays(e,t,n){const s=[];return n.forEach(i=>{t.has(i)||s.push(i)}),this.documentOverlayCache.getOverlays(e,s).next(i=>{i.forEach((a,l)=>{t.set(a,l)})})}computeViews(e,t,n,s){let i=Hr();const a=Ci(),l=function(){return Ci()}();return t.forEach((u,d)=>{const h=n.get(d.key);s.has(d.key)&&(h===void 0||h.mutation instanceof Gn)?i=i.insert(d.key,d):h!==void 0?(a.set(d.key,h.mutation.getFieldMask()),ki(h.mutation,d,h.mutation.getFieldMask(),Fe.now())):a.set(d.key,Bt.empty())}),this.recalculateAndSaveOverlays(e,i).next(u=>(u.forEach((d,h)=>a.set(d,h)),t.forEach((d,h)=>{var p;return l.set(d,new X2(h,(p=a.get(d))!==null&&p!==void 0?p:null))}),l))}recalculateAndSaveOverlays(e,t){const n=Ci();let s=new ze((a,l)=>a-l),i=ve();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(e,t).next(a=>{for(const l of a)l.keys().forEach(u=>{const d=t.get(u);if(d===null)return;let h=n.get(u)||Bt.empty();h=l.applyToLocalView(d,h),n.set(u,h);const p=(s.get(l.batchId)||ve()).add(u);s=s.insert(l.batchId,p)})}).next(()=>{const a=[],l=s.getReverseIterator();for(;l.hasNext();){const u=l.getNext(),d=u.key,h=u.value,p=K0();h.forEach(g=>{if(!i.has(g)){const b=eb(t.get(g),n.get(g));b!==null&&p.set(g,b),i=i.add(g)}}),a.push(this.documentOverlayCache.saveOverlays(e,d,p))}return B.waitFor(a)}).next(()=>n)}recalculateAndSaveOverlaysForDocumentKeys(e,t){return this.remoteDocumentCache.getEntries(e,t).next(n=>this.recalculateAndSaveOverlays(e,n))}getDocumentsMatchingQuery(e,t,n,s){return function(a){return te.isDocumentKey(a.path)&&a.collectionGroup===null&&a.filters.length===0}(t)?this.getDocumentsMatchingDocumentQuery(e,t.path):z0(t)?this.getDocumentsMatchingCollectionGroupQuery(e,t,n,s):this.getDocumentsMatchingCollectionQuery(e,t,n,s)}getNextDocuments(e,t,n,s){return this.remoteDocumentCache.getAllFromCollectionGroup(e,t,n,s).next(i=>{const a=s-i.size>0?this.documentOverlayCache.getOverlaysForCollectionGroup(e,t,n.largestBatchId,s-i.size):B.resolve(ss());let l=Li,u=i;return a.next(d=>B.forEach(d,(h,p)=>(l<p.largestBatchId&&(l=p.largestBatchId),i.get(h)?B.resolve():this.remoteDocumentCache.getEntry(e,h).next(g=>{u=u.insert(h,g)}))).next(()=>this.populateOverlays(e,d,i)).next(()=>this.computeViews(e,u,d,ve())).next(h=>({batchId:l,changes:G0(h)})))})}getDocumentsMatchingDocumentQuery(e,t){return this.getDocument(e,new te(t)).next(n=>{let s=bi();return n.isFoundDocument()&&(s=s.insert(n.key,n)),s})}getDocumentsMatchingCollectionGroupQuery(e,t,n,s){const i=t.collectionGroup;let a=bi();return this.indexManager.getCollectionParents(e,i).next(l=>B.forEach(l,u=>{const d=function(p,g){return new oa(g,null,p.explicitOrderBy.slice(),p.filters.slice(),p.limit,p.limitType,p.startAt,p.endAt)}(t,u.child(i));return this.getDocumentsMatchingCollectionQuery(e,d,n,s).next(h=>{h.forEach((p,g)=>{a=a.insert(p,g)})})}).next(()=>a))}getDocumentsMatchingCollectionQuery(e,t,n,s){let i;return this.documentOverlayCache.getOverlaysForCollection(e,t.path,n.largestBatchId).next(a=>(i=a,this.remoteDocumentCache.getDocumentsMatchingQuery(e,t,n,i,s))).next(a=>{i.forEach((u,d)=>{const h=d.getKey();a.get(h)===null&&(a=a.insert(h,vt.newInvalidDocument(h)))});let l=bi();return a.forEach((u,d)=>{const h=i.get(u);h!==void 0&&ki(h.mutation,d,Bt.empty(),Fe.now()),mc(t,d)&&(l=l.insert(u,d))}),l})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Z2{constructor(e){this.serializer=e,this.Br=new Map,this.Lr=new Map}getBundleMetadata(e,t){return B.resolve(this.Br.get(t))}saveBundleMetadata(e,t){return this.Br.set(t.id,function(s){return{id:s.id,version:s.version,createTime:Tr(s.createTime)}}(t)),B.resolve()}getNamedQuery(e,t){return B.resolve(this.Lr.get(t))}saveNamedQuery(e,t){return this.Lr.set(t.name,function(s){return{name:s.name,query:B2(s.bundledQuery),readTime:Tr(s.readTime)}}(t)),B.resolve()}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ej{constructor(){this.overlays=new ze(te.comparator),this.kr=new Map}getOverlay(e,t){return B.resolve(this.overlays.get(t))}getOverlays(e,t){const n=ss();return B.forEach(t,s=>this.getOverlay(e,s).next(i=>{i!==null&&n.set(s,i)})).next(()=>n)}saveOverlays(e,t,n){return n.forEach((s,i)=>{this.wt(e,t,i)}),B.resolve()}removeOverlaysForBatchId(e,t,n){const s=this.kr.get(n);return s!==void 0&&(s.forEach(i=>this.overlays=this.overlays.remove(i)),this.kr.delete(n)),B.resolve()}getOverlaysForCollection(e,t,n){const s=ss(),i=t.length+1,a=new te(t.child("")),l=this.overlays.getIteratorFrom(a);for(;l.hasNext();){const u=l.getNext().value,d=u.getKey();if(!t.isPrefixOf(d.path))break;d.path.length===i&&u.largestBatchId>n&&s.set(u.getKey(),u)}return B.resolve(s)}getOverlaysForCollectionGroup(e,t,n,s){let i=new ze((d,h)=>d-h);const a=this.overlays.getIterator();for(;a.hasNext();){const d=a.getNext().value;if(d.getKey().getCollectionGroup()===t&&d.largestBatchId>n){let h=i.get(d.largestBatchId);h===null&&(h=ss(),i=i.insert(d.largestBatchId,h)),h.set(d.getKey(),d)}}const l=ss(),u=i.getIterator();for(;u.hasNext()&&(u.getNext().value.forEach((d,h)=>l.set(d,h)),!(l.size()>=s)););return B.resolve(l)}wt(e,t,n){const s=this.overlays.get(n.key);if(s!==null){const a=this.kr.get(s.largestBatchId).delete(n.key);this.kr.set(s.largestBatchId,a)}this.overlays=this.overlays.insert(n.key,new b2(t,n));let i=this.kr.get(t);i===void 0&&(i=ve(),this.kr.set(t,i)),this.kr.set(t,i.add(n.key))}}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class tj{constructor(){this.sessionToken=dt.EMPTY_BYTE_STRING}getSessionToken(e){return B.resolve(this.sessionToken)}setSessionToken(e,t){return this.sessionToken=t,B.resolve()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Fh{constructor(){this.qr=new st(it.Qr),this.$r=new st(it.Ur)}isEmpty(){return this.qr.isEmpty()}addReference(e,t){const n=new it(e,t);this.qr=this.qr.add(n),this.$r=this.$r.add(n)}Kr(e,t){e.forEach(n=>this.addReference(n,t))}removeReference(e,t){this.Wr(new it(e,t))}Gr(e,t){e.forEach(n=>this.removeReference(n,t))}zr(e){const t=new te(new Pe([])),n=new it(t,e),s=new it(t,e+1),i=[];return this.$r.forEachInRange([n,s],a=>{this.Wr(a),i.push(a.key)}),i}jr(){this.qr.forEach(e=>this.Wr(e))}Wr(e){this.qr=this.qr.delete(e),this.$r=this.$r.delete(e)}Jr(e){const t=new te(new Pe([])),n=new it(t,e),s=new it(t,e+1);let i=ve();return this.$r.forEachInRange([n,s],a=>{i=i.add(a.key)}),i}containsKey(e){const t=new it(e,0),n=this.qr.firstAfterOrEqual(t);return n!==null&&e.isEqual(n.key)}}class it{constructor(e,t){this.key=e,this.Hr=t}static Qr(e,t){return te.comparator(e.key,t.key)||ge(e.Hr,t.Hr)}static Ur(e,t){return ge(e.Hr,t.Hr)||te.comparator(e.key,t.key)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class rj{constructor(e,t){this.indexManager=e,this.referenceDelegate=t,this.mutationQueue=[],this.er=1,this.Yr=new st(it.Qr)}checkEmpty(e){return B.resolve(this.mutationQueue.length===0)}addMutationBatch(e,t,n,s){const i=this.er;this.er++,this.mutationQueue.length>0&&this.mutationQueue[this.mutationQueue.length-1];const a=new x2(i,t,n,s);this.mutationQueue.push(a);for(const l of s)this.Yr=this.Yr.add(new it(l.key,i)),this.indexManager.addToCollectionParentIndex(e,l.key.path.popLast());return B.resolve(a)}lookupMutationBatch(e,t){return B.resolve(this.Zr(t))}getNextMutationBatchAfterBatchId(e,t){const n=t+1,s=this.Xr(n),i=s<0?0:s;return B.resolve(this.mutationQueue.length>i?this.mutationQueue[i]:null)}getHighestUnacknowledgedBatchId(){return B.resolve(this.mutationQueue.length===0?jh:this.er-1)}getAllMutationBatches(e){return B.resolve(this.mutationQueue.slice())}getAllMutationBatchesAffectingDocumentKey(e,t){const n=new it(t,0),s=new it(t,Number.POSITIVE_INFINITY),i=[];return this.Yr.forEachInRange([n,s],a=>{const l=this.Zr(a.Hr);i.push(l)}),B.resolve(i)}getAllMutationBatchesAffectingDocumentKeys(e,t){let n=new st(ge);return t.forEach(s=>{const i=new it(s,0),a=new it(s,Number.POSITIVE_INFINITY);this.Yr.forEachInRange([i,a],l=>{n=n.add(l.Hr)})}),B.resolve(this.ei(n))}getAllMutationBatchesAffectingQuery(e,t){const n=t.path,s=n.length+1;let i=n;te.isDocumentKey(i)||(i=i.child(""));const a=new it(new te(i),0);let l=new st(ge);return this.Yr.forEachWhile(u=>{const d=u.key.path;return!!n.isPrefixOf(d)&&(d.length===s&&(l=l.add(u.Hr)),!0)},a),B.resolve(this.ei(l))}ei(e){const t=[];return e.forEach(n=>{const s=this.Zr(n);s!==null&&t.push(s)}),t}removeMutationBatch(e,t){Ce(this.ti(t.batchId,"removed")===0,55003),this.mutationQueue.shift();let n=this.Yr;return B.forEach(t.mutations,s=>{const i=new it(s.key,t.batchId);return n=n.delete(i),this.referenceDelegate.markPotentiallyOrphaned(e,s.key)}).next(()=>{this.Yr=n})}rr(e){}containsKey(e,t){const n=new it(t,0),s=this.Yr.firstAfterOrEqual(n);return B.resolve(t.isEqual(s&&s.key))}performConsistencyCheck(e){return this.mutationQueue.length,B.resolve()}ti(e,t){return this.Xr(e)}Xr(e){return this.mutationQueue.length===0?0:e-this.mutationQueue[0].batchId}Zr(e){const t=this.Xr(e);return t<0||t>=this.mutationQueue.length?null:this.mutationQueue[t]}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class nj{constructor(e){this.ni=e,this.docs=function(){return new ze(te.comparator)}(),this.size=0}setIndexManager(e){this.indexManager=e}addEntry(e,t){const n=t.key,s=this.docs.get(n),i=s?s.size:0,a=this.ni(t);return this.docs=this.docs.insert(n,{document:t.mutableCopy(),size:a}),this.size+=a-i,this.indexManager.addToCollectionParentIndex(e,n.path.popLast())}removeEntry(e){const t=this.docs.get(e);t&&(this.docs=this.docs.remove(e),this.size-=t.size)}getEntry(e,t){const n=this.docs.get(t);return B.resolve(n?n.document.mutableCopy():vt.newInvalidDocument(t))}getEntries(e,t){let n=Hr();return t.forEach(s=>{const i=this.docs.get(s);n=n.insert(s,i?i.document.mutableCopy():vt.newInvalidDocument(s))}),B.resolve(n)}getDocumentsMatchingQuery(e,t,n,s){let i=Hr();const a=t.path,l=new te(a.child("__id-9223372036854775808__")),u=this.docs.getIteratorFrom(l);for(;u.hasNext();){const{key:d,value:{document:h}}=u.getNext();if(!a.isPrefixOf(d.path))break;d.path.length>a.length+1||PS(RS(h),n)<=0||(s.has(h.key)||mc(t,h))&&(i=i.insert(h.key,h.mutableCopy()))}return B.resolve(i)}getAllFromCollectionGroup(e,t,n,s){ae(9500)}ri(e,t){return B.forEach(this.docs,n=>t(n))}newChangeBuffer(e){return new sj(this)}getSize(e){return B.resolve(this.size)}}class sj extends Y2{constructor(e){super(),this.Or=e}applyChanges(e){const t=[];return this.changes.forEach((n,s)=>{s.isValidDocument()?t.push(this.Or.addEntry(e,s)):this.Or.removeEntry(n)}),B.waitFor(t)}getFromCache(e,t){return this.Or.getEntry(e,t)}getAllFromCache(e,t){return this.Or.getEntries(e,t)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class oj{constructor(e){this.persistence=e,this.ii=new Rs(t=>Rh(t),Ph),this.lastRemoteSnapshotVersion=ce.min(),this.highestTargetId=0,this.si=0,this.oi=new Fh,this.targetCount=0,this._i=So.ar()}forEachTarget(e,t){return this.ii.forEach((n,s)=>t(s)),B.resolve()}getLastRemoteSnapshotVersion(e){return B.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(e){return B.resolve(this.si)}allocateTargetId(e){return this.highestTargetId=this._i.next(),B.resolve(this.highestTargetId)}setTargetsMetadata(e,t,n){return n&&(this.lastRemoteSnapshotVersion=n),t>this.si&&(this.si=t),B.resolve()}hr(e){this.ii.set(e.target,e);const t=e.targetId;t>this.highestTargetId&&(this._i=new So(t),this.highestTargetId=t),e.sequenceNumber>this.si&&(this.si=e.sequenceNumber)}addTargetData(e,t){return this.hr(t),this.targetCount+=1,B.resolve()}updateTargetData(e,t){return this.hr(t),B.resolve()}removeTargetData(e,t){return this.ii.delete(t.target),this.oi.zr(t.targetId),this.targetCount-=1,B.resolve()}removeTargets(e,t,n){let s=0;const i=[];return this.ii.forEach((a,l)=>{l.sequenceNumber<=t&&n.get(l.targetId)===null&&(this.ii.delete(a),i.push(this.removeMatchingKeysForTargetId(e,l.targetId)),s++)}),B.waitFor(i).next(()=>s)}getTargetCount(e){return B.resolve(this.targetCount)}getTargetData(e,t){const n=this.ii.get(t)||null;return B.resolve(n)}addMatchingKeys(e,t,n){return this.oi.Kr(t,n),B.resolve()}removeMatchingKeys(e,t,n){this.oi.Gr(t,n);const s=this.persistence.referenceDelegate,i=[];return s&&t.forEach(a=>{i.push(s.markPotentiallyOrphaned(e,a))}),B.waitFor(i)}removeMatchingKeysForTargetId(e,t){return this.oi.zr(t),B.resolve()}getMatchingKeysForTargetId(e,t){const n=this.oi.Jr(t);return B.resolve(n)}containsKey(e,t){return B.resolve(this.oi.containsKey(t))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class fb{constructor(e,t){this.ai={},this.overlays={},this.ui=new uc(0),this.ci=!1,this.ci=!0,this.li=new tj,this.referenceDelegate=e(this),this.hi=new oj(this),this.indexManager=new z2,this.remoteDocumentCache=function(s){return new nj(s)}(n=>this.referenceDelegate.Pi(n)),this.serializer=new $2(t),this.Ti=new Z2(this.serializer)}start(){return Promise.resolve()}shutdown(){return this.ci=!1,Promise.resolve()}get started(){return this.ci}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(e){return this.indexManager}getDocumentOverlayCache(e){let t=this.overlays[e.toKey()];return t||(t=new ej,this.overlays[e.toKey()]=t),t}getMutationQueue(e,t){let n=this.ai[e.toKey()];return n||(n=new rj(t,this.referenceDelegate),this.ai[e.toKey()]=n),n}getGlobalsCache(){return this.li}getTargetCache(){return this.hi}getRemoteDocumentCache(){return this.remoteDocumentCache}getBundleCache(){return this.Ti}runTransaction(e,t,n){Q("MemoryPersistence","Starting transaction:",e);const s=new ij(this.ui.next());return this.referenceDelegate.Ii(),n(s).next(i=>this.referenceDelegate.di(s).next(()=>i)).toPromise().then(i=>(s.raiseOnCommittedEvent(),i))}Ei(e,t){return B.or(Object.values(this.ai).map(n=>()=>n.containsKey(e,t)))}}class ij extends DS{constructor(e){super(),this.currentSequenceNumber=e}}class Uh{constructor(e){this.persistence=e,this.Ai=new Fh,this.Ri=null}static Vi(e){return new Uh(e)}get mi(){if(this.Ri)return this.Ri;throw ae(60996)}addReference(e,t,n){return this.Ai.addReference(n,t),this.mi.delete(n.toString()),B.resolve()}removeReference(e,t,n){return this.Ai.removeReference(n,t),this.mi.add(n.toString()),B.resolve()}markPotentiallyOrphaned(e,t){return this.mi.add(t.toString()),B.resolve()}removeTarget(e,t){this.Ai.zr(t.targetId).forEach(s=>this.mi.add(s.toString()));const n=this.persistence.getTargetCache();return n.getMatchingKeysForTargetId(e,t.targetId).next(s=>{s.forEach(i=>this.mi.add(i.toString()))}).next(()=>n.removeTargetData(e,t))}Ii(){this.Ri=new Set}di(e){const t=this.persistence.getRemoteDocumentCache().newChangeBuffer();return B.forEach(this.mi,n=>{const s=te.fromPath(n);return this.fi(e,s).next(i=>{i||t.removeEntry(s,ce.min())})}).next(()=>(this.Ri=null,t.apply(e)))}updateLimboDocument(e,t){return this.fi(e,t).next(n=>{n?this.mi.delete(t.toString()):this.mi.add(t.toString())})}Pi(e){return 0}fi(e,t){return B.or([()=>B.resolve(this.Ai.containsKey(t)),()=>this.persistence.getTargetCache().containsKey(e,t),()=>this.persistence.Ei(e,t)])}}class Rl{constructor(e,t){this.persistence=e,this.gi=new Rs(n=>VS(n.path),(n,s)=>n.isEqual(s)),this.garbageCollector=Q2(this,t)}static Vi(e,t){return new Rl(e,t)}Ii(){}di(e){return B.resolve()}forEachTarget(e,t){return this.persistence.getTargetCache().forEachTarget(e,t)}mr(e){const t=this.yr(e);return this.persistence.getTargetCache().getTargetCount(e).next(n=>t.next(s=>n+s))}yr(e){let t=0;return this.gr(e,n=>{t++}).next(()=>t)}gr(e,t){return B.forEach(this.gi,(n,s)=>this.Sr(e,n,s).next(i=>i?B.resolve():t(s)))}removeTargets(e,t,n){return this.persistence.getTargetCache().removeTargets(e,t,n)}removeOrphanedDocuments(e,t){let n=0;const s=this.persistence.getRemoteDocumentCache(),i=s.newChangeBuffer();return s.ri(e,a=>this.Sr(e,a,t).next(l=>{l||(n++,i.removeEntry(a,ce.min()))})).next(()=>i.apply(e)).next(()=>n)}markPotentiallyOrphaned(e,t){return this.gi.set(t,e.currentSequenceNumber),B.resolve()}removeTarget(e,t){const n=t.withSequenceNumber(e.currentSequenceNumber);return this.persistence.getTargetCache().updateTargetData(e,n)}addReference(e,t,n){return this.gi.set(n,e.currentSequenceNumber),B.resolve()}removeReference(e,t,n){return this.gi.set(n,e.currentSequenceNumber),B.resolve()}updateLimboDocument(e,t){return this.gi.set(t,e.currentSequenceNumber),B.resolve()}Pi(e){let t=e.key.toString().length;return e.isFoundDocument()&&(t+=rl(e.data.value)),t}Sr(e,t,n){return B.or([()=>this.persistence.Ei(e,t),()=>this.persistence.getTargetCache().containsKey(e,t),()=>{const s=this.gi.get(t);return B.resolve(s!==void 0&&s>n)}])}getCacheSize(e){return this.persistence.getRemoteDocumentCache().getSize(e)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $h{constructor(e,t,n,s){this.targetId=e,this.fromCache=t,this.Is=n,this.ds=s}static Es(e,t){let n=ve(),s=ve();for(const i of t.docChanges)switch(i.type){case 0:n=n.add(i.doc.key);break;case 1:s=s.add(i.doc.key)}return new $h(e,t.fromCache,n,s)}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class aj{constructor(){this._documentReadCount=0}get documentReadCount(){return this._documentReadCount}incrementDocumentReadCount(e){this._documentReadCount+=e}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class lj{constructor(){this.As=!1,this.Rs=!1,this.Vs=100,this.fs=function(){return UE()?8:OS(wt())>0?6:4}()}initialize(e,t){this.gs=e,this.indexManager=t,this.As=!0}getDocumentsMatchingQuery(e,t,n,s){const i={result:null};return this.ps(e,t).next(a=>{i.result=a}).next(()=>{if(!i.result)return this.ys(e,t,s,n).next(a=>{i.result=a})}).next(()=>{if(i.result)return;const a=new aj;return this.ws(e,t,a).next(l=>{if(i.result=l,this.Rs)return this.Ss(e,t,a,l.size)})}).next(()=>i.result)}Ss(e,t,n,s){return n.documentReadCount<this.Vs?(Fs()<=be.DEBUG&&Q("QueryEngine","SDK will not create cache indexes for query:",Us(t),"since it only creates cache indexes for collection contains","more than or equal to",this.Vs,"documents"),B.resolve()):(Fs()<=be.DEBUG&&Q("QueryEngine","Query:",Us(t),"scans",n.documentReadCount,"local documents and returns",s,"documents as results."),n.documentReadCount>this.fs*s?(Fs()<=be.DEBUG&&Q("QueryEngine","The SDK decides to create cache indexes for query:",Us(t),"as using cache indexes may help improve performance."),this.indexManager.createTargetIndexes(e,_r(t))):B.resolve())}ps(e,t){if(Xp(t))return B.resolve(null);let n=_r(t);return this.indexManager.getIndexType(e,n).next(s=>s===0?null:(t.limit!==null&&s===1&&(t=hd(t,null,"F"),n=_r(t)),this.indexManager.getDocumentsMatchingTarget(e,n).next(i=>{const a=ve(...i);return this.gs.getDocuments(e,a).next(l=>this.indexManager.getMinOffset(e,n).next(u=>{const d=this.bs(t,l);return this.Ds(t,d,a,u.readTime)?this.ps(e,hd(t,null,"F")):this.vs(e,d,t,u)}))})))}ys(e,t,n,s){return Xp(t)||s.isEqual(ce.min())?B.resolve(null):this.gs.getDocuments(e,n).next(i=>{const a=this.bs(t,i);return this.Ds(t,a,n,s)?B.resolve(null):(Fs()<=be.DEBUG&&Q("QueryEngine","Re-using previous result from %s to execute query: %s",s.toString(),Us(t)),this.vs(e,a,t,AS(s,Li)).next(l=>l))})}bs(e,t){let n=new st(H0(e));return t.forEach((s,i)=>{mc(e,i)&&(n=n.add(i))}),n}Ds(e,t,n,s){if(e.limit===null)return!1;if(n.size!==t.size)return!0;const i=e.limitType==="F"?t.last():t.first();return!!i&&(i.hasPendingWrites||i.version.compareTo(s)>0)}ws(e,t,n){return Fs()<=be.DEBUG&&Q("QueryEngine","Using full collection scan to execute query:",Us(t)),this.gs.getDocumentsMatchingQuery(e,t,Rn.min(),n)}vs(e,t,n,s){return this.gs.getDocumentsMatchingQuery(e,n,s).next(i=>(t.forEach(a=>{i=i.insert(a.key,a)}),i))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Bh="LocalStore",cj=3e8;class uj{constructor(e,t,n,s){this.persistence=e,this.Cs=t,this.serializer=s,this.Fs=new ze(ge),this.Ms=new Rs(i=>Rh(i),Ph),this.xs=new Map,this.Os=e.getRemoteDocumentCache(),this.hi=e.getTargetCache(),this.Ti=e.getBundleCache(),this.Ns(n)}Ns(e){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(e),this.indexManager=this.persistence.getIndexManager(e),this.mutationQueue=this.persistence.getMutationQueue(e,this.indexManager),this.localDocuments=new J2(this.Os,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.Os.setIndexManager(this.indexManager),this.Cs.initialize(this.localDocuments,this.indexManager)}collectGarbage(e){return this.persistence.runTransaction("Collect garbage","readwrite-primary",t=>e.collect(t,this.Fs))}}function dj(r,e,t,n){return new uj(r,e,t,n)}async function mb(r,e){const t=de(r);return await t.persistence.runTransaction("Handle user change","readonly",n=>{let s;return t.mutationQueue.getAllMutationBatches(n).next(i=>(s=i,t.Ns(e),t.mutationQueue.getAllMutationBatches(n))).next(i=>{const a=[],l=[];let u=ve();for(const d of s){a.push(d.batchId);for(const h of d.mutations)u=u.add(h.key)}for(const d of i){l.push(d.batchId);for(const h of d.mutations)u=u.add(h.key)}return t.localDocuments.getDocuments(n,u).next(d=>({Bs:d,removedBatchIds:a,addedBatchIds:l}))})})}function hj(r,e){const t=de(r);return t.persistence.runTransaction("Acknowledge batch","readwrite-primary",n=>{const s=e.batch.keys(),i=t.Os.newChangeBuffer({trackRemovals:!0});return function(l,u,d,h){const p=d.batch,g=p.keys();let b=B.resolve();return g.forEach(C=>{b=b.next(()=>h.getEntry(u,C)).next(x=>{const v=d.docVersions.get(C);Ce(v!==null,48541),x.version.compareTo(v)<0&&(p.applyToRemoteDocument(x,d),x.isValidDocument()&&(x.setReadTime(d.commitVersion),h.addEntry(x)))})}),b.next(()=>l.mutationQueue.removeMutationBatch(u,p))}(t,n,e,i).next(()=>i.apply(n)).next(()=>t.mutationQueue.performConsistencyCheck(n)).next(()=>t.documentOverlayCache.removeOverlaysForBatchId(n,s,e.batch.batchId)).next(()=>t.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(n,function(l){let u=ve();for(let d=0;d<l.mutationResults.length;++d)l.mutationResults[d].transformResults.length>0&&(u=u.add(l.batch.mutations[d].key));return u}(e))).next(()=>t.localDocuments.getDocuments(n,s))})}function pb(r){const e=de(r);return e.persistence.runTransaction("Get last remote snapshot version","readonly",t=>e.hi.getLastRemoteSnapshotVersion(t))}function fj(r,e){const t=de(r),n=e.snapshotVersion;let s=t.Fs;return t.persistence.runTransaction("Apply remote event","readwrite-primary",i=>{const a=t.Os.newChangeBuffer({trackRemovals:!0});s=t.Fs;const l=[];e.targetChanges.forEach((h,p)=>{const g=s.get(p);if(!g)return;l.push(t.hi.removeMatchingKeys(i,h.removedDocuments,p).next(()=>t.hi.addMatchingKeys(i,h.addedDocuments,p)));let b=g.withSequenceNumber(i.currentSequenceNumber);e.targetMismatches.get(p)!==null?b=b.withResumeToken(dt.EMPTY_BYTE_STRING,ce.min()).withLastLimboFreeSnapshotVersion(ce.min()):h.resumeToken.approximateByteSize()>0&&(b=b.withResumeToken(h.resumeToken,n)),s=s.insert(p,b),function(x,v,E){return x.resumeToken.approximateByteSize()===0||v.snapshotVersion.toMicroseconds()-x.snapshotVersion.toMicroseconds()>=cj?!0:E.addedDocuments.size+E.modifiedDocuments.size+E.removedDocuments.size>0}(g,b,h)&&l.push(t.hi.updateTargetData(i,b))});let u=Hr(),d=ve();if(e.documentUpdates.forEach(h=>{e.resolvedLimboDocuments.has(h)&&l.push(t.persistence.referenceDelegate.updateLimboDocument(i,h))}),l.push(mj(i,a,e.documentUpdates).next(h=>{u=h.Ls,d=h.ks})),!n.isEqual(ce.min())){const h=t.hi.getLastRemoteSnapshotVersion(i).next(p=>t.hi.setTargetsMetadata(i,i.currentSequenceNumber,n));l.push(h)}return B.waitFor(l).next(()=>a.apply(i)).next(()=>t.localDocuments.getLocalViewOfDocuments(i,u,d)).next(()=>u)}).then(i=>(t.Fs=s,i))}function mj(r,e,t){let n=ve(),s=ve();return t.forEach(i=>n=n.add(i)),e.getEntries(r,n).next(i=>{let a=Hr();return t.forEach((l,u)=>{const d=i.get(l);u.isFoundDocument()!==d.isFoundDocument()&&(s=s.add(l)),u.isNoDocument()&&u.version.isEqual(ce.min())?(e.removeEntry(l,u.readTime),a=a.insert(l,u)):!d.isValidDocument()||u.version.compareTo(d.version)>0||u.version.compareTo(d.version)===0&&d.hasPendingWrites?(e.addEntry(u),a=a.insert(l,u)):Q(Bh,"Ignoring outdated watch update for ",l,". Current version:",d.version," Watch version:",u.version)}),{Ls:a,ks:s}})}function pj(r,e){const t=de(r);return t.persistence.runTransaction("Get next mutation batch","readonly",n=>(e===void 0&&(e=jh),t.mutationQueue.getNextMutationBatchAfterBatchId(n,e)))}function gj(r,e){const t=de(r);return t.persistence.runTransaction("Allocate target","readwrite",n=>{let s;return t.hi.getTargetData(n,e).next(i=>i?(s=i,B.resolve(s)):t.hi.allocateTargetId(n).next(a=>(s=new _n(e,a,"TargetPurposeListen",n.currentSequenceNumber),t.hi.addTargetData(n,s).next(()=>s))))}).then(n=>{const s=t.Fs.get(n.targetId);return(s===null||n.snapshotVersion.compareTo(s.snapshotVersion)>0)&&(t.Fs=t.Fs.insert(n.targetId,n),t.Ms.set(e,n.targetId)),n})}async function yd(r,e,t){const n=de(r),s=n.Fs.get(e),i=t?"readwrite":"readwrite-primary";try{t||await n.persistence.runTransaction("Release target",i,a=>n.persistence.referenceDelegate.removeTarget(a,s))}catch(a){if(!Fo(a))throw a;Q(Bh,`Failed to update sequence numbers for target ${e}: ${a}`)}n.Fs=n.Fs.remove(e),n.Ms.delete(s.target)}function ug(r,e,t){const n=de(r);let s=ce.min(),i=ve();return n.persistence.runTransaction("Execute query","readwrite",a=>function(u,d,h){const p=de(u),g=p.Ms.get(h);return g!==void 0?B.resolve(p.Fs.get(g)):p.hi.getTargetData(d,h)}(n,a,_r(e)).next(l=>{if(l)return s=l.lastLimboFreeSnapshotVersion,n.hi.getMatchingKeysForTargetId(a,l.targetId).next(u=>{i=u})}).next(()=>n.Cs.getDocumentsMatchingQuery(a,e,t?s:ce.min(),t?i:ve())).next(l=>(yj(n,n2(e),l),{documents:l,qs:i})))}function yj(r,e,t){let n=r.xs.get(e)||ce.min();t.forEach((s,i)=>{i.readTime.compareTo(n)>0&&(n=i.readTime)}),r.xs.set(e,n)}class dg{constructor(){this.activeTargetIds=c2()}Gs(e){this.activeTargetIds=this.activeTargetIds.add(e)}zs(e){this.activeTargetIds=this.activeTargetIds.delete(e)}Ws(){const e={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(e)}}class xj{constructor(){this.Fo=new dg,this.Mo={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(e){}updateMutationState(e,t,n){}addLocalQueryTarget(e,t=!0){return t&&this.Fo.Gs(e),this.Mo[e]||"not-current"}updateQueryState(e,t,n){this.Mo[e]=t}removeLocalQueryTarget(e){this.Fo.zs(e)}isLocalQueryTarget(e){return this.Fo.activeTargetIds.has(e)}clearQueryState(e){delete this.Mo[e]}getAllActiveQueryTargets(){return this.Fo.activeTargetIds}isActiveQueryTarget(e){return this.Fo.activeTargetIds.has(e)}start(){return this.Fo=new dg,Promise.resolve()}handleUserChange(e,t,n){}setOnlineState(e){}shutdown(){}writeSequenceNumber(e){}notifyBundleLoaded(e){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class bj{xo(e){}shutdown(){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const hg="ConnectivityMonitor";class fg{constructor(){this.Oo=()=>this.No(),this.Bo=()=>this.Lo(),this.ko=[],this.qo()}xo(e){this.ko.push(e)}shutdown(){window.removeEventListener("online",this.Oo),window.removeEventListener("offline",this.Bo)}qo(){window.addEventListener("online",this.Oo),window.addEventListener("offline",this.Bo)}No(){Q(hg,"Network connectivity changed: AVAILABLE");for(const e of this.ko)e(0)}Lo(){Q(hg,"Network connectivity changed: UNAVAILABLE");for(const e of this.ko)e(1)}static C(){return typeof window<"u"&&window.addEventListener!==void 0&&window.removeEventListener!==void 0}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Ba=null;function xd(){return Ba===null?Ba=function(){return 268435456+Math.round(2147483648*Math.random())}():Ba++,"0x"+Ba.toString(16)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Tu="RestConnection",vj={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery",RunAggregationQuery:"runAggregationQuery"};class wj{get Qo(){return!1}constructor(e){this.databaseInfo=e,this.databaseId=e.databaseId;const t=e.ssl?"https":"http",n=encodeURIComponent(this.databaseId.projectId),s=encodeURIComponent(this.databaseId.database);this.$o=t+"://"+e.host,this.Uo=`projects/${n}/databases/${s}`,this.Ko=this.databaseId.database===Nl?`project_id=${n}`:`project_id=${n}&database_id=${s}`}Wo(e,t,n,s,i){const a=xd(),l=this.Go(e,t.toUriEncodedString());Q(Tu,`Sending RPC '${e}' ${a}:`,l,n);const u={"google-cloud-resource-prefix":this.Uo,"x-goog-request-params":this.Ko};this.zo(u,s,i);const{host:d}=new URL(l),h=zn(d);return this.jo(e,l,u,n,h).then(p=>(Q(Tu,`Received RPC '${e}' ${a}: `,p),p),p=>{throw In(Tu,`RPC '${e}' ${a} failed with error: `,p,"url: ",l,"request:",n),p})}Jo(e,t,n,s,i,a){return this.Wo(e,t,n,s,i)}zo(e,t,n){e["X-Goog-Api-Client"]=function(){return"gl-js/ fire/"+Lo}(),e["Content-Type"]="text/plain",this.databaseInfo.appId&&(e["X-Firebase-GMPID"]=this.databaseInfo.appId),t&&t.headers.forEach((s,i)=>e[i]=s),n&&n.headers.forEach((s,i)=>e[i]=s)}Go(e,t){const n=vj[e];return`${this.$o}/v1/${t}:${n}`}terminate(){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _j{constructor(e){this.Ho=e.Ho,this.Yo=e.Yo}Zo(e){this.Xo=e}e_(e){this.t_=e}n_(e){this.r_=e}onMessage(e){this.i_=e}close(){this.Yo()}send(e){this.Ho(e)}s_(){this.Xo()}o_(){this.t_()}__(e){this.r_(e)}a_(e){this.i_(e)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const gt="WebChannelConnection";class Tj extends wj{constructor(e){super(e),this.u_=[],this.forceLongPolling=e.forceLongPolling,this.autoDetectLongPolling=e.autoDetectLongPolling,this.useFetchStreams=e.useFetchStreams,this.longPollingOptions=e.longPollingOptions}jo(e,t,n,s,i){const a=xd();return new Promise((l,u)=>{const d=new g0;d.setWithCredentials(!0),d.listenOnce(y0.COMPLETE,()=>{try{switch(d.getLastErrorCode()){case tl.NO_ERROR:const p=d.getResponseJson();Q(gt,`XHR for RPC '${e}' ${a} received:`,JSON.stringify(p)),l(p);break;case tl.TIMEOUT:Q(gt,`RPC '${e}' ${a} timed out`),u(new G($.DEADLINE_EXCEEDED,"Request time out"));break;case tl.HTTP_ERROR:const g=d.getStatus();if(Q(gt,`RPC '${e}' ${a} failed with status:`,g,"response text:",d.getResponseText()),g>0){let b=d.getResponseJson();Array.isArray(b)&&(b=b[0]);const C=b==null?void 0:b.error;if(C&&C.status&&C.message){const x=function(E){const T=E.toLowerCase().replace(/_/g,"-");return Object.values($).indexOf(T)>=0?T:$.UNKNOWN}(C.status);u(new G(x,C.message))}else u(new G($.UNKNOWN,"Server responded with status "+d.getStatus()))}else u(new G($.UNAVAILABLE,"Connection failed."));break;default:ae(9055,{c_:e,streamId:a,l_:d.getLastErrorCode(),h_:d.getLastError()})}}finally{Q(gt,`RPC '${e}' ${a} completed.`)}});const h=JSON.stringify(s);Q(gt,`RPC '${e}' ${a} sending request:`,s),d.send(t,"POST",h,n,15)})}P_(e,t,n){const s=xd(),i=[this.$o,"/","google.firestore.v1.Firestore","/",e,"/channel"],a=v0(),l=b0(),u={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling},d=this.longPollingOptions.timeoutSeconds;d!==void 0&&(u.longPollingTimeout=Math.round(1e3*d)),this.useFetchStreams&&(u.useFetchStreams=!0),this.zo(u.initMessageHeaders,t,n),u.encodeInitMessageHeaders=!0;const h=i.join("");Q(gt,`Creating RPC '${e}' stream ${s}: ${h}`,u);const p=a.createWebChannel(h,u);this.T_(p);let g=!1,b=!1;const C=new _j({Ho:v=>{b?Q(gt,`Not sending because RPC '${e}' stream ${s} is closed:`,v):(g||(Q(gt,`Opening RPC '${e}' stream ${s} transport.`),p.open(),g=!0),Q(gt,`RPC '${e}' stream ${s} sending:`,v),p.send(v))},Yo:()=>p.close()}),x=(v,E,T)=>{v.listen(E,N=>{try{T(N)}catch(R){setTimeout(()=>{throw R},0)}})};return x(p,xi.EventType.OPEN,()=>{b||(Q(gt,`RPC '${e}' stream ${s} transport opened.`),C.s_())}),x(p,xi.EventType.CLOSE,()=>{b||(b=!0,Q(gt,`RPC '${e}' stream ${s} transport closed`),C.__(),this.I_(p))}),x(p,xi.EventType.ERROR,v=>{b||(b=!0,In(gt,`RPC '${e}' stream ${s} transport errored. Name:`,v.name,"Message:",v.message),C.__(new G($.UNAVAILABLE,"The operation could not be completed")))}),x(p,xi.EventType.MESSAGE,v=>{var E;if(!b){const T=v.data[0];Ce(!!T,16349);const N=T,R=(N==null?void 0:N.error)||((E=N[0])===null||E===void 0?void 0:E.error);if(R){Q(gt,`RPC '${e}' stream ${s} received error:`,R);const L=R.status;let U=function(k){const j=Xe[k];if(j!==void 0)return rb(j)}(L),A=R.message;U===void 0&&(U=$.INTERNAL,A="Unknown error status: "+L+" with message "+R.message),b=!0,C.__(new G(U,A)),p.close()}else Q(gt,`RPC '${e}' stream ${s} received:`,T),C.a_(T)}}),x(l,x0.STAT_EVENT,v=>{v.stat===od.PROXY?Q(gt,`RPC '${e}' stream ${s} detected buffering proxy`):v.stat===od.NOPROXY&&Q(gt,`RPC '${e}' stream ${s} detected no buffering proxy`)}),setTimeout(()=>{C.o_()},0),C}terminate(){this.u_.forEach(e=>e.close()),this.u_=[]}T_(e){this.u_.push(e)}I_(e){this.u_=this.u_.filter(t=>t===e)}}function Eu(){return typeof document<"u"?document:null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function xc(r){return new k2(r,!0)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class gb{constructor(e,t,n=1e3,s=1.5,i=6e4){this.Fi=e,this.timerId=t,this.d_=n,this.E_=s,this.A_=i,this.R_=0,this.V_=null,this.m_=Date.now(),this.reset()}reset(){this.R_=0}f_(){this.R_=this.A_}g_(e){this.cancel();const t=Math.floor(this.R_+this.p_()),n=Math.max(0,Date.now()-this.m_),s=Math.max(0,t-n);s>0&&Q("ExponentialBackoff",`Backing off for ${s} ms (base delay: ${this.R_} ms, delay with jitter: ${t} ms, last attempt: ${n} ms ago)`),this.V_=this.Fi.enqueueAfterDelay(this.timerId,s,()=>(this.m_=Date.now(),e())),this.R_*=this.E_,this.R_<this.d_&&(this.R_=this.d_),this.R_>this.A_&&(this.R_=this.A_)}y_(){this.V_!==null&&(this.V_.skipDelay(),this.V_=null)}cancel(){this.V_!==null&&(this.V_.cancel(),this.V_=null)}p_(){return(Math.random()-.5)*this.R_}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const mg="PersistentStream";class yb{constructor(e,t,n,s,i,a,l,u){this.Fi=e,this.w_=n,this.S_=s,this.connection=i,this.authCredentialsProvider=a,this.appCheckCredentialsProvider=l,this.listener=u,this.state=0,this.b_=0,this.D_=null,this.v_=null,this.stream=null,this.C_=0,this.F_=new gb(e,t)}M_(){return this.state===1||this.state===5||this.x_()}x_(){return this.state===2||this.state===3}start(){this.C_=0,this.state!==4?this.auth():this.O_()}async stop(){this.M_()&&await this.close(0)}N_(){this.state=0,this.F_.reset()}B_(){this.x_()&&this.D_===null&&(this.D_=this.Fi.enqueueAfterDelay(this.w_,6e4,()=>this.L_()))}k_(e){this.q_(),this.stream.send(e)}async L_(){if(this.x_())return this.close(0)}q_(){this.D_&&(this.D_.cancel(),this.D_=null)}Q_(){this.v_&&(this.v_.cancel(),this.v_=null)}async close(e,t){this.q_(),this.Q_(),this.F_.cancel(),this.b_++,e!==4?this.F_.reset():t&&t.code===$.RESOURCE_EXHAUSTED?(qr(t.toString()),qr("Using maximum backoff delay to prevent overloading the backend."),this.F_.f_()):t&&t.code===$.UNAUTHENTICATED&&this.state!==3&&(this.authCredentialsProvider.invalidateToken(),this.appCheckCredentialsProvider.invalidateToken()),this.stream!==null&&(this.U_(),this.stream.close(),this.stream=null),this.state=e,await this.listener.n_(t)}U_(){}auth(){this.state=1;const e=this.K_(this.b_),t=this.b_;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then(([n,s])=>{this.b_===t&&this.W_(n,s)},n=>{e(()=>{const s=new G($.UNKNOWN,"Fetching auth token failed: "+n.message);return this.G_(s)})})}W_(e,t){const n=this.K_(this.b_);this.stream=this.z_(e,t),this.stream.Zo(()=>{n(()=>this.listener.Zo())}),this.stream.e_(()=>{n(()=>(this.state=2,this.v_=this.Fi.enqueueAfterDelay(this.S_,1e4,()=>(this.x_()&&(this.state=3),Promise.resolve())),this.listener.e_()))}),this.stream.n_(s=>{n(()=>this.G_(s))}),this.stream.onMessage(s=>{n(()=>++this.C_==1?this.j_(s):this.onNext(s))})}O_(){this.state=5,this.F_.g_(async()=>{this.state=0,this.start()})}G_(e){return Q(mg,`close with error: ${e}`),this.stream=null,this.close(4,e)}K_(e){return t=>{this.Fi.enqueueAndForget(()=>this.b_===e?t():(Q(mg,"stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve()))}}}class Ej extends yb{constructor(e,t,n,s,i,a){super(e,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",t,n,s,a),this.serializer=i}z_(e,t){return this.connection.P_("Listen",e,t)}j_(e){return this.onNext(e)}onNext(e){this.F_.reset();const t=I2(this.serializer,e),n=function(i){if(!("targetChange"in i))return ce.min();const a=i.targetChange;return a.targetIds&&a.targetIds.length?ce.min():a.readTime?Tr(a.readTime):ce.min()}(e);return this.listener.J_(t,n)}H_(e){const t={};t.database=gd(this.serializer),t.addTarget=function(i,a){let l;const u=a.target;if(l=ud(u)?{documents:P2(i,u)}:{query:M2(i,u).Vt},l.targetId=a.targetId,a.resumeToken.approximateByteSize()>0){l.resumeToken=ob(i,a.resumeToken);const d=fd(i,a.expectedCount);d!==null&&(l.expectedCount=d)}else if(a.snapshotVersion.compareTo(ce.min())>0){l.readTime=Al(i,a.snapshotVersion.toTimestamp());const d=fd(i,a.expectedCount);d!==null&&(l.expectedCount=d)}return l}(this.serializer,e);const n=O2(this.serializer,e);n&&(t.labels=n),this.k_(t)}Y_(e){const t={};t.database=gd(this.serializer),t.removeTarget=e,this.k_(t)}}class Nj extends yb{constructor(e,t,n,s,i,a){super(e,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",t,n,s,a),this.serializer=i}get Z_(){return this.C_>0}start(){this.lastStreamToken=void 0,super.start()}U_(){this.Z_&&this.X_([])}z_(e,t){return this.connection.P_("Write",e,t)}j_(e){return Ce(!!e.streamToken,31322),this.lastStreamToken=e.streamToken,Ce(!e.writeResults||e.writeResults.length===0,55816),this.listener.ea()}onNext(e){Ce(!!e.streamToken,12678),this.lastStreamToken=e.streamToken,this.F_.reset();const t=R2(e.writeResults,e.commitTime),n=Tr(e.commitTime);return this.listener.ta(n,t)}na(){const e={};e.database=gd(this.serializer),this.k_(e)}X_(e){const t={streamToken:this.lastStreamToken,writes:e.map(n=>A2(this.serializer,n))};this.k_(t)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Cj{}class kj extends Cj{constructor(e,t,n,s){super(),this.authCredentials=e,this.appCheckCredentials=t,this.connection=n,this.serializer=s,this.ra=!1}ia(){if(this.ra)throw new G($.FAILED_PRECONDITION,"The client has already been terminated.")}Wo(e,t,n,s){return this.ia(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([i,a])=>this.connection.Wo(e,md(t,n),s,i,a)).catch(i=>{throw i.name==="FirebaseError"?(i.code===$.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),i):new G($.UNKNOWN,i.toString())})}Jo(e,t,n,s,i){return this.ia(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([a,l])=>this.connection.Jo(e,md(t,n),s,a,l,i)).catch(a=>{throw a.name==="FirebaseError"?(a.code===$.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),a):new G($.UNKNOWN,a.toString())})}terminate(){this.ra=!0,this.connection.terminate()}}class Sj{constructor(e,t){this.asyncQueue=e,this.onlineStateHandler=t,this.state="Unknown",this.sa=0,this.oa=null,this._a=!0}aa(){this.sa===0&&(this.ua("Unknown"),this.oa=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,()=>(this.oa=null,this.ca("Backend didn't respond within 10 seconds."),this.ua("Offline"),Promise.resolve())))}la(e){this.state==="Online"?this.ua("Unknown"):(this.sa++,this.sa>=1&&(this.ha(),this.ca(`Connection failed 1 times. Most recent error: ${e.toString()}`),this.ua("Offline")))}set(e){this.ha(),this.sa=0,e==="Online"&&(this._a=!1),this.ua(e)}ua(e){e!==this.state&&(this.state=e,this.onlineStateHandler(e))}ca(e){const t=`Could not reach Cloud Firestore backend. ${e}
This typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this._a?(qr(t),this._a=!1):Q("OnlineStateTracker",t)}ha(){this.oa!==null&&(this.oa.cancel(),this.oa=null)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const _s="RemoteStore";class jj{constructor(e,t,n,s,i){this.localStore=e,this.datastore=t,this.asyncQueue=n,this.remoteSyncer={},this.Pa=[],this.Ta=new Map,this.Ia=new Set,this.da=[],this.Ea=i,this.Ea.xo(a=>{n.enqueueAndForget(async()=>{Ps(this)&&(Q(_s,"Restarting streams for network reachability change."),await async function(u){const d=de(u);d.Ia.add(4),await la(d),d.Aa.set("Unknown"),d.Ia.delete(4),await bc(d)}(this))})}),this.Aa=new Sj(n,s)}}async function bc(r){if(Ps(r))for(const e of r.da)await e(!0)}async function la(r){for(const e of r.da)await e(!1)}function xb(r,e){const t=de(r);t.Ta.has(e.targetId)||(t.Ta.set(e.targetId,e),Wh(t)?Hh(t):Uo(t).x_()&&qh(t,e))}function zh(r,e){const t=de(r),n=Uo(t);t.Ta.delete(e),n.x_()&&bb(t,e),t.Ta.size===0&&(n.x_()?n.B_():Ps(t)&&t.Aa.set("Unknown"))}function qh(r,e){if(r.Ra.$e(e.targetId),e.resumeToken.approximateByteSize()>0||e.snapshotVersion.compareTo(ce.min())>0){const t=r.remoteSyncer.getRemoteKeysForTarget(e.targetId).size;e=e.withExpectedCount(t)}Uo(r).H_(e)}function bb(r,e){r.Ra.$e(e),Uo(r).Y_(e)}function Hh(r){r.Ra=new T2({getRemoteKeysForTarget:e=>r.remoteSyncer.getRemoteKeysForTarget(e),Et:e=>r.Ta.get(e)||null,lt:()=>r.datastore.serializer.databaseId}),Uo(r).start(),r.Aa.aa()}function Wh(r){return Ps(r)&&!Uo(r).M_()&&r.Ta.size>0}function Ps(r){return de(r).Ia.size===0}function vb(r){r.Ra=void 0}async function Ij(r){r.Aa.set("Online")}async function Aj(r){r.Ta.forEach((e,t)=>{qh(r,e)})}async function Rj(r,e){vb(r),Wh(r)?(r.Aa.la(e),Hh(r)):r.Aa.set("Unknown")}async function Pj(r,e,t){if(r.Aa.set("Online"),e instanceof sb&&e.state===2&&e.cause)try{await async function(s,i){const a=i.cause;for(const l of i.targetIds)s.Ta.has(l)&&(await s.remoteSyncer.rejectListen(l,a),s.Ta.delete(l),s.Ra.removeTarget(l))}(r,e)}catch(n){Q(_s,"Failed to remove targets %s: %s ",e.targetIds.join(","),n),await Pl(r,n)}else if(e instanceof ol?r.Ra.Ye(e):e instanceof nb?r.Ra.it(e):r.Ra.et(e),!t.isEqual(ce.min()))try{const n=await pb(r.localStore);t.compareTo(n)>=0&&await function(i,a){const l=i.Ra.Pt(a);return l.targetChanges.forEach((u,d)=>{if(u.resumeToken.approximateByteSize()>0){const h=i.Ta.get(d);h&&i.Ta.set(d,h.withResumeToken(u.resumeToken,a))}}),l.targetMismatches.forEach((u,d)=>{const h=i.Ta.get(u);if(!h)return;i.Ta.set(u,h.withResumeToken(dt.EMPTY_BYTE_STRING,h.snapshotVersion)),bb(i,u);const p=new _n(h.target,u,d,h.sequenceNumber);qh(i,p)}),i.remoteSyncer.applyRemoteEvent(l)}(r,t)}catch(n){Q(_s,"Failed to raise snapshot:",n),await Pl(r,n)}}async function Pl(r,e,t){if(!Fo(e))throw e;r.Ia.add(1),await la(r),r.Aa.set("Offline"),t||(t=()=>pb(r.localStore)),r.asyncQueue.enqueueRetryable(async()=>{Q(_s,"Retrying IndexedDB access"),await t(),r.Ia.delete(1),await bc(r)})}function wb(r,e){return e().catch(t=>Pl(r,t,e))}async function vc(r){const e=de(r),t=On(e);let n=e.Pa.length>0?e.Pa[e.Pa.length-1].batchId:jh;for(;Mj(e);)try{const s=await pj(e.localStore,n);if(s===null){e.Pa.length===0&&t.B_();break}n=s.batchId,Dj(e,s)}catch(s){await Pl(e,s)}_b(e)&&Tb(e)}function Mj(r){return Ps(r)&&r.Pa.length<10}function Dj(r,e){r.Pa.push(e);const t=On(r);t.x_()&&t.Z_&&t.X_(e.mutations)}function _b(r){return Ps(r)&&!On(r).M_()&&r.Pa.length>0}function Tb(r){On(r).start()}async function Oj(r){On(r).na()}async function Lj(r){const e=On(r);for(const t of r.Pa)e.X_(t.mutations)}async function Vj(r,e,t){const n=r.Pa.shift(),s=Oh.from(n,e,t);await wb(r,()=>r.remoteSyncer.applySuccessfulWrite(s)),await vc(r)}async function Fj(r,e){e&&On(r).Z_&&await async function(n,s){if(function(a){return w2(a)&&a!==$.ABORTED}(s.code)){const i=n.Pa.shift();On(n).N_(),await wb(n,()=>n.remoteSyncer.rejectFailedWrite(i.batchId,s)),await vc(n)}}(r,e),_b(r)&&Tb(r)}async function pg(r,e){const t=de(r);t.asyncQueue.verifyOperationInProgress(),Q(_s,"RemoteStore received new credentials");const n=Ps(t);t.Ia.add(3),await la(t),n&&t.Aa.set("Unknown"),await t.remoteSyncer.handleCredentialChange(e),t.Ia.delete(3),await bc(t)}async function Uj(r,e){const t=de(r);e?(t.Ia.delete(2),await bc(t)):e||(t.Ia.add(2),await la(t),t.Aa.set("Unknown"))}function Uo(r){return r.Va||(r.Va=function(t,n,s){const i=de(t);return i.ia(),new Ej(n,i.connection,i.authCredentials,i.appCheckCredentials,i.serializer,s)}(r.datastore,r.asyncQueue,{Zo:Ij.bind(null,r),e_:Aj.bind(null,r),n_:Rj.bind(null,r),J_:Pj.bind(null,r)}),r.da.push(async e=>{e?(r.Va.N_(),Wh(r)?Hh(r):r.Aa.set("Unknown")):(await r.Va.stop(),vb(r))})),r.Va}function On(r){return r.ma||(r.ma=function(t,n,s){const i=de(t);return i.ia(),new Nj(n,i.connection,i.authCredentials,i.appCheckCredentials,i.serializer,s)}(r.datastore,r.asyncQueue,{Zo:()=>Promise.resolve(),e_:Oj.bind(null,r),n_:Fj.bind(null,r),ea:Lj.bind(null,r),ta:Vj.bind(null,r)}),r.da.push(async e=>{e?(r.ma.N_(),await vc(r)):(await r.ma.stop(),r.Pa.length>0&&(Q(_s,`Stopping write stream with ${r.Pa.length} pending writes`),r.Pa=[]))})),r.ma}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Gh{constructor(e,t,n,s,i){this.asyncQueue=e,this.timerId=t,this.targetTimeMs=n,this.op=s,this.removalCallback=i,this.deferred=new Cn,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch(a=>{})}get promise(){return this.deferred.promise}static createAndSchedule(e,t,n,s,i){const a=Date.now()+n,l=new Gh(e,t,a,s,i);return l.start(n),l}start(e){this.timerHandle=setTimeout(()=>this.handleDelayElapsed(),e)}skipDelay(){return this.handleDelayElapsed()}cancel(e){this.timerHandle!==null&&(this.clearTimeout(),this.deferred.reject(new G($.CANCELLED,"Operation cancelled"+(e?": "+e:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget(()=>this.timerHandle!==null?(this.clearTimeout(),this.op().then(e=>this.deferred.resolve(e))):Promise.resolve())}clearTimeout(){this.timerHandle!==null&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}}function Kh(r,e){if(qr("AsyncQueue",`${e}: ${r}`),Fo(r))return new G($.UNAVAILABLE,`${e}: ${r}`);throw r}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ro{static emptySet(e){return new ro(e.comparator)}constructor(e){this.comparator=e?(t,n)=>e(t,n)||te.comparator(t.key,n.key):(t,n)=>te.comparator(t.key,n.key),this.keyedMap=bi(),this.sortedSet=new ze(this.comparator)}has(e){return this.keyedMap.get(e)!=null}get(e){return this.keyedMap.get(e)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(e){const t=this.keyedMap.get(e);return t?this.sortedSet.indexOf(t):-1}get size(){return this.sortedSet.size}forEach(e){this.sortedSet.inorderTraversal((t,n)=>(e(t),!1))}add(e){const t=this.delete(e.key);return t.copy(t.keyedMap.insert(e.key,e),t.sortedSet.insert(e,null))}delete(e){const t=this.get(e);return t?this.copy(this.keyedMap.remove(e),this.sortedSet.remove(t)):this}isEqual(e){if(!(e instanceof ro)||this.size!==e.size)return!1;const t=this.sortedSet.getIterator(),n=e.sortedSet.getIterator();for(;t.hasNext();){const s=t.getNext().key,i=n.getNext().key;if(!s.isEqual(i))return!1}return!0}toString(){const e=[];return this.forEach(t=>{e.push(t.toString())}),e.length===0?"DocumentSet ()":`DocumentSet (
  `+e.join(`  
`)+`
)`}copy(e,t){const n=new ro;return n.comparator=this.comparator,n.keyedMap=e,n.sortedSet=t,n}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class gg{constructor(){this.fa=new ze(te.comparator)}track(e){const t=e.doc.key,n=this.fa.get(t);n?e.type!==0&&n.type===3?this.fa=this.fa.insert(t,e):e.type===3&&n.type!==1?this.fa=this.fa.insert(t,{type:n.type,doc:e.doc}):e.type===2&&n.type===2?this.fa=this.fa.insert(t,{type:2,doc:e.doc}):e.type===2&&n.type===0?this.fa=this.fa.insert(t,{type:0,doc:e.doc}):e.type===1&&n.type===0?this.fa=this.fa.remove(t):e.type===1&&n.type===2?this.fa=this.fa.insert(t,{type:1,doc:n.doc}):e.type===0&&n.type===1?this.fa=this.fa.insert(t,{type:2,doc:e.doc}):ae(63341,{At:e,ga:n}):this.fa=this.fa.insert(t,e)}pa(){const e=[];return this.fa.inorderTraversal((t,n)=>{e.push(n)}),e}}class jo{constructor(e,t,n,s,i,a,l,u,d){this.query=e,this.docs=t,this.oldDocs=n,this.docChanges=s,this.mutatedKeys=i,this.fromCache=a,this.syncStateChanged=l,this.excludesMetadataChanges=u,this.hasCachedResults=d}static fromInitialDocuments(e,t,n,s,i){const a=[];return t.forEach(l=>{a.push({type:0,doc:l})}),new jo(e,t,ro.emptySet(t),a,n,s,!0,!1,i)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(e){if(!(this.fromCache===e.fromCache&&this.hasCachedResults===e.hasCachedResults&&this.syncStateChanged===e.syncStateChanged&&this.mutatedKeys.isEqual(e.mutatedKeys)&&fc(this.query,e.query)&&this.docs.isEqual(e.docs)&&this.oldDocs.isEqual(e.oldDocs)))return!1;const t=this.docChanges,n=e.docChanges;if(t.length!==n.length)return!1;for(let s=0;s<t.length;s++)if(t[s].type!==n[s].type||!t[s].doc.isEqual(n[s].doc))return!1;return!0}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $j{constructor(){this.ya=void 0,this.wa=[]}Sa(){return this.wa.some(e=>e.ba())}}class Bj{constructor(){this.queries=yg(),this.onlineState="Unknown",this.Da=new Set}terminate(){(function(t,n){const s=de(t),i=s.queries;s.queries=yg(),i.forEach((a,l)=>{for(const u of l.wa)u.onError(n)})})(this,new G($.ABORTED,"Firestore shutting down"))}}function yg(){return new Rs(r=>q0(r),fc)}async function zj(r,e){const t=de(r);let n=3;const s=e.query;let i=t.queries.get(s);i?!i.Sa()&&e.ba()&&(n=2):(i=new $j,n=e.ba()?0:1);try{switch(n){case 0:i.ya=await t.onListen(s,!0);break;case 1:i.ya=await t.onListen(s,!1);break;case 2:await t.onFirstRemoteStoreListen(s)}}catch(a){const l=Kh(a,`Initialization of query '${Us(e.query)}' failed`);return void e.onError(l)}t.queries.set(s,i),i.wa.push(e),e.va(t.onlineState),i.ya&&e.Ca(i.ya)&&Qh(t)}async function qj(r,e){const t=de(r),n=e.query;let s=3;const i=t.queries.get(n);if(i){const a=i.wa.indexOf(e);a>=0&&(i.wa.splice(a,1),i.wa.length===0?s=e.ba()?0:1:!i.Sa()&&e.ba()&&(s=2))}switch(s){case 0:return t.queries.delete(n),t.onUnlisten(n,!0);case 1:return t.queries.delete(n),t.onUnlisten(n,!1);case 2:return t.onLastRemoteStoreUnlisten(n);default:return}}function Hj(r,e){const t=de(r);let n=!1;for(const s of e){const i=s.query,a=t.queries.get(i);if(a){for(const l of a.wa)l.Ca(s)&&(n=!0);a.ya=s}}n&&Qh(t)}function Wj(r,e,t){const n=de(r),s=n.queries.get(e);if(s)for(const i of s.wa)i.onError(t);n.queries.delete(e)}function Qh(r){r.Da.forEach(e=>{e.next()})}var bd,xg;(xg=bd||(bd={})).Fa="default",xg.Cache="cache";class Gj{constructor(e,t,n){this.query=e,this.Ma=t,this.xa=!1,this.Oa=null,this.onlineState="Unknown",this.options=n||{}}Ca(e){if(!this.options.includeMetadataChanges){const n=[];for(const s of e.docChanges)s.type!==3&&n.push(s);e=new jo(e.query,e.docs,e.oldDocs,n,e.mutatedKeys,e.fromCache,e.syncStateChanged,!0,e.hasCachedResults)}let t=!1;return this.xa?this.Na(e)&&(this.Ma.next(e),t=!0):this.Ba(e,this.onlineState)&&(this.La(e),t=!0),this.Oa=e,t}onError(e){this.Ma.error(e)}va(e){this.onlineState=e;let t=!1;return this.Oa&&!this.xa&&this.Ba(this.Oa,e)&&(this.La(this.Oa),t=!0),t}Ba(e,t){if(!e.fromCache||!this.ba())return!0;const n=t!=="Offline";return(!this.options.ka||!n)&&(!e.docs.isEmpty()||e.hasCachedResults||t==="Offline")}Na(e){if(e.docChanges.length>0)return!0;const t=this.Oa&&this.Oa.hasPendingWrites!==e.hasPendingWrites;return!(!e.syncStateChanged&&!t)&&this.options.includeMetadataChanges===!0}La(e){e=jo.fromInitialDocuments(e.query,e.docs,e.mutatedKeys,e.fromCache,e.hasCachedResults),this.xa=!0,this.Ma.next(e)}ba(){return this.options.source!==bd.Cache}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Eb{constructor(e){this.key=e}}class Nb{constructor(e){this.key=e}}class Kj{constructor(e,t){this.query=e,this.Ha=t,this.Ya=null,this.hasCachedResults=!1,this.current=!1,this.Za=ve(),this.mutatedKeys=ve(),this.Xa=H0(e),this.eu=new ro(this.Xa)}get tu(){return this.Ha}nu(e,t){const n=t?t.ru:new gg,s=t?t.eu:this.eu;let i=t?t.mutatedKeys:this.mutatedKeys,a=s,l=!1;const u=this.query.limitType==="F"&&s.size===this.query.limit?s.last():null,d=this.query.limitType==="L"&&s.size===this.query.limit?s.first():null;if(e.inorderTraversal((h,p)=>{const g=s.get(h),b=mc(this.query,p)?p:null,C=!!g&&this.mutatedKeys.has(g.key),x=!!b&&(b.hasLocalMutations||this.mutatedKeys.has(b.key)&&b.hasCommittedMutations);let v=!1;g&&b?g.data.isEqual(b.data)?C!==x&&(n.track({type:3,doc:b}),v=!0):this.iu(g,b)||(n.track({type:2,doc:b}),v=!0,(u&&this.Xa(b,u)>0||d&&this.Xa(b,d)<0)&&(l=!0)):!g&&b?(n.track({type:0,doc:b}),v=!0):g&&!b&&(n.track({type:1,doc:g}),v=!0,(u||d)&&(l=!0)),v&&(b?(a=a.add(b),i=x?i.add(h):i.delete(h)):(a=a.delete(h),i=i.delete(h)))}),this.query.limit!==null)for(;a.size>this.query.limit;){const h=this.query.limitType==="F"?a.last():a.first();a=a.delete(h.key),i=i.delete(h.key),n.track({type:1,doc:h})}return{eu:a,ru:n,Ds:l,mutatedKeys:i}}iu(e,t){return e.hasLocalMutations&&t.hasCommittedMutations&&!t.hasLocalMutations}applyChanges(e,t,n,s){const i=this.eu;this.eu=e.eu,this.mutatedKeys=e.mutatedKeys;const a=e.ru.pa();a.sort((h,p)=>function(b,C){const x=v=>{switch(v){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return ae(20277,{At:v})}};return x(b)-x(C)}(h.type,p.type)||this.Xa(h.doc,p.doc)),this.su(n),s=s!=null&&s;const l=t&&!s?this.ou():[],u=this.Za.size===0&&this.current&&!s?1:0,d=u!==this.Ya;return this.Ya=u,a.length!==0||d?{snapshot:new jo(this.query,e.eu,i,a,e.mutatedKeys,u===0,d,!1,!!n&&n.resumeToken.approximateByteSize()>0),_u:l}:{_u:l}}va(e){return this.current&&e==="Offline"?(this.current=!1,this.applyChanges({eu:this.eu,ru:new gg,mutatedKeys:this.mutatedKeys,Ds:!1},!1)):{_u:[]}}au(e){return!this.Ha.has(e)&&!!this.eu.has(e)&&!this.eu.get(e).hasLocalMutations}su(e){e&&(e.addedDocuments.forEach(t=>this.Ha=this.Ha.add(t)),e.modifiedDocuments.forEach(t=>{}),e.removedDocuments.forEach(t=>this.Ha=this.Ha.delete(t)),this.current=e.current)}ou(){if(!this.current)return[];const e=this.Za;this.Za=ve(),this.eu.forEach(n=>{this.au(n.key)&&(this.Za=this.Za.add(n.key))});const t=[];return e.forEach(n=>{this.Za.has(n)||t.push(new Nb(n))}),this.Za.forEach(n=>{e.has(n)||t.push(new Eb(n))}),t}uu(e){this.Ha=e.qs,this.Za=ve();const t=this.nu(e.documents);return this.applyChanges(t,!0)}cu(){return jo.fromInitialDocuments(this.query,this.eu,this.mutatedKeys,this.Ya===0,this.hasCachedResults)}}const Yh="SyncEngine";class Qj{constructor(e,t,n){this.query=e,this.targetId=t,this.view=n}}class Yj{constructor(e){this.key=e,this.lu=!1}}class Xj{constructor(e,t,n,s,i,a){this.localStore=e,this.remoteStore=t,this.eventManager=n,this.sharedClientState=s,this.currentUser=i,this.maxConcurrentLimboResolutions=a,this.hu={},this.Pu=new Rs(l=>q0(l),fc),this.Tu=new Map,this.Iu=new Set,this.du=new ze(te.comparator),this.Eu=new Map,this.Au=new Fh,this.Ru={},this.Vu=new Map,this.mu=So.ur(),this.onlineState="Unknown",this.fu=void 0}get isPrimaryClient(){return this.fu===!0}}async function Jj(r,e,t=!0){const n=Ab(r);let s;const i=n.Pu.get(e);return i?(n.sharedClientState.addLocalQueryTarget(i.targetId),s=i.view.cu()):s=await Cb(n,e,t,!0),s}async function Zj(r,e){const t=Ab(r);await Cb(t,e,!0,!1)}async function Cb(r,e,t,n){const s=await gj(r.localStore,_r(e)),i=s.targetId,a=r.sharedClientState.addLocalQueryTarget(i,t);let l;return n&&(l=await eI(r,e,i,a==="current",s.resumeToken)),r.isPrimaryClient&&t&&xb(r.remoteStore,s),l}async function eI(r,e,t,n,s){r.gu=(p,g,b)=>async function(x,v,E,T){let N=v.view.nu(E);N.Ds&&(N=await ug(x.localStore,v.query,!1).then(({documents:A})=>v.view.nu(A,N)));const R=T&&T.targetChanges.get(v.targetId),L=T&&T.targetMismatches.get(v.targetId)!=null,U=v.view.applyChanges(N,x.isPrimaryClient,R,L);return vg(x,v.targetId,U._u),U.snapshot}(r,p,g,b);const i=await ug(r.localStore,e,!0),a=new Kj(e,i.qs),l=a.nu(i.documents),u=aa.createSynthesizedTargetChangeForCurrentChange(t,n&&r.onlineState!=="Offline",s),d=a.applyChanges(l,r.isPrimaryClient,u);vg(r,t,d._u);const h=new Qj(e,t,a);return r.Pu.set(e,h),r.Tu.has(t)?r.Tu.get(t).push(e):r.Tu.set(t,[e]),d.snapshot}async function tI(r,e,t){const n=de(r),s=n.Pu.get(e),i=n.Tu.get(s.targetId);if(i.length>1)return n.Tu.set(s.targetId,i.filter(a=>!fc(a,e))),void n.Pu.delete(e);n.isPrimaryClient?(n.sharedClientState.removeLocalQueryTarget(s.targetId),n.sharedClientState.isActiveQueryTarget(s.targetId)||await yd(n.localStore,s.targetId,!1).then(()=>{n.sharedClientState.clearQueryState(s.targetId),t&&zh(n.remoteStore,s.targetId),vd(n,s.targetId)}).catch(Vo)):(vd(n,s.targetId),await yd(n.localStore,s.targetId,!0))}async function rI(r,e){const t=de(r),n=t.Pu.get(e),s=t.Tu.get(n.targetId);t.isPrimaryClient&&s.length===1&&(t.sharedClientState.removeLocalQueryTarget(n.targetId),zh(t.remoteStore,n.targetId))}async function nI(r,e,t){const n=uI(r);try{const s=await function(a,l){const u=de(a),d=Fe.now(),h=l.reduce((b,C)=>b.add(C.key),ve());let p,g;return u.persistence.runTransaction("Locally write mutations","readwrite",b=>{let C=Hr(),x=ve();return u.Os.getEntries(b,h).next(v=>{C=v,C.forEach((E,T)=>{T.isValidDocument()||(x=x.add(E))})}).next(()=>u.localDocuments.getOverlayedDocuments(b,C)).next(v=>{p=v;const E=[];for(const T of l){const N=g2(T,p.get(T.key).overlayedDocument);N!=null&&E.push(new Gn(T.key,N,D0(N.value.mapValue),Ht.exists(!0)))}return u.mutationQueue.addMutationBatch(b,d,E,l)}).next(v=>{g=v;const E=v.applyToLocalDocumentSet(p,x);return u.documentOverlayCache.saveOverlays(b,v.batchId,E)})}).then(()=>({batchId:g.batchId,changes:G0(p)}))}(n.localStore,e);n.sharedClientState.addPendingMutation(s.batchId),function(a,l,u){let d=a.Ru[a.currentUser.toKey()];d||(d=new ze(ge)),d=d.insert(l,u),a.Ru[a.currentUser.toKey()]=d}(n,s.batchId,t),await ca(n,s.changes),await vc(n.remoteStore)}catch(s){const i=Kh(s,"Failed to persist write");t.reject(i)}}async function kb(r,e){const t=de(r);try{const n=await fj(t.localStore,e);e.targetChanges.forEach((s,i)=>{const a=t.Eu.get(i);a&&(Ce(s.addedDocuments.size+s.modifiedDocuments.size+s.removedDocuments.size<=1,22616),s.addedDocuments.size>0?a.lu=!0:s.modifiedDocuments.size>0?Ce(a.lu,14607):s.removedDocuments.size>0&&(Ce(a.lu,42227),a.lu=!1))}),await ca(t,n,e)}catch(n){await Vo(n)}}function bg(r,e,t){const n=de(r);if(n.isPrimaryClient&&t===0||!n.isPrimaryClient&&t===1){const s=[];n.Pu.forEach((i,a)=>{const l=a.view.va(e);l.snapshot&&s.push(l.snapshot)}),function(a,l){const u=de(a);u.onlineState=l;let d=!1;u.queries.forEach((h,p)=>{for(const g of p.wa)g.va(l)&&(d=!0)}),d&&Qh(u)}(n.eventManager,e),s.length&&n.hu.J_(s),n.onlineState=e,n.isPrimaryClient&&n.sharedClientState.setOnlineState(e)}}async function sI(r,e,t){const n=de(r);n.sharedClientState.updateQueryState(e,"rejected",t);const s=n.Eu.get(e),i=s&&s.key;if(i){let a=new ze(te.comparator);a=a.insert(i,vt.newNoDocument(i,ce.min()));const l=ve().add(i),u=new yc(ce.min(),new Map,new ze(ge),a,l);await kb(n,u),n.du=n.du.remove(i),n.Eu.delete(e),Xh(n)}else await yd(n.localStore,e,!1).then(()=>vd(n,e,t)).catch(Vo)}async function oI(r,e){const t=de(r),n=e.batch.batchId;try{const s=await hj(t.localStore,e);jb(t,n,null),Sb(t,n),t.sharedClientState.updateMutationState(n,"acknowledged"),await ca(t,s)}catch(s){await Vo(s)}}async function iI(r,e,t){const n=de(r);try{const s=await function(a,l){const u=de(a);return u.persistence.runTransaction("Reject batch","readwrite-primary",d=>{let h;return u.mutationQueue.lookupMutationBatch(d,l).next(p=>(Ce(p!==null,37113),h=p.keys(),u.mutationQueue.removeMutationBatch(d,p))).next(()=>u.mutationQueue.performConsistencyCheck(d)).next(()=>u.documentOverlayCache.removeOverlaysForBatchId(d,h,l)).next(()=>u.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(d,h)).next(()=>u.localDocuments.getDocuments(d,h))})}(n.localStore,e);jb(n,e,t),Sb(n,e),n.sharedClientState.updateMutationState(e,"rejected",t),await ca(n,s)}catch(s){await Vo(s)}}function Sb(r,e){(r.Vu.get(e)||[]).forEach(t=>{t.resolve()}),r.Vu.delete(e)}function jb(r,e,t){const n=de(r);let s=n.Ru[n.currentUser.toKey()];if(s){const i=s.get(e);i&&(t?i.reject(t):i.resolve(),s=s.remove(e)),n.Ru[n.currentUser.toKey()]=s}}function vd(r,e,t=null){r.sharedClientState.removeLocalQueryTarget(e);for(const n of r.Tu.get(e))r.Pu.delete(n),t&&r.hu.pu(n,t);r.Tu.delete(e),r.isPrimaryClient&&r.Au.zr(e).forEach(n=>{r.Au.containsKey(n)||Ib(r,n)})}function Ib(r,e){r.Iu.delete(e.path.canonicalString());const t=r.du.get(e);t!==null&&(zh(r.remoteStore,t),r.du=r.du.remove(e),r.Eu.delete(t),Xh(r))}function vg(r,e,t){for(const n of t)n instanceof Eb?(r.Au.addReference(n.key,e),aI(r,n)):n instanceof Nb?(Q(Yh,"Document no longer in limbo: "+n.key),r.Au.removeReference(n.key,e),r.Au.containsKey(n.key)||Ib(r,n.key)):ae(19791,{yu:n})}function aI(r,e){const t=e.key,n=t.path.canonicalString();r.du.get(t)||r.Iu.has(n)||(Q(Yh,"New document in limbo: "+t),r.Iu.add(n),Xh(r))}function Xh(r){for(;r.Iu.size>0&&r.du.size<r.maxConcurrentLimboResolutions;){const e=r.Iu.values().next().value;r.Iu.delete(e);const t=new te(Pe.fromString(e)),n=r.mu.next();r.Eu.set(n,new Yj(t)),r.du=r.du.insert(t,n),xb(r.remoteStore,new _n(_r(B0(t.path)),n,"TargetPurposeLimboResolution",uc.ue))}}async function ca(r,e,t){const n=de(r),s=[],i=[],a=[];n.Pu.isEmpty()||(n.Pu.forEach((l,u)=>{a.push(n.gu(u,e,t).then(d=>{var h;if((d||t)&&n.isPrimaryClient){const p=d?!d.fromCache:(h=t==null?void 0:t.targetChanges.get(u.targetId))===null||h===void 0?void 0:h.current;n.sharedClientState.updateQueryState(u.targetId,p?"current":"not-current")}if(d){s.push(d);const p=$h.Es(u.targetId,d);i.push(p)}}))}),await Promise.all(a),n.hu.J_(s),await async function(u,d){const h=de(u);try{await h.persistence.runTransaction("notifyLocalViewChanges","readwrite",p=>B.forEach(d,g=>B.forEach(g.Is,b=>h.persistence.referenceDelegate.addReference(p,g.targetId,b)).next(()=>B.forEach(g.ds,b=>h.persistence.referenceDelegate.removeReference(p,g.targetId,b)))))}catch(p){if(!Fo(p))throw p;Q(Bh,"Failed to update sequence numbers: "+p)}for(const p of d){const g=p.targetId;if(!p.fromCache){const b=h.Fs.get(g),C=b.snapshotVersion,x=b.withLastLimboFreeSnapshotVersion(C);h.Fs=h.Fs.insert(g,x)}}}(n.localStore,i))}async function lI(r,e){const t=de(r);if(!t.currentUser.isEqual(e)){Q(Yh,"User change. New user:",e.toKey());const n=await mb(t.localStore,e);t.currentUser=e,function(i,a){i.Vu.forEach(l=>{l.forEach(u=>{u.reject(new G($.CANCELLED,a))})}),i.Vu.clear()}(t,"'waitForPendingWrites' promise is rejected due to a user change."),t.sharedClientState.handleUserChange(e,n.removedBatchIds,n.addedBatchIds),await ca(t,n.Bs)}}function cI(r,e){const t=de(r),n=t.Eu.get(e);if(n&&n.lu)return ve().add(n.key);{let s=ve();const i=t.Tu.get(e);if(!i)return s;for(const a of i){const l=t.Pu.get(a);s=s.unionWith(l.view.tu)}return s}}function Ab(r){const e=de(r);return e.remoteStore.remoteSyncer.applyRemoteEvent=kb.bind(null,e),e.remoteStore.remoteSyncer.getRemoteKeysForTarget=cI.bind(null,e),e.remoteStore.remoteSyncer.rejectListen=sI.bind(null,e),e.hu.J_=Hj.bind(null,e.eventManager),e.hu.pu=Wj.bind(null,e.eventManager),e}function uI(r){const e=de(r);return e.remoteStore.remoteSyncer.applySuccessfulWrite=oI.bind(null,e),e.remoteStore.remoteSyncer.rejectFailedWrite=iI.bind(null,e),e}class Ml{constructor(){this.kind="memory",this.synchronizeTabs=!1}async initialize(e){this.serializer=xc(e.databaseInfo.databaseId),this.sharedClientState=this.bu(e),this.persistence=this.Du(e),await this.persistence.start(),this.localStore=this.vu(e),this.gcScheduler=this.Cu(e,this.localStore),this.indexBackfillerScheduler=this.Fu(e,this.localStore)}Cu(e,t){return null}Fu(e,t){return null}vu(e){return dj(this.persistence,new lj,e.initialUser,this.serializer)}Du(e){return new fb(Uh.Vi,this.serializer)}bu(e){return new xj}async terminate(){var e,t;(e=this.gcScheduler)===null||e===void 0||e.stop(),(t=this.indexBackfillerScheduler)===null||t===void 0||t.stop(),this.sharedClientState.shutdown(),await this.persistence.shutdown()}}Ml.provider={build:()=>new Ml};class dI extends Ml{constructor(e){super(),this.cacheSizeBytes=e}Cu(e,t){Ce(this.persistence.referenceDelegate instanceof Rl,46915);const n=this.persistence.referenceDelegate.garbageCollector;return new G2(n,e.asyncQueue,t)}Du(e){const t=this.cacheSizeBytes!==void 0?Pt.withCacheSize(this.cacheSizeBytes):Pt.DEFAULT;return new fb(n=>Rl.Vi(n,t),this.serializer)}}class wd{async initialize(e,t){this.localStore||(this.localStore=e.localStore,this.sharedClientState=e.sharedClientState,this.datastore=this.createDatastore(t),this.remoteStore=this.createRemoteStore(t),this.eventManager=this.createEventManager(t),this.syncEngine=this.createSyncEngine(t,!e.synchronizeTabs),this.sharedClientState.onlineStateHandler=n=>bg(this.syncEngine,n,1),this.remoteStore.remoteSyncer.handleCredentialChange=lI.bind(null,this.syncEngine),await Uj(this.remoteStore,this.syncEngine.isPrimaryClient))}createEventManager(e){return function(){return new Bj}()}createDatastore(e){const t=xc(e.databaseInfo.databaseId),n=function(i){return new Tj(i)}(e.databaseInfo);return function(i,a,l,u){return new kj(i,a,l,u)}(e.authCredentials,e.appCheckCredentials,n,t)}createRemoteStore(e){return function(n,s,i,a,l){return new jj(n,s,i,a,l)}(this.localStore,this.datastore,e.asyncQueue,t=>bg(this.syncEngine,t,0),function(){return fg.C()?new fg:new bj}())}createSyncEngine(e,t){return function(s,i,a,l,u,d,h){const p=new Xj(s,i,a,l,u,d);return h&&(p.fu=!0),p}(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,e.initialUser,e.maxConcurrentLimboResolutions,t)}async terminate(){var e,t;await async function(s){const i=de(s);Q(_s,"RemoteStore shutting down."),i.Ia.add(5),await la(i),i.Ea.shutdown(),i.Aa.set("Unknown")}(this.remoteStore),(e=this.datastore)===null||e===void 0||e.terminate(),(t=this.eventManager)===null||t===void 0||t.terminate()}}wd.provider={build:()=>new wd};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class hI{constructor(e){this.observer=e,this.muted=!1}next(e){this.muted||this.observer.next&&this.xu(this.observer.next,e)}error(e){this.muted||(this.observer.error?this.xu(this.observer.error,e):qr("Uncaught Error in snapshot listener:",e.toString()))}Ou(){this.muted=!0}xu(e,t){setTimeout(()=>{this.muted||e(t)},0)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ln="FirestoreClient";class fI{constructor(e,t,n,s,i){this.authCredentials=e,this.appCheckCredentials=t,this.asyncQueue=n,this.databaseInfo=s,this.user=xt.UNAUTHENTICATED,this.clientId=Sh.newId(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this._uninitializedComponentsProvider=i,this.authCredentials.start(n,async a=>{Q(Ln,"Received user=",a.uid),await this.authCredentialListener(a),this.user=a}),this.appCheckCredentials.start(n,a=>(Q(Ln,"Received new app check token=",a),this.appCheckCredentialListener(a,this.user)))}get configuration(){return{asyncQueue:this.asyncQueue,databaseInfo:this.databaseInfo,clientId:this.clientId,authCredentials:this.authCredentials,appCheckCredentials:this.appCheckCredentials,initialUser:this.user,maxConcurrentLimboResolutions:100}}setCredentialChangeListener(e){this.authCredentialListener=e}setAppCheckTokenChangeListener(e){this.appCheckCredentialListener=e}terminate(){this.asyncQueue.enterRestrictedMode();const e=new Cn;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted(async()=>{try{this._onlineComponents&&await this._onlineComponents.terminate(),this._offlineComponents&&await this._offlineComponents.terminate(),this.authCredentials.shutdown(),this.appCheckCredentials.shutdown(),e.resolve()}catch(t){const n=Kh(t,"Failed to shutdown persistence");e.reject(n)}}),e.promise}}async function Nu(r,e){r.asyncQueue.verifyOperationInProgress(),Q(Ln,"Initializing OfflineComponentProvider");const t=r.configuration;await e.initialize(t);let n=t.initialUser;r.setCredentialChangeListener(async s=>{n.isEqual(s)||(await mb(e.localStore,s),n=s)}),e.persistence.setDatabaseDeletedListener(()=>{In("Terminating Firestore due to IndexedDb database deletion"),r.terminate().then(()=>{Q("Terminating Firestore due to IndexedDb database deletion completed successfully")}).catch(s=>{In("Terminating Firestore due to IndexedDb database deletion failed",s)})}),r._offlineComponents=e}async function wg(r,e){r.asyncQueue.verifyOperationInProgress();const t=await mI(r);Q(Ln,"Initializing OnlineComponentProvider"),await e.initialize(t,r.configuration),r.setCredentialChangeListener(n=>pg(e.remoteStore,n)),r.setAppCheckTokenChangeListener((n,s)=>pg(e.remoteStore,s)),r._onlineComponents=e}async function mI(r){if(!r._offlineComponents)if(r._uninitializedComponentsProvider){Q(Ln,"Using user provided OfflineComponentProvider");try{await Nu(r,r._uninitializedComponentsProvider._offline)}catch(e){const t=e;if(!function(s){return s.name==="FirebaseError"?s.code===$.FAILED_PRECONDITION||s.code===$.UNIMPLEMENTED:!(typeof DOMException<"u"&&s instanceof DOMException)||s.code===22||s.code===20||s.code===11}(t))throw t;In("Error using user provided cache. Falling back to memory cache: "+t),await Nu(r,new Ml)}}else Q(Ln,"Using default OfflineComponentProvider"),await Nu(r,new dI(void 0));return r._offlineComponents}async function Rb(r){return r._onlineComponents||(r._uninitializedComponentsProvider?(Q(Ln,"Using user provided OnlineComponentProvider"),await wg(r,r._uninitializedComponentsProvider._online)):(Q(Ln,"Using default OnlineComponentProvider"),await wg(r,new wd))),r._onlineComponents}function pI(r){return Rb(r).then(e=>e.syncEngine)}async function gI(r){const e=await Rb(r),t=e.eventManager;return t.onListen=Jj.bind(null,e.syncEngine),t.onUnlisten=tI.bind(null,e.syncEngine),t.onFirstRemoteStoreListen=Zj.bind(null,e.syncEngine),t.onLastRemoteStoreUnlisten=rI.bind(null,e.syncEngine),t}function yI(r,e,t={}){const n=new Cn;return r.asyncQueue.enqueueAndForget(async()=>function(i,a,l,u,d){const h=new hI({next:g=>{h.Ou(),a.enqueueAndForget(()=>qj(i,p)),g.fromCache&&u.source==="server"?d.reject(new G($.UNAVAILABLE,'Failed to get documents from server. (However, these documents may exist in the local cache. Run again without setting source to "server" to retrieve the cached documents.)')):d.resolve(g)},error:g=>d.reject(g)}),p=new Gj(l,h,{includeMetadataChanges:!0,ka:!0});return zj(i,p)}(await gI(r),r.asyncQueue,e,t,n)),n.promise}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Pb(r){const e={};return r.timeoutSeconds!==void 0&&(e.timeoutSeconds=r.timeoutSeconds),e}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const _g=new Map;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Mb="firestore.googleapis.com",Tg=!0;class Eg{constructor(e){var t,n;if(e.host===void 0){if(e.ssl!==void 0)throw new G($.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host=Mb,this.ssl=Tg}else this.host=e.host,this.ssl=(t=e.ssl)!==null&&t!==void 0?t:Tg;if(this.isUsingEmulator=e.emulatorOptions!==void 0,this.credentials=e.credentials,this.ignoreUndefinedProperties=!!e.ignoreUndefinedProperties,this.localCache=e.localCache,e.cacheSizeBytes===void 0)this.cacheSizeBytes=hb;else{if(e.cacheSizeBytes!==-1&&e.cacheSizeBytes<H2)throw new G($.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=e.cacheSizeBytes}IS("experimentalForceLongPolling",e.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",e.experimentalAutoDetectLongPolling),this.experimentalForceLongPolling=!!e.experimentalForceLongPolling,this.experimentalForceLongPolling?this.experimentalAutoDetectLongPolling=!1:e.experimentalAutoDetectLongPolling===void 0?this.experimentalAutoDetectLongPolling=!0:this.experimentalAutoDetectLongPolling=!!e.experimentalAutoDetectLongPolling,this.experimentalLongPollingOptions=Pb((n=e.experimentalLongPollingOptions)!==null&&n!==void 0?n:{}),function(i){if(i.timeoutSeconds!==void 0){if(isNaN(i.timeoutSeconds))throw new G($.INVALID_ARGUMENT,`invalid long polling timeout: ${i.timeoutSeconds} (must not be NaN)`);if(i.timeoutSeconds<5)throw new G($.INVALID_ARGUMENT,`invalid long polling timeout: ${i.timeoutSeconds} (minimum allowed value is 5)`);if(i.timeoutSeconds>30)throw new G($.INVALID_ARGUMENT,`invalid long polling timeout: ${i.timeoutSeconds} (maximum allowed value is 30)`)}}(this.experimentalLongPollingOptions),this.useFetchStreams=!!e.useFetchStreams}isEqual(e){return this.host===e.host&&this.ssl===e.ssl&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.experimentalForceLongPolling===e.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===e.experimentalAutoDetectLongPolling&&function(n,s){return n.timeoutSeconds===s.timeoutSeconds}(this.experimentalLongPollingOptions,e.experimentalLongPollingOptions)&&this.ignoreUndefinedProperties===e.ignoreUndefinedProperties&&this.useFetchStreams===e.useFetchStreams}}class wc{constructor(e,t,n,s){this._authCredentials=e,this._appCheckCredentials=t,this._databaseId=n,this._app=s,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new Eg({}),this._settingsFrozen=!1,this._emulatorOptions={},this._terminateTask="notTerminated"}get app(){if(!this._app)throw new G($.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return this._terminateTask!=="notTerminated"}_setSettings(e){if(this._settingsFrozen)throw new G($.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new Eg(e),this._emulatorOptions=e.emulatorOptions||{},e.credentials!==void 0&&(this._authCredentials=function(n){if(!n)return new wS;switch(n.type){case"firstParty":return new NS(n.sessionIndex||"0",n.iamToken||null,n.authTokenFactory||null);case"provider":return n.client;default:throw new G($.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}}(e.credentials))}_getSettings(){return this._settings}_getEmulatorOptions(){return this._emulatorOptions}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask==="notTerminated"&&(this._terminateTask=this._terminate()),this._terminateTask}async _restart(){this._terminateTask==="notTerminated"?await this._terminate():this._terminateTask="notTerminated"}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return function(t){const n=_g.get(t);n&&(Q("ComponentProvider","Removing Datastore"),_g.delete(t),n.terminate())}(this),Promise.resolve()}}function xI(r,e,t,n={}){var s;r=An(r,wc);const i=zn(e),a=r._getSettings(),l=Object.assign(Object.assign({},a),{emulatorOptions:r._getEmulatorOptions()}),u=`${e}:${t}`;i&&(mh(`https://${u}`),ph("Firestore",!0)),a.host!==Mb&&a.host!==u&&In("Host has been set in both settings() and connectFirestoreEmulator(), emulator host will be used.");const d=Object.assign(Object.assign({},a),{host:u,ssl:i,emulatorOptions:n});if(!xs(d,l)&&(r._setSettings(d),n.mockUserToken)){let h,p;if(typeof n.mockUserToken=="string")h=n.mockUserToken,p=xt.MOCK_USER;else{h=Sx(n.mockUserToken,(s=r._app)===null||s===void 0?void 0:s.options.projectId);const g=n.mockUserToken.sub||n.mockUserToken.user_id;if(!g)throw new G($.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");p=new xt(g)}r._authCredentials=new _S(new _0(h,p))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let _c=class Db{constructor(e,t,n){this.converter=t,this._query=n,this.type="query",this.firestore=e}withConverter(e){return new Db(this.firestore,e,this._query)}};class tt{constructor(e,t,n){this.converter=t,this._key=n,this.type="document",this.firestore=e}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new kn(this.firestore,this.converter,this._key.path.popLast())}withConverter(e){return new tt(this.firestore,e,this._key)}toJSON(){return{type:tt._jsonSchemaVersion,referencePath:this._key.toString()}}static fromJSON(e,t,n){if(sa(t,tt._jsonSchema))return new tt(e,n||null,new te(Pe.fromString(t.referencePath)))}}tt._jsonSchemaVersion="firestore/documentReference/1.0",tt._jsonSchema={type:et("string",tt._jsonSchemaVersion),referencePath:et("string")};class kn extends _c{constructor(e,t,n){super(e,t,B0(n)),this._path=n,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){const e=this._path.popLast();return e.isEmpty()?null:new tt(this.firestore,null,new te(e))}withConverter(e){return new kn(this.firestore,e,this._path)}}function Dl(r,e,...t){if(r=Me(r),E0("collection","path",e),r instanceof wc){const n=Pe.fromString(e,...t);return Lp(n),new kn(r,null,n)}{if(!(r instanceof tt||r instanceof kn))throw new G($.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const n=r._path.child(Pe.fromString(e,...t));return Lp(n),new kn(r.firestore,null,n)}}function Tc(r,e,...t){if(r=Me(r),arguments.length===1&&(e=Sh.newId()),E0("doc","path",e),r instanceof wc){const n=Pe.fromString(e,...t);return Op(n),new tt(r,null,new te(n))}{if(!(r instanceof tt||r instanceof kn))throw new G($.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const n=r._path.child(Pe.fromString(e,...t));return Op(n),new tt(r.firestore,r instanceof kn?r.converter:null,new te(n))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ng="AsyncQueue";class Cg{constructor(e=Promise.resolve()){this.Zu=[],this.Xu=!1,this.ec=[],this.tc=null,this.nc=!1,this.rc=!1,this.sc=[],this.F_=new gb(this,"async_queue_retry"),this.oc=()=>{const n=Eu();n&&Q(Ng,"Visibility state changed to "+n.visibilityState),this.F_.y_()},this._c=e;const t=Eu();t&&typeof t.addEventListener=="function"&&t.addEventListener("visibilitychange",this.oc)}get isShuttingDown(){return this.Xu}enqueueAndForget(e){this.enqueue(e)}enqueueAndForgetEvenWhileRestricted(e){this.ac(),this.uc(e)}enterRestrictedMode(e){if(!this.Xu){this.Xu=!0,this.rc=e||!1;const t=Eu();t&&typeof t.removeEventListener=="function"&&t.removeEventListener("visibilitychange",this.oc)}}enqueue(e){if(this.ac(),this.Xu)return new Promise(()=>{});const t=new Cn;return this.uc(()=>this.Xu&&this.rc?Promise.resolve():(e().then(t.resolve,t.reject),t.promise)).then(()=>t.promise)}enqueueRetryable(e){this.enqueueAndForget(()=>(this.Zu.push(e),this.cc()))}async cc(){if(this.Zu.length!==0){try{await this.Zu[0](),this.Zu.shift(),this.F_.reset()}catch(e){if(!Fo(e))throw e;Q(Ng,"Operation failed with retryable error: "+e)}this.Zu.length>0&&this.F_.g_(()=>this.cc())}}uc(e){const t=this._c.then(()=>(this.nc=!0,e().catch(n=>{throw this.tc=n,this.nc=!1,qr("INTERNAL UNHANDLED ERROR: ",kg(n)),n}).then(n=>(this.nc=!1,n))));return this._c=t,t}enqueueAfterDelay(e,t,n){this.ac(),this.sc.indexOf(e)>-1&&(t=0);const s=Gh.createAndSchedule(this,e,t,n,i=>this.lc(i));return this.ec.push(s),s}ac(){this.tc&&ae(47125,{hc:kg(this.tc)})}verifyOperationInProgress(){}async Pc(){let e;do e=this._c,await e;while(e!==this._c)}Tc(e){for(const t of this.ec)if(t.timerId===e)return!0;return!1}Ic(e){return this.Pc().then(()=>{this.ec.sort((t,n)=>t.targetTimeMs-n.targetTimeMs);for(const t of this.ec)if(t.skipDelay(),e!=="all"&&t.timerId===e)break;return this.Pc()})}dc(e){this.sc.push(e)}lc(e){const t=this.ec.indexOf(e);this.ec.splice(t,1)}}function kg(r){let e=r.message||"";return r.stack&&(e=r.stack.includes(r.message)?r.stack:r.message+`
`+r.stack),e}class ua extends wc{constructor(e,t,n,s){super(e,t,n,s),this.type="firestore",this._queue=new Cg,this._persistenceKey=(s==null?void 0:s.name)||"[DEFAULT]"}async _terminate(){if(this._firestoreClient){const e=this._firestoreClient.terminate();this._queue=new Cg(e),this._firestoreClient=void 0,await e}}}function bI(r,e){const t=typeof r=="object"?r:oc(),n=typeof r=="string"?r:Nl,s=Is(t,"firestore").getImmediate({identifier:n});if(!s._initialized){const i=Nx("firestore");i&&xI(s,...i)}return s}function Jh(r){if(r._terminated)throw new G($.FAILED_PRECONDITION,"The client has already been terminated.");return r._firestoreClient||vI(r),r._firestoreClient}function vI(r){var e,t,n;const s=r._freezeSettings(),i=function(l,u,d,h){return new $S(l,u,d,h.host,h.ssl,h.experimentalForceLongPolling,h.experimentalAutoDetectLongPolling,Pb(h.experimentalLongPollingOptions),h.useFetchStreams,h.isUsingEmulator)}(r._databaseId,((e=r._app)===null||e===void 0?void 0:e.options.appId)||"",r._persistenceKey,s);r._componentsProvider||!((t=s.localCache)===null||t===void 0)&&t._offlineComponentProvider&&(!((n=s.localCache)===null||n===void 0)&&n._onlineComponentProvider)&&(r._componentsProvider={_offline:s.localCache._offlineComponentProvider,_online:s.localCache._onlineComponentProvider}),r._firestoreClient=new fI(r._authCredentials,r._appCheckCredentials,r._queue,i,r._componentsProvider&&function(l){const u=l==null?void 0:l._online.build();return{_offline:l==null?void 0:l._offline.build(u),_online:u}}(r._componentsProvider))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Qt{constructor(e){this._byteString=e}static fromBase64String(e){try{return new Qt(dt.fromBase64String(e))}catch(t){throw new G($.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+t)}}static fromUint8Array(e){return new Qt(dt.fromUint8Array(e))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(e){return this._byteString.isEqual(e._byteString)}toJSON(){return{type:Qt._jsonSchemaVersion,bytes:this.toBase64()}}static fromJSON(e){if(sa(e,Qt._jsonSchema))return Qt.fromBase64String(e.bytes)}}Qt._jsonSchemaVersion="firestore/bytes/1.0",Qt._jsonSchema={type:et("string",Qt._jsonSchemaVersion),bytes:et("string")};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class da{constructor(...e){for(let t=0;t<e.length;++t)if(e[t].length===0)throw new G($.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new ut(e)}isEqual(e){return this._internalPath.isEqual(e._internalPath)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Zh{constructor(e){this._methodName=e}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Er{constructor(e,t){if(!isFinite(e)||e<-90||e>90)throw new G($.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+e);if(!isFinite(t)||t<-180||t>180)throw new G($.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+t);this._lat=e,this._long=t}get latitude(){return this._lat}get longitude(){return this._long}isEqual(e){return this._lat===e._lat&&this._long===e._long}_compareTo(e){return ge(this._lat,e._lat)||ge(this._long,e._long)}toJSON(){return{latitude:this._lat,longitude:this._long,type:Er._jsonSchemaVersion}}static fromJSON(e){if(sa(e,Er._jsonSchema))return new Er(e.latitude,e.longitude)}}Er._jsonSchemaVersion="firestore/geoPoint/1.0",Er._jsonSchema={type:et("string",Er._jsonSchemaVersion),latitude:et("number"),longitude:et("number")};/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Nr{constructor(e){this._values=(e||[]).map(t=>t)}toArray(){return this._values.map(e=>e)}isEqual(e){return function(n,s){if(n.length!==s.length)return!1;for(let i=0;i<n.length;++i)if(n[i]!==s[i])return!1;return!0}(this._values,e._values)}toJSON(){return{type:Nr._jsonSchemaVersion,vectorValues:this._values}}static fromJSON(e){if(sa(e,Nr._jsonSchema)){if(Array.isArray(e.vectorValues)&&e.vectorValues.every(t=>typeof t=="number"))return new Nr(e.vectorValues);throw new G($.INVALID_ARGUMENT,"Expected 'vectorValues' field to be a number array")}}}Nr._jsonSchemaVersion="firestore/vectorValue/1.0",Nr._jsonSchema={type:et("string",Nr._jsonSchemaVersion),vectorValues:et("object")};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const wI=/^__.*__$/;class _I{constructor(e,t,n){this.data=e,this.fieldMask=t,this.fieldTransforms=n}toMutation(e,t){return this.fieldMask!==null?new Gn(e,this.data,this.fieldMask,t,this.fieldTransforms):new ia(e,this.data,t,this.fieldTransforms)}}class Ob{constructor(e,t,n){this.data=e,this.fieldMask=t,this.fieldTransforms=n}toMutation(e,t){return new Gn(e,this.data,this.fieldMask,t,this.fieldTransforms)}}function Lb(r){switch(r){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw ae(40011,{Ec:r})}}class ef{constructor(e,t,n,s,i,a){this.settings=e,this.databaseId=t,this.serializer=n,this.ignoreUndefinedProperties=s,i===void 0&&this.Ac(),this.fieldTransforms=i||[],this.fieldMask=a||[]}get path(){return this.settings.path}get Ec(){return this.settings.Ec}Rc(e){return new ef(Object.assign(Object.assign({},this.settings),e),this.databaseId,this.serializer,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}Vc(e){var t;const n=(t=this.path)===null||t===void 0?void 0:t.child(e),s=this.Rc({path:n,mc:!1});return s.fc(e),s}gc(e){var t;const n=(t=this.path)===null||t===void 0?void 0:t.child(e),s=this.Rc({path:n,mc:!1});return s.Ac(),s}yc(e){return this.Rc({path:void 0,mc:!0})}wc(e){return Ol(e,this.settings.methodName,this.settings.Sc||!1,this.path,this.settings.bc)}contains(e){return this.fieldMask.find(t=>e.isPrefixOf(t))!==void 0||this.fieldTransforms.find(t=>e.isPrefixOf(t.field))!==void 0}Ac(){if(this.path)for(let e=0;e<this.path.length;e++)this.fc(this.path.get(e))}fc(e){if(e.length===0)throw this.wc("Document fields must not be empty");if(Lb(this.Ec)&&wI.test(e))throw this.wc('Document fields cannot begin and end with "__"')}}class TI{constructor(e,t,n){this.databaseId=e,this.ignoreUndefinedProperties=t,this.serializer=n||xc(e)}Dc(e,t,n,s=!1){return new ef({Ec:e,methodName:t,bc:n,path:ut.emptyPath(),mc:!1,Sc:s},this.databaseId,this.serializer,this.ignoreUndefinedProperties)}}function Ec(r){const e=r._freezeSettings(),t=xc(r._databaseId);return new TI(r._databaseId,!!e.ignoreUndefinedProperties,t)}function Vb(r,e,t,n,s,i={}){const a=r.Dc(i.merge||i.mergeFields?2:0,e,t,s);tf("Data must be an object, but it was:",a,n);const l=$b(n,a);let u,d;if(i.merge)u=new Bt(a.fieldMask),d=a.fieldTransforms;else if(i.mergeFields){const h=[];for(const p of i.mergeFields){const g=_d(e,p,t);if(!a.contains(g))throw new G($.INVALID_ARGUMENT,`Field '${g}' is specified in your field mask but missing from your input data.`);zb(h,g)||h.push(g)}u=new Bt(h),d=a.fieldTransforms.filter(p=>u.covers(p.field))}else u=null,d=a.fieldTransforms;return new _I(new Dt(l),u,d)}class Nc extends Zh{_toFieldTransform(e){if(e.Ec!==2)throw e.Ec===1?e.wc(`${this._methodName}() can only appear at the top level of your update data`):e.wc(`${this._methodName}() cannot be used with set() unless you pass {merge:true}`);return e.fieldMask.push(e.path),null}isEqual(e){return e instanceof Nc}}function Fb(r,e,t,n){const s=r.Dc(1,e,t);tf("Data must be an object, but it was:",s,n);const i=[],a=Dt.empty();Wn(n,(u,d)=>{const h=rf(e,u,t);d=Me(d);const p=s.gc(h);if(d instanceof Nc)i.push(h);else{const g=ha(d,p);g!=null&&(i.push(h),a.set(h,g))}});const l=new Bt(i);return new Ob(a,l,s.fieldTransforms)}function Ub(r,e,t,n,s,i){const a=r.Dc(1,e,t),l=[_d(e,n,t)],u=[s];if(i.length%2!=0)throw new G($.INVALID_ARGUMENT,`Function ${e}() needs to be called with an even number of arguments that alternate between field names and values.`);for(let g=0;g<i.length;g+=2)l.push(_d(e,i[g])),u.push(i[g+1]);const d=[],h=Dt.empty();for(let g=l.length-1;g>=0;--g)if(!zb(d,l[g])){const b=l[g];let C=u[g];C=Me(C);const x=a.gc(b);if(C instanceof Nc)d.push(b);else{const v=ha(C,x);v!=null&&(d.push(b),h.set(b,v))}}const p=new Bt(d);return new Ob(h,p,a.fieldTransforms)}function EI(r,e,t,n=!1){return ha(t,r.Dc(n?4:3,e))}function ha(r,e){if(Bb(r=Me(r)))return tf("Unsupported field value:",e,r),$b(r,e);if(r instanceof Zh)return function(n,s){if(!Lb(s.Ec))throw s.wc(`${n._methodName}() can only be used with update() and set()`);if(!s.path)throw s.wc(`${n._methodName}() is not currently supported inside arrays`);const i=n._toFieldTransform(s);i&&s.fieldTransforms.push(i)}(r,e),null;if(r===void 0&&e.ignoreUndefinedProperties)return null;if(e.path&&e.fieldMask.push(e.path),r instanceof Array){if(e.settings.mc&&e.Ec!==4)throw e.wc("Nested arrays are not supported");return function(n,s){const i=[];let a=0;for(const l of n){let u=ha(l,s.yc(a));u==null&&(u={nullValue:"NULL_VALUE"}),i.push(u),a++}return{arrayValue:{values:i}}}(r,e)}return function(n,s){if((n=Me(n))===null)return{nullValue:"NULL_VALUE"};if(typeof n=="number")return u2(s.serializer,n);if(typeof n=="boolean")return{booleanValue:n};if(typeof n=="string")return{stringValue:n};if(n instanceof Date){const i=Fe.fromDate(n);return{timestampValue:Al(s.serializer,i)}}if(n instanceof Fe){const i=new Fe(n.seconds,1e3*Math.floor(n.nanoseconds/1e3));return{timestampValue:Al(s.serializer,i)}}if(n instanceof Er)return{geoPointValue:{latitude:n.latitude,longitude:n.longitude}};if(n instanceof Qt)return{bytesValue:ob(s.serializer,n._byteString)};if(n instanceof tt){const i=s.databaseId,a=n.firestore._databaseId;if(!a.isEqual(i))throw s.wc(`Document reference is for database ${a.projectId}/${a.database} but should be for database ${i.projectId}/${i.database}`);return{referenceValue:Vh(n.firestore._databaseId||s.databaseId,n._key.path)}}if(n instanceof Nr)return function(a,l){return{mapValue:{fields:{[P0]:{stringValue:M0},[Cl]:{arrayValue:{values:a.toArray().map(d=>{if(typeof d!="number")throw l.wc("VectorValues must only contain numeric values.");return Mh(l.serializer,d)})}}}}}}(n,s);throw s.wc(`Unsupported field value: ${cc(n)}`)}(r,e)}function $b(r,e){const t={};return k0(r)?e.path&&e.path.length>0&&e.fieldMask.push(e.path):Wn(r,(n,s)=>{const i=ha(s,e.Vc(n));i!=null&&(t[n]=i)}),{mapValue:{fields:t}}}function Bb(r){return!(typeof r!="object"||r===null||r instanceof Array||r instanceof Date||r instanceof Fe||r instanceof Er||r instanceof Qt||r instanceof tt||r instanceof Zh||r instanceof Nr)}function tf(r,e,t){if(!Bb(t)||!N0(t)){const n=cc(t);throw n==="an object"?e.wc(r+" a custom object"):e.wc(r+" "+n)}}function _d(r,e,t){if((e=Me(e))instanceof da)return e._internalPath;if(typeof e=="string")return rf(r,e);throw Ol("Field path arguments must be of type string or ",r,!1,void 0,t)}const NI=new RegExp("[~\\*/\\[\\]]");function rf(r,e,t){if(e.search(NI)>=0)throw Ol(`Invalid field path (${e}). Paths must not contain '~', '*', '/', '[', or ']'`,r,!1,void 0,t);try{return new da(...e.split("."))._internalPath}catch{throw Ol(`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,r,!1,void 0,t)}}function Ol(r,e,t,n,s){const i=n&&!n.isEmpty(),a=s!==void 0;let l=`Function ${e}() called with invalid data`;t&&(l+=" (via `toFirestore()`)"),l+=". ";let u="";return(i||a)&&(u+=" (found",i&&(u+=` in field ${n}`),a&&(u+=` in document ${s}`),u+=")"),new G($.INVALID_ARGUMENT,l+r+u)}function zb(r,e){return r.some(t=>t.isEqual(e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class qb{constructor(e,t,n,s,i){this._firestore=e,this._userDataWriter=t,this._key=n,this._document=s,this._converter=i}get id(){return this._key.path.lastSegment()}get ref(){return new tt(this._firestore,this._converter,this._key)}exists(){return this._document!==null}data(){if(this._document){if(this._converter){const e=new CI(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(e)}return this._userDataWriter.convertValue(this._document.data.value)}}get(e){if(this._document){const t=this._document.data.field(nf("DocumentSnapshot.get",e));if(t!==null)return this._userDataWriter.convertValue(t)}}}class CI extends qb{data(){return super.data()}}function nf(r,e){return typeof e=="string"?rf(r,e):e instanceof da?e._internalPath:e._delegate._internalPath}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function kI(r){if(r.limitType==="L"&&r.explicitOrderBy.length===0)throw new G($.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}class sf{}class SI extends sf{}function Ll(r,e,...t){let n=[];e instanceof sf&&n.push(e),n=n.concat(t),function(i){const a=i.filter(u=>u instanceof of).length,l=i.filter(u=>u instanceof Cc).length;if(a>1||a>0&&l>0)throw new G($.INVALID_ARGUMENT,"InvalidQuery. When using composite filters, you cannot use more than one filter at the top level. Consider nesting the multiple filters within an `and(...)` statement. For example: change `query(query, where(...), or(...))` to `query(query, and(where(...), or(...)))`.")}(n);for(const s of n)r=s._apply(r);return r}class Cc extends SI{constructor(e,t,n){super(),this._field=e,this._op=t,this._value=n,this.type="where"}static _create(e,t,n){return new Cc(e,t,n)}_apply(e){const t=this._parse(e);return Hb(e._query,t),new _c(e.firestore,e.converter,dd(e._query,t))}_parse(e){const t=Ec(e.firestore);return function(i,a,l,u,d,h,p){let g;if(d.isKeyField()){if(h==="array-contains"||h==="array-contains-any")throw new G($.INVALID_ARGUMENT,`Invalid Query. You can't perform '${h}' queries on documentId().`);if(h==="in"||h==="not-in"){jg(p,h);const C=[];for(const x of p)C.push(Sg(u,i,x));g={arrayValue:{values:C}}}else g=Sg(u,i,p)}else h!=="in"&&h!=="not-in"&&h!=="array-contains-any"||jg(p,h),g=EI(l,a,p,h==="in"||h==="not-in");return Ze.create(d,h,g)}(e._query,"where",t,e.firestore._databaseId,this._field,this._op,this._value)}}function Vl(r,e,t){const n=e,s=nf("where",r);return Cc._create(s,n,t)}class of extends sf{constructor(e,t){super(),this.type=e,this._queryConstraints=t}static _create(e,t){return new of(e,t)}_parse(e){const t=this._queryConstraints.map(n=>n._parse(e)).filter(n=>n.getFilters().length>0);return t.length===1?t[0]:ur.create(t,this._getOperator())}_apply(e){const t=this._parse(e);return t.getFilters().length===0?e:(function(s,i){let a=s;const l=i.getFlattenedFilters();for(const u of l)Hb(a,u),a=dd(a,u)}(e._query,t),new _c(e.firestore,e.converter,dd(e._query,t)))}_getQueryConstraints(){return this._queryConstraints}_getOperator(){return this.type==="and"?"and":"or"}}function Sg(r,e,t){if(typeof(t=Me(t))=="string"){if(t==="")throw new G($.INVALID_ARGUMENT,"Invalid query. When querying with documentId(), you must provide a valid document ID, but it was an empty string.");if(!z0(e)&&t.indexOf("/")!==-1)throw new G($.INVALID_ARGUMENT,`Invalid query. When querying a collection by documentId(), you must provide a plain document ID, but '${t}' contains a '/' character.`);const n=e.path.child(Pe.fromString(t));if(!te.isDocumentKey(n))throw new G($.INVALID_ARGUMENT,`Invalid query. When querying a collection group by documentId(), the value provided must result in a valid document path, but '${n}' is not because it has an odd number of segments (${n.length}).`);return Hp(r,new te(n))}if(t instanceof tt)return Hp(r,t._key);throw new G($.INVALID_ARGUMENT,`Invalid query. When querying with documentId(), you must provide a valid string or a DocumentReference, but it was: ${cc(t)}.`)}function jg(r,e){if(!Array.isArray(r)||r.length===0)throw new G($.INVALID_ARGUMENT,`Invalid Query. A non-empty array is required for '${e.toString()}' filters.`)}function Hb(r,e){const t=function(s,i){for(const a of s)for(const l of a.getFlattenedFilters())if(i.indexOf(l.op)>=0)return l.op;return null}(r.filters,function(s){switch(s){case"!=":return["!=","not-in"];case"array-contains-any":case"in":return["not-in"];case"not-in":return["array-contains-any","in","not-in","!="];default:return[]}}(e.op));if(t!==null)throw t===e.op?new G($.INVALID_ARGUMENT,`Invalid query. You cannot use more than one '${e.op.toString()}' filter.`):new G($.INVALID_ARGUMENT,`Invalid query. You cannot use '${e.op.toString()}' filters with '${t.toString()}' filters.`)}class jI{convertValue(e,t="none"){switch(Dn(e)){case 0:return null;case 1:return e.booleanValue;case 2:return Qe(e.integerValue||e.doubleValue);case 3:return this.convertTimestamp(e.timestampValue);case 4:return this.convertServerTimestamp(e,t);case 5:return e.stringValue;case 6:return this.convertBytes(Mn(e.bytesValue));case 7:return this.convertReference(e.referenceValue);case 8:return this.convertGeoPoint(e.geoPointValue);case 9:return this.convertArray(e.arrayValue,t);case 11:return this.convertObject(e.mapValue,t);case 10:return this.convertVectorValue(e.mapValue);default:throw ae(62114,{value:e})}}convertObject(e,t){return this.convertObjectMap(e.fields,t)}convertObjectMap(e,t="none"){const n={};return Wn(e,(s,i)=>{n[s]=this.convertValue(i,t)}),n}convertVectorValue(e){var t,n,s;const i=(s=(n=(t=e.fields)===null||t===void 0?void 0:t[Cl].arrayValue)===null||n===void 0?void 0:n.values)===null||s===void 0?void 0:s.map(a=>Qe(a.doubleValue));return new Nr(i)}convertGeoPoint(e){return new Er(Qe(e.latitude),Qe(e.longitude))}convertArray(e,t){return(e.values||[]).map(n=>this.convertValue(n,t))}convertServerTimestamp(e,t){switch(t){case"previous":const n=hc(e);return n==null?null:this.convertValue(n,t);case"estimate":return this.convertTimestamp(Vi(e));default:return null}}convertTimestamp(e){const t=Pn(e);return new Fe(t.seconds,t.nanos)}convertDocumentKey(e,t){const n=Pe.fromString(e);Ce(db(n),9688,{name:e});const s=new Fi(n.get(1),n.get(3)),i=new te(n.popFirst(5));return s.isEqual(t)||qr(`Document ${i} contains a document reference within a different database (${s.projectId}/${s.database}) which is not supported. It will be treated as a reference in the current database (${t.projectId}/${t.database}) instead.`),i}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Wb(r,e,t){let n;return n=r?t&&(t.merge||t.mergeFields)?r.toFirestore(e,t):r.toFirestore(e):e,n}class za{constructor(e,t){this.hasPendingWrites=e,this.fromCache=t}isEqual(e){return this.hasPendingWrites===e.hasPendingWrites&&this.fromCache===e.fromCache}}class no extends qb{constructor(e,t,n,s,i,a){super(e,t,n,s,a),this._firestore=e,this._firestoreImpl=e,this.metadata=i}exists(){return super.exists()}data(e={}){if(this._document){if(this._converter){const t=new il(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(t,e)}return this._userDataWriter.convertValue(this._document.data.value,e.serverTimestamps)}}get(e,t={}){if(this._document){const n=this._document.data.field(nf("DocumentSnapshot.get",e));if(n!==null)return this._userDataWriter.convertValue(n,t.serverTimestamps)}}toJSON(){if(this.metadata.hasPendingWrites)throw new G($.FAILED_PRECONDITION,"DocumentSnapshot.toJSON() attempted to serialize a document with pending writes. Await waitForPendingWrites() before invoking toJSON().");const e=this._document,t={};return t.type=no._jsonSchemaVersion,t.bundle="",t.bundleSource="DocumentSnapshot",t.bundleName=this._key.toString(),!e||!e.isValidDocument()||!e.isFoundDocument()?t:(this._userDataWriter.convertObjectMap(e.data.value.mapValue.fields,"previous"),t.bundle=(this._firestore,this.ref.path,"NOT SUPPORTED"),t)}}no._jsonSchemaVersion="firestore/documentSnapshot/1.0",no._jsonSchema={type:et("string",no._jsonSchemaVersion),bundleSource:et("string","DocumentSnapshot"),bundleName:et("string"),bundle:et("string")};class il extends no{data(e={}){return super.data(e)}}class so{constructor(e,t,n,s){this._firestore=e,this._userDataWriter=t,this._snapshot=s,this.metadata=new za(s.hasPendingWrites,s.fromCache),this.query=n}get docs(){const e=[];return this.forEach(t=>e.push(t)),e}get size(){return this._snapshot.docs.size}get empty(){return this.size===0}forEach(e,t){this._snapshot.docs.forEach(n=>{e.call(t,new il(this._firestore,this._userDataWriter,n.key,n,new za(this._snapshot.mutatedKeys.has(n.key),this._snapshot.fromCache),this.query.converter))})}docChanges(e={}){const t=!!e.includeMetadataChanges;if(t&&this._snapshot.excludesMetadataChanges)throw new G($.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===t||(this._cachedChanges=function(s,i){if(s._snapshot.oldDocs.isEmpty()){let a=0;return s._snapshot.docChanges.map(l=>{const u=new il(s._firestore,s._userDataWriter,l.doc.key,l.doc,new za(s._snapshot.mutatedKeys.has(l.doc.key),s._snapshot.fromCache),s.query.converter);return l.doc,{type:"added",doc:u,oldIndex:-1,newIndex:a++}})}{let a=s._snapshot.oldDocs;return s._snapshot.docChanges.filter(l=>i||l.type!==3).map(l=>{const u=new il(s._firestore,s._userDataWriter,l.doc.key,l.doc,new za(s._snapshot.mutatedKeys.has(l.doc.key),s._snapshot.fromCache),s.query.converter);let d=-1,h=-1;return l.type!==0&&(d=a.indexOf(l.doc.key),a=a.delete(l.doc.key)),l.type!==1&&(a=a.add(l.doc),h=a.indexOf(l.doc.key)),{type:II(l.type),doc:u,oldIndex:d,newIndex:h}})}}(this,t),this._cachedChangesIncludeMetadataChanges=t),this._cachedChanges}toJSON(){if(this.metadata.hasPendingWrites)throw new G($.FAILED_PRECONDITION,"QuerySnapshot.toJSON() attempted to serialize a document with pending writes. Await waitForPendingWrites() before invoking toJSON().");const e={};e.type=so._jsonSchemaVersion,e.bundleSource="QuerySnapshot",e.bundleName=Sh.newId(),this._firestore._databaseId.database,this._firestore._databaseId.projectId;const t=[],n=[],s=[];return this.docs.forEach(i=>{i._document!==null&&(t.push(i._document),n.push(this._userDataWriter.convertObjectMap(i._document.data.value.mapValue.fields,"previous")),s.push(i.ref.path))}),e.bundle=(this._firestore,this.query._query,e.bundleName,"NOT SUPPORTED"),e}}function II(r){switch(r){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return ae(61501,{type:r})}}so._jsonSchemaVersion="firestore/querySnapshot/1.0",so._jsonSchema={type:et("string",so._jsonSchemaVersion),bundleSource:et("string","QuerySnapshot"),bundleName:et("string"),bundle:et("string")};class AI extends jI{constructor(e){super(),this.firestore=e}convertBytes(e){return new Qt(e)}convertReference(e){const t=this.convertDocumentKey(e,this.firestore._databaseId);return new tt(this.firestore,null,t)}}function Fl(r){r=An(r,_c);const e=An(r.firestore,ua),t=Jh(e),n=new AI(e);return kI(r._query),yI(t,r._query).then(s=>new so(e,n,r,s))}function RI(r,e,t){r=An(r,tt);const n=An(r.firestore,ua),s=Wb(r.converter,e,t);return lf(n,[Vb(Ec(n),"setDoc",r._key,s,r.converter!==null,t).toMutation(r._key,Ht.none())])}function af(r,e,t,...n){r=An(r,tt);const s=An(r.firestore,ua),i=Ec(s);let a;return a=typeof(e=Me(e))=="string"||e instanceof da?Ub(i,"updateDoc",r._key,e,t,n):Fb(i,"updateDoc",r._key,e),lf(s,[a.toMutation(r._key,Ht.exists(!0))])}function lf(r,e){return function(n,s){const i=new Cn;return n.asyncQueue.enqueueAndForget(async()=>nI(await pI(n),s,i)),i.promise}(Jh(r),e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class PI{constructor(e,t){this._firestore=e,this._commitHandler=t,this._mutations=[],this._committed=!1,this._dataReader=Ec(e)}set(e,t,n){this._verifyNotCommitted();const s=Cu(e,this._firestore),i=Wb(s.converter,t,n),a=Vb(this._dataReader,"WriteBatch.set",s._key,i,s.converter!==null,n);return this._mutations.push(a.toMutation(s._key,Ht.none())),this}update(e,t,n,...s){this._verifyNotCommitted();const i=Cu(e,this._firestore);let a;return a=typeof(t=Me(t))=="string"||t instanceof da?Ub(this._dataReader,"WriteBatch.update",i._key,t,n,s):Fb(this._dataReader,"WriteBatch.update",i._key,t),this._mutations.push(a.toMutation(i._key,Ht.exists(!0))),this}delete(e){this._verifyNotCommitted();const t=Cu(e,this._firestore);return this._mutations=this._mutations.concat(new Dh(t._key,Ht.none())),this}commit(){return this._verifyNotCommitted(),this._committed=!0,this._mutations.length>0?this._commitHandler(this._mutations):Promise.resolve()}_verifyNotCommitted(){if(this._committed)throw new G($.FAILED_PRECONDITION,"A write batch can no longer be used after commit() has been called.")}}function Cu(r,e){if((r=Me(r)).firestore!==e)throw new G($.INVALID_ARGUMENT,"Provided document reference is from a different Firestore instance.");return r}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Gb(r){return Jh(r=An(r,ua)),new PI(r,e=>lf(r,e))}(function(e,t=!0){(function(s){Lo=s})(As),Cr(new cr("firestore",(n,{instanceIdentifier:s,options:i})=>{const a=n.getProvider("app").getImmediate(),l=new ua(new TS(n.getProvider("auth-internal")),new CS(a,n.getProvider("app-check-internal")),function(d,h){if(!Object.prototype.hasOwnProperty.apply(d.options,["projectId"]))throw new G($.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new Fi(d.options.projectId,h)}(a,s),a);return i=Object.assign({useFetchStreams:t},i),l._setSettings(i),l},"PUBLIC").setMultipleInstances(!0)),Lt(Ap,Rp,e),Lt(Ap,Rp,"esm2017")})();/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Kb="firebasestorage.googleapis.com",Qb="storageBucket",MI=120*1e3,DI=600*1e3;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ge extends fr{constructor(e,t,n=0){super(ku(e),`Firebase Storage: ${t} (${ku(e)})`),this.status_=n,this.customData={serverResponse:null},this._baseMessage=this.message,Object.setPrototypeOf(this,Ge.prototype)}get status(){return this.status_}set status(e){this.status_=e}_codeEquals(e){return ku(e)===this.code}get serverResponse(){return this.customData.serverResponse}set serverResponse(e){this.customData.serverResponse=e,this.customData.serverResponse?this.message=`${this._baseMessage}
${this.customData.serverResponse}`:this.message=this._baseMessage}}var We;(function(r){r.UNKNOWN="unknown",r.OBJECT_NOT_FOUND="object-not-found",r.BUCKET_NOT_FOUND="bucket-not-found",r.PROJECT_NOT_FOUND="project-not-found",r.QUOTA_EXCEEDED="quota-exceeded",r.UNAUTHENTICATED="unauthenticated",r.UNAUTHORIZED="unauthorized",r.UNAUTHORIZED_APP="unauthorized-app",r.RETRY_LIMIT_EXCEEDED="retry-limit-exceeded",r.INVALID_CHECKSUM="invalid-checksum",r.CANCELED="canceled",r.INVALID_EVENT_NAME="invalid-event-name",r.INVALID_URL="invalid-url",r.INVALID_DEFAULT_BUCKET="invalid-default-bucket",r.NO_DEFAULT_BUCKET="no-default-bucket",r.CANNOT_SLICE_BLOB="cannot-slice-blob",r.SERVER_FILE_WRONG_SIZE="server-file-wrong-size",r.NO_DOWNLOAD_URL="no-download-url",r.INVALID_ARGUMENT="invalid-argument",r.INVALID_ARGUMENT_COUNT="invalid-argument-count",r.APP_DELETED="app-deleted",r.INVALID_ROOT_OPERATION="invalid-root-operation",r.INVALID_FORMAT="invalid-format",r.INTERNAL_ERROR="internal-error",r.UNSUPPORTED_ENVIRONMENT="unsupported-environment"})(We||(We={}));function ku(r){return"storage/"+r}function cf(){const r="An unknown error occurred, please check the error payload for server response.";return new Ge(We.UNKNOWN,r)}function OI(r){return new Ge(We.OBJECT_NOT_FOUND,"Object '"+r+"' does not exist.")}function LI(r){return new Ge(We.QUOTA_EXCEEDED,"Quota for bucket '"+r+"' exceeded, please view quota on https://firebase.google.com/pricing/.")}function VI(){const r="User is not authenticated, please authenticate using Firebase Authentication and try again.";return new Ge(We.UNAUTHENTICATED,r)}function FI(){return new Ge(We.UNAUTHORIZED_APP,"This app does not have permission to access Firebase Storage on this project.")}function UI(r){return new Ge(We.UNAUTHORIZED,"User does not have permission to access '"+r+"'.")}function $I(){return new Ge(We.RETRY_LIMIT_EXCEEDED,"Max retry time for operation exceeded, please try again.")}function BI(){return new Ge(We.CANCELED,"User canceled the upload/download.")}function zI(r){return new Ge(We.INVALID_URL,"Invalid URL '"+r+"'.")}function qI(r){return new Ge(We.INVALID_DEFAULT_BUCKET,"Invalid default bucket '"+r+"'.")}function HI(){return new Ge(We.NO_DEFAULT_BUCKET,"No default bucket found. Did you set the '"+Qb+"' property when initializing the app?")}function WI(){return new Ge(We.CANNOT_SLICE_BLOB,"Cannot slice blob for upload. Please retry the upload.")}function GI(){return new Ge(We.NO_DOWNLOAD_URL,"The given file does not have any download URLs.")}function KI(r){return new Ge(We.UNSUPPORTED_ENVIRONMENT,`${r} is missing. Make sure to install the required polyfills. See https://firebase.google.com/docs/web/environments-js-sdk#polyfills for more information.`)}function Td(r){return new Ge(We.INVALID_ARGUMENT,r)}function Yb(){return new Ge(We.APP_DELETED,"The Firebase app was deleted.")}function QI(r){return new Ge(We.INVALID_ROOT_OPERATION,"The operation '"+r+"' cannot be performed on a root reference, create a non-root reference using child, such as .child('file.png').")}function Si(r,e){return new Ge(We.INVALID_FORMAT,"String does not match format '"+r+"': "+e)}function ci(r){throw new Ge(We.INTERNAL_ERROR,"Internal error: "+r)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class zt{constructor(e,t){this.bucket=e,this.path_=t}get path(){return this.path_}get isRoot(){return this.path.length===0}fullServerUrl(){const e=encodeURIComponent;return"/b/"+e(this.bucket)+"/o/"+e(this.path)}bucketOnlyServerUrl(){return"/b/"+encodeURIComponent(this.bucket)+"/o"}static makeFromBucketSpec(e,t){let n;try{n=zt.makeFromUrl(e,t)}catch{return new zt(e,"")}if(n.path==="")return n;throw qI(e)}static makeFromUrl(e,t){let n=null;const s="([A-Za-z0-9.\\-_]+)";function i(R){R.path.charAt(R.path.length-1)==="/"&&(R.path_=R.path_.slice(0,-1))}const a="(/(.*))?$",l=new RegExp("^gs://"+s+a,"i"),u={bucket:1,path:3};function d(R){R.path_=decodeURIComponent(R.path)}const h="v[A-Za-z0-9_]+",p=t.replace(/[.]/g,"\\."),g="(/([^?#]*).*)?$",b=new RegExp(`^https?://${p}/${h}/b/${s}/o${g}`,"i"),C={bucket:1,path:3},x=t===Kb?"(?:storage.googleapis.com|storage.cloud.google.com)":t,v="([^?#]*)",E=new RegExp(`^https?://${x}/${s}/${v}`,"i"),N=[{regex:l,indices:u,postModify:i},{regex:b,indices:C,postModify:d},{regex:E,indices:{bucket:1,path:2},postModify:d}];for(let R=0;R<N.length;R++){const L=N[R],U=L.regex.exec(e);if(U){const A=U[L.indices.bucket];let w=U[L.indices.path];w||(w=""),n=new zt(A,w),L.postModify(n);break}}if(n==null)throw zI(e);return n}}class YI{constructor(e){this.promise_=Promise.reject(e)}getPromise(){return this.promise_}cancel(e=!1){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function XI(r,e,t){let n=1,s=null,i=null,a=!1,l=0;function u(){return l===2}let d=!1;function h(...v){d||(d=!0,e.apply(null,v))}function p(v){s=setTimeout(()=>{s=null,r(b,u())},v)}function g(){i&&clearTimeout(i)}function b(v,...E){if(d){g();return}if(v){g(),h.call(null,v,...E);return}if(u()||a){g(),h.call(null,v,...E);return}n<64&&(n*=2);let N;l===1?(l=2,N=0):N=(n+Math.random())*1e3,p(N)}let C=!1;function x(v){C||(C=!0,g(),!d&&(s!==null?(v||(l=2),clearTimeout(s),p(0)):v||(l=1)))}return p(0),i=setTimeout(()=>{a=!0,x(!0)},t),x}function JI(r){r(!1)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ZI(r){return r!==void 0}function eA(r){return typeof r=="object"&&!Array.isArray(r)}function uf(r){return typeof r=="string"||r instanceof String}function Ig(r){return df()&&r instanceof Blob}function df(){return typeof Blob<"u"}function Ag(r,e,t,n){if(n<e)throw Td(`Invalid value for '${r}'. Expected ${e} or greater.`);if(n>t)throw Td(`Invalid value for '${r}'. Expected ${t} or less.`)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function hf(r,e,t){let n=e;return t==null&&(n=`https://${e}`),`${t}://${n}/v0${r}`}function Xb(r){const e=encodeURIComponent;let t="?";for(const n in r)if(r.hasOwnProperty(n)){const s=e(n)+"="+e(r[n]);t=t+s+"&"}return t=t.slice(0,-1),t}var gs;(function(r){r[r.NO_ERROR=0]="NO_ERROR",r[r.NETWORK_ERROR=1]="NETWORK_ERROR",r[r.ABORT=2]="ABORT"})(gs||(gs={}));/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function tA(r,e){const t=r>=500&&r<600,s=[408,429].indexOf(r)!==-1,i=e.indexOf(r)!==-1;return t||s||i}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class rA{constructor(e,t,n,s,i,a,l,u,d,h,p,g=!0,b=!1){this.url_=e,this.method_=t,this.headers_=n,this.body_=s,this.successCodes_=i,this.additionalRetryCodes_=a,this.callback_=l,this.errorCallback_=u,this.timeout_=d,this.progressCallback_=h,this.connectionFactory_=p,this.retry=g,this.isUsingEmulator=b,this.pendingConnection_=null,this.backoffId_=null,this.canceled_=!1,this.appDelete_=!1,this.promise_=new Promise((C,x)=>{this.resolve_=C,this.reject_=x,this.start_()})}start_(){const e=(n,s)=>{if(s){n(!1,new qa(!1,null,!0));return}const i=this.connectionFactory_();this.pendingConnection_=i;const a=l=>{const u=l.loaded,d=l.lengthComputable?l.total:-1;this.progressCallback_!==null&&this.progressCallback_(u,d)};this.progressCallback_!==null&&i.addUploadProgressListener(a),i.send(this.url_,this.method_,this.isUsingEmulator,this.body_,this.headers_).then(()=>{this.progressCallback_!==null&&i.removeUploadProgressListener(a),this.pendingConnection_=null;const l=i.getErrorCode()===gs.NO_ERROR,u=i.getStatus();if(!l||tA(u,this.additionalRetryCodes_)&&this.retry){const h=i.getErrorCode()===gs.ABORT;n(!1,new qa(!1,null,h));return}const d=this.successCodes_.indexOf(u)!==-1;n(!0,new qa(d,i))})},t=(n,s)=>{const i=this.resolve_,a=this.reject_,l=s.connection;if(s.wasSuccessCode)try{const u=this.callback_(l,l.getResponse());ZI(u)?i(u):i()}catch(u){a(u)}else if(l!==null){const u=cf();u.serverResponse=l.getErrorText(),this.errorCallback_?a(this.errorCallback_(l,u)):a(u)}else if(s.canceled){const u=this.appDelete_?Yb():BI();a(u)}else{const u=$I();a(u)}};this.canceled_?t(!1,new qa(!1,null,!0)):this.backoffId_=XI(e,t,this.timeout_)}getPromise(){return this.promise_}cancel(e){this.canceled_=!0,this.appDelete_=e||!1,this.backoffId_!==null&&JI(this.backoffId_),this.pendingConnection_!==null&&this.pendingConnection_.abort()}}class qa{constructor(e,t,n){this.wasSuccessCode=e,this.connection=t,this.canceled=!!n}}function nA(r,e){e!==null&&e.length>0&&(r.Authorization="Firebase "+e)}function sA(r,e){r["X-Firebase-Storage-Version"]="webjs/"+(e??"AppManager")}function oA(r,e){e&&(r["X-Firebase-GMPID"]=e)}function iA(r,e){e!==null&&(r["X-Firebase-AppCheck"]=e)}function aA(r,e,t,n,s,i,a=!0,l=!1){const u=Xb(r.urlParams),d=r.url+u,h=Object.assign({},r.headers);return oA(h,e),nA(h,t),sA(h,i),iA(h,n),new rA(d,r.method,h,r.body,r.successCodes,r.additionalRetryCodes,r.handler,r.errorHandler,r.timeout,r.progressCallback,s,a,l)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function lA(){return typeof BlobBuilder<"u"?BlobBuilder:typeof WebKitBlobBuilder<"u"?WebKitBlobBuilder:void 0}function cA(...r){const e=lA();if(e!==void 0){const t=new e;for(let n=0;n<r.length;n++)t.append(r[n]);return t.getBlob()}else{if(df())return new Blob(r);throw new Ge(We.UNSUPPORTED_ENVIRONMENT,"This browser doesn't seem to support creating Blobs")}}function uA(r,e,t){return r.webkitSlice?r.webkitSlice(e,t):r.mozSlice?r.mozSlice(e,t):r.slice?r.slice(e,t):null}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function dA(r){if(typeof atob>"u")throw KI("base-64");return atob(r)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const vr={RAW:"raw",BASE64:"base64",BASE64URL:"base64url",DATA_URL:"data_url"};class Su{constructor(e,t){this.data=e,this.contentType=t||null}}function hA(r,e){switch(r){case vr.RAW:return new Su(Jb(e));case vr.BASE64:case vr.BASE64URL:return new Su(Zb(r,e));case vr.DATA_URL:return new Su(mA(e),pA(e))}throw cf()}function Jb(r){const e=[];for(let t=0;t<r.length;t++){let n=r.charCodeAt(t);if(n<=127)e.push(n);else if(n<=2047)e.push(192|n>>6,128|n&63);else if((n&64512)===55296)if(!(t<r.length-1&&(r.charCodeAt(t+1)&64512)===56320))e.push(239,191,189);else{const i=n,a=r.charCodeAt(++t);n=65536|(i&1023)<<10|a&1023,e.push(240|n>>18,128|n>>12&63,128|n>>6&63,128|n&63)}else(n&64512)===56320?e.push(239,191,189):e.push(224|n>>12,128|n>>6&63,128|n&63)}return new Uint8Array(e)}function fA(r){let e;try{e=decodeURIComponent(r)}catch{throw Si(vr.DATA_URL,"Malformed data URL.")}return Jb(e)}function Zb(r,e){switch(r){case vr.BASE64:{const s=e.indexOf("-")!==-1,i=e.indexOf("_")!==-1;if(s||i)throw Si(r,"Invalid character '"+(s?"-":"_")+"' found: is it base64url encoded?");break}case vr.BASE64URL:{const s=e.indexOf("+")!==-1,i=e.indexOf("/")!==-1;if(s||i)throw Si(r,"Invalid character '"+(s?"+":"/")+"' found: is it base64 encoded?");e=e.replace(/-/g,"+").replace(/_/g,"/");break}}let t;try{t=dA(e)}catch(s){throw s.message.includes("polyfill")?s:Si(r,"Invalid character found")}const n=new Uint8Array(t.length);for(let s=0;s<t.length;s++)n[s]=t.charCodeAt(s);return n}class ev{constructor(e){this.base64=!1,this.contentType=null;const t=e.match(/^data:([^,]+)?,/);if(t===null)throw Si(vr.DATA_URL,"Must be formatted 'data:[<mediatype>][;base64],<data>");const n=t[1]||null;n!=null&&(this.base64=gA(n,";base64"),this.contentType=this.base64?n.substring(0,n.length-7):n),this.rest=e.substring(e.indexOf(",")+1)}}function mA(r){const e=new ev(r);return e.base64?Zb(vr.BASE64,e.rest):fA(e.rest)}function pA(r){return new ev(r).contentType}function gA(r,e){return r.length>=e.length?r.substring(r.length-e.length)===e:!1}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class un{constructor(e,t){let n=0,s="";Ig(e)?(this.data_=e,n=e.size,s=e.type):e instanceof ArrayBuffer?(t?this.data_=new Uint8Array(e):(this.data_=new Uint8Array(e.byteLength),this.data_.set(new Uint8Array(e))),n=this.data_.length):e instanceof Uint8Array&&(t?this.data_=e:(this.data_=new Uint8Array(e.length),this.data_.set(e)),n=e.length),this.size_=n,this.type_=s}size(){return this.size_}type(){return this.type_}slice(e,t){if(Ig(this.data_)){const n=this.data_,s=uA(n,e,t);return s===null?null:new un(s)}else{const n=new Uint8Array(this.data_.buffer,e,t-e);return new un(n,!0)}}static getBlob(...e){if(df()){const t=e.map(n=>n instanceof un?n.data_:n);return new un(cA.apply(null,t))}else{const t=e.map(a=>uf(a)?hA(vr.RAW,a).data:a.data_);let n=0;t.forEach(a=>{n+=a.byteLength});const s=new Uint8Array(n);let i=0;return t.forEach(a=>{for(let l=0;l<a.length;l++)s[i++]=a[l]}),new un(s,!0)}}uploadData(){return this.data_}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function tv(r){let e;try{e=JSON.parse(r)}catch{return null}return eA(e)?e:null}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function yA(r){if(r.length===0)return null;const e=r.lastIndexOf("/");return e===-1?"":r.slice(0,e)}function xA(r,e){const t=e.split("/").filter(n=>n.length>0).join("/");return r.length===0?t:r+"/"+t}function rv(r){const e=r.lastIndexOf("/",r.length-2);return e===-1?r:r.slice(e+1)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function bA(r,e){return e}class Et{constructor(e,t,n,s){this.server=e,this.local=t||e,this.writable=!!n,this.xform=s||bA}}let Ha=null;function vA(r){return!uf(r)||r.length<2?r:rv(r)}function nv(){if(Ha)return Ha;const r=[];r.push(new Et("bucket")),r.push(new Et("generation")),r.push(new Et("metageneration")),r.push(new Et("name","fullPath",!0));function e(i,a){return vA(a)}const t=new Et("name");t.xform=e,r.push(t);function n(i,a){return a!==void 0?Number(a):a}const s=new Et("size");return s.xform=n,r.push(s),r.push(new Et("timeCreated")),r.push(new Et("updated")),r.push(new Et("md5Hash",null,!0)),r.push(new Et("cacheControl",null,!0)),r.push(new Et("contentDisposition",null,!0)),r.push(new Et("contentEncoding",null,!0)),r.push(new Et("contentLanguage",null,!0)),r.push(new Et("contentType",null,!0)),r.push(new Et("metadata","customMetadata",!0)),Ha=r,Ha}function wA(r,e){function t(){const n=r.bucket,s=r.fullPath,i=new zt(n,s);return e._makeStorageReference(i)}Object.defineProperty(r,"ref",{get:t})}function _A(r,e,t){const n={};n.type="file";const s=t.length;for(let i=0;i<s;i++){const a=t[i];n[a.local]=a.xform(n,e[a.server])}return wA(n,r),n}function sv(r,e,t){const n=tv(e);return n===null?null:_A(r,n,t)}function TA(r,e,t,n){const s=tv(e);if(s===null||!uf(s.downloadTokens))return null;const i=s.downloadTokens;if(i.length===0)return null;const a=encodeURIComponent;return i.split(",").map(d=>{const h=r.bucket,p=r.fullPath,g="/b/"+a(h)+"/o/"+a(p),b=hf(g,t,n),C=Xb({alt:"media",token:d});return b+C})[0]}function EA(r,e){const t={},n=e.length;for(let s=0;s<n;s++){const i=e[s];i.writable&&(t[i.server]=r[i.local])}return JSON.stringify(t)}class ov{constructor(e,t,n,s){this.url=e,this.method=t,this.handler=n,this.timeout=s,this.urlParams={},this.headers={},this.body=null,this.errorHandler=null,this.progressCallback=null,this.successCodes=[200],this.additionalRetryCodes=[]}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function iv(r){if(!r)throw cf()}function NA(r,e){function t(n,s){const i=sv(r,s,e);return iv(i!==null),i}return t}function CA(r,e){function t(n,s){const i=sv(r,s,e);return iv(i!==null),TA(i,s,r.host,r._protocol)}return t}function av(r){function e(t,n){let s;return t.getStatus()===401?t.getErrorText().includes("Firebase App Check token is invalid")?s=FI():s=VI():t.getStatus()===402?s=LI(r.bucket):t.getStatus()===403?s=UI(r.path):s=n,s.status=t.getStatus(),s.serverResponse=n.serverResponse,s}return e}function kA(r){const e=av(r);function t(n,s){let i=e(n,s);return n.getStatus()===404&&(i=OI(r.path)),i.serverResponse=s.serverResponse,i}return t}function SA(r,e,t){const n=e.fullServerUrl(),s=hf(n,r.host,r._protocol),i="GET",a=r.maxOperationRetryTime,l=new ov(s,i,CA(r,t),a);return l.errorHandler=kA(e),l}function jA(r,e){return r&&r.contentType||e&&e.type()||"application/octet-stream"}function IA(r,e,t){const n=Object.assign({},t);return n.fullPath=r.path,n.size=e.size(),n.contentType||(n.contentType=jA(null,e)),n}function AA(r,e,t,n,s){const i=e.bucketOnlyServerUrl(),a={"X-Goog-Upload-Protocol":"multipart"};function l(){let N="";for(let R=0;R<2;R++)N=N+Math.random().toString().slice(2);return N}const u=l();a["Content-Type"]="multipart/related; boundary="+u;const d=IA(e,n,s),h=EA(d,t),p="--"+u+`\r
Content-Type: application/json; charset=utf-8\r
\r
`+h+`\r
--`+u+`\r
Content-Type: `+d.contentType+`\r
\r
`,g=`\r
--`+u+"--",b=un.getBlob(p,n,g);if(b===null)throw WI();const C={name:d.fullPath},x=hf(i,r.host,r._protocol),v="POST",E=r.maxUploadRetryTime,T=new ov(x,v,NA(r,t),E);return T.urlParams=C,T.headers=a,T.body=b.uploadData(),T.errorHandler=av(e),T}class RA{constructor(){this.sent_=!1,this.xhr_=new XMLHttpRequest,this.initXhr(),this.errorCode_=gs.NO_ERROR,this.sendPromise_=new Promise(e=>{this.xhr_.addEventListener("abort",()=>{this.errorCode_=gs.ABORT,e()}),this.xhr_.addEventListener("error",()=>{this.errorCode_=gs.NETWORK_ERROR,e()}),this.xhr_.addEventListener("load",()=>{e()})})}send(e,t,n,s,i){if(this.sent_)throw ci("cannot .send() more than once");if(zn(e)&&n&&(this.xhr_.withCredentials=!0),this.sent_=!0,this.xhr_.open(t,e,!0),i!==void 0)for(const a in i)i.hasOwnProperty(a)&&this.xhr_.setRequestHeader(a,i[a].toString());return s!==void 0?this.xhr_.send(s):this.xhr_.send(),this.sendPromise_}getErrorCode(){if(!this.sent_)throw ci("cannot .getErrorCode() before sending");return this.errorCode_}getStatus(){if(!this.sent_)throw ci("cannot .getStatus() before sending");try{return this.xhr_.status}catch{return-1}}getResponse(){if(!this.sent_)throw ci("cannot .getResponse() before sending");return this.xhr_.response}getErrorText(){if(!this.sent_)throw ci("cannot .getErrorText() before sending");return this.xhr_.statusText}abort(){this.xhr_.abort()}getResponseHeader(e){return this.xhr_.getResponseHeader(e)}addUploadProgressListener(e){this.xhr_.upload!=null&&this.xhr_.upload.addEventListener("progress",e)}removeUploadProgressListener(e){this.xhr_.upload!=null&&this.xhr_.upload.removeEventListener("progress",e)}}class PA extends RA{initXhr(){this.xhr_.responseType="text"}}function lv(){return new PA}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ts{constructor(e,t){this._service=e,t instanceof zt?this._location=t:this._location=zt.makeFromUrl(t,e.host)}toString(){return"gs://"+this._location.bucket+"/"+this._location.path}_newRef(e,t){return new Ts(e,t)}get root(){const e=new zt(this._location.bucket,"");return this._newRef(this._service,e)}get bucket(){return this._location.bucket}get fullPath(){return this._location.path}get name(){return rv(this._location.path)}get storage(){return this._service}get parent(){const e=yA(this._location.path);if(e===null)return null;const t=new zt(this._location.bucket,e);return new Ts(this._service,t)}_throwIfRoot(e){if(this._location.path==="")throw QI(e)}}function MA(r,e,t){r._throwIfRoot("uploadBytes");const n=AA(r.storage,r._location,nv(),new un(e,!0),t);return r.storage.makeRequestWithTokens(n,lv).then(s=>({metadata:s,ref:r}))}function DA(r){r._throwIfRoot("getDownloadURL");const e=SA(r.storage,r._location,nv());return r.storage.makeRequestWithTokens(e,lv).then(t=>{if(t===null)throw GI();return t})}function OA(r,e){const t=xA(r._location.path,e),n=new zt(r._location.bucket,t);return new Ts(r.storage,n)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function LA(r){return/^[A-Za-z]+:\/\//.test(r)}function VA(r,e){return new Ts(r,e)}function cv(r,e){if(r instanceof ff){const t=r;if(t._bucket==null)throw HI();const n=new Ts(t,t._bucket);return e!=null?cv(n,e):n}else return e!==void 0?OA(r,e):r}function FA(r,e){if(e&&LA(e)){if(r instanceof ff)return VA(r,e);throw Td("To use ref(service, url), the first argument must be a Storage instance.")}else return cv(r,e)}function Rg(r,e){const t=e==null?void 0:e[Qb];return t==null?null:zt.makeFromBucketSpec(t,r)}function UA(r,e,t,n={}){r.host=`${e}:${t}`;const s=zn(e);s&&(mh(`https://${r.host}/b`),ph("Storage",!0)),r._isUsingEmulator=!0,r._protocol=s?"https":"http";const{mockUserToken:i}=n;i&&(r._overrideAuthToken=typeof i=="string"?i:Sx(i,r.app.options.projectId))}class ff{constructor(e,t,n,s,i,a=!1){this.app=e,this._authProvider=t,this._appCheckProvider=n,this._url=s,this._firebaseVersion=i,this._isUsingEmulator=a,this._bucket=null,this._host=Kb,this._protocol="https",this._appId=null,this._deleted=!1,this._maxOperationRetryTime=MI,this._maxUploadRetryTime=DI,this._requests=new Set,s!=null?this._bucket=zt.makeFromBucketSpec(s,this._host):this._bucket=Rg(this._host,this.app.options)}get host(){return this._host}set host(e){this._host=e,this._url!=null?this._bucket=zt.makeFromBucketSpec(this._url,e):this._bucket=Rg(e,this.app.options)}get maxUploadRetryTime(){return this._maxUploadRetryTime}set maxUploadRetryTime(e){Ag("time",0,Number.POSITIVE_INFINITY,e),this._maxUploadRetryTime=e}get maxOperationRetryTime(){return this._maxOperationRetryTime}set maxOperationRetryTime(e){Ag("time",0,Number.POSITIVE_INFINITY,e),this._maxOperationRetryTime=e}async _getAuthToken(){if(this._overrideAuthToken)return this._overrideAuthToken;const e=this._authProvider.getImmediate({optional:!0});if(e){const t=await e.getToken();if(t!==null)return t.accessToken}return null}async _getAppCheckToken(){if(Mt(this.app)&&this.app.settings.appCheckToken)return this.app.settings.appCheckToken;const e=this._appCheckProvider.getImmediate({optional:!0});return e?(await e.getToken()).token:null}_delete(){return this._deleted||(this._deleted=!0,this._requests.forEach(e=>e.cancel()),this._requests.clear()),Promise.resolve()}_makeStorageReference(e){return new Ts(this,e)}_makeRequest(e,t,n,s,i=!0){if(this._deleted)return new YI(Yb());{const a=aA(e,this._appId,n,s,t,this._firebaseVersion,i,this._isUsingEmulator);return this._requests.add(a),a.getPromise().then(()=>this._requests.delete(a),()=>this._requests.delete(a)),a}}async makeRequestWithTokens(e,t){const[n,s]=await Promise.all([this._getAuthToken(),this._getAppCheckToken()]);return this._makeRequest(e,t,n,s).getPromise()}}const Pg="@firebase/storage",Mg="0.13.14";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const uv="storage";function $A(r,e,t){return r=Me(r),MA(r,e,t)}function BA(r){return r=Me(r),DA(r)}function zA(r,e){return r=Me(r),FA(r,e)}function qA(r=oc(),e){r=Me(r);const n=Is(r,uv).getImmediate({identifier:e}),s=Nx("storage");return s&&HA(n,...s),n}function HA(r,e,t,n={}){UA(r,e,t,n)}function WA(r,{instanceIdentifier:e}){const t=r.getProvider("app").getImmediate(),n=r.getProvider("auth-internal"),s=r.getProvider("app-check-internal");return new ff(t,n,s,e,As)}function GA(){Cr(new cr(uv,WA,"PUBLIC").setMultipleInstances(!0)),Lt(Pg,Mg,""),Lt(Pg,Mg,"esm2017")}GA();var Ed,Dg,kc=function(){var r=self.performance&&performance.getEntriesByType&&performance.getEntriesByType("navigation")[0];if(r&&r.responseStart>0&&r.responseStart<performance.now())return r},dv=function(r){if(document.readyState==="loading")return"loading";var e=kc();if(e){if(r<e.domInteractive)return"loading";if(e.domContentLoadedEventStart===0||r<e.domContentLoadedEventStart)return"dom-interactive";if(e.domComplete===0||r<e.domComplete)return"dom-content-loaded"}return"complete"},KA=function(r){var e=r.nodeName;return r.nodeType===1?e.toLowerCase():e.toUpperCase().replace(/^#/,"")},mf=function(r,e){var t="";try{for(;r&&r.nodeType!==9;){var n=r,s=n.id?"#"+n.id:KA(n)+(n.classList&&n.classList.value&&n.classList.value.trim()&&n.classList.value.trim().length?"."+n.classList.value.trim().replace(/\s+/g,"."):"");if(t.length+s.length>(e||100)-1)return t||s;if(t=t?s+">"+t:s,n.id)break;r=n.parentNode}}catch{}return t},hv=-1,QA=function(){return hv},fa=function(r){addEventListener("pageshow",function(e){e.persisted&&(hv=e.timeStamp,r(e))},!0)},pf=function(){var r=kc();return r&&r.activationStart||0},Vn=function(r,e){var t=kc(),n="navigate";return QA()>=0?n="back-forward-cache":t&&(document.prerendering||pf()>0?n="prerender":document.wasDiscarded?n="restore":t.type&&(n=t.type.replace(/_/g,"-"))),{name:r,value:e===void 0?-1:e,rating:"good",delta:0,entries:[],id:"v4-".concat(Date.now(),"-").concat(Math.floor(8999999999999*Math.random())+1e12),navigationType:n}},$o=function(r,e,t){try{if(PerformanceObserver.supportedEntryTypes.includes(r)){var n=new PerformanceObserver(function(s){Promise.resolve().then(function(){e(s.getEntries())})});return n.observe(Object.assign({type:r,buffered:!0},t||{})),n}}catch{}},Fn=function(r,e,t,n){var s,i;return function(a){e.value>=0&&(a||n)&&((i=e.value-(s||0))||s===void 0)&&(s=e.value,e.delta=i,e.rating=function(l,u){return l>u[1]?"poor":l>u[0]?"needs-improvement":"good"}(e.value,t),r(e))}},gf=function(r){requestAnimationFrame(function(){return requestAnimationFrame(function(){return r()})})},Sc=function(r){document.addEventListener("visibilitychange",function(){document.visibilityState==="hidden"&&r()})},yf=function(r){var e=!1;return function(){e||(r(),e=!0)}},Hs=-1,Og=function(){return document.visibilityState!=="hidden"||document.prerendering?1/0:0},Ul=function(r){document.visibilityState==="hidden"&&Hs>-1&&(Hs=r.type==="visibilitychange"?r.timeStamp:0,YA())},Lg=function(){addEventListener("visibilitychange",Ul,!0),addEventListener("prerenderingchange",Ul,!0)},YA=function(){removeEventListener("visibilitychange",Ul,!0),removeEventListener("prerenderingchange",Ul,!0)},fv=function(){return Hs<0&&(Hs=Og(),Lg(),fa(function(){setTimeout(function(){Hs=Og(),Lg()},0)})),{get firstHiddenTime(){return Hs}}},xf=function(r){document.prerendering?addEventListener("prerenderingchange",function(){return r()},!0):r()},Vg=[1800,3e3],XA=function(r,e){e=e||{},xf(function(){var t,n=fv(),s=Vn("FCP"),i=$o("paint",function(a){a.forEach(function(l){l.name==="first-contentful-paint"&&(i.disconnect(),l.startTime<n.firstHiddenTime&&(s.value=Math.max(l.startTime-pf(),0),s.entries.push(l),t(!0)))})});i&&(t=Fn(r,s,Vg,e.reportAllChanges),fa(function(a){s=Vn("FCP"),t=Fn(r,s,Vg,e.reportAllChanges),gf(function(){s.value=performance.now()-a.timeStamp,t(!0)})}))})},Fg=[.1,.25],JA=function(r,e){(function(t,n){n=n||{},XA(yf(function(){var s,i=Vn("CLS",0),a=0,l=[],u=function(h){h.forEach(function(p){if(!p.hadRecentInput){var g=l[0],b=l[l.length-1];a&&p.startTime-b.startTime<1e3&&p.startTime-g.startTime<5e3?(a+=p.value,l.push(p)):(a=p.value,l=[p])}}),a>i.value&&(i.value=a,i.entries=l,s())},d=$o("layout-shift",u);d&&(s=Fn(t,i,Fg,n.reportAllChanges),Sc(function(){u(d.takeRecords()),s(!0)}),fa(function(){a=0,i=Vn("CLS",0),s=Fn(t,i,Fg,n.reportAllChanges),gf(function(){return s()})}),setTimeout(s,0))}))})(function(t){var n=function(s){var i,a={};if(s.entries.length){var l=s.entries.reduce(function(d,h){return d&&d.value>h.value?d:h});if(l&&l.sources&&l.sources.length){var u=(i=l.sources).find(function(d){return d.node&&d.node.nodeType===1})||i[0];u&&(a={largestShiftTarget:mf(u.node),largestShiftTime:l.startTime,largestShiftValue:l.value,largestShiftSource:u,largestShiftEntry:l,loadState:dv(l.startTime)})}}return Object.assign(s,{attribution:a})}(t);r(n)},e)},mv=0,ju=1/0,Wa=0,ZA=function(r){r.forEach(function(e){e.interactionId&&(ju=Math.min(ju,e.interactionId),Wa=Math.max(Wa,e.interactionId),mv=Wa?(Wa-ju)/7+1:0)})},pv=function(){return Ed?mv:performance.interactionCount||0},eR=function(){"interactionCount"in performance||Ed||(Ed=$o("event",ZA,{type:"event",buffered:!0,durationThreshold:0}))},or=[],ji=new Map,gv=0,tR=function(){var r=Math.min(or.length-1,Math.floor((pv()-gv)/50));return or[r]},yv=[],rR=function(r){if(yv.forEach(function(s){return s(r)}),r.interactionId||r.entryType==="first-input"){var e=or[or.length-1],t=ji.get(r.interactionId);if(t||or.length<10||r.duration>e.latency){if(t)r.duration>t.latency?(t.entries=[r],t.latency=r.duration):r.duration===t.latency&&r.startTime===t.entries[0].startTime&&t.entries.push(r);else{var n={id:r.interactionId,latency:r.duration,entries:[r]};ji.set(n.id,n),or.push(n)}or.sort(function(s,i){return i.latency-s.latency}),or.length>10&&or.splice(10).forEach(function(s){return ji.delete(s.id)})}}},bf=function(r){var e=self.requestIdleCallback||self.setTimeout,t=-1;return r=yf(r),document.visibilityState==="hidden"?r():(t=e(r),Sc(r)),t},Ug=[200,500],nR=function(r,e){"PerformanceEventTiming"in self&&"interactionId"in PerformanceEventTiming.prototype&&(e=e||{},xf(function(){var t;eR();var n,s=Vn("INP"),i=function(l){bf(function(){l.forEach(rR);var u=tR();u&&u.latency!==s.value&&(s.value=u.latency,s.entries=u.entries,n())})},a=$o("event",i,{durationThreshold:(t=e.durationThreshold)!==null&&t!==void 0?t:40});n=Fn(r,s,Ug,e.reportAllChanges),a&&(a.observe({type:"first-input",buffered:!0}),Sc(function(){i(a.takeRecords()),n(!0)}),fa(function(){gv=pv(),or.length=0,ji.clear(),s=Vn("INP"),n=Fn(r,s,Ug,e.reportAllChanges)}))}))},oo=[],dn=[],Nd=0,vf=new WeakMap,io=new Map,Cd=-1,sR=function(r){oo=oo.concat(r),xv()},xv=function(){Cd<0&&(Cd=bf(oR))},oR=function(){io.size>10&&io.forEach(function(a,l){ji.has(l)||io.delete(l)});var r=or.map(function(a){return vf.get(a.entries[0])}),e=dn.length-50;dn=dn.filter(function(a,l){return l>=e||r.includes(a)});for(var t=new Set,n=0;n<dn.length;n++){var s=dn[n];bv(s.startTime,s.processingEnd).forEach(function(a){t.add(a)})}var i=oo.length-1-50;oo=oo.filter(function(a,l){return a.startTime>Nd&&l>i||t.has(a)}),Cd=-1};yv.push(function(r){r.interactionId&&r.target&&!io.has(r.interactionId)&&io.set(r.interactionId,r.target)},function(r){var e,t=r.startTime+r.duration;Nd=Math.max(Nd,r.processingEnd);for(var n=dn.length-1;n>=0;n--){var s=dn[n];if(Math.abs(t-s.renderTime)<=8){(e=s).startTime=Math.min(r.startTime,e.startTime),e.processingStart=Math.min(r.processingStart,e.processingStart),e.processingEnd=Math.max(r.processingEnd,e.processingEnd),e.entries.push(r);break}}e||(e={startTime:r.startTime,processingStart:r.processingStart,processingEnd:r.processingEnd,renderTime:t,entries:[r]},dn.push(e)),(r.interactionId||r.entryType==="first-input")&&vf.set(r,e),xv()});var bv=function(r,e){for(var t,n=[],s=0;t=oo[s];s++)if(!(t.startTime+t.duration<r)){if(t.startTime>e)break;n.push(t)}return n},iR=function(r,e){Dg||(Dg=$o("long-animation-frame",sR)),nR(function(t){var n=function(s){var i=s.entries[0],a=vf.get(i),l=i.processingStart,u=a.processingEnd,d=a.entries.sort(function(v,E){return v.processingStart-E.processingStart}),h=bv(i.startTime,u),p=s.entries.find(function(v){return v.target}),g=p&&p.target||io.get(i.interactionId),b=[i.startTime+i.duration,u].concat(h.map(function(v){return v.startTime+v.duration})),C=Math.max.apply(Math,b),x={interactionTarget:mf(g),interactionTargetElement:g,interactionType:i.name.startsWith("key")?"keyboard":"pointer",interactionTime:i.startTime,nextPaintTime:C,processedEventEntries:d,longAnimationFrameEntries:h,inputDelay:l-i.startTime,processingDuration:u-l,presentationDelay:Math.max(C-u,0),loadState:dv(i.startTime)};return Object.assign(s,{attribution:x})}(t);r(n)},e)},$g=[2500,4e3],Iu={},aR=function(r,e){(function(t,n){n=n||{},xf(function(){var s,i=fv(),a=Vn("LCP"),l=function(h){n.reportAllChanges||(h=h.slice(-1)),h.forEach(function(p){p.startTime<i.firstHiddenTime&&(a.value=Math.max(p.startTime-pf(),0),a.entries=[p],s())})},u=$o("largest-contentful-paint",l);if(u){s=Fn(t,a,$g,n.reportAllChanges);var d=yf(function(){Iu[a.id]||(l(u.takeRecords()),u.disconnect(),Iu[a.id]=!0,s(!0))});["keydown","click"].forEach(function(h){addEventListener(h,function(){return bf(d)},{once:!0,capture:!0})}),Sc(d),fa(function(h){a=Vn("LCP"),s=Fn(t,a,$g,n.reportAllChanges),gf(function(){a.value=performance.now()-h.timeStamp,Iu[a.id]=!0,s(!0)})})}})})(function(t){var n=function(s){var i={timeToFirstByte:0,resourceLoadDelay:0,resourceLoadDuration:0,elementRenderDelay:s.value};if(s.entries.length){var a=kc();if(a){var l=a.activationStart||0,u=s.entries[s.entries.length-1],d=u.url&&performance.getEntriesByType("resource").filter(function(C){return C.name===u.url})[0],h=Math.max(0,a.responseStart-l),p=Math.max(h,d?(d.requestStart||d.startTime)-l:0),g=Math.max(p,d?d.responseEnd-l:0),b=Math.max(g,u.startTime-l);i={element:mf(u.element),timeToFirstByte:h,resourceLoadDelay:p-h,resourceLoadDuration:g-p,elementRenderDelay:b-g,navigationEntry:a,lcpEntry:u},u.url&&(i.url=u.url),d&&(i.lcpResourceEntry=d)}}return Object.assign(s,{attribution:i})}(t);r(n)},e)};const vv="@firebase/installations",wf="0.6.18";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const wv=1e4,_v=`w:${wf}`,Tv="FIS_v2",lR="https://firebaseinstallations.googleapis.com/v1",cR=3600*1e3,uR="installations",dR="Installations";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const hR={"missing-app-config-values":'Missing App configuration value: "{$valueName}"',"not-registered":"Firebase Installation is not registered.","installation-not-found":"Firebase Installation not found.","request-failed":'{$requestName} request failed with error "{$serverCode} {$serverStatus}: {$serverMessage}"',"app-offline":"Could not process request. Application offline.","delete-pending-registration":"Can't delete installation while there is a pending registration request."},Es=new js(uR,dR,hR);function Ev(r){return r instanceof fr&&r.code.includes("request-failed")}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Nv({projectId:r}){return`${lR}/projects/${r}/installations`}function Cv(r){return{token:r.token,requestStatus:2,expiresIn:mR(r.expiresIn),creationTime:Date.now()}}async function kv(r,e){const n=(await e.json()).error;return Es.create("request-failed",{requestName:r,serverCode:n.code,serverMessage:n.message,serverStatus:n.status})}function Sv({apiKey:r}){return new Headers({"Content-Type":"application/json",Accept:"application/json","x-goog-api-key":r})}function fR(r,{refreshToken:e}){const t=Sv(r);return t.append("Authorization",pR(e)),t}async function jv(r){const e=await r();return e.status>=500&&e.status<600?r():e}function mR(r){return Number(r.replace("s","000"))}function pR(r){return`${Tv} ${r}`}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function gR({appConfig:r,heartbeatServiceProvider:e},{fid:t}){const n=Nv(r),s=Sv(r),i=e.getImmediate({optional:!0});if(i){const d=await i.getHeartbeatsHeader();d&&s.append("x-firebase-client",d)}const a={fid:t,authVersion:Tv,appId:r.appId,sdkVersion:_v},l={method:"POST",headers:s,body:JSON.stringify(a)},u=await jv(()=>fetch(n,l));if(u.ok){const d=await u.json();return{fid:d.fid||t,registrationStatus:2,refreshToken:d.refreshToken,authToken:Cv(d.authToken)}}else throw await kv("Create Installation",u)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Iv(r){return new Promise(e=>{setTimeout(e,r)})}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function yR(r){return btoa(String.fromCharCode(...r)).replace(/\+/g,"-").replace(/\//g,"_")}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const xR=/^[cdef][\w-]{21}$/,kd="";function bR(){try{const r=new Uint8Array(17);(self.crypto||self.msCrypto).getRandomValues(r),r[0]=112+r[0]%16;const t=vR(r);return xR.test(t)?t:kd}catch{return kd}}function vR(r){return yR(r).substr(0,22)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function jc(r){return`${r.appName}!${r.appId}`}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Av=new Map;function Rv(r,e){const t=jc(r);Pv(t,e),wR(t,e)}function Pv(r,e){const t=Av.get(r);if(t)for(const n of t)n(e)}function wR(r,e){const t=_R();t&&t.postMessage({key:r,fid:e}),TR()}let os=null;function _R(){return!os&&"BroadcastChannel"in self&&(os=new BroadcastChannel("[Firebase] FID Change"),os.onmessage=r=>{Pv(r.data.key,r.data.fid)}),os}function TR(){Av.size===0&&os&&(os.close(),os=null)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ER="firebase-installations-database",NR=1,Ns="firebase-installations-store";let Au=null;function _f(){return Au||(Au=Px(ER,NR,{upgrade:(r,e)=>{switch(e){case 0:r.createObjectStore(Ns)}}})),Au}async function $l(r,e){const t=jc(r),s=(await _f()).transaction(Ns,"readwrite"),i=s.objectStore(Ns),a=await i.get(t);return await i.put(e,t),await s.done,(!a||a.fid!==e.fid)&&Rv(r,e.fid),e}async function Mv(r){const e=jc(r),n=(await _f()).transaction(Ns,"readwrite");await n.objectStore(Ns).delete(e),await n.done}async function Ic(r,e){const t=jc(r),s=(await _f()).transaction(Ns,"readwrite"),i=s.objectStore(Ns),a=await i.get(t),l=e(a);return l===void 0?await i.delete(t):await i.put(l,t),await s.done,l&&(!a||a.fid!==l.fid)&&Rv(r,l.fid),l}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Tf(r){let e;const t=await Ic(r.appConfig,n=>{const s=CR(n),i=kR(r,s);return e=i.registrationPromise,i.installationEntry});return t.fid===kd?{installationEntry:await e}:{installationEntry:t,registrationPromise:e}}function CR(r){const e=r||{fid:bR(),registrationStatus:0};return Dv(e)}function kR(r,e){if(e.registrationStatus===0){if(!navigator.onLine){const s=Promise.reject(Es.create("app-offline"));return{installationEntry:e,registrationPromise:s}}const t={fid:e.fid,registrationStatus:1,registrationTime:Date.now()},n=SR(r,t);return{installationEntry:t,registrationPromise:n}}else return e.registrationStatus===1?{installationEntry:e,registrationPromise:jR(r)}:{installationEntry:e}}async function SR(r,e){try{const t=await gR(r,e);return $l(r.appConfig,t)}catch(t){throw Ev(t)&&t.customData.serverCode===409?await Mv(r.appConfig):await $l(r.appConfig,{fid:e.fid,registrationStatus:0}),t}}async function jR(r){let e=await Bg(r.appConfig);for(;e.registrationStatus===1;)await Iv(100),e=await Bg(r.appConfig);if(e.registrationStatus===0){const{installationEntry:t,registrationPromise:n}=await Tf(r);return n||t}return e}function Bg(r){return Ic(r,e=>{if(!e)throw Es.create("installation-not-found");return Dv(e)})}function Dv(r){return IR(r)?{fid:r.fid,registrationStatus:0}:r}function IR(r){return r.registrationStatus===1&&r.registrationTime+wv<Date.now()}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function AR({appConfig:r,heartbeatServiceProvider:e},t){const n=RR(r,t),s=fR(r,t),i=e.getImmediate({optional:!0});if(i){const d=await i.getHeartbeatsHeader();d&&s.append("x-firebase-client",d)}const a={installation:{sdkVersion:_v,appId:r.appId}},l={method:"POST",headers:s,body:JSON.stringify(a)},u=await jv(()=>fetch(n,l));if(u.ok){const d=await u.json();return Cv(d)}else throw await kv("Generate Auth Token",u)}function RR(r,{fid:e}){return`${Nv(r)}/${e}/authTokens:generate`}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Ef(r,e=!1){let t;const n=await Ic(r.appConfig,i=>{if(!Ov(i))throw Es.create("not-registered");const a=i.authToken;if(!e&&DR(a))return i;if(a.requestStatus===1)return t=PR(r,e),i;{if(!navigator.onLine)throw Es.create("app-offline");const l=LR(i);return t=MR(r,l),l}});return t?await t:n.authToken}async function PR(r,e){let t=await zg(r.appConfig);for(;t.authToken.requestStatus===1;)await Iv(100),t=await zg(r.appConfig);const n=t.authToken;return n.requestStatus===0?Ef(r,e):n}function zg(r){return Ic(r,e=>{if(!Ov(e))throw Es.create("not-registered");const t=e.authToken;return VR(t)?Object.assign(Object.assign({},e),{authToken:{requestStatus:0}}):e})}async function MR(r,e){try{const t=await AR(r,e),n=Object.assign(Object.assign({},e),{authToken:t});return await $l(r.appConfig,n),t}catch(t){if(Ev(t)&&(t.customData.serverCode===401||t.customData.serverCode===404))await Mv(r.appConfig);else{const n=Object.assign(Object.assign({},e),{authToken:{requestStatus:0}});await $l(r.appConfig,n)}throw t}}function Ov(r){return r!==void 0&&r.registrationStatus===2}function DR(r){return r.requestStatus===2&&!OR(r)}function OR(r){const e=Date.now();return e<r.creationTime||r.creationTime+r.expiresIn<e+cR}function LR(r){const e={requestStatus:1,requestTime:Date.now()};return Object.assign(Object.assign({},r),{authToken:e})}function VR(r){return r.requestStatus===1&&r.requestTime+wv<Date.now()}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function FR(r){const e=r,{installationEntry:t,registrationPromise:n}=await Tf(e);return n?n.catch(console.error):Ef(e).catch(console.error),t.fid}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function UR(r,e=!1){const t=r;return await $R(t),(await Ef(t,e)).token}async function $R(r){const{registrationPromise:e}=await Tf(r);e&&await e}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function BR(r){if(!r||!r.options)throw Ru("App Configuration");if(!r.name)throw Ru("App Name");const e=["projectId","apiKey","appId"];for(const t of e)if(!r.options[t])throw Ru(t);return{appName:r.name,projectId:r.options.projectId,apiKey:r.options.apiKey,appId:r.options.appId}}function Ru(r){return Es.create("missing-app-config-values",{valueName:r})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Lv="installations",zR="installations-internal",qR=r=>{const e=r.getProvider("app").getImmediate(),t=BR(e),n=Is(e,"heartbeat");return{app:e,appConfig:t,heartbeatServiceProvider:n,_delete:()=>Promise.resolve()}},HR=r=>{const e=r.getProvider("app").getImmediate(),t=Is(e,Lv).getImmediate();return{getId:()=>FR(t),getToken:s=>UR(t,s)}};function WR(){Cr(new cr(Lv,qR,"PUBLIC")),Cr(new cr(zR,HR,"PRIVATE"))}WR();Lt(vv,wf);Lt(vv,wf,"esm2017");const qg="@firebase/performance",Sd="0.7.7";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Vv=Sd,GR="FB-PERF-TRACE-START",KR="FB-PERF-TRACE-STOP",jd="FB-PERF-TRACE-MEASURE",Fv="_wt_",Uv="_fp",$v="_fcp",Bv="_fid",zv="_lcp",QR="lcp_element",qv="_inp",YR="inp_interactionTarget",Hv="_cls",XR="cls_largestShiftTarget",Wv="@firebase/performance/config",Gv="@firebase/performance/configexpire",JR="performance",Kv="Performance";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ZR={"trace started":"Trace {$traceName} was started before.","trace stopped":"Trace {$traceName} is not running.","nonpositive trace startTime":"Trace {$traceName} startTime should be positive.","nonpositive trace duration":"Trace {$traceName} duration should be positive.","no window":"Window is not available.","no app id":"App id is not available.","no project id":"Project id is not available.","no api key":"Api key is not available.","invalid cc log":"Attempted to queue invalid cc event","FB not default":"Performance can only start when Firebase app instance is the default one.","RC response not ok":"RC response is not ok","invalid attribute name":"Attribute name {$attributeName} is invalid.","invalid attribute value":"Attribute value {$attributeValue} is invalid.","invalid custom metric name":"Custom metric name {$customMetricName} is invalid","invalid String merger input":"Input for String merger is invalid, contact support team to resolve.","already initialized":"initializePerformance() has already been called with different options. To avoid this error, call initializePerformance() with the same options as when it was originally called, or call getPerformance() to return the already initialized instance."},bt=new js(JR,Kv,ZR);/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Un=new sc(Kv);Un.logLevel=be.INFO;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Pu,Qv;class ot{constructor(e){if(this.window=e,!e)throw bt.create("no window");this.performance=e.performance,this.PerformanceObserver=e.PerformanceObserver,this.windowLocation=e.location,this.navigator=e.navigator,this.document=e.document,this.navigator&&this.navigator.cookieEnabled&&(this.localStorage=e.localStorage),e.perfMetrics&&e.perfMetrics.onFirstInputDelay&&(this.onFirstInputDelay=e.perfMetrics.onFirstInputDelay),this.onLCP=aR,this.onINP=iR,this.onCLS=JA}getUrl(){return this.windowLocation.href.split("?")[0]}mark(e){!this.performance||!this.performance.mark||this.performance.mark(e)}measure(e,t,n){!this.performance||!this.performance.measure||this.performance.measure(e,t,n)}getEntriesByType(e){return!this.performance||!this.performance.getEntriesByType?[]:this.performance.getEntriesByType(e)}getEntriesByName(e){return!this.performance||!this.performance.getEntriesByName?[]:this.performance.getEntriesByName(e)}getTimeOrigin(){return this.performance&&(this.performance.timeOrigin||this.performance.timing.navigationStart)}requiredApisAvailable(){return!fetch||!Promise||!$E()?(Un.info("Firebase Performance cannot start if browser does not support fetch and Promise or cookie is disabled."),!1):jx()?!0:(Un.info("IndexedDB is not supported by current browser"),!1)}setupObserver(e,t){if(!this.PerformanceObserver)return;new this.PerformanceObserver(s=>{for(const i of s.getEntries())t(i)}).observe({entryTypes:[e]})}static getInstance(){return Pu===void 0&&(Pu=new ot(Qv)),Pu}}function eP(r){Qv=r}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Yv;function tP(r){const e=r.getId();return e.then(t=>{Yv=t}),e}function Nf(){return Yv}function rP(r){const e=r.getToken();return e.then(t=>{}),e}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Hg(r,e){const t=r.length-e.length;if(t<0||t>1)throw bt.create("invalid String merger input");const n=[];for(let s=0;s<r.length;s++)n.push(r.charAt(s)),e.length>s&&n.push(e.charAt(s));return n.join("")}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Mu;class qt{constructor(){this.instrumentationEnabled=!0,this.dataCollectionEnabled=!0,this.loggingEnabled=!1,this.tracesSamplingRate=1,this.networkRequestsSamplingRate=1,this.logEndPointUrl="https://firebaselogging.googleapis.com/v0cc/log?format=json_proto",this.flTransportEndpointUrl=Hg("hts/frbslgigp.ogepscmv/ieo/eaylg","tp:/ieaeogn-agolai.o/1frlglgc/o"),this.transportKey=Hg("AzSC8r6ReiGqFMyfvgow","Iayx0u-XT3vksVM-pIV"),this.logSource=462,this.logTraceAfterSampling=!1,this.logNetworkAfterSampling=!1,this.configTimeToLive=12}getFlTransportFullUrl(){return this.flTransportEndpointUrl.concat("?key=",this.transportKey)}static getInstance(){return Mu===void 0&&(Mu=new qt),Mu}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var Ii;(function(r){r[r.UNKNOWN=0]="UNKNOWN",r[r.VISIBLE=1]="VISIBLE",r[r.HIDDEN=2]="HIDDEN"})(Ii||(Ii={}));const nP=["firebase_","google_","ga_"],sP=new RegExp("^[a-zA-Z]\\w*$"),oP=40,iP=100;function aP(){const r=ot.getInstance().navigator;return r!=null&&r.serviceWorker?r.serviceWorker.controller?2:3:1}function lP(){switch(ot.getInstance().document.visibilityState){case"visible":return Ii.VISIBLE;case"hidden":return Ii.HIDDEN;default:return Ii.UNKNOWN}}function cP(){const e=ot.getInstance().navigator.connection;switch(e&&e.effectiveType){case"slow-2g":return 1;case"2g":return 2;case"3g":return 3;case"4g":return 4;default:return 0}}function uP(r){return r.length===0||r.length>oP?!1:!nP.some(t=>r.startsWith(t))&&!!r.match(sP)}function dP(r){return r.length!==0&&r.length<=iP}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Xv(r){var e;const t=(e=r.options)===null||e===void 0?void 0:e.appId;if(!t)throw bt.create("no app id");return t}function hP(r){var e;const t=(e=r.options)===null||e===void 0?void 0:e.projectId;if(!t)throw bt.create("no project id");return t}function fP(r){var e;const t=(e=r.options)===null||e===void 0?void 0:e.apiKey;if(!t)throw bt.create("no api key");return t}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const mP="0.0.1",tr={loggingEnabled:!0},pP="FIREBASE_INSTALLATIONS_AUTH";function gP(r,e){const t=yP();return t?(Wg(t),Promise.resolve()):vP(r,e).then(Wg).then(n=>xP(n),()=>{})}function yP(){const r=ot.getInstance().localStorage;if(!r)return;const e=r.getItem(Gv);if(!e||!wP(e))return;const t=r.getItem(Wv);if(t)try{return JSON.parse(t)}catch{return}}function xP(r){const e=ot.getInstance().localStorage;!r||!e||(e.setItem(Wv,JSON.stringify(r)),e.setItem(Gv,String(Date.now()+qt.getInstance().configTimeToLive*60*60*1e3)))}const bP="Could not fetch config, will use default configs";function vP(r,e){return rP(r.installations).then(t=>{const n=hP(r.app),s=fP(r.app),i=`https://firebaseremoteconfig.googleapis.com/v1/projects/${n}/namespaces/fireperf:fetch?key=${s}`,a=new Request(i,{method:"POST",headers:{Authorization:`${pP} ${t}`},body:JSON.stringify({app_instance_id:e,app_instance_id_token:t,app_id:Xv(r.app),app_version:Vv,sdk_version:mP})});return fetch(a).then(l=>{if(l.ok)return l.json();throw bt.create("RC response not ok")})}).catch(()=>{Un.info(bP)})}function Wg(r){if(!r)return r;const e=qt.getInstance(),t=r.entries||{};return t.fpr_enabled!==void 0?e.loggingEnabled=String(t.fpr_enabled)==="true":e.loggingEnabled=tr.loggingEnabled,t.fpr_log_source?e.logSource=Number(t.fpr_log_source):tr.logSource&&(e.logSource=tr.logSource),t.fpr_log_endpoint_url?e.logEndPointUrl=t.fpr_log_endpoint_url:tr.logEndPointUrl&&(e.logEndPointUrl=tr.logEndPointUrl),t.fpr_log_transport_key?e.transportKey=t.fpr_log_transport_key:tr.transportKey&&(e.transportKey=tr.transportKey),t.fpr_vc_network_request_sampling_rate!==void 0?e.networkRequestsSamplingRate=Number(t.fpr_vc_network_request_sampling_rate):tr.networkRequestsSamplingRate!==void 0&&(e.networkRequestsSamplingRate=tr.networkRequestsSamplingRate),t.fpr_vc_trace_sampling_rate!==void 0?e.tracesSamplingRate=Number(t.fpr_vc_trace_sampling_rate):tr.tracesSamplingRate!==void 0&&(e.tracesSamplingRate=tr.tracesSamplingRate),e.logTraceAfterSampling=Gg(e.tracesSamplingRate),e.logNetworkAfterSampling=Gg(e.networkRequestsSamplingRate),r}function wP(r){return Number(r)>Date.now()}function Gg(r){return Math.random()<=r}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Cf=1,Du;function Jv(r){return Cf=2,Du=Du||TP(r),Du}function _P(){return Cf===3}function TP(r){return EP().then(()=>tP(r.installations)).then(e=>gP(r,e)).then(()=>Kg(),()=>Kg())}function EP(){const r=ot.getInstance().document;return new Promise(e=>{if(r&&r.readyState!=="complete"){const t=()=>{r.readyState==="complete"&&(r.removeEventListener("readystatechange",t),e())};r.addEventListener("readystatechange",t)}else e()})}function Kg(){Cf=3}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Zv=10*1e3,NP=5.5*1e3,CP=1e3,ew=3;let al=ew,ys=[],Qg=!1;function kP(){Qg||(kf(NP),Qg=!0)}function kf(r){setTimeout(()=>{al<=0||(ys.length>0&&tw(),kf(Zv))},r)}function tw(){const r=ys.splice(0,CP),e=r.map(n=>({source_extension_json_proto3:n.message,event_time_ms:String(n.eventTime)})),t={request_time_ms:String(Date.now()),client_info:{client_type:1,js_client_info:{}},log_source:qt.getInstance().logSource,log_event:e};SP(t).then(()=>{al=ew}).catch(()=>{ys=[...r,...ys],al--,Un.info(`Tries left: ${al}.`),kf(Zv)})}function SP(r){const e=qt.getInstance().getFlTransportFullUrl(),t=JSON.stringify(r);return navigator.sendBeacon&&navigator.sendBeacon(e,t)?Promise.resolve():fetch(e,{method:"POST",body:t,keepalive:!0}).then()}function jP(r){if(!r.eventTime||!r.message)throw bt.create("invalid cc log");ys=[...ys,r]}function IP(r){return(...e)=>{const t=r(...e);jP({message:t,eventTime:Date.now()})}}function AP(){for(;ys.length>0;)tw()}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Ai;function rw(r,e){Ai||(Ai={send:IP(MP),flush:AP}),Ai.send(r,e)}function Ga(r){const e=qt.getInstance();!e.instrumentationEnabled&&r.isAuto||!e.dataCollectionEnabled&&!r.isAuto||ot.getInstance().requiredApisAvailable()&&(_P()?Ou(r):Jv(r.performanceController).then(()=>Ou(r),()=>Ou(r)))}function RP(){Ai&&Ai.flush()}function Ou(r){if(!Nf())return;const e=qt.getInstance();!e.loggingEnabled||!e.logTraceAfterSampling||rw(r,1)}function PP(r){const e=qt.getInstance();if(!e.instrumentationEnabled)return;const t=r.url,n=e.logEndPointUrl.split("?")[0],s=e.flTransportEndpointUrl.split("?")[0];t===n||t===s||!e.loggingEnabled||!e.logNetworkAfterSampling||rw(r,0)}function MP(r,e){return e===0?DP(r):OP(r)}function DP(r){const e={url:r.url,http_method:r.httpMethod||0,http_response_code:200,response_payload_bytes:r.responsePayloadBytes,client_start_time_us:r.startTimeUs,time_to_response_initiated_us:r.timeToResponseInitiatedUs,time_to_response_completed_us:r.timeToResponseCompletedUs},t={application_info:nw(r.performanceController.app),network_request_metric:e};return JSON.stringify(t)}function OP(r){const e={name:r.name,is_auto:r.isAuto,client_start_time_us:r.startTimeUs,duration_us:r.durationUs};Object.keys(r.counters).length!==0&&(e.counters=r.counters);const t=r.getAttributes();Object.keys(t).length!==0&&(e.custom_attributes=t);const n={application_info:nw(r.performanceController.app),trace_metric:e};return JSON.stringify(n)}function nw(r){return{google_app_id:Xv(r),app_instance_id:Nf(),web_app_info:{sdk_version:Vv,page_url:ot.getInstance().getUrl(),service_worker_status:aP(),visibility_state:lP(),effective_connection_type:cP()},application_process_state:0}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Yg(r,e){const t=e;if(!t||t.responseStart===void 0)return;const n=ot.getInstance().getTimeOrigin(),s=Math.floor((t.startTime+n)*1e3),i=t.responseStart?Math.floor((t.responseStart-t.startTime)*1e3):void 0,a=Math.floor((t.responseEnd-t.startTime)*1e3),l=t.name&&t.name.split("?")[0],u={performanceController:r,url:l,responsePayloadBytes:t.transferSize,startTimeUs:s,timeToResponseInitiatedUs:i,timeToResponseCompletedUs:a};PP(u)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const LP=100,VP="_",FP=[Uv,$v,Bv,zv,Hv,qv];function UP(r,e){return r.length===0||r.length>LP?!1:e&&e.startsWith(Fv)&&FP.indexOf(r)>-1||!r.startsWith(VP)}function $P(r){const e=Math.floor(r);return e<r&&Un.info(`Metric value should be an Integer, setting the value as : ${e}.`),e}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Io{constructor(e,t,n=!1,s){this.performanceController=e,this.name=t,this.isAuto=n,this.state=1,this.customAttributes={},this.counters={},this.api=ot.getInstance(),this.randomId=Math.floor(Math.random()*1e6),this.isAuto||(this.traceStartMark=`${GR}-${this.randomId}-${this.name}`,this.traceStopMark=`${KR}-${this.randomId}-${this.name}`,this.traceMeasure=s||`${jd}-${this.randomId}-${this.name}`,s&&this.calculateTraceMetrics())}start(){if(this.state!==1)throw bt.create("trace started",{traceName:this.name});this.api.mark(this.traceStartMark),this.state=2}stop(){if(this.state!==2)throw bt.create("trace stopped",{traceName:this.name});this.state=3,this.api.mark(this.traceStopMark),this.api.measure(this.traceMeasure,this.traceStartMark,this.traceStopMark),this.calculateTraceMetrics(),Ga(this)}record(e,t,n){if(e<=0)throw bt.create("nonpositive trace startTime",{traceName:this.name});if(t<=0)throw bt.create("nonpositive trace duration",{traceName:this.name});if(this.durationUs=Math.floor(t*1e3),this.startTimeUs=Math.floor(e*1e3),n&&n.attributes&&(this.customAttributes=Object.assign({},n.attributes)),n&&n.metrics)for(const s of Object.keys(n.metrics))isNaN(Number(n.metrics[s]))||(this.counters[s]=Math.floor(Number(n.metrics[s])));Ga(this)}incrementMetric(e,t=1){this.counters[e]===void 0?this.putMetric(e,t):this.putMetric(e,this.counters[e]+t)}putMetric(e,t){if(UP(e,this.name))this.counters[e]=$P(t??0);else throw bt.create("invalid custom metric name",{customMetricName:e})}getMetric(e){return this.counters[e]||0}putAttribute(e,t){const n=uP(e),s=dP(t);if(n&&s){this.customAttributes[e]=t;return}if(!n)throw bt.create("invalid attribute name",{attributeName:e});if(!s)throw bt.create("invalid attribute value",{attributeValue:t})}getAttribute(e){return this.customAttributes[e]}removeAttribute(e){this.customAttributes[e]!==void 0&&delete this.customAttributes[e]}getAttributes(){return Object.assign({},this.customAttributes)}setStartTime(e){this.startTimeUs=e}setDuration(e){this.durationUs=e}calculateTraceMetrics(){const e=this.api.getEntriesByName(this.traceMeasure),t=e&&e[0];t&&(this.durationUs=Math.floor(t.duration*1e3),this.startTimeUs=Math.floor((t.startTime+this.api.getTimeOrigin())*1e3))}static createOobTrace(e,t,n,s,i){const a=ot.getInstance().getUrl();if(!a)return;const l=new Io(e,Fv+a,!0),u=Math.floor(ot.getInstance().getTimeOrigin()*1e3);l.setStartTime(u),t&&t[0]&&(l.setDuration(Math.floor(t[0].duration*1e3)),l.putMetric("domInteractive",Math.floor(t[0].domInteractive*1e3)),l.putMetric("domContentLoadedEventEnd",Math.floor(t[0].domContentLoadedEventEnd*1e3)),l.putMetric("loadEventEnd",Math.floor(t[0].loadEventEnd*1e3)));const d="first-paint",h="first-contentful-paint";if(n){const p=n.find(b=>b.name===d);p&&p.startTime&&l.putMetric(Uv,Math.floor(p.startTime*1e3));const g=n.find(b=>b.name===h);g&&g.startTime&&l.putMetric($v,Math.floor(g.startTime*1e3)),i&&l.putMetric(Bv,Math.floor(i*1e3))}this.addWebVitalMetric(l,zv,QR,s.lcp),this.addWebVitalMetric(l,Hv,XR,s.cls),this.addWebVitalMetric(l,qv,YR,s.inp),Ga(l),RP()}static addWebVitalMetric(e,t,n,s){s&&(e.putMetric(t,Math.floor(s.value*1e3)),s.elementAttribution&&e.putAttribute(n,s.elementAttribution))}static createUserTimingTrace(e,t){const n=new Io(e,t,!1,t);Ga(n)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let ll={},Xg=!1,sw;function Jg(r){Nf()&&(setTimeout(()=>zP(r),0),setTimeout(()=>BP(r),0),setTimeout(()=>qP(r),0))}function BP(r){const e=ot.getInstance(),t=e.getEntriesByType("resource");for(const n of t)Yg(r,n);e.setupObserver("resource",n=>Yg(r,n))}function zP(r){const e=ot.getInstance();"onpagehide"in window?e.document.addEventListener("pagehide",()=>Lu(r)):e.document.addEventListener("unload",()=>Lu(r)),e.document.addEventListener("visibilitychange",()=>{e.document.visibilityState==="hidden"&&Lu(r)}),e.onFirstInputDelay&&e.onFirstInputDelay(t=>{sw=t}),e.onLCP(t=>{var n;ll.lcp={value:t.value,elementAttribution:(n=t.attribution)===null||n===void 0?void 0:n.element}}),e.onCLS(t=>{var n;ll.cls={value:t.value,elementAttribution:(n=t.attribution)===null||n===void 0?void 0:n.largestShiftTarget}}),e.onINP(t=>{var n;ll.inp={value:t.value,elementAttribution:(n=t.attribution)===null||n===void 0?void 0:n.interactionTarget}})}function qP(r){const e=ot.getInstance(),t=e.getEntriesByType("measure");for(const n of t)Zg(r,n);e.setupObserver("measure",n=>Zg(r,n))}function Zg(r,e){const t=e.name;t.substring(0,jd.length)!==jd&&Io.createUserTimingTrace(r,t)}function Lu(r){if(!Xg){Xg=!0;const e=ot.getInstance(),t=e.getEntriesByType("navigation"),n=e.getEntriesByType("paint");setTimeout(()=>{Io.createOobTrace(r,t,n,ll,sw)},0)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class HP{constructor(e,t){this.app=e,this.installations=t,this.initialized=!1}_init(e){this.initialized||((e==null?void 0:e.dataCollectionEnabled)!==void 0&&(this.dataCollectionEnabled=e.dataCollectionEnabled),(e==null?void 0:e.instrumentationEnabled)!==void 0&&(this.instrumentationEnabled=e.instrumentationEnabled),ot.getInstance().requiredApisAvailable()?Ix().then(t=>{t&&(kP(),Jv(this).then(()=>Jg(this),()=>Jg(this)),this.initialized=!0)}).catch(t=>{Un.info(`Environment doesn't support IndexedDB: ${t}`)}):Un.info('Firebase Performance cannot start if the browser does not support "Fetch" and "Promise", or cookies are disabled.'))}set instrumentationEnabled(e){qt.getInstance().instrumentationEnabled=e}get instrumentationEnabled(){return qt.getInstance().instrumentationEnabled}set dataCollectionEnabled(e){qt.getInstance().dataCollectionEnabled=e}get dataCollectionEnabled(){return qt.getInstance().dataCollectionEnabled}}const WP="[DEFAULT]";function GP(r=oc()){return r=Me(r),Is(r,"performance").getImmediate()}function ow(r,e){return r=Me(r),new Io(r,e)}const KP=(r,{options:e})=>{const t=r.getProvider("app").getImmediate(),n=r.getProvider("installations-internal").getImmediate();if(t.name!==WP)throw bt.create("FB not default");if(typeof window>"u")throw bt.create("no window");eP(window);const s=new HP(t,n);return s._init(e),s};function QP(){Cr(new cr("performance",KP,"PUBLIC")),Lt(qg,Sd),Lt(qg,Sd,"esm2017")}QP();const ey={apiKey:"AIzaSyCBoEZeDucpm7p9OEDgaUGLzhn5HpItseQ",authDomain:void 0,projectId:"spandex-salvation-radio-site",storageBucket:void 0,messagingSenderId:void 0,appId:"1:632263635377:web:2a9bd6118a6a2cb9d8cd90",measurementId:void 0};let Ws;try{Ws=ed(ey)}catch(r){if(r.code==="app/duplicate-app")Ws=ed(ey,"spandex-radio-app");else throw console.error("Firebase initialization error:",r),r}let Ri,dr,iw,Dr;try{Ri=bS(Ws),dr=bI(Ws),iw=qA(Ws),Dr=GP(Ws)}catch(r){throw console.error("Error initializing Firebase services:",r),r}const YP=new br;function XP(r,e){if(r instanceof RegExp)return{keys:!1,pattern:r};var t,n,s,i,a=[],l="",u=r.split("/");for(u[0]||u.shift();s=u.shift();)t=s[0],t==="*"?(a.push(t),l+=s[1]==="?"?"(?:/(.*))?":"/(.*)"):t===":"?(n=s.indexOf("?",1),i=s.indexOf(".",1),a.push(s.substring(1,~n?n:~i?i:s.length)),l+=~n&&!~i?"(?:/([^/]+?))?":"/([^/]+?)",~i&&(l+=(~n?"?":"")+"\\"+s.substring(i))):l+="/"+s;return{keys:a,pattern:new RegExp("^"+l+(e?"(?=$|/)":"/?$"),"i")}}const JP=JT.useInsertionEffect,ZP=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u",e4=ZP?m.useLayoutEffect:m.useEffect,t4=JP||e4,aw=r=>{const e=m.useRef([r,(...t)=>e[0](...t)]).current;return t4(()=>{e[0]=r}),e[1]},r4="popstate",Sf="pushState",jf="replaceState",n4="hashchange",ty=[r4,Sf,jf,n4],s4=r=>{for(const e of ty)addEventListener(e,r);return()=>{for(const e of ty)removeEventListener(e,r)}},lw=(r,e)=>ZT.useSyncExternalStore(s4,r,e),o4=()=>location.search,i4=({ssrSearch:r=""}={})=>lw(o4,()=>r),ry=()=>location.pathname,a4=({ssrPath:r}={})=>lw(ry,r?()=>r:ry),l4=(r,{replace:e=!1,state:t=null}={})=>history[e?jf:Sf](t,"",r),c4=(r={})=>[a4(r),l4],ny=Symbol.for("wouter_v3");if(typeof history<"u"&&typeof window[ny]>"u"){for(const r of[Sf,jf]){const e=history[r];history[r]=function(){const t=e.apply(this,arguments),n=new Event(r);return n.arguments=arguments,dispatchEvent(n),t}}Object.defineProperty(window,ny,{value:!0})}const u4=(r,e)=>e.toLowerCase().indexOf(r.toLowerCase())?"~"+e:e.slice(r.length)||"/",cw=(r="")=>r==="/"?"":r,d4=(r,e)=>r[0]==="~"?r.slice(1):cw(e)+r,h4=(r="",e)=>u4(Id(cw(r)),Id(e)),f4=r=>r[0]==="?"?r.slice(1):r,Id=r=>{try{return decodeURI(r)}catch{return r}},m4=r=>Id(f4(r)),uw={hook:c4,searchHook:i4,parser:XP,base:"",ssrPath:void 0,ssrSearch:void 0,ssrContext:void 0,hrefs:r=>r},dw=m.createContext(uw),Bo=()=>m.useContext(dw),hw={},fw=m.createContext(hw),p4=()=>m.useContext(fw),Ac=r=>{const[e,t]=r.hook(r);return[h4(r.base,e),aw((n,s)=>t(d4(n,r.base),s))]},zo=()=>Ac(Bo()),g4=()=>{const r=Bo();return m4(r.searchHook(r))},mw=(r,e,t,n)=>{const{pattern:s,keys:i}=e instanceof RegExp?{keys:!1,pattern:e}:r(e||"*",n),a=s.exec(t)||[],[l,...u]=a;return l!==void 0?[!0,(()=>{const d=i!==!1?Object.fromEntries(i.map((p,g)=>[p,u[g]])):a.groups;let h={...u};return d&&Object.assign(h,d),h})(),...n?[l]:[]]:[!1,null]},y4=({children:r,...e})=>{var h,p;const t=Bo(),n=e.hook?uw:t;let s=n;const[i,a]=((h=e.ssrPath)==null?void 0:h.split("?"))??[];a&&(e.ssrSearch=a,e.ssrPath=i),e.hrefs=e.hrefs??((p=e.hook)==null?void 0:p.hrefs);let l=m.useRef({}),u=l.current,d=u;for(let g in n){const b=g==="base"?n[g]+(e[g]||""):e[g]||n[g];u===d&&b!==d[g]&&(l.current=d={...d}),d[g]=b,(b!==n[g]||b!==s[g])&&(s=d)}return m.createElement(dw.Provider,{value:s,children:r})},sy=({children:r,component:e},t)=>e?m.createElement(e,{params:t}):typeof r=="function"?r(t):r,x4=r=>{let e=m.useRef(hw);const t=e.current;return e.current=Object.keys(r).length!==Object.keys(t).length||Object.entries(r).some(([n,s])=>s!==t[n])?r:t},Nt=({path:r,nest:e,match:t,...n})=>{const s=Bo(),[i]=Ac(s),[a,l,u]=t??mw(s.parser,r,i,e),d=x4({...p4(),...l});if(!a)return null;const h=u?m.createElement(y4,{base:u},sy(n,d)):sy(n,d);return m.createElement(fw.Provider,{value:d,children:h})},pw=m.forwardRef((r,e)=>{const t=Bo(),[n,s]=Ac(t),{to:i="",href:a=i,onClick:l,asChild:u,children:d,className:h,replace:p,state:g,...b}=r,C=aw(v=>{v.ctrlKey||v.metaKey||v.altKey||v.shiftKey||v.button!==0||(l==null||l(v),v.defaultPrevented||(v.preventDefault(),s(a,r)))}),x=t.hrefs(a[0]==="~"?a.slice(1):t.base+a,t);return u&&m.isValidElement(d)?m.cloneElement(d,{onClick:C,href:x}):m.createElement("a",{...b,onClick:C,href:x,className:h!=null&&h.call?h(n===a):h,children:d,ref:e})}),gw=r=>Array.isArray(r)?r.flatMap(e=>gw(e&&e.type===m.Fragment?e.props.children:e)):[r],b4=({children:r,location:e})=>{const t=Bo(),[n]=Ac(t);for(const s of gw(r)){let i=0;if(m.isValidElement(s)&&(i=mw(t.parser,s.props.path,e||n,s.props.nest))[0])return m.cloneElement(s,{match:i})}return null};var qo=class{constructor(){this.listeners=new Set,this.subscribe=this.subscribe.bind(this)}subscribe(r){return this.listeners.add(r),this.onSubscribe(),()=>{this.listeners.delete(r),this.onUnsubscribe()}}hasListeners(){return this.listeners.size>0}onSubscribe(){}onUnsubscribe(){}},Cs=typeof window>"u"||"Deno"in globalThis;function It(){}function v4(r,e){return typeof r=="function"?r(e):r}function Ad(r){return typeof r=="number"&&r>=0&&r!==1/0}function yw(r,e){return Math.max(r+(e||0)-Date.now(),0)}function Sn(r,e){return typeof r=="function"?r(e):r}function Kt(r,e){return typeof r=="function"?r(e):r}function oy(r,e){const{type:t="all",exact:n,fetchStatus:s,predicate:i,queryKey:a,stale:l}=r;if(a){if(n){if(e.queryHash!==If(a,e.options))return!1}else if(!zi(e.queryKey,a))return!1}if(t!=="all"){const u=e.isActive();if(t==="active"&&!u||t==="inactive"&&u)return!1}return!(typeof l=="boolean"&&e.isStale()!==l||s&&s!==e.state.fetchStatus||i&&!i(e))}function iy(r,e){const{exact:t,status:n,predicate:s,mutationKey:i}=r;if(i){if(!e.options.mutationKey)return!1;if(t){if(ks(e.options.mutationKey)!==ks(i))return!1}else if(!zi(e.options.mutationKey,i))return!1}return!(n&&e.state.status!==n||s&&!s(e))}function If(r,e){return((e==null?void 0:e.queryKeyHashFn)||ks)(r)}function ks(r){return JSON.stringify(r,(e,t)=>Rd(t)?Object.keys(t).sort().reduce((n,s)=>(n[s]=t[s],n),{}):t)}function zi(r,e){return r===e?!0:typeof r!=typeof e?!1:r&&e&&typeof r=="object"&&typeof e=="object"?Object.keys(e).every(t=>zi(r[t],e[t])):!1}function xw(r,e){if(r===e)return r;const t=ay(r)&&ay(e);if(t||Rd(r)&&Rd(e)){const n=t?r:Object.keys(r),s=n.length,i=t?e:Object.keys(e),a=i.length,l=t?[]:{},u=new Set(n);let d=0;for(let h=0;h<a;h++){const p=t?h:i[h];(!t&&u.has(p)||t)&&r[p]===void 0&&e[p]===void 0?(l[p]=void 0,d++):(l[p]=xw(r[p],e[p]),l[p]===r[p]&&r[p]!==void 0&&d++)}return s===a&&d===s?r:l}return e}function Bl(r,e){if(!e||Object.keys(r).length!==Object.keys(e).length)return!1;for(const t in r)if(r[t]!==e[t])return!1;return!0}function ay(r){return Array.isArray(r)&&r.length===Object.keys(r).length}function Rd(r){if(!ly(r))return!1;const e=r.constructor;if(e===void 0)return!0;const t=e.prototype;return!(!ly(t)||!t.hasOwnProperty("isPrototypeOf")||Object.getPrototypeOf(r)!==Object.prototype)}function ly(r){return Object.prototype.toString.call(r)==="[object Object]"}function w4(r){return new Promise(e=>{setTimeout(e,r)})}function Pd(r,e,t){return typeof t.structuralSharing=="function"?t.structuralSharing(r,e):t.structuralSharing!==!1?xw(r,e):e}function _4(r,e,t=0){const n=[...r,e];return t&&n.length>t?n.slice(1):n}function T4(r,e,t=0){const n=[e,...r];return t&&n.length>t?n.slice(0,-1):n}var Af=Symbol();function bw(r,e){return!r.queryFn&&(e!=null&&e.initialPromise)?()=>e.initialPromise:!r.queryFn||r.queryFn===Af?()=>Promise.reject(new Error(`Missing queryFn: '${r.queryHash}'`)):r.queryFn}function vw(r,e){return typeof r=="function"?r(...e):!!r}var as,hn,ho,Fy,E4=(Fy=class extends qo{constructor(){super();re(this,as);re(this,hn);re(this,ho);K(this,ho,e=>{if(!Cs&&window.addEventListener){const t=()=>e();return window.addEventListener("visibilitychange",t,!1),()=>{window.removeEventListener("visibilitychange",t)}}})}onSubscribe(){D(this,hn)||this.setEventListener(D(this,ho))}onUnsubscribe(){var e;this.hasListeners()||((e=D(this,hn))==null||e.call(this),K(this,hn,void 0))}setEventListener(e){var t;K(this,ho,e),(t=D(this,hn))==null||t.call(this),K(this,hn,e(n=>{typeof n=="boolean"?this.setFocused(n):this.onFocus()}))}setFocused(e){D(this,as)!==e&&(K(this,as,e),this.onFocus())}onFocus(){const e=this.isFocused();this.listeners.forEach(t=>{t(e)})}isFocused(){var e;return typeof D(this,as)=="boolean"?D(this,as):((e=globalThis.document)==null?void 0:e.visibilityState)!=="hidden"}},as=new WeakMap,hn=new WeakMap,ho=new WeakMap,Fy),Rf=new E4,fo,fn,mo,Uy,N4=(Uy=class extends qo{constructor(){super();re(this,fo,!0);re(this,fn);re(this,mo);K(this,mo,e=>{if(!Cs&&window.addEventListener){const t=()=>e(!0),n=()=>e(!1);return window.addEventListener("online",t,!1),window.addEventListener("offline",n,!1),()=>{window.removeEventListener("online",t),window.removeEventListener("offline",n)}}})}onSubscribe(){D(this,fn)||this.setEventListener(D(this,mo))}onUnsubscribe(){var e;this.hasListeners()||((e=D(this,fn))==null||e.call(this),K(this,fn,void 0))}setEventListener(e){var t;K(this,mo,e),(t=D(this,fn))==null||t.call(this),K(this,fn,e(this.setOnline.bind(this)))}setOnline(e){D(this,fo)!==e&&(K(this,fo,e),this.listeners.forEach(n=>{n(e)}))}isOnline(){return D(this,fo)}},fo=new WeakMap,fn=new WeakMap,mo=new WeakMap,Uy),zl=new N4;function Md(){let r,e;const t=new Promise((s,i)=>{r=s,e=i});t.status="pending",t.catch(()=>{});function n(s){Object.assign(t,s),delete t.resolve,delete t.reject}return t.resolve=s=>{n({status:"fulfilled",value:s}),r(s)},t.reject=s=>{n({status:"rejected",reason:s}),e(s)},t}function C4(r){return Math.min(1e3*2**r,3e4)}function ww(r){return(r??"online")==="online"?zl.isOnline():!0}var _w=class extends Error{constructor(r){super("CancelledError"),this.revert=r==null?void 0:r.revert,this.silent=r==null?void 0:r.silent}};function Vu(r){return r instanceof _w}function Tw(r){let e=!1,t=0,n=!1,s;const i=Md(),a=x=>{var v;n||(g(new _w(x)),(v=r.abort)==null||v.call(r))},l=()=>{e=!0},u=()=>{e=!1},d=()=>Rf.isFocused()&&(r.networkMode==="always"||zl.isOnline())&&r.canRun(),h=()=>ww(r.networkMode)&&r.canRun(),p=x=>{var v;n||(n=!0,(v=r.onSuccess)==null||v.call(r,x),s==null||s(),i.resolve(x))},g=x=>{var v;n||(n=!0,(v=r.onError)==null||v.call(r,x),s==null||s(),i.reject(x))},b=()=>new Promise(x=>{var v;s=E=>{(n||d())&&x(E)},(v=r.onPause)==null||v.call(r)}).then(()=>{var x;s=void 0,n||(x=r.onContinue)==null||x.call(r)}),C=()=>{if(n)return;let x;const v=t===0?r.initialPromise:void 0;try{x=v??r.fn()}catch(E){x=Promise.reject(E)}Promise.resolve(x).then(p).catch(E=>{var U;if(n)return;const T=r.retry??(Cs?0:3),N=r.retryDelay??C4,R=typeof N=="function"?N(t,E):N,L=T===!0||typeof T=="number"&&t<T||typeof T=="function"&&T(t,E);if(e||!L){g(E);return}t++,(U=r.onFail)==null||U.call(r,t,E),w4(R).then(()=>d()?void 0:b()).then(()=>{e?g(E):C()})})};return{promise:i,cancel:a,continue:()=>(s==null||s(),i),cancelRetry:l,continueRetry:u,canStart:h,start:()=>(h()?C():b().then(C),i)}}var k4=r=>setTimeout(r,0);function S4(){let r=[],e=0,t=l=>{l()},n=l=>{l()},s=k4;const i=l=>{e?r.push(l):s(()=>{t(l)})},a=()=>{const l=r;r=[],l.length&&s(()=>{n(()=>{l.forEach(u=>{t(u)})})})};return{batch:l=>{let u;e++;try{u=l()}finally{e--,e||a()}return u},batchCalls:l=>(...u)=>{i(()=>{l(...u)})},schedule:i,setNotifyFunction:l=>{t=l},setBatchNotifyFunction:l=>{n=l},setScheduler:l=>{s=l}}}var nt=S4(),ls,$y,Ew=($y=class{constructor(){re(this,ls)}destroy(){this.clearGcTimeout()}scheduleGc(){this.clearGcTimeout(),Ad(this.gcTime)&&K(this,ls,setTimeout(()=>{this.optionalRemove()},this.gcTime))}updateGcTime(r){this.gcTime=Math.max(this.gcTime||0,r??(Cs?1/0:300*1e3))}clearGcTimeout(){D(this,ls)&&(clearTimeout(D(this,ls)),K(this,ls,void 0))}},ls=new WeakMap,$y),po,cs,Gt,us,yt,Qi,ds,nr,Mr,By,j4=(By=class extends Ew{constructor(e){super();re(this,nr);re(this,po);re(this,cs);re(this,Gt);re(this,us);re(this,yt);re(this,Qi);re(this,ds);K(this,ds,!1),K(this,Qi,e.defaultOptions),this.setOptions(e.options),this.observers=[],K(this,us,e.client),K(this,Gt,D(this,us).getQueryCache()),this.queryKey=e.queryKey,this.queryHash=e.queryHash,K(this,po,I4(this.options)),this.state=e.state??D(this,po),this.scheduleGc()}get meta(){return this.options.meta}get promise(){var e;return(e=D(this,yt))==null?void 0:e.promise}setOptions(e){this.options={...D(this,Qi),...e},this.updateGcTime(this.options.gcTime)}optionalRemove(){!this.observers.length&&this.state.fetchStatus==="idle"&&D(this,Gt).remove(this)}setData(e,t){const n=Pd(this.state.data,e,this.options);return pe(this,nr,Mr).call(this,{data:n,type:"success",dataUpdatedAt:t==null?void 0:t.updatedAt,manual:t==null?void 0:t.manual}),n}setState(e,t){pe(this,nr,Mr).call(this,{type:"setState",state:e,setStateOptions:t})}cancel(e){var n,s;const t=(n=D(this,yt))==null?void 0:n.promise;return(s=D(this,yt))==null||s.cancel(e),t?t.then(It).catch(It):Promise.resolve()}destroy(){super.destroy(),this.cancel({silent:!0})}reset(){this.destroy(),this.setState(D(this,po))}isActive(){return this.observers.some(e=>Kt(e.options.enabled,this)!==!1)}isDisabled(){return this.getObserversCount()>0?!this.isActive():this.options.queryFn===Af||this.state.dataUpdateCount+this.state.errorUpdateCount===0}isStatic(){return this.getObserversCount()>0?this.observers.some(e=>Sn(e.options.staleTime,this)==="static"):!1}isStale(){return this.getObserversCount()>0?this.observers.some(e=>e.getCurrentResult().isStale):this.state.data===void 0||this.state.isInvalidated}isStaleByTime(e=0){return this.state.data===void 0?!0:e==="static"?!1:this.state.isInvalidated?!0:!yw(this.state.dataUpdatedAt,e)}onFocus(){var t;const e=this.observers.find(n=>n.shouldFetchOnWindowFocus());e==null||e.refetch({cancelRefetch:!1}),(t=D(this,yt))==null||t.continue()}onOnline(){var t;const e=this.observers.find(n=>n.shouldFetchOnReconnect());e==null||e.refetch({cancelRefetch:!1}),(t=D(this,yt))==null||t.continue()}addObserver(e){this.observers.includes(e)||(this.observers.push(e),this.clearGcTimeout(),D(this,Gt).notify({type:"observerAdded",query:this,observer:e}))}removeObserver(e){this.observers.includes(e)&&(this.observers=this.observers.filter(t=>t!==e),this.observers.length||(D(this,yt)&&(D(this,ds)?D(this,yt).cancel({revert:!0}):D(this,yt).cancelRetry()),this.scheduleGc()),D(this,Gt).notify({type:"observerRemoved",query:this,observer:e}))}getObserversCount(){return this.observers.length}invalidate(){this.state.isInvalidated||pe(this,nr,Mr).call(this,{type:"invalidate"})}fetch(e,t){var d,h,p;if(this.state.fetchStatus!=="idle"){if(this.state.data!==void 0&&(t!=null&&t.cancelRefetch))this.cancel({silent:!0});else if(D(this,yt))return D(this,yt).continueRetry(),D(this,yt).promise}if(e&&this.setOptions(e),!this.options.queryFn){const g=this.observers.find(b=>b.options.queryFn);g&&this.setOptions(g.options)}const n=new AbortController,s=g=>{Object.defineProperty(g,"signal",{enumerable:!0,get:()=>(K(this,ds,!0),n.signal)})},i=()=>{const g=bw(this.options,t),C=(()=>{const x={client:D(this,us),queryKey:this.queryKey,meta:this.meta};return s(x),x})();return K(this,ds,!1),this.options.persister?this.options.persister(g,C,this):g(C)},l=(()=>{const g={fetchOptions:t,options:this.options,queryKey:this.queryKey,client:D(this,us),state:this.state,fetchFn:i};return s(g),g})();(d=this.options.behavior)==null||d.onFetch(l,this),K(this,cs,this.state),(this.state.fetchStatus==="idle"||this.state.fetchMeta!==((h=l.fetchOptions)==null?void 0:h.meta))&&pe(this,nr,Mr).call(this,{type:"fetch",meta:(p=l.fetchOptions)==null?void 0:p.meta});const u=g=>{var b,C,x,v;Vu(g)&&g.silent||pe(this,nr,Mr).call(this,{type:"error",error:g}),Vu(g)||((C=(b=D(this,Gt).config).onError)==null||C.call(b,g,this),(v=(x=D(this,Gt).config).onSettled)==null||v.call(x,this.state.data,g,this)),this.scheduleGc()};return K(this,yt,Tw({initialPromise:t==null?void 0:t.initialPromise,fn:l.fetchFn,abort:n.abort.bind(n),onSuccess:g=>{var b,C,x,v;if(g===void 0){u(new Error(`${this.queryHash} data is undefined`));return}try{this.setData(g)}catch(E){u(E);return}(C=(b=D(this,Gt).config).onSuccess)==null||C.call(b,g,this),(v=(x=D(this,Gt).config).onSettled)==null||v.call(x,g,this.state.error,this),this.scheduleGc()},onError:u,onFail:(g,b)=>{pe(this,nr,Mr).call(this,{type:"failed",failureCount:g,error:b})},onPause:()=>{pe(this,nr,Mr).call(this,{type:"pause"})},onContinue:()=>{pe(this,nr,Mr).call(this,{type:"continue"})},retry:l.options.retry,retryDelay:l.options.retryDelay,networkMode:l.options.networkMode,canRun:()=>!0})),D(this,yt).start()}},po=new WeakMap,cs=new WeakMap,Gt=new WeakMap,us=new WeakMap,yt=new WeakMap,Qi=new WeakMap,ds=new WeakMap,nr=new WeakSet,Mr=function(e){const t=n=>{switch(e.type){case"failed":return{...n,fetchFailureCount:e.failureCount,fetchFailureReason:e.error};case"pause":return{...n,fetchStatus:"paused"};case"continue":return{...n,fetchStatus:"fetching"};case"fetch":return{...n,...Nw(n.data,this.options),fetchMeta:e.meta??null};case"success":return K(this,cs,void 0),{...n,data:e.data,dataUpdateCount:n.dataUpdateCount+1,dataUpdatedAt:e.dataUpdatedAt??Date.now(),error:null,isInvalidated:!1,status:"success",...!e.manual&&{fetchStatus:"idle",fetchFailureCount:0,fetchFailureReason:null}};case"error":const s=e.error;return Vu(s)&&s.revert&&D(this,cs)?{...D(this,cs),fetchStatus:"idle"}:{...n,error:s,errorUpdateCount:n.errorUpdateCount+1,errorUpdatedAt:Date.now(),fetchFailureCount:n.fetchFailureCount+1,fetchFailureReason:s,fetchStatus:"idle",status:"error"};case"invalidate":return{...n,isInvalidated:!0};case"setState":return{...n,...e.state}}};this.state=t(this.state),nt.batch(()=>{this.observers.forEach(n=>{n.onQueryUpdate()}),D(this,Gt).notify({query:this,type:"updated",action:e})})},By);function Nw(r,e){return{fetchFailureCount:0,fetchFailureReason:null,fetchStatus:ww(e.networkMode)?"fetching":"paused",...r===void 0&&{error:null,status:"pending"}}}function I4(r){const e=typeof r.initialData=="function"?r.initialData():r.initialData,t=e!==void 0,n=t?typeof r.initialDataUpdatedAt=="function"?r.initialDataUpdatedAt():r.initialDataUpdatedAt:0;return{data:e,dataUpdateCount:0,dataUpdatedAt:t?n??Date.now():0,error:null,errorUpdateCount:0,errorUpdatedAt:0,fetchFailureCount:0,fetchFailureReason:null,fetchMeta:null,isInvalidated:!1,status:t?"success":"pending",fetchStatus:"idle"}}var gr,zy,A4=(zy=class extends qo{constructor(e={}){super();re(this,gr);this.config=e,K(this,gr,new Map)}build(e,t,n){const s=t.queryKey,i=t.queryHash??If(s,t);let a=this.get(i);return a||(a=new j4({client:e,queryKey:s,queryHash:i,options:e.defaultQueryOptions(t),state:n,defaultOptions:e.getQueryDefaults(s)}),this.add(a)),a}add(e){D(this,gr).has(e.queryHash)||(D(this,gr).set(e.queryHash,e),this.notify({type:"added",query:e}))}remove(e){const t=D(this,gr).get(e.queryHash);t&&(e.destroy(),t===e&&D(this,gr).delete(e.queryHash),this.notify({type:"removed",query:e}))}clear(){nt.batch(()=>{this.getAll().forEach(e=>{this.remove(e)})})}get(e){return D(this,gr).get(e)}getAll(){return[...D(this,gr).values()]}find(e){const t={exact:!0,...e};return this.getAll().find(n=>oy(t,n))}findAll(e={}){const t=this.getAll();return Object.keys(e).length>0?t.filter(n=>oy(e,n)):t}notify(e){nt.batch(()=>{this.listeners.forEach(t=>{t(e)})})}onFocus(){nt.batch(()=>{this.getAll().forEach(e=>{e.onFocus()})})}onOnline(){nt.batch(()=>{this.getAll().forEach(e=>{e.onOnline()})})}},gr=new WeakMap,zy),yr,Ct,hs,xr,on,qy,R4=(qy=class extends Ew{constructor(e){super();re(this,xr);re(this,yr);re(this,Ct);re(this,hs);this.mutationId=e.mutationId,K(this,Ct,e.mutationCache),K(this,yr,[]),this.state=e.state||Cw(),this.setOptions(e.options),this.scheduleGc()}setOptions(e){this.options=e,this.updateGcTime(this.options.gcTime)}get meta(){return this.options.meta}addObserver(e){D(this,yr).includes(e)||(D(this,yr).push(e),this.clearGcTimeout(),D(this,Ct).notify({type:"observerAdded",mutation:this,observer:e}))}removeObserver(e){K(this,yr,D(this,yr).filter(t=>t!==e)),this.scheduleGc(),D(this,Ct).notify({type:"observerRemoved",mutation:this,observer:e})}optionalRemove(){D(this,yr).length||(this.state.status==="pending"?this.scheduleGc():D(this,Ct).remove(this))}continue(){var e;return((e=D(this,hs))==null?void 0:e.continue())??this.execute(this.state.variables)}async execute(e){var i,a,l,u,d,h,p,g,b,C,x,v,E,T,N,R,L,U,A,w;const t=()=>{pe(this,xr,on).call(this,{type:"continue"})};K(this,hs,Tw({fn:()=>this.options.mutationFn?this.options.mutationFn(e):Promise.reject(new Error("No mutationFn found")),onFail:(k,j)=>{pe(this,xr,on).call(this,{type:"failed",failureCount:k,error:j})},onPause:()=>{pe(this,xr,on).call(this,{type:"pause"})},onContinue:t,retry:this.options.retry??0,retryDelay:this.options.retryDelay,networkMode:this.options.networkMode,canRun:()=>D(this,Ct).canRun(this)}));const n=this.state.status==="pending",s=!D(this,hs).canStart();try{if(n)t();else{pe(this,xr,on).call(this,{type:"pending",variables:e,isPaused:s}),await((a=(i=D(this,Ct).config).onMutate)==null?void 0:a.call(i,e,this));const j=await((u=(l=this.options).onMutate)==null?void 0:u.call(l,e));j!==this.state.context&&pe(this,xr,on).call(this,{type:"pending",context:j,variables:e,isPaused:s})}const k=await D(this,hs).start();return await((h=(d=D(this,Ct).config).onSuccess)==null?void 0:h.call(d,k,e,this.state.context,this)),await((g=(p=this.options).onSuccess)==null?void 0:g.call(p,k,e,this.state.context)),await((C=(b=D(this,Ct).config).onSettled)==null?void 0:C.call(b,k,null,this.state.variables,this.state.context,this)),await((v=(x=this.options).onSettled)==null?void 0:v.call(x,k,null,e,this.state.context)),pe(this,xr,on).call(this,{type:"success",data:k}),k}catch(k){try{throw await((T=(E=D(this,Ct).config).onError)==null?void 0:T.call(E,k,e,this.state.context,this)),await((R=(N=this.options).onError)==null?void 0:R.call(N,k,e,this.state.context)),await((U=(L=D(this,Ct).config).onSettled)==null?void 0:U.call(L,void 0,k,this.state.variables,this.state.context,this)),await((w=(A=this.options).onSettled)==null?void 0:w.call(A,void 0,k,e,this.state.context)),k}finally{pe(this,xr,on).call(this,{type:"error",error:k})}}finally{D(this,Ct).runNext(this)}}},yr=new WeakMap,Ct=new WeakMap,hs=new WeakMap,xr=new WeakSet,on=function(e){const t=n=>{switch(e.type){case"failed":return{...n,failureCount:e.failureCount,failureReason:e.error};case"pause":return{...n,isPaused:!0};case"continue":return{...n,isPaused:!1};case"pending":return{...n,context:e.context,data:void 0,failureCount:0,failureReason:null,error:null,isPaused:e.isPaused,status:"pending",variables:e.variables,submittedAt:Date.now()};case"success":return{...n,data:e.data,failureCount:0,failureReason:null,error:null,status:"success",isPaused:!1};case"error":return{...n,data:void 0,error:e.error,failureCount:n.failureCount+1,failureReason:e.error,isPaused:!1,status:"error"}}};this.state=t(this.state),nt.batch(()=>{D(this,yr).forEach(n=>{n.onMutationUpdate(e)}),D(this,Ct).notify({mutation:this,type:"updated",action:e})})},qy);function Cw(){return{context:void 0,data:void 0,error:null,failureCount:0,failureReason:null,isPaused:!1,status:"idle",variables:void 0,submittedAt:0}}var Or,sr,Yi,Hy,P4=(Hy=class extends qo{constructor(e={}){super();re(this,Or);re(this,sr);re(this,Yi);this.config=e,K(this,Or,new Set),K(this,sr,new Map),K(this,Yi,0)}build(e,t,n){const s=new R4({mutationCache:this,mutationId:++Da(this,Yi)._,options:e.defaultMutationOptions(t),state:n});return this.add(s),s}add(e){D(this,Or).add(e);const t=Ka(e);if(typeof t=="string"){const n=D(this,sr).get(t);n?n.push(e):D(this,sr).set(t,[e])}this.notify({type:"added",mutation:e})}remove(e){if(D(this,Or).delete(e)){const t=Ka(e);if(typeof t=="string"){const n=D(this,sr).get(t);if(n)if(n.length>1){const s=n.indexOf(e);s!==-1&&n.splice(s,1)}else n[0]===e&&D(this,sr).delete(t)}}this.notify({type:"removed",mutation:e})}canRun(e){const t=Ka(e);if(typeof t=="string"){const n=D(this,sr).get(t),s=n==null?void 0:n.find(i=>i.state.status==="pending");return!s||s===e}else return!0}runNext(e){var n;const t=Ka(e);if(typeof t=="string"){const s=(n=D(this,sr).get(t))==null?void 0:n.find(i=>i!==e&&i.state.isPaused);return(s==null?void 0:s.continue())??Promise.resolve()}else return Promise.resolve()}clear(){nt.batch(()=>{D(this,Or).forEach(e=>{this.notify({type:"removed",mutation:e})}),D(this,Or).clear(),D(this,sr).clear()})}getAll(){return Array.from(D(this,Or))}find(e){const t={exact:!0,...e};return this.getAll().find(n=>iy(t,n))}findAll(e={}){return this.getAll().filter(t=>iy(e,t))}notify(e){nt.batch(()=>{this.listeners.forEach(t=>{t(e)})})}resumePausedMutations(){const e=this.getAll().filter(t=>t.state.isPaused);return nt.batch(()=>Promise.all(e.map(t=>t.continue().catch(It))))}},Or=new WeakMap,sr=new WeakMap,Yi=new WeakMap,Hy);function Ka(r){var e;return(e=r.options.scope)==null?void 0:e.id}function cy(r){return{onFetch:(e,t)=>{var h,p,g,b,C;const n=e.options,s=(g=(p=(h=e.fetchOptions)==null?void 0:h.meta)==null?void 0:p.fetchMore)==null?void 0:g.direction,i=((b=e.state.data)==null?void 0:b.pages)||[],a=((C=e.state.data)==null?void 0:C.pageParams)||[];let l={pages:[],pageParams:[]},u=0;const d=async()=>{let x=!1;const v=N=>{Object.defineProperty(N,"signal",{enumerable:!0,get:()=>(e.signal.aborted?x=!0:e.signal.addEventListener("abort",()=>{x=!0}),e.signal)})},E=bw(e.options,e.fetchOptions),T=async(N,R,L)=>{if(x)return Promise.reject();if(R==null&&N.pages.length)return Promise.resolve(N);const A=(()=>{const _={client:e.client,queryKey:e.queryKey,pageParam:R,direction:L?"backward":"forward",meta:e.options.meta};return v(_),_})(),w=await E(A),{maxPages:k}=e.options,j=L?T4:_4;return{pages:j(N.pages,w,k),pageParams:j(N.pageParams,R,k)}};if(s&&i.length){const N=s==="backward",R=N?M4:uy,L={pages:i,pageParams:a},U=R(n,L);l=await T(L,U,N)}else{const N=r??i.length;do{const R=u===0?a[0]??n.initialPageParam:uy(n,l);if(u>0&&R==null)break;l=await T(l,R),u++}while(u<N)}return l};e.options.persister?e.fetchFn=()=>{var x,v;return(v=(x=e.options).persister)==null?void 0:v.call(x,d,{client:e.client,queryKey:e.queryKey,meta:e.options.meta,signal:e.signal},t)}:e.fetchFn=d}}}function uy(r,{pages:e,pageParams:t}){const n=e.length-1;return e.length>0?r.getNextPageParam(e[n],e,t[n],t):void 0}function M4(r,{pages:e,pageParams:t}){var n;return e.length>0?(n=r.getPreviousPageParam)==null?void 0:n.call(r,e[0],e,t[0],t):void 0}var He,mn,pn,go,yo,gn,xo,bo,Wy,D4=(Wy=class{constructor(r={}){re(this,He);re(this,mn);re(this,pn);re(this,go);re(this,yo);re(this,gn);re(this,xo);re(this,bo);K(this,He,r.queryCache||new A4),K(this,mn,r.mutationCache||new P4),K(this,pn,r.defaultOptions||{}),K(this,go,new Map),K(this,yo,new Map),K(this,gn,0)}mount(){Da(this,gn)._++,D(this,gn)===1&&(K(this,xo,Rf.subscribe(async r=>{r&&(await this.resumePausedMutations(),D(this,He).onFocus())})),K(this,bo,zl.subscribe(async r=>{r&&(await this.resumePausedMutations(),D(this,He).onOnline())})))}unmount(){var r,e;Da(this,gn)._--,D(this,gn)===0&&((r=D(this,xo))==null||r.call(this),K(this,xo,void 0),(e=D(this,bo))==null||e.call(this),K(this,bo,void 0))}isFetching(r){return D(this,He).findAll({...r,fetchStatus:"fetching"}).length}isMutating(r){return D(this,mn).findAll({...r,status:"pending"}).length}getQueryData(r){var t;const e=this.defaultQueryOptions({queryKey:r});return(t=D(this,He).get(e.queryHash))==null?void 0:t.state.data}ensureQueryData(r){const e=this.defaultQueryOptions(r),t=D(this,He).build(this,e),n=t.state.data;return n===void 0?this.fetchQuery(r):(r.revalidateIfStale&&t.isStaleByTime(Sn(e.staleTime,t))&&this.prefetchQuery(e),Promise.resolve(n))}getQueriesData(r){return D(this,He).findAll(r).map(({queryKey:e,state:t})=>{const n=t.data;return[e,n]})}setQueryData(r,e,t){const n=this.defaultQueryOptions({queryKey:r}),s=D(this,He).get(n.queryHash),i=s==null?void 0:s.state.data,a=v4(e,i);if(a!==void 0)return D(this,He).build(this,n).setData(a,{...t,manual:!0})}setQueriesData(r,e,t){return nt.batch(()=>D(this,He).findAll(r).map(({queryKey:n})=>[n,this.setQueryData(n,e,t)]))}getQueryState(r){var t;const e=this.defaultQueryOptions({queryKey:r});return(t=D(this,He).get(e.queryHash))==null?void 0:t.state}removeQueries(r){const e=D(this,He);nt.batch(()=>{e.findAll(r).forEach(t=>{e.remove(t)})})}resetQueries(r,e){const t=D(this,He);return nt.batch(()=>(t.findAll(r).forEach(n=>{n.reset()}),this.refetchQueries({type:"active",...r},e)))}cancelQueries(r,e={}){const t={revert:!0,...e},n=nt.batch(()=>D(this,He).findAll(r).map(s=>s.cancel(t)));return Promise.all(n).then(It).catch(It)}invalidateQueries(r,e={}){return nt.batch(()=>(D(this,He).findAll(r).forEach(t=>{t.invalidate()}),(r==null?void 0:r.refetchType)==="none"?Promise.resolve():this.refetchQueries({...r,type:(r==null?void 0:r.refetchType)??(r==null?void 0:r.type)??"active"},e)))}refetchQueries(r,e={}){const t={...e,cancelRefetch:e.cancelRefetch??!0},n=nt.batch(()=>D(this,He).findAll(r).filter(s=>!s.isDisabled()&&!s.isStatic()).map(s=>{let i=s.fetch(void 0,t);return t.throwOnError||(i=i.catch(It)),s.state.fetchStatus==="paused"?Promise.resolve():i}));return Promise.all(n).then(It)}fetchQuery(r){const e=this.defaultQueryOptions(r);e.retry===void 0&&(e.retry=!1);const t=D(this,He).build(this,e);return t.isStaleByTime(Sn(e.staleTime,t))?t.fetch(e):Promise.resolve(t.state.data)}prefetchQuery(r){return this.fetchQuery(r).then(It).catch(It)}fetchInfiniteQuery(r){return r.behavior=cy(r.pages),this.fetchQuery(r)}prefetchInfiniteQuery(r){return this.fetchInfiniteQuery(r).then(It).catch(It)}ensureInfiniteQueryData(r){return r.behavior=cy(r.pages),this.ensureQueryData(r)}resumePausedMutations(){return zl.isOnline()?D(this,mn).resumePausedMutations():Promise.resolve()}getQueryCache(){return D(this,He)}getMutationCache(){return D(this,mn)}getDefaultOptions(){return D(this,pn)}setDefaultOptions(r){K(this,pn,r)}setQueryDefaults(r,e){D(this,go).set(ks(r),{queryKey:r,defaultOptions:e})}getQueryDefaults(r){const e=[...D(this,go).values()],t={};return e.forEach(n=>{zi(r,n.queryKey)&&Object.assign(t,n.defaultOptions)}),t}setMutationDefaults(r,e){D(this,yo).set(ks(r),{mutationKey:r,defaultOptions:e})}getMutationDefaults(r){const e=[...D(this,yo).values()],t={};return e.forEach(n=>{zi(r,n.mutationKey)&&Object.assign(t,n.defaultOptions)}),t}defaultQueryOptions(r){if(r._defaulted)return r;const e={...D(this,pn).queries,...this.getQueryDefaults(r.queryKey),...r,_defaulted:!0};return e.queryHash||(e.queryHash=If(e.queryKey,e)),e.refetchOnReconnect===void 0&&(e.refetchOnReconnect=e.networkMode!=="always"),e.throwOnError===void 0&&(e.throwOnError=!!e.suspense),!e.networkMode&&e.persister&&(e.networkMode="offlineFirst"),e.queryFn===Af&&(e.enabled=!1),e}defaultMutationOptions(r){return r!=null&&r._defaulted?r:{...D(this,pn).mutations,...(r==null?void 0:r.mutationKey)&&this.getMutationDefaults(r.mutationKey),...r,_defaulted:!0}}clear(){D(this,He).clear(),D(this,mn).clear()}},He=new WeakMap,mn=new WeakMap,pn=new WeakMap,go=new WeakMap,yo=new WeakMap,gn=new WeakMap,xo=new WeakMap,bo=new WeakMap,Wy),At,we,Xi,kt,fs,vo,yn,xn,Ji,wo,_o,ms,ps,bn,To,Ne,wi,Dd,Od,Ld,Vd,Fd,Ud,$d,kw,Gy,O4=(Gy=class extends qo{constructor(e,t){super();re(this,Ne);re(this,At);re(this,we);re(this,Xi);re(this,kt);re(this,fs);re(this,vo);re(this,yn);re(this,xn);re(this,Ji);re(this,wo);re(this,_o);re(this,ms);re(this,ps);re(this,bn);re(this,To,new Set);this.options=t,K(this,At,e),K(this,xn,null),K(this,yn,Md()),this.options.experimental_prefetchInRender||D(this,yn).reject(new Error("experimental_prefetchInRender feature flag is not enabled")),this.bindMethods(),this.setOptions(t)}bindMethods(){this.refetch=this.refetch.bind(this)}onSubscribe(){this.listeners.size===1&&(D(this,we).addObserver(this),dy(D(this,we),this.options)?pe(this,Ne,wi).call(this):this.updateResult(),pe(this,Ne,Vd).call(this))}onUnsubscribe(){this.hasListeners()||this.destroy()}shouldFetchOnReconnect(){return Bd(D(this,we),this.options,this.options.refetchOnReconnect)}shouldFetchOnWindowFocus(){return Bd(D(this,we),this.options,this.options.refetchOnWindowFocus)}destroy(){this.listeners=new Set,pe(this,Ne,Fd).call(this),pe(this,Ne,Ud).call(this),D(this,we).removeObserver(this)}setOptions(e){const t=this.options,n=D(this,we);if(this.options=D(this,At).defaultQueryOptions(e),this.options.enabled!==void 0&&typeof this.options.enabled!="boolean"&&typeof this.options.enabled!="function"&&typeof Kt(this.options.enabled,D(this,we))!="boolean")throw new Error("Expected enabled to be a boolean or a callback that returns a boolean");pe(this,Ne,$d).call(this),D(this,we).setOptions(this.options),t._defaulted&&!Bl(this.options,t)&&D(this,At).getQueryCache().notify({type:"observerOptionsUpdated",query:D(this,we),observer:this});const s=this.hasListeners();s&&hy(D(this,we),n,this.options,t)&&pe(this,Ne,wi).call(this),this.updateResult(),s&&(D(this,we)!==n||Kt(this.options.enabled,D(this,we))!==Kt(t.enabled,D(this,we))||Sn(this.options.staleTime,D(this,we))!==Sn(t.staleTime,D(this,we)))&&pe(this,Ne,Dd).call(this);const i=pe(this,Ne,Od).call(this);s&&(D(this,we)!==n||Kt(this.options.enabled,D(this,we))!==Kt(t.enabled,D(this,we))||i!==D(this,bn))&&pe(this,Ne,Ld).call(this,i)}getOptimisticResult(e){const t=D(this,At).getQueryCache().build(D(this,At),e),n=this.createResult(t,e);return V4(this,n)&&(K(this,kt,n),K(this,vo,this.options),K(this,fs,D(this,we).state)),n}getCurrentResult(){return D(this,kt)}trackResult(e,t){return new Proxy(e,{get:(n,s)=>(this.trackProp(s),t==null||t(s),Reflect.get(n,s))})}trackProp(e){D(this,To).add(e)}getCurrentQuery(){return D(this,we)}refetch({...e}={}){return this.fetch({...e})}fetchOptimistic(e){const t=D(this,At).defaultQueryOptions(e),n=D(this,At).getQueryCache().build(D(this,At),t);return n.fetch().then(()=>this.createResult(n,t))}fetch(e){return pe(this,Ne,wi).call(this,{...e,cancelRefetch:e.cancelRefetch??!0}).then(()=>(this.updateResult(),D(this,kt)))}createResult(e,t){var k;const n=D(this,we),s=this.options,i=D(this,kt),a=D(this,fs),l=D(this,vo),d=e!==n?e.state:D(this,Xi),{state:h}=e;let p={...h},g=!1,b;if(t._optimisticResults){const j=this.hasListeners(),_=!j&&dy(e,t),M=j&&hy(e,n,t,s);(_||M)&&(p={...p,...Nw(h.data,e.options)}),t._optimisticResults==="isRestoring"&&(p.fetchStatus="idle")}let{error:C,errorUpdatedAt:x,status:v}=p;b=p.data;let E=!1;if(t.placeholderData!==void 0&&b===void 0&&v==="pending"){let j;i!=null&&i.isPlaceholderData&&t.placeholderData===(l==null?void 0:l.placeholderData)?(j=i.data,E=!0):j=typeof t.placeholderData=="function"?t.placeholderData((k=D(this,_o))==null?void 0:k.state.data,D(this,_o)):t.placeholderData,j!==void 0&&(v="success",b=Pd(i==null?void 0:i.data,j,t),g=!0)}if(t.select&&b!==void 0&&!E)if(i&&b===(a==null?void 0:a.data)&&t.select===D(this,Ji))b=D(this,wo);else try{K(this,Ji,t.select),b=t.select(b),b=Pd(i==null?void 0:i.data,b,t),K(this,wo,b),K(this,xn,null)}catch(j){K(this,xn,j)}D(this,xn)&&(C=D(this,xn),b=D(this,wo),x=Date.now(),v="error");const T=p.fetchStatus==="fetching",N=v==="pending",R=v==="error",L=N&&T,U=b!==void 0,w={status:v,fetchStatus:p.fetchStatus,isPending:N,isSuccess:v==="success",isError:R,isInitialLoading:L,isLoading:L,data:b,dataUpdatedAt:p.dataUpdatedAt,error:C,errorUpdatedAt:x,failureCount:p.fetchFailureCount,failureReason:p.fetchFailureReason,errorUpdateCount:p.errorUpdateCount,isFetched:p.dataUpdateCount>0||p.errorUpdateCount>0,isFetchedAfterMount:p.dataUpdateCount>d.dataUpdateCount||p.errorUpdateCount>d.errorUpdateCount,isFetching:T,isRefetching:T&&!N,isLoadingError:R&&!U,isPaused:p.fetchStatus==="paused",isPlaceholderData:g,isRefetchError:R&&U,isStale:Pf(e,t),refetch:this.refetch,promise:D(this,yn),isEnabled:Kt(t.enabled,e)!==!1};if(this.options.experimental_prefetchInRender){const j=I=>{w.status==="error"?I.reject(w.error):w.data!==void 0&&I.resolve(w.data)},_=()=>{const I=K(this,yn,w.promise=Md());j(I)},M=D(this,yn);switch(M.status){case"pending":e.queryHash===n.queryHash&&j(M);break;case"fulfilled":(w.status==="error"||w.data!==M.value)&&_();break;case"rejected":(w.status!=="error"||w.error!==M.reason)&&_();break}}return w}updateResult(){const e=D(this,kt),t=this.createResult(D(this,we),this.options);if(K(this,fs,D(this,we).state),K(this,vo,this.options),D(this,fs).data!==void 0&&K(this,_o,D(this,we)),Bl(t,e))return;K(this,kt,t);const n=()=>{if(!e)return!0;const{notifyOnChangeProps:s}=this.options,i=typeof s=="function"?s():s;if(i==="all"||!i&&!D(this,To).size)return!0;const a=new Set(i??D(this,To));return this.options.throwOnError&&a.add("error"),Object.keys(D(this,kt)).some(l=>{const u=l;return D(this,kt)[u]!==e[u]&&a.has(u)})};pe(this,Ne,kw).call(this,{listeners:n()})}onQueryUpdate(){this.updateResult(),this.hasListeners()&&pe(this,Ne,Vd).call(this)}},At=new WeakMap,we=new WeakMap,Xi=new WeakMap,kt=new WeakMap,fs=new WeakMap,vo=new WeakMap,yn=new WeakMap,xn=new WeakMap,Ji=new WeakMap,wo=new WeakMap,_o=new WeakMap,ms=new WeakMap,ps=new WeakMap,bn=new WeakMap,To=new WeakMap,Ne=new WeakSet,wi=function(e){pe(this,Ne,$d).call(this);let t=D(this,we).fetch(this.options,e);return e!=null&&e.throwOnError||(t=t.catch(It)),t},Dd=function(){pe(this,Ne,Fd).call(this);const e=Sn(this.options.staleTime,D(this,we));if(Cs||D(this,kt).isStale||!Ad(e))return;const n=yw(D(this,kt).dataUpdatedAt,e)+1;K(this,ms,setTimeout(()=>{D(this,kt).isStale||this.updateResult()},n))},Od=function(){return(typeof this.options.refetchInterval=="function"?this.options.refetchInterval(D(this,we)):this.options.refetchInterval)??!1},Ld=function(e){pe(this,Ne,Ud).call(this),K(this,bn,e),!(Cs||Kt(this.options.enabled,D(this,we))===!1||!Ad(D(this,bn))||D(this,bn)===0)&&K(this,ps,setInterval(()=>{(this.options.refetchIntervalInBackground||Rf.isFocused())&&pe(this,Ne,wi).call(this)},D(this,bn)))},Vd=function(){pe(this,Ne,Dd).call(this),pe(this,Ne,Ld).call(this,pe(this,Ne,Od).call(this))},Fd=function(){D(this,ms)&&(clearTimeout(D(this,ms)),K(this,ms,void 0))},Ud=function(){D(this,ps)&&(clearInterval(D(this,ps)),K(this,ps,void 0))},$d=function(){const e=D(this,At).getQueryCache().build(D(this,At),this.options);if(e===D(this,we))return;const t=D(this,we);K(this,we,e),K(this,Xi,e.state),this.hasListeners()&&(t==null||t.removeObserver(this),e.addObserver(this))},kw=function(e){nt.batch(()=>{e.listeners&&this.listeners.forEach(t=>{t(D(this,kt))}),D(this,At).getQueryCache().notify({query:D(this,we),type:"observerResultsUpdated"})})},Gy);function L4(r,e){return Kt(e.enabled,r)!==!1&&r.state.data===void 0&&!(r.state.status==="error"&&e.retryOnMount===!1)}function dy(r,e){return L4(r,e)||r.state.data!==void 0&&Bd(r,e,e.refetchOnMount)}function Bd(r,e,t){if(Kt(e.enabled,r)!==!1&&Sn(e.staleTime,r)!=="static"){const n=typeof t=="function"?t(r):t;return n==="always"||n!==!1&&Pf(r,e)}return!1}function hy(r,e,t,n){return(r!==e||Kt(n.enabled,r)===!1)&&(!t.suspense||r.state.status!=="error")&&Pf(r,t)}function Pf(r,e){return Kt(e.enabled,r)!==!1&&r.isStaleByTime(Sn(e.staleTime,r))}function V4(r,e){return!Bl(r.getCurrentResult(),e)}var vn,wn,Rt,Lr,$r,cl,zd,Ky,F4=(Ky=class extends qo{constructor(t,n){super();re(this,$r);re(this,vn);re(this,wn);re(this,Rt);re(this,Lr);K(this,vn,t),this.setOptions(n),this.bindMethods(),pe(this,$r,cl).call(this)}bindMethods(){this.mutate=this.mutate.bind(this),this.reset=this.reset.bind(this)}setOptions(t){var s;const n=this.options;this.options=D(this,vn).defaultMutationOptions(t),Bl(this.options,n)||D(this,vn).getMutationCache().notify({type:"observerOptionsUpdated",mutation:D(this,Rt),observer:this}),n!=null&&n.mutationKey&&this.options.mutationKey&&ks(n.mutationKey)!==ks(this.options.mutationKey)?this.reset():((s=D(this,Rt))==null?void 0:s.state.status)==="pending"&&D(this,Rt).setOptions(this.options)}onUnsubscribe(){var t;this.hasListeners()||(t=D(this,Rt))==null||t.removeObserver(this)}onMutationUpdate(t){pe(this,$r,cl).call(this),pe(this,$r,zd).call(this,t)}getCurrentResult(){return D(this,wn)}reset(){var t;(t=D(this,Rt))==null||t.removeObserver(this),K(this,Rt,void 0),pe(this,$r,cl).call(this),pe(this,$r,zd).call(this)}mutate(t,n){var s;return K(this,Lr,n),(s=D(this,Rt))==null||s.removeObserver(this),K(this,Rt,D(this,vn).getMutationCache().build(D(this,vn),this.options)),D(this,Rt).addObserver(this),D(this,Rt).execute(t)}},vn=new WeakMap,wn=new WeakMap,Rt=new WeakMap,Lr=new WeakMap,$r=new WeakSet,cl=function(){var n;const t=((n=D(this,Rt))==null?void 0:n.state)??Cw();K(this,wn,{...t,isPending:t.status==="pending",isSuccess:t.status==="success",isError:t.status==="error",isIdle:t.status==="idle",mutate:this.mutate,reset:this.reset})},zd=function(t){nt.batch(()=>{var n,s,i,a,l,u,d,h;if(D(this,Lr)&&this.hasListeners()){const p=D(this,wn).variables,g=D(this,wn).context;(t==null?void 0:t.type)==="success"?((s=(n=D(this,Lr)).onSuccess)==null||s.call(n,t.data,p,g),(a=(i=D(this,Lr)).onSettled)==null||a.call(i,t.data,null,p,g)):(t==null?void 0:t.type)==="error"&&((u=(l=D(this,Lr)).onError)==null||u.call(l,t.error,p,g),(h=(d=D(this,Lr)).onSettled)==null||h.call(d,void 0,t.error,p,g))}this.listeners.forEach(p=>{p(D(this,wn))})})},Ky),Sw=m.createContext(void 0),Rc=r=>{const e=m.useContext(Sw);if(!e)throw new Error("No QueryClient set, use QueryClientProvider to set one");return e},U4=({client:r,children:e})=>(m.useEffect(()=>(r.mount(),()=>{r.unmount()}),[r]),o.jsx(Sw.Provider,{value:r,children:e})),jw=m.createContext(!1),$4=()=>m.useContext(jw);jw.Provider;function B4(){let r=!1;return{clearReset:()=>{r=!1},reset:()=>{r=!0},isReset:()=>r}}var z4=m.createContext(B4()),q4=()=>m.useContext(z4),H4=(r,e)=>{(r.suspense||r.throwOnError||r.experimental_prefetchInRender)&&(e.isReset()||(r.retryOnMount=!1))},W4=r=>{m.useEffect(()=>{r.clearReset()},[r])},G4=({result:r,errorResetBoundary:e,throwOnError:t,query:n,suspense:s})=>r.isError&&!e.isReset()&&!r.isFetching&&n&&(s&&r.data===void 0||vw(t,[r.error,n])),K4=r=>{if(r.suspense){const e=n=>n==="static"?n:Math.max(n??1e3,1e3),t=r.staleTime;r.staleTime=typeof t=="function"?(...n)=>e(t(...n)):e(t),typeof r.gcTime=="number"&&(r.gcTime=Math.max(r.gcTime,1e3))}},Q4=(r,e)=>r.isLoading&&r.isFetching&&!e,Y4=(r,e)=>(r==null?void 0:r.suspense)&&e.isPending,fy=(r,e,t)=>e.fetchOptimistic(r).catch(()=>{t.clearReset()});function X4(r,e,t){var p,g,b,C,x;const n=$4(),s=q4(),i=Rc(),a=i.defaultQueryOptions(r);(g=(p=i.getDefaultOptions().queries)==null?void 0:p._experimental_beforeQuery)==null||g.call(p,a),a._optimisticResults=n?"isRestoring":"optimistic",K4(a),H4(a,s),W4(s);const l=!i.getQueryCache().get(a.queryHash),[u]=m.useState(()=>new e(i,a)),d=u.getOptimisticResult(a),h=!n&&r.subscribed!==!1;if(m.useSyncExternalStore(m.useCallback(v=>{const E=h?u.subscribe(nt.batchCalls(v)):It;return u.updateResult(),E},[u,h]),()=>u.getCurrentResult(),()=>u.getCurrentResult()),m.useEffect(()=>{u.setOptions(a)},[a,u]),Y4(a,d))throw fy(a,u,s);if(G4({result:d,errorResetBoundary:s,throwOnError:a.throwOnError,query:i.getQueryCache().get(a.queryHash),suspense:a.suspense}))throw d.error;if((C=(b=i.getDefaultOptions().queries)==null?void 0:b._experimental_afterQuery)==null||C.call(b,a,d),a.experimental_prefetchInRender&&!Cs&&Q4(d,n)){const v=l?fy(a,u,s):(x=i.getQueryCache().get(a.queryHash))==null?void 0:x.promise;v==null||v.catch(It).finally(()=>{u.updateResult()})}return a.notifyOnChangeProps?d:u.trackResult(d)}function Pi(r,e){return X4(r,O4)}function Gs(r,e){const t=Rc(),[n]=m.useState(()=>new F4(t,r));m.useEffect(()=>{n.setOptions(r)},[n,r]);const s=m.useSyncExternalStore(m.useCallback(a=>n.subscribe(nt.batchCalls(a)),[n]),()=>n.getCurrentResult(),()=>n.getCurrentResult()),i=m.useCallback((a,l)=>{n.mutate(a,l).catch(It)},[n]);if(s.error&&vw(n.options.throwOnError,[s.error]))throw s.error;return{...s,mutate:i,mutateAsync:s.mutate}}const Iw=r=>ow(Dr,r),qi=async(r,e,t)=>{const n=Iw(r);try{n.start(),t&&Object.entries(t).forEach(([i,a])=>{try{n.setAttribute&&n.setAttribute(i,a.toString())}catch{console.debug("setAttribute not available for trace:",i)}});const s=await e();try{n.addMetric&&n.addMetric("success",1)}catch{console.debug("addMetric not available for trace")}return s}catch(s){try{n.addMetric&&n.addMetric("error",1),n.setAttribute&&n.setAttribute("error_message",s instanceof Error?s.message:"Unknown error")}catch{console.debug("Metrics not available for trace")}throw s}finally{n.stop()}},Aw=r=>{const e=Iw(`page_load_${r}`);e.start(),document.readyState==="loading"?document.addEventListener("DOMContentLoaded",()=>{e.stop()}):e.stop()},J4=()=>{Aw("app_initialization"),console.log("Firebase Performance Monitoring initialized")};async function Rw(r){if(!r.ok){const e=await r.text()||r.statusText;throw new Error(`${r.status}: ${e}`)}}async function Pw(r,e,t){return qi(`api_request_${r.toLowerCase()}`,async()=>{const n=await fetch(e,{method:r,headers:t?{"Content-Type":"application/json"}:{},body:t?JSON.stringify(t):void 0,credentials:"include"});return await Rw(n),n},{method:r.length,url_length:e.length,has_data:t?1:0})}const Z4=({on401:r})=>async({queryKey:e})=>qi(`query_function_${e[0]}`,async()=>{const t=await fetch(e[0],{credentials:"include"});r==="returnNull"&&t.status,await Rw(t);const n=t.headers.get("content-type");if(!n||!n.includes("application/json"))return console.log("Non-JSON response detected, skipping parse"),null;const s=await t.text();if(!s||s.trim()===""||s==="undefined")return console.log("Empty or undefined response, returning null"),null;try{return JSON.parse(s)}catch(i){return console.error("JSON parse error for query:",e[0],"Error:",i,"Response text:",s),null}},{query_key_length:e.length,unauthorized_behavior:0}),eM=new D4({defaultOptions:{queries:{queryFn:Z4({on401:"throw"}),refetchInterval:!1,refetchOnWindowFocus:!1,staleTime:1/0,retry:!1},mutations:{retry:!1}}}),tM=3,rM=5e3;let Fu=0;function nM(){return Fu=(Fu+1)%Number.MAX_SAFE_INTEGER,Fu.toString()}const Uu=new Map,my=r=>{if(Uu.has(r))return;const e=setTimeout(()=>{Uu.delete(r),Mi({type:"REMOVE_TOAST",toastId:r})},rM);Uu.set(r,e)},sM=(r,e)=>{switch(e.type){case"ADD_TOAST":return{...r,toasts:[e.toast,...r.toasts].slice(0,tM)};case"UPDATE_TOAST":return{...r,toasts:r.toasts.map(t=>t.id===e.toast.id?{...t,...e.toast}:t)};case"DISMISS_TOAST":{const{toastId:t}=e;return t?my(t):r.toasts.forEach(n=>{my(n.id)}),{...r,toasts:r.toasts.map(n=>n.id===t||t===void 0?{...n,open:!1}:n)}}case"REMOVE_TOAST":return e.toastId===void 0?{...r,toasts:[]}:{...r,toasts:r.toasts.filter(t=>t.id!==e.toastId)}}},ul=[];let dl={toasts:[]};function Mi(r){dl=sM(dl,r),ul.forEach(e=>{e(dl)})}function ma({...r}){const e=nM(),t=s=>Mi({type:"UPDATE_TOAST",toast:{...s,id:e}}),n=()=>Mi({type:"DISMISS_TOAST",toastId:e});return Mi({type:"ADD_TOAST",toast:{...r,id:e,open:!0,onOpenChange:s=>{s||n()}}}),{id:e,dismiss:n,update:t}}function oM({title:r,description:e,...t}){return ma({title:r,description:e,variant:"default",...t})}function iM({title:r,description:e,...t}){return ma({title:r,description:e,variant:"error",...t})}function aM({title:r,description:e,...t}){return ma({title:r,description:e,variant:"default",...t})}function lM({title:r,description:e,...t}){return ma({title:r,description:e,variant:"default",...t})}function Gr(){const[r,e]=m.useState(dl);return m.useEffect(()=>(ul.push(e),()=>{const t=ul.indexOf(e);t>-1&&ul.splice(t,1)}),[r]),{...r,toast:ma,successToast:oM,errorToast:iM,infoToast:aM,warningToast:lM,dismiss:t=>Mi({type:"DISMISS_TOAST",toastId:t})}}var cM=Object.freeze({position:"absolute",border:0,width:1,height:1,padding:0,margin:-1,overflow:"hidden",clip:"rect(0, 0, 0, 0)",whiteSpace:"nowrap",wordWrap:"normal"}),uM="VisuallyHidden",Pc=m.forwardRef((r,e)=>o.jsx(De.span,{...r,ref:e,style:{...cM,...r.style}}));Pc.displayName=uM;var dM=Pc,Mf="ToastProvider",[Df,hM,fM]=eE("Toast"),[Mw,e6]=Bn("Toast",[fM]),[mM,Mc]=Mw(Mf),Dw=r=>{const{__scopeToast:e,label:t="Notification",duration:n=5e3,swipeDirection:s="right",swipeThreshold:i=50,children:a}=r,[l,u]=m.useState(null),[d,h]=m.useState(0),p=m.useRef(!1),g=m.useRef(!1);return t.trim()||console.error(`Invalid prop \`label\` supplied to \`${Mf}\`. Expected non-empty \`string\`.`),o.jsx(Df.Provider,{scope:e,children:o.jsx(mM,{scope:e,label:t,duration:n,swipeDirection:s,swipeThreshold:i,toastCount:d,viewport:l,onViewportChange:u,onToastAdd:m.useCallback(()=>h(b=>b+1),[]),onToastRemove:m.useCallback(()=>h(b=>b-1),[]),isFocusedToastEscapeKeyDownRef:p,isClosePausedRef:g,children:a})})};Dw.displayName=Mf;var Ow="ToastViewport",pM=["F8"],qd="toast.viewportPause",Hd="toast.viewportResume",Lw=m.forwardRef((r,e)=>{const{__scopeToast:t,hotkey:n=pM,label:s="Notifications ({hotkey})",...i}=r,a=Mc(Ow,t),l=hM(t),u=m.useRef(null),d=m.useRef(null),h=m.useRef(null),p=m.useRef(null),g=at(e,p,a.onViewportChange),b=n.join("+").replace(/Key/g,"").replace(/Digit/g,""),C=a.toastCount>0;m.useEffect(()=>{const v=E=>{var N;n.length!==0&&n.every(R=>E[R]||E.code===R)&&((N=p.current)==null||N.focus())};return document.addEventListener("keydown",v),()=>document.removeEventListener("keydown",v)},[n]),m.useEffect(()=>{const v=u.current,E=p.current;if(C&&v&&E){const T=()=>{if(!a.isClosePausedRef.current){const U=new CustomEvent(qd);E.dispatchEvent(U),a.isClosePausedRef.current=!0}},N=()=>{if(a.isClosePausedRef.current){const U=new CustomEvent(Hd);E.dispatchEvent(U),a.isClosePausedRef.current=!1}},R=U=>{!v.contains(U.relatedTarget)&&N()},L=()=>{v.contains(document.activeElement)||N()};return v.addEventListener("focusin",T),v.addEventListener("focusout",R),v.addEventListener("pointermove",T),v.addEventListener("pointerleave",L),window.addEventListener("blur",T),window.addEventListener("focus",N),()=>{v.removeEventListener("focusin",T),v.removeEventListener("focusout",R),v.removeEventListener("pointermove",T),v.removeEventListener("pointerleave",L),window.removeEventListener("blur",T),window.removeEventListener("focus",N)}}},[C,a.isClosePausedRef]);const x=m.useCallback(({tabbingDirection:v})=>{const T=l().map(N=>{const R=N.ref.current,L=[R,...SM(R)];return v==="forwards"?L:L.reverse()});return(v==="forwards"?T.reverse():T).flat()},[l]);return m.useEffect(()=>{const v=p.current;if(v){const E=T=>{var L,U,A;const N=T.altKey||T.ctrlKey||T.metaKey;if(T.key==="Tab"&&!N){const w=document.activeElement,k=T.shiftKey;if(T.target===v&&k){(L=d.current)==null||L.focus();return}const M=x({tabbingDirection:k?"backwards":"forwards"}),I=M.findIndex(X=>X===w);$u(M.slice(I+1))?T.preventDefault():k?(U=d.current)==null||U.focus():(A=h.current)==null||A.focus()}};return v.addEventListener("keydown",E),()=>v.removeEventListener("keydown",E)}},[l,x]),o.jsxs(tE,{ref:u,role:"region","aria-label":s.replace("{hotkey}",b),tabIndex:-1,style:{pointerEvents:C?void 0:"none"},children:[C&&o.jsx(Wd,{ref:d,onFocusFromOutsideViewport:()=>{const v=x({tabbingDirection:"forwards"});$u(v)}}),o.jsx(Df.Slot,{scope:t,children:o.jsx(De.ol,{tabIndex:-1,...i,ref:g})}),C&&o.jsx(Wd,{ref:h,onFocusFromOutsideViewport:()=>{const v=x({tabbingDirection:"backwards"});$u(v)}})]})});Lw.displayName=Ow;var Vw="ToastFocusProxy",Wd=m.forwardRef((r,e)=>{const{__scopeToast:t,onFocusFromOutsideViewport:n,...s}=r,i=Mc(Vw,t);return o.jsx(Pc,{"aria-hidden":!0,tabIndex:0,...s,ref:e,style:{position:"fixed"},onFocus:a=>{var d;const l=a.relatedTarget;!((d=i.viewport)!=null&&d.contains(l))&&n()}})});Wd.displayName=Vw;var pa="Toast",gM="toast.swipeStart",yM="toast.swipeMove",xM="toast.swipeCancel",bM="toast.swipeEnd",Fw=m.forwardRef((r,e)=>{const{forceMount:t,open:n,defaultOpen:s,onOpenChange:i,...a}=r,[l,u]=Do({prop:n,defaultProp:s??!0,onChange:i,caller:pa});return o.jsx(Sr,{present:t||l,children:o.jsx(_M,{open:l,...a,ref:e,onClose:()=>u(!1),onPause:ir(r.onPause),onResume:ir(r.onResume),onSwipeStart:_e(r.onSwipeStart,d=>{d.currentTarget.setAttribute("data-swipe","start")}),onSwipeMove:_e(r.onSwipeMove,d=>{const{x:h,y:p}=d.detail.delta;d.currentTarget.setAttribute("data-swipe","move"),d.currentTarget.style.setProperty("--radix-toast-swipe-move-x",`${h}px`),d.currentTarget.style.setProperty("--radix-toast-swipe-move-y",`${p}px`)}),onSwipeCancel:_e(r.onSwipeCancel,d=>{d.currentTarget.setAttribute("data-swipe","cancel"),d.currentTarget.style.removeProperty("--radix-toast-swipe-move-x"),d.currentTarget.style.removeProperty("--radix-toast-swipe-move-y"),d.currentTarget.style.removeProperty("--radix-toast-swipe-end-x"),d.currentTarget.style.removeProperty("--radix-toast-swipe-end-y")}),onSwipeEnd:_e(r.onSwipeEnd,d=>{const{x:h,y:p}=d.detail.delta;d.currentTarget.setAttribute("data-swipe","end"),d.currentTarget.style.removeProperty("--radix-toast-swipe-move-x"),d.currentTarget.style.removeProperty("--radix-toast-swipe-move-y"),d.currentTarget.style.setProperty("--radix-toast-swipe-end-x",`${h}px`),d.currentTarget.style.setProperty("--radix-toast-swipe-end-y",`${p}px`),u(!1)})})})});Fw.displayName=pa;var[vM,wM]=Mw(pa,{onClose(){}}),_M=m.forwardRef((r,e)=>{const{__scopeToast:t,type:n="foreground",duration:s,open:i,onClose:a,onEscapeKeyDown:l,onPause:u,onResume:d,onSwipeStart:h,onSwipeMove:p,onSwipeCancel:g,onSwipeEnd:b,...C}=r,x=Mc(pa,t),[v,E]=m.useState(null),T=at(e,X=>E(X)),N=m.useRef(null),R=m.useRef(null),L=s||x.duration,U=m.useRef(0),A=m.useRef(L),w=m.useRef(0),{onToastAdd:k,onToastRemove:j}=x,_=ir(()=>{var se;(v==null?void 0:v.contains(document.activeElement))&&((se=x.viewport)==null||se.focus()),a()}),M=m.useCallback(X=>{!X||X===1/0||(window.clearTimeout(w.current),U.current=new Date().getTime(),w.current=window.setTimeout(_,X))},[_]);m.useEffect(()=>{const X=x.viewport;if(X){const se=()=>{M(A.current),d==null||d()},le=()=>{const Z=new Date().getTime()-U.current;A.current=A.current-Z,window.clearTimeout(w.current),u==null||u()};return X.addEventListener(qd,le),X.addEventListener(Hd,se),()=>{X.removeEventListener(qd,le),X.removeEventListener(Hd,se)}}},[x.viewport,L,u,d,M]),m.useEffect(()=>{i&&!x.isClosePausedRef.current&&M(L)},[i,L,x.isClosePausedRef,M]),m.useEffect(()=>(k(),()=>j()),[k,j]);const I=m.useMemo(()=>v?Ww(v):null,[v]);return x.viewport?o.jsxs(o.Fragment,{children:[I&&o.jsx(TM,{__scopeToast:t,role:"status","aria-live":n==="foreground"?"assertive":"polite","aria-atomic":!0,children:I}),o.jsx(vM,{scope:t,onClose:_,children:rE.createPortal(o.jsx(Df.ItemSlot,{scope:t,children:o.jsx(nE,{asChild:!0,onEscapeKeyDown:_e(l,()=>{x.isFocusedToastEscapeKeyDownRef.current||_(),x.isFocusedToastEscapeKeyDownRef.current=!1}),children:o.jsx(De.li,{role:"status","aria-live":"off","aria-atomic":!0,tabIndex:0,"data-state":i?"open":"closed","data-swipe-direction":x.swipeDirection,...C,ref:T,style:{userSelect:"none",touchAction:"none",...r.style},onKeyDown:_e(r.onKeyDown,X=>{X.key==="Escape"&&(l==null||l(X.nativeEvent),X.nativeEvent.defaultPrevented||(x.isFocusedToastEscapeKeyDownRef.current=!0,_()))}),onPointerDown:_e(r.onPointerDown,X=>{X.button===0&&(N.current={x:X.clientX,y:X.clientY})}),onPointerMove:_e(r.onPointerMove,X=>{if(!N.current)return;const se=X.clientX-N.current.x,le=X.clientY-N.current.y,Z=!!R.current,P=["left","right"].includes(x.swipeDirection),z=["left","up"].includes(x.swipeDirection)?Math.min:Math.max,Y=P?z(0,se):0,xe=P?0:z(0,le),$e=X.pointerType==="touch"?10:2,q={x:Y,y:xe},he={originalEvent:X,delta:q};Z?(R.current=q,Qa(yM,p,he,{discrete:!1})):py(q,x.swipeDirection,$e)?(R.current=q,Qa(gM,h,he,{discrete:!1}),X.target.setPointerCapture(X.pointerId)):(Math.abs(se)>$e||Math.abs(le)>$e)&&(N.current=null)}),onPointerUp:_e(r.onPointerUp,X=>{const se=R.current,le=X.target;if(le.hasPointerCapture(X.pointerId)&&le.releasePointerCapture(X.pointerId),R.current=null,N.current=null,se){const Z=X.currentTarget,P={originalEvent:X,delta:se};py(se,x.swipeDirection,x.swipeThreshold)?Qa(bM,b,P,{discrete:!0}):Qa(xM,g,P,{discrete:!0}),Z.addEventListener("click",z=>z.preventDefault(),{once:!0})}})})})}),x.viewport)})]}):null}),TM=r=>{const{__scopeToast:e,children:t,...n}=r,s=Mc(pa,e),[i,a]=m.useState(!1),[l,u]=m.useState(!1);return CM(()=>a(!0)),m.useEffect(()=>{const d=window.setTimeout(()=>u(!0),1e3);return()=>window.clearTimeout(d)},[]),l?null:o.jsx(Qy,{asChild:!0,children:o.jsx(Pc,{...n,children:i&&o.jsxs(o.Fragment,{children:[s.label," ",t]})})})},EM="ToastTitle",Uw=m.forwardRef((r,e)=>{const{__scopeToast:t,...n}=r;return o.jsx(De.div,{...n,ref:e})});Uw.displayName=EM;var NM="ToastDescription",$w=m.forwardRef((r,e)=>{const{__scopeToast:t,...n}=r;return o.jsx(De.div,{...n,ref:e})});$w.displayName=NM;var Bw="ToastAction",zw=m.forwardRef((r,e)=>{const{altText:t,...n}=r;return t.trim()?o.jsx(Hw,{altText:t,asChild:!0,children:o.jsx(Of,{...n,ref:e})}):(console.error(`Invalid prop \`altText\` supplied to \`${Bw}\`. Expected non-empty \`string\`.`),null)});zw.displayName=Bw;var qw="ToastClose",Of=m.forwardRef((r,e)=>{const{__scopeToast:t,...n}=r,s=wM(qw,t);return o.jsx(Hw,{asChild:!0,children:o.jsx(De.button,{type:"button",...n,ref:e,onClick:_e(r.onClick,s.onClose)})})});Of.displayName=qw;var Hw=m.forwardRef((r,e)=>{const{__scopeToast:t,altText:n,...s}=r;return o.jsx(De.div,{"data-radix-toast-announce-exclude":"","data-radix-toast-announce-alt":n||void 0,...s,ref:e})});function Ww(r){const e=[];return Array.from(r.childNodes).forEach(n=>{if(n.nodeType===n.TEXT_NODE&&n.textContent&&e.push(n.textContent),kM(n)){const s=n.ariaHidden||n.hidden||n.style.display==="none",i=n.dataset.radixToastAnnounceExclude==="";if(!s)if(i){const a=n.dataset.radixToastAnnounceAlt;a&&e.push(a)}else e.push(...Ww(n))}}),e}function Qa(r,e,t,{discrete:n}){const s=t.originalEvent.currentTarget,i=new CustomEvent(r,{bubbles:!0,cancelable:!0,detail:t});e&&s.addEventListener(r,e,{once:!0}),n?sE(s,i):s.dispatchEvent(i)}var py=(r,e,t=0)=>{const n=Math.abs(r.x),s=Math.abs(r.y),i=n>s;return e==="left"||e==="right"?i&&n>t:!i&&s>t};function CM(r=()=>{}){const e=ir(r);Yy(()=>{let t=0,n=0;return t=window.requestAnimationFrame(()=>n=window.requestAnimationFrame(e)),()=>{window.cancelAnimationFrame(t),window.cancelAnimationFrame(n)}},[e])}function kM(r){return r.nodeType===r.ELEMENT_NODE}function SM(r){const e=[],t=document.createTreeWalker(r,NodeFilter.SHOW_ELEMENT,{acceptNode:n=>{const s=n.tagName==="INPUT"&&n.type==="hidden";return n.disabled||n.hidden||s?NodeFilter.FILTER_SKIP:n.tabIndex>=0?NodeFilter.FILTER_ACCEPT:NodeFilter.FILTER_SKIP}});for(;t.nextNode();)e.push(t.currentNode);return e}function $u(r){const e=document.activeElement;return r.some(t=>t===e?!0:(t.focus(),document.activeElement!==e))}var jM=Dw,Gw=Lw,Kw=Fw,Qw=Uw,Yw=$w,Xw=zw,Jw=Of;function Zw(r){var e,t,n="";if(typeof r=="string"||typeof r=="number")n+=r;else if(typeof r=="object")if(Array.isArray(r)){var s=r.length;for(e=0;e<s;e++)r[e]&&(t=Zw(r[e]))&&(n&&(n+=" "),n+=t)}else for(t in r)r[t]&&(n&&(n+=" "),n+=t);return n}function e_(){for(var r,e,t=0,n="",s=arguments.length;t<s;t++)(r=arguments[t])&&(e=Zw(r))&&(n&&(n+=" "),n+=e);return n}const gy=r=>typeof r=="boolean"?`${r}`:r===0?"0":r,yy=e_,Dc=(r,e)=>t=>{var n;if((e==null?void 0:e.variants)==null)return yy(r,t==null?void 0:t.class,t==null?void 0:t.className);const{variants:s,defaultVariants:i}=e,a=Object.keys(s).map(d=>{const h=t==null?void 0:t[d],p=i==null?void 0:i[d];if(h===null)return null;const g=gy(h)||gy(p);return s[d][g]}),l=t&&Object.entries(t).reduce((d,h)=>{let[p,g]=h;return g===void 0||(d[p]=g),d},{}),u=e==null||(n=e.compoundVariants)===null||n===void 0?void 0:n.reduce((d,h)=>{let{class:p,className:g,...b}=h;return Object.entries(b).every(C=>{let[x,v]=C;return Array.isArray(v)?v.includes({...i,...l}[x]):{...i,...l}[x]===v})?[...d,p,g]:d},[]);return yy(r,a,u,t==null?void 0:t.class,t==null?void 0:t.className)};/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const IM=r=>r.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase(),t_=(...r)=>r.filter((e,t,n)=>!!e&&n.indexOf(e)===t).join(" ");/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */var AM={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const RM=m.forwardRef(({color:r="currentColor",size:e=24,strokeWidth:t=2,absoluteStrokeWidth:n,className:s="",children:i,iconNode:a,...l},u)=>m.createElement("svg",{ref:u,...AM,width:e,height:e,stroke:r,strokeWidth:n?Number(t)*24/Number(e):t,className:t_("lucide",s),...l},[...a.map(([d,h])=>m.createElement(d,h)),...Array.isArray(i)?i:[i]]));/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const W=(r,e)=>{const t=m.forwardRef(({className:n,...s},i)=>m.createElement(RM,{ref:i,iconNode:e,className:t_(`lucide-${IM(r)}`,n),...s}));return t.displayName=`${r}`,t};/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Gd=W("Activity",[["path",{d:"M22 12h-2.48a2 2 0 0 0-1.93 1.46l-2.35 8.36a.25.25 0 0 1-.48 0L9.24 2.18a.25.25 0 0 0-.48 0l-2.35 8.36A2 2 0 0 1 4.49 12H2",key:"169zse"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const PM=W("Archive",[["rect",{width:"20",height:"5",x:"2",y:"3",rx:"1",key:"1wp1u1"}],["path",{d:"M4 8v11a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V8",key:"1s80jp"}],["path",{d:"M10 12h4",key:"a56b0p"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ga=W("ArrowLeft",[["path",{d:"m12 19-7-7 7-7",key:"1l729n"}],["path",{d:"M19 12H5",key:"x3x0zl"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const is=W("Calendar",[["path",{d:"M8 2v4",key:"1cmpym"}],["path",{d:"M16 2v4",key:"4m81vk"}],["rect",{width:"18",height:"18",x:"3",y:"4",rx:"2",key:"1hopcy"}],["path",{d:"M3 10h18",key:"8toen8"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const r_=W("Camera",[["path",{d:"M14.5 4h-5L7 7H4a2 2 0 0 0-2 2v9a2 2 0 0 0 2 2h16a2 2 0 0 0 2-2V9a2 2 0 0 0-2-2h-3l-2.5-3z",key:"1tc9qg"}],["circle",{cx:"12",cy:"13",r:"3",key:"1vg3eu"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const MM=W("ChartColumn",[["path",{d:"M3 3v16a2 2 0 0 0 2 2h16",key:"c24i48"}],["path",{d:"M18 17V9",key:"2bz60n"}],["path",{d:"M13 17V5",key:"1frdt8"}],["path",{d:"M8 17v-3",key:"17ska0"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ya=W("Check",[["path",{d:"M20 6 9 17l-5-5",key:"1gmf2c"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ql=W("ChevronDown",[["path",{d:"m6 9 6 6 6-6",key:"qrunsl"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const DM=W("ChevronLeft",[["path",{d:"m15 18-6-6 6-6",key:"1wnfg3"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const n_=W("ChevronRight",[["path",{d:"m9 18 6-6-6-6",key:"mthhwq"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const s_=W("CircleAlert",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["line",{x1:"12",x2:"12",y1:"8",y2:"12",key:"1pkeuh"}],["line",{x1:"12",x2:"12.01",y1:"16",y2:"16",key:"4dfq90"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ks=W("CircleCheckBig",[["path",{d:"M21.801 10A10 10 0 1 1 17 3.335",key:"yps3ct"}],["path",{d:"m9 11 3 3L22 4",key:"1pflzl"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const OM=W("CircleX",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"m15 9-6 6",key:"1uzhvr"}],["path",{d:"m9 9 6 6",key:"z0biqf"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const LM=W("Circle",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const o_=W("Clock",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["polyline",{points:"12 6 12 12 16 14",key:"68esgv"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const VM=W("Copy",[["rect",{width:"14",height:"14",x:"8",y:"8",rx:"2",ry:"2",key:"17jyea"}],["path",{d:"M4 16c-1.1 0-2-.9-2-2V4c0-1.1.9-2 2-2h10c1.1 0 2 .9 2 2",key:"zix9uf"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Kd=W("CreditCard",[["rect",{width:"20",height:"14",x:"2",y:"5",rx:"2",key:"ynyp8z"}],["line",{x1:"2",x2:"22",y1:"10",y2:"10",key:"1b3vmo"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const hr=W("Crown",[["path",{d:"M11.562 3.266a.5.5 0 0 1 .876 0L15.39 8.87a1 1 0 0 0 1.516.294L21.183 5.5a.5.5 0 0 1 .798.519l-2.834 10.246a1 1 0 0 1-.956.734H5.81a1 1 0 0 1-.957-.734L2.02 6.02a.5.5 0 0 1 .798-.519l4.276 3.664a1 1 0 0 0 1.516-.294z",key:"1vdc57"}],["path",{d:"M5 21h14",key:"11awu3"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const FM=W("Database",[["ellipse",{cx:"12",cy:"5",rx:"9",ry:"3",key:"msslwz"}],["path",{d:"M3 5V19A9 3 0 0 0 21 19V5",key:"1wlel7"}],["path",{d:"M3 12A9 3 0 0 0 21 12",key:"mv7ke4"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const UM=W("Download",[["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}],["polyline",{points:"7 10 12 15 17 10",key:"2ggqvy"}],["line",{x1:"12",x2:"12",y1:"15",y2:"3",key:"1vk2je"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const $M=W("EyeOff",[["path",{d:"M10.733 5.076a10.744 10.744 0 0 1 11.205 6.575 1 1 0 0 1 0 .696 10.747 10.747 0 0 1-1.444 2.49",key:"ct8e1f"}],["path",{d:"M14.084 14.158a3 3 0 0 1-4.242-4.242",key:"151rxh"}],["path",{d:"M17.479 17.499a10.75 10.75 0 0 1-15.417-5.151 1 1 0 0 1 0-.696 10.75 10.75 0 0 1 4.446-5.143",key:"13bj9a"}],["path",{d:"m2 2 20 20",key:"1ooewy"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const i_=W("Eye",[["path",{d:"M2.062 12.348a1 1 0 0 1 0-.696 10.75 10.75 0 0 1 19.876 0 1 1 0 0 1 0 .696 10.75 10.75 0 0 1-19.876 0",key:"1nclc0"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Qd=W("FileText",[["path",{d:"M15 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V7Z",key:"1rqfz7"}],["path",{d:"M14 2v4a2 2 0 0 0 2 2h4",key:"tnqrlb"}],["path",{d:"M10 9H8",key:"b1mrlr"}],["path",{d:"M16 13H8",key:"t4e002"}],["path",{d:"M16 17H8",key:"z1uh3a"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const BM=W("Flame",[["path",{d:"M8.5 14.5A2.5 2.5 0 0 0 11 12c0-1.38-.5-2-1-3-1.072-2.143-.224-4.054 2-6 .5 2.5 2 4.9 4 6.5 2 1.6 3 3.5 3 5.5a7 7 0 1 1-14 0c0-1.153.433-2.294 1-3a2.5 2.5 0 0 0 2.5 2.5z",key:"96xj49"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const hl=W("Globe",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M12 2a14.5 14.5 0 0 0 0 20 14.5 14.5 0 0 0 0-20",key:"13o1zl"}],["path",{d:"M2 12h20",key:"9i4pu4"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const zM=W("HardDrive",[["line",{x1:"22",x2:"2",y1:"12",y2:"12",key:"1y58io"}],["path",{d:"M5.45 5.11 2 12v6a2 2 0 0 0 2 2h16a2 2 0 0 0 2-2v-6l-3.45-6.89A2 2 0 0 0 16.76 4H7.24a2 2 0 0 0-1.79 1.11z",key:"oot6mr"}],["line",{x1:"6",x2:"6.01",y1:"16",y2:"16",key:"sgf278"}],["line",{x1:"10",x2:"10.01",y1:"16",y2:"16",key:"1l4acy"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Qs=W("Heart",[["path",{d:"M19 14c1.49-1.46 3-3.21 3-5.5A5.5 5.5 0 0 0 16.5 3c-1.76 0-3 .5-4.5 2-1.5-1.5-2.74-2-4.5-2A5.5 5.5 0 0 0 2 8.5c0 2.3 1.5 4.05 3 5.5l7 7Z",key:"c3ymky"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const a_=W("LoaderCircle",[["path",{d:"M21 12a9 9 0 1 1-6.219-8.56",key:"13zald"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Yd=W("Lock",[["rect",{width:"18",height:"11",x:"3",y:"11",rx:"2",ry:"2",key:"1w4ew1"}],["path",{d:"M7 11V7a5 5 0 0 1 10 0v4",key:"fwvmzm"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const l_=W("LogIn",[["path",{d:"M15 3h4a2 2 0 0 1 2 2v14a2 2 0 0 1-2 2h-4",key:"u53s6r"}],["polyline",{points:"10 17 15 12 10 7",key:"1ail0h"}],["line",{x1:"15",x2:"3",y1:"12",y2:"12",key:"v6grx8"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Xd=W("LogOut",[["path",{d:"M9 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h4",key:"1uf3rs"}],["polyline",{points:"16 17 21 12 16 7",key:"1gabdz"}],["line",{x1:"21",x2:"9",y1:"12",y2:"12",key:"1uyos4"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Hl=W("Mail",[["rect",{width:"20",height:"16",x:"2",y:"4",rx:"2",key:"18n3k1"}],["path",{d:"m22 7-8.97 5.7a1.94 1.94 0 0 1-2.06 0L2 7",key:"1ocrg3"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Jd=W("MapPin",[["path",{d:"M20 10c0 4.993-5.539 10.193-7.399 11.799a1 1 0 0 1-1.202 0C9.539 20.193 4 14.993 4 10a8 8 0 0 1 16 0",key:"1r0f0z"}],["circle",{cx:"12",cy:"10",r:"3",key:"ilqhr7"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const qM=W("Maximize2",[["polyline",{points:"15 3 21 3 21 9",key:"mznyad"}],["polyline",{points:"9 21 3 21 3 15",key:"1avn1i"}],["line",{x1:"21",x2:"14",y1:"3",y2:"10",key:"ota7mn"}],["line",{x1:"3",x2:"10",y1:"21",y2:"14",key:"1atl0r"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const xy=W("Menu",[["line",{x1:"4",x2:"20",y1:"12",y2:"12",key:"1e0a9i"}],["line",{x1:"4",x2:"20",y1:"6",y2:"6",key:"1owob3"}],["line",{x1:"4",x2:"20",y1:"18",y2:"18",key:"yk5zj1"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ys=W("MessageCircle",[["path",{d:"M7.9 20A9 9 0 1 0 4 16.1L2 22Z",key:"vv11sd"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const HM=W("MicOff",[["line",{x1:"2",x2:"22",y1:"2",y2:"22",key:"a6p6uj"}],["path",{d:"M18.89 13.23A7.12 7.12 0 0 0 19 12v-2",key:"80xlxr"}],["path",{d:"M5 10v2a7 7 0 0 0 12 5",key:"p2k8kg"}],["path",{d:"M15 9.34V5a3 3 0 0 0-5.68-1.33",key:"1gzdoj"}],["path",{d:"M9 9v3a3 3 0 0 0 5.12 2.12",key:"r2i35w"}],["line",{x1:"12",x2:"12",y1:"19",y2:"22",key:"x3vr5v"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const WM=W("Minimize2",[["polyline",{points:"4 14 10 14 10 20",key:"11kfnr"}],["polyline",{points:"20 10 14 10 14 4",key:"rlmsce"}],["line",{x1:"14",x2:"21",y1:"10",y2:"3",key:"o5lafz"}],["line",{x1:"3",x2:"10",y1:"21",y2:"14",key:"1atl0r"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const GM=W("Moon",[["path",{d:"M12 3a6 6 0 0 0 9 9 9 9 0 1 1-9-9Z",key:"a7tn18"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ao=W("Music",[["path",{d:"M9 18V5l12-2v13",key:"1jmyc2"}],["circle",{cx:"6",cy:"18",r:"3",key:"fqmcym"}],["circle",{cx:"18",cy:"16",r:"3",key:"1hluhg"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const KM=W("Network",[["rect",{x:"16",y:"16",width:"6",height:"6",rx:"1",key:"4q2zg0"}],["rect",{x:"2",y:"16",width:"6",height:"6",rx:"1",key:"8cvhb9"}],["rect",{x:"9",y:"2",width:"6",height:"6",rx:"1",key:"1egb70"}],["path",{d:"M5 16v-3a1 1 0 0 1 1-1h12a1 1 0 0 1 1 1v3",key:"1jsf9p"}],["path",{d:"M12 12V8",key:"2874zd"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ui=W("Package",[["path",{d:"M11 21.73a2 2 0 0 0 2 0l7-4A2 2 0 0 0 21 16V8a2 2 0 0 0-1-1.73l-7-4a2 2 0 0 0-2 0l-7 4A2 2 0 0 0 3 8v8a2 2 0 0 0 1 1.73z",key:"1a0edw"}],["path",{d:"M12 22V12",key:"d0xqtd"}],["path",{d:"m3.3 7 7.703 4.734a2 2 0 0 0 1.994 0L20.7 7",key:"yx3hmr"}],["path",{d:"m7.5 4.27 9 5.15",key:"1c824w"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const by=W("Palette",[["circle",{cx:"13.5",cy:"6.5",r:".5",fill:"currentColor",key:"1okk4w"}],["circle",{cx:"17.5",cy:"10.5",r:".5",fill:"currentColor",key:"f64h9f"}],["circle",{cx:"8.5",cy:"7.5",r:".5",fill:"currentColor",key:"fotxhn"}],["circle",{cx:"6.5",cy:"12.5",r:".5",fill:"currentColor",key:"qy21gx"}],["path",{d:"M12 2C6.5 2 2 6.5 2 12s4.5 10 10 10c.926 0 1.648-.746 1.648-1.688 0-.437-.18-.835-.437-1.125-.29-.289-.438-.652-.438-1.125a1.64 1.64 0 0 1 1.668-1.668h1.996c3.051 0 5.555-2.503 5.555-5.554C21.965 6.012 17.461 2 12 2z",key:"12rzf8"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Zd=W("Phone",[["path",{d:"M22 16.92v3a2 2 0 0 1-2.18 2 19.79 19.79 0 0 1-8.63-3.07 19.5 19.5 0 0 1-6-6 19.79 19.79 0 0 1-3.07-8.67A2 2 0 0 1 4.11 2h3a2 2 0 0 1 2 1.72 12.84 12.84 0 0 0 .7 2.81 2 2 0 0 1-.45 2.11L8.09 9.91a16 16 0 0 0 6 6l1.27-1.27a2 2 0 0 1 2.11-.45 12.84 12.84 0 0 0 2.81.7A2 2 0 0 1 22 16.92z",key:"foiqr5"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const QM=W("Play",[["polygon",{points:"6 3 20 12 6 21 6 3",key:"1oa8hb"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const YM=W("Plus",[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"M12 5v14",key:"s699le"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Hi=W("Radio",[["path",{d:"M4.9 19.1C1 15.2 1 8.8 4.9 4.9",key:"1vaf9d"}],["path",{d:"M7.8 16.2c-2.3-2.3-2.3-6.1 0-8.5",key:"u1ii0m"}],["circle",{cx:"12",cy:"12",r:"2",key:"1c9p78"}],["path",{d:"M16.2 7.8c2.3 2.3 2.3 6.1 0 8.5",key:"1j5fej"}],["path",{d:"M19.1 4.9C23 8.8 23 15.1 19.1 19",key:"10b0cb"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const XM=W("RefreshCw",[["path",{d:"M3 12a9 9 0 0 1 9-9 9.75 9.75 0 0 1 6.74 2.74L21 8",key:"v9h5vc"}],["path",{d:"M21 3v5h-5",key:"1q7to0"}],["path",{d:"M21 12a9 9 0 0 1-9 9 9.75 9.75 0 0 1-6.74-2.74L3 16",key:"3uifl3"}],["path",{d:"M8 16H3v5",key:"1cv678"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const JM=W("RotateCcw",[["path",{d:"M3 12a9 9 0 1 0 9-9 9.75 9.75 0 0 0-6.74 2.74L3 8",key:"1357e3"}],["path",{d:"M3 3v5h5",key:"1xhq8a"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Wi=W("Send",[["path",{d:"M14.536 21.686a.5.5 0 0 0 .937-.024l6.5-19a.496.496 0 0 0-.635-.635l-19 6.5a.5.5 0 0 0-.024.937l7.93 3.18a2 2 0 0 1 1.112 1.11z",key:"1ffxy3"}],["path",{d:"m21.854 2.147-10.94 10.939",key:"12cjpa"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ZM=W("Settings",[["path",{d:"M12.22 2h-.44a2 2 0 0 0-2 2v.18a2 2 0 0 1-1 1.73l-.43.25a2 2 0 0 1-2 0l-.15-.08a2 2 0 0 0-2.73.73l-.22.38a2 2 0 0 0 .73 2.73l.15.1a2 2 0 0 1 1 1.72v.51a2 2 0 0 1-1 1.74l-.15.09a2 2 0 0 0-.73 2.73l.22.38a2 2 0 0 0 2.73.73l.15-.08a2 2 0 0 1 2 0l.43.25a2 2 0 0 1 1 1.73V20a2 2 0 0 0 2 2h.44a2 2 0 0 0 2-2v-.18a2 2 0 0 1 1-1.73l.43-.25a2 2 0 0 1 2 0l.15.08a2 2 0 0 0 2.73-.73l.22-.39a2 2 0 0 0-.73-2.73l-.15-.08a2 2 0 0 1-1-1.74v-.5a2 2 0 0 1 1-1.74l.15-.09a2 2 0 0 0 .73-2.73l-.22-.38a2 2 0 0 0-2.73-.73l-.15.08a2 2 0 0 1-2 0l-.43-.25a2 2 0 0 1-1-1.73V4a2 2 0 0 0-2-2z",key:"1qme2f"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const e5=W("Share",[["path",{d:"M4 12v8a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2v-8",key:"1b2hhj"}],["polyline",{points:"16 6 12 2 8 6",key:"m901s6"}],["line",{x1:"12",x2:"12",y1:"2",y2:"15",key:"1p0rca"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const vy=W("Shirt",[["path",{d:"M20.38 3.46 16 2a4 4 0 0 1-8 0L3.62 3.46a2 2 0 0 0-1.34 2.23l.58 3.47a1 1 0 0 0 .99.84H6v10c0 1.1.9 2 2 2h8a2 2 0 0 0 2-2V10h2.15a1 1 0 0 0 .99-.84l.58-3.47a2 2 0 0 0-1.34-2.23z",key:"1wgbhj"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Lf=W("ShoppingCart",[["circle",{cx:"8",cy:"21",r:"1",key:"jimo8o"}],["circle",{cx:"19",cy:"21",r:"1",key:"13723u"}],["path",{d:"M2.05 2.05h2l2.66 12.42a2 2 0 0 0 2 1.58h9.78a2 2 0 0 0 1.95-1.57l1.65-7.43H5.12",key:"9zh506"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const wy=W("Skull",[["path",{d:"m12.5 17-.5-1-.5 1h1z",key:"3me087"}],["path",{d:"M15 22a1 1 0 0 0 1-1v-1a2 2 0 0 0 1.56-3.25 8 8 0 1 0-11.12 0A2 2 0 0 0 8 20v1a1 1 0 0 0 1 1z",key:"1o5pge"}],["circle",{cx:"15",cy:"12",r:"1",key:"1tmaij"}],["circle",{cx:"9",cy:"12",r:"1",key:"1vctgf"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const c_=W("Sparkles",[["path",{d:"M9.937 15.5A2 2 0 0 0 8.5 14.063l-6.135-1.582a.5.5 0 0 1 0-.962L8.5 9.936A2 2 0 0 0 9.937 8.5l1.582-6.135a.5.5 0 0 1 .963 0L14.063 8.5A2 2 0 0 0 15.5 9.937l6.135 1.581a.5.5 0 0 1 0 .964L15.5 14.063a2 2 0 0 0-1.437 1.437l-1.582 6.135a.5.5 0 0 1-.963 0z",key:"4pj2yx"}],["path",{d:"M20 3v4",key:"1olli1"}],["path",{d:"M22 5h-4",key:"1gvqau"}],["path",{d:"M4 17v2",key:"vumght"}],["path",{d:"M5 18H3",key:"zchphs"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const t5=W("SquarePen",[["path",{d:"M12 3H5a2 2 0 0 0-2 2v14a2 2 0 0 0 2 2h14a2 2 0 0 0 2-2v-7",key:"1m0v6g"}],["path",{d:"M18.375 2.625a1 1 0 0 1 3 3l-9.013 9.014a2 2 0 0 1-.853.505l-2.873.84a.5.5 0 0 1-.62-.62l.84-2.873a2 2 0 0 1 .506-.852z",key:"ohrbg2"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ho=W("Star",[["polygon",{points:"12 2 15.09 8.26 22 9.27 17 14.14 18.18 21.02 12 17.77 5.82 21.02 7 14.14 2 9.27 8.91 8.26 12 2",key:"8f66p6"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const r5=W("Sun",[["circle",{cx:"12",cy:"12",r:"4",key:"4exip2"}],["path",{d:"M12 2v2",key:"tus03m"}],["path",{d:"M12 20v2",key:"1lh1kg"}],["path",{d:"m4.93 4.93 1.41 1.41",key:"149t6j"}],["path",{d:"m17.66 17.66 1.41 1.41",key:"ptbguv"}],["path",{d:"M2 12h2",key:"1t8f8n"}],["path",{d:"M20 12h2",key:"1q8mjw"}],["path",{d:"m6.34 17.66-1.41 1.41",key:"1m8zz5"}],["path",{d:"m19.07 4.93-1.41 1.41",key:"1shlcs"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const n5=W("Trash2",[["path",{d:"M3 6h18",key:"d0wm0j"}],["path",{d:"M19 6v14c0 1-1 2-2 2H7c-1 0-2-1-2-2V6",key:"4alrt4"}],["path",{d:"M8 6V4c0-1 1-2 2-2h4c1 0 2 1 2 2v2",key:"v07s0e"}],["line",{x1:"10",x2:"10",y1:"11",y2:"17",key:"1uufr5"}],["line",{x1:"14",x2:"14",y1:"11",y2:"17",key:"xtxkd"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const s5=W("TreePine",[["path",{d:"m17 14 3 3.3a1 1 0 0 1-.7 1.7H4.7a1 1 0 0 1-.7-1.7L7 14h-.3a1 1 0 0 1-.7-1.7L9 9h-.2A1 1 0 0 1 8 7.3L12 3l4 4.3a1 1 0 0 1-.8 1.7H15l3 3.3a1 1 0 0 1-.7 1.7H17Z",key:"cpyugq"}],["path",{d:"M12 22v-3",key:"kmzjlo"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const _y=W("TrendingUp",[["polyline",{points:"22 7 13.5 15.5 8.5 10.5 2 17",key:"126l90"}],["polyline",{points:"16 7 22 7 22 13",key:"kwv8wd"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Bu=W("TriangleAlert",[["path",{d:"m21.73 18-8-14a2 2 0 0 0-3.48 0l-8 14A2 2 0 0 0 4 21h16a2 2 0 0 0 1.73-3",key:"wmoenq"}],["path",{d:"M12 9v4",key:"juzpu7"}],["path",{d:"M12 17h.01",key:"p32p05"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const u_=W("Upload",[["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}],["polyline",{points:"17 8 12 3 7 8",key:"t8dd8p"}],["line",{x1:"12",x2:"12",y1:"3",y2:"15",key:"widbto"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const d_=W("UserPlus",[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}],["line",{x1:"19",x2:"19",y1:"8",y2:"14",key:"1bvyxn"}],["line",{x1:"22",x2:"16",y1:"11",y2:"11",key:"1shjgl"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ot=W("User",[["path",{d:"M19 21v-2a4 4 0 0 0-4-4H9a4 4 0 0 0-4 4v2",key:"975kel"}],["circle",{cx:"12",cy:"7",r:"4",key:"17ys0d"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const o5=W("Users",[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}],["path",{d:"M22 21v-2a4 4 0 0 0-3-3.87",key:"kshegd"}],["path",{d:"M16 3.13a4 4 0 0 1 0 7.75",key:"1da9ce"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const i5=W("Volume2",[["path",{d:"M11 4.702a.705.705 0 0 0-1.203-.498L6.413 7.587A1.4 1.4 0 0 1 5.416 8H3a1 1 0 0 0-1 1v6a1 1 0 0 0 1 1h2.416a1.4 1.4 0 0 1 .997.413l3.383 3.384A.705.705 0 0 0 11 19.298z",key:"uqj9uw"}],["path",{d:"M16 9a5 5 0 0 1 0 6",key:"1q6k2b"}],["path",{d:"M19.364 18.364a9 9 0 0 0 0-12.728",key:"ijwkga"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const a5=W("VolumeX",[["path",{d:"M11 4.702a.705.705 0 0 0-1.203-.498L6.413 7.587A1.4 1.4 0 0 1 5.416 8H3a1 1 0 0 0-1 1v6a1 1 0 0 0 1 1h2.416a1.4 1.4 0 0 1 .997.413l3.383 3.384A.705.705 0 0 0 11 19.298z",key:"uqj9uw"}],["line",{x1:"22",x2:"16",y1:"9",y2:"15",key:"1ewh16"}],["line",{x1:"16",x2:"22",y1:"9",y2:"15",key:"5ykzw1"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const $n=W("X",[["path",{d:"M18 6 6 18",key:"1bl5f8"}],["path",{d:"m6 6 12 12",key:"d8bk6v"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const h_=W("Zap",[["path",{d:"M4 14a1 1 0 0 1-.78-1.63l9.9-10.2a.5.5 0 0 1 .86.46l-1.92 6.02A1 1 0 0 0 13 10h7a1 1 0 0 1 .78 1.63l-9.9 10.2a.5.5 0 0 1-.86-.46l1.92-6.02A1 1 0 0 0 11 14z",key:"1xq2db"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const l5=W("ZoomIn",[["circle",{cx:"11",cy:"11",r:"8",key:"4ej97u"}],["line",{x1:"21",x2:"16.65",y1:"21",y2:"16.65",key:"13gj7c"}],["line",{x1:"11",x2:"11",y1:"8",y2:"14",key:"1vmskp"}],["line",{x1:"8",x2:"14",y1:"11",y2:"11",key:"durymu"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const c5=W("ZoomOut",[["circle",{cx:"11",cy:"11",r:"8",key:"4ej97u"}],["line",{x1:"21",x2:"16.65",y1:"21",y2:"16.65",key:"13gj7c"}],["line",{x1:"8",x2:"14",y1:"11",y2:"11",key:"durymu"}]]),Xs={"classic-metal":{name:"Classic Metal",description:"Traditional orange and black metal aesthetic",colors:{dark:{primary:"#ff6b35",primaryDark:"#e55a2b",primaryText:"#ffffff",secondary:"#ff8c42",accent:"#ff6b35",background:"#000000",surface:"#1a1a1a",text:"#ffffff",textSecondary:"#cccccc",textMuted:"#999999",border:"#333333",card:"#1a1a1a",cardBackground:"#1a1a1a"},light:{primary:"#d4510a",primaryDark:"#b8450a",primaryText:"#ffffff",secondary:"#e8630e",accent:"#d4510a",background:"#000000",surface:"#1a1a1a",text:"#ffffff",textSecondary:"#cccccc",textMuted:"#999999",border:"#333333",card:"#1a1a1a",cardBackground:"#1a1a1a"}},gradient:"linear-gradient(135deg, #ff6b35 0%, #ff8c42 100%)"},"black-metal":{name:"Black Metal",description:"Dark, atmospheric with silver accents",colors:{dark:{primary:"#c0c0c0",primaryDark:"#a0a0a0",primaryText:"#000000",secondary:"#8b8b8b",accent:"#ffffff",background:"#0a0a0a",surface:"#1a1a1a",text:"#f0f0f0",textSecondary:"#d0d0d0",textMuted:"#a0a0a0",border:"#333333",card:"#1a1a1a",cardBackground:"#1a1a1a"},light:{primary:"#666666",primaryDark:"#555555",primaryText:"#ffffff",secondary:"#888888",accent:"#333333",background:"#0a0a0a",surface:"#1a1a1a",text:"#f0f0f0",textSecondary:"#d0d0d0",textMuted:"#a0a0a0",border:"#333333",card:"#1a1a1a",cardBackground:"#1a1a1a"}},gradient:"linear-gradient(135deg, #c0c0c0 0%, #8b8b8b 100%)"},"death-metal":{name:"Death Metal",description:"Blood red with dark crimson tones",colors:{dark:{primary:"#dc143c",secondary:"#b71c1c",accent:"#ff1744",background:"#0d0000",surface:"#1a0505",text:"#ffcccc",textSecondary:"#ff9999",textMuted:"#cc6666",border:"#4d1414",card:"#1a0505",cardBackground:"#1a0505"},light:{primary:"#c62828",secondary:"#d32f2f",accent:"#f44336",background:"#0d0000",surface:"#1a0505",text:"#ffcccc",textSecondary:"#ff9999",textMuted:"#cc6666",border:"#4d1414",card:"#1a0505",cardBackground:"#1a0505"}},gradient:"linear-gradient(135deg, #dc143c 0%, #b71c1c 100%)"},"power-metal":{name:"Power Metal",description:"Epic gold and blue fantasy theme",colors:{dark:{primary:"#ffd700",primaryText:"#000000",secondary:"#4169e1",accent:"#87ceeb",background:"#0a0a1a",surface:"#1a1a2e",text:"#ffffff",textSecondary:"#f0f8ff",textMuted:"#ddeeff",border:"#2a2a5a",card:"#1a1a2e",cardBackground:"#1a1a2e"},light:{primary:"#ffb300",primaryText:"#000000",secondary:"#1976d2",accent:"#0277bd",background:"#0a0a1a",surface:"#1a1a2e",text:"#ffffff",textSecondary:"#f0f8ff",textMuted:"#ddeeff",border:"#2a2a5a",card:"#1a1a2e",cardBackground:"#1a1a2e"}},gradient:"linear-gradient(135deg, #ffd700 0%, #4169e1 100%)"},"doom-metal":{name:"Doom Metal",description:"Earth tones with deep greens and browns",colors:{dark:{primary:"#8b4513",secondary:"#2e7d32",accent:"#ff8f00",background:"#0a0a0a",surface:"#1a1a0a",text:"#f0e68c",textSecondary:"#daa520",textMuted:"#b8860b",border:"#3e2723",card:"#1a1a0a",cardBackground:"#1a1a0a"},light:{primary:"#6d4c41",secondary:"#388e3c",accent:"#ff9800",background:"#0a0a0a",surface:"#1a1a0a",text:"#f0e68c",textSecondary:"#daa520",textMuted:"#b8860b",border:"#3e2723",card:"#1a1a0a",cardBackground:"#1a1a0a"}},gradient:"linear-gradient(135deg, #8b4513 0%, #2e7d32 100%)"},"thrash-metal":{name:"Thrash Metal",description:"Electric yellow and purple high energy",colors:{dark:{primary:"#ffeb3b",primaryText:"#000000",secondary:"#9c27b0",accent:"#e91e63",background:"#0a0a0a",surface:"#1a0a1a",text:"#ffffff",textSecondary:"#fff9c4",textMuted:"#f4ff81",border:"#4a148c",card:"#1a0a1a",cardBackground:"#1a0a1a"},light:{primary:"#f57f17",primaryText:"#000000",secondary:"#7b1fa2",accent:"#c2185b",background:"#0a0a0a",surface:"#1a0a1a",text:"#ffffff",textSecondary:"#fff9c4",textMuted:"#f4ff81",border:"#4a148c",card:"#1a0a1a",cardBackground:"#1a0a1a"}},gradient:"linear-gradient(135deg, #ffeb3b 0%, #9c27b0 100%)"},"gothic-metal":{name:"Gothic Metal",description:"Deep purple and dark rose elegance",colors:{dark:{primary:"#9c27b0",secondary:"#ad1457",accent:"#e1bee7",background:"#0a0a0a",surface:"#1a0a1a",text:"#f3e5f5",textSecondary:"#e1bee7",textMuted:"#b868cc",border:"#4a148c",card:"#1a0a1a",cardBackground:"#1a0a1a"},light:{primary:"#7b1fa2",secondary:"#c2185b",accent:"#e91e63",background:"#0a0a0a",surface:"#1a0a1a",text:"#f3e5f5",textSecondary:"#e1bee7",textMuted:"#b868cc",border:"#4a148c",card:"#1a0a1a",cardBackground:"#1a0a1a"}},gradient:"linear-gradient(135deg, #9c27b0 0%, #ad1457 100%)"},"light-mode":{name:"Light Mode",description:"Clean and bright classic light theme",colors:{dark:{primary:"#2563eb",secondary:"#3b82f6",accent:"#60a5fa",background:"#000000",surface:"#1a1a1a",text:"#ffffff",textSecondary:"#cccccc",textMuted:"#999999",border:"#333333",card:"#1a1a1a",cardBackground:"#1a1a1a"},light:{primary:"#2563eb",primaryDark:"#1d4ed8",primaryText:"#ffffff",secondary:"#3b82f6",accent:"#60a5fa",background:"#ffffff",surface:"#f8fafc",text:"#1f2937",textSecondary:"#475569",textMuted:"#6b7280",border:"#e2e8f0",card:"#ffffff",cardBackground:"#ffffff"}},gradient:"linear-gradient(135deg, #3b82f6 0%, #60a5fa 100%)"},"dark-mode":{name:"Dark Mode",description:"Sleek and modern classic dark theme",colors:{dark:{primary:"#60a5fa",secondary:"#3b82f6",accent:"#93c5fd",background:"#0f172a",surface:"#1e293b",text:"#f1f5f9",textSecondary:"#cbd5e1",textMuted:"#64748b",border:"#334155",card:"#1e293b",cardBackground:"#1e293b"},light:{primary:"#60a5fa",secondary:"#3b82f6",accent:"#93c5fd",background:"#0f172a",surface:"#1e293b",text:"#f1f5f9",textSecondary:"#cbd5e1",textMuted:"#64748b",border:"#334155",card:"#1e293b",cardBackground:"#1e293b"}},gradient:"linear-gradient(135deg, #60a5fa 0%, #3b82f6 100%)"},"glassmorphism-premium":{name:"Glassmorphism Rock",description:"Premium vibrant glass effect with rock vibes",colors:{dark:{primary:"#ff0080",primaryDark:"#e6006b",primaryText:"#ffffff",secondary:"#ff6600",accent:"#ffff00",background:"#0a0a0a",surface:"rgba(0, 0, 0, 0.25)",text:"#ffffff",textSecondary:"#f0f0f0",textMuted:"#e0e0e0",border:"rgba(255, 255, 255, 0.25)",card:"rgba(0, 0, 0, 0.15)",cardBackground:"rgba(0, 0, 0, 0.15)"},light:{primary:"#ff0080",primaryDark:"#e6006b",primaryText:"#ffffff",secondary:"#ff6600",accent:"#ffff00",background:"#0a0a0a",surface:"rgba(0, 0, 0, 0.25)",text:"#ffffff",textSecondary:"#f0f0f0",textMuted:"#e0e0e0",border:"rgba(255, 255, 255, 0.25)",card:"rgba(0, 0, 0, 0.15)",cardBackground:"rgba(0, 0, 0, 0.15)"}},gradient:"linear-gradient(135deg, #8b0080 0%, #ff0080 25%, #ff6600 50%, #ffff00 75%, #ff0080 100%)",isPremium:!0}},f_=m.createContext(void 0);function u5({children:r}){const[e,t]=m.useState(()=>{const v=localStorage.getItem("metal-theme");return v&&Xs[v]?v:"classic-metal"}),[n,s]=m.useState(()=>localStorage.getItem("theme-mode")!=="light"),i=(v,E)=>{const T=Xs[v];return E?T.colors.dark:T.colors.light},a=v=>{var L;if(v.startsWith("rgba(")){const U=(L=v.match(/rgba?\(([^)]+)\)/))==null?void 0:L[1].split(",").map(j=>parseFloat(j.trim()));if(!U||U.length<3)return"0 0% 50%";const[A,w,k]=U.map(j=>j/255);return l(A,w,k)}const E=/^#?([a-f\d]{2})([a-f\d]{2})([a-f\d]{2})$/i.exec(v);if(!E)return"0 0% 50%";const T=parseInt(E[1],16)/255,N=parseInt(E[2],16)/255,R=parseInt(E[3],16)/255;return l(T,N,R)},l=(v,E,T)=>{const N=Math.max(v,E,T),R=Math.min(v,E,T);let L=0,U=0,A=(N+R)/2;if(N!==R){const w=N-R;switch(U=A>.5?w/(2-N-R):w/(N+R),N){case v:L=(E-T)/w+(E<T?6:0);break;case E:L=(T-v)/w+2;break;case T:L=(v-E)/w+4;break}L/=6}return L=Math.round(L*360),U=Math.round(U*100),A=Math.round(A*100),`${L} ${U}% ${A}%`},u=m.useMemo(()=>i(e,n),[e,n]),d=m.useMemo(()=>Xs[e],[e]);m.useEffect(()=>{const v=document.documentElement,E={"--tw-bg":a(u.background),"--tw-surface":a(u.surface),"--tw-text":a(u.text),"--tw-text-secondary":a(u.textSecondary),"--tw-text-muted":a(u.textMuted),"--tw-primary":a(u.primary),"--tw-secondary":a(u.secondary),"--tw-accent":a(u.accent),"--tw-border":a(u.border),"--tw-muted":a(u.surface),"--tw-muted-foreground":a(u.textMuted),"--background":a(u.background),"--card":a(u.card),"--foreground":a(u.text),"--primary":a(u.primary),"--secondary":a(u.secondary),"--accent":a(u.accent),"--input":a(u.border),"--card-foreground":a(u.text),"--primary-foreground":a(u.primaryText||"#ffffff"),"--secondary-foreground":a(u.text),"--accent-foreground":a(u.text),"--muted":a(u.surface),"--popover":a(u.card),"--popover-foreground":a(u.text),"--destructive":"0 84% 60%","--destructive-foreground":"0 0% 98%","--theme-border":u.border};Object.entries(E).forEach(([T,N])=>{v.style.setProperty(T,N)}),v.classList.remove("light","dark"),v.classList.add(n?"dark":"light"),localStorage.setItem("metal-theme",e)},[e,n,u]);const h=m.useCallback(()=>{s(v=>!v),localStorage.setItem("theme-mode",n?"light":"dark")},[n]),p=m.useCallback(()=>{const v=Object.keys(Xs),T=(v.indexOf(e)+1)%v.length;t(v[T])},[e]),g=m.useCallback(v=>{v==="light-mode"?(s(!1),localStorage.setItem("theme-mode","light")):(s(!0),localStorage.setItem("theme-mode","dark")),t(v)},[]),b=m.useCallback(()=>u,[u]),C=m.useCallback(()=>d.gradient,[d.gradient]),x=m.useMemo(()=>({currentTheme:e,isDarkMode:n,colors:{...u,primaryText:u.primaryText||(u.primary==="#c0c0c0"?"#000000":"#ffffff")},theme:d,setTheme:g,toggleDarkMode:h,toggleTheme:p,gradient:d.gradient,getColors:b,getGradient:C}),[e,n,u,d,g,h,p,b,C]);return o.jsx(f_.Provider,{value:x,children:r})}function ue(){const r=m.useContext(f_);if(r===void 0)throw new Error("useTheme must be used within a ThemeProvider");return r}const Vf="-",d5=r=>{const e=f5(r),{conflictingClassGroups:t,conflictingClassGroupModifiers:n}=r;return{getClassGroupId:a=>{const l=a.split(Vf);return l[0]===""&&l.length!==1&&l.shift(),m_(l,e)||h5(a)},getConflictingClassGroupIds:(a,l)=>{const u=t[a]||[];return l&&n[a]?[...u,...n[a]]:u}}},m_=(r,e)=>{var a;if(r.length===0)return e.classGroupId;const t=r[0],n=e.nextPart.get(t),s=n?m_(r.slice(1),n):void 0;if(s)return s;if(e.validators.length===0)return;const i=r.join(Vf);return(a=e.validators.find(({validator:l})=>l(i)))==null?void 0:a.classGroupId},Ty=/^\[(.+)\]$/,h5=r=>{if(Ty.test(r)){const e=Ty.exec(r)[1],t=e==null?void 0:e.substring(0,e.indexOf(":"));if(t)return"arbitrary.."+t}},f5=r=>{const{theme:e,prefix:t}=r,n={nextPart:new Map,validators:[]};return p5(Object.entries(r.classGroups),t).forEach(([i,a])=>{eh(a,n,i,e)}),n},eh=(r,e,t,n)=>{r.forEach(s=>{if(typeof s=="string"){const i=s===""?e:Ey(e,s);i.classGroupId=t;return}if(typeof s=="function"){if(m5(s)){eh(s(n),e,t,n);return}e.validators.push({validator:s,classGroupId:t});return}Object.entries(s).forEach(([i,a])=>{eh(a,Ey(e,i),t,n)})})},Ey=(r,e)=>{let t=r;return e.split(Vf).forEach(n=>{t.nextPart.has(n)||t.nextPart.set(n,{nextPart:new Map,validators:[]}),t=t.nextPart.get(n)}),t},m5=r=>r.isThemeGetter,p5=(r,e)=>e?r.map(([t,n])=>{const s=n.map(i=>typeof i=="string"?e+i:typeof i=="object"?Object.fromEntries(Object.entries(i).map(([a,l])=>[e+a,l])):i);return[t,s]}):r,g5=r=>{if(r<1)return{get:()=>{},set:()=>{}};let e=0,t=new Map,n=new Map;const s=(i,a)=>{t.set(i,a),e++,e>r&&(e=0,n=t,t=new Map)};return{get(i){let a=t.get(i);if(a!==void 0)return a;if((a=n.get(i))!==void 0)return s(i,a),a},set(i,a){t.has(i)?t.set(i,a):s(i,a)}}},p_="!",y5=r=>{const{separator:e,experimentalParseClassName:t}=r,n=e.length===1,s=e[0],i=e.length,a=l=>{const u=[];let d=0,h=0,p;for(let v=0;v<l.length;v++){let E=l[v];if(d===0){if(E===s&&(n||l.slice(v,v+i)===e)){u.push(l.slice(h,v)),h=v+i;continue}if(E==="/"){p=v;continue}}E==="["?d++:E==="]"&&d--}const g=u.length===0?l:l.substring(h),b=g.startsWith(p_),C=b?g.substring(1):g,x=p&&p>h?p-h:void 0;return{modifiers:u,hasImportantModifier:b,baseClassName:C,maybePostfixModifierPosition:x}};return t?l=>t({className:l,parseClassName:a}):a},x5=r=>{if(r.length<=1)return r;const e=[];let t=[];return r.forEach(n=>{n[0]==="["?(e.push(...t.sort(),n),t=[]):t.push(n)}),e.push(...t.sort()),e},b5=r=>({cache:g5(r.cacheSize),parseClassName:y5(r),...d5(r)}),v5=/\s+/,w5=(r,e)=>{const{parseClassName:t,getClassGroupId:n,getConflictingClassGroupIds:s}=e,i=[],a=r.trim().split(v5);let l="";for(let u=a.length-1;u>=0;u-=1){const d=a[u],{modifiers:h,hasImportantModifier:p,baseClassName:g,maybePostfixModifierPosition:b}=t(d);let C=!!b,x=n(C?g.substring(0,b):g);if(!x){if(!C){l=d+(l.length>0?" "+l:l);continue}if(x=n(g),!x){l=d+(l.length>0?" "+l:l);continue}C=!1}const v=x5(h).join(":"),E=p?v+p_:v,T=E+x;if(i.includes(T))continue;i.push(T);const N=s(x,C);for(let R=0;R<N.length;++R){const L=N[R];i.push(E+L)}l=d+(l.length>0?" "+l:l)}return l};function _5(){let r=0,e,t,n="";for(;r<arguments.length;)(e=arguments[r++])&&(t=g_(e))&&(n&&(n+=" "),n+=t);return n}const g_=r=>{if(typeof r=="string")return r;let e,t="";for(let n=0;n<r.length;n++)r[n]&&(e=g_(r[n]))&&(t&&(t+=" "),t+=e);return t};function T5(r,...e){let t,n,s,i=a;function a(u){const d=e.reduce((h,p)=>p(h),r());return t=b5(d),n=t.cache.get,s=t.cache.set,i=l,l(u)}function l(u){const d=n(u);if(d)return d;const h=w5(u,t);return s(u,h),h}return function(){return i(_5.apply(null,arguments))}}const Le=r=>{const e=t=>t[r]||[];return e.isThemeGetter=!0,e},y_=/^\[(?:([a-z-]+):)?(.+)\]$/i,E5=/^\d+\/\d+$/,N5=new Set(["px","full","screen"]),C5=/^(\d+(\.\d+)?)?(xs|sm|md|lg|xl)$/,k5=/\d+(%|px|r?em|[sdl]?v([hwib]|min|max)|pt|pc|in|cm|mm|cap|ch|ex|r?lh|cq(w|h|i|b|min|max))|\b(calc|min|max|clamp)\(.+\)|^0$/,S5=/^(rgba?|hsla?|hwb|(ok)?(lab|lch))\(.+\)$/,j5=/^(inset_)?-?((\d+)?\.?(\d+)[a-z]+|0)_-?((\d+)?\.?(\d+)[a-z]+|0)/,I5=/^(url|image|image-set|cross-fade|element|(repeating-)?(linear|radial|conic)-gradient)\(.+\)$/,Pr=r=>ao(r)||N5.has(r)||E5.test(r),rn=r=>Wo(r,"length",V5),ao=r=>!!r&&!Number.isNaN(Number(r)),zu=r=>Wo(r,"number",ao),di=r=>!!r&&Number.isInteger(Number(r)),A5=r=>r.endsWith("%")&&ao(r.slice(0,-1)),me=r=>y_.test(r),nn=r=>C5.test(r),R5=new Set(["length","size","percentage"]),P5=r=>Wo(r,R5,x_),M5=r=>Wo(r,"position",x_),D5=new Set(["image","url"]),O5=r=>Wo(r,D5,U5),L5=r=>Wo(r,"",F5),hi=()=>!0,Wo=(r,e,t)=>{const n=y_.exec(r);return n?n[1]?typeof e=="string"?n[1]===e:e.has(n[1]):t(n[2]):!1},V5=r=>k5.test(r)&&!S5.test(r),x_=()=>!1,F5=r=>j5.test(r),U5=r=>I5.test(r),$5=()=>{const r=Le("colors"),e=Le("spacing"),t=Le("blur"),n=Le("brightness"),s=Le("borderColor"),i=Le("borderRadius"),a=Le("borderSpacing"),l=Le("borderWidth"),u=Le("contrast"),d=Le("grayscale"),h=Le("hueRotate"),p=Le("invert"),g=Le("gap"),b=Le("gradientColorStops"),C=Le("gradientColorStopPositions"),x=Le("inset"),v=Le("margin"),E=Le("opacity"),T=Le("padding"),N=Le("saturate"),R=Le("scale"),L=Le("sepia"),U=Le("skew"),A=Le("space"),w=Le("translate"),k=()=>["auto","contain","none"],j=()=>["auto","hidden","clip","visible","scroll"],_=()=>["auto",me,e],M=()=>[me,e],I=()=>["",Pr,rn],X=()=>["auto",ao,me],se=()=>["bottom","center","left","left-bottom","left-top","right","right-bottom","right-top","top"],le=()=>["solid","dashed","dotted","double","none"],Z=()=>["normal","multiply","screen","overlay","darken","lighten","color-dodge","color-burn","hard-light","soft-light","difference","exclusion","hue","saturation","color","luminosity"],P=()=>["start","end","center","between","around","evenly","stretch"],z=()=>["","0",me],Y=()=>["auto","avoid","all","avoid-page","page","left","right","column"],xe=()=>[ao,me];return{cacheSize:500,separator:":",theme:{colors:[hi],spacing:[Pr,rn],blur:["none","",nn,me],brightness:xe(),borderColor:[r],borderRadius:["none","","full",nn,me],borderSpacing:M(),borderWidth:I(),contrast:xe(),grayscale:z(),hueRotate:xe(),invert:z(),gap:M(),gradientColorStops:[r],gradientColorStopPositions:[A5,rn],inset:_(),margin:_(),opacity:xe(),padding:M(),saturate:xe(),scale:xe(),sepia:z(),skew:xe(),space:M(),translate:M()},classGroups:{aspect:[{aspect:["auto","square","video",me]}],container:["container"],columns:[{columns:[nn]}],"break-after":[{"break-after":Y()}],"break-before":[{"break-before":Y()}],"break-inside":[{"break-inside":["auto","avoid","avoid-page","avoid-column"]}],"box-decoration":[{"box-decoration":["slice","clone"]}],box:[{box:["border","content"]}],display:["block","inline-block","inline","flex","inline-flex","table","inline-table","table-caption","table-cell","table-column","table-column-group","table-footer-group","table-header-group","table-row-group","table-row","flow-root","grid","inline-grid","contents","list-item","hidden"],float:[{float:["right","left","none","start","end"]}],clear:[{clear:["left","right","both","none","start","end"]}],isolation:["isolate","isolation-auto"],"object-fit":[{object:["contain","cover","fill","none","scale-down"]}],"object-position":[{object:[...se(),me]}],overflow:[{overflow:j()}],"overflow-x":[{"overflow-x":j()}],"overflow-y":[{"overflow-y":j()}],overscroll:[{overscroll:k()}],"overscroll-x":[{"overscroll-x":k()}],"overscroll-y":[{"overscroll-y":k()}],position:["static","fixed","absolute","relative","sticky"],inset:[{inset:[x]}],"inset-x":[{"inset-x":[x]}],"inset-y":[{"inset-y":[x]}],start:[{start:[x]}],end:[{end:[x]}],top:[{top:[x]}],right:[{right:[x]}],bottom:[{bottom:[x]}],left:[{left:[x]}],visibility:["visible","invisible","collapse"],z:[{z:["auto",di,me]}],basis:[{basis:_()}],"flex-direction":[{flex:["row","row-reverse","col","col-reverse"]}],"flex-wrap":[{flex:["wrap","wrap-reverse","nowrap"]}],flex:[{flex:["1","auto","initial","none",me]}],grow:[{grow:z()}],shrink:[{shrink:z()}],order:[{order:["first","last","none",di,me]}],"grid-cols":[{"grid-cols":[hi]}],"col-start-end":[{col:["auto",{span:["full",di,me]},me]}],"col-start":[{"col-start":X()}],"col-end":[{"col-end":X()}],"grid-rows":[{"grid-rows":[hi]}],"row-start-end":[{row:["auto",{span:[di,me]},me]}],"row-start":[{"row-start":X()}],"row-end":[{"row-end":X()}],"grid-flow":[{"grid-flow":["row","col","dense","row-dense","col-dense"]}],"auto-cols":[{"auto-cols":["auto","min","max","fr",me]}],"auto-rows":[{"auto-rows":["auto","min","max","fr",me]}],gap:[{gap:[g]}],"gap-x":[{"gap-x":[g]}],"gap-y":[{"gap-y":[g]}],"justify-content":[{justify:["normal",...P()]}],"justify-items":[{"justify-items":["start","end","center","stretch"]}],"justify-self":[{"justify-self":["auto","start","end","center","stretch"]}],"align-content":[{content:["normal",...P(),"baseline"]}],"align-items":[{items:["start","end","center","baseline","stretch"]}],"align-self":[{self:["auto","start","end","center","stretch","baseline"]}],"place-content":[{"place-content":[...P(),"baseline"]}],"place-items":[{"place-items":["start","end","center","baseline","stretch"]}],"place-self":[{"place-self":["auto","start","end","center","stretch"]}],p:[{p:[T]}],px:[{px:[T]}],py:[{py:[T]}],ps:[{ps:[T]}],pe:[{pe:[T]}],pt:[{pt:[T]}],pr:[{pr:[T]}],pb:[{pb:[T]}],pl:[{pl:[T]}],m:[{m:[v]}],mx:[{mx:[v]}],my:[{my:[v]}],ms:[{ms:[v]}],me:[{me:[v]}],mt:[{mt:[v]}],mr:[{mr:[v]}],mb:[{mb:[v]}],ml:[{ml:[v]}],"space-x":[{"space-x":[A]}],"space-x-reverse":["space-x-reverse"],"space-y":[{"space-y":[A]}],"space-y-reverse":["space-y-reverse"],w:[{w:["auto","min","max","fit","svw","lvw","dvw",me,e]}],"min-w":[{"min-w":[me,e,"min","max","fit"]}],"max-w":[{"max-w":[me,e,"none","full","min","max","fit","prose",{screen:[nn]},nn]}],h:[{h:[me,e,"auto","min","max","fit","svh","lvh","dvh"]}],"min-h":[{"min-h":[me,e,"min","max","fit","svh","lvh","dvh"]}],"max-h":[{"max-h":[me,e,"min","max","fit","svh","lvh","dvh"]}],size:[{size:[me,e,"auto","min","max","fit"]}],"font-size":[{text:["base",nn,rn]}],"font-smoothing":["antialiased","subpixel-antialiased"],"font-style":["italic","not-italic"],"font-weight":[{font:["thin","extralight","light","normal","medium","semibold","bold","extrabold","black",zu]}],"font-family":[{font:[hi]}],"fvn-normal":["normal-nums"],"fvn-ordinal":["ordinal"],"fvn-slashed-zero":["slashed-zero"],"fvn-figure":["lining-nums","oldstyle-nums"],"fvn-spacing":["proportional-nums","tabular-nums"],"fvn-fraction":["diagonal-fractions","stacked-fractions"],tracking:[{tracking:["tighter","tight","normal","wide","wider","widest",me]}],"line-clamp":[{"line-clamp":["none",ao,zu]}],leading:[{leading:["none","tight","snug","normal","relaxed","loose",Pr,me]}],"list-image":[{"list-image":["none",me]}],"list-style-type":[{list:["none","disc","decimal",me]}],"list-style-position":[{list:["inside","outside"]}],"placeholder-color":[{placeholder:[r]}],"placeholder-opacity":[{"placeholder-opacity":[E]}],"text-alignment":[{text:["left","center","right","justify","start","end"]}],"text-color":[{text:[r]}],"text-opacity":[{"text-opacity":[E]}],"text-decoration":["underline","overline","line-through","no-underline"],"text-decoration-style":[{decoration:[...le(),"wavy"]}],"text-decoration-thickness":[{decoration:["auto","from-font",Pr,rn]}],"underline-offset":[{"underline-offset":["auto",Pr,me]}],"text-decoration-color":[{decoration:[r]}],"text-transform":["uppercase","lowercase","capitalize","normal-case"],"text-overflow":["truncate","text-ellipsis","text-clip"],"text-wrap":[{text:["wrap","nowrap","balance","pretty"]}],indent:[{indent:M()}],"vertical-align":[{align:["baseline","top","middle","bottom","text-top","text-bottom","sub","super",me]}],whitespace:[{whitespace:["normal","nowrap","pre","pre-line","pre-wrap","break-spaces"]}],break:[{break:["normal","words","all","keep"]}],hyphens:[{hyphens:["none","manual","auto"]}],content:[{content:["none",me]}],"bg-attachment":[{bg:["fixed","local","scroll"]}],"bg-clip":[{"bg-clip":["border","padding","content","text"]}],"bg-opacity":[{"bg-opacity":[E]}],"bg-origin":[{"bg-origin":["border","padding","content"]}],"bg-position":[{bg:[...se(),M5]}],"bg-repeat":[{bg:["no-repeat",{repeat:["","x","y","round","space"]}]}],"bg-size":[{bg:["auto","cover","contain",P5]}],"bg-image":[{bg:["none",{"gradient-to":["t","tr","r","br","b","bl","l","tl"]},O5]}],"bg-color":[{bg:[r]}],"gradient-from-pos":[{from:[C]}],"gradient-via-pos":[{via:[C]}],"gradient-to-pos":[{to:[C]}],"gradient-from":[{from:[b]}],"gradient-via":[{via:[b]}],"gradient-to":[{to:[b]}],rounded:[{rounded:[i]}],"rounded-s":[{"rounded-s":[i]}],"rounded-e":[{"rounded-e":[i]}],"rounded-t":[{"rounded-t":[i]}],"rounded-r":[{"rounded-r":[i]}],"rounded-b":[{"rounded-b":[i]}],"rounded-l":[{"rounded-l":[i]}],"rounded-ss":[{"rounded-ss":[i]}],"rounded-se":[{"rounded-se":[i]}],"rounded-ee":[{"rounded-ee":[i]}],"rounded-es":[{"rounded-es":[i]}],"rounded-tl":[{"rounded-tl":[i]}],"rounded-tr":[{"rounded-tr":[i]}],"rounded-br":[{"rounded-br":[i]}],"rounded-bl":[{"rounded-bl":[i]}],"border-w":[{border:[l]}],"border-w-x":[{"border-x":[l]}],"border-w-y":[{"border-y":[l]}],"border-w-s":[{"border-s":[l]}],"border-w-e":[{"border-e":[l]}],"border-w-t":[{"border-t":[l]}],"border-w-r":[{"border-r":[l]}],"border-w-b":[{"border-b":[l]}],"border-w-l":[{"border-l":[l]}],"border-opacity":[{"border-opacity":[E]}],"border-style":[{border:[...le(),"hidden"]}],"divide-x":[{"divide-x":[l]}],"divide-x-reverse":["divide-x-reverse"],"divide-y":[{"divide-y":[l]}],"divide-y-reverse":["divide-y-reverse"],"divide-opacity":[{"divide-opacity":[E]}],"divide-style":[{divide:le()}],"border-color":[{border:[s]}],"border-color-x":[{"border-x":[s]}],"border-color-y":[{"border-y":[s]}],"border-color-s":[{"border-s":[s]}],"border-color-e":[{"border-e":[s]}],"border-color-t":[{"border-t":[s]}],"border-color-r":[{"border-r":[s]}],"border-color-b":[{"border-b":[s]}],"border-color-l":[{"border-l":[s]}],"divide-color":[{divide:[s]}],"outline-style":[{outline:["",...le()]}],"outline-offset":[{"outline-offset":[Pr,me]}],"outline-w":[{outline:[Pr,rn]}],"outline-color":[{outline:[r]}],"ring-w":[{ring:I()}],"ring-w-inset":["ring-inset"],"ring-color":[{ring:[r]}],"ring-opacity":[{"ring-opacity":[E]}],"ring-offset-w":[{"ring-offset":[Pr,rn]}],"ring-offset-color":[{"ring-offset":[r]}],shadow:[{shadow:["","inner","none",nn,L5]}],"shadow-color":[{shadow:[hi]}],opacity:[{opacity:[E]}],"mix-blend":[{"mix-blend":[...Z(),"plus-lighter","plus-darker"]}],"bg-blend":[{"bg-blend":Z()}],filter:[{filter:["","none"]}],blur:[{blur:[t]}],brightness:[{brightness:[n]}],contrast:[{contrast:[u]}],"drop-shadow":[{"drop-shadow":["","none",nn,me]}],grayscale:[{grayscale:[d]}],"hue-rotate":[{"hue-rotate":[h]}],invert:[{invert:[p]}],saturate:[{saturate:[N]}],sepia:[{sepia:[L]}],"backdrop-filter":[{"backdrop-filter":["","none"]}],"backdrop-blur":[{"backdrop-blur":[t]}],"backdrop-brightness":[{"backdrop-brightness":[n]}],"backdrop-contrast":[{"backdrop-contrast":[u]}],"backdrop-grayscale":[{"backdrop-grayscale":[d]}],"backdrop-hue-rotate":[{"backdrop-hue-rotate":[h]}],"backdrop-invert":[{"backdrop-invert":[p]}],"backdrop-opacity":[{"backdrop-opacity":[E]}],"backdrop-saturate":[{"backdrop-saturate":[N]}],"backdrop-sepia":[{"backdrop-sepia":[L]}],"border-collapse":[{border:["collapse","separate"]}],"border-spacing":[{"border-spacing":[a]}],"border-spacing-x":[{"border-spacing-x":[a]}],"border-spacing-y":[{"border-spacing-y":[a]}],"table-layout":[{table:["auto","fixed"]}],caption:[{caption:["top","bottom"]}],transition:[{transition:["none","all","","colors","opacity","shadow","transform",me]}],duration:[{duration:xe()}],ease:[{ease:["linear","in","out","in-out",me]}],delay:[{delay:xe()}],animate:[{animate:["none","spin","ping","pulse","bounce",me]}],transform:[{transform:["","gpu","none"]}],scale:[{scale:[R]}],"scale-x":[{"scale-x":[R]}],"scale-y":[{"scale-y":[R]}],rotate:[{rotate:[di,me]}],"translate-x":[{"translate-x":[w]}],"translate-y":[{"translate-y":[w]}],"skew-x":[{"skew-x":[U]}],"skew-y":[{"skew-y":[U]}],"transform-origin":[{origin:["center","top","top-right","right","bottom-right","bottom","bottom-left","left","top-left",me]}],accent:[{accent:["auto",r]}],appearance:[{appearance:["none","auto"]}],cursor:[{cursor:["auto","default","pointer","wait","text","move","help","not-allowed","none","context-menu","progress","cell","crosshair","vertical-text","alias","copy","no-drop","grab","grabbing","all-scroll","col-resize","row-resize","n-resize","e-resize","s-resize","w-resize","ne-resize","nw-resize","se-resize","sw-resize","ew-resize","ns-resize","nesw-resize","nwse-resize","zoom-in","zoom-out",me]}],"caret-color":[{caret:[r]}],"pointer-events":[{"pointer-events":["none","auto"]}],resize:[{resize:["none","y","x",""]}],"scroll-behavior":[{scroll:["auto","smooth"]}],"scroll-m":[{"scroll-m":M()}],"scroll-mx":[{"scroll-mx":M()}],"scroll-my":[{"scroll-my":M()}],"scroll-ms":[{"scroll-ms":M()}],"scroll-me":[{"scroll-me":M()}],"scroll-mt":[{"scroll-mt":M()}],"scroll-mr":[{"scroll-mr":M()}],"scroll-mb":[{"scroll-mb":M()}],"scroll-ml":[{"scroll-ml":M()}],"scroll-p":[{"scroll-p":M()}],"scroll-px":[{"scroll-px":M()}],"scroll-py":[{"scroll-py":M()}],"scroll-ps":[{"scroll-ps":M()}],"scroll-pe":[{"scroll-pe":M()}],"scroll-pt":[{"scroll-pt":M()}],"scroll-pr":[{"scroll-pr":M()}],"scroll-pb":[{"scroll-pb":M()}],"scroll-pl":[{"scroll-pl":M()}],"snap-align":[{snap:["start","end","center","align-none"]}],"snap-stop":[{snap:["normal","always"]}],"snap-type":[{snap:["none","x","y","both"]}],"snap-strictness":[{snap:["mandatory","proximity"]}],touch:[{touch:["auto","none","manipulation"]}],"touch-x":[{"touch-pan":["x","left","right"]}],"touch-y":[{"touch-pan":["y","up","down"]}],"touch-pz":["touch-pinch-zoom"],select:[{select:["none","text","all","auto"]}],"will-change":[{"will-change":["auto","scroll","contents","transform",me]}],fill:[{fill:[r,"none"]}],"stroke-w":[{stroke:[Pr,rn,zu]}],stroke:[{stroke:[r,"none"]}],sr:["sr-only","not-sr-only"],"forced-color-adjust":[{"forced-color-adjust":["auto","none"]}]},conflictingClassGroups:{overflow:["overflow-x","overflow-y"],overscroll:["overscroll-x","overscroll-y"],inset:["inset-x","inset-y","start","end","top","right","bottom","left"],"inset-x":["right","left"],"inset-y":["top","bottom"],flex:["basis","grow","shrink"],gap:["gap-x","gap-y"],p:["px","py","ps","pe","pt","pr","pb","pl"],px:["pr","pl"],py:["pt","pb"],m:["mx","my","ms","me","mt","mr","mb","ml"],mx:["mr","ml"],my:["mt","mb"],size:["w","h"],"font-size":["leading"],"fvn-normal":["fvn-ordinal","fvn-slashed-zero","fvn-figure","fvn-spacing","fvn-fraction"],"fvn-ordinal":["fvn-normal"],"fvn-slashed-zero":["fvn-normal"],"fvn-figure":["fvn-normal"],"fvn-spacing":["fvn-normal"],"fvn-fraction":["fvn-normal"],"line-clamp":["display","overflow"],rounded:["rounded-s","rounded-e","rounded-t","rounded-r","rounded-b","rounded-l","rounded-ss","rounded-se","rounded-ee","rounded-es","rounded-tl","rounded-tr","rounded-br","rounded-bl"],"rounded-s":["rounded-ss","rounded-es"],"rounded-e":["rounded-se","rounded-ee"],"rounded-t":["rounded-tl","rounded-tr"],"rounded-r":["rounded-tr","rounded-br"],"rounded-b":["rounded-br","rounded-bl"],"rounded-l":["rounded-tl","rounded-bl"],"border-spacing":["border-spacing-x","border-spacing-y"],"border-w":["border-w-s","border-w-e","border-w-t","border-w-r","border-w-b","border-w-l"],"border-w-x":["border-w-r","border-w-l"],"border-w-y":["border-w-t","border-w-b"],"border-color":["border-color-s","border-color-e","border-color-t","border-color-r","border-color-b","border-color-l"],"border-color-x":["border-color-r","border-color-l"],"border-color-y":["border-color-t","border-color-b"],"scroll-m":["scroll-mx","scroll-my","scroll-ms","scroll-me","scroll-mt","scroll-mr","scroll-mb","scroll-ml"],"scroll-mx":["scroll-mr","scroll-ml"],"scroll-my":["scroll-mt","scroll-mb"],"scroll-p":["scroll-px","scroll-py","scroll-ps","scroll-pe","scroll-pt","scroll-pr","scroll-pb","scroll-pl"],"scroll-px":["scroll-pr","scroll-pl"],"scroll-py":["scroll-pt","scroll-pb"],touch:["touch-x","touch-y","touch-pz"],"touch-x":["touch"],"touch-y":["touch"],"touch-pz":["touch"]},conflictingClassGroupModifiers:{"font-size":["leading"]}}},B5=T5($5);function ee(...r){return B5(e_(r))}const z5=jM,b_=m.forwardRef(({className:r,...e},t)=>o.jsx(Gw,{ref:t,className:ee("fixed top-0 z-[100] flex max-h-screen w-full flex-col-reverse p-4 sm:bottom-0 sm:right-0 sm:top-auto sm:flex-col md:max-w-[420px]",r),...e}));b_.displayName=Gw.displayName;const q5=Dc("group pointer-events-auto relative flex w-full items-center justify-between space-x-4 overflow-hidden rounded-md p-6 pr-8 shadow-lg transition-all data-[swipe=cancel]:translate-x-0 data-[swipe=end]:translate-x-[var(--radix-toast-swipe-end-x)] data-[swipe=move]:translate-x-[var(--radix-toast-swipe-move-x)] data-[swipe=move]:transition-none data-[state=open]:animate-in data-[state=closed]:animate-out data-[swipe=end]:animate-out data-[state=closed]:fade-out-80 data-[state=closed]:slide-out-to-right-full data-[state=open]:slide-in-from-top-full data-[state=open]:sm:slide-in-from-bottom-full",{variants:{variant:{default:"",destructive:"",error:""}},defaultVariants:{variant:"default"}}),v_=m.forwardRef(({className:r,variant:e,...t},n)=>{const{colors:s}=ue(),i=()=>e==="destructive"||e==="error"?{backgroundColor:s.background,border:"1px solid #ef4444",color:"#ef4444"}:{backgroundColor:s.background,border:"1px solid transparent",color:s.text};return o.jsx(Kw,{ref:n,className:ee(q5({variant:e}),r),style:i(),...t})});v_.displayName=Kw.displayName;const H5=m.forwardRef(({className:r,...e},t)=>{const{colors:n}=ue();return o.jsx(Xw,{ref:t,className:ee("inline-flex h-8 shrink-0 items-center justify-center rounded-md border px-3 text-sm font-medium transition-colors hover:bg-secondary disabled:pointer-events-none disabled:opacity-50",r),style:{backgroundColor:n.background,borderColor:n.primary,color:n.text},...e})});H5.displayName=Xw.displayName;const w_=m.forwardRef(({className:r,...e},t)=>{const{colors:n}=ue();return o.jsx(Jw,{ref:t,className:ee("absolute right-2 top-2 rounded-md p-1 text-foreground/50 opacity-0 transition-opacity hover:text-foreground focus:opacity-100 focus:outline-none focus:ring-2 group-hover:opacity-100 group-[.destructive]:text-red-300 group-[.destructive]:hover:text-red-50 group-[.destructive]:focus:ring-red-400 group-[.destructive]:focus:ring-offset-red-600",r),style:{color:n.text},"toast-close":"",...e,children:o.jsx($n,{className:"h-4 w-4"})})});w_.displayName=Jw.displayName;const __=m.forwardRef(({className:r,...e},t)=>{const{colors:n}=ue();return o.jsx(Qw,{ref:t,className:ee("text-sm font-semibold",r),style:{color:n.text},...e})});__.displayName=Qw.displayName;const T_=m.forwardRef(({className:r,...e},t)=>{const{colors:n}=ue();return o.jsx(Yw,{ref:t,className:ee("text-sm opacity-90",r),style:{color:n.text},...e})});T_.displayName=Yw.displayName;function W5(){const{toasts:r}=Gr();return o.jsxs(z5,{children:[r.map(function({id:e,title:t,description:n,action:s,...i}){return o.jsxs(v_,{...i,children:[o.jsxs("div",{className:"grid gap-1",children:[t&&o.jsx(__,{children:t}),n&&o.jsx(T_,{children:n})]}),s,o.jsx(w_,{})]},e)}),o.jsx(b_,{})]})}var[Oc,t6]=Bn("Tooltip",[rc]),Lc=rc(),E_="TooltipProvider",G5=700,th="tooltip.open",[K5,Ff]=Oc(E_),N_=r=>{const{__scopeTooltip:e,delayDuration:t=G5,skipDelayDuration:n=300,disableHoverableContent:s=!1,children:i}=r,a=m.useRef(!0),l=m.useRef(!1),u=m.useRef(0);return m.useEffect(()=>{const d=u.current;return()=>window.clearTimeout(d)},[]),o.jsx(K5,{scope:e,isOpenDelayedRef:a,delayDuration:t,onOpen:m.useCallback(()=>{window.clearTimeout(u.current),a.current=!1},[]),onClose:m.useCallback(()=>{window.clearTimeout(u.current),u.current=window.setTimeout(()=>a.current=!0,n)},[n]),isPointerInTransitRef:l,onPointerInTransitChange:m.useCallback(d=>{l.current=d},[]),disableHoverableContent:s,children:i})};N_.displayName=E_;var Gi="Tooltip",[Q5,Vc]=Oc(Gi),C_=r=>{const{__scopeTooltip:e,children:t,open:n,defaultOpen:s,onOpenChange:i,disableHoverableContent:a,delayDuration:l}=r,u=Ff(Gi,r.__scopeTooltip),d=Lc(e),[h,p]=m.useState(null),g=ah(),b=m.useRef(0),C=a??u.disableHoverableContent,x=l??u.delayDuration,v=m.useRef(!1),[E,T]=Do({prop:n,defaultProp:s??!1,onChange:A=>{A?(u.onOpen(),document.dispatchEvent(new CustomEvent(th))):u.onClose(),i==null||i(A)},caller:Gi}),N=m.useMemo(()=>E?v.current?"delayed-open":"instant-open":"closed",[E]),R=m.useCallback(()=>{window.clearTimeout(b.current),b.current=0,v.current=!1,T(!0)},[T]),L=m.useCallback(()=>{window.clearTimeout(b.current),b.current=0,T(!1)},[T]),U=m.useCallback(()=>{window.clearTimeout(b.current),b.current=window.setTimeout(()=>{v.current=!0,T(!0),b.current=0},x)},[x,T]);return m.useEffect(()=>()=>{b.current&&(window.clearTimeout(b.current),b.current=0)},[]),o.jsx(ex,{...d,children:o.jsx(Q5,{scope:e,contentId:g,open:E,stateAttribute:N,trigger:h,onTriggerChange:p,onTriggerEnter:m.useCallback(()=>{u.isOpenDelayedRef.current?U():R()},[u.isOpenDelayedRef,U,R]),onTriggerLeave:m.useCallback(()=>{C?L():(window.clearTimeout(b.current),b.current=0)},[L,C]),onOpen:R,onClose:L,disableHoverableContent:C,children:t})})};C_.displayName=Gi;var rh="TooltipTrigger",k_=m.forwardRef((r,e)=>{const{__scopeTooltip:t,...n}=r,s=Vc(rh,t),i=Ff(rh,t),a=Lc(t),l=m.useRef(null),u=at(e,l,s.onTriggerChange),d=m.useRef(!1),h=m.useRef(!1),p=m.useCallback(()=>d.current=!1,[]);return m.useEffect(()=>()=>document.removeEventListener("pointerup",p),[p]),o.jsx(lh,{asChild:!0,...a,children:o.jsx(De.button,{"aria-describedby":s.open?s.contentId:void 0,"data-state":s.stateAttribute,...n,ref:u,onPointerMove:_e(r.onPointerMove,g=>{g.pointerType!=="touch"&&!h.current&&!i.isPointerInTransitRef.current&&(s.onTriggerEnter(),h.current=!0)}),onPointerLeave:_e(r.onPointerLeave,()=>{s.onTriggerLeave(),h.current=!1}),onPointerDown:_e(r.onPointerDown,()=>{s.open&&s.onClose(),d.current=!0,document.addEventListener("pointerup",p,{once:!0})}),onFocus:_e(r.onFocus,()=>{d.current||s.onOpen()}),onBlur:_e(r.onBlur,s.onClose),onClick:_e(r.onClick,s.onClose)})})});k_.displayName=rh;var Y5="TooltipPortal",[r6,X5]=Oc(Y5,{forceMount:void 0}),Ro="TooltipContent",S_=m.forwardRef((r,e)=>{const t=X5(Ro,r.__scopeTooltip),{forceMount:n=t.forceMount,side:s="top",...i}=r,a=Vc(Ro,r.__scopeTooltip);return o.jsx(Sr,{present:n||a.open,children:a.disableHoverableContent?o.jsx(j_,{side:s,...i,ref:e}):o.jsx(J5,{side:s,...i,ref:e})})}),J5=m.forwardRef((r,e)=>{const t=Vc(Ro,r.__scopeTooltip),n=Ff(Ro,r.__scopeTooltip),s=m.useRef(null),i=at(e,s),[a,l]=m.useState(null),{trigger:u,onClose:d}=t,h=s.current,{onPointerInTransitChange:p}=n,g=m.useCallback(()=>{l(null),p(!1)},[p]),b=m.useCallback((C,x)=>{const v=C.currentTarget,E={x:C.clientX,y:C.clientY},T=nD(E,v.getBoundingClientRect()),N=sD(E,T),R=oD(x.getBoundingClientRect()),L=aD([...N,...R]);l(L),p(!0)},[p]);return m.useEffect(()=>()=>g(),[g]),m.useEffect(()=>{if(u&&h){const C=v=>b(v,h),x=v=>b(v,u);return u.addEventListener("pointerleave",C),h.addEventListener("pointerleave",x),()=>{u.removeEventListener("pointerleave",C),h.removeEventListener("pointerleave",x)}}},[u,h,b,g]),m.useEffect(()=>{if(a){const C=x=>{const v=x.target,E={x:x.clientX,y:x.clientY},T=(u==null?void 0:u.contains(v))||(h==null?void 0:h.contains(v)),N=!iD(E,a);T?g():N&&(g(),d())};return document.addEventListener("pointermove",C),()=>document.removeEventListener("pointermove",C)}},[u,h,a,d,g]),o.jsx(j_,{...r,ref:i})}),[Z5,eD]=Oc(Gi,{isInside:!1}),tD=Zy("TooltipContent"),j_=m.forwardRef((r,e)=>{const{__scopeTooltip:t,children:n,"aria-label":s,onEscapeKeyDown:i,onPointerDownOutside:a,...l}=r,u=Vc(Ro,t),d=Lc(t),{onClose:h}=u;return m.useEffect(()=>(document.addEventListener(th,h),()=>document.removeEventListener(th,h)),[h]),m.useEffect(()=>{if(u.trigger){const p=g=>{const b=g.target;b!=null&&b.contains(u.trigger)&&h()};return window.addEventListener("scroll",p,{capture:!0}),()=>window.removeEventListener("scroll",p,{capture:!0})}},[u.trigger,h]),o.jsx(Xy,{asChild:!0,disableOutsidePointerEvents:!1,onEscapeKeyDown:i,onPointerDownOutside:a,onFocusOutside:p=>p.preventDefault(),onDismiss:h,children:o.jsxs(Jy,{"data-state":u.stateAttribute,...d,...l,ref:e,style:{...l.style,"--radix-tooltip-content-transform-origin":"var(--radix-popper-transform-origin)","--radix-tooltip-content-available-width":"var(--radix-popper-available-width)","--radix-tooltip-content-available-height":"var(--radix-popper-available-height)","--radix-tooltip-trigger-width":"var(--radix-popper-anchor-width)","--radix-tooltip-trigger-height":"var(--radix-popper-anchor-height)"},children:[o.jsx(tD,{children:n}),o.jsx(Z5,{scope:t,isInside:!0,children:o.jsx(dM,{id:u.contentId,role:"tooltip",children:s||n})})]})})});S_.displayName=Ro;var I_="TooltipArrow",rD=m.forwardRef((r,e)=>{const{__scopeTooltip:t,...n}=r,s=Lc(t);return eD(I_,t).isInside?null:o.jsx(tx,{...s,...n,ref:e})});rD.displayName=I_;function nD(r,e){const t=Math.abs(e.top-r.y),n=Math.abs(e.bottom-r.y),s=Math.abs(e.right-r.x),i=Math.abs(e.left-r.x);switch(Math.min(t,n,s,i)){case i:return"left";case s:return"right";case t:return"top";case n:return"bottom";default:throw new Error("unreachable")}}function sD(r,e,t=5){const n=[];switch(e){case"top":n.push({x:r.x-t,y:r.y+t},{x:r.x+t,y:r.y+t});break;case"bottom":n.push({x:r.x-t,y:r.y-t},{x:r.x+t,y:r.y-t});break;case"left":n.push({x:r.x+t,y:r.y-t},{x:r.x+t,y:r.y+t});break;case"right":n.push({x:r.x-t,y:r.y-t},{x:r.x-t,y:r.y+t});break}return n}function oD(r){const{top:e,right:t,bottom:n,left:s}=r;return[{x:s,y:e},{x:t,y:e},{x:t,y:n},{x:s,y:n}]}function iD(r,e){const{x:t,y:n}=r;let s=!1;for(let i=0,a=e.length-1;i<e.length;a=i++){const l=e[i],u=e[a],d=l.x,h=l.y,p=u.x,g=u.y;h>n!=g>n&&t<(p-d)*(n-h)/(g-h)+d&&(s=!s)}return s}function aD(r){const e=r.slice();return e.sort((t,n)=>t.x<n.x?-1:t.x>n.x?1:t.y<n.y?-1:t.y>n.y?1:0),lD(e)}function lD(r){if(r.length<=1)return r.slice();const e=[];for(let n=0;n<r.length;n++){const s=r[n];for(;e.length>=2;){const i=e[e.length-1],a=e[e.length-2];if((i.x-a.x)*(s.y-a.y)>=(i.y-a.y)*(s.x-a.x))e.pop();else break}e.push(s)}e.pop();const t=[];for(let n=r.length-1;n>=0;n--){const s=r[n];for(;t.length>=2;){const i=t[t.length-1],a=t[t.length-2];if((i.x-a.x)*(s.y-a.y)>=(i.y-a.y)*(s.x-a.x))t.pop();else break}t.push(s)}return t.pop(),e.length===1&&t.length===1&&e[0].x===t[0].x&&e[0].y===t[0].y?e:e.concat(t)}var cD=N_,uD=C_,dD=k_,A_=S_;const R_=cD,qu=uD,Hu=dD,fl=m.forwardRef(({className:r,sideOffset:e=4,...t},n)=>o.jsx(A_,{ref:n,sideOffset:e,className:ee("z-50 overflow-hidden rounded-md px-3 py-1.5 text-sm shadow-md animate-in fade-in-0 zoom-in-95 data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=closed]:zoom-out-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2","bg-black text-white border border-gray-600 dark:bg-white dark:text-black dark:border-gray-400","shadow-lg backdrop-blur-sm font-medium max-w-xs",r),...t}));fl.displayName=A_.displayName;class hD{constructor(){this.isCollecting=!1,this.observers=new Set,this.metrics={pageLoads:new Map,apiRequests:new Map,componentRenders:new Map,errors:new Map,customTraces:new Map},this.sessionId=this.generateSessionId(),this.userId=this.getUserId(),this.startCollection(),this.setupDataCleanup()}generateSessionId(){return`session_${Date.now()}_${Math.random().toString(36).substr(2,9)}`}getUserId(){try{const e=localStorage.getItem("firebase:authUser:AIzaSyCBoEZeDucpm7p9OEDgaUGLzhn5HpItseQ:[DEFAULT]");if(e)return JSON.parse(e).uid}catch{console.debug("Could not get user ID for performance tracking")}}startCollection(){this.isCollecting||(this.isCollecting=!0,this.collectionInterval=setInterval(()=>{this.collectPerformanceData()},1e4),this.collectPerformanceData(),console.log("Performance data collection started"))}stopCollection(){this.collectionInterval&&(clearInterval(this.collectionInterval),this.collectionInterval=void 0),this.isCollecting=!1,console.log("Performance data collection stopped")}collectPerformanceData(){this.collectCoreWebVitals(),this.collectNavigationTiming(),this.collectResourceTiming(),this.collectMemoryUsage(),this.notifyObservers()}collectCoreWebVitals(){if("PerformanceObserver"in window)try{new PerformanceObserver(s=>{var l;const i=s.getEntries(),a=i[i.length-1];a&&this.recordEvent("page_load","LCP",a.startTime,"ms",{element:((l=a.element)==null?void 0:l.tagName)||"unknown",size:a.size||0,url:a.url||window.location.href})}).observe({entryTypes:["largest-contentful-paint"]}),new PerformanceObserver(s=>{s.getEntries().forEach(a=>{this.recordEvent("page_load","FID",a.processingStart-a.startTime,"ms",{name:a.name,type:a.entryType})})}).observe({entryTypes:["first-input"]}),new PerformanceObserver(s=>{const i=s.getEntries();let a=0;i.forEach(l=>{l.hadRecentInput||(a+=l.value)}),this.recordEvent("page_load","CLS",a,"score",{entries:i.length})}).observe({entryTypes:["layout-shift"]})}catch(e){console.debug("Core Web Vitals collection failed:",e)}}collectNavigationTiming(){if("performance"in window&&"getEntriesByType"in Dr)try{const e=Dr.getEntriesByType("navigation");if(e.length>0){const t=e[0];this.recordEvent("page_load","Page Load",t.loadEventEnd-t.loadEventStart,"ms",{url:window.location.href,domContentLoaded:t.domContentLoadedEventEnd-t.domContentLoadedEventStart,firstPaint:t.loadEventEnd-t.loadEventStart}),this.recordEvent("page_load","DNS Lookup",t.domainLookupEnd-t.domainLookupStart,"ms",{url:window.location.href}),this.recordEvent("page_load","Connection",t.connectEnd-t.connectStart,"ms",{url:window.location.href})}}catch(e){console.debug("Navigation timing collection failed:",e)}}collectResourceTiming(){if("performance"in window&&"getEntriesByType"in Dr)try{Dr.getEntriesByType("resource").forEach(t=>{const n=t;(n.name.includes("/api/")||n.name.includes(".js")||n.name.includes(".css")||n.name.includes(".png")||n.name.includes(".jpg")||n.name.includes(".svg"))&&this.recordEvent("api_request",n.name,n.responseEnd-n.requestStart,"ms",{initiatorType:n.initiatorType,transferSize:n.transferSize,decodedBodySize:n.decodedBodySize,url:n.name})})}catch(e){console.debug("Resource timing collection failed:",e)}}collectMemoryUsage(){if("memory"in Dr)try{const e=Dr.memory;this.recordEvent("custom_trace","Memory Usage",e.usedJSHeapSize,"bytes",{totalJSHeapSize:e.totalJSHeapSize,jsHeapSizeLimit:e.jsHeapSizeLimit,usedJSHeapSize:e.usedJSHeapSize})}catch(e){console.debug("Memory usage collection failed:",e)}}recordEvent(e,t,n,s,i={}){const a={id:`${e}_${Date.now()}_${Math.random().toString(36).substr(2,9)}`,type:e,name:t,value:n,unit:s,timestamp:new Date,metadata:i,userId:this.userId,sessionId:this.sessionId,userAgent:navigator.userAgent,url:window.location.href},l=this.getCategoryMap(e);if(l){const u=this.getEventKey(a);l.has(u)||l.set(u,[]),l.get(u).push(a),l.get(u).length>100&&l.get(u).shift()}this.sendToFirebase(a)}getCategoryMap(e){switch(e){case"page_load":return this.metrics.pageLoads;case"api_request":return this.metrics.apiRequests;case"component_render":return this.metrics.componentRenders;case"error":return this.metrics.errors;case"custom_trace":return this.metrics.customTraces;default:return null}}getEventKey(e){return`${e.type}_${e.name}`}sendToFirebase(e){try{const t=ow(Dr,`${e.type}_${e.name}`);t.start(),t.setAttribute&&(Object.entries(e.metadata).forEach(([n,s])=>{try{t.setAttribute(n,String(s))}catch{console.debug("Failed to set trace attribute:",n)}}),t.setAttribute("event_id",e.id),t.setAttribute("session_id",e.sessionId),e.userId&&t.setAttribute("user_id",e.userId),t.setAttribute("url",e.url)),t.addMetric&&(t.addMetric("value",e.value),t.addMetric("unit",this.parseUnit(e.unit))),t.stop()}catch(t){console.debug("Failed to send event to Firebase:",t)}}parseUnit(e){return{ms:1,s:1e3,bytes:1,KB:1024,MB:1048576,count:1,score:1}[e]||1}getMetrics(){return this.metrics}getMetricsSummary(){return{totalEvents:Array.from(this.metrics.pageLoads.values()).flat().length+Array.from(this.metrics.apiRequests.values()).flat().length+Array.from(this.metrics.componentRenders.values()).flat().length+Array.from(this.metrics.errors.values()).flat().length+Array.from(this.metrics.customTraces.values()).flat().length,pageLoads:Array.from(this.metrics.pageLoads.values()).flat().length,apiRequests:Array.from(this.metrics.apiRequests.values()).flat().length,componentRenders:Array.from(this.metrics.componentRenders.values()).flat().length,errors:Array.from(this.metrics.errors.values()).flat().length,customTraces:Array.from(this.metrics.customTraces.values()).flat().length}}subscribe(e){return this.observers.add(e),()=>{this.observers.delete(e)}}notifyObservers(){this.observers.forEach(e=>{try{e(this.metrics)}catch(t){console.error("Error in performance observer callback:",t)}})}setupDataCleanup(){setInterval(()=>{const e=new Date(Date.now()-36e5);Object.values(this.metrics).forEach(t=>{t.forEach((n,s)=>{const i=n.filter(a=>a.timestamp>e);i.length===0?t.delete(s):t.set(s,i)})})},3600*1e3)}destroy(){this.stopCollection(),this.observers.clear(),this.metrics.pageLoads.clear(),this.metrics.apiRequests.clear(),this.metrics.componentRenders.clear(),this.metrics.errors.clear(),this.metrics.customTraces.clear()}}const ml=new hD,P_=m.createContext(void 0);function fD({children:r}){const[e,t]=m.useState(null),[n,s]=m.useState(!1),[i,a]=m.useState(!0),l=p=>{s(p),p&&a(!1)},u=p=>{a(p),p&&s(!1)},d=async(p,g)=>p==="admin"&&g==="password"?(t({userID:"admin-1",firstName:"Admin",lastName:"User",emailAddress:"admin@example.com",isAdmin:!0}),!0):!1,h=()=>{t(null)};return o.jsx(P_.Provider,{value:{user:e,isAdmin:!!(e!=null&&e.isAdmin),useMockData:n,setUseMockData:l,useLiveData:i,setUseLiveData:u,login:d,logout:h},children:r})}function mD(){const r=m.useContext(P_);if(r===void 0)throw new Error("useAdmin must be used within an AdminProvider");return r}typeof process<"u"&&process&&typeof process.nextTick=="function"&&(typeof setImmediate=="function"?setImmediate:process.nextTick);const Uf=new br;Uf.addScope("profile");Uf.addScope("email");Uf.setCustomParameters({prompt:"select_account"});const Ny=["https://firebasestorage.googleapis.com/v0/b/spandex-salvation-radio-site.appspot.com/o/Avatars%2FBass-Bat.png?alt=media","https://firebasestorage.googleapis.com/v0/b/spandex-salvation-radio-site.appspot.com/o/Avatars%2FDrum-Dragon.png?alt=media","https://firebasestorage.googleapis.com/v0/b/spandex-salvation-radio-site.appspot.com/o/Avatars%2FHeadbanger-Hamster.png?alt=media","https://firebasestorage.googleapis.com/v0/b/spandex-salvation-radio-site.appspot.com/o/Avatars%2FMetal-Queen.png?alt=media","https://firebasestorage.googleapis.com/v0/b/spandex-salvation-radio-site.appspot.com/o/Avatars%2FMetal%20Cat.png?alt=media","https://firebasestorage.googleapis.com/v0/b/spandex-salvation-radio-site.appspot.com/o/Avatars%2FMosh-Pit-Monster.png?alt=media","https://firebasestorage.googleapis.com/v0/b/spandex-salvation-radio-site.appspot.com/o/Avatars%2FRebel-Raccoon.png?alt=media","https://firebasestorage.googleapis.com/v0/b/spandex-salvation-radio-site.appspot.com/o/Avatars%2FRock-Unicorn.png?alt=media"];function pD(){const r="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789";let e="";for(let t=0;t<10;t++)e+=r.charAt(Math.floor(Math.random()*r.length));return e}function gD(){const r=Math.floor(Math.random()*Ny.length);return Ny[r]}async function yD(r){var e;try{console.log("[Firebase] Attempting registration for:",r.email);const n=(await rk(Ri,r.email,r.password)).user;await ok(n,{displayName:`${r.firstName} ${r.lastName}`});const s=await M_(n,{firstName:r.firstName,lastName:r.lastName,phoneNumber:r.phoneNumber});return s.success?(console.log("[Firebase] Registration successful for:",r.email),{success:!0,userID:(e=s.profile)==null?void 0:e.userID,profile:s.profile}):(console.log("[Firebase] Profile creation failed:",s.error),{success:!1,error:s.error||"Failed to create user profile"})}catch(t){return console.error("[Firebase] Registration error:",t),{success:!1,error:"Failed to create user profile"}}}async function M_(r,e){var t,n;try{const s=pD(),i=new Date().toISOString(),a=(e==null?void 0:e.firstName)||((t=r.displayName)==null?void 0:t.split(" ")[0])||"",l=(e==null?void 0:e.lastName)||((n=r.displayName)==null?void 0:n.slice(1).join(" "))||"",u=(e==null?void 0:e.phoneNumber)||r.phoneNumber||"",d={firstName:a,lastName:l,userProfileImage:r.photoURL||gD(),emailAddress:r.email||"",phoneNumber:u,location:null,isActiveListening:!1,activeSubscription:!1,renewalDate:null,lastLogin:i,userID:s,firebaseUID:r.uid,isEmailVerified:r.emailVerified||!1,isPhoneVerified:!1,createdAt:i,updatedAt:i};return await RI(Tc(dr,"Users",`User: ${s}`),d),{success:!0,profile:d}}catch(s){return console.error("Error creating user profile:",s),{success:!1,error:s instanceof Error?s.message:"Unknown error"}}}async function xD(r,e){try{return await af(Tc(dr,"Users",`User: ${r}`),{isActiveListening:e,updatedAt:new Date().toISOString()}),!0}catch(t){return console.error("Error updating listening status:",t),!1}}async function bD(r,e){try{return await af(Tc(dr,"Users",`User: ${r}`),{location:e,updatedAt:new Date().toISOString()}),!0}catch(t){return console.error("Error updating user location:",t),!1}}async function zs(r,e){try{const t=Ll(Dl(dr,"Users"),Vl("firebaseUID","==",r));let n=await Fl(t);if(!n.empty)return n.docs[0].data();const s=Ll(Dl(dr,"Users"),Vl("emailAddress","==",e));return n=await Fl(s),n.empty?null:n.docs[0].data()}catch(t){return console.error("Error finding user profile by Firebase UID:",t),null}}async function lo(r,e){try{return await af(Tc(dr,"Users",`User: ${r}`),{...e,updatedAt:new Date().toISOString()}),!0}catch(t){return console.error("Error updating user profile:",t),!1}}async function D_(r,e){try{const t=r.name.split(".").pop(),n=`profile-images/${e}-${Date.now()}.${t}`,s=zA(iw,n),i=await $A(s,r);return await BA(i.ref)}catch(t){throw console.error("Error uploading profile image:",t),new Error("Failed to upload image")}}const O_=m.createContext(void 0),Wt=()=>{const r=m.useContext(O_);if(r===void 0)throw new Error("useFirebaseAuth must be used within a FirebaseAuthProvider");return r},vD=({children:r})=>{const[e,t]=m.useState(null),[n,s]=m.useState(!0);m.useEffect(()=>{const v=lk(Ri,async E=>{if(t(E),s(!1),E)try{const T=await zs(E.uid,E.email||"");T&&await lo(T.userID,{lastLogin:new Date().toISOString()})}catch(T){console.error("Error updating user profile:",T)}});return()=>v()},[]);const i=async(v,E,T,N,R)=>{try{return await yD({firstName:T,lastName:N,email:v,phoneNumber:R,password:E})}catch(L){return{success:!1,error:L.message}}},a=async(v,E)=>{try{return await nk(Ri,v,E),{success:!0}}catch(T){return{success:!1,error:T.message}}},l=async()=>{try{await C()}catch(v){console.error("Error signing out:",v)}},u=async v=>{if(!e)return!1;try{const E=await zs(e.uid,e.email||"");return E?await lo(E.userID,v):!1}catch(E){return console.error("Error updating profile:",E),!1}},d=async v=>{if(!e)return!1;try{const E=await zs(e.uid,e.email||"");return E?await xD(E.userID,v):!1}catch(E){return console.error("Error updating listening status:",E),!1}},h=async v=>{if(!e)return!1;try{const E=await zs(e.uid,e.email||"");return E?await bD(E.userID,v):!1}catch(E){return console.error("Error updating location:",E),!1}},p=async()=>{try{const v=await Sk(Ri,YP);if(v.user)try{const E=await zs(v.user.uid,v.user.email||"");if(E)await lo(E.userID,{lastLogin:new Date().toISOString(),updatedAt:new Date().toISOString()});else{const T=await M_(v.user);T.success?console.log("Google sign-in profile created:",T.profile):console.error("Failed to create profile for Google user:",T.error)}}catch(E){console.error("Error handling user profile after Google sign-in:",E)}}catch(v){throw console.error("Error signing in with Google:",v),v}},g=a,b=l,C=l,x={user:e,loading:n,isAuthenticated:!!e,register:i,signIn:a,signInWithGoogle:p,login:g,logout:b,signOutUser:l,signOut:C,updateProfile:u,updateListeningStatus:d,updateLocation:h};return o.jsx(O_.Provider,{value:x,children:r})},L_=m.createContext(void 0);function Wu(r,e){return{"Youth Gone Wild":"https://images.unsplash.com/photo-1493225457124-a3eb161ffa5f?ixlib=rb-4.0.3&auto=format&fit=crop&w=400&h=400","18 and Life":"https://images.unsplash.com/photo-1493225457124-a3eb161ffa5f?ixlib=rb-4.0.3&auto=format&fit=crop&w=400&h=400","I Remember You":"https://images.unsplash.com/photo-1493225457124-a3eb161ffa5f?ixlib=rb-4.0.3&auto=format&fit=crop&w=400&h=400","Master of Puppets":"https://images.unsplash.com/photo-1571330735066-03aaa9429d89?ixlib=rb-4.0.3&auto=format&fit=crop&w=400&h=400","Ace of Spades":"https://images.unsplash.com/photo-1571330735066-03aaa9429d89?ixlib=rb-4.0.3&auto=format&fit=crop&w=400&h=400","Breaking the Law":"https://images.unsplash.com/photo-1571330735066-03aaa9429d89?ixlib=rb-4.0.3&auto=format&fit=crop&w=400&h=400"}[r]||"https://images.unsplash.com/photo-1493225457124-a3eb161ffa5f?ixlib=rb-4.0.3&auto=format&fit=crop&w=400&h=400"}function wD({children:r}){const{updateListeningStatus:e}=Wt(),{toast:t}=Gr(),[n,s]=m.useState(()=>{if(typeof window<"u"){const V=localStorage.getItem("debug-mode");return V?JSON.parse(V):!1}return!1}),[i,a]=m.useState(!1),[l,u]=m.useState(()=>{if(typeof window<"u"){const V=localStorage.getItem("radio-volume");return V?parseFloat(V):.7}return .7}),[d,h]=m.useState(()=>typeof window<"u"?localStorage.getItem("radio-muted")==="true":!1),[p,g]=m.useState(!1),[b,C]=m.useState(null),[x,v]=m.useState({id:"hot-97",stationId:"hot-97",name:"Hot 97",frequency:"97.1 FM",location:"New York, NY",genre:"Hip Hop & R&B",streamUrl:"https://playerservices.streamtheworld.com/api/livestream-redirect/WQHTFMAAC.aac",description:"New York's #1 Hip Hop & R&B",icon:"🔥"}),[E,T]=m.useState({title:"Hot 97",artist:"New York's Hip Hop & Urban Contemporary",album:"97.1 FM • New York, NY",artwork:"",isAd:!1,stationName:"Hot 97",frequency:"97.1 FM",location:"New York, NY",genre:"Hip Hop & Urban Contemporary",lastUpdated:new Date}),[N,R]=m.useState(!1),[L,U]=m.useState({}),[A,w]=m.useState(null),[k,j]=m.useState("Hot 97"),[_,M]=m.useState(null),[I,X]=m.useState(!1),se=m.useRef(null),le=m.useRef(0),Z=3,P=V=>{if(!V)return[];const fe=V.streamUrl;return[`/api/radio-stream?url=${encodeURIComponent(fe)}`,fe]},z=m.useCallback(async()=>{const V=se.current;if(!V)return;if(p){console.log("Playback already in progress, skipping...");return}g(!0),C(null);let fe=!1;const ye=P(x);if(!ye||((ye==null?void 0:ye.length)||0)===0)throw new Error("No stream URLs available");for(let ke=0;ke<((ye==null?void 0:ye.length)||0);ke++)try{const je=ye[ke];if(console.log(`Trying radio stream ${ke+1}: ${je}`),V.pause(),V.currentTime=0,V.src=je,V.load(),await new Promise((Ue,Jt)=>{const Yn=setTimeout(()=>{Jt(new Error("Stream loading timeout"))},3e3),Zt=()=>{clearTimeout(Yn),Xr(),Ue(!0)},Ir=()=>{clearTimeout(Yn),Xr(),Jt(new Error("Stream loading error"))},Xr=()=>{V.removeEventListener("canplaythrough",Zt),V.removeEventListener("loadeddata",Zt),V.removeEventListener("error",Ir)};V.addEventListener("canplaythrough",Zt),V.addEventListener("loadeddata",Zt),V.addEventListener("error",Ir)}),document.visibilityState==="visible"&&!document.hidden)try{if(V.readyState>=2){const Ue=V.play();if(Ue!==void 0){await Ue,fe=!0,le.current=0,console.log(`Stream ${ke+1} connected successfully`);break}}else{console.log("Audio not ready, waiting for canplay event..."),await new Promise((Jt,Yn)=>{const Zt=setTimeout(()=>{Yn(new Error("Audio ready timeout"))},5e3),Ir=()=>{clearTimeout(Zt),rt(),Jt(!0)},Xr=()=>{clearTimeout(Zt),rt(),Yn(new Error("Audio ready error"))},rt=()=>{V.removeEventListener("canplay",Ir),V.removeEventListener("error",Xr)};V.addEventListener("canplay",Ir),V.addEventListener("error",Xr)});const Ue=V.play();if(Ue!==void 0){await Ue,fe=!0,le.current=0,console.log(`Stream ${ke+1} connected successfully after waiting`);break}}}catch(Ue){if(console.warn(`Play attempt ${ke+1} failed:`,Ue),Ue.name==="NotAllowedError")throw new Error("Autoplay not allowed. Please click the play button.");continue}else{console.log("Page not visible, skipping play attempt");continue}}catch(je){if(console.warn(`Stream ${ke+1} failed:`,je),ke===((ye==null?void 0:ye.length)||0)-1)throw je;continue}if(!fe)throw new Error("All stream URLs failed")},[p,x]),Y=m.useCallback(V=>{var ye,ke;console.error("Playback error:",V),g(!1),a(!1);let fe="Playback failed";(V==null?void 0:V.name)==="NotAllowedError"?fe="Autoplay not allowed. Please click the play button.":(ye=V==null?void 0:V.message)!=null&&ye.includes("timeout")?fe="Connection timeout. Please try again.":(ke=V==null?void 0:V.message)!=null&&ke.includes("CORS")?fe="Stream access denied. Please try again.":V!=null&&V.message&&(fe=V.message),C(fe),n&&t({title:"Playback Error",description:fe,variant:"error"}),le.current+=1,le.current<Z&&(console.log(`Auto-retrying playback (${le.current}/${Z})...`),setTimeout(()=>{!i&&!p&&z().catch(console.error)},2e3*le.current))},[n,t,i,p,z]),xe=m.useCallback(V=>{const fe=Math.max(0,Math.min(1,V));u(fe);const ye=se.current;ye&&(ye.volume=d?0:fe),typeof window<"u"&&localStorage.setItem("radio-volume",fe.toString())},[d]),$e=m.useCallback(()=>{const V=!d;h(V);const fe=se.current;fe&&(fe.volume=V?0:l),typeof window<"u"&&localStorage.setItem("radio-muted",V.toString())},[d,l]),q=m.useCallback(async V=>{console.log(`[RadioContext] Changing station to: ${V.name}`);const fe=se.current;fe&&(fe.pause(),fe.src=""),a(!1),g(!1),C(null),le.current=0,v(V),j(V.name),typeof window<"u"&&localStorage.setItem("last-selected-station",V.id);try{await z()}catch(ye){console.error("[RadioContext] Failed to start playback for new station:",ye)}},[z]),he=m.useCallback(async()=>{console.log("Audio play event triggered"),a(!0),g(!1),C(null);try{await e(!0),n&&t({title:"Now Playing",description:`You're now listening to ${(x==null?void 0:x.name)||"Spandex Salvation Radio"}`,variant:"default"})}catch(V){console.error("Error updating listening status:",V),n&&t({title:"Status Update Failed",description:"Failed to update listening status",variant:"error"})}},[e,n,t,x==null?void 0:x.name]),Re=m.useCallback(async()=>{console.log("Audio pause event triggered"),a(!1),g(!1);try{await e(!1),n&&t({title:"Playback Stopped",description:"Playback has been stopped",variant:"default"})}catch(V){console.error("Error updating listening status:",V),n&&t({title:"Status Update Failed",description:"Failed to update listening status",variant:"error"})}},[e,n,t]),ht=m.useCallback(()=>{console.log("Audio loadstart event triggered"),g(!0),C(null)},[]),ft=m.useCallback(()=>{console.log("Audio canplay event triggered")},[]),Vt=m.useCallback(()=>{console.log("Audio canplaythrough event triggered")},[]),Go=m.useCallback(V=>{console.error("Audio error:",V),g(!1),a(!1);const fe=se.current;fe&&fe.src&&!fe.paused&&(C("Unable to connect to radio stream"),n&&t({title:"Connection Error",description:"Unable to connect to radio stream",variant:"error"}))},[n,t]),Qr=m.useCallback(()=>{console.log("Audio stalled event triggered")},[]),Yr=m.useCallback(()=>{console.log("Audio waiting event triggered"),g(!0)},[]);m.useEffect(()=>{const V=se.current;if(V&&V.dataset.initialized!=="true")return V.dataset.initialized="true",V.volume=d?0:l,V.addEventListener("play",he),V.addEventListener("pause",Re),V.addEventListener("loadstart",ht),V.addEventListener("canplay",ft),V.addEventListener("canplaythrough",Vt),V.addEventListener("error",Go),V.addEventListener("stalled",Qr),V.addEventListener("waiting",Yr),()=>{V.removeEventListener("play",he),V.removeEventListener("pause",Re),V.removeEventListener("loadstart",ht),V.removeEventListener("canplay",ft),V.removeEventListener("canplaythrough",Vt),V.removeEventListener("error",Go),V.removeEventListener("stalled",Qr),V.removeEventListener("waiting",Yr)}},[l,d,he,Re,ht,ft,Vt,Go,Qr,Yr]),m.useEffect(()=>{let V=!1;const fe=async()=>{if(!V){V=!0;try{!i&&!b&&x&&(console.log("[RadioContext] Attempting immediate auto-play on mount."),await z())}catch{console.log("[RadioContext] Immediate auto-play failed, will wait for user interaction.")}}};(async()=>{await fe();const ke=async()=>{try{!i&&!b&&x&&(console.log("[RadioContext] User interaction detected, attempting auto-play."),await z())}catch(je){console.error("[RadioContext] Auto-play on user interaction failed:",je)}document.removeEventListener("click",ke),document.removeEventListener("keydown",ke),document.removeEventListener("touchstart",ke)};document.addEventListener("click",ke,{once:!0}),document.addEventListener("keydown",ke,{once:!0}),document.addEventListener("touchstart",ke,{once:!0})})()},[]),m.useEffect(()=>{let V=!1;const ye=setTimeout(async()=>{if(!V){V=!0;try{const ke=localStorage.getItem("last-selected-station");localStorage.getItem("auto-play-enabled")!=="false"&&x&&!i&&(console.log("[RadioContext] Auto-playing station:",x.name),setTimeout(async()=>{if(!i&&!V)try{await z()}catch(Ue){console.error("[RadioContext] Auto-play failed:",Ue)}},1e3))}catch(ke){console.error("[RadioContext] Auto-play initialization error:",ke)}}},2e3);return()=>{clearTimeout(ye),V=!0}},[x]),m.useEffect(()=>{x&&localStorage.setItem("last-selected-station",x.id)},[x]),m.useEffect(()=>{i||T({title:k||(x==null?void 0:x.name)||"Spandex Salvation Radio",artist:"",album:"",artwork:""})},[i,k,x]);const Qn=m.useCallback(async V=>{if(!(!V||!i)){console.log(`[RadioContext] Fetching metadata for station: ${V.name} (${V.id})`);try{const fe=`/api/now-playing?station=${V.stationId||V.id}`;console.log(`[RadioContext] Calling metadata endpoint: ${fe}`);const ye=await fetch(fe);console.log(`[RadioContext] Metadata response status: ${ye.status}`);const ke=ye.headers.get("content-type");if(console.log(`[RadioContext] Metadata response content-type: ${ke}`),!ye.ok)throw console.warn(`[RadioContext] Metadata endpoint returned error: ${ye.status} ${ye.statusText}`),new Error(`HTTP ${ye.status}: ${ye.statusText}`);if(!ke||!ke.includes("application/json")){console.warn("[RadioContext] Metadata endpoint did not return JSON:",fe);const Jt={title:V.name,artist:V.description,album:`${V.frequency} • ${V.location}`,artwork:Wu(V.name,V.description),isAd:!1,stationName:V.name,frequency:V.frequency,location:V.location,genre:V.genre,lastUpdated:new Date};T(Jt),console.log(`[RadioContext] Using fallback metadata: "${Jt.title}" by ${Jt.artist}`);return}const je=await ye.json();console.log("[RadioContext] Received metadata:",je);const Ue={title:je.title||V.name,artist:je.artist||V.description,album:je.album||`${V.frequency} • ${V.location}`,artwork:je.artwork||Wu(je.title||V.name,je.artist||V.description),isAd:je.isAd||!1,adCompany:je.adCompany,adReason:je.adReason,stationName:V.name,frequency:V.frequency,location:V.location,genre:V.genre,lastUpdated:new Date};T(Ue),R(je.isAd||!1),U({company:je.adCompany,reason:je.adReason,artwork:je.isAd?je.artwork:void 0}),console.log(`[RadioContext] Live metadata updated: "${Ue.title}" by ${Ue.artist}${Ue.isAd?" (Advertisement)":""}`),Ue.isAd&&console.log(`[RadioContext] Ad detected: ${Ue.adCompany||"Unknown Company"} - ${Ue.adReason||"Various indicators"}`)}catch(fe){console.error("[RadioContext] Failed to fetch live metadata:",fe);const ye={title:V.name,artist:V.description,album:`${V.frequency} • ${V.location}`,artwork:Wu(V.name,V.description),isAd:!1,stationName:V.name,frequency:V.frequency,location:V.location,genre:V.genre,lastUpdated:new Date};T(ye),console.log(`[RadioContext] Using fallback metadata due to error: "${ye.title}" by ${ye.artist}`)}}},[i]);m.useEffect(()=>{if(i&&x){Qn(x);const V=setInterval(()=>{Qn(x)},1e4);return w(V),()=>{V&&clearInterval(V)}}else A&&(clearInterval(A),w(null))},[i,x,Qn]),m.useEffect(()=>()=>{A&&clearInterval(A)},[A]);const Ko=m.useCallback(async()=>{const V=se.current;if(V)try{i?(V.pause(),C(null),le.current=0):await z()}catch(fe){console.error("Playback toggle error:",fe),Y(fe)}},[i,z,Y]),Qo={isPlaying:i,volume:l,isMuted:d,isLoading:p,error:b,currentTrack:E,currentStation:x,stationName:k,isTransitioning:I,isAdPlaying:N,adInfo:L,togglePlayback:Ko,setVolume:xe,toggleMute:$e,changeStation:q,setCurrentTrack:T,audioRef:se};return o.jsxs(L_.Provider,{value:Qo,children:[o.jsx("audio",{ref:se,preload:"none",crossOrigin:"anonymous","aria-label":"Live radio stream",style:{display:"none"}}),r]})}function Fc(){const r=m.useContext(L_);if(r===void 0)throw new Error("useRadio must be used within a RadioProvider");return r}const _D=m.createContext(void 0);function TD({children:r}){const[e,t]=m.useState({reduceMotion:!1,highContrast:!1,largeText:!1,keyboardNavigation:!0,screenReader:!1});m.useEffect(()=>{const i=()=>{const u=window.matchMedia("(prefers-contrast: high)").matches,d=window.matchMedia("(prefers-reduced-motion: reduce)").matches;window.matchMedia("(prefers-color-scheme: dark)").matches,t(h=>({...h,reduceMotion:d,highContrast:u})),document.documentElement.style.setProperty("--animation-duration",d?"0.01ms":"300ms"),document.documentElement.style.setProperty("--transition-duration",d?"0.01ms":"200ms"),u?document.documentElement.classList.add("high-contrast"):document.documentElement.classList.remove("high-contrast")};i();const a=window.matchMedia("(prefers-reduced-motion: reduce)"),l=window.matchMedia("(prefers-contrast: high)");return a.addEventListener("change",i),l.addEventListener("change",i),()=>{a.removeEventListener("change",i),l.removeEventListener("change",i)}},[]),m.useEffect(()=>{(()=>{const a=!!(navigator.userAgent.includes("NVDA")||navigator.userAgent.includes("JAWS")||navigator.userAgent.includes("VoiceOver")||window.speechSynthesis);t(l=>({...l,screenReader:a}))})()},[]),m.useEffect(()=>{const i=document.documentElement;if(e.largeText?(i.style.fontSize="120%",i.classList.add("large-text")):(i.style.fontSize="",i.classList.remove("large-text")),e.keyboardNavigation){i.classList.add("keyboard-navigation");const a=document.getElementById("keyboard-focus-styles")||document.createElement("style");a.id="keyboard-focus-styles",a.textContent=`
        .keyboard-navigation *:focus {
          outline: 3px solid #f97316 !important;
          outline-offset: 2px !important;
        }
        .keyboard-navigation button:focus,
        .keyboard-navigation input:focus,
        .keyboard-navigation textarea:focus,
        .keyboard-navigation select:focus,
        .keyboard-navigation [role="button"]:focus,
        .keyboard-navigation [tabindex]:focus {
          box-shadow: 0 0 0 3px rgba(249, 115, 22, 0.3) !important;
        }
      `,document.getElementById("keyboard-focus-styles")||document.head.appendChild(a)}else i.classList.remove("keyboard-navigation");if(e.reduceMotion){const a=document.getElementById("reduced-motion-styles")||document.createElement("style");a.id="reduced-motion-styles",a.textContent=`
        *, *::before, *::after {
          animation-duration: 0.01ms !important;
          animation-iteration-count: 1 !important;
          transition-duration: 0.01ms !important;
          scroll-behavior: auto !important;
        }
      `,document.getElementById("reduced-motion-styles")||document.head.appendChild(a)}else{const a=document.getElementById("reduced-motion-styles");a&&a.remove()}if(e.highContrast){i.classList.add("high-contrast");const a=document.getElementById("high-contrast-styles")||document.createElement("style");a.id="high-contrast-styles",a.textContent=`
        .high-contrast {
          filter: contrast(200%) !important;
        }
        .high-contrast * {
          background-color: white !important;
          color: black !important;
          /* border-color: black !important; */
        }
        .high-contrast button {
          background-color: black !important;
          color: white !important;
          /* border: 2px solid white !important; */
        }
        .high-contrast a {
          color: blue !important;
          text-decoration: underline !important;
        }
      `,document.getElementById("high-contrast-styles")||document.head.appendChild(a)}else{i.classList.remove("high-contrast");const a=document.getElementById("high-contrast-styles");a&&a.remove()}},[e]);const n=(i,a)=>{t(l=>({...l,[i]:a}))},s=i=>{let a=document.getElementById("aria-live-region");a||(a=document.createElement("div"),a.id="aria-live-region",a.setAttribute("aria-live","polite"),a.setAttribute("aria-atomic","true"),a.style.position="absolute",a.style.left="-10000px",a.style.width="1px",a.style.height="1px",a.style.overflow="hidden",document.body.appendChild(a)),a.textContent="",setTimeout(()=>{a.textContent=i},100)};return o.jsx(_D.Provider,{value:{settings:e,updateSetting:n,announceToScreenReader:s},children:r})}function ED(){const{currentTheme:r,getColors:e}=ue(),t=e(),n=r==="light-mode",s=n?"#ffffff":"#000000",i=n?"#000000":"#ffffff";return m.useEffect(()=>{const a=document.querySelector('meta[name="theme-color"]');if(a)a.setAttribute("content",t.primary);else{const T=document.createElement("meta");T.name="theme-color",T.content=t.primary,document.head.appendChild(T)}document.querySelector('link[rel="icon"]');const l=`
      <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 32 32">
        <defs>
          <linearGradient id="bgGrad" x1="0%" y1="0%" x2="100%" y2="100%">
            <stop offset="0%" style="stop-color:${t.primary}" />
            <stop offset="100%" style="stop-color:${t.secondary}" />
          </linearGradient>
          <linearGradient id="discGrad" x1="0%" y1="0%" x2="100%" y2="100%">
            <stop offset="0%" style="stop-color:#ffffff;stop-opacity:0.95" />
            <stop offset="50%" style="stop-color:#e8e8e8;stop-opacity:0.85" />
            <stop offset="100%" style="stop-color:#d0d0d0;stop-opacity:0.75" />
          </linearGradient>
        </defs>
        
        <!-- Background circle with theme gradient -->
        <circle cx="16" cy="16" r="16" fill="url(#bgGrad)"/>
        
        <!-- Music disc -->
        <circle cx="16" cy="16" r="11" fill="url(#discGrad)"/>
        
        <!-- Center hole -->
        <circle cx="16" cy="16" r="4" fill="${n?"#1a1a1a":"#0a0a0a"}"/>
        
        <!-- Inner ring details -->
        <circle cx="16" cy="16" r="8" stroke="${n?"#666666":"#999999"}" stroke-width="0.5" fill="none" opacity="0.6"/>
        <circle cx="16" cy="16" r="6" stroke="${n?"#888888":"#bbbbbb"}" stroke-width="0.3" fill="none" opacity="0.4"/>
        
        <!-- Shine effect -->
        <path d="M 9 9 A 9 9 0 0 1 23 9" stroke="white" stroke-width="1.2" fill="none" opacity="0.5"/>
        <path d="M 11 11 A 7 7 0 0 1 21 11" stroke="white" stroke-width="0.8" fill="none" opacity="0.3"/>
      </svg>
    `,d=`data:image/svg+xml,${encodeURIComponent(l)}`;if(document.querySelectorAll('link[rel*="icon"]').forEach(T=>{T.href=d}),!document.querySelector('link[rel="icon"]')){const T=document.createElement("link");T.rel="icon",T.type="image/svg+xml",T.href=d,document.head.appendChild(T)}const p=document.querySelector('meta[name="color-scheme"]');if(p)p.setAttribute("content",n?"light":"dark");else{const T=document.createElement("meta");T.name="color-scheme",T.content=n?"light":"dark",document.head.appendChild(T)}const g=document.querySelector('meta[property="og:image"]'),C=`${window.location.origin}/LinkDisplayPreview.png`;if(g)g.setAttribute("content",C);else{const T=document.createElement("meta");T.setAttribute("property","og:image"),T.content=C,document.head.appendChild(T)}const x=document.querySelector('meta[name="twitter:image"]');if(x)x.setAttribute("content",C);else{const T=document.createElement("meta");T.name="twitter:image",T.content=C,document.head.appendChild(T)}const v=document.querySelector('meta[property="og:url"]'),E=window.location.href.split("?")[0];if(v)v.setAttribute("content",E);else{const T=document.createElement("meta");T.setAttribute("property","og:url"),T.content=E,document.head.appendChild(T)}document.documentElement.style.setProperty("--preview-primary",t.primary),document.documentElement.style.setProperty("--preview-secondary",t.secondary),document.documentElement.style.setProperty("--preview-background",s),document.documentElement.style.setProperty("--preview-text",i)},[r,t,n,s,i]),null}const ND=m.createContext(null);function CD({children:r,siteKey:e}){const[t,n]=m.useState(!1);m.useEffect(()=>{(async()=>{if(window.grecaptcha){n(!0);return}const a=document.createElement("script");a.src=`https://www.google.com/recaptcha/api.js?render=${e}`,a.async=!0,a.defer=!0,a.onload=()=>{window.grecaptcha.ready(()=>{n(!0)})},document.head.appendChild(a)})()},[e]);const s=async i=>{if(!window.grecaptcha||!t)throw new Error("reCAPTCHA not loaded");return new Promise((a,l)=>{window.grecaptcha.ready(()=>{window.grecaptcha.execute(e,{action:i}).then(a).catch(l)})})};return o.jsx(ND.Provider,{value:{executeRecaptcha:s,isLoaded:t},children:r})}class kD extends m.Component{constructor(e){super(e),this.state={hasError:!1}}static getDerivedStateFromError(e){return{hasError:!0,error:e}}componentDidCatch(e,t){console.error("ErrorBoundary caught an error:",e,t)}render(){return this.state.hasError?this.props.fallback||o.jsx("div",{className:"min-h-screen flex items-center justify-center bg-black text-white",children:o.jsxs("div",{className:"text-center p-8",children:[o.jsx("h1",{className:"text-2xl font-bold mb-4",children:"Something went wrong"}),o.jsx("p",{className:"mb-4",children:"The site encountered an error. Please refresh the page."}),o.jsx("button",{onClick:()=>window.location.reload(),className:"px-4 py-2 bg-orange-600 text-white rounded hover:bg-orange-700 focus:outline-none focus:ring-0",children:"Refresh Page"})]})}):this.props.children}}const $f=Dc("inline-flex items-center justify-center gap-2 whitespace-nowrap rounded-md text-sm font-medium transition-all duration-200 disabled:pointer-events-none disabled:opacity-50 [&_svg]:pointer-events-none [&_svg]:size-4 [&_svg]:shrink-0 hover:scale-105 hover:shadow-lg active:scale-95",{variants:{variant:{default:"border-0 bg-primary text-primary-foreground hover:bg-primary/90 hover:shadow-xl hover:shadow-primary/30 hover:border-2 hover:border-primary hover:glow-primary",destructive:"border-0 bg-destructive text-destructive-foreground hover:bg-destructive/90 hover:shadow-xl hover:shadow-destructive/30 hover:border-2 hover:border-destructive",outline:"border-2 border-primary bg-transparent text-primary hover:bg-primary/10 hover:text-primary hover:shadow-lg hover:shadow-primary/20 hover:border-primary hover:glow-primary",secondary:"border-0 bg-secondary text-secondary-foreground hover:bg-secondary/80 hover:shadow-lg hover:shadow-primary/20 hover:border-2 hover:border-primary hover:glow-primary",ghost:"border-0 bg-transparent hover:border-2 hover:border-primary hover:bg-accent hover:text-accent-foreground hover:shadow-md hover:shadow-primary/10 hover:glow-primary focus:border-2 focus:border-primary",link:"text-primary underline-offset-4 hover:underline hover:scale-100 border-0 hover:border-2 hover:border-primary/60 hover:glow-primary focus:border-2 focus:border-primary/60"},size:{default:"h-10 px-4 py-2",sm:"h-9 rounded-md px-3",lg:"h-11 rounded-md px-8",icon:"h-10 w-10"}},defaultVariants:{variant:"default",size:"default"}}),J=m.forwardRef(({className:r,variant:e,size:t,asChild:n=!1,...s},i)=>{const a=n?oE:"button";return o.jsx(a,{className:ee($f({variant:e,size:t,className:r})),ref:i,...s})});J.displayName="Button";const ne=m.forwardRef(({className:r,...e},t)=>o.jsx("div",{ref:t,className:ee("rounded-lg bg-card text-card-foreground shadow-sm",r),...e}));ne.displayName="Card";const Ye=m.forwardRef(({className:r,...e},t)=>o.jsx("div",{ref:t,className:ee("flex flex-col space-y-1.5 p-6",r),...e}));Ye.displayName="CardHeader";const Je=m.forwardRef(({className:r,...e},t)=>o.jsx("div",{ref:t,className:ee("text-2xl font-semibold leading-none tracking-tight",r),...e}));Je.displayName="CardTitle";const pl=m.forwardRef(({className:r,...e},t)=>o.jsx("div",{ref:t,className:ee("text-sm text-muted-foreground",r),...e}));pl.displayName="CardDescription";const oe=m.forwardRef(({className:r,...e},t)=>o.jsx("div",{ref:t,className:ee("p-6 pt-0",r),...e}));oe.displayName="CardContent";const SD=m.forwardRef(({className:r,...e},t)=>o.jsx("div",{ref:t,className:ee("flex items-center p-6 pt-0",r),...e}));SD.displayName="CardFooter";const jD=Dc("inline-flex items-center rounded-full border px-2.5 py-0.5 text-xs font-semibold transition-colors",{variants:{variant:{default:"border-transparent bg-primary text-primary-foreground hover:bg-primary/80",secondary:"border-transparent bg-secondary text-secondary-foreground hover:bg-secondary/80",destructive:"border-transparent bg-destructive text-destructive-foreground hover:bg-destructive/80",outline:"text-foreground"}},defaultVariants:{variant:"default"}});function Ke({className:r,variant:e,...t}){return o.jsx("div",{className:ee(jD({variant:e}),r),...t})}const V_=m.forwardRef(({className:r,...e},t)=>o.jsx(rx,{ref:t,className:ee("relative flex h-10 w-10 shrink-0 overflow-hidden rounded-full",r),...e}));V_.displayName=rx.displayName;const F_=m.forwardRef(({className:r,...e},t)=>o.jsx(nx,{ref:t,className:ee("aspect-square h-full w-full",r),...e}));F_.displayName=nx.displayName;const U_=m.forwardRef(({className:r,...e},t)=>o.jsx(sx,{ref:t,className:ee("flex h-full w-full items-center justify-center rounded-full bg-muted",r),...e}));U_.displayName=sx.displayName;function ID(r,[e,t]){return Math.min(t,Math.max(e,r))}function AD(r,e){return m.useReducer((t,n)=>e[t][n]??t,r)}var Bf="ScrollArea",[$_,n6]=Bn(Bf),[RD,Xt]=$_(Bf),B_=m.forwardRef((r,e)=>{const{__scopeScrollArea:t,type:n="hover",dir:s,scrollHideDelay:i=600,...a}=r,[l,u]=m.useState(null),[d,h]=m.useState(null),[p,g]=m.useState(null),[b,C]=m.useState(null),[x,v]=m.useState(null),[E,T]=m.useState(0),[N,R]=m.useState(0),[L,U]=m.useState(!1),[A,w]=m.useState(!1),k=at(e,_=>u(_)),j=ox(s);return o.jsx(RD,{scope:t,type:n,dir:j,scrollHideDelay:i,scrollArea:l,viewport:d,onViewportChange:h,content:p,onContentChange:g,scrollbarX:b,onScrollbarXChange:C,scrollbarXEnabled:L,onScrollbarXEnabledChange:U,scrollbarY:x,onScrollbarYChange:v,scrollbarYEnabled:A,onScrollbarYEnabledChange:w,onCornerWidthChange:T,onCornerHeightChange:R,children:o.jsx(De.div,{dir:j,...a,ref:k,style:{position:"relative","--radix-scroll-area-corner-width":E+"px","--radix-scroll-area-corner-height":N+"px",...r.style}})})});B_.displayName=Bf;var z_="ScrollAreaViewport",q_=m.forwardRef((r,e)=>{const{__scopeScrollArea:t,children:n,nonce:s,...i}=r,a=Xt(z_,t),l=m.useRef(null),u=at(e,l,a.onViewportChange);return o.jsxs(o.Fragment,{children:[o.jsx("style",{dangerouslySetInnerHTML:{__html:"[data-radix-scroll-area-viewport]{scrollbar-width:none;-ms-overflow-style:none;-webkit-overflow-scrolling:touch;}[data-radix-scroll-area-viewport]::-webkit-scrollbar{display:none}"},nonce:s}),o.jsx(De.div,{"data-radix-scroll-area-viewport":"",...i,ref:u,style:{overflowX:a.scrollbarXEnabled?"scroll":"hidden",overflowY:a.scrollbarYEnabled?"scroll":"hidden",...r.style},children:o.jsx("div",{ref:a.onContentChange,style:{minWidth:"100%",display:"table"},children:n})})]})});q_.displayName=z_;var jr="ScrollAreaScrollbar",zf=m.forwardRef((r,e)=>{const{forceMount:t,...n}=r,s=Xt(jr,r.__scopeScrollArea),{onScrollbarXEnabledChange:i,onScrollbarYEnabledChange:a}=s,l=r.orientation==="horizontal";return m.useEffect(()=>(l?i(!0):a(!0),()=>{l?i(!1):a(!1)}),[l,i,a]),s.type==="hover"?o.jsx(PD,{...n,ref:e,forceMount:t}):s.type==="scroll"?o.jsx(MD,{...n,ref:e,forceMount:t}):s.type==="auto"?o.jsx(H_,{...n,ref:e,forceMount:t}):s.type==="always"?o.jsx(qf,{...n,ref:e}):null});zf.displayName=jr;var PD=m.forwardRef((r,e)=>{const{forceMount:t,...n}=r,s=Xt(jr,r.__scopeScrollArea),[i,a]=m.useState(!1);return m.useEffect(()=>{const l=s.scrollArea;let u=0;if(l){const d=()=>{window.clearTimeout(u),a(!0)},h=()=>{u=window.setTimeout(()=>a(!1),s.scrollHideDelay)};return l.addEventListener("pointerenter",d),l.addEventListener("pointerleave",h),()=>{window.clearTimeout(u),l.removeEventListener("pointerenter",d),l.removeEventListener("pointerleave",h)}}},[s.scrollArea,s.scrollHideDelay]),o.jsx(Sr,{present:t||i,children:o.jsx(H_,{"data-state":i?"visible":"hidden",...n,ref:e})})}),MD=m.forwardRef((r,e)=>{const{forceMount:t,...n}=r,s=Xt(jr,r.__scopeScrollArea),i=r.orientation==="horizontal",a=$c(()=>u("SCROLL_END"),100),[l,u]=AD("hidden",{hidden:{SCROLL:"scrolling"},scrolling:{SCROLL_END:"idle",POINTER_ENTER:"interacting"},interacting:{SCROLL:"interacting",POINTER_LEAVE:"idle"},idle:{HIDE:"hidden",SCROLL:"scrolling",POINTER_ENTER:"interacting"}});return m.useEffect(()=>{if(l==="idle"){const d=window.setTimeout(()=>u("HIDE"),s.scrollHideDelay);return()=>window.clearTimeout(d)}},[l,s.scrollHideDelay,u]),m.useEffect(()=>{const d=s.viewport,h=i?"scrollLeft":"scrollTop";if(d){let p=d[h];const g=()=>{const b=d[h];p!==b&&(u("SCROLL"),a()),p=b};return d.addEventListener("scroll",g),()=>d.removeEventListener("scroll",g)}},[s.viewport,i,u,a]),o.jsx(Sr,{present:t||l!=="hidden",children:o.jsx(qf,{"data-state":l==="hidden"?"hidden":"visible",...n,ref:e,onPointerEnter:_e(r.onPointerEnter,()=>u("POINTER_ENTER")),onPointerLeave:_e(r.onPointerLeave,()=>u("POINTER_LEAVE"))})})}),H_=m.forwardRef((r,e)=>{const t=Xt(jr,r.__scopeScrollArea),{forceMount:n,...s}=r,[i,a]=m.useState(!1),l=r.orientation==="horizontal",u=$c(()=>{if(t.viewport){const d=t.viewport.offsetWidth<t.viewport.scrollWidth,h=t.viewport.offsetHeight<t.viewport.scrollHeight;a(l?d:h)}},10);return Po(t.viewport,u),Po(t.content,u),o.jsx(Sr,{present:n||i,children:o.jsx(qf,{"data-state":i?"visible":"hidden",...s,ref:e})})}),qf=m.forwardRef((r,e)=>{const{orientation:t="vertical",...n}=r,s=Xt(jr,r.__scopeScrollArea),i=m.useRef(null),a=m.useRef(0),[l,u]=m.useState({content:0,viewport:0,scrollbar:{size:0,paddingStart:0,paddingEnd:0}}),d=Y_(l.viewport,l.content),h={...n,sizes:l,onSizesChange:u,hasThumb:d>0&&d<1,onThumbChange:g=>i.current=g,onThumbPointerUp:()=>a.current=0,onThumbPointerDown:g=>a.current=g};function p(g,b){return UD(g,a.current,l,b)}return t==="horizontal"?o.jsx(DD,{...h,ref:e,onThumbPositionChange:()=>{if(s.viewport&&i.current){const g=s.viewport.scrollLeft,b=Cy(g,l,s.dir);i.current.style.transform=`translate3d(${b}px, 0, 0)`}},onWheelScroll:g=>{s.viewport&&(s.viewport.scrollLeft=g)},onDragScroll:g=>{s.viewport&&(s.viewport.scrollLeft=p(g,s.dir))}}):t==="vertical"?o.jsx(OD,{...h,ref:e,onThumbPositionChange:()=>{if(s.viewport&&i.current){const g=s.viewport.scrollTop,b=Cy(g,l);i.current.style.transform=`translate3d(0, ${b}px, 0)`}},onWheelScroll:g=>{s.viewport&&(s.viewport.scrollTop=g)},onDragScroll:g=>{s.viewport&&(s.viewport.scrollTop=p(g))}}):null}),DD=m.forwardRef((r,e)=>{const{sizes:t,onSizesChange:n,...s}=r,i=Xt(jr,r.__scopeScrollArea),[a,l]=m.useState(),u=m.useRef(null),d=at(e,u,i.onScrollbarXChange);return m.useEffect(()=>{u.current&&l(getComputedStyle(u.current))},[u]),o.jsx(G_,{"data-orientation":"horizontal",...s,ref:d,sizes:t,style:{bottom:0,left:i.dir==="rtl"?"var(--radix-scroll-area-corner-width)":0,right:i.dir==="ltr"?"var(--radix-scroll-area-corner-width)":0,"--radix-scroll-area-thumb-width":Uc(t)+"px",...r.style},onThumbPointerDown:h=>r.onThumbPointerDown(h.x),onDragScroll:h=>r.onDragScroll(h.x),onWheelScroll:(h,p)=>{if(i.viewport){const g=i.viewport.scrollLeft+h.deltaX;r.onWheelScroll(g),J_(g,p)&&h.preventDefault()}},onResize:()=>{u.current&&i.viewport&&a&&n({content:i.viewport.scrollWidth,viewport:i.viewport.offsetWidth,scrollbar:{size:u.current.clientWidth,paddingStart:Gl(a.paddingLeft),paddingEnd:Gl(a.paddingRight)}})}})}),OD=m.forwardRef((r,e)=>{const{sizes:t,onSizesChange:n,...s}=r,i=Xt(jr,r.__scopeScrollArea),[a,l]=m.useState(),u=m.useRef(null),d=at(e,u,i.onScrollbarYChange);return m.useEffect(()=>{u.current&&l(getComputedStyle(u.current))},[u]),o.jsx(G_,{"data-orientation":"vertical",...s,ref:d,sizes:t,style:{top:0,right:i.dir==="ltr"?0:void 0,left:i.dir==="rtl"?0:void 0,bottom:"var(--radix-scroll-area-corner-height)","--radix-scroll-area-thumb-height":Uc(t)+"px",...r.style},onThumbPointerDown:h=>r.onThumbPointerDown(h.y),onDragScroll:h=>r.onDragScroll(h.y),onWheelScroll:(h,p)=>{if(i.viewport){const g=i.viewport.scrollTop+h.deltaY;r.onWheelScroll(g),J_(g,p)&&h.preventDefault()}},onResize:()=>{u.current&&i.viewport&&a&&n({content:i.viewport.scrollHeight,viewport:i.viewport.offsetHeight,scrollbar:{size:u.current.clientHeight,paddingStart:Gl(a.paddingTop),paddingEnd:Gl(a.paddingBottom)}})}})}),[LD,W_]=$_(jr),G_=m.forwardRef((r,e)=>{const{__scopeScrollArea:t,sizes:n,hasThumb:s,onThumbChange:i,onThumbPointerUp:a,onThumbPointerDown:l,onThumbPositionChange:u,onDragScroll:d,onWheelScroll:h,onResize:p,...g}=r,b=Xt(jr,t),[C,x]=m.useState(null),v=at(e,k=>x(k)),E=m.useRef(null),T=m.useRef(""),N=b.viewport,R=n.content-n.viewport,L=ir(h),U=ir(u),A=$c(p,10);function w(k){if(E.current){const j=k.clientX-E.current.left,_=k.clientY-E.current.top;d({x:j,y:_})}}return m.useEffect(()=>{const k=j=>{const _=j.target;(C==null?void 0:C.contains(_))&&L(j,R)};return document.addEventListener("wheel",k,{passive:!1}),()=>document.removeEventListener("wheel",k,{passive:!1})},[N,C,R,L]),m.useEffect(U,[n,U]),Po(C,A),Po(b.content,A),o.jsx(LD,{scope:t,scrollbar:C,hasThumb:s,onThumbChange:ir(i),onThumbPointerUp:ir(a),onThumbPositionChange:U,onThumbPointerDown:ir(l),children:o.jsx(De.div,{...g,ref:v,style:{position:"absolute",...g.style},onPointerDown:_e(r.onPointerDown,k=>{k.button===0&&(k.target.setPointerCapture(k.pointerId),E.current=C.getBoundingClientRect(),T.current=document.body.style.webkitUserSelect,document.body.style.webkitUserSelect="none",b.viewport&&(b.viewport.style.scrollBehavior="auto"),w(k))}),onPointerMove:_e(r.onPointerMove,w),onPointerUp:_e(r.onPointerUp,k=>{const j=k.target;j.hasPointerCapture(k.pointerId)&&j.releasePointerCapture(k.pointerId),document.body.style.webkitUserSelect=T.current,b.viewport&&(b.viewport.style.scrollBehavior=""),E.current=null})})})}),Wl="ScrollAreaThumb",K_=m.forwardRef((r,e)=>{const{forceMount:t,...n}=r,s=W_(Wl,r.__scopeScrollArea);return o.jsx(Sr,{present:t||s.hasThumb,children:o.jsx(VD,{ref:e,...n})})}),VD=m.forwardRef((r,e)=>{const{__scopeScrollArea:t,style:n,...s}=r,i=Xt(Wl,t),a=W_(Wl,t),{onThumbPositionChange:l}=a,u=at(e,p=>a.onThumbChange(p)),d=m.useRef(void 0),h=$c(()=>{d.current&&(d.current(),d.current=void 0)},100);return m.useEffect(()=>{const p=i.viewport;if(p){const g=()=>{if(h(),!d.current){const b=$D(p,l);d.current=b,l()}};return l(),p.addEventListener("scroll",g),()=>p.removeEventListener("scroll",g)}},[i.viewport,h,l]),o.jsx(De.div,{"data-state":a.hasThumb?"visible":"hidden",...s,ref:u,style:{width:"var(--radix-scroll-area-thumb-width)",height:"var(--radix-scroll-area-thumb-height)",...n},onPointerDownCapture:_e(r.onPointerDownCapture,p=>{const b=p.target.getBoundingClientRect(),C=p.clientX-b.left,x=p.clientY-b.top;a.onThumbPointerDown({x:C,y:x})}),onPointerUp:_e(r.onPointerUp,a.onThumbPointerUp)})});K_.displayName=Wl;var Hf="ScrollAreaCorner",Q_=m.forwardRef((r,e)=>{const t=Xt(Hf,r.__scopeScrollArea),n=!!(t.scrollbarX&&t.scrollbarY);return t.type!=="scroll"&&n?o.jsx(FD,{...r,ref:e}):null});Q_.displayName=Hf;var FD=m.forwardRef((r,e)=>{const{__scopeScrollArea:t,...n}=r,s=Xt(Hf,t),[i,a]=m.useState(0),[l,u]=m.useState(0),d=!!(i&&l);return Po(s.scrollbarX,()=>{var p;const h=((p=s.scrollbarX)==null?void 0:p.offsetHeight)||0;s.onCornerHeightChange(h),u(h)}),Po(s.scrollbarY,()=>{var p;const h=((p=s.scrollbarY)==null?void 0:p.offsetWidth)||0;s.onCornerWidthChange(h),a(h)}),d?o.jsx(De.div,{...n,ref:e,style:{width:i,height:l,position:"absolute",right:s.dir==="ltr"?0:void 0,left:s.dir==="rtl"?0:void 0,bottom:0,...r.style}}):null});function Gl(r){return r?parseInt(r,10):0}function Y_(r,e){const t=r/e;return isNaN(t)?0:t}function Uc(r){const e=Y_(r.viewport,r.content),t=r.scrollbar.paddingStart+r.scrollbar.paddingEnd,n=(r.scrollbar.size-t)*e;return Math.max(n,18)}function UD(r,e,t,n="ltr"){const s=Uc(t),i=s/2,a=e||i,l=s-a,u=t.scrollbar.paddingStart+a,d=t.scrollbar.size-t.scrollbar.paddingEnd-l,h=t.content-t.viewport,p=n==="ltr"?[0,h]:[h*-1,0];return X_([u,d],p)(r)}function Cy(r,e,t="ltr"){const n=Uc(e),s=e.scrollbar.paddingStart+e.scrollbar.paddingEnd,i=e.scrollbar.size-s,a=e.content-e.viewport,l=i-n,u=t==="ltr"?[0,a]:[a*-1,0],d=ID(r,u);return X_([0,a],[0,l])(d)}function X_(r,e){return t=>{if(r[0]===r[1]||e[0]===e[1])return e[0];const n=(e[1]-e[0])/(r[1]-r[0]);return e[0]+n*(t-r[0])}}function J_(r,e){return r>0&&r<e}var $D=(r,e=()=>{})=>{let t={left:r.scrollLeft,top:r.scrollTop},n=0;return function s(){const i={left:r.scrollLeft,top:r.scrollTop},a=t.left!==i.left,l=t.top!==i.top;(a||l)&&e(),t=i,n=window.requestAnimationFrame(s)}(),()=>window.cancelAnimationFrame(n)};function $c(r,e){const t=ir(r),n=m.useRef(0);return m.useEffect(()=>()=>window.clearTimeout(n.current),[]),m.useCallback(()=>{window.clearTimeout(n.current),n.current=window.setTimeout(t,e)},[t,e])}function Po(r,e){const t=ir(e);Yy(()=>{let n=0;if(r){const s=new ResizeObserver(()=>{cancelAnimationFrame(n),n=window.requestAnimationFrame(t)});return s.observe(r),()=>{window.cancelAnimationFrame(n),s.unobserve(r)}}},[r,t])}var Z_=B_,BD=q_,zD=Q_;const Bc=m.forwardRef(({className:r,children:e,...t},n)=>o.jsxs(Z_,{ref:n,className:ee("relative overflow-hidden",r),...t,children:[o.jsx(BD,{className:"h-full w-full rounded-[inherit]",children:e}),o.jsx(e1,{}),o.jsx(zD,{})]}));Bc.displayName=Z_.displayName;const e1=m.forwardRef(({className:r,orientation:e="vertical",...t},n)=>o.jsx(zf,{ref:n,orientation:e,className:ee("flex touch-none select-none transition-colors",e==="vertical"&&"h-full w-2.5 border-l border-l-transparent p-[1px]",e==="horizontal"&&"h-2.5 flex-col border-t border-t-transparent p-[1px]",r),...t,children:o.jsx(K_,{className:"relative flex-1 rounded-full bg-border"})}));e1.displayName=zf.displayName;const Be=m.forwardRef(({className:r,type:e,...t},n)=>o.jsx("input",{type:e,className:ee("flex h-10 w-full rounded-md border border-input bg-background px-3 py-2 text-base file:border-0 file:bg-transparent file:text-sm file:font-medium file:text-foreground placeholder:text-muted-foreground disabled:cursor-not-allowed disabled:opacity-50 md:text-sm",r),ref:n,...t}));Be.displayName="Input";function t1({isEnabled:r,onToggle:e,isHost:t=!1}){const{user:n,isAuthenticated:s}=Wt(),[i,a]=m.useState(null),[l,u]=m.useState(!1),[d,h]=m.useState(!0),[p,g]=m.useState([]),[b,C]=m.useState(""),[x,v]=m.useState([]),[E,T]=m.useState(!1),N=m.useRef(null),{colors:R}=ue(),L=(i==null?void 0:i.activeSubscription)||!1;m.useEffect(()=>{s&&L&&(v([{id:"1",username:"MetalHead",isOnline:!0,isHost:!1},{id:"2",username:"RockStar",isOnline:!0,isHost:!0},{id:"3",username:"PunkRock",isOnline:!0,isHost:!1}]),g([{id:"1",userId:"2",username:"RockStar",message:"Welcome to the live chat!",timestamp:new Date(Date.now()-6e4),userProfile:{isAdmin:!0}},{id:"2",userId:"1",username:"MetalHead",message:"Thanks! This is awesome!",timestamp:new Date(Date.now()-3e4),userProfile:{isPremium:!0}},{id:"3",userId:"3",username:"PunkRock",message:"Great music playing right now!",timestamp:new Date(Date.now()-15e3),userProfile:{}}]))},[s,L]),m.useEffect(()=>{var w;!s||!n||a({userID:n.uid,firstName:((w=n.displayName)==null?void 0:w.split(" ")[0])||"User",userProfileImage:n.photoURL||void 0,activeSubscription:!0})},[s,n]),m.useEffect(()=>{if(!s||!L)return;const w=setInterval(()=>{if(Math.random()>.7){const k={id:Date.now().toString(),userId:"2",username:"RockStar",message:"Keep the music playing! 🤘",timestamp:new Date,userProfile:{isAdmin:!0}};g(j=>[...j,k])}},3e4);return()=>clearInterval(w)},[s,L]),m.useEffect(()=>{N.current&&(N.current.scrollTop=N.current.scrollHeight)},[p]);const U=async()=>{if(!b.trim()||!i)return;const w={id:Date.now().toString(),userId:i.userID,username:i.firstName||"Anonymous",message:b.trim(),timestamp:new Date,userProfile:{avatar:i.userProfileImage,isPremium:L,isAdmin:!1}};try{await qi("live_chat_send_message",async()=>{g(k=>[...k,w]),C(""),setTimeout(()=>{N.current&&(N.current.scrollTop=N.current.scrollHeight)},100)},{message_length:b.trim().length,user_premium:L?1:0})}catch(k){console.error("Failed to send message:",k)}},A=w=>w.toLocaleTimeString("en-US",{hour:"2-digit",minute:"2-digit",hour12:!0});return!s&&!d?o.jsx("div",{className:"fixed bottom-4 right-4 z-50",children:o.jsx(J,{onClick:()=>h(!0),className:"bg-primary hover:bg-primary/90 text-white rounded-full p-3 shadow-lg",style:{background:`linear-gradient(45deg, ${R.primary}, ${R.secondary})`,boxShadow:`0 4px 16px ${R.primary}40`},children:o.jsx(Ys,{className:"h-5 w-5"})})}):!s&&d?o.jsx("div",{className:"fixed bottom-4 right-4 z-40",children:o.jsx(ne,{className:"w-80 shadow-lg backdrop-blur-sm border-0 live-chat-card",style:{background:`linear-gradient(135deg, ${R.primary}15, ${R.primary}05)`,border:`1px solid ${R.primary}30`},children:o.jsxs(oe,{className:"p-4 relative",children:[o.jsxs("button",{onClick:()=>h(!1),className:"absolute right-2 top-2 rounded-full opacity-70 transition-all duration-200 hover:opacity-100 focus:outline-none focus:ring-0 disabled:pointer-events-none flex items-center justify-center cursor-pointer",style:{color:R.text,backgroundColor:"transparent",border:"none",width:"24px",height:"24px"},onMouseEnter:w=>{w.currentTarget.style.color=R.primary},onMouseLeave:w=>{w.currentTarget.style.color=R.text},children:[o.jsx($n,{className:"h-4 w-4"}),o.jsx("span",{className:"sr-only",children:"Close"})]}),o.jsxs("div",{className:"text-center space-y-3",children:[o.jsx(Ys,{className:"w-8 h-8 mx-auto",style:{color:R.primary}}),o.jsx("h3",{className:"font-bold text-lg",style:{color:R.primary},children:"Live Chat"}),o.jsx("p",{className:"text-sm text-foreground",children:"Sign in to join the live chat with other metalheads!"}),o.jsxs("div",{className:"space-y-2",children:[o.jsx("p",{className:"text-xs text-muted-foreground",children:"✓ Real-time messaging ✓ Premium community ✓ Song requests"}),o.jsxs("div",{className:"flex gap-2",children:[o.jsxs(J,{size:"sm",className:"flex-1 border-0 focus:outline-none focus:ring-0",style:{backgroundColor:R.primary,color:R.primaryText||"white",border:`1px solid ${R.primary}30`},onClick:()=>{const w=new CustomEvent("openAuthModal",{detail:{mode:"login"}});window.dispatchEvent(w)},children:[o.jsx(l_,{className:"w-4 h-4 mr-1"}),"Sign In"]}),o.jsx(J,{size:"sm",variant:"outline",onClick:()=>{const w=new CustomEvent("openAuthModal",{detail:{mode:"register"}});window.dispatchEvent(w)},className:"flex-1 border-0 focus:outline-none focus:ring-0",style:{borderColor:R.primary+"40",color:R.primary,backgroundColor:"transparent",border:`1px solid ${R.primary}30`},children:"Sign Up"})]})]})]})]})})}):L?r?o.jsxs(o.Fragment,{children:[!l&&o.jsxs(J,{onClick:()=>{s?u(!0):h(!0)},className:"fixed bottom-4 right-4 z-50 bg-primary hover:bg-primary/90 text-white rounded-full p-4 shadow-lg",style:{background:`linear-gradient(45deg, ${R.primary}, ${R.secondary})`,boxShadow:`0 8px 32px ${R.primary}40`},children:[o.jsx(Ys,{className:"h-6 w-6"}),o.jsx(Ke,{className:"absolute -top-2 -right-2 bg-red-500 text-white text-xs px-1.5 py-0.5",children:x.length})]}),l&&o.jsx("div",{className:"fixed bottom-4 right-4 w-80 h-96 z-50",children:o.jsxs(ne,{className:"h-full shadow-2xl backdrop-blur-sm border-0 live-chat-card",style:{background:`linear-gradient(135deg, ${R.surface}95, ${R.surface}85)`,border:`1px solid ${R.primary}30`},children:[o.jsx(Ye,{className:"pb-3",children:o.jsxs("div",{className:"flex items-center justify-between",children:[o.jsxs("div",{className:"flex items-center gap-2",children:[o.jsx(Je,{className:"text-sm font-semibold",style:{color:R.text},children:"Live Chat"}),o.jsxs(Ke,{variant:"secondary",className:"text-xs",style:{backgroundColor:R.primary+"20",color:R.primary},children:[o.jsx("div",{className:"w-2 h-2 rounded-full mr-1",style:{backgroundColor:R.primary}}),"LIVE"]})]}),o.jsxs("div",{className:"flex items-center gap-2",children:[o.jsxs("div",{className:"flex items-center gap-1 text-xs",style:{color:R.textSecondary},children:[o.jsx(o5,{className:"h-3 w-3"}),x.length]}),t&&o.jsx(J,{onClick:e,variant:"ghost",size:"sm",className:"p-1 focus:outline-none focus:ring-0",style:{color:R.textSecondary},children:o.jsx(HM,{className:"h-4 w-4"})}),o.jsx(J,{onClick:()=>u(!1),variant:"ghost",size:"sm",className:"p-1 focus:outline-none focus:ring-0",style:{color:R.textSecondary},children:o.jsx($n,{className:"h-4 w-4"})})]})]})}),o.jsxs(oe,{className:"p-0 flex flex-col h-full",children:[o.jsx(Bc,{className:"flex-1 px-4",ref:N,children:o.jsx("div",{className:"space-y-3 py-2",children:p.length===0?o.jsxs("div",{className:"text-center py-8",style:{color:R.textSecondary},children:[o.jsx(Ys,{className:"h-8 w-8 mx-auto mb-2",style:{color:R.textSecondary}}),o.jsx("p",{className:"text-sm",children:"Welcome to the live chat!"}),o.jsx("p",{className:"text-xs",children:"Be respectful and enjoy the show."})]}):p.map(w=>{var k;return o.jsxs("div",{className:"flex gap-2",children:[o.jsxs(V_,{className:"w-8 h-8 flex-shrink-0",children:[o.jsx(F_,{src:(k=w.userProfile)==null?void 0:k.avatar}),o.jsx(U_,{className:"text-xs",style:{backgroundColor:R.primary,color:R.primaryText||"white"},children:w.username.charAt(0).toUpperCase()})]}),o.jsxs("div",{className:"flex-1 min-w-0",children:[o.jsxs("div",{className:"flex items-center gap-2 text-xs mb-1",children:[o.jsx("span",{className:"font-medium truncate",style:{color:R.text},children:w.username}),o.jsx("span",{style:{color:R.textSecondary},children:A(w.timestamp)})]}),o.jsx("p",{className:"text-sm rounded px-3 py-2",style:{backgroundColor:R.primary+"10",color:R.text,border:`1px solid ${R.primary}20`},children:w.message})]})]},w.id)})})}),o.jsx("div",{className:"p-4 border-t",style:{borderColor:R.primary+"20"},children:o.jsxs("form",{onSubmit:w=>{w.preventDefault(),U()},className:"flex gap-2",children:[o.jsx(Be,{value:b,onChange:w=>C(w.target.value),placeholder:"Type your message...",className:"flex-1 text-sm",style:{backgroundColor:R.surface,borderColor:R.primary+"30",color:R.text},maxLength:200,disabled:E}),o.jsx(J,{type:"submit",size:"sm",className:"px-3 focus:outline-none focus:ring-0",style:{backgroundColor:R.primary,color:R.primaryText||"white"},disabled:!b.trim()||E,children:o.jsx(Wi,{className:"h-4 w-4"})})]})})]})]})})]}):null:o.jsx("div",{className:"fixed bottom-4 right-4 z-40",children:o.jsx(ne,{className:"w-80 shadow-lg backdrop-blur-sm border-0 live-chat-card",style:{background:`linear-gradient(135deg, ${R.primary}15, ${R.primary}05)`,border:`1px solid ${R.primary}30`},children:o.jsx(oe,{className:"p-4",children:o.jsxs("div",{className:"text-center space-y-3",children:[o.jsx(hr,{className:"w-8 h-8 mx-auto",style:{color:R.primary}}),o.jsx("h3",{className:"font-bold text-lg",style:{color:R.primary},children:"Premium Feature"}),o.jsx("p",{className:"text-sm text-foreground",children:"Live chat is available exclusively to premium subscribers."}),o.jsxs("div",{className:"space-y-2",children:[o.jsx("p",{className:"text-xs text-muted-foreground",children:"✓ Live Chat Access ✓ Song Submissions ✓ Exclusive Content"}),o.jsxs("div",{className:"flex gap-2",children:[o.jsx(J,{size:"sm",className:"flex-1 border-0",style:{backgroundColor:R.primary,color:R.primaryText||"white",border:`1px solid ${R.primary}30`},onClick:()=>window.location.href="/subscribe",children:"Upgrade Now"}),o.jsx(J,{size:"sm",variant:"outline",onClick:e,className:"flex-1",style:{borderColor:R.primary+"40",color:R.primary,backgroundColor:"transparent"},children:"Close"})]})]})]})})})})}const qD=async()=>{try{const r=new Date;r.setDate(r.getDate()-7);const e=Ll(Dl(dr,"chat_messages"),Vl("timestamp","<",r)),t=await Fl(e),n=Gb(dr);let s=0;return t.forEach(i=>{n.delete(i.ref),s++}),s>0&&await n.commit(),s}catch(r){throw console.error("Error cleaning up old messages:",r),r}},HD=async()=>{try{const r=new Date;r.setDate(r.getDate()-1);const e=Ll(Dl(dr,"chat_users"),Vl("lastSeen","<",r)),t=await Fl(e),n=Gb(dr);let s=0;return t.forEach(i=>{n.delete(i.ref),s++}),s>0&&await n.commit(),s}catch(r){throw console.error("Error cleaning up old user status:",r),r}},WD=async()=>{try{console.log("Starting scheduled chat cleanup...");const r=await qD(),e=await HD();return console.log(`Chat cleanup completed: ${r} messages and ${e} user records deleted`),{messagesDeleted:r,usersDeleted:e}}catch(r){throw console.error("Error during scheduled cleanup:",r),r}},GD=()=>{const e=()=>{WD().catch(console.error)};setTimeout(e,3600*1e3),setInterval(e,864e5),console.log("Chat cleanup schedule initialized")};function KD({showMetrics:r=!1,logToConsole:e=!0}){const[t,n]=m.useState({fcp:null,lcp:null,fid:null,cls:null,ttfb:null,domLoad:null,windowLoad:null}),s=m.useCallback(i=>{n(a=>({...a,...i}))},[]);return m.useEffect(()=>{if(!("PerformanceObserver"in window))return;const i=new PerformanceObserver(h=>{const p=h.getEntries(),g=p[p.length-1];if(g){const b=Math.round(g.startTime);s({fcp:b}),e&&console.log("FCP:",b+"ms")}});i.observe({entryTypes:["paint"]});const a=new PerformanceObserver(h=>{const p=h.getEntries(),g=p[p.length-1];if(g){const b=Math.round(g.startTime);s({lcp:b}),e&&console.log("LCP:",b+"ms")}});a.observe({entryTypes:["largest-contentful-paint"]});const l=new PerformanceObserver(h=>{h.getEntries().forEach(g=>{const b=g,C=Math.round(b.processingStart-b.startTime);s({fid:C}),e&&console.log("FID:",C+"ms")})});l.observe({entryTypes:["first-input"]});const u=new PerformanceObserver(h=>{let p=0;h.getEntries().forEach(b=>{b.hadRecentInput||(p+=b.value)});const g=Math.round(p*1e3)/1e3;s({cls:g}),e&&console.log("CLS:",g)});u.observe({entryTypes:["layout-shift"]});const d=performance.getEntriesByType("navigation")[0];if(d){const h=Math.round(d.responseStart-d.requestStart),p=Math.round(d.domContentLoadedEventEnd-d.domContentLoadedEventStart),g=Math.round(d.loadEventEnd-d.loadEventStart);s({ttfb:h,domLoad:p,windowLoad:g}),e&&(console.log("TTFB:",h+"ms"),console.log("DOM Load:",p+"ms"),console.log("Window Load:",g+"ms"))}if("memory"in performance){const h=performance.memory,p=()=>{const b=Math.round(h.usedJSHeapSize/1024/1024),C=Math.round(h.totalJSHeapSize/1024/1024),x=Math.round(h.jsHeapSizeLimit/1024/1024);e&&console.log(`Memory: ${b}MB / ${C}MB (${x}MB limit)`),b>x*.8&&console.warn("High memory usage detected!")},g=setInterval(p,3e4);return p(),()=>{clearInterval(g),i.disconnect(),a.disconnect(),l.disconnect(),u.disconnect()}}return()=>{i.disconnect(),a.disconnect(),l.disconnect(),u.disconnect()}},[s,e]),m.useEffect(()=>{const i=()=>{const a=[];t.fcp&&t.fcp>1800&&a.push("First Contentful Paint is slow. Consider optimizing critical rendering path."),t.lcp&&t.lcp>2500&&a.push("Largest Contentful Paint is slow. Optimize images and reduce render-blocking resources."),t.fid&&t.fid>100&&a.push("First Input Delay is high. Reduce JavaScript execution time."),t.cls&&t.cls>.1&&a.push("Cumulative Layout Shift is high. Avoid layout shifts during page load."),a.length>0&&e&&(console.group("Performance Optimization Suggestions:"),a.forEach(l=>console.log("•",l)),console.groupEnd())};Object.values(t).some(a=>a!==null)&&i()},[t,e]),r?o.jsxs("div",{className:"fixed bottom-4 right-4 bg-black/80 text-white p-4 rounded-lg text-xs font-mono z-50",children:[o.jsx("div",{className:"mb-2 font-bold",children:"Performance Metrics"}),o.jsxs("div",{children:["FCP: ",t.fcp?`${t.fcp}ms`:"..."]}),o.jsxs("div",{children:["LCP: ",t.lcp?`${t.lcp}ms`:"..."]}),o.jsxs("div",{children:["FID: ",t.fid?`${t.fid}ms`:"..."]}),o.jsxs("div",{children:["CLS: ",t.cls?t.cls:"..."]}),o.jsxs("div",{children:["TTFB: ",t.ttfb?`${t.ttfb}ms`:"..."]})]}):null}const r1=aE,n1=lE,QD=m.forwardRef(({className:r,inset:e,children:t,...n},s)=>o.jsxs(ix,{ref:s,className:ee("flex cursor-default select-none items-center gap-2 rounded-sm px-2 py-1.5 text-sm   data-[state=open]:bg-accent [&_svg]:pointer-events-none [&_svg]:size-4 [&_svg]:shrink-0",e&&"pl-8",r),...n,children:[t,o.jsx(n_,{className:"ml-auto"})]}));QD.displayName=ix.displayName;const YD=m.forwardRef(({className:r,...e},t)=>o.jsx(ax,{ref:t,className:ee("z-50 min-w-[8rem] overflow-hidden rounded-md bg-popover p-1 text-popover-foreground shadow-lg data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2 origin-[--radix-dropdown-menu-content-transform-origin]",r),...e}));YD.displayName=ax.displayName;const Wf=m.forwardRef(({className:r,sideOffset:e=4,...t},n)=>o.jsx(iE,{children:o.jsx(lx,{ref:n,sideOffset:e,className:ee("z-50 max-h-[var(--radix-dropdown-menu-content-available-height)] min-w-[8rem] overflow-y-auto overflow-x-hidden rounded-md bg-popover p-1 text-popover-foreground shadow-md data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2 origin-[--radix-dropdown-menu-content-transform-origin]",r),...t})}));Wf.displayName=lx.displayName;const co=m.forwardRef(({className:r,inset:e,...t},n)=>o.jsx(cx,{ref:n,className:ee("relative flex cursor-default select-none items-center gap-2 rounded-sm px-2 py-1.5 text-sm  transition-colors  focus:text-accent-foreground data-[disabled]:pointer-events-none data-[disabled]:opacity-50 [&_svg]:pointer-events-none [&_svg]:size-4 [&_svg]:shrink-0",e&&"pl-8",r),...t}));co.displayName=cx.displayName;const XD=m.forwardRef(({className:r,children:e,checked:t,...n},s)=>o.jsxs(ux,{ref:s,className:ee("relative flex cursor-default select-none items-center rounded-sm py-1.5 pl-8 pr-2 text-sm  transition-colors  focus:text-accent-foreground data-[disabled]:pointer-events-none data-[disabled]:opacity-50",r),checked:t,...n,children:[o.jsx("span",{className:"absolute left-2 flex h-3.5 w-3.5 items-center justify-center",children:o.jsx(dx,{children:o.jsx(ya,{className:"h-4 w-4"})})}),e]}));XD.displayName=ux.displayName;const JD=m.forwardRef(({className:r,children:e,...t},n)=>o.jsxs(hx,{ref:n,className:ee("relative flex cursor-default select-none items-center rounded-sm py-1.5 pl-8 pr-2 text-sm  transition-colors  focus:text-accent-foreground data-[disabled]:pointer-events-none data-[disabled]:opacity-50",r),...t,children:[o.jsx("span",{className:"absolute left-2 flex h-3.5 w-3.5 items-center justify-center",children:o.jsx(dx,{children:o.jsx(LM,{className:"h-2 w-2 fill-current"})})}),e]}));JD.displayName=hx.displayName;const ZD=m.forwardRef(({className:r,inset:e,...t},n)=>o.jsx(fx,{ref:n,className:ee("px-2 py-1.5 text-sm font-semibold",e&&"pl-8",r),...t}));ZD.displayName=fx.displayName;const nh=m.forwardRef(({className:r,...e},t)=>o.jsx(mx,{ref:t,className:ee("-mx-1 my-1 h-px bg-muted",r),...e}));nh.displayName=mx.displayName;var s1="AlertDialog",[eO,s6]=Bn(s1,[px]),Kr=px(),o1=r=>{const{__scopeAlertDialog:e,...t}=r,n=Kr(e);return o.jsx(yx,{...n,...t,modal:!0})};o1.displayName=s1;var tO="AlertDialogTrigger",rO=m.forwardRef((r,e)=>{const{__scopeAlertDialog:t,...n}=r,s=Kr(t);return o.jsx(uE,{...s,...n,ref:e})});rO.displayName=tO;var nO="AlertDialogPortal",i1=r=>{const{__scopeAlertDialog:e,...t}=r,n=Kr(e);return o.jsx(gx,{...n,...t})};i1.displayName=nO;var sO="AlertDialogOverlay",a1=m.forwardRef((r,e)=>{const{__scopeAlertDialog:t,...n}=r,s=Kr(t);return o.jsx(ch,{...s,...n,ref:e})});a1.displayName=sO;var uo="AlertDialogContent",[oO,iO]=eO(uo),aO=Zy("AlertDialogContent"),l1=m.forwardRef((r,e)=>{const{__scopeAlertDialog:t,children:n,...s}=r,i=Kr(t),a=m.useRef(null),l=at(e,a),u=m.useRef(null);return o.jsx(cE,{contentName:uo,titleName:c1,docsSlug:"alert-dialog",children:o.jsx(oO,{scope:t,cancelRef:u,children:o.jsxs(uh,{role:"alertdialog",...i,...s,ref:l,onOpenAutoFocus:_e(s.onOpenAutoFocus,d=>{var h;d.preventDefault(),(h=u.current)==null||h.focus({preventScroll:!0})}),onPointerDownOutside:d=>d.preventDefault(),onInteractOutside:d=>d.preventDefault(),children:[o.jsx(aO,{children:n}),o.jsx(cO,{contentRef:a})]})})})});l1.displayName=uo;var c1="AlertDialogTitle",u1=m.forwardRef((r,e)=>{const{__scopeAlertDialog:t,...n}=r,s=Kr(t);return o.jsx(dh,{...s,...n,ref:e})});u1.displayName=c1;var d1="AlertDialogDescription",h1=m.forwardRef((r,e)=>{const{__scopeAlertDialog:t,...n}=r,s=Kr(t);return o.jsx(hh,{...s,...n,ref:e})});h1.displayName=d1;var lO="AlertDialogAction",f1=m.forwardRef((r,e)=>{const{__scopeAlertDialog:t,...n}=r,s=Kr(t);return o.jsx(fh,{...s,...n,ref:e})});f1.displayName=lO;var m1="AlertDialogCancel",p1=m.forwardRef((r,e)=>{const{__scopeAlertDialog:t,...n}=r,{cancelRef:s}=iO(m1,t),i=Kr(t),a=at(e,s);return o.jsx(fh,{...i,...n,ref:a})});p1.displayName=m1;var cO=({contentRef:r})=>{const e=`\`${uo}\` requires a description for the component to be accessible for screen reader users.

You can add a description to the \`${uo}\` by passing a \`${d1}\` component as a child, which also benefits sighted users by adding visible context to the dialog.

Alternatively, you can use your own component as a description by assigning it an \`id\` and passing the same value to the \`aria-describedby\` prop in \`${uo}\`. If the description is confusing or duplicative for sighted users, you can use the \`@radix-ui/react-visually-hidden\` primitive as a wrapper around your description component.

For more information, see https://radix-ui.com/primitives/docs/components/alert-dialog`;return m.useEffect(()=>{var n;document.getElementById((n=r.current)==null?void 0:n.getAttribute("aria-describedby"))||console.warn(e)},[e,r]),null},uO=o1,dO=i1,g1=a1,y1=l1,x1=f1,b1=p1,v1=u1,w1=h1;const sh=uO,hO=dO,_1=m.forwardRef(({className:r,...e},t)=>o.jsx(g1,{className:ee("fixed inset-0 z-50 bg-black/80 data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0",r),...e,ref:t}));_1.displayName=g1.displayName;const Kl=m.forwardRef(({className:r,...e},t)=>o.jsxs(hO,{children:[o.jsx(_1,{}),o.jsx(y1,{ref:t,className:ee("fixed left-[50%] top-[50%] z-[9999] grid w-full max-w-lg translate-x-[-50%] translate-y-[-50%] gap-4 border bg-background p-6 shadow-lg duration-200 data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[state=closed]:slide-out-to-left-1/2 data-[state=closed]:slide-out-to-top-[48%] data-[state=open]:slide-in-from-left-1/2 data-[state=open]:slide-in-from-top-[48%] sm:rounded-lg",r),...e})]}));Kl.displayName=y1.displayName;const Ql=({className:r,...e})=>o.jsx("div",{className:ee("flex flex-col space-y-2 text-center sm:text-left",r),...e});Ql.displayName="AlertDialogHeader";const Yl=({className:r,...e})=>o.jsx("div",{className:ee("flex flex-col-reverse sm:flex-row sm:justify-end sm:space-x-2",r),...e});Yl.displayName="AlertDialogFooter";const Xl=m.forwardRef(({className:r,...e},t)=>o.jsx(v1,{ref:t,className:ee("text-lg font-semibold",r),...e}));Xl.displayName=v1.displayName;const Jl=m.forwardRef(({className:r,...e},t)=>o.jsx(w1,{ref:t,className:ee("text-sm text-muted-foreground",r),...e}));Jl.displayName=w1.displayName;const Zl=m.forwardRef(({className:r,...e},t)=>o.jsx(x1,{ref:t,className:ee($f(),r),...e}));Zl.displayName=x1.displayName;const ec=m.forwardRef(({className:r,...e},t)=>o.jsx(b1,{ref:t,className:ee($f({variant:"outline"}),"mt-2 sm:mt-0",r),...e}));ec.displayName=b1.displayName;var zc="Popover",[T1,o6]=Bn(zc,[rc]),xa=rc(),[fO,Kn]=T1(zc),E1=r=>{const{__scopePopover:e,children:t,open:n,defaultOpen:s,onOpenChange:i,modal:a=!1}=r,l=xa(e),u=m.useRef(null),[d,h]=m.useState(!1),[p,g]=Do({prop:n,defaultProp:s??!1,onChange:i,caller:zc});return o.jsx(ex,{...l,children:o.jsx(fO,{scope:e,contentId:ah(),triggerRef:u,open:p,onOpenChange:g,onOpenToggle:m.useCallback(()=>g(b=>!b),[g]),hasCustomAnchor:d,onCustomAnchorAdd:m.useCallback(()=>h(!0),[]),onCustomAnchorRemove:m.useCallback(()=>h(!1),[]),modal:a,children:t})})};E1.displayName=zc;var N1="PopoverAnchor",mO=m.forwardRef((r,e)=>{const{__scopePopover:t,...n}=r,s=Kn(N1,t),i=xa(t),{onCustomAnchorAdd:a,onCustomAnchorRemove:l}=s;return m.useEffect(()=>(a(),()=>l()),[a,l]),o.jsx(lh,{...i,...n,ref:e})});mO.displayName=N1;var C1="PopoverTrigger",k1=m.forwardRef((r,e)=>{const{__scopePopover:t,...n}=r,s=Kn(C1,t),i=xa(t),a=at(e,s.triggerRef),l=o.jsx(De.button,{type:"button","aria-haspopup":"dialog","aria-expanded":s.open,"aria-controls":s.contentId,"data-state":R1(s.open),...n,ref:a,onClick:_e(r.onClick,s.onOpenToggle)});return s.hasCustomAnchor?l:o.jsx(lh,{asChild:!0,...i,children:l})});k1.displayName=C1;var Gf="PopoverPortal",[pO,gO]=T1(Gf,{forceMount:void 0}),S1=r=>{const{__scopePopover:e,forceMount:t,children:n,container:s}=r,i=Kn(Gf,e);return o.jsx(pO,{scope:e,forceMount:t,children:o.jsx(Sr,{present:t||i.open,children:o.jsx(Qy,{asChild:!0,container:s,children:n})})})};S1.displayName=Gf;var Mo="PopoverContent",j1=m.forwardRef((r,e)=>{const t=gO(Mo,r.__scopePopover),{forceMount:n=t.forceMount,...s}=r,i=Kn(Mo,r.__scopePopover);return o.jsx(Sr,{present:n||i.open,children:i.modal?o.jsx(xO,{...s,ref:e}):o.jsx(bO,{...s,ref:e})})});j1.displayName=Mo;var yO=fE("PopoverContent.RemoveScroll"),xO=m.forwardRef((r,e)=>{const t=Kn(Mo,r.__scopePopover),n=m.useRef(null),s=at(e,n),i=m.useRef(!1);return m.useEffect(()=>{const a=n.current;if(a)return dE(a)},[]),o.jsx(hE,{as:yO,allowPinchZoom:!0,children:o.jsx(I1,{...r,ref:s,trapFocus:t.open,disableOutsidePointerEvents:!0,onCloseAutoFocus:_e(r.onCloseAutoFocus,a=>{var l;a.preventDefault(),i.current||(l=t.triggerRef.current)==null||l.focus()}),onPointerDownOutside:_e(r.onPointerDownOutside,a=>{const l=a.detail.originalEvent,u=l.button===0&&l.ctrlKey===!0,d=l.button===2||u;i.current=d},{checkForDefaultPrevented:!1}),onFocusOutside:_e(r.onFocusOutside,a=>a.preventDefault(),{checkForDefaultPrevented:!1})})})}),bO=m.forwardRef((r,e)=>{const t=Kn(Mo,r.__scopePopover),n=m.useRef(!1),s=m.useRef(!1);return o.jsx(I1,{...r,ref:e,trapFocus:!1,disableOutsidePointerEvents:!1,onCloseAutoFocus:i=>{var a,l;(a=r.onCloseAutoFocus)==null||a.call(r,i),i.defaultPrevented||(n.current||(l=t.triggerRef.current)==null||l.focus(),i.preventDefault()),n.current=!1,s.current=!1},onInteractOutside:i=>{var u,d;(u=r.onInteractOutside)==null||u.call(r,i),i.defaultPrevented||(n.current=!0,i.detail.originalEvent.type==="pointerdown"&&(s.current=!0));const a=i.target;((d=t.triggerRef.current)==null?void 0:d.contains(a))&&i.preventDefault(),i.detail.originalEvent.type==="focusin"&&s.current&&i.preventDefault()}})}),I1=m.forwardRef((r,e)=>{const{__scopePopover:t,trapFocus:n,onOpenAutoFocus:s,onCloseAutoFocus:i,disableOutsidePointerEvents:a,onEscapeKeyDown:l,onPointerDownOutside:u,onFocusOutside:d,onInteractOutside:h,...p}=r,g=Kn(Mo,t),b=xa(t);return mE(),o.jsx(pE,{asChild:!0,loop:!0,trapped:n,onMountAutoFocus:s,onUnmountAutoFocus:i,children:o.jsx(Xy,{asChild:!0,disableOutsidePointerEvents:a,onInteractOutside:h,onEscapeKeyDown:l,onPointerDownOutside:u,onFocusOutside:d,onDismiss:()=>g.onOpenChange(!1),children:o.jsx(Jy,{"data-state":R1(g.open),role:"dialog",id:g.contentId,...b,...p,ref:e,style:{...p.style,"--radix-popover-content-transform-origin":"var(--radix-popper-transform-origin)","--radix-popover-content-available-width":"var(--radix-popper-available-width)","--radix-popover-content-available-height":"var(--radix-popper-available-height)","--radix-popover-trigger-width":"var(--radix-popper-anchor-width)","--radix-popover-trigger-height":"var(--radix-popper-anchor-height)"}})})})}),A1="PopoverClose",vO=m.forwardRef((r,e)=>{const{__scopePopover:t,...n}=r,s=Kn(A1,t);return o.jsx(De.button,{type:"button",...n,ref:e,onClick:_e(r.onClick,()=>s.onOpenChange(!1))})});vO.displayName=A1;var wO="PopoverArrow",_O=m.forwardRef((r,e)=>{const{__scopePopover:t,...n}=r,s=xa(t);return o.jsx(tx,{...s,...n,ref:e})});_O.displayName=wO;function R1(r){return r?"open":"closed"}var TO=E1,EO=k1,NO=S1,P1=j1;const CO=TO,kO=EO,M1=m.forwardRef(({className:r,align:e="center",sideOffset:t=4,...n},s)=>o.jsx(NO,{children:o.jsx(P1,{ref:s,align:e,sideOffset:t,className:ee("z-50 w-72 rounded-md border bg-popover p-4 text-popover-foreground shadow-md  data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2 origin-[--radix-popover-content-transform-origin]",r),...n})}));M1.displayName=P1.displayName;const Kf=yx,SO=gx,D1=m.forwardRef(({className:r,...e},t)=>o.jsx(ch,{ref:t,className:ee("fixed inset-0 z-50 bg-black/80 data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 backdrop-blur-sm",r),...e}));D1.displayName=ch.displayName;const qc=m.forwardRef(({className:r,children:e,...t},n)=>o.jsxs(SO,{children:[o.jsx(D1,{}),o.jsxs(uh,{ref:n,className:ee("fixed left-[50%] top-[50%] z-[9999] grid w-full max-w-lg translate-x-[-50%] translate-y-[-50%] gap-4 border bg-background p-6 shadow-lg duration-200 data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[state=closed]:slide-out-to-left-1/2 data-[state=closed]:slide-out-to-top-[48%] data-[state=open]:slide-in-from-left-1/2 data-[state=open]:slide-in-from-top-[48%] sm:rounded-lg",r),style:{maxHeight:"90vh",overflowY:"auto",margin:"20px"},"aria-describedby":"dialog-description",...t,children:[e,o.jsxs(fh,{className:"absolute right-4 top-4 rounded-sm opacity-70 transition-opacity hover:opacity-100 disabled:pointer-events-none data-[state=open]:bg-accent data-[state=open]:text-muted-foreground",children:[o.jsx($n,{className:"h-4 w-4"}),o.jsx("span",{className:"sr-only",children:"Close"})]})]})]}));qc.displayName=uh.displayName;const Hc=({className:r,...e})=>o.jsx("div",{className:ee("flex flex-col space-y-1.5 text-center sm:text-left",r),...e});Hc.displayName="DialogHeader";const Wc=m.forwardRef(({className:r,...e},t)=>o.jsx(dh,{ref:t,className:ee("text-lg font-semibold leading-none tracking-tight",r),...e}));Wc.displayName=dh.displayName;const O1=m.forwardRef(({className:r,...e},t)=>o.jsx(hh,{ref:t,className:ee("text-sm text-muted-foreground",r),...e}));O1.displayName=hh.displayName;const jO={"classic-metal":o.jsx(BM,{className:"w-4 h-4"}),"black-metal":o.jsx(wy,{className:"w-4 h-4"}),"death-metal":o.jsx(wy,{className:"w-4 h-4"}),"power-metal":o.jsx(hr,{className:"w-4 h-4"}),"doom-metal":o.jsx(s5,{className:"w-4 h-4"}),"thrash-metal":o.jsx(h_,{className:"w-4 h-4"}),"gothic-metal":o.jsx(Qs,{className:"w-4 h-4"}),"light-mode":o.jsx(r5,{className:"w-4 h-4"}),"dark-mode":o.jsx(GM,{className:"w-4 h-4"}),"glassmorphism-premium":o.jsx(c_,{className:"w-4 h-4"})};function ky(){const{currentTheme:r,setTheme:e,getColors:t}=ue(),{user:n}=Wt(),[s,i]=m.useState(!1),[a,l]=m.useState(!1),u=t(),d=(g,b)=>{if(b.isPremium){l(!0);return}e(g),i(!1)},h=()=>{l(!1),i(!1);const g=document.getElementById("subscription-section");g&&g.scrollIntoView({behavior:"smooth",block:"center"})},p=Object.entries(Xs).sort(([g,b],[C,x])=>g===r?-1:C===r?1:b.isPremium&&!x.isPremium?-1:!b.isPremium&&x.isPremium?1:0);return o.jsx("div",{className:"flex items-center gap-2",children:o.jsxs(CO,{open:s,onOpenChange:i,children:[o.jsx(kO,{asChild:!0,children:o.jsxs(J,{variant:"ghost",size:"sm",className:"flex items-center gap-2 hover:bg-opacity-20 theme-button-border focus:outline-none focus:ring-0",style:{color:r==="light-mode"?"#000000":u.text,backgroundColor:"transparent"},children:[o.jsx(by,{className:"w-4 h-4",style:{color:u.primary}}),o.jsx("span",{className:"hidden sm:inline text-sm font-medium",style:{color:r==="light-mode"?"#3B82F6":u.text},children:Xs[r].name})]})}),o.jsx(M1,{className:"w-80 p-0 border-0 max-h-[80vh] overflow-hidden",style:{backgroundColor:u.surface,border:`1px solid ${u.border}`},children:o.jsxs(ne,{className:"border-0 shadow-xl",style:{backgroundColor:u.surface},children:[o.jsxs(Ye,{className:"pb-3",children:[o.jsxs(Je,{className:"text-lg font-black flex items-center gap-2",style:{color:u.text},children:[o.jsx(by,{className:"w-5 h-5",style:{color:u.primary}}),"Theme Selector"]}),o.jsx("p",{className:"text-sm",style:{color:u.textSecondary},children:"Choose your visual theme"})]}),o.jsx(oe,{className:"space-y-2 max-h-[60vh] overflow-y-auto pt-4",children:p.map(([g,b])=>{const C=r===g,x=g==="light-mode",v=b.colors[x?"light":"dark"],E=b.isPremium,T=E&&!0;return o.jsx(J,{onClick:()=>d(g,b),variant:"ghost",className:`w-full justify-start p-3 h-auto transition-all duration-200 focus:outline-none focus:ring-0 ${C?"ring-2":""} ${T?"opacity-75":""}`,style:{backgroundColor:C?u.primary:"transparent",borderColor:C?u.primary:"transparent",color:C?"white":u.text},onMouseEnter:N=>{if(!C&&!T){const R=g==="glassmorphism-premium"?"30":"15";N.currentTarget.style.backgroundColor=`${v.primary}${R}`,N.currentTarget.style.color=v.text}},onMouseLeave:N=>{C||(N.currentTarget.style.backgroundColor="transparent",N.currentTarget.style.color=u.text)},children:o.jsxs("div",{className:"flex items-start gap-3 w-full",children:[o.jsx("div",{className:"w-8 h-8 rounded-full flex items-center justify-center flex-shrink-0",style:{background:g==="dark-mode"?"linear-gradient(135deg, #0a0a0a 0%, #1a1a1a 100%)":g==="glassmorphism-premium"?"linear-gradient(135deg, #8b0080 0%, #ff0080 25%, #ff6600 50%, #cc9900 75%, #ff0080 100%)":b.gradient,color:"#ffffff"},children:jO[g]}),o.jsxs("div",{className:"flex-1 text-left min-w-0",children:[o.jsx("div",{className:"flex items-center gap-2 justify-between",children:o.jsxs("div",{className:"flex items-center gap-2 flex-1",children:[o.jsx("span",{className:"font-semibold text-sm",style:{color:C?"white":v.primary},children:b.name}),E&&!C&&o.jsx(Ho,{className:"w-4 h-4 flex-shrink-0",style:{color:"#ffd700",fill:"#ffd700",filter:T?"grayscale(100%) opacity(0.5)":"drop-shadow(0 0 1px rgba(255, 215, 0, 0.3))"}}),C&&o.jsx(Ke,{variant:"secondary",className:"text-xs px-2 py-0",style:{backgroundColor:"white",color:u.primary},children:"Active"})]})}),o.jsx("p",{className:"text-xs mt-1 break-words leading-relaxed whitespace-pre-wrap overflow-hidden",style:{color:C?"rgba(255, 255, 255, 0.8)":`${v.primary}80`,wordBreak:"break-word",overflowWrap:"break-word"},children:b.description}),o.jsx("div",{className:"flex gap-1 mt-2",children:g==="glassmorphism-premium"?o.jsxs("div",{className:"flex gap-1",children:[o.jsx("div",{className:"w-3 h-3 rounded-full border",style:{backgroundColor:"#8b0080",borderColor:u.border}}),o.jsx("div",{className:"w-3 h-3 rounded-full border",style:{backgroundColor:"#ff0080",borderColor:u.border}}),o.jsx("div",{className:"w-3 h-3 rounded-full border",style:{backgroundColor:"#ff6600",borderColor:u.border}}),o.jsx("div",{className:"w-3 h-3 rounded-full border",style:{backgroundColor:"#cc9900",borderColor:u.border}})]}):o.jsxs(o.Fragment,{children:[o.jsx("div",{className:"w-3 h-3 rounded-full border",style:{backgroundColor:v.primary,borderColor:u.border}}),o.jsx("div",{className:"w-3 h-3 rounded-full border",style:{backgroundColor:v.secondary,borderColor:u.border}}),o.jsx("div",{className:"w-3 h-3 rounded-full border",style:{backgroundColor:v.accent,borderColor:u.border}})]})})]})]})},g)})}),o.jsx(Kf,{open:a,onOpenChange:l,children:o.jsx(qc,{className:"sm:max-w-md border-0",style:{background:"linear-gradient(135deg, #8b0080 0%, #ff0080 25%, #ff6600 50%, #cc9900 75%, #ff0080 100%)",backgroundSize:"400% 400%",animation:"glassmorphGradient 8s ease infinite",backdropFilter:"blur(20px)",border:"1px solid rgba(255, 255, 255, 0.18)"},children:o.jsxs("div",{className:"rounded-lg p-4 max-w-md mx-auto",style:{backgroundColor:"rgba(255, 255, 255, 0.08)",backdropFilter:"blur(20px)",border:"1px solid rgba(255, 255, 255, 0.18)"},children:[o.jsxs(Hc,{className:"text-center space-y-3",children:[o.jsx("div",{className:"flex justify-center",children:o.jsx("div",{className:"w-12 h-12 rounded-full flex items-center justify-center",style:{background:"rgba(255, 255, 255, 0.1)",backdropFilter:"blur(20px)",border:"1px solid rgba(255, 255, 255, 0.2)"},children:o.jsx(c_,{className:"w-6 h-6 text-white"})})}),o.jsx(Wc,{className:"text-xl font-bold text-white leading-tight text-center",children:"Glassmorphism Rock Theme"}),o.jsx(O1,{className:"text-white/90 text-sm leading-relaxed text-center px-2",children:"Experience the ultimate rock vibe with our premium glassmorphism theme featuring vibrant colors and stunning glass effects."})]}),o.jsxs("div",{className:"mt-4 space-y-4",children:[o.jsxs("div",{className:"text-center",children:[o.jsx("p",{className:"text-white/80 text-xs text-center",children:"This premium theme includes:"}),o.jsxs("ul",{className:"text-white text-xs mt-2 space-y-1 leading-relaxed text-center list-none",children:[o.jsx("li",{children:"• Vibrant gradient backgrounds"}),o.jsx("li",{children:"• Glass morphism effects"}),o.jsx("li",{children:"• Rock-inspired color palette"}),o.jsx("li",{children:"• Enhanced visual experience"})]})]}),o.jsxs("div",{className:"flex gap-2 mt-4",children:[o.jsx(J,{onClick:()=>l(!1),variant:"ghost",className:"flex-1 text-white border border-primary/30 hover:bg-white/20 font-semibold px-4 py-2 text-sm focus:outline-none focus:ring-0",style:{backgroundColor:"rgba(255, 255, 255, 0.1)",backdropFilter:"blur(10px)",border:"1px solid rgba(59, 130, 246, 0.3)",borderRadius:"6px"},children:"Cancel"}),o.jsx(J,{onClick:h,className:"flex-1 font-bold px-4 py-2 text-sm text-white focus:outline-none focus:ring-0",style:{background:"rgba(255, 255, 255, 0.15)",backdropFilter:"blur(15px)",border:"1px solid rgba(59, 130, 246, 0.3)",borderRadius:"6px",boxShadow:"0 4px 20px rgba(59, 130, 246, 0.1)"},children:"Get Premium"})]}),o.jsx("div",{className:"mt-3 pt-3 border-t border-primary/20",children:o.jsx(J,{onClick:()=>{e("glassmorphism-premium"),l(!1),i(!1)},className:"w-full font-semibold px-4 py-2 text-xs focus:outline-none focus:ring-0",style:{background:`${u.accent}20`,backdropFilter:"blur(15px)",border:`1px solid ${u.accent}40`,borderRadius:"6px",boxShadow:`0 4px 20px ${u.accent}20`,color:u.accent},children:"Preview Theme (Development Only)"})})]})]})})})]})})]})})}var IO="Label",L1=m.forwardRef((r,e)=>o.jsx(De.label,{...r,ref:e,onMouseDown:t=>{var s;t.target.closest("button, input, select, textarea")||((s=r.onMouseDown)==null||s.call(r,t),!t.defaultPrevented&&t.detail>1&&t.preventDefault())}}));L1.displayName=IO;var V1=L1;const AO=Dc("text-sm font-medium leading-none peer-disabled:cursor-not-allowed peer-disabled:opacity-70"),Ae=m.forwardRef(({className:r,...e},t)=>o.jsx(V1,{ref:t,className:ee(AO(),r),...e}));Ae.displayName=V1.displayName;const RO="/GoogleLogoIcon.png";function PO({isOpen:r,onClose:e,initialMode:t="login"}){const[n,s]=m.useState(t);m.useEffect(()=>{s(t)},[t]);const[i,a]=m.useState(""),[l,u]=m.useState(""),[d,h]=m.useState(""),[p,g]=m.useState(""),[b,C]=m.useState(""),[x,v]=m.useState(""),[E,T]=m.useState(!1),[N,R]=m.useState(""),{isAuthenticated:L,signInWithGoogle:U,register:A,signIn:w}=Wt(),{getColors:k}=ue(),{toast:j}=Gr(),_=k(),M=async()=>{try{T(!0),await U(),e()}catch(P){j({title:"Sign In Failed",description:P.message||"Failed to sign in with Google.",variant:"destructive"})}finally{T(!1)}},I=P=>{const z=P.replace(/[^\d]/g,""),Y=(z==null?void 0:z.length)||0;return Y<4?z:Y<7?`(${z.slice(0,3)}) ${z.slice(3)}`:`(${z.slice(0,3)}) ${z.slice(3,6)}-${z.slice(6,10)}`},X=P=>{const z=I(P.target.value);v(z)},se=async P=>{P.preventDefault(),T(!0);try{if(n==="login"){const z=await w(i,l);if(!z.success)throw new Error(z.error||"Login failed");j({title:"Welcome back!",description:"You've successfully logged in."}),e(),window.location.reload()}else{const z=await A(i,l,p,b,x.replace(/[^\d]/g,""));if(!z.success)throw new Error(z.error||"Registration failed");j({title:"Account created!",description:"Welcome to Spandex Salvation Radio!"}),e(),window.location.reload()}le()}catch(z){j({title:n==="login"?"Login failed":"Registration failed",description:z.message||"Please try again.",variant:"destructive"})}finally{T(!1)}},le=()=>{a(""),u(""),h(""),g(""),C(""),v("")},Z=()=>{s(n==="login"?"register":"login"),le()};return o.jsx(Kf,{open:r,onOpenChange:e,children:o.jsxs(qc,{className:"w-full max-w-md animate-in fade-in zoom-in duration-300",style:{backgroundColor:_.background||"rgba(0, 0, 0, 0.95)",border:`2px solid ${_.primary}40`,borderRadius:"16px",boxShadow:`0 25px 50px -12px ${_.primary}20`},children:[o.jsx(Hc,{children:o.jsx(Wc,{className:"flex items-center gap-2",style:{color:_.text},children:n==="login"?o.jsxs(o.Fragment,{children:[o.jsx(l_,{className:"h-5 w-5",style:{color:_.primary}}),"Sign In"]}):o.jsxs(o.Fragment,{children:[o.jsx(d_,{className:"h-5 w-5",style:{color:_.primary}}),"Create Account"]})})}),o.jsxs("form",{onSubmit:se,className:"space-y-4",children:[n==="register"&&o.jsxs(o.Fragment,{children:[o.jsxs("div",{className:"space-y-2",children:[o.jsx(Ae,{htmlFor:"username",style:{color:_.text,fontWeight:"600"},children:"Username"}),o.jsxs("div",{className:"relative",children:[o.jsx(Ot,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 h-4 w-4 text-gray-400"}),o.jsx(Be,{id:"username",value:d,onChange:P=>h(P.target.value),className:"pl-10 transition-all duration-200",style:{color:_.text,backgroundColor:_.background||"rgba(0, 0, 0, 0.5)",borderColor:_.primary+"40",borderRadius:"8px"},onFocus:P=>P.currentTarget.style.borderColor=_.primary,onBlur:P=>P.currentTarget.style.borderColor=_.primary+"40",placeholder:"Username",required:!0})]})]}),o.jsxs("div",{className:"grid grid-cols-2 gap-3",children:[o.jsxs("div",{className:"space-y-2",children:[o.jsx(Ae,{htmlFor:"firstName",style:{color:_.text,fontWeight:"600"},children:"First Name"}),o.jsxs("div",{className:"relative",children:[o.jsx(Ot,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 h-4 w-4 text-gray-400"}),o.jsx(Be,{id:"firstName",value:p,onChange:P=>g(P.target.value),className:"pl-10 transition-all duration-200",style:{color:_.text,backgroundColor:_.background||"rgba(0, 0, 0, 0.5)",borderColor:_.primary+"40",borderRadius:"8px"},onFocus:P=>P.currentTarget.style.borderColor=_.primary,onBlur:P=>P.currentTarget.style.borderColor=_.primary+"40",placeholder:"John",required:!0})]})]}),o.jsxs("div",{className:"space-y-2",children:[o.jsx(Ae,{htmlFor:"lastName",style:{color:_.text,fontWeight:"600"},children:"Last Name"}),o.jsxs("div",{className:"relative",children:[o.jsx(Ot,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 h-4 w-4 text-gray-400"}),o.jsx(Be,{id:"lastName",value:b,onChange:P=>C(P.target.value),className:"pl-10 transition-all duration-200",style:{color:_.text,backgroundColor:_.background||"rgba(0, 0, 0, 0.5)",borderColor:_.primary+"40",borderRadius:"8px"},onFocus:P=>P.currentTarget.style.borderColor=_.primary,onBlur:P=>P.currentTarget.style.borderColor=_.primary+"40",placeholder:"Doe",required:!0})]})]})]}),o.jsxs("div",{className:"space-y-2",children:[o.jsx(Ae,{htmlFor:"phoneNumber",style:{color:_.text,fontWeight:"600"},children:"Phone Number"}),o.jsxs("div",{className:"relative",children:[o.jsx(Zd,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 h-4 w-4 text-gray-400"}),o.jsx(Be,{id:"phoneNumber",type:"tel",value:x,onChange:X,className:"pl-10 transition-all duration-200",style:{color:_.text,backgroundColor:_.background||"rgba(0, 0, 0, 0.5)",borderColor:_.primary+"40",borderRadius:"8px"},onFocus:P=>P.currentTarget.style.borderColor=_.primary,onBlur:P=>P.currentTarget.style.borderColor=_.primary+"40",placeholder:"(555) 123-4567",required:!0})]})]})]}),o.jsxs("div",{className:"space-y-2",children:[o.jsx(Ae,{htmlFor:"email",style:{color:_.text,fontWeight:"600"},children:"Email"}),o.jsxs("div",{className:"relative",children:[o.jsx(Hl,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 h-4 w-4 text-gray-400"}),o.jsx(Be,{id:"email",type:"email",value:i,onChange:P=>a(P.target.value),className:"pl-10 transition-all duration-200",style:{color:_.text,backgroundColor:_.background||"rgba(0, 0, 0, 0.5)",borderColor:_.primary+"40",borderRadius:"8px"},onFocus:P=>P.currentTarget.style.borderColor=_.primary,onBlur:P=>P.currentTarget.style.borderColor=_.primary+"40",placeholder:"email@example.com",required:!0})]})]}),o.jsxs("div",{className:"space-y-2",children:[o.jsx(Ae,{htmlFor:"password",style:{color:_.text,fontWeight:"600"},children:"Password"}),o.jsxs("div",{className:"relative",children:[o.jsx(Yd,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 h-4 w-4 text-gray-400"}),o.jsx(Be,{id:"password",type:"password",value:l,onChange:P=>u(P.target.value),className:"pl-10 transition-all duration-200",style:{color:_.text,backgroundColor:_.background||"rgba(0, 0, 0, 0.5)",borderColor:_.primary+"40",borderRadius:"8px"},onFocus:P=>P.currentTarget.style.borderColor=_.primary,onBlur:P=>P.currentTarget.style.borderColor=_.primary+"40",placeholder:"Password",autoComplete:n==="login"?"current-password":"new-password",required:!0})]})]}),o.jsx(J,{type:"submit",className:"w-full text-white border-0 rounded-lg transition-all duration-200 hover:scale-105 focus:outline-none focus:ring-0",style:{backgroundColor:_.primary,border:`2px solid ${_.primary}`,boxShadow:`0 4px 20px ${_.primary}40`},onMouseEnter:P=>P.currentTarget.style.backgroundColor=_.secondary,onMouseLeave:P=>P.currentTarget.style.backgroundColor=_.primary,disabled:E,children:E?o.jsxs(o.Fragment,{children:[o.jsx(a_,{className:"mr-2 h-4 w-4 animate-spin"}),n==="login"?"Logging In...":"Creating Account..."]}):n==="login"?"Login":"Create Account"}),o.jsxs("div",{className:"relative",children:[o.jsx("div",{className:"absolute inset-0 flex items-center",children:o.jsx("span",{className:"w-full border-t border-gray-600"})}),o.jsx("div",{className:"relative flex justify-center text-xs uppercase",children:o.jsx("span",{className:"bg-black px-2 text-gray-400",children:"Or continue with"})})]}),o.jsxs(J,{type:"button",variant:"outline",onClick:M,className:"w-full rounded-lg transition-all duration-200 hover:scale-105 focus:outline-none focus:ring-0",style:{backgroundColor:_.background||"rgba(255, 255, 255, 0.1)",color:_.text,border:`2px solid ${_.primary}40`,backdropFilter:"blur(10px)"},onMouseEnter:P=>{P.currentTarget.style.backgroundColor=_.primary+"20",P.currentTarget.style.borderColor=_.primary},onMouseLeave:P=>{P.currentTarget.style.backgroundColor=_.background||"rgba(255, 255, 255, 0.1)",P.currentTarget.style.borderColor=_.primary+"40"},disabled:E,children:[o.jsx("img",{src:RO,alt:"Google",className:"mr-2 h-4 w-4"}),n==="login"?"Continue with Google":"Sign Up with Google"]}),o.jsx("div",{className:"text-center",children:o.jsx("button",{type:"button",onClick:Z,className:"text-sm transition-colors duration-200 focus:outline-none focus:ring-0",style:{color:_.primary},onMouseEnter:P=>P.currentTarget.style.color=_.secondary,onMouseLeave:P=>P.currentTarget.style.color=_.primary,children:n==="login"?"Don't have an account? Sign up":"Already have an account? Sign in"})})]})]})})}const F1="/MusicLogoIcon.png";function Qf(){var Z;const[r,e]=m.useState(!1),[t,n]=m.useState(!1),[s,i]=m.useState(!1),[a,l]=m.useState("login"),[u,d]=m.useState(!1);m.useEffect(()=>{const P=z=>{var Y;l(((Y=z.detail)==null?void 0:Y.mode)||"login"),i(!0)};return window.addEventListener("openAuthModal",P),()=>window.removeEventListener("openAuthModal",P)},[]);const{colors:h,gradient:p,toggleTheme:g,isDarkMode:b,currentTheme:C}=ue(),{user:x,signOut:v}=Wt(),E=async()=>{try{await v(),window.location.href="/"}catch(P){console.error("Logout error:",P),window.location.href="/"}},T=m.useRef(null),N=m.useRef(null),R=m.useRef(null),L=m.useRef(null),U=m.useRef(null),[A,w]=m.useState(0);m.useEffect(()=>{const P=z=>{r&&T.current&&!T.current.contains(z.target)&&R.current&&!R.current.contains(z.target)&&e(!1),t&&N.current&&!N.current.contains(z.target)&&n(!1)};if(r||t)return document.addEventListener("click",P),()=>document.removeEventListener("click",P)},[r,t]),m.useEffect(()=>{const P=()=>{if(U.current){const Y=window.innerWidth,xe=U.current.offsetWidth||400,q=Y/2-xe/2;w(q)}};P();const z=setTimeout(P,100);return window.addEventListener("resize",P),()=>{clearTimeout(z),window.removeEventListener("resize",P)}},[]);const[k,j]=zo(),_=(P,z)=>{if(console.log(`Navigation: ${P}, route: ${z}`),e(!1),n(!1),z&&z!==k){j(z),P&&P!==z.replace("/","")&&setTimeout(()=>{const Y=document.getElementById(P);Y&&Y.scrollIntoView({behavior:"smooth",block:"start"})},200);return}if(P){if(k!=="/"){window.location.href=`/#${P}`;return}setTimeout(()=>{const Y=document.getElementById(P);Y&&Y.scrollIntoView({behavior:"smooth",block:"start"})},50)}},M=()=>{k==="/"?window.scrollTo({top:0,behavior:"smooth"}):j("/")},I=()=>{e(!1),n(!1),l("login"),i(!0)},X=()=>{e(!1),n(!1),l("register"),i(!0)},se=()=>{e(!1),n(!1),E()},le=[{id:1,label:"MUSIC",icon:Ao,action:()=>_("music","/music"),tooltip:"Listen to live radio and music"},{id:2,label:"SCHEDULE",icon:is,action:()=>_("schedule","/schedule"),tooltip:"View show schedule and programming"},{id:3,label:"SUPPORT US",icon:Qs,action:()=>_("subscribe","/support"),tooltip:"Support the station with premium subscriptions"},{id:4,label:"SUBMISSIONS",icon:Wi,action:()=>_("submissions","/submissions"),tooltip:"Submit song requests and feedback"},{id:5,label:"CONTACT",icon:Zd,action:()=>_("contact","/contact"),tooltip:"Get in touch with the station"},{id:6,label:"LISTEN MAP",icon:Jd,action:()=>_("map","/map"),tooltip:"View live listener map worldwide"},{id:7,label:"FEATURES",icon:Qs,action:()=>_("features","/features"),tooltip:"Explore premium features and subscription tiers"}];return o.jsxs(R_,{children:[o.jsx("nav",{className:"fixed top-0 left-0 right-0 z-50 bg-card/80 backdrop-blur-sm transition-colors duration-300 safe-area-inset-top",children:o.jsxs("div",{className:"w-full relative",children:[o.jsxs("div",{className:"xl:relative flex justify-between items-center h-16",style:{paddingLeft:"15px",paddingRight:"15px"},children:[o.jsxs("div",{className:"flex items-center space-x-4",children:[o.jsx("div",{className:"flex items-center justify-center w-8 h-8 rounded-full cursor-pointer logo-container",style:{background:p,padding:"5px"},onClick:M,onMouseEnter:P=>{const z=P.currentTarget.querySelector("img");z&&!z.classList.contains("logo-spin-easter-egg")&&z.classList.add("logo-spin-easter-egg")},children:o.jsx("img",{src:F1,alt:"Music Logo",className:"w-full h-full object-contain",onAnimationEnd:P=>{P.currentTarget.classList.remove("logo-spin-easter-egg")}})}),o.jsxs("div",{className:"flex flex-col",id:"brand-text",ref:L,children:[o.jsx("div",{className:"text-sm font-black leading-tight transition-colors duration-300",style:{color:h.textMuted},children:"SPANDEX SALVATION"}),o.jsx("div",{className:"text-sm font-black leading-tight",style:{color:h.primary},children:"RADIO"})]})]}),o.jsxs("div",{ref:U,className:"hidden xl:flex items-center space-x-4 absolute",style:{left:`${A}px`,top:"50%",transform:"translateY(-50%)",transition:"left 0.3s ease"},children:[le.slice(0,3).map(P=>{const z=P.icon;return o.jsxs(qu,{children:[o.jsx(Hu,{asChild:!0,children:o.jsxs("button",{onClick:P.action,className:"flex items-center space-x-2 text-sm font-semibold transition-all duration-200 px-3 py-2 rounded-md hover:shadow-lg hover:scale-105 active:scale-95 focus:outline-none focus:ring-0",style:{color:h.text,transform:"scale(1)",transition:"all 0.2s ease"},onMouseEnter:Y=>{Y.currentTarget.style.backgroundColor=h.primary+"20",Y.currentTarget.style.color="white",Y.currentTarget.style.transform="scale(1.05)"},onMouseLeave:Y=>{Y.currentTarget.style.backgroundColor="transparent",Y.currentTarget.style.color=h.text,Y.currentTarget.style.transform="scale(1)"},onMouseDown:Y=>{Y.currentTarget.style.transform="scale(0.95)"},onMouseUp:Y=>{Y.currentTarget.style.transform="scale(1.05)"},children:[o.jsx(z,{size:16,style:{color:h.primary}}),o.jsx("span",{children:P.label})]})}),o.jsx(fl,{side:"bottom",children:P.tooltip})]},P.id)}),o.jsxs("div",{className:"relative",ref:N,children:[o.jsxs(qu,{children:[o.jsx(Hu,{asChild:!0,children:o.jsxs("button",{onClick:()=>n(!t),className:"flex items-center space-x-1 text-sm font-semibold transition-all duration-200 px-3 py-2 rounded-md hover:shadow-lg hover:scale-105 active:scale-95 focus:outline-none focus:ring-0",style:{color:t?"white":h.text,backgroundColor:t?h.primary:"transparent",transform:"scale(1)",transition:"all 0.2s ease"},onMouseEnter:P=>{t||(P.currentTarget.style.backgroundColor=h.primary+"20",P.currentTarget.style.color="white",P.currentTarget.style.transform="scale(1.05)")},onMouseLeave:P=>{t||(P.currentTarget.style.backgroundColor=t?h.primary:"transparent",P.currentTarget.style.color=t?"white":h.text,P.currentTarget.style.transform="scale(1)")},onMouseDown:P=>{P.currentTarget.style.transform="scale(0.95)"},onMouseUp:P=>{P.currentTarget.style.transform="scale(1.05)"},children:[o.jsx(xy,{size:16,style:{color:t?"white":h.primary,marginLeft:"2px"}}),o.jsx("span",{children:"MORE"}),o.jsx(ql,{size:16,className:"transition-transform duration-300 ease-out",style:{color:h.text,transform:t?"rotate(180deg)":"rotate(0deg)"}})]})}),o.jsx(fl,{side:"bottom",children:"View more navigation options"})]}),t&&o.jsx("div",{className:"absolute left-1/2 transform -translate-x-1/2 mt-2 py-2 rounded-xl shadow-xl border animate-in fade-in-0 slide-in-from-top-2 duration-200 backdrop-blur-md",style:{backgroundColor:b?"rgba(0, 0, 0, 0.95)":"rgba(255, 255, 255, 0.95)",borderColor:h.primary+"40",width:"auto",minWidth:"max-content",zIndex:50},children:le.slice(3).map(P=>{const z=P.icon,Y=b?h.text:"#000000";return o.jsxs(qu,{children:[o.jsx(Hu,{asChild:!0,children:o.jsxs("button",{onClick:P.action,className:"flex items-center space-x-3 px-4 py-3 text-sm font-semibold transition-all duration-200 whitespace-nowrap hover:rounded-lg hover:scale-105 active:scale-95 w-full focus:outline-none focus:ring-0",style:{color:Y,transform:"scale(1)",transition:"all 0.2s ease"},onMouseEnter:xe=>{xe.currentTarget.style.backgroundColor=h.primary+"20",xe.currentTarget.style.color="white",xe.currentTarget.style.transform="scale(1.05)"},onMouseLeave:xe=>{xe.currentTarget.style.backgroundColor="transparent",xe.currentTarget.style.color=Y,xe.currentTarget.style.transform="scale(1)"},onMouseDown:xe=>{xe.currentTarget.style.transform="scale(0.95)"},onMouseUp:xe=>{xe.currentTarget.style.transform="scale(1.05)"},children:[o.jsx(z,{size:16,style:{color:h.primary}}),o.jsx("span",{children:P.label})]})}),o.jsx(fl,{side:"left",align:"center",sideOffset:5,children:P.tooltip})]},P.id)})})]})]}),o.jsxs("div",{className:"hidden xl:flex items-center space-x-1 absolute right-4 top-1/2 transform -translate-y-1/2",children:[o.jsx(ky,{}),x?o.jsx("div",{className:"flex items-center",children:o.jsxs(r1,{children:[o.jsx(n1,{asChild:!0,children:o.jsxs("button",{className:"relative flex items-center space-x-2 p-1 rounded-full transition-all duration-200 hover:scale-105 active:scale-95 focus:outline-none",style:{backgroundColor:"transparent"},children:[o.jsxs("div",{className:"relative",children:[o.jsx("div",{className:"w-10 h-10 rounded-full bg-gradient-to-br flex items-center justify-center shadow-lg ring-2 ring-offset-2",style:{background:x!=null&&x.photoURL?`url(${x.photoURL}) center/cover`:p,"--ring-color":h.primary,"--ring-offset-color":b?"#000000":"#ffffff"},children:!(x!=null&&x.photoURL)&&o.jsx(Ot,{size:20,className:"text-white"})}),(x==null?void 0:x.displayName)&&o.jsx("div",{className:"absolute -bottom-1 -right-1 w-5 h-5 rounded-full flex items-center justify-center shadow-md",style:{backgroundColor:h.primary,border:`2px solid ${b?"#000000":h.primary}`},children:o.jsx("svg",{width:"12",height:"12",viewBox:"0 0 24 24",fill:"none",className:"text-white",children:o.jsx("path",{d:"M9 12L11 14L15 10M21 12C21 16.9706 16.9706 21 12 21C7.02944 21 3 16.9706 3 12C3 7.02944 7.02944 3 12 3C16.9706 3 21 7.02944 21 12Z",stroke:"currentColor",strokeWidth:"2.5",strokeLinecap:"round",strokeLinejoin:"round"})})})]}),o.jsx(ql,{size:16,className:"transition-transform duration-200",style:{color:h.text}})]})}),o.jsxs(Wf,{align:"end",className:"w-64 p-2 mt-2 shadow-2xl animate-in fade-in-0 zoom-in-95 slide-in-from-top-2 duration-200 ease-out",style:{backgroundColor:b?"rgba(0, 0, 0, 0.95)":"rgba(255, 255, 255, 0.95)",backdropFilter:"blur(10px)"},children:[o.jsxs("div",{className:"px-3 py-2 mb-2",children:[o.jsx("p",{className:"font-black text-sm",style:{color:b?h.text:"#000000"},children:(x==null?void 0:x.displayName)||((Z=x==null?void 0:x.email)==null?void 0:Z.split("@")[0])||"User"}),o.jsx("p",{className:"text-xs opacity-70",style:{color:b?h.text:"#000000"},children:x==null?void 0:x.email})]}),o.jsx(nh,{className:"opacity-20"}),o.jsxs(co,{onClick:()=>j("/profile?section=profile"),className:"flex items-center space-x-3 p-3 rounded-lg cursor-pointer transition-all duration-200",style:{color:b?h.text:"#000000"},children:[o.jsx(Ot,{size:18,style:{color:h.primary}}),o.jsx("span",{className:"font-semibold",children:"Profile"})]}),o.jsxs(co,{onClick:()=>j("/profile?section=submissions"),className:"flex items-center space-x-3 p-3 rounded-lg cursor-pointer transition-all duration-200",style:{color:b?h.text:"#000000"},children:[o.jsx(Qd,{size:18,style:{color:h.primary}}),o.jsxs("span",{className:"font-semibold",children:["Submission",o.jsx("br",{}),"Requests"]})]}),o.jsx(nh,{className:"opacity-20"}),o.jsxs(co,{onClick:()=>d(!0),className:"flex items-center space-x-3 p-3 rounded-lg cursor-pointer transition-all duration-200",style:{color:"#EF4444"},children:[o.jsx(Xd,{size:18,className:"text-red-500"}),o.jsx("span",{className:"font-semibold",children:"Logout"})]})]})]})}):o.jsxs("div",{className:"flex items-center space-x-3",children:[o.jsx("button",{onClick:I,className:"px-4 py-2 text-sm font-semibold rounded-lg transition-all duration-200 hover:scale-105 active:scale-95 focus:outline-none focus:ring-0",style:{color:h.text,border:`2px solid ${h.primary}`,backgroundColor:"transparent",borderRadius:"8px",height:"32px",minWidth:"80px",transform:"scale(1)",transition:"all 0.2s ease"},onMouseEnter:P=>{P.currentTarget.style.transform="scale(1.05)",P.currentTarget.style.backgroundColor=h.primary+"10"},onMouseLeave:P=>{P.currentTarget.style.transform="scale(1)",P.currentTarget.style.backgroundColor="transparent"},onMouseDown:P=>{P.currentTarget.style.transform="scale(0.95)"},onMouseUp:P=>{P.currentTarget.style.transform="scale(1.05)"},children:"LOGIN"}),o.jsx("button",{onClick:X,className:"px-4 py-2 text-sm font-semibold rounded-lg transition-all duration-200 hover:scale-105 active:scale-95 focus:outline-none whitespace-nowrap",style:{backgroundColor:h.primary,color:"white",border:`2px solid ${h.primary}`,borderRadius:"8px",height:"32px",minWidth:"80px"},children:"SIGN UP"})]})]}),o.jsxs("div",{className:"xl:hidden flex items-center space-x-3",children:[o.jsx(ky,{}),o.jsx("button",{ref:T,onClick:()=>e(!r),className:"p-2 rounded-lg transition-all duration-200 flex items-center justify-center hover:scale-105 active:scale-95 focus:outline-none focus:ring-0",style:{backgroundColor:r?h.primary:"transparent",color:r?"white":h.primary,transform:"scale(1)",transition:"all 0.2s ease"},onMouseEnter:P=>{r||(P.currentTarget.style.transform="scale(1.05)")},onMouseLeave:P=>{r||(P.currentTarget.style.transform="scale(1)")},onMouseDown:P=>{P.currentTarget.style.transform="scale(0.95)"},onMouseUp:P=>{P.currentTarget.style.transform="scale(1.05)"},"aria-label":r?"Close navigation menu":"Open navigation menu",children:o.jsx(xy,{size:24})})]})]}),r&&o.jsx("div",{ref:R,className:"xl:hidden absolute top-full right-4 bg-black/90 backdrop-blur-md border rounded-xl animate-in fade-in-0 slide-in-from-top-2 duration-300 ease-out shadow-xl",style:{borderColor:h.primary+"40",minWidth:"280px",maxWidth:"320px",zIndex:9999},children:o.jsxs("div",{className:"p-4 space-y-2",children:[o.jsxs("a",{href:"/music",className:"flex items-center space-x-3 px-4 py-3 text-base font-semibold rounded-lg transition-all duration-200 w-full hover:bg-opacity-20 hover:scale-105 active:scale-95 no-underline focus:outline-none",style:{color:"#ffffff",backgroundColor:"transparent",display:"flex",textDecoration:"none"},onMouseEnter:P=>{P.currentTarget.style.backgroundColor=h.primary+"20",P.currentTarget.style.color="white"},onMouseLeave:P=>{P.currentTarget.style.backgroundColor="transparent",P.currentTarget.style.color="#ffffff"},children:[o.jsx(Ao,{size:20,style:{color:h.primary}}),o.jsx("span",{children:"MUSIC"})]}),o.jsxs("a",{href:"/schedule",className:"flex items-center gap-3 px-4 py-3 text-sm font-medium transition-all duration-200 hover:scale-105 active:scale-95 rounded-lg focus:outline-none",style:{color:"#ffffff",backgroundColor:"transparent",textDecoration:"none"},onMouseEnter:P=>{P.currentTarget.style.backgroundColor=h.primary+"20"},onMouseLeave:P=>{P.currentTarget.style.backgroundColor="transparent"},children:[o.jsx(is,{size:20,style:{color:h.primary}}),o.jsx("span",{children:"SCHEDULE"})]}),o.jsxs("a",{href:"/support",className:"flex items-center space-x-3 px-4 py-3 text-base font-semibold rounded-lg transition-all duration-200 w-full hover:bg-opacity-20 hover:scale-105 active:scale-95 no-underline focus:outline-none",style:{color:"#ffffff",backgroundColor:"transparent",display:"flex",textDecoration:"none"},onMouseEnter:P=>{P.currentTarget.style.backgroundColor=h.primary+"20",P.currentTarget.style.color="white"},onMouseLeave:P=>{P.currentTarget.style.backgroundColor="transparent",P.currentTarget.style.color="#ffffff"},children:[o.jsx(Qs,{size:20,style:{color:h.primary}}),o.jsx("span",{children:"SUPPORT US"})]}),o.jsxs("a",{href:"/features",className:"flex items-center space-x-3 px-4 py-3 text-base font-semibold rounded-lg transition-all duration-200 w-full hover:bg-opacity-20 hover:scale-105 active:scale-95 no-underline focus:outline-none focus:ring-2 focus:ring-offset-2",style:{color:"#ffffff",backgroundColor:"transparent",display:"flex",textDecoration:"none","--tw-ring-color":h.primary,"--tw-ring-offset-color":"#000000"},onMouseEnter:P=>{P.currentTarget.style.backgroundColor=h.primary+"20",P.currentTarget.style.color="white"},onMouseLeave:P=>{P.currentTarget.style.backgroundColor="transparent",P.currentTarget.style.color="#ffffff"},children:[o.jsx(Qs,{size:20,style:{color:h.primary}}),o.jsx("span",{children:"FEATURES"})]}),o.jsxs("a",{href:"/map",className:"flex items-center space-x-3 px-4 py-3 text-base font-semibold rounded-lg transition-all duration-200 w-full hover:bg-opacity-20 hover:scale-105 active:scale-95 no-underline focus:outline-none focus:ring-2 focus:ring-offset-2",style:{color:"#ffffff",backgroundColor:"transparent",display:"flex",textDecoration:"none","--tw-ring-color":h.primary,"--tw-ring-offset-color":"#000000"},onMouseEnter:P=>{P.currentTarget.style.backgroundColor=h.primary+"20",P.currentTarget.style.color="white"},onMouseLeave:P=>{P.currentTarget.style.backgroundColor="transparent",P.currentTarget.style.color="#ffffff"},children:[o.jsx(Jd,{size:20,style:{color:h.primary}}),o.jsx("span",{children:"LISTEN MAP"})]}),o.jsxs("a",{href:"/submissions",className:"flex items-center space-x-3 px-4 py-3 text-base font-semibold rounded-lg transition-all duration-200 w-full hover:bg-opacity-20 hover:scale-105 active:scale-95 no-underline focus:outline-none focus:ring-2 focus:ring-offset-2",style:{color:"#ffffff",backgroundColor:"transparent",display:"flex",textDecoration:"none","--tw-ring-color":h.primary,"--tw-ring-offset-color":"#000000"},onMouseEnter:P=>{P.currentTarget.style.backgroundColor=h.primary+"20",P.currentTarget.style.color="white"},onMouseLeave:P=>{P.currentTarget.style.backgroundColor="transparent",P.currentTarget.style.color="#ffffff"},children:[o.jsx(Wi,{size:20,style:{color:h.primary}}),o.jsx("span",{children:"SUBMISSIONS"})]}),o.jsxs("a",{href:"/contact",className:"flex items-center space-x-3 px-4 py-3 text-base font-semibold rounded-lg transition-all duration-200 w-full hover:bg-opacity-20 hover:scale-105 active:scale-95 no-underline focus:outline-none focus:ring-2 focus:ring-offset-2",style:{color:"#ffffff",backgroundColor:"transparent",display:"flex",textDecoration:"none","--tw-ring-color":h.primary,"--tw-ring-offset-color":"#000000"},onMouseEnter:P=>{P.currentTarget.style.backgroundColor=h.primary+"20",P.currentTarget.style.color="white"},onMouseLeave:P=>{P.currentTarget.style.backgroundColor="transparent",P.currentTarget.style.color="#ffffff"},children:[o.jsx(Zd,{size:20,style:{color:h.primary}}),o.jsx("span",{children:"CONTACT"})]}),o.jsx("div",{className:"border-t my-3",style:{borderColor:h.primary+"40"}}),x?o.jsxs(o.Fragment,{children:[o.jsxs("a",{href:"/profile",className:"flex items-center space-x-3 px-4 py-3 text-base font-semibold rounded-lg transition-all duration-200 w-full no-underline",style:{color:h.text,backgroundColor:h.primary+"20",display:"flex",textDecoration:"none"},onMouseEnter:P=>{P.currentTarget.style.backgroundColor=h.primary+"30",P.currentTarget.style.color="white"},onMouseLeave:P=>{P.currentTarget.style.backgroundColor=h.primary+"20",P.currentTarget.style.color=h.text},children:[o.jsx(Ot,{size:16,style:{color:h.primary}}),o.jsx("span",{children:"PROFILE"})]}),o.jsxs("button",{onClick:se,className:"flex items-center space-x-3 px-4 py-3 text-base font-semibold rounded-lg transition-all duration-200 w-full no-underline focus:outline-none focus:ring-2 focus:ring-offset-2",style:{color:h.primary,backgroundColor:"transparent",border:`1px solid ${h.primary}`,display:"flex",textDecoration:"none","--tw-ring-color":h.primary,"--tw-ring-offset-color":"#000000"},onMouseEnter:P=>{P.currentTarget.style.backgroundColor=h.primary+"20",P.currentTarget.style.color="white"},onMouseLeave:P=>{P.currentTarget.style.backgroundColor="transparent",P.currentTarget.style.color=h.primary},children:[o.jsx(Xd,{size:16,style:{color:h.primary}}),o.jsx("span",{children:"SIGN OUT"})]})]}):o.jsxs(o.Fragment,{children:[o.jsxs("div",{onClick:()=>{setTimeout(()=>{l("login"),i(!0)},100),e(!1)},className:"flex items-center justify-center space-x-3 px-6 py-3 text-sm font-bold rounded-full transition-all duration-300 w-full cursor-pointer shadow-lg",style:{color:"white",background:`linear-gradient(135deg, ${h.primary}, ${h.secondary||h.primary})`,border:"none",transform:"scale(1)"},onMouseEnter:P=>{P.currentTarget.style.transform="scale(1.05)",P.currentTarget.style.boxShadow=`0 8px 25px -8px ${h.primary}60`},onMouseLeave:P=>{P.currentTarget.style.transform="scale(1)",P.currentTarget.style.boxShadow="0 4px 15px -4px rgba(0,0,0,0.2)"},children:[o.jsx(Ot,{size:18,style:{color:"white"}}),o.jsx("span",{children:"LOGIN"})]}),o.jsxs("div",{onClick:()=>{setTimeout(()=>{l("register"),i(!0)},100),e(!1)},className:"flex items-center justify-center space-x-3 px-6 py-3 text-sm font-bold rounded-full transition-all duration-300 w-full cursor-pointer shadow-lg",style:{color:h.primary,background:"rgba(255, 255, 255, 0.1)",border:`2px solid ${h.primary}`,backdropFilter:"blur(10px)",transform:"scale(1)"},onMouseEnter:P=>{P.currentTarget.style.transform="scale(1.05)",P.currentTarget.style.background=`${h.primary}15`,P.currentTarget.style.boxShadow=`0 8px 25px -8px ${h.primary}40`},onMouseLeave:P=>{P.currentTarget.style.transform="scale(1)",P.currentTarget.style.background="rgba(255, 255, 255, 0.1)",P.currentTarget.style.boxShadow="0 4px 15px -4px rgba(0,0,0,0.2)"},children:[o.jsx(d_,{size:18,style:{color:h.primary}}),o.jsx("span",{children:"SIGN UP"})]})]})]})})]})}),o.jsx(sh,{open:u,onOpenChange:d,children:o.jsxs(Kl,{className:"max-w-md animate-in fade-in zoom-in duration-300",style:{backgroundColor:b?"rgba(0, 0, 0, 0.95)":"rgba(255, 255, 255, 0.95)",border:`2px solid ${h.primary}40`},children:[o.jsxs(Ql,{children:[o.jsx(Xl,{className:"text-xl font-black",style:{color:h.text},children:"Confirm Logout"}),o.jsx(Jl,{className:"text-base",style:{color:h.text,opacity:.8},children:"Are you sure you want to log out of your account?"})]}),o.jsxs(Yl,{className:"flex gap-3",children:[o.jsx(ec,{className:"font-semibold px-6 py-2 rounded-lg transition-all duration-200 focus:outline-none focus:ring-2 focus:ring-offset-2",style:{backgroundColor:"transparent",color:h.text,border:`1px solid ${h.primary}40`,"--tw-ring-color":h.primary,"--tw-ring-offset-color":b?"#000000":"#ffffff"},children:"Cancel"}),o.jsx(Zl,{onClick:se,className:"font-semibold px-6 py-2 rounded-lg transition-all duration-200 focus:outline-none focus:ring-2 focus:ring-offset-2",style:{backgroundColor:"#EF4444",color:"white",border:"1px solid #EF4444","--tw-ring-color":"#EF4444","--tw-ring-offset-color":b?"#000000":"#ffffff"},children:"Logout"})]})]})}),o.jsx(PO,{isOpen:s,onClose:()=>i(!1),initialMode:a})]})}function U1({text:r,className:e="",style:t={},maxWidth:n="100%",isFloating:s=!1,backgroundColor:i="transparent",alignment:a="center"}){const[l,u]=m.useState(!1),[d,h]=m.useState(!1),p=m.useRef(null),g=m.useRef(null);return m.useEffect(()=>{const b=()=>{if(p.current&&g.current){const C=p.current.scrollWidth,x=g.current.clientWidth,v=C>x;h(v),v||u(!1)}};return b(),window.addEventListener("resize",b),()=>window.removeEventListener("resize",b)},[r]),m.useEffect(()=>{if(d){const b=setTimeout(()=>{u(!0)},1e3);return()=>clearTimeout(b)}else u(!1)},[d]),d?o.jsxs("div",{ref:g,className:"relative overflow-hidden whitespace-nowrap",style:{maxWidth:n,backgroundColor:i},children:[o.jsxs("div",{ref:p,className:`${e} whitespace-nowrap`,style:{...t,display:"inline-block",whiteSpace:"nowrap",animation:l&&d?"scrollLeftToRight 12s linear infinite":"none",transform:"translateX(0)"},children:[r,d&&l&&o.jsx("span",{style:{paddingLeft:"50px"},children:r})]}),o.jsx("style",{children:`
        @keyframes scrollLeftToRight {
          0% {
            transform: translateX(0%);
          }
          100% {
            transform: translateX(-100%);
          }
        }
      `})]}):o.jsx("div",{ref:g,className:`flex overflow-hidden ${a==="left"?"justify-start":"justify-center"}`,style:{maxWidth:n,backgroundColor:i},children:o.jsx("div",{ref:p,className:e,style:t,children:r})})}function MO({size:r="md",className:e=""}){const{getColors:t,getGradient:n}=ue(),s=t(),i=n(),a={sm:"w-12 h-12",md:"w-16 h-16",lg:"w-24 h-24"},l={sm:"w-6 h-6",md:"w-8 h-8",lg:"w-12 h-12"};return o.jsx("div",{className:`${a[r]} rounded-xl flex items-center justify-center shadow-lg ${e}`,style:{background:i,border:`2px solid ${s.primary}`},children:o.jsx(Ao,{className:`${l[r]} text-white`})})}class Js{constructor(){this.cache=new Map}static getInstance(){return Js.instance||(Js.instance=new Js),Js.instance}isPlaylistCover(e){const t=["playlist","mix","dj","radio","station","live","stream","broadcast","show","program","session","set"],n=e.toLowerCase();return t.some(s=>n.includes(s))}isGenericArtwork(e){const t=["default","placeholder","unknown","no-artwork","music-note","album-cover","generic"],n=e.toLowerCase();return t.some(s=>n.includes(s))}async searchSpotify(e,t){var n,s,i,a;try{const l=encodeURIComponent(`${e} ${t}`),u=await fetch(`https://api.spotify.com/v1/search?q=${l}&type=track&limit=1`,{headers:{Authorization:"Bearer YOUR_SPOTIFY_TOKEN"}});if(u.ok){const h=(s=(n=(await u.json()).tracks)==null?void 0:n.items)==null?void 0:s[0];if(((a=(i=h==null?void 0:h.album)==null?void 0:i.images)==null?void 0:a.length)>0){const p=h.album.images[0];return{url:p.url,source:"spotify",quality:p.height>=640?"high":"medium"}}}}catch(l){console.warn("Spotify artwork search failed:",l)}return null}async searchiTunes(e,t){var n;try{const s=encodeURIComponent(`${e} ${t}`),i=await fetch(`https://itunes.apple.com/search?term=${s}&media=music&entity=song&limit=1`);if(i.ok){const l=(n=(await i.json()).results)==null?void 0:n[0];if(l!=null&&l.artworkUrl512||l!=null&&l.artworkUrl100)return{url:(l.artworkUrl512||l.artworkUrl100).replace("100x100","512x512").replace("60x60","512x512"),source:"itunes",quality:"high"}}}catch(s){console.warn("iTunes artwork search failed:",s)}return null}async searchLastFM(e,t){var n,s,i;try{const a=encodeURIComponent(`${e} ${t}`),l=await fetch(`https://ws.audioscrobbler.com/2.0/?method=track.getInfo&track=${a}&artist=${encodeURIComponent(t)}&api_key=YOUR_LASTFM_KEY&format=json`);if(l.ok){const d=(await l.json()).track;if((i=(s=(n=d==null?void 0:d.album)==null?void 0:n.image)==null?void 0:s[2])!=null&&i["#text"])return{url:d.album.image[2]["#text"],source:"lastfm",quality:"medium"}}}catch(a){console.warn("Last.fm artwork search failed:",a)}return null}async generateAIArtwork(e,t){try{const n=`Album cover art for "${e}" by ${t}, modern design, vibrant colors`;return console.log("AI artwork generation requested for:",n),{url:`https://via.placeholder.com/512/1f2937/ffffff?text=${encodeURIComponent(`${e}
by ${t}`)}`,source:"ai-generated",quality:"medium"}}catch(n){console.warn("AI artwork generation failed:",n)}return null}async getArtworkWithFallback(e,t,n){if(!e||e==="advertisement")return this.searchFallbackArtwork(t,n);if(this.isPlaylistCover(e)||this.isGenericArtwork(e))return console.log("Detected playlist/generic artwork, searching for better alternative"),await this.searchFallbackArtwork(t,n)||e;try{if(!(await fetch(e,{method:"HEAD"})).ok)return console.log("Original artwork failed to load, trying fallbacks"),await this.searchFallbackArtwork(t,n)||e}catch{return console.log("Original artwork failed to load, trying fallbacks"),await this.searchFallbackArtwork(t,n)||e}return e}async searchFallbackArtwork(e,t){const n=`${e}-${t}`.toLowerCase();if(this.cache.has(n))return this.cache.get(n).url;const s=[()=>this.searchiTunes(e,t),()=>this.searchSpotify(e,t),()=>this.searchLastFM(e,t),()=>this.generateAIArtwork(e,t)];for(const i of s)try{const a=await i();if(a)return this.cache.set(n,a),a.url}catch(a){console.warn("Artwork source failed:",a)}return null}clearCache(){this.cache.clear()}getCacheStats(){return{size:this.cache.size,entries:Array.from(this.cache.keys())}}}const DO=Js.getInstance();function $1({artwork:r,title:e,artist:t,isPlaying:n=!1,size:s="md",className:i="",isAd:a=!1}){const{getGradient:l,getColors:u,currentTheme:d}=ue();u();const[h,p]=m.useState(!1),[g,b]=m.useState(!1),[C,x]=m.useState(l()),[v,E]=m.useState(!1),[T,N]=m.useState(null),[R,L]=m.useState(!1),U={sm:"w-10 h-10 sm:w-12 sm:h-12",md:"w-24 h-24 sm:w-32 sm:h-32",lg:"w-32 h-32 sm:w-48 sm:h-48"},A={sm:"sm",md:"md",lg:"lg"};m.useEffect(()=>{const j=l();if(j!==C&&!r){E(!0);const _=setTimeout(()=>{x(j),E(!1)},300);return()=>clearTimeout(_)}},[d,l,C,r]),m.useEffect(()=>{if(v){const j=setTimeout(()=>{E(!1)},300);return()=>clearTimeout(j)}},[v]);const w=()=>{b(!0)},k=async()=>{if(b(!1),console.warn(`Failed to load artwork for "${e}" by ${t}. Searching for fallback...`),!R){L(!0);try{const j=await DO.getArtworkWithFallback(r,e,t);j&&j!==r&&(N(j),console.log(`Found fallback artwork for "${e}" by ${t}`))}catch(j){console.warn("Fallback artwork search failed:",j)}finally{L(!1)}}};return o.jsxs("div",{className:`relative ${U[s]} rounded-xl overflow-hidden shadow-lg cursor-pointer transition-all duration-300 ${i}`,onMouseEnter:()=>p(!0),onMouseLeave:()=>p(!1),style:{transform:h?"scale(1.05)":"scale(1)",boxShadow:h?`0 20px 40px -12px ${l()}40`:"0 4px 8px rgba(0,0,0,0.2)"},children:[o.jsx("div",{className:"absolute inset-0 flex items-center justify-center transition-all duration-500",style:{background:a?"linear-gradient(45deg, #ff4444, #cc0000)":l(),opacity:!r||r===""||!g||r==="advertisement"?1:0,transform:h?"scale(1.1)":"scale(1)"},children:a?o.jsxs("div",{className:"text-center text-white",children:[o.jsx("div",{className:"text-2xl mb-1",children:"📢"}),o.jsx("div",{className:"text-xs font-bold",children:"AD"}),o.jsx("div",{className:"text-xs opacity-80",children:"ADVERTISEMENT"})]}):o.jsx(MO,{size:A[s]})}),(r&&r.trim()&&r!=="advertisement"||T)&&o.jsxs("div",{className:"absolute inset-0 transition-all duration-500",style:{opacity:g?1:0,transform:h?"scale(1.05)":"scale(1)"},children:[o.jsx("img",{src:T||r,alt:`${e} by ${t}`,className:"w-full h-full object-cover",onLoad:w,onError:k,referrerPolicy:"no-referrer",crossOrigin:"anonymous"}),o.jsx("div",{className:"absolute inset-0 transition-opacity duration-300",style:{background:`linear-gradient(45deg, ${l()}20, transparent)`,opacity:h?1:0}}),h&&o.jsx("div",{className:"absolute inset-0 transition-opacity duration-300",style:{background:"linear-gradient(135deg, rgba(255,255,255,0.1) 0%, transparent 50%)",opacity:.6}})]}),r&&!g&&o.jsx("div",{className:"absolute inset-0 bg-gradient-to-r from-transparent via-white/10 to-transparent animate-pulse"})]})}const fi=[{id:"hot-97",stationId:"hot-97",name:"Hot 97",frequency:"97.1 FM",location:"New York, NY",genre:"Hip Hop & R&B",streamUrl:"https://stream.revma.ihrhls.com/zc6046",description:"New York's #1 Hip Hop & R&B",icon:"🔥"},{id:"power-106",stationId:"power-106",name:"Power 105.1",frequency:"105.1 FM",location:"New York, NY",genre:"Hip Hop & R&B",streamUrl:"https://stream.revma.ihrhls.com/zc1481",description:"New York's Power 105.1",icon:"⚡"},{id:"beat-955",stationId:"beat-955",name:"95.5 The Beat",frequency:"95.5 FM",location:"Dallas, TX",genre:"Hip Hop & R&B",streamUrl:"https://playerservices.streamtheworld.com/api/livestream-redirect/KBFBFMAAC.aac",description:"Dallas' #1 Hip Hop & R&B",icon:"🎵"},{id:"hot-105",stationId:"hot-105",name:"Hot 105",frequency:"105.1 FM",location:"Miami, FL",genre:"Urban R&B",streamUrl:"https://stream.revma.ihrhls.com/zc5907",description:"Miami's Today's R&B and Old School",icon:"🌴"},{id:"q-93",stationId:"q-93",name:"Q93",frequency:"93.3 FM",location:"New Orleans, LA",genre:"Hip Hop & R&B",streamUrl:"https://stream.revma.ihrhls.com/zc1037",description:"New Orleans Hip Hop & R&B",icon:"🎺"},{id:"somafm-metal",stationId:"somafm-metal",name:"SomaFM Metal",frequency:"Online",location:"San Francisco, CA",genre:"Metal",streamUrl:"https://ice1.somafm.com/metal-128-mp3",description:"Heavy Metal & Hard Rock",icon:"🤘"}];function B1(){const{currentTrack:r,isPlaying:e,isLoading:t,error:n,togglePlayback:s,volume:i,setVolume:a,isMuted:l,toggleMute:u,changeStation:d,currentStation:h,isAdPlaying:p,adInfo:g}=Fc(),{user:b,updateListeningStatus:C}=Wt(),{getColors:x,getGradient:v,currentTheme:E}=ue(),T=x(),[N,R]=m.useState(!1),[L,U]=m.useState(fi[0]),[A,w]=m.useState(!1);m.useEffect(()=>{const q=fi[0];q&&!L&&U(q)},[]);const[k,j]=m.useState(!1),[_,M]=m.useState(!1),I=m.useRef(null),X=m.useRef(null),se=m.useRef(null),le=m.useRef(null),Z=m.useRef(null);m.useEffect(()=>{const q=he=>{le.current&&!le.current.contains(he.target)&&R(!1)};if(N)return document.addEventListener("mousedown",q),()=>document.removeEventListener("mousedown",q)},[N]);const P=()=>{Z.current&&(clearTimeout(Z.current),Z.current=null),w(!0)},z=()=>{Z.current=setTimeout(()=>{w(!1)},150)};m.useEffect(()=>()=>{Z.current&&clearTimeout(Z.current)},[]);const Y=async()=>{try{await s(),b&&await C(!e)}catch(q){console.error("Error toggling playback:",q)}},xe=async()=>{if(I.current)try{await qi("radio_player_play",async()=>{await I.current.play(),M(!1)},{action:1})}catch(q){console.error("Error playing audio:",q),M(!0)}},$e=async q=>{I.current&&I.current.pause();try{await qi("radio_station_change",async()=>{M(!1),await new Promise(he=>setTimeout(he,100)),e&&await xe()},{station_id:1,station_name:q.name.length})}catch(he){console.error("Error changing station:",he),M(!0)}};return o.jsxs("section",{className:"backdrop-blur-md rounded-2xl shadow-xl transition-all duration-1000 ease-in-out mx-auto overflow-visible",role:"region","aria-label":"Radio player controls",style:{background:r!=null&&r.artwork&&r.artwork!=="advertisement"?`linear-gradient(135deg, ${T.primary}40, ${T.secondary}20)`:"rgba(255, 255, 255, 0.12)",backdropFilter:"blur(40px) saturate(250%)",WebkitBackdropFilter:"blur(40px) saturate(250%)",boxShadow:`0 16px 64px ${T.primary}30, inset 0 1px 0 rgba(255, 255, 255, 0.25), 0 0 0 1px rgba(255, 255, 255, 0.15), 0 0 32px ${T.primary}15`,color:T.text,border:"none",width:"clamp(400px, 30vw, 600px)",minWidth:"400px",maxWidth:"600px",paddingTop:"20px",paddingLeft:"20px",paddingRight:"20px",paddingBottom:A?"100px":"68px",contain:"layout"},children:[o.jsx("div",{className:"mb-6",children:o.jsxs("div",{className:"relative",ref:le,children:[o.jsxs(J,{variant:"outline",size:"sm",onClick:()=>R(!N),className:"bg-card/95 backdrop-blur-sm hover:bg-card/100 transition-all duration-200 text-xs px-3 py-1",style:{borderColor:T.primary,borderWidth:"2px",borderRadius:"12px",width:"auto","--tw-ring-color":T.primary},children:[o.jsx(Hi,{className:"w-3 h-3 mr-1",style:{color:T.primary}}),o.jsx("span",{style:{color:T.primary},children:(L==null?void 0:L.name)||"95.5 The Beat"}),o.jsx(ql,{className:`w-3 h-3 ml-1 transition-transform duration-300 ease-in-out transform ${N?"rotate-180":"rotate-0"}`,style:{opacity:.6,color:T.primary}})]}),N&&o.jsx("div",{className:"absolute mt-1 left-1/2 transform -translate-x-1/2 max-h-60 overflow-y-auto shadow-xl z-20 scrollbar-thin",style:{background:"rgba(0, 0, 0, 0.98)",backdropFilter:"blur(32px) saturate(220%)",WebkitBackdropFilter:"blur(32px) saturate(220%)",borderColor:T.primary+"60",borderRadius:"12px",minWidth:"300px",border:"2px solid",boxShadow:`0 12px 48px ${T.primary}30, 0 0 0 1px rgba(255, 255, 255, 0.15), 0 0 24px rgba(0, 0, 0, 0.3)`},children:o.jsxs("div",{className:"p-2",children:[L&&o.jsx("button",{onClick:()=>$e(L),className:"w-full p-3 text-left rounded-md transition-all duration-300 hover:bg-muted/20 focus:outline-none focus:ring-0",style:{background:`linear-gradient(135deg, ${T.primary}40, ${T.secondary}25)`,border:`1px solid ${T.primary}80`,boxShadow:`0 2px 8px ${T.primary}20`},children:o.jsxs("div",{className:"flex items-center gap-3",children:[o.jsx("div",{className:"flex items-center justify-center w-10 h-10 rounded-full",children:o.jsx("span",{className:"text-lg",children:L.icon})}),o.jsxs("div",{className:"flex-1 min-w-0 flex items-center",children:[o.jsxs("div",{className:"flex-1",children:[o.jsx("div",{className:"font-semibold text-sm truncate",style:{color:T.text||"#ffffff",textShadow:"0 1px 2px rgba(0, 0, 0, 0.8)",fontWeight:"600"},children:L.name}),o.jsxs("div",{className:"text-xs truncate",style:{color:T.textMuted||"#e5e7eb",textShadow:"0 1px 2px rgba(0, 0, 0, 0.6)"},children:[L.frequency," •"," ",L.location]}),o.jsx("div",{className:"text-xs truncate",style:{color:T.textMuted||"#d1d5db",opacity:.9,textShadow:"0 1px 2px rgba(0, 0, 0, 0.5)"},children:L.description})]}),e&&o.jsx("div",{className:"flex items-center justify-center w-9 h-9",children:o.jsx("div",{className:"flex items-center justify-center h-full",children:o.jsxs("svg",{className:"w-6 h-6",fill:"none",xmlns:"http://www.w3.org/2000/svg",children:[o.jsx("path",{d:"M11 5L6 9H2V15H6L11 19V5Z",fill:T.primary}),o.jsx("path",{d:"M14 9.5C15.1 10.6 15.1 12.4 14 13.5",stroke:T.primary,strokeWidth:"1.5",className:"animate-pulse",style:{animation:"pulse 1.5s ease-in-out infinite"}}),o.jsx("path",{d:"M16 7.5C18.2 9.7 18.2 13.3 16 15.5",stroke:T.primary,strokeWidth:"1.5",className:"animate-pulse",style:{animation:"pulse 1.5s ease-in-out infinite",animationDelay:"0.3s"}}),o.jsx("path",{d:"M18 5.5C21.3 8.8 21.3 14.2 18 17.5",stroke:T.primary,strokeWidth:"1.5",className:"animate-pulse",style:{animation:"pulse 1.5s ease-in-out infinite",animationDelay:"0.6s"}})]})})})]})]})},L.id+"-selected"),fi==null?void 0:fi.filter(q=>q.id!==(L==null?void 0:L.id)).map(q=>o.jsx("button",{onClick:()=>$e(q),className:"w-full p-3 text-left rounded-md transition-all duration-300 hover:bg-muted/20 focus:outline-none focus:ring-0",style:{backgroundColor:"transparent"},children:o.jsxs("div",{className:"flex items-center gap-3",children:[o.jsx("div",{className:"flex items-center justify-center w-10 h-10 rounded-full",style:{background:`linear-gradient(135deg, ${T.primary}40, ${T.secondary}20)`,backdropFilter:"blur(10px)"},children:o.jsx("span",{className:"text-lg",children:q.icon})}),o.jsxs("div",{className:"flex-1 min-w-0",children:[o.jsx("div",{className:"font-semibold text-sm truncate",style:{color:T.text||"#ffffff",textShadow:"0 1px 2px rgba(0, 0, 0, 0.7)",fontWeight:"600"},children:q.name}),o.jsxs("div",{className:"text-xs truncate",style:{color:T.textMuted||"#e5e7eb",textShadow:"0 1px 2px rgba(0, 0, 0, 0.5)"},children:[q.frequency," • ",q.location]}),o.jsx("div",{className:"text-xs truncate",style:{color:T.textMuted||"#d1d5db",opacity:.9,textShadow:"0 1px 2px rgba(0, 0, 0, 0.4)"},children:q.description})]})]})},q.id))]})})]})}),o.jsxs("div",{className:"flex justify-center mb-6 relative",children:[o.jsx("div",{className:`transition-all duration-1000 transform ${k?"opacity-0 scale-75 rotate-12 blur-md":"opacity-100 scale-100 rotate-0 blur-0"}`,style:{transformOrigin:"center",filter:k?"blur(4px) saturate(0.3)":p?"blur(0px) saturate(1.2) hue-rotate(0deg)":"blur(0px) saturate(1)",animation:k?"none":p?"adPulse 2s ease-in-out infinite":"albumReveal 1.2s cubic-bezier(0.25, 0.46, 0.45, 0.94)"},children:o.jsx($1,{artwork:p&&g.artwork?g.artwork:r.artwork,title:r.title,artist:r.artist,size:"lg",isAd:p})}),o.jsx("div",{className:"absolute top-0 left-1/2 transform -translate-x-1/2 -translate-y-1/2",children:o.jsxs("div",{className:`flex items-center gap-1 px-2 py-0.5 rounded-full text-xs font-bold ${p?"bg-red-600 text-white":"bg-red-500 text-white"}`,children:[o.jsx("div",{className:"w-1 h-1 bg-white rounded-full animate-pulse opacity-90 relative",style:{top:"0px"}}),o.jsx("span",{className:"opacity-90",children:p?"AD":"LIVE"})]})})]}),o.jsx("div",{className:"text-center mb-6",children:o.jsxs("div",{className:"text-center transition-all duration-1000",style:{opacity:k?.3:1,transform:k?"scale(0.95)":"scale(1)",filter:k?"blur(2px)":"blur(0px)",animation:k?"none":"slideInFromBottom 0.8s cubic-bezier(0.68, -0.55, 0.265, 1.55)"},children:[p&&o.jsx("div",{className:"mb-3 flex justify-center",children:o.jsxs("div",{className:"inline-flex items-center px-3 py-1 rounded-full text-xs font-bold text-white animate-pulse",style:{background:"linear-gradient(45deg, #ff4444, #cc0000)",boxShadow:"0 2px 8px #ff444460"},children:[o.jsx("span",{className:"mr-1",children:"📢"}),"ADVERTISEMENT",g.company&&o.jsxs("span",{className:"ml-1 opacity-80",children:["• ",g.company]})]})}),r.lastUpdated&&o.jsx("div",{className:"mb-2 flex justify-center",children:o.jsxs("div",{className:"inline-flex items-center px-2 py-1 rounded-full text-xs font-medium text-green-400 bg-green-400/10",children:[o.jsx("div",{className:"w-2 h-2 bg-green-400 rounded-full mr-1 animate-pulse relative",style:{top:"0px"}}),"LIVE"]})}),o.jsx("div",{className:"flex justify-center mb-2 w-full overflow-hidden",children:o.jsx("div",{className:`w-full max-w-[90%] ${k?"song-change-shimmer":""}`,children:o.jsx(U1,{text:r.title,className:"font-black whitespace-nowrap text-center",style:{fontSize:"28px",lineHeight:"1",color:p?"#f87171":T.text,textAlign:"center"},maxWidth:"90%",backgroundColor:"transparent",alignment:"center"})})}),r.artist&&r.artist!==r.title&&r.artist!=="Live Stream"&&r.artist!==((L==null?void 0:L.name)||"95.5 The Beat")&&o.jsx("p",{className:"font-black text-2xl mb-1 transition-opacity duration-500 text-center",style:{color:p?"#fca5a5":T.text,textAlign:"center"},children:r.artist}),r.album&&r.album!=="New York's Hip Hop & R&B"&&r.album!=="Live Stream"&&r.album!==r.title&&r.album!==r.artist&&r.album!==((L==null?void 0:L.name)||"95.5 The Beat")&&o.jsx("p",{className:"text-sm font-medium mb-2 transition-opacity duration-500 text-center",style:{color:p?"#fecaca":T.textMuted,textAlign:"center"},children:r.album}),r.stationName&&o.jsxs("p",{className:"text-sm font-medium mb-1 transition-opacity duration-500 text-center",style:{color:T.textMuted,textAlign:"center"},children:[r.stationName," • ",r.frequency]}),r.genre&&o.jsx("p",{className:"text-xs font-medium transition-opacity duration-500 text-center",style:{color:T.textMuted,textAlign:"center"},children:r.genre}),p&&g.reason&&o.jsx("p",{className:"text-red-300 text-xs font-medium mt-2 transition-opacity duration-500 text-center",children:g.reason})]})}),o.jsxs("div",{className:"flex flex-col items-center justify-center space-y-4 relative",children:[o.jsx("div",{className:"flex items-center justify-center w-full",children:o.jsx(J,{onClick:Y,disabled:t,className:"w-16 h-16 rounded-full flex items-center justify-center transition-all duration-300 group shadow-lg hover:shadow-xl border-0 focus:outline-none focus:ring-0",style:{background:`linear-gradient(45deg, ${T.primary}, ${T.secondary})`,boxShadow:`0 4px 20px ${T.primary}60`,opacity:t?.5:1,border:"none",outline:"none"},children:t?o.jsx("div",{className:"w-7 h-7 border-2 border-t-transparent rounded-full animate-spin",style:{borderLeftColor:T.primary,borderRightColor:T.primary,borderBottomColor:T.primary,borderTopColor:"transparent"}}):e?o.jsxs("svg",{className:"h-10 w-10",fill:"#ffffff",viewBox:"0 0 24 24",children:[o.jsx("rect",{x:"6",y:"4",width:"4",height:"16",rx:"1",fill:"#ffffff"}),o.jsx("rect",{x:"14",y:"4",width:"4",height:"16",rx:"1",fill:"#ffffff"})]}):o.jsx("svg",{className:"h-10 w-10",fill:"#ffffff",viewBox:"0 0 24 24",style:{animation:"pulse 2s ease-in-out infinite"},children:o.jsx("path",{d:"M8 5c0-.6.4-1 1-1 .2 0 .5.1.7.3l9 7c.8.6.8 1.8 0 2.4l-9 7c-.2.2-.5.3-.7.3-.6 0-1-.4-1-1V5z",fill:"#ffffff"})})})}),e&&o.jsx("div",{className:"relative transition-all duration-500 ease-in-out transform opacity-100 translate-y-0 scale-100",ref:X,onMouseEnter:P,onMouseLeave:z,children:o.jsxs("div",{className:"relative flex items-center justify-center pb-16",children:[o.jsx(J,{onClick:u,variant:"ghost",size:"sm",className:"rounded-full flex items-center justify-center transition-all duration-300 hover:scale-105 focus:outline-none focus:ring-0",style:{color:l?"#ef4444":E==="light-mode"?"#1f2937":"#ffffff",background:l||i===0?`${T.primary}40`:E==="light-mode"?"rgba(0, 0, 0, 0.05)":"rgba(255, 255, 255, 0.05)",backdropFilter:"blur(20px)",padding:"5px",width:"auto",height:"auto"},onMouseEnter:q=>{q.currentTarget.style.backgroundColor=E==="light-mode"?"rgba(0, 0, 0, 0.1)":"rgba(255, 255, 255, 0.1)"},onMouseLeave:q=>{q.currentTarget.style.backgroundColor=l||i===0?`${T.primary}40`:E==="light-mode"?"rgba(0, 0, 0, 0.05)":"rgba(255, 255, 255, 0.05)"},"aria-label":l?"Unmute":"Mute",children:l||i===0?o.jsx("div",{className:"transition-all duration-300 ease-in-out",children:o.jsx(a5,{className:"w-10 h-10"})}):o.jsx("div",{className:"relative flex items-center justify-center transition-all duration-300 ease-in-out",children:o.jsxs("svg",{width:"40",height:"40",viewBox:"0 0 24 24",fill:"none",className:"relative",children:[o.jsx("path",{d:"M11 5L6 9H2v6h4l5 4V5z",fill:"currentColor",strokeLinejoin:"round",strokeLinecap:"round"}),o.jsx("path",{d:"M15.54 8.46a5 5 0 0 1 0 7.07",stroke:"currentColor",strokeWidth:"1.5",strokeLinecap:"round",className:"animate-pulse",style:{animation:"pulse 1.5s ease-in-out infinite",animationDelay:"0s"}}),o.jsx("path",{d:"M19.07 4.93a10 10 0 0 1 0 14.14",stroke:"currentColor",strokeWidth:"1.5",strokeLinecap:"round",className:"animate-pulse",style:{animation:"pulse 1.5s ease-in-out infinite",animationDelay:"0.6s"}})]})})}),o.jsx("div",{ref:se,className:`absolute top-full left-1/2 -translate-x-1/2 mt-2 z-50 ${A?"pointer-events-auto":"pointer-events-none"}`,style:{transformOrigin:"top center",transition:"all 0.4s cubic-bezier(0.68, -0.55, 0.265, 1.55)",transform:A?"translateX(-50%) translateY(0px) scale(1) rotateX(0deg)":"translateX(-50%) translateY(-20px) scale(0.3) rotateX(-90deg)",opacity:A?1:0,filter:A?"blur(0px)":"blur(2px)",perspective:"200px"},children:o.jsxs("div",{className:"flex items-center space-x-2",children:[o.jsxs("div",{className:"w-32 h-2 rounded-full relative",style:{backgroundColor:E==="light-mode"?"#d1d5db":"#374151"},children:[o.jsx("div",{className:"h-2 rounded-full transition-all duration-150",style:{width:`${(l?0:i)*100}%`,background:`linear-gradient(45deg, ${T.primary}, ${T.secondary})`}}),o.jsx("input",{type:"range",min:"0",max:"100",value:(l?0:i)*100,onChange:q=>{const he=parseInt(q.target.value)/100;a(he),l&&he>0&&u()},className:"absolute inset-0 w-full h-full opacity-0 cursor-pointer focus:outline-none focus:ring-0","aria-label":"Volume control",title:"Adjust volume",style:{outline:"none",border:"none"}})]}),o.jsxs("span",{className:"text-xs font-medium min-w-[30px] text-center",style:{color:E==="light-mode"?"#6b7280":"#9ca3af"},children:[Math.round((l?0:i)*100),"%"]})]})})]})})]}),n&&o.jsx("div",{className:"mt-4 text-center text-red-400 text-sm font-medium",children:n})]})}const OO=xx.memo(function(){const{isDarkMode:e,getColors:t,currentTheme:n}=ue(),s=t();m.useCallback(()=>{var b;(b=document.getElementById("schedule"))==null||b.scrollIntoView({behavior:"smooth"})},[]);const[i,a]=m.useState({days:0,hours:0,minutes:0,seconds:0}),l=m.useMemo(()=>new Date("2025-08-10T12:00:00").getTime(),[]);m.useEffect(()=>{const b=()=>{const x=new Date().getTime(),v=l-x;v>0&&a({days:Math.floor(v/864e5),hours:Math.floor(v%864e5/36e5),minutes:Math.floor(v%36e5/6e4),seconds:Math.floor(v%6e4/1e3)})};b();const C=setInterval(b,1e3);return()=>clearInterval(C)},[l]);const u=m.useMemo(()=>({color:s.text,textShadow:`0 0 20px ${s.primary}40`}),[s.text,s.primary]),d=m.useMemo(()=>({background:`linear-gradient(135deg, ${s.background}80, ${s.background}40)`}),[s.background]),h=m.useMemo(()=>({background:`radial-gradient(circle at center, transparent 0%, ${s.background}90 70%, ${s.background} 100%)`}),[s.background]),p=m.useMemo(()=>({color:n==="light-mode"?"#374151":s.textMuted}),[n,s.textMuted]),g=m.useMemo(()=>({color:n==="light-mode"?"#212936":s.textMuted}),[n,s.textMuted]);return o.jsxs(o.Fragment,{children:[o.jsx("style",{children:`
          @keyframes customPulse {
            0%, 100% {
              opacity: 1;
              transform: scale(1);
            }
            50% {
              opacity: 0.5;
              transform: scale(1.1);
            }
          }
        `}),o.jsxs("div",{className:"relative min-h-screen flex items-center justify-center overflow-hidden pt-20",children:[o.jsxs("div",{className:"absolute inset-0 -top-16",children:[o.jsx("div",{className:"absolute inset-0 bg-cover bg-center opacity-25 dark:opacity-20 light:opacity-35",style:{backgroundImage:"url('https://images.unsplash.com/photo-1493225457124-a3eb161ffa5f?ixlib=rb-4.0.3&auto=format&fit=crop&w=1920&h=1080')"}}),o.jsx("div",{className:"absolute inset-0 transition-all duration-300",style:d}),o.jsx("div",{className:"absolute inset-0 transition-all duration-300",style:h})]}),o.jsxs("div",{className:"relative z-10 text-center max-w-4xl mx-auto px-4 pt-12",children:[o.jsxs("h1",{className:"font-orbitron font-black text-5xl md:text-8xl mb-8",style:u,children:[o.jsx("div",{children:"SPANDEX"}),o.jsx("div",{children:"SALVATION"}),o.jsx("div",{children:"RADIO"})]}),o.jsxs("p",{className:"text-lg md:text-xl font-orbitron font-semibold mb-6 max-w-2xl mx-auto text-center",style:{color:n==="light-mode"?"#212936":s.textMuted},children:["Bringing you the best of old-school metal with legendary",o.jsx("br",{}),"bands like Skid Row, Twisted Sister, and more.",o.jsx("br",{}),"Join the hairspray rebellion!"]}),o.jsxs("div",{className:"mb-8 flex flex-col justify-center items-center",children:[o.jsx("p",{className:"font-orbitron font-black text-xl md:text-2xl mb-1",style:{color:s.primary},children:"Old School Metal"}),o.jsx("p",{className:"font-orbitron font-black text-base md:text-lg",style:{color:s.primary},children:"24/7 Live Stream"})]}),o.jsxs("div",{className:"mb-8 flex flex-col items-center",role:"timer","aria-label":"Live broadcast countdown",children:[o.jsxs("div",{className:"flex flex-col items-center mb-4",children:[o.jsx("div",{className:"relative mb-3 flex justify-center","aria-hidden":"true",children:o.jsx("div",{className:"w-4 h-4 bg-gradient-to-r from-red-500 to-primary rounded-full shadow-lg",style:{animation:"customPulse 2s ease-in-out infinite"}})}),o.jsx("div",{className:"text-center w-full",children:o.jsx("span",{className:"text-transparent bg-gradient-to-r from-red-500 to-primary bg-clip-text text-xl font-black tracking-wider",children:"LIVE IN"})})]}),o.jsxs("div",{className:"flex justify-center items-center space-x-4 text-center mb-4 w-full max-w-md mx-auto",children:[o.jsxs("div",{className:"flex-1 flex flex-col items-center justify-center p-3 min-w-[80px] transition-colors duration-300",children:[o.jsx("div",{className:"text-3xl font-bold text-red-500 mb-2 text-center w-full leading-none",children:i.days}),o.jsx("div",{className:"text-xs font-semibold text-center w-full leading-tight",style:p,children:"DAYS"})]}),o.jsxs("div",{className:"flex-1 flex flex-col items-center justify-center p-3 min-w-[80px] transition-colors duration-300",children:[o.jsx("div",{className:"text-3xl font-bold text-red-500 mb-2 text-center w-full leading-none",children:i.hours}),o.jsx("div",{className:"text-xs font-semibold text-center w-full leading-tight",style:p,children:"HOURS"})]}),o.jsxs("div",{className:"flex-1 flex flex-col items-center justify-center p-3 min-w-[80px] transition-colors duration-300",children:[o.jsx("div",{className:"text-3xl font-bold text-red-500 mb-2 text-center w-full leading-none",children:i.minutes}),o.jsx("div",{className:"text-xs font-semibold text-center w-full leading-tight",style:p,children:"MINS"})]}),o.jsxs("div",{className:"flex-1 flex flex-col items-center justify-center p-3 min-w-[80px] transition-colors duration-300",children:[o.jsx("div",{className:"text-3xl font-bold text-red-500 mb-2 text-center w-full leading-none",children:i.seconds}),o.jsx("div",{className:"text-xs font-semibold text-center w-full leading-tight",style:p,children:"SECS"})]})]}),o.jsx("div",{className:"text-center w-full",children:o.jsx("p",{className:"text-sm font-semibold opacity-80",style:g,children:"First Broadcast Countdown"})})]}),o.jsx("div",{className:"flex flex-col items-center justify-center space-y-6 mb-12 mt-8",children:o.jsx(B1,{})})]}),o.jsx("div",{className:"absolute bottom-0 left-0 right-0 h-32 bg-gradient-to-t from-background via-background/50 to-transparent transition-colors duration-300"})]})]})});function Yf({threshold:r=.1,rootMargin:e="0px"}={}){const t=m.useRef(null),[n,s]=m.useState(!1),i=m.useCallback(a=>{const[l]=a;l.isIntersecting&&(s(!0),t.current&&l.target.remove())},[]);return m.useEffect(()=>{const a=new IntersectionObserver(i,{threshold:r,rootMargin:e});return t.current&&a.observe(t.current),()=>{t.current&&a.unobserve(t.current)}},[r,e,i]),{ref:t,isVisible:n}}function Xf(){const[r,e]=m.useState(0),[t,n]=m.useState("none"),[s,i]=m.useState(!1),a=m.useRef(0),l=m.useRef(0),u=m.useRef(),d=m.useRef(),h=m.useRef(!1),p=m.useCallback(()=>{h.current||(h.current=!0,d.current=requestAnimationFrame(()=>{const g=window.scrollY,b=Date.now(),C=b-l.current,x=g-a.current;if(C>0){const v=Math.abs(x)/C;Math.abs(v-r)>.1&&e(v),x>0?n("down"):x<0?n("up"):n("none"),i(!0),u.current&&clearTimeout(u.current),u.current=setTimeout(()=>{i(!1),e(0),n("none")},100)}a.current=g,l.current=b,h.current=!1}))},[r]);return m.useEffect(()=>(a.current=window.scrollY,l.current=Date.now(),window.addEventListener("scroll",p,{passive:!0}),()=>{window.removeEventListener("scroll",p),u.current&&clearTimeout(u.current),d.current&&cancelAnimationFrame(d.current)}),[p]),{velocity:r,direction:t,isScrolling:s}}function oh(r,e,t=150,n){let a=r;if(e>1){const l=Math.min(e/1,3);a=r*(.3+.7/l)}else e>.2,a=r;return a=Math.max(a,t),n&&(a=Math.min(a,n)),Math.round(a)}const Gu=new Set;let Sy=0;function LO({children:r,staggerDelay:e=50,className:t="",direction:n="up",threshold:s=.05}){m.useRef(null);const[i,a]=m.useState(!1),[l]=m.useState(()=>`stagger-${++Sy}`),{ref:u,isVisible:d}=Yf({threshold:s,rootMargin:"50px 0px -25px 0px"}),{velocity:h}=Xf(),p=m.useMemo(()=>{if(!i)return null;const C=oh(150,h,100,250),x=oh(e,h,15,50);return{adaptiveDuration:C,adaptiveStaggerDelay:x}},[i,h,e]);m.useEffect(()=>{if(d&&!i&&!Gu.has(l)){const C=(Sy-1)*5,x=setTimeout(()=>{Gu.has(l)||(Gu.add(l),a(!0))},C);return()=>clearTimeout(x)}},[d,i,l]);const g=m.useCallback((C,x)=>{const v={up:x?"translateY(0)":"translateY(20px)",down:x?"translateY(0)":"translateY(-20px)",left:x?"translateX(0)":"translateX(20px)",right:x?"translateX(0)":"translateX(-20px)"};return v[C]||v.up},[]),b=m.useMemo(()=>m.Children.toArray(r),[r]);return p?o.jsx("div",{ref:u,className:t,children:b.map((C,x)=>{if(!C||typeof C!="object")return C;const v=C;return m.cloneElement(v,{...v.props,key:v.key||x,style:{...v.props.style,opacity:i?1:0,transform:g(n,i),transition:`all ${p.adaptiveDuration}ms cubic-bezier(0.25, 0.46, 0.45, 0.94) ${i?`${x*p.adaptiveStaggerDelay}ms`:"0ms"}`,willChange:"opacity, transform"}})})}):o.jsx("div",{ref:u,className:t,children:b.map((C,x)=>{if(!C||typeof C!="object")return C;const v=C;return m.cloneElement(v,{...v.props,key:v.key||x,style:{...v.props.style,opacity:0,transform:g(n,!1),willChange:"opacity, transform"}})})})}function VO(){const{data:r}=Pi({queryKey:["/api/stream-stats"]}),{getColors:e,isDarkMode:t,currentTheme:n}=ue(),s=e(),[i,a]=m.useState(null);s.primary;const l=d=>{const h=document.getElementById(d);h&&h.scrollIntoView({behavior:"smooth"})},u=()=>{const d=document.getElementById("home");if(d){const h=d.querySelector('[role="region"][aria-label="Radio player controls"]');h?h.scrollIntoView({behavior:"smooth",block:"center"}):d.scrollIntoView({behavior:"smooth",block:"start"})}};return o.jsx("section",{id:"features",className:"py-20 transition-colors duration-300",style:{backgroundColor:s.background},"aria-label":"Platform features",children:o.jsxs("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8",children:[o.jsxs("div",{className:"text-center mb-16",children:[o.jsx("h2",{className:"font-orbitron font-black text-4xl md:text-5xl mb-6",style:{color:n==="light-mode"?"#000000":s.text},children:"ROCK THE AIRWAVES"}),o.jsx("p",{className:"text-xl font-semibold max-w-2xl mx-auto",style:{color:s.textMuted},children:"Experience the ultimate old-school metal radio experience with live streaming, interactive features, and exclusive content."})]}),o.jsxs(LO,{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-8",staggerDelay:50,direction:"up",children:[o.jsxs("div",{className:"relative",children:[o.jsx("div",{className:"absolute inset-2 rounded-2xl overflow-hidden",children:o.jsx("div",{className:"absolute inset-0 blur-xl opacity-0 transition-opacity duration-300",style:{background:`linear-gradient(135deg, ${s.primary}, ${s.secondary||s.primary})`,opacity:i==="streaming"?.3:0}})}),o.jsx(ne,{className:"relative group cursor-pointer transition-all duration-300 hover:scale-105 hover:shadow-2xl border-2 p-8 flex flex-col h-full enhanced-glow feature-container shadow-none",style:{backgroundColor:s.background,borderColor:s.primary,borderWidth:"2px",borderStyle:"solid",transform:i==="streaming"?"scale(1.05)":"scale(1)",boxShadow:"none"},onClick:u,onMouseEnter:()=>a("streaming"),onMouseLeave:()=>a(null),children:o.jsxs(oe,{className:"p-0 flex flex-col h-full",children:[o.jsx("div",{className:"w-16 h-16 rounded-xl flex items-center justify-center mb-6 shadow-lg",style:{backgroundColor:s.primary},children:o.jsx(Hi,{className:"text-white h-8 w-8"})}),o.jsx("h3",{className:"font-black text-2xl mb-4 h-16 flex items-center text-left",style:{color:s.text},children:"24/7 Live Streaming"}),o.jsx("p",{className:"font-semibold text-lg leading-relaxed mb-6 flex-grow text-left",style:{color:s.textMuted,minHeight:"4.5rem"},children:"Non-stop old-school metal streaming with high-quality audio and minimal buffering."}),o.jsxs("div",{className:"flex items-center text-sm font-bold mt-auto text-left",style:{color:s.primary},children:[o.jsx("div",{className:"w-3 h-3 rounded-full mr-3 animate-pulse",style:{backgroundColor:s.primary}}),o.jsx("span",{children:"Currently Live"})]})]})})]}),o.jsxs("div",{className:"relative",children:[o.jsx("div",{className:"absolute inset-2 rounded-2xl overflow-hidden",children:o.jsx("div",{className:"absolute inset-0 blur-xl opacity-0 transition-opacity duration-300",style:{background:`linear-gradient(135deg, ${s.primary}, ${s.accent||s.primary})`,opacity:i==="archives"?.3:0}})}),o.jsx(ne,{className:"relative group cursor-pointer transition-all duration-300 hover:scale-105 hover:shadow-2xl border-2 p-8 flex flex-col h-full enhanced-glow feature-container shadow-none",style:{backgroundColor:s.background,borderColor:s.primary,borderWidth:"2px",borderStyle:"solid",transform:i==="archives"?"scale(1.05)":"scale(1)",boxShadow:"none"},onClick:()=>l("schedule"),onMouseEnter:()=>a("archives"),onMouseLeave:()=>a(null),children:o.jsxs(oe,{className:"p-0 flex flex-col h-full",children:[o.jsx("div",{className:"w-16 h-16 rounded-xl flex items-center justify-center mb-6 shadow-lg",style:{backgroundColor:s.primary},children:o.jsx(PM,{className:"text-white h-8 w-8"})}),o.jsx("h3",{className:"font-black text-2xl mb-4 h-16 flex items-center text-left",style:{color:s.text},children:"Show Archives"}),o.jsx("p",{className:"font-semibold text-lg leading-relaxed mb-6 flex-grow text-left",style:{color:s.textMuted,minHeight:"4.5rem"},children:"Access past shows, special episodes, and exclusive metal content on-demand."}),o.jsxs("div",{className:"flex items-center text-sm font-bold mt-auto text-left",style:{color:s.primary},children:[o.jsx("div",{className:"w-3 h-3 rounded-full mr-3 animate-pulse",style:{backgroundColor:s.primary}}),o.jsx("span",{children:"200+ hours of content"})]})]})})]}),o.jsxs("div",{className:"relative",children:[o.jsx("div",{className:"absolute inset-2 rounded-2xl overflow-hidden",children:o.jsx("div",{className:"absolute inset-0 blur-xl opacity-0 transition-opacity duration-300",style:{background:`linear-gradient(135deg, ${s.secondary||s.primary}, ${s.primary})`,opacity:i==="map"?.3:0}})}),o.jsx(ne,{className:"relative group cursor-pointer transition-all duration-300 hover:scale-105 hover:shadow-2xl border-2 p-8 flex flex-col h-full enhanced-glow feature-container shadow-none",style:{backgroundColor:s.background,borderColor:s.primary,borderWidth:"2px",borderStyle:"solid",transform:i==="map"?"scale(1.05)":"scale(1)",boxShadow:"none"},onClick:()=>l("map"),onMouseEnter:()=>a("map"),onMouseLeave:()=>a(null),children:o.jsxs(oe,{className:"p-0 flex flex-col h-full",children:[o.jsx("div",{className:"w-16 h-16 rounded-xl flex items-center justify-center mb-6 shadow-lg",style:{backgroundColor:s.primary},children:o.jsx(hl,{className:"text-white h-8 w-8"})}),o.jsx("h3",{className:"font-black text-2xl mb-4 h-16 flex items-center text-left",style:{color:s.text},children:"Global Listener Map"}),o.jsx("p",{className:"font-semibold text-lg leading-relaxed mb-6 flex-grow text-left",style:{color:s.textMuted,minHeight:"4.5rem"},children:"See where metalheads around the world are tuning in from in real-time."}),o.jsxs("div",{className:"flex items-center text-sm font-bold mt-auto text-left",style:{color:s.primary},children:[o.jsx("div",{className:"w-3 h-3 rounded-full mr-3 animate-pulse",style:{backgroundColor:s.primary}}),o.jsxs("span",{children:[(r==null?void 0:r.currentListeners)||42," listeners online"]})]})]})})]}),o.jsxs("div",{className:"relative",children:[o.jsx("div",{className:"absolute inset-2 rounded-2xl overflow-hidden",children:o.jsx("div",{className:"absolute inset-0 blur-xl opacity-0 transition-opacity duration-300",style:{background:`linear-gradient(135deg, ${s.accent||s.primary}, ${s.primary})`,opacity:i==="rebellion"?.3:0}})}),o.jsx(ne,{className:"relative group cursor-pointer transition-all duration-300 hover:scale-105 hover:shadow-2xl border-2 p-8 flex flex-col h-full enhanced-glow feature-container shadow-none",style:{backgroundColor:s.background,borderColor:s.primary,borderWidth:"2px",borderStyle:"solid",transform:i==="rebellion"?"scale(1.05)":"scale(1)",boxShadow:"none"},onClick:()=>l("subscribe"),onMouseEnter:()=>a("rebellion"),onMouseLeave:()=>a(null),children:o.jsxs(oe,{className:"p-0 flex flex-col h-full",children:[o.jsx("div",{className:"w-16 h-16 rounded-xl flex items-center justify-center mb-6 shadow-lg",style:{backgroundColor:s.primary},children:o.jsx(hr,{className:"text-white h-8 w-8"})}),o.jsx("h3",{className:"font-black text-2xl mb-4 h-16 flex items-center text-left",style:{color:s.text},children:"Hairspray Rebellion"}),o.jsx("p",{className:"font-semibold mb-6 text-lg leading-relaxed flex-grow text-left",style:{color:s.textMuted},children:"Join our premium membership for exclusive content, early access, and special perks."}),o.jsx("div",{className:"flex justify-start",children:o.jsxs(J,{className:"font-bold text-lg px-6 py-3 rounded-xl transition-all duration-300 hover:scale-105 border-0 flex items-center focus:outline-none focus:ring-0",style:{color:s.primary,backgroundColor:"transparent",border:"none"},onMouseEnter:d=>{d.currentTarget.style.backgroundColor=s.primary,d.currentTarget.style.color=s.primaryText||"white"},onMouseLeave:d=>{d.currentTarget.style.backgroundColor="transparent",d.currentTarget.style.color=s.primary},onClick:d=>{d.stopPropagation(),l("subscribe")},children:[o.jsx("span",{className:"text-left",children:"Learn More"}),o.jsx(hr,{className:"w-4 h-4 ml-2"})]})})]})})]}),o.jsxs("div",{className:"relative",children:[o.jsx("div",{className:"absolute inset-2 rounded-2xl overflow-hidden",children:o.jsx("div",{className:"absolute inset-0 blur-xl opacity-0 transition-opacity duration-300",style:{background:`linear-gradient(135deg, ${s.primary}, ${s.secondary||s.primary})`,opacity:i==="requests"?.3:0}})}),o.jsx(ne,{className:"relative group cursor-pointer transition-all duration-300 hover:scale-105 hover:shadow-2xl border-2 p-8 flex flex-col h-full enhanced-glow feature-container shadow-none",style:{backgroundColor:s.background,borderColor:s.primary,borderWidth:"2px",borderStyle:"solid",transform:i==="requests"?"scale(1.05)":"scale(1)",boxShadow:"none"},onClick:()=>l("submissions"),onMouseEnter:()=>a("requests"),onMouseLeave:()=>a(null),children:o.jsxs(oe,{className:"p-0 flex flex-col h-full",children:[o.jsx("div",{className:"w-16 h-16 rounded-xl flex items-center justify-center mb-6 shadow-lg",style:{backgroundColor:s.primary},children:o.jsx(Ao,{className:"text-white h-8 w-8"})}),o.jsx("h3",{className:"font-black text-2xl mb-4 h-16 flex items-center text-left",style:{color:s.text},children:"Song Requests"}),o.jsx("p",{className:"font-semibold mb-6 text-lg leading-relaxed flex-grow text-left",style:{color:s.textMuted},children:"Submit your favorite metal tracks and artist suggestions to be featured on air."}),o.jsx("div",{className:"flex justify-start",children:o.jsxs(J,{className:"font-bold text-lg px-6 py-3 rounded-xl transition-all duration-300 hover:scale-105 border-0 flex items-center focus:outline-none focus:ring-0",style:{color:s.primary,backgroundColor:"transparent",border:"none"},onMouseEnter:d=>{d.currentTarget.style.backgroundColor=s.primary,d.currentTarget.style.color=s.primaryText||"white"},onMouseLeave:d=>{d.currentTarget.style.backgroundColor="transparent",d.currentTarget.style.color=s.primary},onClick:d=>{d.stopPropagation(),l("submissions")},children:[o.jsx("span",{className:"text-left",children:"Submit Request"}),o.jsx(Ao,{className:"w-4 h-4 ml-2"})]})})]})})]}),o.jsxs("div",{className:"relative",children:[o.jsx("div",{className:"absolute inset-2 rounded-2xl overflow-hidden",children:o.jsx("div",{className:"absolute inset-0 blur-xl opacity-0 transition-opacity duration-300",style:{background:`linear-gradient(135deg, ${s.secondary||s.primary}, ${s.accent||s.primary})`,opacity:i==="merch"?.3:0}})}),o.jsx(ne,{className:"relative group cursor-pointer transition-all duration-300 hover:scale-105 hover:shadow-2xl border-2 p-8 flex flex-col h-full enhanced-glow feature-container shadow-none",style:{backgroundColor:s.background,borderColor:s.primary,borderWidth:"2px",borderStyle:"solid",transform:i==="merch"?"scale(1.05)":"scale(1)",boxShadow:"none"},onClick:()=>l("shop"),onMouseEnter:()=>a("merch"),onMouseLeave:()=>a(null),children:o.jsxs(oe,{className:"p-0 flex flex-col h-full",children:[o.jsx("div",{className:"w-16 h-16 rounded-xl flex items-center justify-center mb-6 shadow-lg",style:{backgroundColor:s.primary},children:o.jsx(vy,{className:"text-white h-8 w-8"})}),o.jsx("h3",{className:"font-black text-2xl mb-4 h-16 flex items-center text-left",style:{color:s.text},children:"Official Merch"}),o.jsx("p",{className:"font-semibold mb-6 text-lg leading-relaxed flex-grow text-left",style:{color:s.textMuted},children:"Show your metal pride with official Spandex Salvation Radio merchandise and apparel."}),o.jsx("div",{className:"flex justify-start",children:o.jsxs(J,{className:"font-bold text-lg px-6 py-3 rounded-xl transition-all duration-300 hover:scale-105 border-0 flex items-center focus:outline-none focus:ring-0",style:{color:s.primary,backgroundColor:"transparent",border:"none"},onMouseEnter:d=>{d.currentTarget.style.backgroundColor=s.primary,d.currentTarget.style.color=s.primaryText||"white"},onMouseLeave:d=>{d.currentTarget.style.backgroundColor="transparent",d.currentTarget.style.color=s.primary},onClick:d=>{d.stopPropagation(),l("merch")},children:[o.jsx("span",{className:"text-left",children:"Shop Now"}),o.jsx(vy,{className:"w-4 h-4 ml-2"})]})})]})})]})]})]})})}function FO(){const{velocity:r}=Xf(),{ref:e}=Yf({threshold:.1}),{currentTheme:t,isDarkMode:n,colors:s}=ue(),i=m.useMemo(()=>Math.min(Math.abs(r)/1e3,1),[r]),a=m.useMemo(()=>i*20,[i]),l=m.useMemo(()=>({...{background:n?"rgba(0, 0, 0, 0.8)":"rgba(255, 255, 255, 0.9)",color:n?"#ffffff":"#000000",borderColor:n?"rgba(255, 255, 255, 0.2)":"rgba(0, 0, 0, 0.2)"},accentColor:s.accent}),[n,s.accent]),u=m.useMemo(()=>[{title:"About Spandex Salvation Radio",content:"Your ultimate destination for the heaviest metal, hardest rock, and most intense music from around the world. We're not just a radio station - we're a movement, a community, and a way of life for metalheads everywhere."},{title:"What We Do",content:"We broadcast 24/7, bringing you the best in metal, rock, punk, and alternative music. From classic heavy metal to modern deathcore, from underground black metal to mainstream rock anthems - we've got it all."},{title:"Our Mission",content:"To unite metalheads worldwide through the power of music, to discover and promote emerging artists, and to keep the spirit of metal alive and thriving for generations to come."}],[]),d=m.useCallback((h,p)=>o.jsxs("div",{className:"mb-8 p-6 rounded-lg border backdrop-blur-sm transition-all duration-300 hover:scale-105",style:{background:l.background,color:l.color,borderColor:l.borderColor,transform:`translateY(${a*(p+1)}px)`},children:[o.jsx("h3",{className:"text-2xl font-bold mb-4",style:{color:l.accentColor},children:h.title}),o.jsx("p",{className:"text-lg leading-relaxed",children:h.content})]},h.title),[l,a]);return o.jsx("section",{ref:e,className:"py-16 px-4 min-h-screen flex items-center justify-center",style:{background:`linear-gradient(135deg, ${l.background}, ${l.background}dd)`,transform:`translateY(${a}px)`},children:o.jsxs("div",{className:"max-w-4xl mx-auto text-center",children:[o.jsx("h2",{className:"text-5xl md:text-7xl font-bold mb-8",style:{color:l.accentColor},children:"About Us"}),o.jsx("div",{className:"space-y-6",children:u.map((h,p)=>d(h,p))}),o.jsxs("div",{className:"mt-12 p-8 rounded-xl border backdrop-blur-md transition-all duration-500 hover:scale-105",style:{background:l.background,borderColor:l.borderColor,transform:`translateY(${a*2}px)`},children:[o.jsx("p",{className:"text-xl font-semibold mb-4",style:{color:l.accentColor},children:"Join the Metal Revolution"}),o.jsx("p",{className:"text-lg",children:"Whether you're a lifelong metalhead or just discovering the genre, Spandex Salvation Radio is your gateway to the most intense, powerful, and authentic metal music experience."})]})]})})}function UO(){const{getColors:r,currentTheme:e}=ue(),t=r(),{setCurrentTrack:n}=Fc(),[s,i]=m.useState(null),[a,l]=m.useState(null),[u,d]=m.useState(null),h=[{id:1,title:"Morning Metal",host:"DJ Metalhead",dayOfWeek:"Monday",time:"9:00 AM",duration:120,description:"Start your week with the best metal hits",isActive:!0},{id:2,title:"Thrash Tuesday",host:"DJ Thrash",dayOfWeek:"Tuesday",time:"7:00 PM",duration:180,description:"Pure thrash metal madness",isActive:!0},{id:3,title:"Death Metal Wednesday",host:"DJ Death",dayOfWeek:"Wednesday",time:"8:00 PM",duration:150,description:"The heaviest death metal around",isActive:!0}],p=[{id:1,title:"Classic Metal Hour",host:"DJ Classic",date:new Date,duration:60,description:"The best classic metal tracks",audioUrl:"/audio/classic-metal-hour.mp3"}],g=N=>{const R=new Date,L=[],U=R.getDay(),A=["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"];for(let w=0;w<7;w++){const k=(U+w)%7,j=A[k],_=(N||[]).filter(M=>M.dayOfWeek===j);if(w===0){const M=R.getHours()*60+R.getMinutes(),I=(_||[]).filter(X=>{const[se,le]=X.time.split(" "),[Z,P]=se.split(":").map(Number);let z=Z*60+P;return le==="PM"&&Z!==12?z+=720:le==="AM"&&Z===12&&(z=P),z>M});I.sort((X,se)=>{const le=b(X.time),Z=b(se.time);return le-Z}),L.push(...I)}else{const M=(_||[]).sort((I,X)=>{const se=b(I.time),le=b(X.time);return se-le});L.push(...M)}}return L},b=N=>{const[R,L]=N.split(" "),[U,A]=R.split(":").map(Number);let w=U*60+A;return L==="PM"&&U!==12?w+=720:L==="AM"&&U===12&&(w=A),w},C=g(h),x=N=>new Date(N).toLocaleDateString("en-US",{weekday:"long",month:"long",day:"numeric",year:"numeric"}),v=(N,R)=>{const L=new Date(N).toLocaleDateString("en-US",{month:"long",day:"numeric",year:"numeric"});if(R){const U=Math.floor(R/60),A=R%60;return U===0?`${L}, ${A} min`:A===0?`${L}, ${U} hr`:`${L}, ${U} hr ${A} min`}return L},E=N=>{try{const[R,L]=N.split(":").map(Number),U=new Date;return U.setHours(R,L||0,0,0),U.toLocaleTimeString("en-US",{hour:"numeric",minute:"2-digit",hour12:!0,timeZone:Intl.DateTimeFormat().resolvedOptions().timeZone})}catch{return N}},T=N=>{i(N);const R=`${N.title} - ${x(N.date)}`;n({title:R,artist:N.host||"Spandex Salvation Radio",album:"Past Show Archive",artwork:""})};return o.jsxs("section",{id:"schedule",className:"py-20 transition-colors duration-300",style:{backgroundColor:t.background},children:[o.jsxs("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8",children:[o.jsxs("div",{className:"text-center mb-16",children:[o.jsx("h2",{className:"font-orbitron font-black text-3xl md:text-4xl mb-4",style:{color:e==="light-mode"?"#000000":t.text},children:"SHOW SCHEDULE"}),o.jsx("p",{className:"text-lg font-semibold",style:{color:t.textMuted},children:"Catch your favorite metal shows and discover new content throughout the week."})]}),o.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-8",children:[o.jsxs("div",{children:[o.jsx("h3",{className:"font-black text-xl mb-6 text-center",style:{color:"var(--color-primary)"},children:"This Week's Lineup"}),o.jsx("div",{className:"space-y-4",children:(C||[]).map(N=>o.jsxs("div",{className:"relative",children:[o.jsx("div",{className:"absolute inset-2 rounded-2xl overflow-hidden",children:o.jsx("div",{className:"absolute inset-0 blur-xl opacity-0 transition-opacity duration-300",style:{background:`linear-gradient(135deg, ${t.primary}, ${t.secondary||t.primary})`,opacity:u===`weekly-${N.id}`?.3:0}})}),o.jsx(ne,{className:"relative group cursor-pointer transition-all duration-300 border-2 p-4 enhanced-glow show-container shadow-none",style:{backgroundColor:t.background,borderColor:t.primary,height:"160px",transform:u===`weekly-${N.id}`?"scale(1.05)":"scale(1)",boxShadow:"none"},onClick:()=>l(N),onMouseEnter:()=>d(`weekly-${N.id}`),onMouseLeave:()=>d(null),children:o.jsxs(oe,{className:"p-0",style:{height:"100%",display:"flex",flexDirection:"column"},children:[o.jsxs("div",{className:"text-center mb-2",children:[o.jsx("h4",{className:"font-black text-lg",children:N.title}),o.jsxs("p",{className:"text-gray-500 text-sm font-semibold mt-1",children:["Hosted by: ",N.host]})]}),o.jsx("p",{className:"text-gray-400 text-sm font-semibold mb-1 text-center flex-1",children:N.description}),o.jsxs("div",{className:"flex items-center justify-center space-x-2",style:{marginTop:"auto",paddingTop:"8px"},children:[o.jsx(is,{className:"text-gray-500 h-3 w-3"}),o.jsxs("span",{className:"text-gray-500 text-xs font-bold",children:[N.dayOfWeek," at ",E(N.time)]})]})]})})]},N.id))})]}),((p==null?void 0:p.length)||0)>0&&o.jsxs("div",{children:[o.jsx("h3",{className:"font-black text-xl mb-6 text-center",style:{color:t.primary},children:"Past Shows"}),o.jsx("div",{className:"space-y-4",children:(p||[]).slice(0,3).map(N=>o.jsxs("div",{className:"relative",children:[o.jsx("div",{className:"absolute inset-2 rounded-2xl overflow-hidden",children:o.jsx("div",{className:"absolute inset-0 blur-xl opacity-0 transition-opacity duration-300",style:{background:`linear-gradient(135deg, ${t.secondary||t.primary}, ${t.accent||t.primary})`,opacity:u===`past-${N.id}`?.3:0}})}),o.jsx(ne,{className:"relative group cursor-pointer transition-all duration-300 border-2 p-4 enhanced-glow show-container shadow-none",style:{backgroundColor:t.background,borderColor:t.primary,height:"160px",transform:u===`past-${N.id}`?"scale(1.05)":"scale(1)",boxShadow:"none"},onClick:()=>i(N),onMouseEnter:()=>d(`past-${N.id}`),onMouseLeave:()=>d(null),children:o.jsxs(oe,{className:"p-0",style:{height:"100%",display:"flex",flexDirection:"row",alignItems:"center"},children:[o.jsxs("div",{style:{flex:"1",display:"flex",flexDirection:"column",height:"100%",justifyContent:"space-between"},children:[o.jsxs("div",{className:"text-center mb-2",children:[o.jsx("h4",{className:"font-black text-lg",style:{color:t.text},children:N.title}),o.jsxs("p",{className:"text-gray-500 text-sm font-semibold mt-1",children:["Hosted by: ",N.host||"Spandex Salvation Radio"]})]}),o.jsx("p",{className:"text-gray-400 text-sm font-semibold text-center flex-1 flex items-center justify-center",children:N.description||"Past episode archive"}),o.jsxs("div",{className:"flex items-center justify-center space-x-2",style:{marginTop:"auto",paddingTop:"8px"},children:[o.jsx(is,{className:"text-gray-500 h-3 w-3"}),o.jsx("span",{className:"text-gray-500 text-xs font-bold",children:v(N.date,N.duration||0)})]})]}),o.jsx("div",{style:{display:"flex",alignItems:"center",paddingLeft:"16px"},children:o.jsx(J,{className:"rounded-full transition-all duration-300 hover:scale-110 focus:outline-none focus:ring-0",style:{backgroundColor:t.primary,color:"white",border:"none",width:"48px",height:"48px",minWidth:"48px",maxWidth:"48px",display:"flex",alignItems:"center",justifyContent:"center",padding:"0"},onMouseEnter:R=>{R.currentTarget.style.backgroundColor=t.secondary||t.primary,R.currentTarget.style.transform="scale(1.1)"},onMouseLeave:R=>{R.currentTarget.style.backgroundColor=t.primary,R.currentTarget.style.transform="scale(1)"},onClick:R=>{R.stopPropagation(),T(N)},children:o.jsx(QM,{className:"h-5 w-5",style:{strokeLinecap:"round",strokeLinejoin:"round"},fill:"currentColor"})})})]})})]},N.id))})]})]}),o.jsx("div",{className:"mt-12 flex justify-center w-full",children:o.jsx(J,{className:"px-6 py-3 rounded-full font-bold transition-all duration-300 border-0 focus:outline-none focus:ring-0",style:{backgroundColor:t.primary,color:t.primaryText||"white",width:"25%",minWidth:"200px",maxWidth:"300px"},onMouseEnter:N=>{N.currentTarget.style.backgroundColor=t.primaryDark||t.primary,N.currentTarget.style.transform="scale(1.05)"},onMouseLeave:N=>{N.currentTarget.style.backgroundColor=t.primary,N.currentTarget.style.transform="scale(1)"},children:"VIEW ALL ARCHIVES"})})]}),a&&o.jsx("div",{className:"fixed inset-0 bg-black/80 backdrop-blur-md flex items-center justify-center z-50 p-4",onClick:()=>l(null),style:{display:"flex",alignItems:"center",justifyContent:"center",minHeight:"100vh",width:"100vw"},children:o.jsxs("div",{className:"bg-background/95 backdrop-blur-sm border-2 rounded-xl p-8 max-w-md w-full relative show-popup-content",style:{borderColor:t.primary,backgroundColor:t.background,margin:"auto",maxHeight:"90vh",overflow:"auto"},onClick:N=>N.stopPropagation(),children:[o.jsx("button",{onClick:()=>l(null),className:"absolute top-4 right-4 p-2 rounded-full transition-all duration-200 hover:scale-110 flex items-center justify-center focus:outline-none focus:ring-0",style:{color:t.primary,backgroundColor:`${t.primary}20`,width:"40px",height:"40px"},onMouseEnter:N=>{N.currentTarget.style.backgroundColor=t.primary,N.currentTarget.style.color="white"},onMouseLeave:N=>{N.currentTarget.style.backgroundColor=`${t.primary}20`,N.currentTarget.style.color=t.primary},title:"Close show details","aria-label":"Close show details",children:o.jsx($n,{className:"h-5 w-5"})}),o.jsxs("div",{className:"text-center space-y-4",children:[o.jsx("h2",{className:"font-black text-2xl",style:{color:t.text},children:a.title}),o.jsxs("p",{className:"font-semibold text-base",style:{color:t.text},children:["Hosted by: ",a.host]}),o.jsxs("div",{className:"flex items-center justify-center space-x-2",children:[o.jsx(is,{className:"h-4 w-4",style:{color:t.primary}}),o.jsxs("span",{className:"text-sm font-bold",style:{color:t.text},children:[a.dayOfWeek," at ",E(a.time)]})]}),o.jsx("p",{className:"text-gray-400 text-sm font-semibold leading-relaxed",children:a.description})]})]})}),s&&o.jsx("div",{className:"fixed inset-0 bg-black/80 backdrop-blur-md flex items-center justify-center z-50 p-4",onClick:()=>i(null),style:{display:"flex",alignItems:"center",justifyContent:"center",minHeight:"100vh",width:"100vw"},children:o.jsxs("div",{className:"bg-background/95 backdrop-blur-sm border-2 rounded-xl p-8 max-w-md w-full relative show-popup-content",style:{borderColor:t.primary,backgroundColor:t.background,margin:"auto",maxHeight:"90vh",overflow:"auto"},onClick:N=>N.stopPropagation(),children:[o.jsx("button",{onClick:()=>i(null),className:"absolute top-4 right-4 p-2 rounded-full transition-all duration-200 hover:scale-110 flex items-center justify-center focus:outline-none focus:ring-0",style:{color:t.primary,backgroundColor:`${t.primary}20`,width:"40px",height:"40px"},onMouseEnter:N=>{N.currentTarget.style.backgroundColor=t.primary,N.currentTarget.style.color="white"},onMouseLeave:N=>{N.currentTarget.style.backgroundColor=`${t.primary}20`,N.currentTarget.style.color=t.primary},title:"Close show details","aria-label":"Close show details",children:o.jsx($n,{className:"h-5 w-5"})}),o.jsxs("div",{className:"text-center space-y-4",children:[o.jsx("h2",{className:"font-black text-2xl",style:{color:t.text},children:s.title}),o.jsxs("p",{className:"font-semibold text-base",style:{color:t.text},children:["Hosted by: ",s.host]}),o.jsxs("div",{className:"flex items-center justify-center space-x-2",children:[o.jsx(is,{className:"h-4 w-4",style:{color:t.primary}}),o.jsx("span",{className:"text-sm font-bold",style:{color:t.text},children:x(s.date)})]}),o.jsxs("div",{className:"flex items-center justify-center space-x-2",children:[o.jsx(o_,{className:"h-4 w-4",style:{color:t.primary}}),o.jsxs("span",{className:"text-sm font-bold",style:{color:t.text},children:[s.duration," minutes"]})]}),o.jsx("p",{className:"text-gray-400 text-sm font-semibold leading-relaxed",children:s.description})]})]})})]})}const Jf=m.forwardRef(({className:r,...e},t)=>o.jsx("textarea",{className:ee("flex min-h-[80px] w-full rounded-md border border-input bg-background px-3 py-2 text-base placeholder:text-muted-foreground disabled:cursor-not-allowed disabled:opacity-50 md:text-sm",r),ref:t,...e}));Jf.displayName="Textarea";function z1(r){const e=m.useRef({value:r,previous:r});return m.useMemo(()=>(e.current.value!==r&&(e.current.previous=e.current.value,e.current.value=r),e.current.previous),[r])}var Gc="Checkbox",[$O,i6]=Bn(Gc),[BO,Zf]=$O(Gc);function zO(r){const{__scopeCheckbox:e,checked:t,children:n,defaultChecked:s,disabled:i,form:a,name:l,onCheckedChange:u,required:d,value:h="on",internal_do_not_use_render:p}=r,[g,b]=Do({prop:t,defaultProp:s??!1,onChange:u,caller:Gc}),[C,x]=m.useState(null),[v,E]=m.useState(null),T=m.useRef(!1),N=C?!!a||!!C.closest("form"):!0,R={checked:g,disabled:i,setChecked:b,control:C,setControl:x,name:l,form:a,value:h,hasConsumerStoppedPropagationRef:T,required:d,defaultChecked:jn(s)?!1:s,isFormControl:N,bubbleInput:v,setBubbleInput:E};return o.jsx(BO,{scope:e,...R,children:qO(p)?p(R):n})}var q1="CheckboxTrigger",H1=m.forwardRef(({__scopeCheckbox:r,onKeyDown:e,onClick:t,...n},s)=>{const{control:i,value:a,disabled:l,checked:u,required:d,setControl:h,setChecked:p,hasConsumerStoppedPropagationRef:g,isFormControl:b,bubbleInput:C}=Zf(q1,r),x=at(s,h),v=m.useRef(u);return m.useEffect(()=>{const E=i==null?void 0:i.form;if(E){const T=()=>p(v.current);return E.addEventListener("reset",T),()=>E.removeEventListener("reset",T)}},[i,p]),o.jsx(De.button,{type:"button",role:"checkbox","aria-checked":jn(u)?"mixed":u,"aria-required":d,"data-state":Y1(u),"data-disabled":l?"":void 0,disabled:l,value:a,...n,ref:x,onKeyDown:_e(e,E=>{E.key==="Enter"&&E.preventDefault()}),onClick:_e(t,E=>{p(T=>jn(T)?!0:!T),C&&b&&(g.current=E.isPropagationStopped(),g.current||E.stopPropagation())})})});H1.displayName=q1;var em=m.forwardRef((r,e)=>{const{__scopeCheckbox:t,name:n,checked:s,defaultChecked:i,required:a,disabled:l,value:u,onCheckedChange:d,form:h,...p}=r;return o.jsx(zO,{__scopeCheckbox:t,checked:s,defaultChecked:i,disabled:l,required:a,onCheckedChange:d,name:n,form:h,value:u,internal_do_not_use_render:({isFormControl:g})=>o.jsxs(o.Fragment,{children:[o.jsx(H1,{...p,ref:e,__scopeCheckbox:t}),g&&o.jsx(Q1,{__scopeCheckbox:t})]})})});em.displayName=Gc;var W1="CheckboxIndicator",G1=m.forwardRef((r,e)=>{const{__scopeCheckbox:t,forceMount:n,...s}=r,i=Zf(W1,t);return o.jsx(Sr,{present:n||jn(i.checked)||i.checked===!0,children:o.jsx(De.span,{"data-state":Y1(i.checked),"data-disabled":i.disabled?"":void 0,...s,ref:e,style:{pointerEvents:"none",...r.style}})})});G1.displayName=W1;var K1="CheckboxBubbleInput",Q1=m.forwardRef(({__scopeCheckbox:r,...e},t)=>{const{control:n,hasConsumerStoppedPropagationRef:s,checked:i,defaultChecked:a,required:l,disabled:u,name:d,value:h,form:p,bubbleInput:g,setBubbleInput:b}=Zf(K1,r),C=at(t,b),x=z1(i),v=bx(n);m.useEffect(()=>{const T=g;if(!T)return;const N=window.HTMLInputElement.prototype,L=Object.getOwnPropertyDescriptor(N,"checked").set,U=!s.current;if(x!==i&&L){const A=new Event("click",{bubbles:U});T.indeterminate=jn(i),L.call(T,jn(i)?!1:i),T.dispatchEvent(A)}},[g,x,i,s]);const E=m.useRef(jn(i)?!1:i);return o.jsx(De.input,{type:"checkbox","aria-hidden":!0,defaultChecked:a??E.current,required:l,disabled:u,name:d,value:h,form:p,...e,tabIndex:-1,ref:C,style:{...e.style,...v,position:"absolute",pointerEvents:"none",opacity:0,margin:0,transform:"translateX(-100%)"}})});Q1.displayName=K1;function qO(r){return typeof r=="function"}function jn(r){return r==="indeterminate"}function Y1(r){return jn(r)?"indeterminate":r?"checked":"unchecked"}const X1=m.forwardRef(({className:r,...e},t)=>o.jsx(em,{ref:t,className:ee("peer h-4 w-4 shrink-0 rounded-sm border border-primary disabled:cursor-not-allowed disabled:opacity-50 data-[state=checked]:bg-primary data-[state=checked]:text-primary-foreground",r),...e,children:o.jsx(G1,{className:ee("flex items-center justify-center text-current"),children:o.jsx(ya,{className:"h-4 w-4"})})}));X1.displayName=em.displayName;function HO(){const[r,e]=m.useState({name:"",email:"",songTitle:"",artist:"",genre:"",message:"",status:"pending"}),[t,n]=m.useState(!1),{toast:s}=Gr(),i=Rc(),{user:a,isAuthenticated:l}=Wt(),{getColors:u,currentTheme:d}=ue(),h=u(),{data:p=[]}=Pi({queryKey:["/api/submissions"]}),g=Gs({mutationFn:async N=>{if(!l){window.location.href="/#/login";return}if(!T){E(!0);return}return(await Pw("POST","/api/submissions",N)).json()},onSuccess:()=>{s({title:"Submission Successful!",description:"Your song request has been submitted for review."}),e({name:"",email:"",songTitle:"",artist:"",genre:"",message:"",status:"pending"}),n(!1),i.invalidateQueries({queryKey:["/api/submissions"]})},onError:()=>{s({title:"Submission Failed",description:"Please check your information and try again.",variant:"destructive"})}}),b=N=>{if(N.preventDefault(),!t){s({title:"Terms Required",description:"Please agree to the terms and conditions.",variant:"destructive"});return}g.mutate(r)},C=(N,R)=>{e(L=>({...L,[N]:R}))},x=N=>new Date(N).toLocaleDateString("en-US",{month:"short",day:"numeric"}),[v,E]=m.useState(!1),T=(a==null?void 0:a.stripeSubscriptionId)||!1;return o.jsx("section",{id:"submissions",className:"py-20 transition-colors duration-300",style:{backgroundColor:h.background},children:o.jsxs("div",{className:"max-w-4xl mx-auto px-4 sm:px-6 lg:px-8",children:[o.jsxs("div",{className:"text-center mb-12",children:[o.jsx("h2",{className:"font-orbitron font-bold text-3xl md:text-4xl mb-4",style:{color:d==="light-mode"?"#000000":h.text},children:"SUBMIT YOUR REQUESTS"}),o.jsx("p",{className:"text-lg",style:{color:h.textMuted},children:"Got a metal track that needs to be heard? Submit your requests and help shape our playlist."})]}),!l||!T?o.jsx("div",{className:"mt-6",children:o.jsxs("div",{className:"p-6 rounded-lg text-center transition-all duration-300 animate-in fade-in slide-in-from-top-4",style:{backgroundColor:`${h.primary}25`,border:"none"},children:[o.jsxs("div",{className:"flex items-center justify-center gap-2 mb-4",style:{color:h.primary},children:[o.jsx(hr,{className:"h-5 w-5"}),o.jsx("span",{className:"font-semibold",children:"Premium Feature - Paid Subscription Required"})]}),o.jsx("p",{className:"mb-6",style:{color:h.textMuted},children:"Song submissions are available exclusively to paid subscribers. Sign in and upgrade to submit your favorite tracks."}),o.jsxs("div",{className:"flex gap-4 justify-center",children:[o.jsx(J,{onClick:()=>{const N=new CustomEvent("openAuthModal",{detail:{mode:"login"}});window.dispatchEvent(N)},className:"px-6 py-3 rounded-full font-semibold transition-all duration-300 border-0",style:{backgroundColor:h.primary,color:h.primaryText||"white"},onMouseEnter:N=>{N.currentTarget.style.backgroundColor=h.primaryDark||h.primary,N.currentTarget.style.transform="scale(1.05)"},onMouseLeave:N=>{N.currentTarget.style.backgroundColor=h.primary,N.currentTarget.style.transform="scale(1)"},children:"Login"}),o.jsx(J,{onClick:()=>{var N;return(N=document.getElementById("subscribe"))==null?void 0:N.scrollIntoView({behavior:"smooth"})},variant:"outline",className:"px-6 py-3 rounded-full font-semibold transition-all duration-300",style:{borderColor:h.primary,color:h.primary,backgroundColor:"transparent"},onMouseEnter:N=>{N.currentTarget.style.backgroundColor=`${h.primary}10`,N.currentTarget.style.transform="scale(1.05)"},onMouseLeave:N=>{N.currentTarget.style.backgroundColor="transparent",N.currentTarget.style.transform="scale(1)"},children:"View Subscriptions"})]})]})}):o.jsx(ne,{className:"bg-dark-surface border-dark-border mb-12",children:o.jsx(oe,{className:"p-8",children:o.jsxs("form",{onSubmit:b,className:"space-y-6",children:[o.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[o.jsxs("div",{children:[o.jsx(Ae,{htmlFor:"songTitle",className:"text-gray-300 font-semibold",children:"Song Title *"}),o.jsx(Be,{id:"songTitle",value:r.songTitle,onChange:N=>C("songTitle",N.target.value),placeholder:"Enter song title",required:!0,className:"bg-dark-bg border-dark-border text-white placeholder-gray-500 focus:border-primary"})]}),o.jsxs("div",{children:[o.jsx(Ae,{htmlFor:"artist",className:"text-gray-300 font-semibold",children:"Artist/Band *"}),o.jsx(Be,{id:"artist",value:r.artist,onChange:N=>C("artist",N.target.value),placeholder:"Enter artist name",required:!0,className:"bg-dark-bg border-dark-border text-white placeholder-gray-500 focus:border-primary"})]})]}),o.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[o.jsxs("div",{children:[o.jsx(Ae,{htmlFor:"name",className:"text-gray-300 font-semibold",children:"Your Name"}),o.jsx(Be,{id:"name",value:r.name,onChange:N=>C("name",N.target.value),placeholder:"Enter your name",required:!0,className:"bg-dark-bg border-dark-border text-white placeholder-gray-400/60 focus:border-primary"})]}),o.jsxs("div",{children:[o.jsx(Ae,{htmlFor:"email",className:"text-gray-300 font-semibold",children:"Your Email"}),o.jsx(Be,{id:"email",type:"email",value:r.email,onChange:N=>C("email",N.target.value),placeholder:"Enter your email",required:!0,className:"bg-dark-bg border-dark-border text-white placeholder-gray-400/60 focus:border-primary"})]})]}),o.jsxs("div",{children:[o.jsx(Ae,{htmlFor:"message",className:"text-gray-300 font-semibold",children:"Additional Message"}),o.jsx(Jf,{id:"message",value:r.message||"",onChange:N=>C("message",N.target.value),placeholder:"Tell us why this song rocks or share any additional details...",rows:4,className:"bg-dark-bg border-dark-border text-white placeholder-gray-400/60 focus:border-primary resize-none"})]}),o.jsxs("div",{className:"flex items-center space-x-2",children:[o.jsx(X1,{id:"terms",checked:t,onCheckedChange:N=>n(N===!0),className:"border-dark-border"}),o.jsx(Ae,{htmlFor:"terms",className:"text-gray-400 text-sm",children:"I agree that this submission follows metal music guidelines and community standards."})]}),o.jsxs(J,{type:"submit",disabled:g.isPending,className:"w-full md:w-auto bg-metal-orange hover:bg-orange-600 text-white px-8 py-3 rounded-full font-bold text-lg transition-all duration-300 animate-glow focus:outline-none focus:ring-0",children:[o.jsx(Wi,{className:"mr-2 h-4 w-4"}),g.isPending?"SUBMITTING...":"SUBMIT REQUEST"]})]})})}),(p||[]).length>0&&l&&T&&o.jsxs("div",{className:"mt-16",children:[o.jsx("h3",{className:"font-bold text-xl mb-6",style:{color:"var(--color-primary)"},children:"Recent Submissions"}),o.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:(p||[]).slice(0,4).map(N=>o.jsx(ne,{className:"bg-dark-surface border-dark-border",children:o.jsxs(oe,{className:"p-4",children:[o.jsxs("div",{className:"flex items-start justify-between mb-2",children:[o.jsxs("div",{children:[o.jsx("h4",{className:"font-semibold",children:N.songTitle}),o.jsx("p",{className:"text-gray-400 text-sm",children:N.artistName})]}),o.jsx("span",{className:`text-xs px-2 py-1 rounded ${N.status==="approved"?"text-metal-orange bg-metal-orange/20":N.status==="rejected"?"text-metal-red bg-metal-red/20":"text-metal-gold bg-metal-gold/20"}`,children:N.status==="approved"?"Approved":N.status==="rejected"?"Rejected":"Pending"})]}),o.jsx("p",{className:"text-gray-500 text-xs",children:N.submitterName?`Submitted by: ${N.submitterName}`:"Anonymous"}),o.jsx("p",{className:"text-gray-500 text-xs",children:N.createdAt?x(N.createdAt):"Recently"})]})},N.id))})]}),v&&o.jsx(t1,{isEnabled:!0,onToggle:()=>E(!1)})]})})}const WO={"01d":"clear-day.svg","01n":"clear-night.svg","02d":"partly-cloudy-day.svg","02n":"partly-cloudy-night.svg","03d":"cloudy-day.svg","03n":"cloudy-night.svg","04d":"cloudy.svg","04n":"cloudy.svg","09d":"rainy-day.svg","09n":"rainy-night.svg","10d":"rainy.svg","10n":"rainy.svg","11d":"thunder.svg","11n":"thunder.svg","13d":"snowy.svg","13n":"snowy.svg","50d":"fog.svg","50n":"fog.svg"},J1=()=>{const{isDarkMode:r,colors:e}=ue(),t=m.useRef(null),n=m.useRef(null),[s,i]=m.useState(null),[a,l]=m.useState(!1),[u,d]=m.useState(null),[h,p]=m.useState(!0),[g,b]=m.useState(!1),[C,x]=m.useState(!1),[v,E]=m.useState([]),[T,N]=m.useState(null),[R,L]=m.useState(null),U=m.useMemo(()=>({googleMapsApiKey:"AIzaSyCBoEZeDucpm7p9OEDgaUGLzhn5HpItseQ",googleMapsSigningSecret:"",openWeatherApiKey:"bc23ce0746d4fc5c04d1d765589dadc5",googleMapsMapId:"spandex-salvation-radio-map"}),[]),A=m.useCallback(Z=>WO[Z]||"clear-day.svg",[]);m.useCallback(async(Z,P)=>{try{const z=await fetch(`/api/weather?lat=${Z}&lon=${P}`);if(z.ok){const Y=await z.json();N(Y)}else console.error("Failed to fetch weather data"),N({location:"New York, NY",temperature:72,description:"Partly Cloudy",icon:"02d",humidity:65,windSpeed:8,feelsLike:74})}catch(z){console.error("Error fetching weather:",z),N({location:"New York, NY",temperature:72,description:"Partly Cloudy",icon:"02d",humidity:65,windSpeed:8,feelsLike:74})}},[]);const w=m.useMemo(()=>[{lat:40.7128,lng:-74.006,city:"New York",country:"USA"},{lat:51.5074,lng:-.1278,city:"London",country:"UK"},{lat:35.6762,lng:139.6503,city:"Tokyo",country:"Japan"},{lat:52.52,lng:13.405,city:"Berlin",country:"Germany"},{lat:37.7749,lng:-122.4194,city:"San Francisco",country:"USA"},{lat:-33.8688,lng:151.2093,city:"Sydney",country:"Australia"}],[]),k=m.useCallback((Z,P,z,Y=!1)=>{const xe=new google.maps.Marker({position:Z,map:z,title:P,icon:{path:google.maps.SymbolPath.CIRCLE,scale:Y?8:6,fillColor:Y?e.primary:"#ff4444",fillOpacity:.9,strokeColor:Y?e.primary:"#ffffff",strokeWeight:2},zIndex:Y?1e3:1}),$e=new google.maps.Marker({position:Z,map:z,icon:{path:google.maps.SymbolPath.CIRCLE,scale:Y?12:10,fillColor:Y?e.primary:"#ff4444",fillOpacity:.3,strokeColor:Y?e.primary:"#ff4444",strokeWeight:1},zIndex:Y?999:0}),q=new google.maps.InfoWindow({content:`
        <div style="padding: 8px; text-align: center; font-family: Arial, sans-serif;">
          <div style="font-weight: bold; margin-bottom: 4px; color: #333;">${P}</div>
          <div style="font-size: 12px; color: #666;">
            ${Y?"Your Location":"Active Listener"}
          </div>
        </div>
      `});return xe.addListener("click",()=>{q.open(z,xe)}),(()=>{let Re=Y?12:10,ht=.3,ft=!0;const Vt=()=>{ft?(Re+=.2,ht-=.01,Re>=(Y?20:18)&&(ft=!1)):(Re-=.2,ht+=.01,Re<=(Y?12:10)&&(ft=!0)),$e.setIcon({path:google.maps.SymbolPath.CIRCLE,scale:Math.max(0,Re),fillColor:Y?e.primary:"#ff4444",fillOpacity:Math.max(0,Math.min(1,ht)),strokeColor:Y?e.primary:"#ff4444",strokeWeight:1}),requestAnimationFrame(Vt)};Vt()})(),{marker:xe,pulse:$e,infoWindow:q}},[e.primary]),j=m.useCallback(()=>{if(!(!t.current||C||s)){x(!0),console.log("Initializing Google Maps...");try{const Z=new google.maps.Map(t.current,{center:{lat:20,lng:0},zoom:2,mapId:U.googleMapsMapId,disableDefaultUI:!0,zoomControl:!1,streetViewControl:!1,mapTypeControl:!1,fullscreenControl:!1,gestureHandling:"greedy",backgroundColor:r?"#1a1a1a":"#ffffff"}),P=[];if(u){const z=k(u,"Your Location",Z,!0);P.push(z)}w.forEach(z=>{try{const Y=k({lat:z.lat,lng:z.lng},`${z.city}, ${z.country}`,Z,!1);P.push(Y)}catch(Y){console.error("Error creating marker:",Y)}}),i(Z),E(P),p(!1),x(!1),console.log("Google Maps initialized successfully"),setTimeout(()=>{Z&&google.maps.event.trigger(Z,"resize")},100)}catch(Z){console.error("Error initializing map:",Z),p(!1),b(!0),x(!1)}}},[U.googleMapsMapId,r,u,w,C,s,k]);m.useEffect(()=>{if(!(U!=null&&U.googleMapsApiKey)||s||C)return;if(window.google&&window.google.maps&&window.google.maps.Map){console.log("Google Maps already loaded, initializing...");const z=setTimeout(()=>{j()},100);return()=>clearTimeout(z)}if(document.querySelector('script[src*="maps.googleapis.com"]')){console.log("Google Maps script already exists, waiting for load...");const z=setTimeout(()=>{window.google&&window.google.maps&&window.google.maps.Map&&!s&&j()},1e3);return()=>clearTimeout(z)}console.log("Loading Google Maps script...");const P=document.createElement("script");return P.src=`https://maps.googleapis.com/maps/api/js?key=${U.googleMapsApiKey}&libraries=places&callback=initMap&loading=async`,P.async=!0,P.defer=!0,window.initMap=()=>{console.log("Google Maps script loaded successfully");const z=setTimeout(()=>{s||j()},200);window.initMapTimeoutId=z},P.onerror=z=>{console.error("Error loading Google Maps script:",z),p(!1),b(!0),x(!1)},P.onload=()=>{console.log("Google Maps script loaded successfully");const z=setTimeout(()=>{window.google&&window.google.maps&&window.google.maps.Map&&!s?j():(console.error("Google Maps API not available after script load"),b(!0),p(!1),x(!1))},500);window.scriptLoadTimeoutId=z},document.head.appendChild(P),()=>{window.initMapTimeoutId&&(clearTimeout(window.initMapTimeoutId),delete window.initMapTimeoutId),window.scriptLoadTimeoutId&&(clearTimeout(window.scriptLoadTimeoutId),delete window.scriptLoadTimeoutId),window.initMap&&delete window.initMap}},[U.googleMapsApiKey,s,C,j]),m.useEffect(()=>()=>{s&&(v.forEach(Z=>{Z.marker.setMap(null),Z.pulse.setMap(null),Z.infoWindow.close()}),i(null),E([])),window.initMapTimeoutId&&(clearTimeout(window.initMapTimeoutId),delete window.initMapTimeoutId),window.scriptLoadTimeoutId&&(clearTimeout(window.scriptLoadTimeoutId),delete window.scriptLoadTimeoutId),window.initMap&&delete window.initMap},[s,v]);const _=m.useCallback(()=>{s&&s.setZoom((s.getZoom()||2)+1)},[s]),M=m.useCallback(()=>{s&&s.setZoom((s.getZoom()||2)-1)},[s]),I=m.useCallback(()=>{s&&u?(s.setCenter(u),s.setZoom(10)):se()},[s,u]),X=m.useCallback(()=>{s&&(s.setCenter({lat:20,lng:0}),s.setZoom(2))},[s]),se=m.useCallback(async()=>{try{console.log("Requesting location permission...");const Z=await new Promise((z,Y)=>{navigator.geolocation.getCurrentPosition(z,Y,{enableHighAccuracy:!0,timeout:1e4,maximumAge:6e4})}),P={lat:Z.coords.latitude,lng:Z.coords.longitude};if(console.log("User location obtained:",P),d(P),s){console.log("Adding user location marker to existing map...");const z=k(P,"Your Location",s,!0);E(Y=>[...Y,z])}}catch(Z){console.error("Error getting user location:",Z);const P={lat:40.7128,lng:-74.006};console.log("Setting default location for testing:",P),d(P)}},[s,k]),le=m.useCallback(()=>{a?(l(!1),document.body.style.overflow="auto"):(l(!0),document.body.style.overflow="hidden")},[a]);return g?o.jsx("div",{className:"w-full h-96 flex items-center justify-center bg-red-50 dark:bg-red-900/20 rounded-xl border border-red-200 dark:border-red-800",children:o.jsxs("div",{className:"text-center",children:[o.jsx("div",{className:"text-red-600 dark:text-red-400 text-lg font-semibold mb-2",children:"Failed to load map"}),o.jsx(J,{onClick:j,variant:"outline",className:"border-red-300 dark:border-red-700",children:"Try Again"})]})}):o.jsxs(o.Fragment,{children:[!a&&o.jsx("section",{className:"w-full py-8",children:o.jsxs("div",{className:"container mx-auto px-4",children:[o.jsxs("div",{className:"text-center mb-8",children:[o.jsx("h2",{className:`text-4xl md:text-5xl font-bold mb-4 ${r?"text-white":"text-black"} drop-shadow-lg`,children:"Live Interactive Map"}),o.jsx("p",{className:`text-lg ${r?"text-zinc-300":"text-gray-600"} max-w-2xl mx-auto`,children:"Explore our global community of metalheads and see where the music is playing live"})]}),T&&o.jsx("div",{className:"w-full max-w-4xl mx-auto mb-8",children:o.jsx(ne,{className:`${r?"bg-zinc-900/50":"bg-white/90"} backdrop-blur-xl ${r?"border-zinc-800/50":"border-gray-200"} shadow-2xl`,children:o.jsx(oe,{className:"p-6",children:o.jsxs("div",{className:"flex items-center justify-center gap-6",children:[o.jsxs("div",{className:"flex items-center gap-3",children:[o.jsx("img",{src:`/animated_weather_icons/${A(T.icon)}`,alt:T.description,className:"w-12 h-12 object-contain"}),o.jsxs("div",{className:"text-center",children:[o.jsxs("div",{className:`text-2xl font-bold ${r?"text-white":"text-black"}`,children:[Math.round(T.temperature),"°F"]}),o.jsx("div",{className:`text-sm ${r?"text-zinc-400":"text-gray-600"}`,children:T.description})]})]}),o.jsxs("div",{className:"text-center",children:[o.jsx("div",{className:`text-lg font-semibold ${r?"text-white":"text-black"}`,children:T.location}),o.jsxs("div",{className:`text-sm ${r?"text-zinc-400":"text-gray-600"}`,children:["Humidity: ",T.humidity,"% | Wind: ",T.windSpeed," mph"]})]})]})})})}),o.jsxs("div",{className:"w-full max-w-4xl mx-auto mb-8 relative",children:[h&&o.jsx("div",{className:"absolute inset-0 z-10 flex items-center justify-center bg-gray-900/50 rounded-xl",children:o.jsxs("div",{className:"text-center",children:[o.jsx(a_,{className:"w-8 h-8 animate-spin text-white mx-auto mb-2"}),o.jsx("div",{className:"text-white text-sm",children:"Loading map..."})]})}),o.jsx("div",{ref:t,className:`w-full ${a?"h-screen":"h-96 md:h-[500px] lg:h-[600px]"} rounded-2xl shadow-2xl border-2 ${r?"border-zinc-800/50":"border-gray-200"} overflow-hidden`,style:{boxShadow:`0 25px 50px -12px ${r?"rgba(0, 0, 0, 0.5)":"rgba(0, 0, 0, 0.25)"}`}}),o.jsx("div",{className:"absolute top-4 left-4 flex flex-col gap-2",children:o.jsx(J,{onClick:le,size:"sm",variant:"secondary",className:`${r?"bg-zinc-800/80 hover:bg-zinc-700/80":"bg-white/80 hover:bg-white/90"} backdrop-blur-sm border ${r?"border-zinc-700/50":"border-gray-300/50"} shadow-lg`,children:o.jsx(qM,{className:"w-4 h-4"})})}),o.jsxs("div",{className:"absolute top-4 right-4 flex flex-col gap-2",children:[o.jsx(J,{onClick:_,size:"sm",variant:"secondary",className:`${r?"bg-zinc-800/80 hover:bg-zinc-700/80":"bg-white/80 hover:bg-white/90"} backdrop-blur-sm border ${r?"border-zinc-700/50":"border-gray-300/50"} shadow-lg`,children:o.jsx(l5,{className:"w-4 h-4"})}),o.jsx(J,{onClick:M,size:"sm",variant:"secondary",className:`${r?"bg-zinc-800/80 hover:bg-zinc-700/80":"bg-white/80 hover:bg-white/90"} backdrop-blur-sm border ${r?"border-zinc-700/50":"border-gray-300/50"} shadow-lg`,children:o.jsx(c5,{className:"w-4 h-4"})}),o.jsx(J,{onClick:I,size:"sm",variant:"secondary",className:`${r?"bg-zinc-800/80 hover:bg-zinc-700/80":"bg-white/80 hover:bg-white/90"} backdrop-blur-sm border ${r?"border-zinc-700/50":"border-gray-300/50"} shadow-lg`,children:o.jsx(Jd,{className:"w-4 h-4"})}),o.jsx(J,{onClick:X,size:"sm",variant:"secondary",className:`${r?"bg-zinc-800/80 hover:bg-zinc-700/80":"bg-white/80 hover:bg-white/90"} backdrop-blur-sm border ${r?"border-zinc-700/50":"border-gray-300/50"} shadow-lg`,children:o.jsx(JM,{className:"w-4 h-4"})})]}),R==="denied"&&o.jsx("div",{className:"absolute bottom-4 left-4 right-4",children:o.jsx(ne,{className:`${r?"bg-zinc-800/90":"bg-white/90"} backdrop-blur-xl border ${r?"border-zinc-700/50":"border-gray-300/50"} shadow-lg`,children:o.jsx(oe,{className:"p-4",children:o.jsxs("div",{className:"flex items-center justify-between",children:[o.jsxs("div",{className:"text-sm",children:[o.jsx("div",{className:`font-medium ${r?"text-white":"text-black"}`,children:"Location access needed"}),o.jsx("div",{className:`text-xs ${r?"text-zinc-400":"text-gray-600"}`,children:"Enable location to see your position on the map"})]}),o.jsx(J,{onClick:se,size:"sm",variant:"outline",children:"Enable"})]})})})})]})]})}),a&&o.jsxs("div",{className:"fixed inset-0 z-50 bg-black",children:[o.jsx("div",{className:"absolute top-4 right-4 z-10",children:o.jsx(J,{onClick:le,size:"sm",variant:"secondary",className:"bg-white/80 hover:bg-white/90 backdrop-blur-sm border border-gray-300/50 shadow-lg",children:o.jsx(WM,{className:"w-4 h-4"})})}),o.jsx("div",{ref:n,className:"w-full h-full"})]})]})};function jy(){const{getColors:r,currentTheme:e}=ue(),t=r(),[n,s]=m.useState([]),[i,a]=m.useState(!0);m.useEffect(()=>{(()=>{const h=[{id:"1",city:"Los Angeles",country:"United States",listeners:1247,coordinates:{lat:34.0522,lng:-118.2437},flag:"🇺🇸",timezone:"America/Los_Angeles",localTime:new Date().toLocaleTimeString("en-US",{timeZone:"America/Los_Angeles"})},{id:"2",city:"London",country:"United Kingdom",listeners:892,coordinates:{lat:51.5074,lng:-.1278},flag:"🇬🇧",timezone:"Europe/London",localTime:new Date().toLocaleTimeString("en-GB",{timeZone:"Europe/London"})},{id:"3",city:"Tokyo",country:"Japan",listeners:634,coordinates:{lat:35.6762,lng:139.6503},flag:"🇯🇵",timezone:"Asia/Tokyo",localTime:new Date().toLocaleTimeString("ja-JP",{timeZone:"Asia/Tokyo"})},{id:"4",city:"Berlin",country:"Germany",listeners:578,coordinates:{lat:52.52,lng:13.405},flag:"🇩🇪",timezone:"Europe/Berlin",localTime:new Date().toLocaleTimeString("de-DE",{timeZone:"Europe/Berlin"})},{id:"5",city:"Sydney",country:"Australia",listeners:423,coordinates:{lat:-33.8688,lng:151.2093},flag:"🇦🇺",timezone:"Australia/Sydney",localTime:new Date().toLocaleTimeString("en-AU",{timeZone:"Australia/Sydney"})},{id:"6",city:"São Paulo",country:"Brazil",listeners:312,coordinates:{lat:-23.5505,lng:-46.6333},flag:"🇧🇷",timezone:"America/Sao_Paulo",localTime:new Date().toLocaleTimeString("pt-BR",{timeZone:"America/Sao_Paulo"})}];setTimeout(()=>{s(h),a(!1)},1e3)})();const d=setInterval(()=>{s(h=>h.map(p=>({...p,localTime:new Date().toLocaleTimeString("en-US",{timeZone:p.timezone})})))},6e4);return()=>clearInterval(d)},[]);const l=n.reduce((u,d)=>u+d.listeners,0);return i?o.jsx("div",{className:"p-6 rounded-xl",style:{backgroundColor:t.cardBackground},children:o.jsxs("div",{className:"animate-pulse",children:[o.jsx("div",{className:"h-6 w-48 mb-4 rounded",style:{backgroundColor:t.border}}),o.jsx("div",{className:"space-y-3",children:[1,2,3,4,5,6].map(u=>o.jsxs("div",{className:"flex items-center space-x-3",children:[o.jsx("div",{className:"h-4 w-4 rounded",style:{backgroundColor:t.border}}),o.jsx("div",{className:"h-4 flex-1 rounded",style:{backgroundColor:t.border}}),o.jsx("div",{className:"h-4 w-16 rounded",style:{backgroundColor:t.border}})]},u))})]})}):o.jsxs("div",{className:"p-8 rounded-xl shadow-lg transition-all duration-300 hover:shadow-xl overflow-hidden",style:{backgroundColor:t.cardBackground,border:"none",minHeight:"600px"},children:[o.jsxs("div",{className:"flex items-center justify-between mb-6",children:[o.jsx("h3",{className:"font-orbitron font-bold text-xl",style:{color:t.text},children:"🌍 ACTIVE LOCATIONS"}),o.jsxs("div",{className:"px-3 py-1 rounded-full text-sm font-semibold flex items-center justify-center",style:{backgroundColor:t.accent,color:t.background},children:[l.toLocaleString()," Live"]})]}),o.jsx("div",{className:"space-y-3 max-h-80 overflow-y-auto px-4 py-2",children:n.map(u=>o.jsxs("div",{className:"flex items-center justify-between p-3 rounded-lg transition-all duration-200 hover:scale-105 relative group",style:{backgroundColor:e==="light-mode"?"rgba(0, 0, 0, 0.02)":"rgba(255, 255, 255, 0.05)",border:"none",transformOrigin:"center",zIndex:1,margin:"2px 0"},children:[o.jsxs("div",{className:"flex items-center space-x-3 min-w-0 flex-1 overflow-hidden",children:[o.jsx("span",{className:"text-2xl flex-shrink-0",children:u.flag}),o.jsxs("div",{className:"min-w-0 flex-1 overflow-hidden",children:[o.jsx("div",{className:"font-semibold text-sm truncate",style:{color:t.text},title:u.city,children:u.city}),o.jsx("div",{className:"text-xs truncate",style:{color:t.textMuted},title:u.country,children:u.country})]})]}),o.jsxs("div",{className:"text-right flex-shrink-0 ml-3 min-w-0",children:[o.jsx("div",{className:"font-bold text-sm truncate",style:{color:t.accent},title:u.listeners.toLocaleString(),children:u.listeners.toLocaleString()}),o.jsx("div",{className:"text-xs truncate",style:{color:t.textMuted},title:u.localTime,children:u.localTime})]})]},u.id))}),o.jsx("div",{className:"mt-4 pt-4 text-center text-xs",style:{color:t.textMuted,borderTop:"none"},children:"Updates every minute • Live data"})]})}function Iy(){const{getColors:r,currentTheme:e}=ue(),t=r(),[n,s]=m.useState([]),[i,a]=m.useState(!0);m.useEffect(()=>{(()=>{const p=[{id:"1",label:"Live Listeners",value:4086,unit:"",icon:"🎧",trend:"up",percentage:12.5,format:"number"},{id:"2",label:"Stream Uptime (days)",value:847,unit:"",icon:"📡",trend:"up",percentage:100,format:"number"},{id:"3",label:"Songs Played Today",value:342,unit:"",icon:"🎸",trend:"up",percentage:8.3,format:"number"},{id:"4",label:"Peak Listeners Today",value:5247,unit:"",icon:"📈",trend:"up",percentage:15.7,format:"number"},{id:"5",label:"Active Countries",value:67,unit:"",icon:"🌍",trend:"stable",percentage:2.1,format:"number"},{id:"6",label:"Avg Session (Mins)",value:47,unit:"",icon:"⏱️",trend:"up",percentage:6.8,format:"time"}];setTimeout(()=>{s(p),a(!1)},800)})();const h=setInterval(()=>{s(p=>p.map(g=>({...g,value:g.id==="1"?Math.floor(Math.random()*500)+3800:g.value,percentage:Math.random()*20-5})))},3e4);return()=>clearInterval(h)},[]);const l=d=>{switch(d.format){case"number":return d.value.toLocaleString();case"time":return`${d.value}`;case"percentage":return`${d.value}%`;default:return d.value.toString()}},u=d=>{switch(d){case"up":return"#10B981";case"down":return"#EF4444";case"stable":return"#6B7280";default:return"#6B7280"}};return i?o.jsx("div",{className:"p-6 rounded-xl",style:{backgroundColor:t.cardBackground},children:o.jsxs("div",{className:"animate-pulse",children:[o.jsx("div",{className:"h-6 w-48 mb-6 rounded",style:{backgroundColor:t.border}}),o.jsx("div",{className:"grid grid-cols-2 gap-4",children:[1,2,3,4,5,6].map(d=>o.jsxs("div",{className:"p-4 rounded-lg",style:{backgroundColor:t.border},children:[o.jsx("div",{className:"h-4 w-3/4 mb-2 rounded",style:{backgroundColor:t.background}}),o.jsx("div",{className:"h-8 w-1/2 mb-2 rounded",style:{backgroundColor:t.background}}),o.jsx("div",{className:"h-3 w-full rounded",style:{backgroundColor:t.background}})]},d))})]})}):o.jsxs("div",{className:"p-8 rounded-xl shadow-lg transition-all duration-300 hover:shadow-xl",style:{backgroundColor:t.cardBackground,border:"none",minHeight:"600px"},children:[o.jsxs("div",{className:"flex items-center justify-between mb-6",children:[o.jsx("h3",{className:"font-orbitron font-bold text-xl",style:{color:t.text},children:"📊 LIVE STATISTICS"}),o.jsxs("div",{className:"flex items-center space-x-2 px-3 py-1 rounded-full",style:{backgroundColor:"#10B981",border:"none"},children:[o.jsx("div",{className:"w-2 h-2 rounded-full animate-pulse flex-shrink-0",style:{backgroundColor:"#ffffff"}}),o.jsx("span",{className:"text-sm font-semibold flex-shrink-0",style:{color:"#ffffff"},children:"LIVE"})]})]}),o.jsx("div",{className:"grid grid-cols-2 gap-4",children:n.map(d=>o.jsxs("div",{className:"p-4 rounded-lg transition-all duration-300 hover:scale-105 hover:shadow-md",style:{backgroundColor:e==="light-mode"?"rgba(0, 0, 0, 0.02)":"rgba(255, 255, 255, 0.05)",border:"none"},children:[o.jsxs("div",{className:"flex items-center justify-between mb-2",children:[o.jsx("span",{className:"text-lg",children:d.icon}),o.jsxs("span",{className:"text-base font-semibold",style:{color:u(d.trend)},children:[Math.abs(d.percentage).toFixed(1),"%"]})]}),o.jsx("div",{className:"text-2xl font-bold mb-1",style:{color:t.text},children:l(d)}),o.jsx("div",{className:"text-sm font-medium",style:{color:t.textMuted},children:d.label}),d.unit&&o.jsx("div",{className:"text-xs mt-1",style:{color:t.accent},children:d.unit})]},d.id))}),o.jsxs("div",{className:"mt-6 text-center",style:{border:"none"},children:[o.jsxs("div",{className:"flex items-center justify-center space-x-2 text-xs",style:{color:t.textMuted},children:[o.jsx("div",{className:"w-2 h-2 rounded-full animate-pulse flex-shrink-0",style:{backgroundColor:"#10B981"}}),o.jsx("span",{className:"leading-none",children:"Real-time data • Updates every 30 seconds"})]}),o.jsx("div",{className:"mt-2 text-xs font-semibold",style:{color:t.accent},children:"🎸 Keep the metal alive! 🎸"})]})]})}function GO(){const{getColors:r,currentTheme:e}=ue(),t=r(),[n,s]=m.useState("stats");return o.jsx("section",{className:"py-16 transition-colors duration-300",style:{backgroundColor:t.background,border:"none"},children:o.jsxs("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8",children:[o.jsxs("div",{className:"text-center mb-12",children:[o.jsx("h2",{className:"font-orbitron font-black text-3xl md:text-4xl mb-4",style:{color:e==="light-mode"?"#000000":t.text},children:"Real-Time Dashboard"}),o.jsx("p",{className:"text-lg font-semibold max-w-2xl mx-auto",style:{color:e==="light-mode"?"rgba(0, 0, 0, 0.7)":t.textMuted},children:"Monitor live listener activity and global engagement across all platforms"})]}),o.jsx("div",{className:"md:hidden mb-6",children:o.jsxs("div",{className:"flex rounded-lg p-1 relative",style:{backgroundColor:t.cardBackground,border:"none"},children:[o.jsx("div",{className:"absolute top-1 bottom-1 rounded-md transition-all duration-300 ease-out",style:{backgroundColor:t.accent,left:n==="stats"?"4px":"calc(50% + 2px)",width:"calc(50% - 4px)",zIndex:1}}),o.jsx("button",{onClick:()=>s("stats"),className:"flex-1 py-2 px-4 rounded-md text-sm font-semibold transition-all duration-200 relative z-10 focus:outline-none focus:ring-0",style:{color:n==="stats"?t.background:t.textMuted,border:"none"},children:"Live Statistics"}),o.jsx("button",{onClick:()=>s("locations"),className:"flex-1 py-2 px-4 rounded-md text-sm font-semibold transition-all duration-200 relative z-10 focus:outline-none focus:ring-0",style:{color:n==="locations"?t.background:t.textMuted,border:"none"},children:"Active Locations"})]})}),o.jsxs("div",{className:"hidden md:grid md:grid-cols-2 gap-8",children:[o.jsx(Iy,{}),o.jsx(jy,{})]}),o.jsxs("div",{className:"md:hidden",children:[n==="stats"&&o.jsx(Iy,{}),n==="locations"&&o.jsx(jy,{})]}),o.jsx("div",{className:"mt-16 text-center",children:o.jsxs("div",{className:"inline-flex items-center space-x-2 px-4 py-2 rounded-full",style:{backgroundColor:t.cardBackground,border:"none"},children:[o.jsx("div",{className:"w-2 h-2 rounded-full animate-pulse flex-shrink-0 relative",style:{backgroundColor:"#10B981",top:"0px"}}),o.jsx("span",{className:"text-sm font-semibold leading-none",style:{color:t.text},children:"Real-time data • Updates every 30 seconds"})]})})]})})}function KO(){const[r,e]=m.useState({name:"",email:"",message:""}),[t,n]=m.useState([]),[s,i]=m.useState(!1),[a,l]=m.useState(!1),[u,d]=m.useState(""),{toast:h}=Gr(),{getColors:p,currentTheme:g}=ue(),b=p(),C=Gs({mutationFn:async N=>(await Pw("POST","/api/contacts",N)).json(),onSuccess:()=>{d(r.message),i(!0),e({name:"",email:"",message:""}),n([])},onError:()=>{d(r.message),l(!0)}}),x=N=>{N.preventDefault();const R=[];r.name.trim()||R.push("Name"),r.email.trim()||R.push("Email Address"),r.message.trim()||R.push("Message");const L=/^[^\s@]+@[^\s@]+\.[^\s@]+$/;if(r.email&&!L.test(r.email)&&R.push("Please enter a valid email address"),((R==null?void 0:R.length)||0)>0){n(R);return}n([]),C.mutate(r)},v=()=>{u&&(navigator.clipboard.writeText(u),h({title:"Message Copied",description:"Your message has been copied to clipboard."}))},E=()=>{l(!1),i(!1)},T=(N,R)=>{e(L=>({...L,[N]:R}))};return o.jsx("section",{id:"contact",className:"py-20 transition-colors duration-300",style:{backgroundColor:b.background},children:o.jsxs("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8",children:[o.jsxs("div",{className:"text-center mb-12",children:[o.jsx("h2",{className:"font-orbitron font-black text-3xl md:text-4xl mb-4",style:{color:g==="light-mode"?"#000000":b.text},children:"GET IN TOUCH"}),o.jsx("p",{className:"text-lg font-semibold",style:{color:b.textMuted},children:"Have questions, feedback, or want to get involved? Drop us a line!"})]}),o.jsx("div",{className:"flex justify-center items-center min-h-[500px]",children:o.jsx("div",{className:"w-full max-w-lg",children:o.jsx(ne,{className:"transition-all duration-300 mx-auto border-0",style:{backgroundColor:b.card},children:o.jsxs(oe,{className:"p-8",children:[!s&&!a&&o.jsxs(o.Fragment,{children:[o.jsx("h3",{className:"font-black text-xl mb-6 text-center",style:{color:b.primary},children:"Send us a Message"}),((t==null?void 0:t.length)||0)>0&&o.jsxs("div",{className:"mb-4 p-3 bg-red-900/20 border border-red-500 rounded-md",children:[o.jsx("p",{className:"text-red-400 text-sm font-semibold",children:"Please fill out the following required fields:"}),o.jsx("ul",{className:"text-red-300 text-sm mt-1",children:t.map((N,R)=>o.jsxs("li",{children:["• ",N]},R))})]}),o.jsxs("form",{onSubmit:x,className:"space-y-6",children:[o.jsxs("div",{children:[o.jsxs(Ae,{htmlFor:"name",className:"font-semibold",style:{color:b.textSecondary},children:["Full Name",t.includes("Name")&&o.jsx("span",{className:"text-red-500",children:"*"})]}),o.jsx(Be,{id:"name",value:r.name,onChange:N=>T("name",N.target.value),placeholder:"John Doe",required:!0,className:"transition-colors duration-300 placeholder:text-gray-400 placeholder:opacity-50",style:{backgroundColor:b.surface,border:"none",color:b.text}})]}),o.jsxs("div",{children:[o.jsxs(Ae,{htmlFor:"email",className:"font-semibold",style:{color:b.textSecondary},children:["Email Address",t.includes("Email Address")&&o.jsx("span",{className:"text-red-500",children:"*"})]}),o.jsx(Be,{id:"email",type:"email",value:r.email,onChange:N=>T("email",N.target.value),placeholder:"john@example.com",required:!0,className:"transition-colors duration-300 placeholder:text-gray-400 placeholder:opacity-50",style:{backgroundColor:b.surface,border:"none",color:b.text}})]}),o.jsxs("div",{children:[o.jsxs(Ae,{htmlFor:"contactMessage",className:"font-semibold",style:{color:b.textSecondary},children:["Message",t.includes("Message")&&o.jsx("span",{className:"text-red-500",children:"*"})]}),o.jsx(Jf,{id:"contactMessage",value:r.message,onChange:N=>T("message",N.target.value),placeholder:"Tell us what's on your mind...",rows:5,required:!0,className:"resize-none transition-colors duration-300 placeholder:text-gray-400 placeholder:opacity-50",style:{backgroundColor:b.surface,border:"none",color:b.text}})]}),o.jsxs(J,{type:"submit",disabled:C.isPending,className:"w-full px-6 py-3 rounded-full font-bold transition-all duration-300 focus:outline-none focus:ring-0",style:{backgroundColor:b.primary,color:b.primaryText||"white"},onMouseEnter:N=>{N.currentTarget.style.backgroundColor=b.primaryDark||b.primary,N.currentTarget.style.transform="scale(1.02)"},onMouseLeave:N=>{N.currentTarget.style.backgroundColor=b.primary,N.currentTarget.style.transform="scale(1)"},children:[o.jsx(Wi,{className:"mr-2 h-4 w-4"}),C.isPending?"SENDING...":"SEND MESSAGE"]})]})]}),s&&o.jsxs("div",{className:"text-center animate-in fade-in duration-500",children:[o.jsxs("div",{className:"relative inline-flex items-center justify-center mb-4",children:[o.jsx("div",{className:"absolute w-16 h-16 rounded-full opacity-50",style:{backgroundColor:b.primary}}),o.jsx(ya,{className:"w-8 h-8 text-green-400 relative z-10"})]}),o.jsx("h3",{className:"font-black text-xl mb-2 text-green-400",children:"Message Sent Successfully!"}),o.jsx("p",{className:"text-gray-300 text-sm",children:"We'll get back to you within 24-48 hours."}),o.jsx(J,{onClick:E,className:"mt-4 px-6 py-2 rounded-full font-bold transition-all duration-300 focus:outline-none focus:ring-0",style:{backgroundColor:b.primary,color:b.primaryText||"white"},children:"Send Another Message"})]}),a&&o.jsxs("div",{className:"text-center animate-in fade-in duration-500",children:[o.jsxs("div",{className:"relative inline-flex items-center justify-center mb-4",children:[o.jsx("div",{className:"absolute w-16 h-16 rounded-full bg-red-600 opacity-50"}),o.jsx($n,{className:"w-8 h-8 text-red-400 relative z-10"})]}),o.jsx("h3",{className:"font-black text-xl mb-2 text-red-400",children:"Message Failed to Send"}),o.jsx("p",{className:"text-gray-300 text-sm mb-4",children:"Please refresh the site and try again."}),o.jsxs("div",{className:"space-y-3",children:[o.jsxs(J,{onClick:v,className:"w-full px-6 py-2 rounded-full font-bold transition-all duration-300 bg-gray-600 hover:bg-gray-500 text-white focus:outline-none focus:ring-0",children:[o.jsx(VM,{className:"mr-2 h-4 w-4"}),"Copy Message to Clipboard"]}),o.jsx(J,{onClick:E,className:"w-full px-6 py-2 rounded-full font-bold transition-all duration-300 focus:outline-none focus:ring-0",style:{backgroundColor:b.primary,color:b.primaryText||"white"},children:"Try Again"})]})]})]})})})})]})})}const QO=[{id:"1",title:"Spandex Salvation Classic Tee",description:"Premium cotton tee with vintage logo design. Perfect for any metal fan.",price:24.99,compareAtPrice:29.99,images:["https://images.unsplash.com/photo-1521572163474-6864f9cf17ab?ixlib=rb-4.0.3&auto=format&fit=crop&w=800&h=800"],variants:[{id:"1-s",title:"Small",price:24.99,available:!0,option1:"S"},{id:"1-m",title:"Medium",price:24.99,available:!0,option1:"M"},{id:"1-l",title:"Large",price:24.99,available:!0,option1:"L"},{id:"1-xl",title:"X-Large",price:24.99,available:!1,option1:"XL"}],tags:["apparel","tee","classic"],rating:4.8,reviewCount:127,inStock:!0,featured:!0},{id:"2",title:"Rebellion Hoodie",description:"Heavy-duty hoodie with embroidered logo. Built for the coldest metal nights.",price:49.99,images:["https://images.unsplash.com/photo-1556821840-3a63f95609a7?ixlib=rb-4.0.3&auto=format&fit=crop&w=800&h=800"],variants:[{id:"2-s",title:"Small",price:49.99,available:!0,option1:"S"},{id:"2-m",title:"Medium",price:49.99,available:!0,option1:"M"},{id:"2-l",title:"Large",price:49.99,available:!0,option1:"L"}],tags:["apparel","hoodie","winter"],rating:4.9,reviewCount:89,inStock:!0},{id:"3",title:"Metal Fuel Coffee Mug",description:"15oz ceramic mug to fuel your metal mornings. Dishwasher safe.",price:19.99,images:["https://images.unsplash.com/photo-1544787219-7f47ccb76574?ixlib=rb-4.0.3&auto=format&fit=crop&w=800&h=800"],variants:[{id:"3-default",title:"Default",price:19.99,available:!0}],tags:["accessories","mug","coffee"],rating:4.6,reviewCount:234,inStock:!0,featured:!0},{id:"4",title:"Limited Edition Vinyl Collection",description:"Exclusive compilation of classic metal hits. Limited to 500 copies.",price:34.99,images:["https://images.unsplash.com/photo-1493225457124-a3eb161ffa5f?ixlib=rb-4.0.3&auto=format&fit=crop&w=800&h=800"],variants:[{id:"4-default",title:"Limited Edition",price:34.99,available:!0}],tags:["music","vinyl","limited"],rating:5,reviewCount:45,inStock:!0,featured:!0}];function YO(){const[r,e]=m.useState([]),[t,n]=m.useState([]),[s,i]=m.useState(null),[a,l]=m.useState(null),[u,d]=m.useState(!0),{toast:h}=Gr(),{getColors:p,currentTheme:g}=ue(),b=p();m.useEffect(()=>{setTimeout(()=>{e(QO),d(!1)},1e3)},[]);const C=(E,T,N=1)=>{const R=t.find(L=>L.variantId===T.id);n(R?t.map(L=>L.variantId===T.id?{...L,quantity:L.quantity+N}:L):[...t,{productId:E.id,variantId:T.id,quantity:N,title:`${E.title} - ${T.title}`,price:T.price,image:E.images[0]}]),h({title:"Added to Cart",description:`${E.title} has been added to your cart.`})},x=()=>t.reduce((E,T)=>E+T.price*T.quantity,0),v=async()=>{const E=`https://spandex-salvation-radio.myshopify.com/cart/${(t||[]).map(T=>`${T.variantId}:${T.quantity}`).join(",")}`;h({title:"Redirecting to Checkout",description:"Taking you to secure Shopify checkout..."}),console.log("Redirecting to:",E)};return u?o.jsx("div",{className:"flex items-center justify-center py-20",children:o.jsx("div",{className:"animate-spin w-8 h-8 border-4 border-primary border-t-transparent rounded-full"})}):o.jsx("section",{id:"merch",className:"py-20 transition-colors duration-300",style:{backgroundColor:b.background},children:o.jsxs("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8",children:[o.jsxs("div",{className:"text-center mb-12",children:[o.jsx("h2",{className:"font-orbitron font-black text-3xl md:text-4xl mb-4",style:{color:g==="light-mode"?"#000000":b.text},children:"OFFICIAL MERCH STORE"}),o.jsx("p",{className:"text-lg font-semibold",style:{color:b.textMuted},children:"Show your metal pride with exclusive Spandex Salvation Radio merchandise."})]}),(t||[]).length>0&&o.jsx("div",{className:"mb-8",children:o.jsx(ne,{className:"transition-all duration-300",style:{backgroundColor:g==="light-mode"?"rgba(255, 255, 255, 0.9)":"rgba(30, 30, 30, 0.5)"},children:o.jsx(oe,{className:"p-4",children:o.jsxs("div",{className:"flex items-center justify-between",children:[o.jsxs("div",{className:"flex items-center",children:[o.jsx(Lf,{className:"h-5 w-5 mr-2",style:{color:b.primary}}),o.jsxs("span",{className:"font-black",style:{color:g==="light-mode"?"#000000":"#ffffff"},children:[(t||[]).reduce((E,T)=>E+T.quantity,0)," ","items in cart"]})]}),o.jsxs("div",{className:"flex items-center space-x-4",children:[o.jsxs("span",{className:"font-black text-xl text-metal-orange",children:["$",x().toFixed(2)]}),o.jsx(J,{onClick:v,className:"bg-metal-orange hover:bg-orange-600 text-white px-6 py-2 rounded-full font-bold",children:"Checkout"})]})]})})})}),o.jsxs("div",{className:"mb-12 text-center",children:[o.jsx("h3",{className:"font-black text-xl mb-6 text-center",style:{color:b.primary},children:"Featured Products"}),o.jsx("div",{className:"w-full flex justify-center",children:o.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6 justify-items-center",children:r==null?void 0:r.filter(E=>E.featured).map(E=>o.jsx(XO,{product:E,onAddToCart:(T,N)=>C(E,T,N),onViewDetails:()=>i(E)},E.id))})})]}),s&&o.jsx(JO,{product:s,onClose:()=>i(null),onAddToCart:(E,T)=>C(s,E,T)})]})})}function XO({product:r,onAddToCart:e,onViewDetails:t}){const[n,s]=m.useState(r.variants[0]),{getColors:i,currentTheme:a}=ue(),l=i();return o.jsx(ne,{className:"transition-all duration-300 group h-full flex flex-col",style:{backgroundColor:a==="light-mode"?"#ffffff":"rgba(30, 30, 30, 0.5)",border:"none"},children:o.jsxs(oe,{className:"p-4 flex flex-col h-full",children:[o.jsxs("div",{className:"relative mb-4",children:[o.jsx("img",{src:r.images[0],alt:r.title,className:"w-full h-48 object-cover rounded-lg"}),r.featured&&o.jsx(Ke,{className:"absolute top-2 left-2",style:{backgroundColor:l.primary,color:"white"},children:"Featured"}),r.compareAtPrice&&o.jsx(Ke,{className:"absolute top-2 left-2 w-auto",style:{backgroundColor:"#dc2626",color:"white",marginTop:r.featured?"30px":"0"},children:"Sale"}),o.jsxs("div",{className:"absolute inset-0 bg-black/50 opacity-0 group-hover:opacity-100 transition-opacity flex items-center justify-center space-x-2",children:[o.jsx(J,{size:"sm",variant:"secondary",onClick:t,className:"bg-white/90 text-black hover:bg-white focus:outline-none focus:ring-0",children:o.jsx(i_,{className:"h-4 w-4"})}),o.jsx(J,{size:"sm",variant:"secondary",className:"bg-white/90 text-black hover:bg-white focus:outline-none focus:ring-0",children:o.jsx(Qs,{className:"h-4 w-4"})}),o.jsx(J,{size:"sm",variant:"secondary",className:"bg-white/90 text-black hover:bg-white focus:outline-none focus:ring-0",children:o.jsx(e5,{className:"h-4 w-4"})})]})]}),o.jsx("h4",{className:"font-black mb-2",style:{color:a==="light-mode"?"#000000":"#ffffff"},children:r.title}),o.jsx("p",{className:"text-sm font-semibold line-clamp-2 flex-grow",style:{color:l.textMuted},children:r.description}),o.jsxs("div",{className:"flex flex-col items-center mb-3 mt-3",children:[o.jsxs("div",{className:"flex items-center",children:[[...Array(5)].map((u,d)=>o.jsx(Ho,{className:`h-4 w-4 ${d<Math.floor(r.rating)?"fill-current":"text-gray-600"}`,style:{color:d<Math.floor(r.rating)?l.accent:void 0}},d)),o.jsxs("span",{className:"text-sm font-semibold ml-2",style:{color:a==="light-mode"?"#6b7280":"#9ca3af"},children:["(",r.reviewCount,")"]})]}),o.jsxs("div",{className:"mt-2 mb-3",children:[o.jsxs("span",{className:"text-xl font-black text-metal-orange",children:["$",r.price]}),r.compareAtPrice&&o.jsxs("span",{className:"line-through ml-2",style:{color:a==="light-mode"?"#6b7280":"#9ca3af"},children:["$",r.compareAtPrice]})]}),!r.inStock&&o.jsx(Ke,{variant:"secondary",className:"bg-gray-600 text-white mt-2",children:"Out of Stock"})]}),o.jsxs("div",{className:"mt-auto",children:[(r.variants||[]).length>1&&o.jsxs("div",{className:"relative mb-3",children:[o.jsx("select",{value:n.id,onChange:u=>{var d;return s((d=r.variants)==null?void 0:d.find(h=>h.id===u.target.value))},className:"w-full p-2 rounded appearance-none pr-8 text-center",style:{backgroundColor:a==="light-mode"?"rgba(255, 255, 255, 0.9)":"rgba(30, 30, 30, 0.5)",color:a==="light-mode"?"#000000":"#ffffff",borderColor:l.primary,textAlign:"center"},children:(r.variants||[]).map(u=>o.jsxs("option",{value:u.id,disabled:!u.available,children:[u.title," ",!u.available&&"(Out of Stock)"]},u.id))}),o.jsx("div",{className:"absolute inset-y-0 right-2 flex items-center pointer-events-none",children:o.jsx("svg",{className:"w-4 h-4 text-gray-400",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:o.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M19 9l-7 7-7-7"})})})]}),o.jsxs(J,{onClick:()=>console.log("Buy now:",r,n),disabled:!r.inStock||!n.available,className:"w-full font-bold transition-all duration-300 focus:outline-none focus:ring-0",style:{backgroundColor:l.primary,color:l.primaryText||"white"},onMouseEnter:u=>{u.currentTarget.style.backgroundColor=l.primaryDark||l.primary,u.currentTarget.style.transform="scale(1.02)"},onMouseLeave:u=>{u.currentTarget.style.backgroundColor=l.primary,u.currentTarget.style.transform="scale(1)"},children:[o.jsx(Lf,{className:"mr-2 h-4 w-4"}),"Buy Now"]})]})]})})}function JO({product:r,onClose:e,onAddToCart:t}){const[n,s]=m.useState(r.variants[0]),[i,a]=m.useState(1);return o.jsx("div",{className:"fixed inset-0 z-50 flex items-center justify-center p-4 bg-black/50",children:o.jsx(ne,{className:"bg-dark-bg max-w-2xl w-full max-h-[90vh] overflow-y-auto",children:o.jsxs(oe,{className:"p-6",children:[o.jsxs("div",{className:"flex justify-between items-start mb-6",children:[o.jsx("h3",{className:"font-black text-2xl",style:{color:"#ffffff"},children:r.title}),o.jsx(J,{variant:"ghost",onClick:e,className:"text-gray-400 hover:text-white",children:"×"})]}),o.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[o.jsx("div",{children:o.jsx("img",{src:r.images[0],alt:r.title,className:"w-full h-64 object-cover rounded-lg"})}),o.jsxs("div",{children:[o.jsx("p",{className:"font-semibold mb-4",style:{color:"#9ca3af"},children:r.description}),o.jsxs("div",{className:"flex items-center mb-4",children:[o.jsx("div",{className:"flex items-center",children:[...Array(5)].map((l,u)=>o.jsx(Ho,{className:`h-5 w-5 ${u<Math.floor(r.rating)?"fill-current":"text-gray-600"}`,style:{color:u<Math.floor(r.rating)?"#f59e0b":void 0}},u))}),o.jsxs("span",{className:"font-semibold ml-2",style:{color:"#9ca3af"},children:[r.rating," (",r.reviewCount," reviews)"]})]}),o.jsxs("div",{className:"mb-4",children:[o.jsxs("span",{className:"text-2xl font-black text-metal-orange",children:["$",n.price]}),r.compareAtPrice&&o.jsxs("span",{className:"line-through ml-2",style:{color:"#9ca3af"},children:["$",r.compareAtPrice]})]}),(r.variants||[]).length>1&&o.jsxs("div",{className:"mb-4",children:[o.jsx("label",{className:"block text-gray-300 font-semibold mb-2",children:"Size:"}),o.jsx("select",{value:n.id,onChange:l=>{var u;return s((u=r.variants)==null?void 0:u.find(d=>d.id===l.target.value))},className:"w-full p-2 bg-dark-bg text-white placeholder-gray-500 rounded text-center",style:{textAlign:"center"},children:(r.variants||[]).map(l=>o.jsxs("option",{value:l.id,disabled:!l.available,children:[l.title," ",!l.available&&"(Out of Stock)"]},l.id))})]}),o.jsxs("div",{className:"mb-6",children:[o.jsx("label",{className:"block text-gray-300 font-semibold mb-2",children:"Quantity:"}),o.jsx("input",{type:"number",min:"1",max:"10",value:i,onChange:l=>a(parseInt(l.target.value)),className:"w-20 p-2 bg-dark-bg/50 text-white rounded"})]}),o.jsxs(J,{onClick:()=>{console.log("Buy now:",r,n),e()},disabled:!r.inStock||!n.available,className:"w-full bg-metal-orange hover:bg-orange-600 text-white font-bold focus:outline-none focus:ring-0",children:[o.jsx(Lf,{className:"mr-2 h-4 w-4"}),"Buy Now - $",(n.price*i).toFixed(2)]})]})]})]})})})}var Kc="Switch",[ZO,a6]=Bn(Kc),[e3,t3]=ZO(Kc),Z1=m.forwardRef((r,e)=>{const{__scopeSwitch:t,name:n,checked:s,defaultChecked:i,required:a,disabled:l,value:u="on",onCheckedChange:d,form:h,...p}=r,[g,b]=m.useState(null),C=at(e,N=>b(N)),x=m.useRef(!1),v=g?h||!!g.closest("form"):!0,[E,T]=Do({prop:s,defaultProp:i??!1,onChange:d,caller:Kc});return o.jsxs(e3,{scope:t,checked:E,disabled:l,children:[o.jsx(De.button,{type:"button",role:"switch","aria-checked":E,"aria-required":a,"data-state":nT(E),"data-disabled":l?"":void 0,disabled:l,value:u,...p,ref:C,onClick:_e(r.onClick,N=>{T(R=>!R),v&&(x.current=N.isPropagationStopped(),x.current||N.stopPropagation())})}),v&&o.jsx(rT,{control:g,bubbles:!x.current,name:n,value:u,checked:E,required:a,disabled:l,form:h,style:{transform:"translateX(-100%)"}})]})});Z1.displayName=Kc;var eT="SwitchThumb",tT=m.forwardRef((r,e)=>{const{__scopeSwitch:t,...n}=r,s=t3(eT,t);return o.jsx(De.span,{"data-state":nT(s.checked),"data-disabled":s.disabled?"":void 0,...n,ref:e})});tT.displayName=eT;var r3="SwitchBubbleInput",rT=m.forwardRef(({__scopeSwitch:r,control:e,checked:t,bubbles:n=!0,...s},i)=>{const a=m.useRef(null),l=at(a,i),u=z1(t),d=bx(e);return m.useEffect(()=>{const h=a.current;if(!h)return;const p=window.HTMLInputElement.prototype,b=Object.getOwnPropertyDescriptor(p,"checked").set;if(u!==t&&b){const C=new Event("click",{bubbles:n});b.call(h,t),h.dispatchEvent(C)}},[u,t,n]),o.jsx("input",{type:"checkbox","aria-hidden":!0,defaultChecked:t,...s,tabIndex:-1,ref:l,style:{...s.style,...d,position:"absolute",pointerEvents:"none",opacity:0,margin:0}})});rT.displayName=r3;function nT(r){return r?"checked":"unchecked"}var sT=Z1,n3=tT;const qs=m.forwardRef(({className:r,...e},t)=>o.jsx(sT,{className:ee("peer inline-flex h-6 w-11 shrink-0 cursor-pointer items-center rounded-full border-2 border-transparent transition-colors disabled:cursor-not-allowed disabled:opacity-50 data-[state=checked]:bg-primary data-[state=unchecked]:bg-input",r),...e,ref:t,children:o.jsx(n3,{className:ee("pointer-events-none block h-5 w-5 rounded-full bg-background shadow-lg transition-transform data-[state=checked]:translate-x-5 data-[state=unchecked]:translate-x-0")})}));qs.displayName=sT.displayName;var Qc="Tabs",[s3,l6]=Bn(Qc,[vx]),oT=vx(),[o3,tm]=s3(Qc),iT=m.forwardRef((r,e)=>{const{__scopeTabs:t,value:n,onValueChange:s,defaultValue:i,orientation:a="horizontal",dir:l,activationMode:u="automatic",...d}=r,h=ox(l),[p,g]=Do({prop:n,onChange:s,defaultProp:i??"",caller:Qc});return o.jsx(o3,{scope:t,baseId:ah(),value:p,onValueChange:g,orientation:a,dir:h,activationMode:u,children:o.jsx(De.div,{dir:h,"data-orientation":a,...d,ref:e})})});iT.displayName=Qc;var aT="TabsList",lT=m.forwardRef((r,e)=>{const{__scopeTabs:t,loop:n=!0,...s}=r,i=tm(aT,t),a=oT(t);return o.jsx(gE,{asChild:!0,...a,orientation:i.orientation,dir:i.dir,loop:n,children:o.jsx(De.div,{role:"tablist","aria-orientation":i.orientation,...s,ref:e})})});lT.displayName=aT;var cT="TabsTrigger",uT=m.forwardRef((r,e)=>{const{__scopeTabs:t,value:n,disabled:s=!1,...i}=r,a=tm(cT,t),l=oT(t),u=fT(a.baseId,n),d=mT(a.baseId,n),h=n===a.value;return o.jsx(yE,{asChild:!0,...l,focusable:!s,active:h,children:o.jsx(De.button,{type:"button",role:"tab","aria-selected":h,"aria-controls":d,"data-state":h?"active":"inactive","data-disabled":s?"":void 0,disabled:s,id:u,...i,ref:e,onMouseDown:_e(r.onMouseDown,p=>{!s&&p.button===0&&p.ctrlKey===!1?a.onValueChange(n):p.preventDefault()}),onKeyDown:_e(r.onKeyDown,p=>{[" ","Enter"].includes(p.key)&&a.onValueChange(n)}),onFocus:_e(r.onFocus,()=>{const p=a.activationMode!=="manual";!h&&!s&&p&&a.onValueChange(n)})})})});uT.displayName=cT;var dT="TabsContent",hT=m.forwardRef((r,e)=>{const{__scopeTabs:t,value:n,forceMount:s,children:i,...a}=r,l=tm(dT,t),u=fT(l.baseId,n),d=mT(l.baseId,n),h=n===l.value,p=m.useRef(h);return m.useEffect(()=>{const g=requestAnimationFrame(()=>p.current=!1);return()=>cancelAnimationFrame(g)},[]),o.jsx(Sr,{present:s||h,children:({present:g})=>o.jsx(De.div,{"data-state":h?"active":"inactive","data-orientation":l.orientation,role:"tabpanel","aria-labelledby":u,hidden:!g,id:d,tabIndex:0,...a,ref:e,style:{...r.style,animationDuration:p.current?"0s":void 0},children:g&&i})})});hT.displayName=dT;function fT(r,e){return`${r}-trigger-${e}`}function mT(r,e){return`${r}-content-${e}`}var i3=iT,pT=lT,gT=uT,yT=hT;const rm=i3,Yc=m.forwardRef(({className:r,...e},t)=>o.jsx(pT,{ref:t,className:ee("inline-flex h-10 items-center justify-center rounded-md bg-muted p-1 text-muted-foreground",r),...e}));Yc.displayName=pT.displayName;const Ut=m.forwardRef(({className:r,...e},t)=>o.jsx(gT,{ref:t,className:ee("inline-flex items-center justify-center whitespace-nowrap rounded-sm px-3 py-1.5 text-sm font-medium transition-all disabled:pointer-events-none disabled:opacity-50 data-[state=active]:bg-background data-[state=active]:text-foreground data-[state=active]:shadow-sm",r),...e}));Ut.displayName=gT.displayName;const $t=m.forwardRef(({className:r,...e},t)=>o.jsx(yT,{ref:t,className:ee("mt-2",r),...e}));$t.displayName=yT.displayName;const a3=()=>{const[r,e]=m.useState({pageLoads:[],apiRequests:[],componentRenders:[],errors:[],customTraces:[]}),[t,n]=m.useState({currentUsers:0,activeSessions:0,averageResponseTime:0,errorRate:0,throughput:0}),[s,i]=m.useState(!1),[a,l]=m.useState(new Date),{getColors:u}=ue(),d=u(),h=(x,v)=>x.map(E=>{let T="good";return v==="page_load"?E.unit==="ms"?E.value>3e3?T="error":E.value>2e3&&(T="warning"):E.unit==="score"&&E.name==="CLS"&&(E.value>.25?T="error":E.value>.1&&(T="warning")):v==="api_request"?E.value>1e3?T="error":E.value>500&&(T="warning"):v==="component_render"&&(E.value>100?T="error":E.value>50&&(T="warning")),{name:E.name,value:E.value,unit:E.unit,status:T,timestamp:E.timestamp,description:`${v.replace("_"," ")} performance metric`}}),p=async()=>{i(!0);try{const x=ml.getMetrics(),v=ml.getMetricsSummary(),E=Array.from(x.pageLoads.values()).flat(),T=Array.from(x.apiRequests.values()).flat(),N=Array.from(x.componentRenders.values()).flat(),R=Array.from(x.errors.values()).flat(),L=Array.from(x.customTraces.values()).flat();e({pageLoads:h(E,"page_load"),apiRequests:h(T,"api_request"),componentRenders:h(N,"component_render"),errors:h(R,"error"),customTraces:h(L,"custom_trace")});const U=new Set(E.map(_=>_.sessionId)).size,A=T.length>0?T.reduce((_,M)=>_+M.value,0)/T.length:0,w=R.length,k=v.totalEvents,j=k>0?w/k*100:0;n({currentUsers:U,activeSessions:U,averageResponseTime:Math.round(A),errorRate:Math.round(j*100)/100,throughput:Math.round(k/10)}),l(new Date)}catch(x){console.error("Failed to refresh performance data:",x)}finally{i(!1)}};m.useEffect(()=>{const x=ml.subscribe(E=>{p()});p();const v=setInterval(p,3e4);return()=>{x(),clearInterval(v)}},[]);const g=x=>{switch(x){case"good":return o.jsx(Ks,{className:"h-4 w-4 text-green-500"});case"warning":return o.jsx(Bu,{className:"h-4 w-4 text-yellow-500"});case"error":return o.jsx(OM,{className:"h-4 w-4 text-red-500"})}},b=x=>{switch(x){case"good":return"bg-green-100 text-green-800 border-green-200";case"warning":return"bg-yellow-100 text-yellow-800 border-yellow-200";case"error":return"bg-red-100 text-red-800 border-red-200"}},C=x=>x.toLocaleTimeString("en-US",{hour:"2-digit",minute:"2-digit",second:"2-digit"});return o.jsxs("div",{className:"space-y-6 p-6",style:{backgroundColor:d.background,color:d.text},children:[o.jsxs("div",{className:"flex items-center justify-between",children:[o.jsxs("div",{children:[o.jsx("h1",{className:"text-3xl font-bold",style:{color:d.text},children:"Performance Monitoring Dashboard"}),o.jsx("p",{className:"text-muted-foreground mt-2",children:"Real-time performance metrics and monitoring data"})]}),o.jsxs("div",{className:"flex items-center gap-4",children:[o.jsxs(Ke,{variant:"outline",className:"text-sm",children:["Last updated: ",C(a)]}),o.jsxs(J,{onClick:p,disabled:s,className:"flex items-center gap-2",style:{background:`linear-gradient(45deg, ${d.primary}, ${d.secondary})`,border:"none",color:"white"},children:[o.jsx(XM,{className:`h-4 w-4 ${s?"animate-spin":""}`}),"Refresh"]})]})]}),o.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-5 gap-4",children:[o.jsx(ne,{style:{backgroundColor:d.surface,borderColor:d.border},children:o.jsx(oe,{className:"p-4",children:o.jsxs("div",{className:"flex items-center justify-between",children:[o.jsxs("div",{children:[o.jsx("p",{className:"text-sm font-medium text-muted-foreground",children:"Current Users"}),o.jsx("p",{className:"text-2xl font-bold",children:t.currentUsers})]}),o.jsx(hl,{className:"h-8 w-8 text-blue-500"})]})})}),o.jsx(ne,{style:{backgroundColor:d.surface,borderColor:d.border},children:o.jsx(oe,{className:"p-4",children:o.jsxs("div",{className:"flex items-center justify-between",children:[o.jsxs("div",{children:[o.jsx("p",{className:"text-sm font-medium text-muted-foreground",children:"Active Sessions"}),o.jsx("p",{className:"text-2xl font-bold",children:t.activeSessions})]}),o.jsx(Gd,{className:"h-8 w-8 text-green-500"})]})})}),o.jsx(ne,{style:{backgroundColor:d.surface,borderColor:d.border},children:o.jsx(oe,{className:"p-4",children:o.jsxs("div",{className:"flex items-center justify-between",children:[o.jsxs("div",{children:[o.jsx("p",{className:"text-sm font-medium text-muted-foreground",children:"Avg Response"}),o.jsxs("p",{className:"text-2xl font-bold",children:[t.averageResponseTime,"ms"]})]}),o.jsx(o_,{className:"h-8 w-8 text-purple-500"})]})})}),o.jsx(ne,{style:{backgroundColor:d.surface,borderColor:d.border},children:o.jsx(oe,{className:"p-4",children:o.jsxs("div",{className:"flex items-center justify-between",children:[o.jsxs("div",{children:[o.jsx("p",{className:"text-sm font-medium text-muted-foreground",children:"Error Rate"}),o.jsxs("p",{className:"text-2xl font-bold",children:[t.errorRate,"%"]})]}),o.jsx(Bu,{className:"h-8 w-8 text-red-500"})]})})}),o.jsx(ne,{style:{backgroundColor:d.surface,borderColor:d.border},children:o.jsx(oe,{className:"p-4",children:o.jsxs("div",{className:"flex items-center justify-between",children:[o.jsxs("div",{children:[o.jsx("p",{className:"text-sm font-medium text-muted-foreground",children:"Throughput"}),o.jsxs("p",{className:"text-2xl font-bold",children:[t.throughput,"/min"]})]}),o.jsx(_y,{className:"h-8 w-8 text-orange-500"})]})})})]}),o.jsxs(rm,{defaultValue:"overview",className:"w-full",children:[o.jsxs(Yc,{className:"grid w-full grid-cols-6",style:{backgroundColor:d.surface},children:[o.jsx(Ut,{value:"overview",children:"Overview"}),o.jsx(Ut,{value:"pages",children:"Page Loads"}),o.jsx(Ut,{value:"api",children:"API Requests"}),o.jsx(Ut,{value:"components",children:"Components"}),o.jsx(Ut,{value:"errors",children:"Errors"}),o.jsx(Ut,{value:"traces",children:"Custom Traces"})]}),o.jsx($t,{value:"overview",className:"space-y-4",children:o.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6",children:[o.jsxs(ne,{style:{backgroundColor:d.surface,borderColor:d.border},children:[o.jsx(Ye,{children:o.jsxs(Je,{className:"flex items-center gap-2",children:[o.jsx(_y,{className:"h-5 w-5"}),"Performance Summary"]})}),o.jsx(oe,{className:"space-y-4",children:o.jsxs("div",{className:"space-y-2",children:[o.jsxs("div",{className:"flex justify-between",children:[o.jsx("span",{children:"Page Load Performance"}),o.jsx(Ke,{className:b("good"),children:"Good"})]}),o.jsxs("div",{className:"flex justify-between",children:[o.jsx("span",{children:"API Response Times"}),o.jsx(Ke,{className:b("warning"),children:"Warning"})]}),o.jsxs("div",{className:"flex justify-between",children:[o.jsx("span",{children:"Component Rendering"}),o.jsx(Ke,{className:b("good"),children:"Good"})]}),o.jsxs("div",{className:"flex justify-between",children:[o.jsx("span",{children:"Error Rate"}),o.jsx(Ke,{className:b("good"),children:"Good"})]})]})})]}),o.jsxs(ne,{style:{backgroundColor:d.surface,borderColor:d.border},children:[o.jsx(Ye,{children:o.jsxs(Je,{className:"flex items-center gap-2",children:[o.jsx(Gd,{className:"h-5 w-5"}),"Recent Activity"]})}),o.jsx(oe,{className:"space-y-3",children:r.pageLoads.slice(0,3).map((x,v)=>o.jsxs("div",{className:"flex items-center justify-between text-sm",children:[o.jsx("span",{children:x.name}),o.jsxs("div",{className:"flex items-center gap-2",children:[o.jsxs("span",{children:[x.value,x.unit]}),g(x.status)]})]},v))})]})]})}),o.jsx($t,{value:"pages",className:"space-y-4",children:o.jsxs(ne,{style:{backgroundColor:d.surface,borderColor:d.border},children:[o.jsx(Ye,{children:o.jsxs(Je,{className:"flex items-center gap-2",children:[o.jsx(hl,{className:"h-5 w-5"}),"Page Load Performance"]})}),o.jsx(oe,{children:o.jsx("div",{className:"space-y-3",children:r.pageLoads.map((x,v)=>o.jsxs("div",{className:"flex items-center justify-between p-3 rounded-lg border",style:{borderColor:d.border},children:[o.jsxs("div",{children:[o.jsx("p",{className:"font-medium",children:x.name}),o.jsx("p",{className:"text-sm text-muted-foreground",children:x.description})]}),o.jsxs("div",{className:"flex items-center gap-3",children:[o.jsxs("span",{className:"text-lg font-bold",children:[x.value,x.unit]}),o.jsxs(Ke,{className:b(x.status),children:[g(x.status),x.status]}),o.jsx("span",{className:"text-xs text-muted-foreground",children:C(x.timestamp)})]})]},v))})})]})}),o.jsx($t,{value:"api",className:"space-y-4",children:o.jsxs(ne,{style:{backgroundColor:d.surface,borderColor:d.border},children:[o.jsx(Ye,{children:o.jsxs(Je,{className:"flex items-center gap-2",children:[o.jsx(KM,{className:"h-5 w-5"}),"API Request Performance"]})}),o.jsx(oe,{children:o.jsx("div",{className:"space-y-3",children:r.apiRequests.map((x,v)=>o.jsxs("div",{className:"flex items-center justify-between p-3 rounded-lg border",style:{borderColor:d.border},children:[o.jsxs("div",{children:[o.jsx("p",{className:"font-medium",children:x.name}),o.jsx("p",{className:"text-sm text-muted-foreground",children:x.description})]}),o.jsxs("div",{className:"flex items-center gap-3",children:[o.jsxs("span",{className:"text-lg font-bold",children:[x.value,x.unit]}),o.jsxs(Ke,{className:b(x.status),children:[g(x.status),x.status]}),o.jsx("span",{className:"text-xs text-muted-foreground",children:C(x.timestamp)})]})]},v))})})]})}),o.jsx($t,{value:"components",className:"space-y-4",children:o.jsxs(ne,{style:{backgroundColor:d.surface,borderColor:d.border},children:[o.jsx(Ye,{children:o.jsxs(Je,{className:"flex items-center gap-2",children:[o.jsx(zM,{className:"h-5 w-5"}),"Component Render Performance"]})}),o.jsx(oe,{children:o.jsx("div",{className:"space-y-3",children:r.componentRenders.map((x,v)=>o.jsxs("div",{className:"flex items-center justify-between p-3 rounded-lg border",style:{borderColor:d.border},children:[o.jsxs("div",{children:[o.jsx("p",{className:"font-medium",children:x.name}),o.jsx("p",{className:"text-sm text-muted-foreground",children:x.description})]}),o.jsxs("div",{className:"flex items-center gap-3",children:[o.jsxs("span",{className:"text-lg font-bold",children:[x.value,x.unit]}),o.jsxs(Ke,{className:b(x.status),children:[g(x.status),x.status]}),o.jsx("span",{className:"text-xs text-muted-foreground",children:C(x.timestamp)})]})]},v))})})]})}),o.jsx($t,{value:"errors",className:"space-y-4",children:o.jsxs(ne,{style:{backgroundColor:d.surface,borderColor:d.border},children:[o.jsx(Ye,{children:o.jsxs(Je,{className:"flex items-center gap-2",children:[o.jsx(Bu,{className:"h-5 w-5"}),"Error Monitoring"]})}),o.jsx(oe,{children:o.jsx("div",{className:"space-y-3",children:r.errors.map((x,v)=>o.jsxs("div",{className:"flex items-center justify-between p-3 rounded-lg border",style:{borderColor:d.border},children:[o.jsxs("div",{children:[o.jsx("p",{className:"font-medium",children:x.name}),o.jsx("p",{className:"text-sm text-muted-foreground",children:x.description})]}),o.jsxs("div",{className:"flex items-center gap-3",children:[o.jsxs("span",{className:"text-lg font-bold",children:[x.value,x.unit]}),o.jsxs(Ke,{className:b(x.status),children:[g(x.status),x.status]}),o.jsx("span",{className:"text-xs text-muted-foreground",children:C(x.timestamp)})]})]},v))})})]})}),o.jsx($t,{value:"traces",className:"space-y-4",children:o.jsxs(ne,{style:{backgroundColor:d.surface,borderColor:d.border},children:[o.jsx(Ye,{children:o.jsxs(Je,{className:"flex items-center gap-2",children:[o.jsx(FM,{className:"h-5 w-5"}),"Custom Performance Traces"]})}),o.jsx(oe,{children:o.jsx("div",{className:"space-y-3",children:r.customTraces.map((x,v)=>o.jsxs("div",{className:"flex items-center justify-between p-3 rounded-lg border",style:{borderColor:d.border},children:[o.jsxs("div",{children:[o.jsx("p",{className:"font-medium",children:x.name}),o.jsx("p",{className:"text-sm text-muted-foreground",children:x.description})]}),o.jsxs("div",{className:"flex items-center gap-3",children:[o.jsxs("span",{className:"text-lg font-bold",children:[x.value,x.unit]}),o.jsxs(Ke,{className:b(x.status),children:[g(x.status),x.status]}),o.jsx("span",{className:"text-xs text-muted-foreground",children:C(x.timestamp)})]})]},v))})})]})})]}),o.jsx(ne,{style:{backgroundColor:d.surface,borderColor:d.border},children:o.jsx(oe,{className:"p-6",children:o.jsxs("div",{className:"text-center",children:[o.jsx("h3",{className:"text-lg font-semibold mb-2",children:"View Detailed Analytics in Firebase Console"}),o.jsx("p",{className:"text-muted-foreground mb-4",children:"Access comprehensive performance data, set up alerts, and configure monitoring rules"}),o.jsxs(J,{onClick:()=>window.open("https://console.firebase.google.com/","_blank"),className:"flex items-center gap-2 mx-auto",style:{background:`linear-gradient(45deg, ${d.primary}, ${d.secondary})`,border:"none",color:"white"},children:[o.jsx(hl,{className:"h-4 w-4"}),"Open Firebase Console"]})]})})})]})};function l3({onClose:r}){const{user:e}=Wt(),{isAdmin:t,useMockData:n,setUseMockData:s,useLiveData:i,setUseLiveData:a}=mD(),l=Rc(),[u,d]=m.useState(!1),[h,p]=m.useState(null),[g,b]=m.useState({name:"",url:"",genre:"",country:"",language:"",bitrate:128}),{data:C=[],isLoading:x}=Pi({queryKey:["radioStations"],queryFn:async()=>{const _=await fetch(`/api/admin/radio-stations?useMockData=${n}`);if(!_.ok)throw new Error("Failed to fetch stations");return _.json()}}),{data:v=[],isLoading:E}=Pi({queryKey:["activeListeners",n],queryFn:async()=>{const _=await fetch(`/api/admin/active-listeners?useMockData=${n}`);if(!_.ok)throw new Error("Failed to fetch active listeners");return _.json()}}),{data:T=[],isLoading:N}=Pi({queryKey:["userStats",n],queryFn:async()=>{const _=await fetch(`/api/admin/user-statistics?useMockData=${n}`);if(!_.ok)throw new Error("Failed to fetch user statistics");return _.json()}}),R=Gs({mutationFn:async _=>{const M=await fetch("/api/admin/radio-stations",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(_)});if(!M.ok)throw new Error("Failed to add radio station");return M.json()},onSuccess:()=>{l.invalidateQueries({queryKey:["radioStations"]}),d(!1),b({name:"",url:"",genre:"",country:"",language:"",bitrate:128})}}),L=Gs({mutationFn:async({id:_,data:M})=>{const I=await fetch(`/api/admin/radio-stations/${_}`,{method:"PUT",headers:{"Content-Type":"application/json"},body:JSON.stringify(M)});if(!I.ok)throw new Error("Failed to update radio station");return I.json()},onSuccess:()=>{l.invalidateQueries({queryKey:["radioStations"]}),p(null),b({name:"",url:"",genre:"",country:"",language:"",bitrate:128})}}),U=Gs({mutationFn:async _=>{const M=await fetch(`/api/admin/radio-stations/${_}`,{method:"DELETE"});if(!M.ok)throw new Error("Failed to delete radio station");return M.json()},onSuccess:()=>{l.invalidateQueries({queryKey:["radioStations"]})}}),A=Gs({mutationFn:async({id:_,isActive:M})=>{const I=await fetch(`/api/admin/radio-stations/${_}/toggle-status`,{method:"PUT",headers:{"Content-Type":"application/json"},body:JSON.stringify({isActive:M})});if(!I.ok)throw new Error("Failed to toggle station status");return I.json()},onSuccess:()=>{l.invalidateQueries({queryKey:["radioStations"]})}}),w=_=>{_.preventDefault(),h?L.mutate({id:h.id,data:g}):R.mutate(g)},k=_=>{p(_),b({name:_.name,url:_.url,genre:_.genre,country:_.country,language:_.language,bitrate:_.bitrate})},j=()=>{p(null),d(!1),b({name:"",url:"",genre:"",country:"",language:"",bitrate:128})};return t?o.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50",children:o.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-lg p-6 max-w-6xl w-full max-h-[90vh] overflow-y-auto",children:[o.jsxs("div",{className:"flex justify-between items-center mb-6",children:[o.jsx("h2",{className:"text-2xl font-bold text-gray-900 dark:text-white",children:"Admin Panel"}),o.jsx("button",{onClick:r,className:"text-gray-500 hover:text-gray-700 dark:text-gray-400 dark:hover:text-gray-200 focus:outline-none focus:ring-0",children:o.jsx($n,{className:"h-6 w-6"})})]}),o.jsxs("div",{className:"mb-6 p-4 bg-gray-50 dark:bg-gray-700 rounded-lg",children:[o.jsx("h3",{className:"text-lg font-semibold mb-3 text-gray-900 dark:text-white",children:"Data Mode Controls"}),o.jsxs("div",{className:"flex flex-wrap gap-4",children:[o.jsxs("div",{className:"flex items-center space-x-2",children:[o.jsx(qs,{checked:n,onCheckedChange:s,className:"data-[state=checked]:bg-blue-600"}),o.jsx(Ae,{htmlFor:"test-mode",className:"text-sm font-medium",children:"Test Mode (Mock Data)"})]}),o.jsxs("div",{className:"flex items-center space-x-2",children:[o.jsx(qs,{checked:i,onCheckedChange:a,className:"data-[state=checked]:bg-green-600"}),o.jsx(Ae,{htmlFor:"live-data",className:"text-sm font-medium",children:"Live Data (Firebase)"})]})]}),o.jsx("p",{className:"text-xs text-gray-600 dark:text-gray-400 mt-2",children:i?"Using real Firebase data":"Using mock/test data"})]}),o.jsxs(rm,{defaultValue:"radio-stations",className:"w-full",children:[o.jsxs(Yc,{className:"grid w-full grid-cols-4 bg-gray-700",children:[o.jsxs(Ut,{value:"radio-stations",className:"flex items-center gap-2",children:[o.jsx(Hi,{className:"h-4 w-4"}),"Radio Stations"]}),o.jsxs(Ut,{value:"performance",className:"flex items-center gap-2",children:[o.jsx(Gd,{className:"h-4 w-4"}),"Performance"]}),o.jsxs(Ut,{value:"analytics",className:"flex items-center gap-2",children:[o.jsx(MM,{className:"h-4 w-4"}),"Analytics"]}),o.jsxs(Ut,{value:"settings",className:"flex items-center gap-2",children:[o.jsx(ZM,{className:"h-4 w-4"}),"Settings"]})]}),o.jsxs($t,{value:"radio-stations",className:"space-y-6",children:[(u||h)&&o.jsxs("div",{className:"bg-gray-800/50 border border-gray-700 rounded-lg p-6",children:[o.jsx("h2",{className:"text-2xl font-semibold mb-4",children:h?"Edit Radio Station":"Add New Radio Station"}),o.jsxs("form",{onSubmit:w,className:"space-y-4",children:[o.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[o.jsxs("div",{children:[o.jsx("label",{className:"block text-sm font-medium mb-2",children:"Name"}),o.jsx("input",{type:"text",value:g.name,onChange:_=>b({...g,name:_.target.value}),className:"w-full bg-gray-700 border border-gray-600 rounded-lg px-4 py-2 text-white focus:ring-2 focus:ring-purple-500 focus:border-transparent",required:!0})]}),o.jsxs("div",{children:[o.jsx("label",{className:"block text-sm font-medium mb-2",children:"URL"}),o.jsx("input",{type:"url",value:g.url,onChange:_=>b({...g,url:_.target.value}),className:"w-full bg-gray-700 border border-gray-600 rounded-lg px-4 py-2 text-white focus:ring-2 focus:ring-purple-500 focus:border-transparent",required:!0})]}),o.jsxs("div",{children:[o.jsx("label",{className:"block text-sm font-medium mb-2",children:"Genre"}),o.jsx("input",{type:"text",value:g.genre,onChange:_=>b({...g,genre:_.target.value}),className:"w-full bg-gray-700 border border-gray-600 rounded-lg px-4 py-2 text-white focus:ring-2 focus:ring-purple-500 focus:border-transparent",required:!0})]}),o.jsxs("div",{children:[o.jsx("label",{className:"block text-sm font-medium mb-2",children:"Country"}),o.jsx("input",{type:"text",value:g.country,onChange:_=>b({...g,country:_.target.value}),className:"w-full bg-gray-700 border border-gray-600 rounded-lg px-4 py-2 text-white focus:ring-2 focus:ring-purple-500 focus:border-transparent",required:!0})]}),o.jsxs("div",{children:[o.jsx("label",{className:"block text-sm font-medium mb-2",children:"Language"}),o.jsx("input",{type:"text",value:g.language,onChange:_=>b({...g,language:_.target.value}),className:"w-full bg-gray-700 border border-gray-600 rounded-lg px-4 py-2 text-white focus:ring-2 focus:ring-purple-500 focus:border-transparent",required:!0})]}),o.jsxs("div",{children:[o.jsx("label",{className:"block text-sm font-medium mb-2",children:"Bitrate"}),o.jsx("input",{type:"number",value:g.bitrate,onChange:_=>b({...g,bitrate:parseInt(_.target.value)}),className:"w-full bg-gray-700 border border-gray-600 rounded-lg px-4 py-2 text-white focus:ring-2 focus:ring-purple-500 focus:border-transparent",min:"32",max:"320",required:!0})]})]}),o.jsxs("div",{className:"flex gap-3 pt-4",children:[o.jsx("button",{type:"submit",className:"bg-purple-600 hover:bg-purple-700 text-white px-6 py-2 rounded-lg transition-colors focus:outline-none focus:ring-0",children:R.isPending||L.isPending?"Saving...":"Save"}),o.jsx("button",{type:"button",onClick:j,className:"bg-gray-600 hover:bg-gray-700 text-white px-6 py-2 rounded-lg transition-colors focus:outline-none focus:ring-0",children:"Cancel"})]})]})]}),!u&&!h&&o.jsxs("div",{className:"flex justify-between items-center",children:[o.jsx("h2",{className:"text-2xl font-semibold",children:"Radio Stations"}),o.jsxs("button",{onClick:()=>d(!0),className:"bg-purple-600 hover:bg-purple-700 text-white px-4 py-2 rounded-lg transition-colors focus:outline-none focus:ring-0 flex items-center gap-2",children:[o.jsx(YM,{className:"h-4 w-4"}),"Add Station"]})]}),o.jsx("div",{className:"bg-gray-800/50 border border-gray-700 rounded-lg p-6",children:x?o.jsxs("div",{className:"text-center py-8",children:[o.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-purple-500 mx-auto"}),o.jsx("p",{className:"mt-4 text-gray-300",children:"Loading stations..."})]}):C.length===0?o.jsxs("div",{className:"text-center py-8 text-gray-300",children:[o.jsx(Hi,{className:"w-16 h-16 mx-auto mb-4 text-gray-600"}),o.jsx("p",{children:"No radio stations found."})]}):o.jsx("div",{className:"overflow-x-auto",children:o.jsxs("table",{className:"w-full",children:[o.jsx("thead",{children:o.jsxs("tr",{className:"border-b border-gray-700",children:[o.jsx("th",{className:"text-left py-3 px-4",children:"Name"}),o.jsx("th",{className:"text-left py-3 px-4",children:"Genre"}),o.jsx("th",{className:"text-left py-3 px-4",children:"Country"}),o.jsx("th",{className:"text-left py-3 px-4",children:"Language"}),o.jsx("th",{className:"text-left py-3 px-4",children:"Bitrate"}),o.jsx("th",{className:"text-left py-3 px-4",children:"Status"}),o.jsx("th",{className:"text-left py-3 px-4",children:"Actions"})]})}),o.jsx("tbody",{children:C.map(_=>o.jsxs("tr",{className:"border-b border-gray-700/50 hover:bg-gray-700/30",children:[o.jsx("td",{className:"py-3 px-4",children:o.jsxs("div",{children:[o.jsx("div",{className:"font-medium",children:_.name}),o.jsx("div",{className:"text-sm text-gray-400 truncate max-w-xs",children:_.url})]})}),o.jsx("td",{className:"py-3 px-4",children:_.genre}),o.jsx("td",{className:"py-3 px-4",children:_.country}),o.jsx("td",{className:"py-3 px-4",children:_.language}),o.jsxs("td",{className:"py-3 px-4",children:[_.bitrate," kbps"]}),o.jsx("td",{className:"py-3 px-4",children:o.jsx("button",{onClick:()=>A.mutate({id:_.id,isActive:!_.isActive}),disabled:A.isPending,className:`px-3 py-1 rounded-full text-xs font-medium transition-colors focus:outline-none focus:ring-0 ${_.isActive?"bg-green-600/20 text-green-400 border border-green-500/50":"bg-red-600/20 text-red-400 border border-red-500/50"}`,children:_.isActive?"Active":"Inactive"})}),o.jsx("td",{className:"py-3 px-4",children:o.jsxs("div",{className:"flex gap-2",children:[o.jsx("button",{onClick:()=>k(_),className:"bg-blue-600 hover:bg-blue-700 text-white p-2 rounded-lg transition-colors focus:outline-none focus:ring-0",title:"Edit",children:o.jsx(t5,{className:"w-4 h-4"})}),o.jsx("button",{onClick:()=>U.mutate(_.id),disabled:U.isPending,className:"bg-red-600 hover:bg-red-700 text-white p-2 rounded-lg transition-colors focus:outline-none focus:ring-0",title:"Delete",children:o.jsx(n5,{className:"w-4 h-4"})})]})})]},_.id))})]})})})]}),o.jsx($t,{value:"performance",className:"mt-6",children:o.jsx(a3,{})}),o.jsx($t,{value:"analytics",className:"mt-6",children:o.jsxs("div",{className:"bg-gray-800/50 border border-gray-700 rounded-lg p-6",children:[o.jsx("h2",{className:"text-2xl font-semibold mb-6",children:"Analytics Dashboard"}),o.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:[o.jsxs("div",{className:"bg-gray-700/50 p-4 rounded-lg",children:[o.jsx("h3",{className:"text-lg font-medium mb-2",children:"Active Listeners"}),E?o.jsx("div",{className:"animate-pin rounded-full h-8 w-8 border-b-2 border-purple-500"}):o.jsx("p",{className:"text-3xl font-bold text-purple-400",children:v.length})]}),o.jsxs("div",{className:"bg-gray-700/50 p-4 rounded-lg",children:[o.jsx("h3",{className:"text-lg font-medium mb-2",children:"Total Users"}),N?o.jsx("div",{className:"animate-pin rounded-full h-8 w-8 border-b-2 border-purple-500"}):o.jsx("p",{className:"text-3xl font-bold text-blue-400",children:T.length})]}),o.jsxs("div",{className:"bg-gray-700/50 p-4 rounded-lg",children:[o.jsx("h3",{className:"text-lg font-medium mb-2",children:"Radio Stations"}),x?o.jsx("div",{className:"animate-pin rounded-full h-8 w-8 border-b-2 border-purple-500"}):o.jsx("p",{className:"text-3xl font-bold text-green-400",children:C.length})]})]})]})}),o.jsx($t,{value:"settings",className:"mt-6",children:o.jsxs("div",{className:"bg-gray-800/50 border border-gray-700 rounded-lg p-6",children:[o.jsx("h2",{className:"text-2xl font-semibold mb-6",children:"Admin Settings"}),o.jsxs("div",{className:"space-y-4",children:[o.jsxs("div",{className:"flex items-center justify-between p-4 bg-gray-700/50 rounded-lg",children:[o.jsxs("div",{children:[o.jsx("h3",{className:"font-medium",children:"Performance Monitoring"}),o.jsx("p",{className:"text-sm text-gray-400",children:"Track site performance and user experience"})]}),o.jsx(qs,{checked:!0,disabled:!0,className:"data-[state=checked]:bg-green-600"})]}),o.jsxs("div",{className:"flex items-center justify-between p-4 bg-gray-700/50 rounded-lg",children:[o.jsxs("div",{children:[o.jsx("h3",{className:"font-medium",children:"Firebase Integration"}),o.jsx("p",{className:"text-sm text-gray-400",children:"Real-time data synchronization"})]}),o.jsx(qs,{checked:i,onCheckedChange:a,className:"data-[state=checked]:bg-green-600"})]}),o.jsxs("div",{className:"flex items-center justify-between p-4 bg-gray-700/50 rounded-lg",children:[o.jsxs("div",{children:[o.jsx("h3",{className:"font-medium",children:"Test Mode"}),o.jsx("p",{className:"text-sm text-gray-400",children:"Use mock data for testing"})]}),o.jsx(qs,{checked:n,onCheckedChange:s,className:"data-[state=checked]:bg-blue-600"})]})]})]})})]})]})}):o.jsx("div",{className:"min-h-screen bg-gradient-to-br from-gray-900 via-purple-900 to-gray-900 text-white p-8",children:o.jsx("div",{className:"max-w-6xl mx-auto",children:o.jsxs("div",{className:"text-center",children:[o.jsx("h1",{className:"text-4xl font-bold mb-4",children:"Access Denied"}),o.jsx("p",{className:"text-xl",children:"You don't have permission to access the admin panel."})]})})})}function c3(){const{colors:r,gradient:e,currentTheme:t}=ue(),[n,s]=m.useState(!1),i=a=>{const l=document.getElementById(a);l&&l.scrollIntoView({behavior:"smooth"})};return o.jsxs("footer",{className:"py-12 transition-colors duration-300",style:{backgroundColor:r.background},children:[o.jsxs("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8",children:[o.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-8 mb-8",children:[o.jsxs("div",{children:[o.jsxs("div",{className:"flex items-center space-x-4 mb-4",children:[o.jsx("div",{className:"flex items-center justify-center w-8 h-8 rounded-full",style:{background:e,padding:"5px"},children:o.jsx("img",{src:F1,alt:"Music Logo",className:"w-full h-full object-contain"})}),o.jsxs("div",{className:"flex flex-col",children:[o.jsx("div",{className:"text-sm font-black leading-tight",style:{color:t==="light-mode"?"#000000":r.text},children:"SPANDEX SALVATION"}),o.jsx("div",{className:"text-sm font-black leading-tight",style:{color:r.primary},children:"RADIO"})]})]}),o.jsx("p",{className:"text-sm",style:{color:r.textMuted},children:"Your home for old-school metal music. Broadcasting the rebellion since 2025."}),o.jsx("button",{onClick:()=>window.open("mailto:support@spandexsalvationradio.com","_blank"),className:"text-sm transition-colors duration-300 block mt-2 text-left p-0 m-0 bg-transparent border-0 cursor-pointer focus:outline-none focus:ring-0",style:{color:r.textMuted},onMouseEnter:a=>a.currentTarget.style.color=r.primary,onMouseLeave:a=>a.currentTarget.style.color=r.textMuted,children:"Email Support"})]}),o.jsxs("div",{children:[o.jsx("h4",{className:"font-semibold mb-4",style:{color:t==="light-mode"?"#000000":r.text},children:"Quick Links"}),o.jsxs("ul",{className:"space-y-3 text-sm",children:[o.jsx("li",{children:o.jsx("button",{onClick:()=>i("hero"),className:"transition-colors text-left block p-0 m-0 bg-transparent focus:outline-none focus:ring-0",style:{color:r.textMuted},onMouseEnter:a=>a.currentTarget.style.color=r.primary,onMouseLeave:a=>a.currentTarget.style.color=r.textMuted,children:"Home"})}),o.jsx("li",{children:o.jsx("button",{onClick:()=>i("schedule"),className:"transition-colors text-left block p-0 m-0 bg-transparent border-0 focus:outline-none focus:ring-0",style:{color:r.textMuted},onMouseEnter:a=>a.currentTarget.style.color=r.primary,onMouseLeave:a=>a.currentTarget.style.color=r.textMuted,children:"Schedule"})}),o.jsx("li",{children:o.jsx("button",{onClick:()=>i("submissions"),className:"transition-colors text-left block p-0 m-0 bg-transparent border-0",style:{color:r.textMuted},onMouseEnter:a=>a.currentTarget.style.color=r.primary,onMouseLeave:a=>a.currentTarget.style.color=r.textMuted,children:"Submissions"})}),o.jsx("li",{children:o.jsx("button",{onClick:()=>i("contact"),className:"transition-colors text-left block p-0 m-0 bg-transparent border-0",style:{color:r.textMuted},onMouseEnter:a=>a.currentTarget.style.color=r.primary,onMouseLeave:a=>a.currentTarget.style.color=r.textMuted,children:"Contact"})}),o.jsx("li",{children:o.jsx("button",{onClick:()=>i("subscribe"),className:"transition-colors text-left block p-0 m-0 bg-transparent border-0",style:{color:r.textMuted},onMouseEnter:a=>a.currentTarget.style.color=r.primary,onMouseLeave:a=>a.currentTarget.style.color=r.textMuted,children:"Subscribe"})})]})]}),o.jsxs("div",{children:[o.jsx("h4",{className:"font-semibold mb-4",style:{color:t==="light-mode"?"#000000":r.text},children:"Support"}),o.jsxs("ul",{className:"space-y-3 text-sm",children:[o.jsx("li",{children:o.jsx("button",{onClick:()=>window.location.href="/help",className:"transition-colors text-left block p-0 m-0 bg-transparent border-0",style:{color:r.textMuted},onMouseEnter:a=>a.currentTarget.style.color=r.primary,onMouseLeave:a=>a.currentTarget.style.color=r.textMuted,children:"Help Center"})}),o.jsx("li",{children:o.jsx("button",{onClick:()=>i("contact"),className:"transition-colors text-left block p-0 m-0 bg-transparent border-0",style:{color:r.textMuted},onMouseEnter:a=>a.currentTarget.style.color=r.primary,onMouseLeave:a=>a.currentTarget.style.color=r.textMuted,children:"Technical Support"})}),o.jsx("li",{children:o.jsx("button",{onClick:()=>i("submissions"),className:"transition-colors text-left block p-0 m-0 bg-transparent border-0",style:{color:r.textMuted},onMouseEnter:a=>a.currentTarget.style.color=r.primary,onMouseLeave:a=>a.currentTarget.style.color=r.textMuted,children:"Submit Songs"})}),o.jsx("li",{children:o.jsx("button",{onClick:()=>window.location.href="/guidelines",className:"transition-colors text-left block p-0 m-0 bg-transparent border-0",style:{color:r.textMuted},onMouseEnter:a=>a.currentTarget.style.color=r.primary,onMouseLeave:a=>a.currentTarget.style.color=r.textMuted,children:"Community Guidelines"})}),o.jsx("li",{children:o.jsx("button",{onClick:()=>window.location.href="/privacy",className:"transition-colors text-left block p-0 m-0 bg-transparent border-0",style:{color:r.textMuted},onMouseEnter:a=>a.currentTarget.style.color=r.primary,onMouseLeave:a=>a.currentTarget.style.color=r.textMuted,children:"Privacy Policy"})})]})]}),o.jsxs("div",{children:[o.jsx("h4",{className:"font-semibold mb-4",style:{color:t==="light-mode"?"#000000":r.text},children:"Stream Info"}),o.jsxs("ul",{className:"space-y-3 text-sm",children:[o.jsx("li",{children:o.jsxs("div",{className:"flex items-center",style:{color:r.textMuted},children:[o.jsx("span",{className:"mr-3 flex-shrink-0",style:{color:r.primary},children:o.jsx(Hi,{className:"h-4 w-4"})}),o.jsx("span",{children:"24/7 Live Stream"})]})}),o.jsx("li",{children:o.jsxs("div",{className:"flex items-center",style:{color:r.textMuted},children:[o.jsx("span",{className:"mr-3 flex-shrink-0 text-center w-4",style:{color:r.primary},children:"♪"}),o.jsx("span",{children:"320kbps Quality"})]})}),o.jsx("li",{children:o.jsxs("div",{className:"flex items-center",style:{color:r.textMuted},children:[o.jsx("span",{className:"mr-3 flex-shrink-0 text-center w-4",style:{color:r.primary},children:"🌍"}),o.jsx("span",{children:"Global Coverage"})]})}),o.jsx("li",{children:o.jsxs("div",{className:"flex items-center",style:{color:r.textMuted},children:[o.jsx("span",{className:"mr-3 flex-shrink-0 text-center w-4",style:{color:r.primary},children:"🛡️"}),o.jsx("span",{children:"Secure & Reliable"})]})})]})]})]}),o.jsx("div",{className:"pt-8",children:o.jsxs("div",{className:"flex flex-wrap items-center justify-center md:justify-between gap-6 text-sm",children:[o.jsx("div",{className:"font-semibold",style:{color:t==="light-mode"?"rgba(0, 0, 0, 0.7)":r.textMuted},children:"© 2025 Spandex Salvation Radio. All rights reserved."}),o.jsx("a",{href:"/terms",className:"font-semibold transition-colors duration-300",style:{color:t==="light-mode"?"rgba(0, 0, 0, 0.7)":r.textMuted},onMouseEnter:a=>a.currentTarget.style.color=r.primary,onMouseLeave:a=>a.currentTarget.style.color=t==="light-mode"?"rgba(0, 0, 0, 0.7)":r.textMuted,children:"Terms of Service"}),o.jsx("a",{href:"/privacy",className:"font-semibold transition-colors duration-300",style:{color:t==="light-mode"?"rgba(0, 0, 0, 0.7)":r.textMuted},onMouseEnter:a=>a.currentTarget.style.color=r.primary,onMouseLeave:a=>a.currentTarget.style.color=t==="light-mode"?"rgba(0, 0, 0, 0.7)":r.textMuted,children:"Privacy Policy"}),o.jsx("a",{href:"/cookies",className:"font-semibold transition-colors duration-300",style:{color:t==="light-mode"?"rgba(0, 0, 0, 0.7)":r.textMuted},onMouseEnter:a=>a.currentTarget.style.color=r.primary,onMouseLeave:a=>a.currentTarget.style.color=t==="light-mode"?"rgba(0, 0, 0, 0.7)":r.textMuted,children:"Cookies"}),o.jsx("button",{onClick:()=>s(!0),className:"font-semibold transition-colors duration-300 bg-transparent border-0 p-0 focus:outline-none focus:ring-0",style:{color:t==="light-mode"?"rgba(0, 0, 0, 0.7)":r.textMuted},onMouseEnter:a=>a.currentTarget.style.color=r.primary,onMouseLeave:a=>a.currentTarget.style.color=t==="light-mode"?"rgba(0, 0, 0, 0.7)":r.textMuted,children:"Admin"})]})})]}),n&&o.jsx(l3,{onClose:()=>s(!1)})]})}function xT(){const{isPlaying:r,volume:e,currentTrack:t,stationName:n,togglePlayback:s,setVolume:i,isLoading:a,isMuted:l,toggleMute:u,isAdPlaying:d,adInfo:h,error:p}=Fc(),{user:g,updateListeningStatus:b}=Wt(),{getGradient:C,getColors:x,currentTheme:v}=ue(),E=x(),[T,N]=m.useState(!1),[R,L]=m.useState(0),U=w=>{const k=parseInt(w.target.value)/100;i(k),l&&k>0&&u()};m.useEffect(()=>{const w=()=>{const k=window.scrollY,j=document.documentElement.scrollHeight,_=window.innerHeight,I=k+_>=j-200;N(!I)};return window.addEventListener("scroll",w),()=>window.removeEventListener("scroll",w)},[]);const A=async()=>{try{await s(),g&&await b(!r)}catch(w){console.error("Error toggling playback:",w)}};return o.jsx("div",{className:`fixed bottom-2 left-4 backdrop-blur-md z-50 transition-all duration-1000 ease-in-out rounded-2xl shadow-2xl border-0 floating-player-no-focus ${T?"transform translate-y-0 opacity-100":"transform translate-y-full opacity-0"}`,style:{width:"320px",maxWidth:"calc(100vw - 32px)",background:"rgba(0, 0, 0, 0.12)",backdropFilter:"blur(32px) saturate(220%)",WebkitBackdropFilter:"blur(32px) saturate(220%)",boxShadow:`0 14px 48px ${E.primary}25, 0 0 24px ${E.primary}12`,color:E.text,border:"none",outline:"none"},role:"region","aria-label":"Floating audio player","aria-live":"polite",children:o.jsx("div",{className:"w-full px-3 py-2 relative",children:o.jsxs("div",{className:"flex items-center justify-between mb-2",children:[o.jsx($1,{artwork:d&&h.artwork?h.artwork:t.artwork,title:t.title,artist:t.artist,size:"sm",className:"w-12 h-12 shadow-none",isAd:d}),o.jsxs("div",{className:"min-w-0 ml-3 focus-safe-area",style:{width:"60%"},children:[p&&o.jsxs("div",{className:"mb-1 flex justify-start items-center space-x-2",children:[o.jsxs("div",{className:"inline-flex items-center px-1.5 py-0.5 rounded-full text-xs font-bold text-white animate-pulse",style:{background:"linear-gradient(45deg, #ef4444, #dc2626)",boxShadow:"0 1px 4px #ef444460"},children:[o.jsx("span",{className:"mr-1 text-xs",children:"⚠️"}),"ERROR",o.jsxs("span",{className:"ml-1 opacity-80 text-xs",children:["• ",p.length>20?p.substring(0,20)+"...":p]})]}),o.jsx("button",{onClick:A,className:"px-2 py-0.5 text-xs font-medium rounded bg-red-600 hover:bg-red-700 text-white transition-colors focus:outline-none focus:ring-0",title:"Retry playback",children:"RETRY"})]}),d&&o.jsx("div",{className:"mb-1 flex justify-start",children:o.jsxs("div",{className:"inline-flex items-center px-1.5 py-0.5 rounded-full text-xs font-bold text-white animate-pulse",style:{background:"linear-gradient(45deg, #ff4444, #cc0000)",boxShadow:"0 1px 4px #ff444460"},children:[o.jsx("span",{className:"mr-1 text-xs",children:"📢"}),"AD",h.company&&o.jsxs("span",{className:"ml-1 opacity-80 text-xs",children:["• ",h.company]})]})}),o.jsx("div",{className:"w-full overflow-hidden",children:o.jsx(U1,{text:t.title!==n?t.title:n,className:"font-semibold text-xs whitespace-nowrap",style:{color:d?"#f87171":E.text},maxWidth:"85%",isFloating:!0,backgroundColor:"transparent",alignment:"left"})}),t.artist&&t.artist!==t.title&&t.artist!==n&&o.jsx("div",{className:"text-xs truncate mt-0.5",style:{color:E.textMuted},children:t.artist}),o.jsxs("div",{className:"flex items-center justify-between mt-1",children:[o.jsxs("div",{className:"flex items-center space-x-1",children:[o.jsx("div",{className:`w-2 h-2 rounded-full animate-pulse relative flex-shrink-0 ${d?"bg-red-600":"bg-red-500"}`,style:{top:"0px"}}),o.jsx("span",{className:`text-xs font-medium flex-shrink-0 ${d?"text-red-600":"text-red-500"}`,children:d?"AD":"LIVE"})]}),o.jsx("div",{className:"hidden sm:flex items-center justify-center flex-1 mx-2 focus-safe-area",children:o.jsxs("div",{className:"flex items-center space-x-2 focus-safe-area",children:[o.jsx(i5,{className:"h-3 w-3 cursor-pointer transition-colors flex-shrink-0 focus:outline-none focus:ring-0",style:{color:l?"#ef4444":v==="light-mode"?"#4b5563":"#9ca3af"},onMouseEnter:w=>{l||(w.currentTarget.style.color=v==="light-mode"?"#374151":"#d1d5db")},onMouseLeave:w=>{w.currentTarget.style.color=l?"#ef4444":v==="light-mode"?"#4b5563":"#9ca3af"},onClick:u,tabIndex:0,onKeyDown:w=>{(w.key==="Enter"||w.key===" ")&&(w.preventDefault(),u())}}),o.jsxs("div",{className:"w-16 h-1 rounded-full relative flex-shrink-0",style:{backgroundColor:v==="light-mode"?"#d1d5db":"#374151"},children:[o.jsx("div",{className:"h-1 rounded-full transition-all duration-150",style:{width:`${(l?0:e)*100}%`,background:`linear-gradient(45deg, ${E.primary}, ${E.secondary})`}}),o.jsx("input",{type:"range",min:"0",max:"100",value:(l?0:e)*100,onChange:U,className:"absolute inset-0 w-full h-full opacity-0 cursor-pointer focus:outline-none focus:ring-0","aria-label":"Volume control",title:"Adjust volume",style:{outline:"none",border:"none"}})]}),o.jsxs("span",{className:"text-xs font-medium min-w-[20px] text-center flex-shrink-0",style:{color:v==="light-mode"?"#6b7280":"#9ca3af"},children:[Math.round((l?0:e)*100),"%"]})]})})]})]}),o.jsxs("div",{className:"relative",children:[a&&o.jsx("div",{className:"absolute inset-0 flex items-center justify-center",children:o.jsx("div",{className:"w-7 h-7 border-2 border-t-transparent rounded-full animate-spin",style:{borderColor:E.primary,borderTopColor:"transparent"}})}),o.jsx(J,{onClick:A,className:"text-white w-10 h-10 rounded-full flex items-center justify-center transition-all duration-300 hover:scale-110 shadow-lg hover:shadow-xl border-0 focus:outline-none focus:ring-0",style:{background:`linear-gradient(45deg, ${E.primary}, ${E.secondary})`,boxShadow:`0 4px 20px ${E.primary}60`,opacity:a?.5:1,border:"none",outline:"none","--tw-ring-color":E.primary,transform:"scale(1)",transition:"all 0.3s ease"},"aria-label":a?"Connecting...":r?"Pause radio stream":"Play radio stream",disabled:a,onMouseEnter:w=>{a||(w.currentTarget.style.transform="scale(1.1)",w.currentTarget.style.boxShadow=`0 6px 24px ${E.primary}80`)},onMouseLeave:w=>{a||(w.currentTarget.style.transform="scale(1)",w.currentTarget.style.boxShadow=`0 4px 20px ${E.primary}60`)},onMouseDown:w=>{a||(w.currentTarget.style.transform="scale(0.95)")},onMouseUp:w=>{a||(w.currentTarget.style.transform="scale(1.1)")},children:!a&&o.jsx(o.Fragment,{children:r?o.jsxs("svg",{className:"h-6 w-6",fill:"currentColor",viewBox:"0 0 24 24",children:[o.jsx("rect",{x:"6",y:"4",width:"4",height:"16",rx:"1",fill:"currentColor"}),o.jsx("rect",{x:"14",y:"4",width:"4",height:"16",rx:"1",fill:"currentColor"})]}):o.jsx("svg",{className:"h-6 w-6",fill:"currentColor",viewBox:"0 0 24 24",children:o.jsx("polygon",{points:"8 5 20 12 8 19 8 5"})})})})]})]})})})}function u3({onChatClick:r,onlineCount:e=0}){const{user:t,isAuthenticated:n}=Wt(),{getColors:s}=ue(),i=s(),a=(t==null?void 0:t.activeSubscription)||!1;return!n||!a?null:o.jsxs(J,{onClick:r,size:"sm",variant:"ghost",className:"relative flex items-center gap-2 px-3 py-2 rounded-md transition-all duration-200 hover:scale-105 focus:outline-none focus:ring-0",style:{color:i.text,backgroundColor:"transparent"},onMouseEnter:l=>{l.currentTarget.style.backgroundColor=i.primary+"20",l.currentTarget.style.color="white"},onMouseLeave:l=>{l.currentTarget.style.backgroundColor="transparent",l.currentTarget.style.color=i.text},"aria-label":"Open live chat",children:[o.jsx(Ys,{size:16,style:{color:i.primary}}),o.jsx("span",{className:"font-semibold text-sm",children:"CHAT"}),e>0&&o.jsx(Ke,{className:"absolute -top-1 -right-1 bg-red-500 text-white text-xs px-1.5 py-0.5",style:{fontSize:"10px"},children:e})]})}const Ya=new Set;let d3=0;function St({children:r,className:e="",threshold:t=.1,direction:n="up",delay:s=0,duration:i}){const{ref:a,isVisible:l}=Yf({threshold:t}),{velocity:u}=Xf(),d=m.useRef(`fade-${++d3}`).current,h=m.useMemo(()=>i||oh(300,u),[i,u]),p=m.useMemo(()=>({up:"translateY(30px)",down:"translateY(-30px)",left:"translateX(30px)",right:"translateX(-30px)"})[n],[n]),g=m.useMemo(()=>!l||Ya.has(d)?{opacity:1,transform:"translateY(0)",transition:"none"}:{opacity:0,transform:p,transition:`opacity ${h}ms ease-out ${s}ms, transform ${h}ms ease-out ${s}ms`},[l,d,p,h,s]),b=m.useCallback(()=>{l&&!Ya.has(d)&&Ya.add(d)},[l,d]);return m.useEffect(()=>{if(l&&!Ya.has(d)){const C=a.current;C&&requestAnimationFrame(()=>{C.style.opacity="1",C.style.transform="translateY(0)"})}},[l,d,a]),o.jsx("div",{ref:a,className:e,style:g,onTransitionEnd:b,children:r})}const h3="/RebelPackageIcon.png",f3="/LegendPackageIcon.png",m3="/IconPackageIcon.png",rr=[{id:"rebel",name:"REBEL",price:5.99,priceId:"price_rebel_monthly",icon:h3,iconElement:o.jsx(h_,{className:"w-16 h-16"}),gradientStart:"#B56BFF",gradientEnd:"#FF50C3",description:"Start your metal journey",features:["Ad-free streaming experience","High-quality audio (320kbps)","Monthly exclusive playlist","Priority song requests"],perks:["🎸 Guitar picks monthly","⚡ Early access to new shows"]},{id:"legend",name:"LEGEND",price:12.99,priceId:"price_legend_monthly",popular:!0,icon:f3,iconElement:o.jsx(Ho,{className:"w-16 h-16"}),gradientStart:"#E520C6",gradientEnd:"#F4654F",description:"Become a true metal legend",features:["Everything in Rebel tier","Exclusive live show access","Artist interview archives","VIP Discord community","Monthly exclusive merch discount"],perks:["🎤 Monthly video calls with DJs","🎁 Quarterly mystery box","💿 Signed albums"]},{id:"icon",name:"ICON",price:24.99,priceId:"price_icon_monthly",icon:m3,iconElement:o.jsx(hr,{className:"w-16 h-16"}),gradientStart:"#00D4FF",gradientEnd:"#5200FF",description:"The ultimate metal experience",features:["Everything in Legend tier","Personal DJ requests","Exclusive artist meet & greets","Limited edition vinyl access","Co-host opportunities"],perks:["🎤 Name a weekly show segment","🏆 Annual VIP concert tickets","👕 Custom merch line"]}];function bT(){const[r,e]=m.useState(1),[t,n]=m.useState(!1),[s,i]=m.useState("right"),[a,l]=m.useState(null),{getColors:u,currentTheme:d}=ue(),h=u(),p=v=>{console.log("Subscribing to tier:",v.name),alert(`Redirecting to ${v.name} subscription...`)},g=m.useCallback(()=>{t||(console.log("Previous animation starting"),n(!0),i("right"),e(v=>(v-1+((rr==null?void 0:rr.length)||0))%((rr==null?void 0:rr.length)||1)),setTimeout(()=>{n(!1),console.log("Previous animation complete")},400))},[t]),b=m.useCallback(()=>{t||(console.log("Next animation starting"),n(!0),i("left"),e(v=>(v+1)%((rr==null?void 0:rr.length)||1)),setTimeout(()=>{n(!1),console.log("Next animation complete")},400))},[t]);m.useEffect(()=>{const v=E=>{E.key==="ArrowLeft"?(E.preventDefault(),g()):E.key==="ArrowRight"&&(E.preventDefault(),b())};return window.addEventListener("keydown",v),()=>window.removeEventListener("keydown",v)},[g,b]);const C=v=>{!t&&v!==r&&(n(!0),e(v),setTimeout(()=>n(!1),500))},x=rr[r];return o.jsxs("div",{className:"relative w-full max-w-6xl mx-auto px-4",children:[o.jsxs("div",{className:"relative perspective-1000 subscription-carousel-container overflow-visible py-2 sm:py-4 md:py-6 lg:py-8",style:{minHeight:"700px",height:"auto"},children:[o.jsx("button",{onClick:g,disabled:t,className:"absolute left-4 top-1/2 transform -translate-y-1/2 z-10 p-2 rounded-full bg-black/20 backdrop-blur-sm text-white hover:bg-black/40 transition-all duration-300 focus:outline-none focus:ring-0",style:{border:`1px solid ${h.border}`},children:o.jsx(DM,{className:"w-6 h-6"})}),o.jsx("button",{onClick:b,disabled:t,className:"absolute right-4 top-1/2 transform -translate-y-1/2 z-10 p-2 rounded-full bg-black/20 backdrop-blur-sm text-white hover:bg-black/40 transition-all duration-300 focus:outline-none focus:ring-0",style:{border:`1px solid ${h.border}`},children:o.jsx(n_,{className:"w-6 h-6"})}),o.jsx("div",{className:"flex items-center justify-center h-full relative",children:o.jsxs("div",{className:"relative w-full max-w-md",style:{transform:t?s==="left"?"translateX(30px) scale(0.98)":"translateX(-30px) scale(0.98)":"translateX(0) scale(1)",opacity:t?.8:1,transition:"all 0.4s ease-in-out"},children:[o.jsx("div",{className:"absolute inset-4 rounded-3xl overflow-hidden",children:o.jsx("div",{className:"absolute inset-0 blur-2xl opacity-40",style:{background:`linear-gradient(135deg, ${x.gradientStart}, ${x.gradientEnd})`}})}),o.jsx("div",{className:"relative overflow-hidden transition-all duration-500",style:{borderRadius:"24px",background:`linear-gradient(45deg, ${x.gradientStart}, ${x.gradientEnd}, ${x.gradientStart}, ${x.gradientEnd})`,backgroundSize:"400% 400%",animation:"slowRotatingGradient 8s linear infinite",transform:a===x.id?"scale(1.05)":"scale(1)",padding:"5px"},children:o.jsxs("div",{className:"relative backdrop-blur-xl p-6 overflow-hidden flex flex-col subscription-card",style:{borderRadius:"19px",backgroundColor:h.background,background:h.background,boxShadow:x.popular?`0 0 60px ${x.gradientStart}60, 0 0 120px ${x.gradientEnd}40, 0 0 160px ${x.gradientStart}20, inset 0 0 0 1px ${x.gradientStart}40`:`0 20px 40px ${x.gradientStart}40, inset 0 0 0 1px ${x.gradientStart}30`,minHeight:"600px",height:"auto",transition:"none"},onMouseEnter:()=>l(x.id),onMouseLeave:()=>l(null),children:[o.jsx("div",{className:"flex justify-center mb-2 sm:mb-4",children:o.jsx("div",{className:"relative p-2 sm:p-3 rounded-full",style:{background:`linear-gradient(135deg, ${x.gradientStart}20, ${x.gradientEnd}20)`},children:o.jsx("img",{src:x.icon,alt:`${x.name} icon`,className:`w-16 h-16 sm:w-20 sm:h-20 object-contain animate-float ${r===1?"float-delay-1":r===2?"float-delay-2":""}`,style:{animation:"float 4s ease-in-out infinite",animationDelay:r===1?"0.5s":r===2?"1s":"0s"}})})}),o.jsxs("div",{className:"text-center mb-2 sm:mb-4",children:[o.jsx("h3",{className:"text-2xl sm:text-3xl font-black mb-1 sm:mb-2",children:o.jsx("span",{style:{background:`linear-gradient(90deg, ${x.gradientStart}, ${x.gradientEnd})`,WebkitBackgroundClip:"text",WebkitTextFillColor:"transparent",backgroundClip:"text",color:"transparent",display:"inline",padding:0,margin:0,fontWeight:"inherit"},children:x.name},x.id)}),o.jsx("p",{className:"text-sm sm:text-base",style:{color:d==="light-mode"?"rgba(0, 0, 0, 0.6)":"#9ca3af"},children:x.description}),x.popular&&o.jsx("div",{className:"mt-4",children:o.jsx("span",{className:"px-4 py-1 rounded-full text-xs font-bold",style:{background:"linear-gradient(135deg, #ff6b35, #f7931e)",color:"black",whiteSpace:"nowrap"},children:"MOST POPULAR"})})]}),o.jsx("div",{className:"text-center mb-3 sm:mb-6",children:o.jsxs("div",{className:"flex items-center justify-center",children:[o.jsxs("span",{className:"text-3xl sm:text-4xl font-black",style:{color:d==="light-mode"?"#000000":"#ffffff"},children:["$",x.price]}),o.jsx("span",{className:"ml-2 text-sm sm:text-base",style:{color:d==="light-mode"?"rgba(0, 0, 0, 0.6)":"#9ca3af"},children:"/month"})]})}),o.jsx("div",{className:"flex-1 flex items-center justify-center py-2 sm:py-4",children:o.jsx("div",{className:"w-full max-w-xs",children:(x.features||[]).sort((v,E)=>((v==null?void 0:v.length)||0)-((E==null?void 0:E.length)||0)).map((v,E)=>o.jsx("div",{className:"flex items-center justify-center mb-2 sm:mb-3 transform transition-all duration-300",style:{transform:a===x.id?"translateX(10px)":"translateX(0)",transitionDelay:`${E*50}ms`},children:o.jsxs("div",{className:"flex items-center",children:[o.jsx("div",{className:"w-3 h-3 sm:w-4 sm:h-4 rounded-full flex items-center justify-center flex-shrink-0 mr-2 sm:mr-3",style:{background:`linear-gradient(135deg, ${x.gradientStart}, ${x.gradientEnd})`},children:o.jsx(ya,{className:"w-2 h-2 sm:w-2.5 sm:h-2.5 text-white"})}),o.jsx("span",{className:"text-xs sm:text-sm font-medium text-center",style:{color:d==="light-mode"?"rgba(0, 0, 0, 0.7)":"#d1d5db"},children:v})]})},E))})}),o.jsx("div",{className:"mb-2 sm:mb-3",children:o.jsxs("div",{className:"bg-white/5 rounded-lg p-2 sm:p-3 max-w-xs mx-auto",children:[o.jsx("h4",{className:"text-xs font-bold mb-1 sm:mb-2 text-center",style:{color:d==="light-mode"?"rgba(0, 0, 0, 0.6)":"#9ca3af"},children:"EXCLUSIVE PERKS"}),o.jsx("div",{className:"space-y-0.5 sm:space-y-1",children:(x.perks||[]).map((v,E)=>o.jsx("div",{className:"text-xs text-center leading-tight",style:{color:d==="light-mode"?"rgba(0, 0, 0, 0.7)":"#d1d5db"},children:v},E))})]})}),o.jsx("div",{className:"mt-auto mb-3 sm:mb-4",children:o.jsxs(J,{onClick:()=>p(x),className:"w-full py-3 px-6 rounded-xl font-bold text-lg transition-all duration-300 hover:scale-105 focus:outline-none focus:ring-0",style:{background:`linear-gradient(135deg, ${x.gradientStart}, ${x.gradientEnd})`,color:"white",boxShadow:`0 8px 32px ${x.gradientStart}40`},children:["Get ",x.name.charAt(0)+x.name.slice(1).toLowerCase()," Now"]})})]})})," "]})})]}),o.jsxs("div",{className:"text-center text-gray-500 text-sm mt-8",children:[o.jsx("span",{className:"md:hidden",children:"← Swipe to explore plans →"}),o.jsx("span",{className:"hidden md:inline",children:"← Click to explore plans →"})]}),o.jsx("div",{className:"flex justify-center items-center space-x-6 mt-6",children:(rr||[]).map((v,E)=>o.jsxs("button",{onClick:()=>C(E),className:ee("relative transition-all duration-500 ease-in-out p-3 rounded-full focus:outline-none focus:ring-0",E===r?"scale-110":"opacity-40 hover:opacity-60 scale-90"),children:[o.jsx("div",{className:ee("absolute inset-0 rounded-full transition-all duration-500",E===r?"opacity-100":"opacity-0"),style:{background:`radial-gradient(circle, ${v.gradientStart}20, transparent 70%)`,filter:"blur(12px)"}}),o.jsx("div",{className:ee("relative rounded-full transition-all duration-500",E===r?"bg-black/20":"bg-transparent"),style:{padding:"0.5rem"},children:o.jsx("img",{src:v.icon,alt:`${v.name} icon`,className:ee("object-contain transition-all duration-500",E===r?"w-8 h-8":"w-6 h-6"),style:{filter:E===r?"drop-shadow(0 0 8px rgba(255,255,255,0.5))":"grayscale(100%) opacity(0.7)"}})}),E===r&&o.jsx("div",{className:"absolute inset-0 rounded-full",style:{background:`linear-gradient(135deg, ${v.gradientStart}60, ${v.gradientEnd}60)`,padding:"2px",WebkitMask:"linear-gradient(#fff 0 0) content-box, linear-gradient(#fff 0 0)",WebkitMaskComposite:"xor",maskComposite:"exclude"}})]},v.id))}),o.jsx("style",{children:`
        @keyframes gradientFlow {
          0% { background-position: 0% 50%; }
          50% { background-position: 100% 50%; }
          100% { background-position: 0% 50%; }
        }
        .preserve-3d {
          transform-style: preserve-3d;
        }
      `})]})}function p3(){const[r,e]=m.useState(!1),{currentTheme:t,getColors:n}=ue(),s=n();return m.useEffect(()=>{Aw("home_page");const i=()=>{const a=window.location.hash.substring(1);a&&setTimeout(()=>{const l=document.getElementById(a);l&&l.scrollIntoView({behavior:"smooth",block:"start"})},100)};return i(),window.addEventListener("hashchange",i),()=>{window.removeEventListener("hashchange",i)}},[]),o.jsxs("div",{className:"min-h-screen transition-colors duration-300",style:{backgroundColor:s.background,color:s.text},children:[o.jsx("div",{id:"main-navigation",children:o.jsx(Qf,{})}),o.jsxs("main",{id:"main-content",children:[o.jsx(OO,{}),o.jsx(St,{direction:"up",delay:0,children:o.jsx(VO,{})}),o.jsx(St,{direction:"up",delay:0,children:o.jsx(FO,{})}),o.jsx(St,{direction:"up",delay:0,children:o.jsx(UO,{})}),o.jsx(St,{direction:"up",delay:0,children:o.jsx("section",{id:"subscribe",className:"py-20 transition-colors duration-300",style:{backgroundColor:s.background},children:o.jsxs("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8",children:[o.jsxs("div",{className:"text-center mb-16",children:[o.jsx("h2",{className:"font-orbitron font-black text-3xl md:text-4xl mb-4",style:{color:t==="light-mode"?"#000000":s.text},children:"Supporters Enjoy More"}),o.jsx("p",{className:"text-lg font-semibold",style:{color:t==="light-mode"?"rgba(0, 0, 0, 0.7)":s.textMuted},children:"Support our growth and enjoy exclusive content."})]}),o.jsx(bT,{})]})})}),o.jsx(St,{direction:"up",delay:0,children:o.jsx(HO,{})}),o.jsx(St,{direction:"up",delay:0,children:o.jsx("section",{id:"map",className:"py-8",children:o.jsx(J1,{})})}),o.jsx(St,{direction:"up",delay:0,children:o.jsx(GO,{})}),o.jsx(St,{direction:"up",delay:0,children:o.jsx(KO,{})}),o.jsx(St,{direction:"up",delay:0,children:o.jsx(YO,{})}),o.jsx(St,{direction:"up",delay:0,children:o.jsx(c3,{})}),o.jsx(xT,{}),o.jsx(u3,{onChatClick:()=>e(!0)})]})]})}function g3(){const{colors:r}=ue(),[e,t]=m.useState("95.5 The Beat"),[n,s]=m.useState(!1),i=["95.5 The Beat","Hot 97","Power 106","SomaFM Metal"],l={"95.5 The Beat":{name:"95.5 The Beat",description:"Dallas' Hip Hop and R&B - Playing the hottest tracks 24/7",frequency:"95.5 FM",listeners:"100K+"},"Hot 97":{name:"Hot 97",description:"New York's Hip Hop & R&B - Where Hip Hop Lives",frequency:"97.1 FM",listeners:"500K+"},"Power 106":{name:"Power 106",description:"Los Angeles' Hip Hop Station - LA's #1 for Hip Hop",frequency:"105.9 FM",listeners:"300K+"},"SomaFM Metal":{name:"SomaFM Metal Detector",description:"From black to doom, prog to sludge, thrash to post, stoner to crossover",frequency:"Online",listeners:"50K+"}}[e];return o.jsxs(o.Fragment,{children:[o.jsx(Qf,{}),o.jsx("div",{id:"music",className:"min-h-screen bg-background pt-20 pb-8",children:o.jsxs("div",{className:"container mx-auto px-4",children:[o.jsxs("div",{className:"text-center mb-8",children:[o.jsx("h1",{className:"text-4xl font-black text-foreground mb-4",children:"LIVE RADIO"}),o.jsx("p",{className:"text-xl text-muted-foreground mb-6",children:"Stream Your Favorite Stations 24/7"})]}),o.jsx("div",{className:"max-w-4xl mx-auto mb-6",children:o.jsx("div",{className:"flex justify-center",children:o.jsxs("div",{className:"relative",children:[o.jsxs("button",{onClick:()=>s(!n),className:"flex items-center space-x-2 px-6 py-3 rounded-lg transition-all duration-200 font-semibold text-white",style:{backgroundColor:r.primary,border:`2px solid ${r.primary}`},onMouseEnter:u=>{u.currentTarget.style.backgroundColor=r.secondary},onMouseLeave:u=>{u.currentTarget.style.backgroundColor=r.primary},children:[o.jsx("span",{children:e}),o.jsx(ql,{size:16,style:{transform:n?"rotate(180deg)":"rotate(0deg)",transition:"transform 0.2s ease"}})]}),n&&o.jsx("div",{className:"absolute top-full left-1/2 transform -translate-x-1/2 mt-2 py-2 rounded-lg shadow-xl border backdrop-blur-md z-50",style:{backgroundColor:r.background==="#000000"?"rgba(0, 0, 0, 0.95)":"rgba(255, 255, 255, 0.95)",borderColor:r.primary+"40",minWidth:"200px"},children:i.map(u=>o.jsx("button",{onClick:()=>{t(u),s(!1)},className:"w-full px-4 py-2 text-left hover:rounded transition-colors duration-200",style:{color:e===u?"white":r.text,backgroundColor:e===u?r.primary:"transparent"},onMouseEnter:d=>{e!==u&&(d.currentTarget.style.backgroundColor=r.primary+"20")},onMouseLeave:d=>{e!==u&&(d.currentTarget.style.backgroundColor="transparent")},children:u},u))})]})})}),o.jsx("div",{className:"max-w-4xl mx-auto",children:o.jsx(B1,{})}),o.jsx("div",{className:"max-w-4xl mx-auto mt-8",children:o.jsxs("div",{className:"bg-black/90 backdrop-blur-md rounded-lg p-6 border",style:{borderColor:r.primary+"20"},children:[o.jsxs("h2",{className:"text-2xl font-bold mb-4",style:{color:r.text},children:["About ",l.name]}),o.jsx("p",{className:"mb-4",style:{color:r.text,opacity:.8},children:l.description}),o.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4 mt-6",children:[o.jsxs("div",{className:"text-center",children:[o.jsx("div",{className:"font-bold text-xl",style:{color:r.primary},children:"24/7"}),o.jsx("div",{style:{color:r.text,opacity:.6},children:"Live Broadcasting"})]}),o.jsxs("div",{className:"text-center",children:[o.jsx("div",{className:"font-bold text-xl",style:{color:r.primary},children:l.frequency}),o.jsx("div",{style:{color:r.text,opacity:.6},children:"Frequency"})]}),o.jsxs("div",{className:"text-center",children:[o.jsx("div",{className:"font-bold text-xl",style:{color:r.primary},children:l.listeners}),o.jsx("div",{style:{color:r.text,opacity:.6},children:"Active Listeners"})]})]})]})})]})}),o.jsx(xT,{})]})}function mr(r){const e=Object.prototype.toString.call(r);return r instanceof Date||typeof r=="object"&&e==="[object Date]"?new r.constructor(+r):typeof r=="number"||e==="[object Number]"||typeof r=="string"||e==="[object String]"?new Date(r):new Date(NaN)}function Ss(r,e){return r instanceof Date?new r.constructor(e):new Date(e)}const vT=6048e5,y3=864e5;let x3={};function Xc(){return x3}function Ki(r,e){var l,u,d,h;const t=Xc(),n=(e==null?void 0:e.weekStartsOn)??((u=(l=e==null?void 0:e.locale)==null?void 0:l.options)==null?void 0:u.weekStartsOn)??t.weekStartsOn??((h=(d=t.locale)==null?void 0:d.options)==null?void 0:h.weekStartsOn)??0,s=mr(r),i=s.getDay(),a=(i<n?7:0)+i-n;return s.setDate(s.getDate()-a),s.setHours(0,0,0,0),s}function tc(r){return Ki(r,{weekStartsOn:1})}function wT(r){const e=mr(r),t=e.getFullYear(),n=Ss(r,0);n.setFullYear(t+1,0,4),n.setHours(0,0,0,0);const s=tc(n),i=Ss(r,0);i.setFullYear(t,0,4),i.setHours(0,0,0,0);const a=tc(i);return e.getTime()>=s.getTime()?t+1:e.getTime()>=a.getTime()?t:t-1}function Ay(r){const e=mr(r);return e.setHours(0,0,0,0),e}function Ry(r){const e=mr(r),t=new Date(Date.UTC(e.getFullYear(),e.getMonth(),e.getDate(),e.getHours(),e.getMinutes(),e.getSeconds(),e.getMilliseconds()));return t.setUTCFullYear(e.getFullYear()),+r-+t}function b3(r,e){const t=Ay(r),n=Ay(e),s=+t-Ry(t),i=+n-Ry(n);return Math.round((s-i)/y3)}function v3(r){const e=wT(r),t=Ss(r,0);return t.setFullYear(e,0,4),t.setHours(0,0,0,0),tc(t)}function w3(r){return r instanceof Date||typeof r=="object"&&Object.prototype.toString.call(r)==="[object Date]"}function _3(r){if(!w3(r)&&typeof r!="number")return!1;const e=mr(r);return!isNaN(Number(e))}function T3(r){const e=mr(r),t=Ss(r,0);return t.setFullYear(e.getFullYear(),0,1),t.setHours(0,0,0,0),t}const E3={lessThanXSeconds:{one:"less than a second",other:"less than {{count}} seconds"},xSeconds:{one:"1 second",other:"{{count}} seconds"},halfAMinute:"half a minute",lessThanXMinutes:{one:"less than a minute",other:"less than {{count}} minutes"},xMinutes:{one:"1 minute",other:"{{count}} minutes"},aboutXHours:{one:"about 1 hour",other:"about {{count}} hours"},xHours:{one:"1 hour",other:"{{count}} hours"},xDays:{one:"1 day",other:"{{count}} days"},aboutXWeeks:{one:"about 1 week",other:"about {{count}} weeks"},xWeeks:{one:"1 week",other:"{{count}} weeks"},aboutXMonths:{one:"about 1 month",other:"about {{count}} months"},xMonths:{one:"1 month",other:"{{count}} months"},aboutXYears:{one:"about 1 year",other:"about {{count}} years"},xYears:{one:"1 year",other:"{{count}} years"},overXYears:{one:"over 1 year",other:"over {{count}} years"},almostXYears:{one:"almost 1 year",other:"almost {{count}} years"}},N3=(r,e,t)=>{let n;const s=E3[r];return typeof s=="string"?n=s:e===1?n=s.one:n=s.other.replace("{{count}}",e.toString()),t!=null&&t.addSuffix?t.comparison&&t.comparison>0?"in "+n:n+" ago":n};function Ku(r){return(e={})=>{const t=e.width?String(e.width):r.defaultWidth;return r.formats[t]||r.formats[r.defaultWidth]}}const C3={full:"EEEE, MMMM do, y",long:"MMMM do, y",medium:"MMM d, y",short:"MM/dd/yyyy"},k3={full:"h:mm:ss a zzzz",long:"h:mm:ss a z",medium:"h:mm:ss a",short:"h:mm a"},S3={full:"{{date}} 'at' {{time}}",long:"{{date}} 'at' {{time}}",medium:"{{date}}, {{time}}",short:"{{date}}, {{time}}"},j3={date:Ku({formats:C3,defaultWidth:"full"}),time:Ku({formats:k3,defaultWidth:"full"}),dateTime:Ku({formats:S3,defaultWidth:"full"})},I3={lastWeek:"'last' eeee 'at' p",yesterday:"'yesterday at' p",today:"'today at' p",tomorrow:"'tomorrow at' p",nextWeek:"eeee 'at' p",other:"P"},A3=(r,e,t,n)=>I3[r];function mi(r){return(e,t)=>{const n=t!=null&&t.context?String(t.context):"standalone";let s;if(n==="formatting"&&r.formattingValues){const a=r.defaultFormattingWidth||r.defaultWidth,l=t!=null&&t.width?String(t.width):a;s=r.formattingValues[l]||r.formattingValues[a]}else{const a=r.defaultWidth,l=t!=null&&t.width?String(t.width):r.defaultWidth;s=r.values[l]||r.values[a]}const i=r.argumentCallback?r.argumentCallback(e):e;return s[i]}}const R3={narrow:["B","A"],abbreviated:["BC","AD"],wide:["Before Christ","Anno Domini"]},P3={narrow:["1","2","3","4"],abbreviated:["Q1","Q2","Q3","Q4"],wide:["1st quarter","2nd quarter","3rd quarter","4th quarter"]},M3={narrow:["J","F","M","A","M","J","J","A","S","O","N","D"],abbreviated:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],wide:["January","February","March","April","May","June","July","August","September","October","November","December"]},D3={narrow:["S","M","T","W","T","F","S"],short:["Su","Mo","Tu","We","Th","Fr","Sa"],abbreviated:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],wide:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"]},O3={narrow:{am:"a",pm:"p",midnight:"mi",noon:"n",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"},abbreviated:{am:"AM",pm:"PM",midnight:"midnight",noon:"noon",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"},wide:{am:"a.m.",pm:"p.m.",midnight:"midnight",noon:"noon",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"}},L3={narrow:{am:"a",pm:"p",midnight:"mi",noon:"n",morning:"in the morning",afternoon:"in the afternoon",evening:"in the evening",night:"at night"},abbreviated:{am:"AM",pm:"PM",midnight:"midnight",noon:"noon",morning:"in the morning",afternoon:"in the afternoon",evening:"in the evening",night:"at night"},wide:{am:"a.m.",pm:"p.m.",midnight:"midnight",noon:"noon",morning:"in the morning",afternoon:"in the afternoon",evening:"in the evening",night:"at night"}},V3=(r,e)=>{const t=Number(r),n=t%100;if(n>20||n<10)switch(n%10){case 1:return t+"st";case 2:return t+"nd";case 3:return t+"rd"}return t+"th"},F3={ordinalNumber:V3,era:mi({values:R3,defaultWidth:"wide"}),quarter:mi({values:P3,defaultWidth:"wide",argumentCallback:r=>r-1}),month:mi({values:M3,defaultWidth:"wide"}),day:mi({values:D3,defaultWidth:"wide"}),dayPeriod:mi({values:O3,defaultWidth:"wide",formattingValues:L3,defaultFormattingWidth:"wide"})};function pi(r){return(e,t={})=>{const n=t.width,s=n&&r.matchPatterns[n]||r.matchPatterns[r.defaultMatchWidth],i=e.match(s);if(!i)return null;const a=i[0],l=n&&r.parsePatterns[n]||r.parsePatterns[r.defaultParseWidth],u=Array.isArray(l)?$3(l,p=>p.test(a)):U3(l,p=>p.test(a));let d;d=r.valueCallback?r.valueCallback(u):u,d=t.valueCallback?t.valueCallback(d):d;const h=e.slice(a.length);return{value:d,rest:h}}}function U3(r,e){for(const t in r)if(Object.prototype.hasOwnProperty.call(r,t)&&e(r[t]))return t}function $3(r,e){for(let t=0;t<r.length;t++)if(e(r[t]))return t}function B3(r){return(e,t={})=>{const n=e.match(r.matchPattern);if(!n)return null;const s=n[0],i=e.match(r.parsePattern);if(!i)return null;let a=r.valueCallback?r.valueCallback(i[0]):i[0];a=t.valueCallback?t.valueCallback(a):a;const l=e.slice(s.length);return{value:a,rest:l}}}const z3=/^(\d+)(th|st|nd|rd)?/i,q3=/\d+/i,H3={narrow:/^(b|a)/i,abbreviated:/^(b\.?\s?c\.?|b\.?\s?c\.?\s?e\.?|a\.?\s?d\.?|c\.?\s?e\.?)/i,wide:/^(before christ|before common era|anno domini|common era)/i},W3={any:[/^b/i,/^(a|c)/i]},G3={narrow:/^[1234]/i,abbreviated:/^q[1234]/i,wide:/^[1234](th|st|nd|rd)? quarter/i},K3={any:[/1/i,/2/i,/3/i,/4/i]},Q3={narrow:/^[jfmasond]/i,abbreviated:/^(jan|feb|mar|apr|may|jun|jul|aug|sep|oct|nov|dec)/i,wide:/^(january|february|march|april|may|june|july|august|september|october|november|december)/i},Y3={narrow:[/^j/i,/^f/i,/^m/i,/^a/i,/^m/i,/^j/i,/^j/i,/^a/i,/^s/i,/^o/i,/^n/i,/^d/i],any:[/^ja/i,/^f/i,/^mar/i,/^ap/i,/^may/i,/^jun/i,/^jul/i,/^au/i,/^s/i,/^o/i,/^n/i,/^d/i]},X3={narrow:/^[smtwf]/i,short:/^(su|mo|tu|we|th|fr|sa)/i,abbreviated:/^(sun|mon|tue|wed|thu|fri|sat)/i,wide:/^(sunday|monday|tuesday|wednesday|thursday|friday|saturday)/i},J3={narrow:[/^s/i,/^m/i,/^t/i,/^w/i,/^t/i,/^f/i,/^s/i],any:[/^su/i,/^m/i,/^tu/i,/^w/i,/^th/i,/^f/i,/^sa/i]},Z3={narrow:/^(a|p|mi|n|(in the|at) (morning|afternoon|evening|night))/i,any:/^([ap]\.?\s?m\.?|midnight|noon|(in the|at) (morning|afternoon|evening|night))/i},eL={any:{am:/^a/i,pm:/^p/i,midnight:/^mi/i,noon:/^no/i,morning:/morning/i,afternoon:/afternoon/i,evening:/evening/i,night:/night/i}},tL={ordinalNumber:B3({matchPattern:z3,parsePattern:q3,valueCallback:r=>parseInt(r,10)}),era:pi({matchPatterns:H3,defaultMatchWidth:"wide",parsePatterns:W3,defaultParseWidth:"any"}),quarter:pi({matchPatterns:G3,defaultMatchWidth:"wide",parsePatterns:K3,defaultParseWidth:"any",valueCallback:r=>r+1}),month:pi({matchPatterns:Q3,defaultMatchWidth:"wide",parsePatterns:Y3,defaultParseWidth:"any"}),day:pi({matchPatterns:X3,defaultMatchWidth:"wide",parsePatterns:J3,defaultParseWidth:"any"}),dayPeriod:pi({matchPatterns:Z3,defaultMatchWidth:"any",parsePatterns:eL,defaultParseWidth:"any"})},rL={code:"en-US",formatDistance:N3,formatLong:j3,formatRelative:A3,localize:F3,match:tL,options:{weekStartsOn:0,firstWeekContainsDate:1}};function nL(r){const e=mr(r);return b3(e,T3(e))+1}function sL(r){const e=mr(r),t=+tc(e)-+v3(e);return Math.round(t/vT)+1}function _T(r,e){var h,p,g,b;const t=mr(r),n=t.getFullYear(),s=Xc(),i=(e==null?void 0:e.firstWeekContainsDate)??((p=(h=e==null?void 0:e.locale)==null?void 0:h.options)==null?void 0:p.firstWeekContainsDate)??s.firstWeekContainsDate??((b=(g=s.locale)==null?void 0:g.options)==null?void 0:b.firstWeekContainsDate)??1,a=Ss(r,0);a.setFullYear(n+1,0,i),a.setHours(0,0,0,0);const l=Ki(a,e),u=Ss(r,0);u.setFullYear(n,0,i),u.setHours(0,0,0,0);const d=Ki(u,e);return t.getTime()>=l.getTime()?n+1:t.getTime()>=d.getTime()?n:n-1}function oL(r,e){var l,u,d,h;const t=Xc(),n=(e==null?void 0:e.firstWeekContainsDate)??((u=(l=e==null?void 0:e.locale)==null?void 0:l.options)==null?void 0:u.firstWeekContainsDate)??t.firstWeekContainsDate??((h=(d=t.locale)==null?void 0:d.options)==null?void 0:h.firstWeekContainsDate)??1,s=_T(r,e),i=Ss(r,0);return i.setFullYear(s,0,n),i.setHours(0,0,0,0),Ki(i,e)}function iL(r,e){const t=mr(r),n=+Ki(t,e)-+oL(t,e);return Math.round(n/vT)+1}function Se(r,e){const t=r<0?"-":"",n=Math.abs(r).toString().padStart(e,"0");return t+n}const sn={y(r,e){const t=r.getFullYear(),n=t>0?t:1-t;return Se(e==="yy"?n%100:n,e.length)},M(r,e){const t=r.getMonth();return e==="M"?String(t+1):Se(t+1,2)},d(r,e){return Se(r.getDate(),e.length)},a(r,e){const t=r.getHours()/12>=1?"pm":"am";switch(e){case"a":case"aa":return t.toUpperCase();case"aaa":return t;case"aaaaa":return t[0];case"aaaa":default:return t==="am"?"a.m.":"p.m."}},h(r,e){return Se(r.getHours()%12||12,e.length)},H(r,e){return Se(r.getHours(),e.length)},m(r,e){return Se(r.getMinutes(),e.length)},s(r,e){return Se(r.getSeconds(),e.length)},S(r,e){const t=e.length,n=r.getMilliseconds(),s=Math.trunc(n*Math.pow(10,t-3));return Se(s,e.length)}},Vs={midnight:"midnight",noon:"noon",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"},Py={G:function(r,e,t){const n=r.getFullYear()>0?1:0;switch(e){case"G":case"GG":case"GGG":return t.era(n,{width:"abbreviated"});case"GGGGG":return t.era(n,{width:"narrow"});case"GGGG":default:return t.era(n,{width:"wide"})}},y:function(r,e,t){if(e==="yo"){const n=r.getFullYear(),s=n>0?n:1-n;return t.ordinalNumber(s,{unit:"year"})}return sn.y(r,e)},Y:function(r,e,t,n){const s=_T(r,n),i=s>0?s:1-s;if(e==="YY"){const a=i%100;return Se(a,2)}return e==="Yo"?t.ordinalNumber(i,{unit:"year"}):Se(i,e.length)},R:function(r,e){const t=wT(r);return Se(t,e.length)},u:function(r,e){const t=r.getFullYear();return Se(t,e.length)},Q:function(r,e,t){const n=Math.ceil((r.getMonth()+1)/3);switch(e){case"Q":return String(n);case"QQ":return Se(n,2);case"Qo":return t.ordinalNumber(n,{unit:"quarter"});case"QQQ":return t.quarter(n,{width:"abbreviated",context:"formatting"});case"QQQQQ":return t.quarter(n,{width:"narrow",context:"formatting"});case"QQQQ":default:return t.quarter(n,{width:"wide",context:"formatting"})}},q:function(r,e,t){const n=Math.ceil((r.getMonth()+1)/3);switch(e){case"q":return String(n);case"qq":return Se(n,2);case"qo":return t.ordinalNumber(n,{unit:"quarter"});case"qqq":return t.quarter(n,{width:"abbreviated",context:"standalone"});case"qqqqq":return t.quarter(n,{width:"narrow",context:"standalone"});case"qqqq":default:return t.quarter(n,{width:"wide",context:"standalone"})}},M:function(r,e,t){const n=r.getMonth();switch(e){case"M":case"MM":return sn.M(r,e);case"Mo":return t.ordinalNumber(n+1,{unit:"month"});case"MMM":return t.month(n,{width:"abbreviated",context:"formatting"});case"MMMMM":return t.month(n,{width:"narrow",context:"formatting"});case"MMMM":default:return t.month(n,{width:"wide",context:"formatting"})}},L:function(r,e,t){const n=r.getMonth();switch(e){case"L":return String(n+1);case"LL":return Se(n+1,2);case"Lo":return t.ordinalNumber(n+1,{unit:"month"});case"LLL":return t.month(n,{width:"abbreviated",context:"standalone"});case"LLLLL":return t.month(n,{width:"narrow",context:"standalone"});case"LLLL":default:return t.month(n,{width:"wide",context:"standalone"})}},w:function(r,e,t,n){const s=iL(r,n);return e==="wo"?t.ordinalNumber(s,{unit:"week"}):Se(s,e.length)},I:function(r,e,t){const n=sL(r);return e==="Io"?t.ordinalNumber(n,{unit:"week"}):Se(n,e.length)},d:function(r,e,t){return e==="do"?t.ordinalNumber(r.getDate(),{unit:"date"}):sn.d(r,e)},D:function(r,e,t){const n=nL(r);return e==="Do"?t.ordinalNumber(n,{unit:"dayOfYear"}):Se(n,e.length)},E:function(r,e,t){const n=r.getDay();switch(e){case"E":case"EE":case"EEE":return t.day(n,{width:"abbreviated",context:"formatting"});case"EEEEE":return t.day(n,{width:"narrow",context:"formatting"});case"EEEEEE":return t.day(n,{width:"short",context:"formatting"});case"EEEE":default:return t.day(n,{width:"wide",context:"formatting"})}},e:function(r,e,t,n){const s=r.getDay(),i=(s-n.weekStartsOn+8)%7||7;switch(e){case"e":return String(i);case"ee":return Se(i,2);case"eo":return t.ordinalNumber(i,{unit:"day"});case"eee":return t.day(s,{width:"abbreviated",context:"formatting"});case"eeeee":return t.day(s,{width:"narrow",context:"formatting"});case"eeeeee":return t.day(s,{width:"short",context:"formatting"});case"eeee":default:return t.day(s,{width:"wide",context:"formatting"})}},c:function(r,e,t,n){const s=r.getDay(),i=(s-n.weekStartsOn+8)%7||7;switch(e){case"c":return String(i);case"cc":return Se(i,e.length);case"co":return t.ordinalNumber(i,{unit:"day"});case"ccc":return t.day(s,{width:"abbreviated",context:"standalone"});case"ccccc":return t.day(s,{width:"narrow",context:"standalone"});case"cccccc":return t.day(s,{width:"short",context:"standalone"});case"cccc":default:return t.day(s,{width:"wide",context:"standalone"})}},i:function(r,e,t){const n=r.getDay(),s=n===0?7:n;switch(e){case"i":return String(s);case"ii":return Se(s,e.length);case"io":return t.ordinalNumber(s,{unit:"day"});case"iii":return t.day(n,{width:"abbreviated",context:"formatting"});case"iiiii":return t.day(n,{width:"narrow",context:"formatting"});case"iiiiii":return t.day(n,{width:"short",context:"formatting"});case"iiii":default:return t.day(n,{width:"wide",context:"formatting"})}},a:function(r,e,t){const s=r.getHours()/12>=1?"pm":"am";switch(e){case"a":case"aa":return t.dayPeriod(s,{width:"abbreviated",context:"formatting"});case"aaa":return t.dayPeriod(s,{width:"abbreviated",context:"formatting"}).toLowerCase();case"aaaaa":return t.dayPeriod(s,{width:"narrow",context:"formatting"});case"aaaa":default:return t.dayPeriod(s,{width:"wide",context:"formatting"})}},b:function(r,e,t){const n=r.getHours();let s;switch(n===12?s=Vs.noon:n===0?s=Vs.midnight:s=n/12>=1?"pm":"am",e){case"b":case"bb":return t.dayPeriod(s,{width:"abbreviated",context:"formatting"});case"bbb":return t.dayPeriod(s,{width:"abbreviated",context:"formatting"}).toLowerCase();case"bbbbb":return t.dayPeriod(s,{width:"narrow",context:"formatting"});case"bbbb":default:return t.dayPeriod(s,{width:"wide",context:"formatting"})}},B:function(r,e,t){const n=r.getHours();let s;switch(n>=17?s=Vs.evening:n>=12?s=Vs.afternoon:n>=4?s=Vs.morning:s=Vs.night,e){case"B":case"BB":case"BBB":return t.dayPeriod(s,{width:"abbreviated",context:"formatting"});case"BBBBB":return t.dayPeriod(s,{width:"narrow",context:"formatting"});case"BBBB":default:return t.dayPeriod(s,{width:"wide",context:"formatting"})}},h:function(r,e,t){if(e==="ho"){let n=r.getHours()%12;return n===0&&(n=12),t.ordinalNumber(n,{unit:"hour"})}return sn.h(r,e)},H:function(r,e,t){return e==="Ho"?t.ordinalNumber(r.getHours(),{unit:"hour"}):sn.H(r,e)},K:function(r,e,t){const n=r.getHours()%12;return e==="Ko"?t.ordinalNumber(n,{unit:"hour"}):Se(n,e.length)},k:function(r,e,t){let n=r.getHours();return n===0&&(n=24),e==="ko"?t.ordinalNumber(n,{unit:"hour"}):Se(n,e.length)},m:function(r,e,t){return e==="mo"?t.ordinalNumber(r.getMinutes(),{unit:"minute"}):sn.m(r,e)},s:function(r,e,t){return e==="so"?t.ordinalNumber(r.getSeconds(),{unit:"second"}):sn.s(r,e)},S:function(r,e){return sn.S(r,e)},X:function(r,e,t){const n=r.getTimezoneOffset();if(n===0)return"Z";switch(e){case"X":return Dy(n);case"XXXX":case"XX":return rs(n);case"XXXXX":case"XXX":default:return rs(n,":")}},x:function(r,e,t){const n=r.getTimezoneOffset();switch(e){case"x":return Dy(n);case"xxxx":case"xx":return rs(n);case"xxxxx":case"xxx":default:return rs(n,":")}},O:function(r,e,t){const n=r.getTimezoneOffset();switch(e){case"O":case"OO":case"OOO":return"GMT"+My(n,":");case"OOOO":default:return"GMT"+rs(n,":")}},z:function(r,e,t){const n=r.getTimezoneOffset();switch(e){case"z":case"zz":case"zzz":return"GMT"+My(n,":");case"zzzz":default:return"GMT"+rs(n,":")}},t:function(r,e,t){const n=Math.trunc(r.getTime()/1e3);return Se(n,e.length)},T:function(r,e,t){const n=r.getTime();return Se(n,e.length)}};function My(r,e=""){const t=r>0?"-":"+",n=Math.abs(r),s=Math.trunc(n/60),i=n%60;return i===0?t+String(s):t+String(s)+e+Se(i,2)}function Dy(r,e){return r%60===0?(r>0?"-":"+")+Se(Math.abs(r)/60,2):rs(r,e)}function rs(r,e=""){const t=r>0?"-":"+",n=Math.abs(r),s=Se(Math.trunc(n/60),2),i=Se(n%60,2);return t+s+e+i}const Oy=(r,e)=>{switch(r){case"P":return e.date({width:"short"});case"PP":return e.date({width:"medium"});case"PPP":return e.date({width:"long"});case"PPPP":default:return e.date({width:"full"})}},TT=(r,e)=>{switch(r){case"p":return e.time({width:"short"});case"pp":return e.time({width:"medium"});case"ppp":return e.time({width:"long"});case"pppp":default:return e.time({width:"full"})}},aL=(r,e)=>{const t=r.match(/(P+)(p+)?/)||[],n=t[1],s=t[2];if(!s)return Oy(r,e);let i;switch(n){case"P":i=e.dateTime({width:"short"});break;case"PP":i=e.dateTime({width:"medium"});break;case"PPP":i=e.dateTime({width:"long"});break;case"PPPP":default:i=e.dateTime({width:"full"});break}return i.replace("{{date}}",Oy(n,e)).replace("{{time}}",TT(s,e))},lL={p:TT,P:aL},cL=/^D+$/,uL=/^Y+$/,dL=["D","DD","YY","YYYY"];function hL(r){return cL.test(r)}function fL(r){return uL.test(r)}function mL(r,e,t){const n=pL(r,e,t);if(console.warn(n),dL.includes(r))throw new RangeError(n)}function pL(r,e,t){const n=r[0]==="Y"?"years":"days of the month";return`Use \`${r.toLowerCase()}\` instead of \`${r}\` (in \`${e}\`) for formatting ${n} to the input \`${t}\`; see: https://github.com/date-fns/date-fns/blob/master/docs/unicodeTokens.md`}const gL=/[yYQqMLwIdDecihHKkms]o|(\w)\1*|''|'(''|[^'])+('|$)|./g,yL=/P+p+|P+|p+|''|'(''|[^'])+('|$)|./g,xL=/^'([^]*?)'?$/,bL=/''/g,vL=/[a-zA-Z]/;function Ly(r,e,t){var h,p,g,b;const n=Xc(),s=n.locale??rL,i=n.firstWeekContainsDate??((p=(h=n.locale)==null?void 0:h.options)==null?void 0:p.firstWeekContainsDate)??1,a=n.weekStartsOn??((b=(g=n.locale)==null?void 0:g.options)==null?void 0:b.weekStartsOn)??0,l=mr(r);if(!_3(l))throw new RangeError("Invalid time value");let u=e.match(yL).map(C=>{const x=C[0];if(x==="p"||x==="P"){const v=lL[x];return v(C,s.formatLong)}return C}).join("").match(gL).map(C=>{if(C==="''")return{isToken:!1,value:"'"};const x=C[0];if(x==="'")return{isToken:!1,value:wL(C)};if(Py[x])return{isToken:!0,value:C};if(x.match(vL))throw new RangeError("Format string contains an unescaped latin alphabet character `"+x+"`");return{isToken:!1,value:C}});s.localize.preprocessor&&(u=s.localize.preprocessor(l,u));const d={firstWeekContainsDate:i,weekStartsOn:a,locale:s};return u.map(C=>{if(!C.isToken)return C.value;const x=C.value;(fL(x)||hL(x))&&mL(x,e,String(r));const v=Py[x[0]];return v(l,x,s.localize,d)}).join("")}function wL(r){const e=r.match(xL);return e?e[1].replace(bL,"'"):r}const jt=(r,e=!1)=>`/Avatars/${e?"Premium_Avatars":"Default_Avatars"}/${r}`,_L=[{id:"Metal-Drummer-Cat",name:"Metal Drummer Cat",url:jt("Metal-Drummer-Cat.png"),description:"A fierce cat drummer ready to rock",category:"free"},{id:"Metal-Bear-Bassist",name:"Metal Bear Bassist",url:jt("Metal-Bear-Bassist.png"),description:"A powerful bear with bass skills",category:"free"},{id:"Metal-Skull-Guitarist",name:"Metal Skull Guitarist",url:jt("Metal-Skull-Guitarist.png"),description:"A skull-headed guitar master",category:"free"},{id:"Metal-Wolf-Singer",name:"Metal Wolf Singer",url:jt("Metal-Wolf-Singer.png"),description:"A howling wolf vocalist",category:"free"},{id:"Rock-Owl-Guitarist",name:"Rock Owl Guitarist",url:jt("Rock-Owl-Guitarist.png"),description:"A wise owl shredding the guitar",category:"free"}],TL=[{id:"Bass-Bat",name:"Bass Bat",url:jt("Bass-Bat.jpeg",!0),description:"A bat with killer bass skills",category:"premium",jumpingElements:!0},{id:"Drum-Dragon",name:"Drum Dragon",url:jt("Drum-Dragon.jpeg",!0),description:"A dragon that sets the rhythm on fire",category:"premium",jumpingElements:!0},{id:"Guitar-Goblin",name:"Guitar Goblin",url:jt("Guitar-Goblin.jpeg",!0),description:"A mischievous goblin with guitar magic",category:"premium",jumpingElements:!0},{id:"Headbanger-Hamster",name:"Headbanger Hamster",url:jt("Headbanger-Hamster.jpeg",!0),description:"A tiny hamster with massive headbanging energy",category:"premium",jumpingElements:!0},{id:"Metal-Cat",name:"Metal Cat",url:jt("Metal-Cat.jpeg",!0),description:"A fierce feline with metal attitude",category:"premium",jumpingElements:!0},{id:"Metal-Queen",name:"Metal Queen",url:jt("Metal-Queen.jpeg",!0),description:"A regal queen of metal",category:"premium",jumpingElements:!0},{id:"Mosh-Pit-Monster",name:"Mosh Pit Monster",url:jt("Mosh-Pit-Monster.jpeg",!0),description:"A monster born in the mosh pit",category:"premium",jumpingElements:!0},{id:"Punk-Panda",name:"Punk Panda",url:jt("Punk-Panda.jpeg",!0),description:"A rebellious panda with punk spirit",category:"premium",jumpingElements:!0},{id:"Rebel-Raccoon",name:"Rebel Raccoon",url:jt("Rebel-Raccoon.jpeg",!0),description:"A raccoon that breaks all the rules",category:"premium",jumpingElements:!0},{id:"Rock-Unicorn",name:"Rock Unicorn",url:jt("Rock-Unicorn.jpeg",!0),description:"A magical unicorn that rocks hard",category:"premium",jumpingElements:!0}];function EL({isOpen:r,onClose:e,currentAvatar:t,onAvatarUpdate:n,userID:s}){const[i,a]=m.useState(t||""),[l,u]=m.useState(!1),[d,h]=m.useState(!1),p=m.useRef(null),{colors:g,isDarkMode:b}=ue(),{toast:C}=Gr(),x=async E=>{var N;const T=(N=E.target.files)==null?void 0:N[0];if(T){if(!T.type.startsWith("image/")){C({title:"Invalid File",description:"Please select an image file.",variant:"destructive"});return}if(T.size>5*1024*1024){C({title:"File Too Large",description:"Please select an image smaller than 5MB.",variant:"destructive"});return}u(!0);try{const R=await D_(T,s);a(R),C({title:"Upload Successful",description:"Your profile image has been uploaded."})}catch(R){C({title:"Upload Failed",description:R.message||"Failed to upload image. Please try again.",variant:"destructive"})}finally{u(!1)}}},v=async()=>{if(i){h(!0);try{n(i),C({title:"Avatar Updated",description:"Your profile avatar has been updated successfully."}),e()}catch(E){C({title:"Update Failed",description:E.message||"Failed to update avatar. Please try again.",variant:"destructive"})}finally{h(!1)}}};return o.jsx(Kf,{open:r,onOpenChange:e,children:o.jsxs(qc,{className:"sm:max-w-2xl max-h-[80vh] overflow-y-auto",style:{backgroundColor:g.cardBackground,borderColor:g.primary,color:g.text},children:[o.jsx(Hc,{children:o.jsxs(Wc,{className:"flex items-center gap-3 text-xl font-bold",children:[o.jsx(Ot,{className:"h-6 w-6",style:{color:g.primary}}),"Choose Your Avatar"]})}),o.jsxs(rm,{defaultValue:"avatars",className:"w-full",children:[o.jsxs(Yc,{className:"grid w-full grid-cols-2 mb-6",style:{backgroundColor:g.background},children:[o.jsx(Ut,{value:"avatars",style:{color:g.text},children:"Pre-made Avatars"}),o.jsx(Ut,{value:"upload",style:{color:g.text},children:"Upload Custom"})]}),o.jsxs($t,{value:"avatars",children:[o.jsxs("div",{className:"mb-8",children:[o.jsxs("h3",{className:"flex items-center gap-2 text-lg font-bold mb-4",style:{color:g.text},children:[o.jsx(Ot,{className:"h-5 w-5"}),"Free Avatars"]}),o.jsx("div",{className:"grid grid-cols-5 gap-4",children:_L.map(E=>o.jsxs("div",{className:`relative cursor-pointer rounded-lg p-2 transition-all duration-200 hover:scale-105 ${i===E.url?"ring-2 ring-offset-2":""}`,style:{borderColor:i===E.url?g.primary:"transparent",borderWidth:i===E.url?"2px":"0px","--tw-ring-color":g.primary,"--tw-ring-offset-color":b?"#000000":"#ffffff"},onClick:()=>a(E.url),children:[o.jsx("div",{className:"aspect-square rounded-lg overflow-hidden bg-gray-800",children:o.jsx("img",{src:E.url,alt:E.name,className:"w-full h-full object-cover",onError:T=>{const N=T.target;N.src=`https://ui-avatars.com/api/?name=${encodeURIComponent(E.name)}&background=f97316&color=fff&size=128`}})}),o.jsx("p",{className:"text-xs text-center mt-2 truncate",style:{color:g.text},children:E.name}),i===E.url&&o.jsx("div",{className:"absolute -top-2 -right-2 w-6 h-6 rounded-full flex items-center justify-center shadow-lg border-2 border-white",style:{backgroundColor:g.primary,zIndex:30},children:o.jsx("span",{className:"text-xs text-white font-bold",children:"✓"})})]},E.id))})]}),o.jsxs("div",{className:"mb-6",children:[o.jsxs("h3",{className:"flex items-center gap-2 text-lg font-bold mb-4",style:{color:g.primary},children:[o.jsx(hr,{className:"h-5 w-5"}),"Premium Avatars",o.jsx(Ho,{className:"h-4 w-4",style:{color:g.accent}})]}),o.jsx("div",{className:"grid grid-cols-5 gap-4",children:TL.map(E=>o.jsxs("div",{className:`relative cursor-pointer rounded-lg border-2 p-2 transition-all duration-200 hover:scale-105 ${i===E.url?"ring-2 ring-offset-2":""}`,style:{borderColor:i===E.url?g.primary:g.accent,background:`linear-gradient(135deg, ${g.accent}20, ${g.accent}10)`,"--tw-ring-color":g.primary,"--tw-ring-offset-color":b?"#000000":"#ffffff"},onClick:()=>a(E.url),children:[o.jsx("div",{className:"absolute -top-2 -right-2 z-20",children:o.jsx("div",{className:"rounded-full p-1",style:{background:`linear-gradient(to right, ${g.accent}, ${g.primary})`},children:o.jsx(hr,{className:"h-3 w-3 text-black"})})}),o.jsxs("div",{className:`aspect-square rounded-lg ${E.jumpingElements?"premium-avatar-container":"overflow-hidden"} bg-gradient-to-br from-gray-800 to-gray-900 relative`,children:[o.jsx("img",{src:E.url,alt:E.name,className:"w-full h-full object-cover rounded-lg",style:{clipPath:E.jumpingElements?"polygon(5% 0%, 95% 0%, 100% 5%, 100% 95%, 95% 100%, 5% 100%, 0% 95%, 0% 5%)":void 0}}),E.jumpingElements&&o.jsxs(o.Fragment,{children:[o.jsx("div",{className:"jumping-element top-0 left-0 text-lg",style:{color:g.accent},children:"🤘"}),o.jsx("div",{className:"jumping-element top-0 right-0 text-orange-500 text-lg",children:"⚡"}),o.jsx("div",{className:"jumping-element bottom-0 left-0 text-red-500 text-lg",children:"🔥"}),o.jsx("div",{className:"jumping-element bottom-0 right-0 text-purple-500 text-lg",children:"💀"})]})]}),o.jsx("p",{className:"text-xs text-center mt-2 truncate font-semibold",style:{color:g.accent},children:E.name}),i===E.url&&o.jsx("div",{className:"absolute -top-2 -right-2 w-6 h-6 rounded-full flex items-center justify-center shadow-lg border-2 border-white",style:{backgroundColor:g.primary,zIndex:30},children:o.jsx("span",{className:"text-xs text-white font-bold",children:"✓"})})]},E.id))})]})]}),o.jsx($t,{value:"upload",children:o.jsxs("div",{className:"space-y-6",children:[o.jsxs("div",{className:"text-center",children:[o.jsx("div",{className:"mx-auto w-32 h-32 rounded-full flex items-center justify-center cursor-pointer transition-colors",onClick:()=>{var E;return(E=p.current)==null?void 0:E.click()},style:{},children:i&&i.startsWith("data:")?o.jsx("img",{src:i,alt:"Uploaded avatar",className:"w-full h-full rounded-full object-cover"}):i&&!i.startsWith("/avatars/")?o.jsx("img",{src:i,alt:"Current avatar",className:"w-full h-full rounded-full object-cover"}):o.jsxs("div",{className:"text-center",children:[o.jsx(r_,{className:"mx-auto h-8 w-8 mb-2",style:{color:g.text}}),o.jsx("p",{className:"text-sm",style:{color:g.text},children:l?"Uploading...":"Click to upload"})]})}),o.jsx("input",{ref:p,type:"file",accept:"image/*",onChange:x,className:"hidden",disabled:l}),o.jsxs(J,{type:"button",variant:"outline",onClick:()=>{var E;return(E=p.current)==null?void 0:E.click()},disabled:l,className:"mt-4 focus:outline-none focus:ring-0",style:{borderColor:g.primary,color:g.primary},children:[o.jsx(u_,{className:"h-4 w-4 mr-2"}),l?"Uploading...":"Choose File"]})]}),o.jsxs("div",{className:"text-center text-sm opacity-75",style:{color:g.text},children:[o.jsx("p",{children:"Supported formats: JPG, PNG, GIF"}),o.jsx("p",{children:"Maximum size: 5MB"}),o.jsx("p",{children:"Recommended: 200x200 pixels or larger"})]})]})})]}),o.jsxs("div",{className:"flex justify-between pt-4 border-t",style:{borderColor:"#374151"},children:[o.jsx(J,{type:"button",variant:"ghost",onClick:e,className:"focus:outline-none focus:ring-0",style:{color:g.text},children:"Cancel"}),o.jsx(J,{type:"button",onClick:v,disabled:!i||d,className:"px-6 focus:outline-none focus:ring-0",style:{backgroundColor:g.primary,color:"white",opacity:!i||d?.6:1},children:d?"Saving...":"Save Avatar"})]})]})})}function NL(){const{user:r,signOut:e}=Wt(),[,t]=zo(),{colors:n,isDarkMode:s}=ue(),{toast:i}=Gr(),a=g4(),u=new URLSearchParams(a).get("section")||"profile",[d,h]=m.useState(u),[p,g]=m.useState({displayName:"",phoneNumber:"",email:"",profileImageUrl:""}),[b,C]=m.useState(null),[x,v]=m.useState(!0),[E,T]=m.useState(!1),[N,R]=m.useState(!1),[L,U]=m.useState(!1),[A,w]=m.useState(!1),[k,j]=m.useState(!1),[_,M]=m.useState(!1),[I,X]=m.useState([]);m.useEffect(()=>{h(u)},[u]),m.useEffect(()=>{r||t("/")},[r,t]),m.useEffect(()=>{var q;r&&g({displayName:r.displayName||((q=r.email)==null?void 0:q.split("@")[0])||"",phoneNumber:r.phoneNumber||"",email:r.email||"",profileImageUrl:r.photoURL||""})},[r]),m.useEffect(()=>{(async()=>{if(r){v(!0);try{const he=await zs(r.uid,r.email||"");he&&(C(he),g({displayName:`${he.firstName} ${he.lastName}`.trim(),phoneNumber:he.phoneNumber||"",email:he.emailAddress||r.email||"",profileImageUrl:he.userProfileImage||r.photoURL||""}))}catch(he){console.error("Failed to load user profile:",he)}finally{v(!1)}}})()},[r]),m.useEffect(()=>{r&&se()},[r]);const se=async()=>{try{const q=await fetch("/api/user/submissions",{credentials:"include"});if(q.ok){const he=await q.json();X(he)}}catch(q){console.error("Failed to load submissions:",q)}},le=async()=>{j(!0);try{const q=p.displayName.trim().split(" "),he=q[0]||"",Re=q.slice(1).join(" ")||"";if(!b)throw new Error("User profile not found");if(await lo(b.userID,{firstName:he,lastName:Re,phoneNumber:p.phoneNumber,userProfileImage:p.profileImageUrl,updatedAt:new Date().toISOString()}))C(ft=>ft?{...ft,firstName:he,lastName:Re,phoneNumber:p.phoneNumber,userProfileImage:p.profileImageUrl,updatedAt:new Date().toISOString()}:null),i({title:"Profile Updated",description:"Your profile has been saved successfully."});else throw new Error("Failed to update profile")}catch(q){i({title:"Update Failed",description:q.message||"Failed to update profile.",variant:"destructive"})}finally{j(!1)}},Z=async q=>{var Re;const he=(Re=q.target.files)==null?void 0:Re[0];if(he){M(!0);try{if(!b)throw new Error("User profile not found");const ht=await D_(he,b.userID);if(await lo(b.userID,{userProfileImage:ht,updatedAt:new Date().toISOString()}))g(Vt=>({...Vt,profileImageUrl:ht})),C(Vt=>Vt?{...Vt,userProfileImage:ht,updatedAt:new Date().toISOString()}:null),i({title:"Image Uploaded",description:"Your profile image has been updated successfully."});else throw new Error("Failed to update profile")}catch(ht){i({title:"Upload Failed",description:ht.message||"Failed to upload image.",variant:"destructive"})}finally{M(!1),T(!1)}}},P=async q=>{try{if(!b)throw new Error("User profile not found");if(await lo(b.userID,{userProfileImage:q,updatedAt:new Date().toISOString()}))g(Re=>({...Re,profileImageUrl:q})),C(Re=>Re?{...Re,userProfileImage:q,updatedAt:new Date().toISOString()}:null),i({title:"Avatar Updated",description:"Your avatar has been updated successfully."});else throw new Error("Failed to update avatar")}catch(he){i({title:"Update Failed",description:he.message||"Failed to update avatar.",variant:"destructive"})}finally{R(!1)}},z=async()=>{try{if(!(await fetch("/api/subscription/cancel",{method:"POST",credentials:"include"})).ok)throw new Error("Failed to cancel subscription");U(!1),i({title:"Subscription Cancelled",description:"Your subscription has been cancelled and will end at the next billing cycle."})}catch(q){i({title:"Cancellation Failed",description:q.message||"Failed to cancel subscription.",variant:"destructive"})}},Y=async()=>{await e(),t("/")};if(!r)return null;const xe=[{id:"profile",label:"Profile",icon:Ot},{id:"submissions",label:"Submission Requests",icon:Qd}],$e=`linear-gradient(135deg, ${n.primary} 0%, ${n.primary}80 100%)`;return o.jsxs("div",{className:"min-h-screen pt-20",style:{backgroundColor:n.background},children:[o.jsx("div",{className:"max-w-7xl mx-auto px-4 py-8",children:o.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-4 gap-8",children:[o.jsx("div",{className:"lg:col-span-1",children:o.jsx(ne,{className:"border-2 shadow-xl overflow-hidden",style:{backgroundColor:s?"rgba(0, 0, 0, 0.5)":"rgba(255, 255, 255, 0.95)",borderColor:`${n.primary}40`,backdropFilter:"blur(10px)"},children:o.jsx(oe,{className:"p-0",children:o.jsxs("div",{className:"space-y-1 p-2",children:[(xe||[]).map(q=>o.jsxs("button",{className:`w-full flex items-center gap-3 px-4 py-3 rounded-lg font-semibold transition-all duration-200 ${d===q.id?"shadow-lg":"hover:shadow-md"}`,style:{backgroundColor:d===q.id?n.primary:"transparent",color:d===q.id?"white":n.text},onClick:()=>h(q.id),children:[o.jsx(q.icon,{size:20}),o.jsx("span",{children:q.label})]},q.id)),o.jsx("div",{className:"my-4 mx-4 border-t",style:{borderColor:`${n.primary}20`}}),o.jsxs("button",{className:"w-full flex items-center gap-3 px-4 py-3 rounded-lg font-semibold transition-all duration-200 hover:shadow-md",style:{backgroundColor:"transparent",color:"#EF4444"},onClick:()=>w(!0),children:[o.jsx(Xd,{size:20}),o.jsx("span",{children:"Logout"})]})]})})})}),o.jsxs("div",{className:"lg:col-span-3",children:[d==="profile"&&o.jsxs(ne,{className:"border-2 shadow-xl",style:{backgroundColor:s?"rgba(0, 0, 0, 0.5)":"rgba(255, 255, 255, 0.95)",borderColor:`${n.primary}40`,backdropFilter:"blur(10px)"},children:[o.jsxs(Ye,{children:[o.jsx(Je,{className:"text-2xl font-black",style:{color:n.text},children:"Profile Settings"}),o.jsx(pl,{style:{color:`${n.text}80`},children:"Manage your account information and preferences"})]}),o.jsx(oe,{className:"space-y-6",children:x?o.jsxs("div",{className:"flex items-center justify-center py-8",children:[o.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2",style:{borderColor:n.primary}}),o.jsx("span",{className:"ml-3",style:{color:n.text},children:"Loading profile..."})]}):o.jsxs(o.Fragment,{children:[o.jsxs("div",{className:"flex items-start space-x-6",children:[o.jsxs("div",{className:"relative",children:[o.jsx("div",{className:"w-24 h-24 rounded-full shadow-lg ring-4 ring-offset-2",style:{background:p.profileImageUrl?`url(${p.profileImageUrl}) center/cover`:$e,"--ring-color":n.primary,"--ring-offset-color":s?"#000000":"#ffffff"},children:!p.profileImageUrl&&o.jsx("div",{className:"w-full h-full flex items-center justify-center",children:o.jsx(Ot,{size:40,className:"text-white"})})}),o.jsxs(r1,{open:E,onOpenChange:T,children:[o.jsx(n1,{asChild:!0,children:o.jsx("button",{className:"absolute bottom-0 right-0 w-8 h-8 rounded-full shadow-md flex items-center justify-center transition-all duration-200 hover:scale-110 focus:outline-none focus:ring-0",style:{backgroundColor:n.primary,border:`2px solid ${s?"#000000":n.primary}`},title:"Change profile picture","aria-label":"Change profile picture",children:o.jsx(r_,{size:16,className:"text-white"})})}),o.jsxs(Wf,{align:"start",className:"w-48",style:{backgroundColor:s?"rgba(0, 0, 0, 0.95)":"rgba(255, 255, 255, 0.95)",borderColor:`${n.primary}40`},children:[o.jsxs(co,{disabled:_,children:[o.jsx("label",{htmlFor:"image-upload",className:"flex items-center gap-2 cursor-pointer w-full",children:_?o.jsxs(o.Fragment,{children:[o.jsx("div",{className:"animate-spin rounded-full h-4 w-4 border-b-2",style:{borderColor:n.primary}}),o.jsx("span",{children:"Uploading..."})]}):o.jsxs(o.Fragment,{children:[o.jsx(u_,{size:16}),o.jsx("span",{children:"Upload Photo"})]})}),o.jsx("input",{id:"image-upload",type:"file",accept:"image/*",className:"hidden",onChange:Z,disabled:_})]}),o.jsxs(co,{onClick:()=>{R(!0),T(!1)},children:[o.jsx(hr,{size:16}),o.jsx("span",{children:"Premium Avatars"})]})]})]})]}),o.jsxs("div",{className:"flex-1 space-y-2",children:[o.jsx("h3",{className:"font-bold text-lg",style:{color:n.text},children:"Profile Picture"}),o.jsx("p",{className:"text-sm",style:{color:`${n.text}80`},children:"Upload a photo or choose from our premium avatar collection"})]})]}),o.jsxs("div",{className:"space-y-2",children:[o.jsx(Ae,{htmlFor:"displayName",style:{color:n.text},children:"Display Name"}),o.jsx(Be,{id:"displayName",value:p.displayName,onChange:q=>g(he=>({...he,displayName:q.target.value})),placeholder:"Enter your display name",className:"font-semibold",style:{backgroundColor:"transparent",borderColor:`${n.primary}40`,color:n.text}})]}),o.jsxs("div",{className:"space-y-2",children:[o.jsx(Ae,{htmlFor:"email",style:{color:n.text},children:"Email Address"}),o.jsxs("div",{className:"flex items-center gap-2",children:[o.jsx(Be,{id:"email",value:p.email,disabled:!0,className:"font-semibold",style:{backgroundColor:"transparent",borderColor:`${n.primary}40`,color:n.text,opacity:.7}}),(r==null?void 0:r.emailVerified)&&o.jsxs(Ke,{variant:"outline",className:"flex items-center gap-1",children:[o.jsx(Ks,{size:14}),"Verified"]})]})]}),o.jsxs("div",{className:"space-y-2",children:[o.jsx(Ae,{htmlFor:"phoneNumber",style:{color:n.text},children:"Phone Number"}),o.jsxs("div",{className:"flex items-center gap-2",children:[o.jsx(Be,{id:"phoneNumber",value:p.phoneNumber,onChange:q=>g(he=>({...he,phoneNumber:q.target.value})),placeholder:"+1 (555) 123-4567",className:"font-semibold",style:{backgroundColor:"transparent",borderColor:`${n.primary}40`,color:n.text}}),!1]})]}),o.jsx(J,{onClick:le,disabled:k,className:"w-full font-bold shadow-lg",style:{backgroundColor:n.primary,color:"white"},children:k?"Saving...":"Save Changes"})]})})]}),d==="subscription"&&o.jsxs(ne,{className:"border-2 shadow-xl",style:{backgroundColor:s?"rgba(0, 0, 0, 0.5)":"rgba(255, 255, 255, 0.95)",borderColor:`${n.primary}40`,backdropFilter:"blur(10px)"},children:[o.jsxs(Ye,{children:[o.jsx(Je,{className:"text-2xl font-black",style:{color:n.text},children:"Subscription Management"}),o.jsx(pl,{style:{color:`${n.text}80`},children:"Manage your subscription and billing information"})]}),o.jsxs(oe,{className:"space-y-6",children:[o.jsx("div",{className:"p-6 rounded-lg border-2",style:{borderColor:`${n.primary}40`},children:o.jsxs("div",{className:"flex items-start justify-between",children:[o.jsxs("div",{children:[o.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[o.jsx(hr,{size:24,style:{color:n.accent}}),o.jsx("h3",{className:"font-black text-xl",style:{color:n.text},children:"Legend Package"})]}),o.jsx("p",{className:"text-sm mb-4",style:{color:`${n.text}80`},children:"Premium access to all features"}),o.jsxs("div",{className:"space-y-2",children:[o.jsxs("div",{className:"flex items-center gap-2",children:[o.jsx(Ks,{size:16,style:{color:n.primary}}),o.jsx("span",{className:"text-sm",style:{color:n.text},children:"Unlimited song submissions"})]}),o.jsxs("div",{className:"flex items-center gap-2",children:[o.jsx(Ks,{size:16,style:{color:n.primary}}),o.jsx("span",{className:"text-sm",style:{color:n.text},children:"Premium avatars & badges"})]}),o.jsxs("div",{className:"flex items-center gap-2",children:[o.jsx(Ks,{size:16,style:{color:n.primary}}),o.jsx("span",{className:"text-sm",style:{color:n.text},children:"Early access to new features"})]})]})]}),o.jsxs("div",{className:"text-right",children:[o.jsx("p",{className:"font-black text-2xl",style:{color:n.primary},children:"$9.99"}),o.jsx("p",{className:"text-sm",style:{color:`${n.text}80`},children:"per month"})]})]})}),o.jsxs("div",{className:"space-y-4",children:[o.jsx("h4",{className:"font-bold",style:{color:n.text},children:"Billing Information"}),o.jsxs("div",{className:"space-y-3",children:[o.jsxs("div",{className:"flex items-center justify-between p-3 rounded-lg",style:{backgroundColor:`${n.primary}10`},children:[o.jsxs("div",{className:"flex items-center gap-3",children:[o.jsx(Kd,{size:20,style:{color:n.primary}}),o.jsx("span",{className:"font-semibold",style:{color:n.text},children:"•••• •••• •••• 4242"})]}),o.jsx(Ke,{variant:"outline",children:"Visa"})]}),o.jsxs("div",{className:"flex items-center justify-between p-3 rounded-lg",style:{backgroundColor:`${n.primary}10`},children:[o.jsxs("div",{className:"flex items-center gap-3",children:[o.jsx(is,{size:20,style:{color:n.primary}}),o.jsx("span",{className:"font-semibold",style:{color:n.text},children:"Next billing date"})]}),o.jsx("span",{style:{color:n.text},children:Ly(new Date(Date.now()+720*60*60*1e3),"MMM dd, yyyy")})]})]})]}),o.jsx("div",{className:"pt-4 border-t",style:{borderColor:`${n.primary}20`},children:o.jsx(J,{variant:"outline",onClick:()=>U(!0),className:"w-full font-semibold focus:outline-none focus:ring-0",style:{borderColor:"#EF4444",color:"#EF4444"},children:"Cancel Subscription"})})]})]}),d==="submissions"&&o.jsxs(ne,{className:"border-2 shadow-xl",style:{backgroundColor:s?"rgba(0, 0, 0, 0.5)":"rgba(255, 255, 255, 0.95)",borderColor:`${n.primary}40`,backdropFilter:"blur(10px)"},children:[o.jsxs(Ye,{children:[o.jsx(Je,{className:"text-2xl font-black",style:{color:n.text},children:"Submission Requests"}),o.jsx(pl,{style:{color:`${n.text}80`},children:"Track your song submission history"})]}),o.jsx(oe,{children:((I==null?void 0:I.length)||0)===0?o.jsxs("div",{className:"text-center py-12",children:[o.jsx(Qd,{size:48,className:"mx-auto mb-4 opacity-50",style:{color:n.primary}}),o.jsx("h3",{className:"font-bold text-lg mb-2",style:{color:n.text},children:"No Submissions Yet"}),o.jsx("p",{style:{color:`${n.text}80`},children:"You haven't submitted any songs yet"})]}):o.jsx("div",{className:"space-y-4",children:(I||[]).map(q=>o.jsx("div",{className:"p-4 rounded-lg border transition-all duration-200 hover:shadow-md",style:{borderColor:`${n.primary}20`,backgroundColor:`${n.primary}05`},children:o.jsxs("div",{className:"flex items-start justify-between",children:[o.jsxs("div",{children:[o.jsxs("h4",{className:"font-bold",style:{color:n.text},children:[q.artistName," - ",q.songTitle]}),o.jsxs("p",{className:"text-sm mt-1",style:{color:`${n.text}80`},children:["Submitted on ",Ly(new Date(q.createdAt),"MMM dd, yyyy")]})]}),o.jsx(Ke,{variant:q.status==="approved"?"default":q.status==="rejected"?"destructive":"secondary",children:q.status})]})},q.id))})})]})]})]})}),o.jsx(EL,{isOpen:N,onClose:()=>R(!1),currentAvatar:p.profileImageUrl,onAvatarUpdate:P,userID:(b==null?void 0:b.userID)||(r==null?void 0:r.uid)||""}),o.jsx(sh,{open:L,onOpenChange:U,children:o.jsxs(Kl,{style:{backgroundColor:s?"rgba(0, 0, 0, 0.95)":"rgba(255, 255, 255, 0.95)",borderColor:`${n.primary}40`},children:[o.jsxs(Ql,{children:[o.jsx(Xl,{className:"text-xl font-black",style:{color:n.text},children:"Cancel Subscription"}),o.jsxs(Jl,{style:{color:`${n.text}80`},children:[o.jsx(s_,{className:"inline mr-2",size:16}),"Are you sure you want to cancel your subscription? You'll lose access to premium features at the end of your billing cycle."]})]}),o.jsxs(Yl,{children:[o.jsx(ec,{style:{color:n.text},className:"focus:outline-none focus:ring-0",children:"Keep Subscription"}),o.jsx(Zl,{onClick:z,className:"bg-red-600 hover:bg-red-700 text-white focus:outline-none focus:ring-0",children:"Cancel Subscription"})]})]})}),o.jsx(sh,{open:A,onOpenChange:w,children:o.jsxs(Kl,{style:{backgroundColor:s?"rgba(0, 0, 0, 0.95)":"rgba(255, 255, 255, 0.95)",borderColor:`${n.primary}40`},children:[o.jsxs(Ql,{children:[o.jsx(Xl,{className:"text-xl font-black",style:{color:n.text},children:"Confirm Logout"}),o.jsx(Jl,{style:{color:`${n.text}80`},children:"Are you sure you want to log out of your account?"})]}),o.jsxs(Yl,{children:[o.jsx(ec,{style:{color:n.text},className:"focus:outline-none focus:ring-0",children:"Cancel"}),o.jsx(Zl,{onClick:Y,className:"bg-red-600 hover:bg-red-700 text-white focus:outline-none focus:ring-0",children:"Logout"})]})]})})]})}function CL(){return o.jsx(NL,{})}var kL="Separator",Vy="horizontal",SL=["horizontal","vertical"],ET=m.forwardRef((r,e)=>{const{decorative:t,orientation:n=Vy,...s}=r,i=jL(n)?n:Vy,l=t?{role:"none"}:{"aria-orientation":i==="vertical"?i:void 0,role:"separator"};return o.jsx(De.div,{"data-orientation":i,...l,...s,ref:e})});ET.displayName=kL;function jL(r){return SL.includes(r)}var NT=ET;const Ve=m.forwardRef(({className:r,orientation:e="horizontal",decorative:t=!0,...n},s)=>o.jsx(NT,{ref:s,decorative:t,orientation:e,className:ee("shrink-0 bg-border",e==="horizontal"?"h-[1px] w-full":"h-full w-[1px]",r),...n}));Ve.displayName=NT.displayName;function IL(){const[r,e]=m.useState(!0),[t,n]=m.useState(!1),[s,i]=m.useState(!1),[a,l]=m.useState({email:"",password:"",firstName:"",lastName:"",phoneNumber:"",confirmPassword:""}),{getColors:u,theme:d}=ue(),{toast:h}=Gr(),{register:p,signIn:g,signInWithGoogle:b,user:C}=Wt(),x=u();if(zo(),C)return window.location.href="/",null;const v=async T=>{T.preventDefault(),i(!0);try{if(r){const N=await g(a.email,a.password);N.success?(h({title:"Welcome Back!",description:"You have successfully signed in."}),window.location.href="/"):h({title:"Login Failed",description:N.error||"Please try again.",variant:"destructive"})}else{if(a.password!==a.confirmPassword){h({title:"Password Mismatch",description:"Passwords do not match.",variant:"destructive"}),i(!1);return}if(a.password.length<6){h({title:"Password Too Short",description:"Password must be at least 6 characters.",variant:"destructive"}),i(!1);return}const N=await p(a.email,a.password,a.firstName,a.lastName,a.phoneNumber);N.success?(h({title:"Account Created!",description:"Your account has been created successfully. Welcome to Spandex Salvation Radio!"}),window.location.href="/"):h({title:"Registration Failed",description:N.error||"Please try again.",variant:"destructive"})}}catch(N){console.error("Authentication error:",N),h({title:r?"Login Failed":"Registration Failed",description:N.message||"Please try again.",variant:"destructive"})}finally{i(!1)}},E=async()=>{try{i(!0),await b(),h({title:"Google Authentication Successful!",description:"Welcome to Spandex Salvation Radio!"}),window.location.href="/"}catch(T){console.error("Google authentication error:",T),h({title:"Google Authentication Failed",description:T.message||"Please try again.",variant:"destructive"})}finally{i(!1)}};return o.jsx("div",{className:ee("min-h-screen flex items-center justify-center p-4",d==="light"?"bg-white":"bg-black"),children:o.jsxs(ne,{className:"w-full max-w-md",children:[o.jsxs(Ye,{className:"space-y-4",children:[o.jsx("div",{className:"flex items-center space-x-2",children:o.jsx(pw,{href:"/",children:o.jsxs(J,{variant:"ghost",size:"sm",children:[o.jsx(ga,{className:"h-4 w-4 mr-2"}),"Back to Home"]})})}),o.jsxs("div",{className:"text-center",children:[o.jsx(Je,{className:"text-2xl font-bold",children:r?"Welcome Back":"Create Account"}),o.jsx("p",{className:"text-muted-foreground mt-2",children:r?"Login to your Spandex Salvation account":"Join the metal revolution"})]})]}),o.jsxs(oe,{className:"space-y-6",children:[o.jsxs(J,{type:"button",variant:"outline",className:"w-full bg-white text-black border-gray-300 hover:bg-gray-50",onClick:E,disabled:s,children:[o.jsx("img",{src:"/GoogleLogoIcon.png",alt:"Google",className:"w-4 h-4 mr-2"}),s?"Please wait...":r?"Continue with Google":"Sign Up with Google"]}),o.jsxs("div",{className:"relative",children:[o.jsx("div",{className:"absolute inset-0 flex items-center",children:o.jsx(Ve,{className:"w-full"})}),o.jsx("div",{className:"relative flex justify-center text-xs uppercase",children:o.jsx("span",{className:"bg-background px-2 text-muted-foreground",children:"Or continue with email"})})]}),o.jsxs("form",{onSubmit:v,className:"space-y-4",children:[!r&&o.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[o.jsxs("div",{children:[o.jsx(Ae,{htmlFor:"firstName",children:"First Name"}),o.jsxs("div",{className:"relative",children:[o.jsx(Ot,{className:"absolute left-3 top-3 h-4 w-4 text-muted-foreground"}),o.jsx(Be,{id:"firstName",type:"text",placeholder:"John",className:"pl-10",value:a.firstName,onChange:T=>l(N=>({...N,firstName:T.target.value})),required:!0})]})]}),o.jsxs("div",{children:[o.jsx(Ae,{htmlFor:"lastName",children:"Last Name"}),o.jsxs("div",{className:"relative",children:[o.jsx(Ot,{className:"absolute left-3 top-3 h-4 w-4 text-muted-foreground"}),o.jsx(Be,{id:"lastName",type:"text",placeholder:"Doe",className:"pl-10",value:a.lastName,onChange:T=>l(N=>({...N,lastName:T.target.value})),required:!0})]})]})]}),!r&&o.jsxs("div",{children:[o.jsx(Ae,{htmlFor:"phoneNumber",children:"Phone Number (Optional)"}),o.jsxs("div",{className:"relative",children:[o.jsx(Ot,{className:"absolute left-3 top-3 h-4 w-4 text-muted-foreground"}),o.jsx(Be,{id:"phoneNumber",type:"tel",placeholder:"+1 (555) 123-4567",className:"pl-10",value:a.phoneNumber,onChange:T=>l(N=>({...N,phoneNumber:T.target.value}))})]})]}),o.jsxs("div",{children:[o.jsx(Ae,{htmlFor:"email",children:"Email"}),o.jsxs("div",{className:"relative",children:[o.jsx(Hl,{className:"absolute left-3 top-3 h-4 w-4 text-muted-foreground"}),o.jsx(Be,{id:"email",type:"email",placeholder:"john@example.com",className:"pl-10",value:a.email,onChange:T=>l(N=>({...N,email:T.target.value})),required:!0})]})]}),o.jsxs("div",{children:[o.jsx(Ae,{htmlFor:"password",children:"Password"}),o.jsxs("div",{className:"relative",children:[o.jsx(Yd,{className:"absolute left-3 top-3 h-4 w-4 text-muted-foreground"}),o.jsx(Be,{id:"password",type:t?"text":"password",placeholder:r?"Enter your password":"Create a password",className:"pl-10 pr-10",value:a.password,onChange:T=>l(N=>({...N,password:T.target.value})),required:!0}),o.jsx("button",{type:"button",onClick:()=>n(!t),className:"absolute right-3 top-3 text-muted-foreground hover:text-foreground",children:t?o.jsx($M,{className:"h-4 w-4"}):o.jsx(i_,{className:"h-4 w-4"})})]})]}),!r&&o.jsxs("div",{children:[o.jsx(Ae,{htmlFor:"confirmPassword",children:"Confirm Password"}),o.jsxs("div",{className:"relative",children:[o.jsx(Yd,{className:"absolute left-3 top-3 h-4 w-4 text-muted-foreground"}),o.jsx(Be,{id:"confirmPassword",type:t?"text":"password",placeholder:"Confirm your password",className:"pl-10",value:a.confirmPassword,onChange:T=>l(N=>({...N,confirmPassword:T.target.value})),required:!0})]})]}),o.jsx(J,{type:"submit",className:"w-full",disabled:s,style:{backgroundColor:x.primary},children:s?"Please wait...":r?"Login":"Create Account"})]}),o.jsx("div",{className:"text-center",children:o.jsx("button",{type:"button",onClick:()=>e(!r),className:"text-sm text-muted-foreground hover:text-foreground underline",children:r?"Don't have an account? Sign up":"Already have an account? Login"})})]})]})})}const AL=[{id:"rebel",name:"Rebel",price:4.99,popular:!1,features:["Ad-free streaming","High-quality audio","Basic song requests","Mobile app access"]},{id:"legend",name:"Legend",price:9.99,popular:!0,features:["Everything in Rebel","Live chat access","Priority song requests","Exclusive content","Premium avatars","Early show access"]},{id:"icon",name:"Icon",price:19.99,popular:!1,features:["Everything in Legend","VIP chat privileges","Direct DJ messaging","Custom playlists","Exclusive merchandise","Meet & greet opportunities"]}];function RL(){const[r,e]=m.useState("legend"),{getColors:t,theme:n}=ue(),s=t(),i=a=>{console.log(`Subscribing to ${a} tier`),window.location.href=`/api/subscribe/${a}`};return o.jsx("div",{className:ee("min-h-screen p-4",n==="light"?"bg-white":"bg-black"),children:o.jsxs("div",{className:"max-w-6xl mx-auto",children:[o.jsxs("div",{className:"text-center space-y-4 mb-12",children:[o.jsx("div",{className:"flex items-center justify-center space-x-4 mb-6",children:o.jsx(pw,{href:"/",children:o.jsxs(J,{variant:"ghost",size:"sm",children:[o.jsx(ga,{className:"h-4 w-4 mr-2"}),"Back to Home"]})})}),o.jsxs("h1",{className:"text-4xl font-black",children:["Choose Your ",o.jsx("span",{style:{color:s.primary},children:"Metal"})," ","Experience"]}),o.jsx("p",{className:"text-xl text-muted-foreground max-w-2xl mx-auto",children:"Join the Spandex Salvation revolution and unlock exclusive features, premium content, and VIP access to the metal community."})]}),o.jsx("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-8 mb-12",children:AL.map(a=>o.jsxs(ne,{className:ee("relative transition-all duration-300 hover:scale-105",r===a.id&&"ring-2",a.popular&&"border-2"),style:{"--ring-color":r===a.id?s.primary:void 0,borderColor:a.popular?s.primary:void 0},children:[a.popular&&o.jsx("div",{className:"absolute -top-3 left-1/2 transform -translate-x-1/2 px-4 py-1 rounded-full text-white text-sm font-bold",style:{backgroundColor:s.primary},children:"MOST POPULAR"}),o.jsx(Ye,{className:"text-center space-y-4",children:o.jsxs("div",{className:"space-y-2",children:[o.jsx("h3",{className:"text-2xl font-bold",children:a.name}),o.jsxs("div",{className:"flex items-center justify-center space-x-1",children:[o.jsxs("span",{className:"text-4xl font-black",children:["$",a.price]}),o.jsx("span",{className:"text-muted-foreground",children:"/month"})]})]})}),o.jsxs(oe,{className:"space-y-6",children:[o.jsx("ul",{className:"space-y-3",children:a.features.map((l,u)=>o.jsxs("li",{className:"flex items-center space-x-3",children:[o.jsx(ya,{className:"h-5 w-5 flex-shrink-0",style:{color:s.primary}}),o.jsx("span",{className:"text-sm",children:l})]},u))}),o.jsx(J,{className:"w-full",variant:a.popular?"default":"outline",onClick:()=>i(a.id),style:a.popular?{backgroundColor:s.primary}:void 0,children:a.popular?"Get Started":"Choose Plan"})]})]},a.id))}),o.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6 mb-12",children:[o.jsxs(ne,{className:"text-center p-6 transition-all duration-300 hover:scale-105 hover:shadow-2xl border-2 cursor-pointer",style:{backgroundColor:s.surface,borderColor:`${s.primary}80`,boxShadow:`0 8px 32px ${s.primary}20`},onMouseEnter:a=>{a.currentTarget.style.borderColor=s.primary,a.currentTarget.style.boxShadow=`0 15px 50px ${s.primary}60`},onMouseLeave:a=>{a.currentTarget.style.borderColor=`${s.primary}80`,a.currentTarget.style.boxShadow=`0 8px 32px ${s.primary}20`},children:[o.jsx(Ao,{className:"h-12 w-12 mx-auto mb-4",style:{color:s.primary}}),o.jsx("h3",{className:"font-bold mb-2",style:{color:s.text},children:"Premium Audio"}),o.jsx("p",{className:"text-sm",style:{color:s.textMuted},children:"High-quality streaming with zero ads"})]}),o.jsxs(ne,{className:"text-center p-6 transition-all duration-300 hover:scale-105 hover:shadow-2xl border-2 cursor-pointer",style:{backgroundColor:s.surface,borderColor:`${s.primary}80`,boxShadow:`0 8px 32px ${s.primary}20`},onMouseEnter:a=>{a.currentTarget.style.borderColor=s.primary,a.currentTarget.style.boxShadow=`0 15px 50px ${s.primary}60`},onMouseLeave:a=>{a.currentTarget.style.borderColor=`${s.primary}80`,a.currentTarget.style.boxShadow=`0 8px 32px ${s.primary}20`},children:[o.jsx(Ys,{className:"h-12 w-12 mx-auto mb-4",style:{color:s.primary}}),o.jsx("h3",{className:"font-bold mb-2",style:{color:s.text},children:"Live Chat"}),o.jsx("p",{className:"text-sm",style:{color:s.textMuted},children:"Connect with the metal community"})]}),o.jsxs(ne,{className:"text-center p-6 transition-all duration-300 hover:scale-105 hover:shadow-2xl border-2 cursor-pointer",style:{backgroundColor:s.surface,borderColor:`${s.primary}80`,boxShadow:`0 8px 32px ${s.primary}20`},onMouseEnter:a=>{a.currentTarget.style.borderColor=s.primary,a.currentTarget.style.boxShadow=`0 15px 50px ${s.primary}60`},onMouseLeave:a=>{a.currentTarget.style.borderColor=`${s.primary}80`,a.currentTarget.style.boxShadow=`0 8px 32px ${s.primary}20`},children:[o.jsx(hr,{className:"h-12 w-12 mx-auto mb-4",style:{color:s.primary}}),o.jsx("h3",{className:"font-bold mb-2",style:{color:s.text},children:"Exclusive Content"}),o.jsx("p",{className:"text-sm",style:{color:s.textMuted},children:"Access to special shows and interviews"})]}),o.jsxs(ne,{className:"text-center p-6 transition-all duration-300 hover:scale-105 hover:shadow-2xl border-2 cursor-pointer",style:{backgroundColor:s.surface,borderColor:`${s.primary}80`,boxShadow:`0 8px 32px ${s.primary}20`},onMouseEnter:a=>{a.currentTarget.style.borderColor=s.primary,a.currentTarget.style.boxShadow=`0 15px 50px ${s.primary}60`},onMouseLeave:a=>{a.currentTarget.style.borderColor=`${s.primary}80`,a.currentTarget.style.boxShadow=`0 8px 32px ${s.primary}20`},children:[o.jsx(Ho,{className:"h-12 w-12 mx-auto mb-4",style:{color:s.primary}}),o.jsx("h3",{className:"font-bold mb-2",style:{color:s.text},children:"VIP Access"}),o.jsx("p",{className:"text-sm",style:{color:s.textMuted},children:"Priority requests and early access"})]})]}),o.jsxs(ne,{className:"mb-12",children:[o.jsx(Ye,{children:o.jsx(Je,{className:"text-center",children:"Frequently Asked Questions"})}),o.jsxs(oe,{className:"space-y-4",children:[o.jsxs("div",{children:[o.jsx("h4",{className:"font-semibold mb-2",children:"Can I cancel anytime?"}),o.jsx("p",{className:"text-sm text-muted-foreground",children:"Yes, you can cancel your subscription at any time. You'll continue to have access until the end of your current billing period."})]}),o.jsxs("div",{children:[o.jsx("h4",{className:"font-semibold mb-2",children:"What payment methods do you accept?"}),o.jsx("p",{className:"text-sm text-muted-foreground",children:"We accept all major credit cards, PayPal, and other secure payment methods through Stripe."})]}),o.jsxs("div",{children:[o.jsx("h4",{className:"font-semibold mb-2",children:"Can I upgrade or downgrade my plan?"}),o.jsx("p",{className:"text-sm text-muted-foreground",children:"Absolutely! You can change your subscription tier at any time from your profile settings."})]})]})]})]})})}function PL(){const{getColors:r,currentTheme:e}=ue(),t=r();return o.jsx("div",{className:"min-h-screen transition-colors duration-300",style:{backgroundColor:t.background,color:t.text},children:o.jsx("main",{id:"main-content",children:o.jsx(St,{direction:"up",delay:0,children:o.jsx("section",{id:"subscribe",className:"py-20 transition-colors duration-300",style:{backgroundColor:t.background},children:o.jsxs("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8",children:[o.jsxs("div",{className:"text-center mb-16",children:[o.jsx("h1",{className:"font-orbitron font-black text-4xl md:text-5xl mb-4",style:{color:e==="light-mode"?"#000000":t.text},children:"Support Us"}),o.jsx("p",{className:"text-lg font-semibold",style:{color:e==="light-mode"?"rgba(0, 0, 0, 0.7)":t.textMuted},children:"Support our growth and enjoy exclusive content."})]}),o.jsx(bT,{})]})})})})})}function ML(){const{getColors:r,currentTheme:e}=ue(),t=r();return o.jsx("div",{className:"min-h-screen transition-colors duration-300",style:{backgroundColor:t.background,color:t.text},children:o.jsx("main",{id:"main-content",children:o.jsx(St,{direction:"up",delay:0,children:o.jsx("section",{id:"schedule",className:"py-20 transition-colors duration-300",style:{backgroundColor:t.background},children:o.jsxs("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8",children:[o.jsxs("div",{className:"text-center mb-16",children:[o.jsx("h1",{className:"font-orbitron font-black text-4xl md:text-5xl mb-4",style:{color:e==="light-mode"?"#000000":t.text},children:"Schedule"}),o.jsx("p",{className:"text-lg font-semibold",style:{color:e==="light-mode"?"rgba(0, 0, 0, 0.7)":t.textMuted},children:"Check out our programming schedule and upcoming shows."})]}),o.jsx("div",{className:"text-center",children:o.jsx("p",{className:"text-lg mb-8",children:"Schedule content will be displayed here, matching the homepage schedule section."})})]})})})})})}function DL(){const{getColors:r,currentTheme:e}=ue(),t=r();return o.jsx("div",{className:"min-h-screen transition-colors duration-300",style:{backgroundColor:t.background,color:t.text},children:o.jsx("main",{id:"main-content",children:o.jsx(St,{direction:"up",delay:0,children:o.jsx("section",{id:"features",className:"py-20 transition-colors duration-300",style:{backgroundColor:t.background},children:o.jsxs("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8",children:[o.jsxs("div",{className:"text-center mb-16",children:[o.jsx("h1",{className:"font-orbitron font-black text-4xl md:text-5xl mb-4",style:{color:e==="light-mode"?"#000000":t.text},children:"Features"}),o.jsx("p",{className:"text-lg font-semibold",style:{color:e==="light-mode"?"rgba(0, 0, 0, 0.7)":t.textMuted},children:"Explore our premium features and subscription tiers."})]}),o.jsx("div",{className:"text-center",children:o.jsx("p",{className:"text-lg",style:{color:t.textMuted},children:"Features content will be displayed here."})})]})})})})})}function OL(){const{currentTheme:r,colors:e}=ue(),{isAuthenticated:t,user:n}=Wt();return Fc(),o.jsxs("div",{className:"min-h-screen transition-colors duration-300",style:{backgroundColor:e.background,color:e.text},children:[o.jsx("div",{id:"main-navigation",children:o.jsx(Qf,{})}),o.jsxs("main",{id:"main-content",className:"pt-16",children:[o.jsx("section",{className:"py-20 transition-colors duration-300",children:o.jsx("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8",children:o.jsxs("div",{className:"text-center mb-12",children:[o.jsx("h1",{className:"font-orbitron font-black text-3xl md:text-4xl mb-4",style:{color:r==="light-mode"?"#000000":e.text},children:"LIVE INTERACTIVE MAP"}),o.jsx("p",{className:"text-lg",style:{color:e.textMuted},children:"Explore our global community of metalheads and see where the music is playing live."})]})})}),o.jsx("section",{className:"py-8",children:o.jsx(J1,{})})]})]})}function LL(){const{getColors:r,currentTheme:e}=ue(),t=r();return o.jsx("div",{className:"min-h-screen transition-colors duration-300",style:{backgroundColor:t.background,color:t.text},children:o.jsx("main",{id:"main-content",children:o.jsx(St,{direction:"up",delay:0,children:o.jsx("section",{id:"submissions",className:"py-20 transition-colors duration-300",style:{backgroundColor:t.background},children:o.jsxs("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8",children:[o.jsxs("div",{className:"text-center mb-16",children:[o.jsx("h1",{className:"font-orbitron font-black text-4xl md:text-5xl mb-4",style:{color:e==="light-mode"?"#000000":t.text},children:"Submissions"}),o.jsx("p",{className:"text-lg font-semibold",style:{color:e==="light-mode"?"rgba(0, 0, 0, 0.7)":t.textMuted},children:"Submit song requests and feedback."})]}),o.jsx("div",{className:"text-center",children:o.jsx("p",{className:"text-lg",style:{color:t.textMuted},children:"Submissions content will be displayed here."})})]})})})})})}function VL(){const{getColors:r,currentTheme:e}=ue(),t=r();return o.jsx("div",{className:"min-h-screen transition-colors duration-300",style:{backgroundColor:t.background,color:t.text},children:o.jsx("main",{id:"main-content",children:o.jsx(St,{direction:"up",delay:0,children:o.jsx("section",{id:"contact",className:"py-20 transition-colors duration-300",style:{backgroundColor:t.background},children:o.jsxs("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8",children:[o.jsxs("div",{className:"text-center mb-16",children:[o.jsx("h1",{className:"font-orbitron font-black text-4xl md:text-5xl mb-4",style:{color:e==="light-mode"?"#000000":t.text},children:"Contact"}),o.jsx("p",{className:"text-lg font-semibold",style:{color:e==="light-mode"?"rgba(0, 0, 0, 0.7)":t.textMuted},children:"Get in touch with the station."})]}),o.jsx("div",{className:"text-center",children:o.jsx("p",{className:"text-lg",style:{color:t.textMuted},children:"Contact content will be displayed here."})})]})})})})})}function FL(){const{colors:r,currentTheme:e}=ue(),[,t]=zo();return o.jsxs("div",{className:"relative",children:[o.jsx("button",{className:"fixed top-4 left-4 z-50 rounded-full p-2 shadow-lg transition-colors duration-300",onClick:()=>t("/"),"aria-label":"Back to Home",style:{backdropFilter:"blur(4px)",backgroundColor:"rgba(0, 0, 0, 0.7)",color:"#ffffff"},onMouseEnter:n=>{n.currentTarget.style.backgroundColor="rgba(0, 0, 0, 0.9)"},onMouseLeave:n=>{n.currentTarget.style.backgroundColor="rgba(0, 0, 0, 0.7)"},children:o.jsx(ga,{className:"w-6 h-6"})}),o.jsx("div",{className:"min-h-screen p-4 md:p-8",children:o.jsx("div",{className:"max-w-4xl mx-auto",children:o.jsxs(ne,{style:{backgroundColor:r.background,borderColor:r.primary},children:[o.jsxs(Ye,{className:"text-center",children:[o.jsx(Je,{className:"text-3xl font-bold",style:{color:r.text},children:"Terms of Service"}),o.jsxs("p",{className:"text-muted-foreground",children:["Last updated: ",new Date().toLocaleDateString()]})]}),o.jsx(oe,{children:o.jsx(Bc,{className:"h-[600px] pr-4",children:o.jsxs("div",{className:"space-y-6",style:{color:r.text},children:[o.jsxs("section",{children:[o.jsx("h2",{className:"text-xl font-semibold mb-3",style:{color:r.primary},children:"1. Acceptance of Terms"}),o.jsx("p",{className:"text-muted-foreground leading-relaxed",children:'By accessing and using Spandex Salvation Radio ("the Service"), you accept and agree to be bound by the terms and provision of this agreement. If you do not agree to abide by the above, please do not use this service.'})]}),o.jsx(Ve,{}),o.jsxs("section",{children:[o.jsx("h2",{className:"text-xl font-semibold mb-3",style:{color:r.primary},children:"2. Description of Service"}),o.jsx("p",{className:"text-muted-foreground leading-relaxed mb-3",children:"Spandex Salvation Radio is an online streaming platform that provides:"}),o.jsxs("ul",{className:"list-disc list-inside text-muted-foreground space-y-1 ml-4",children:[o.jsx("li",{children:"24/7 metal music streaming"}),o.jsx("li",{children:"Interactive radio show schedules"}),o.jsx("li",{children:"Song submission system"}),o.jsx("li",{children:"Community features and chat"}),o.jsx("li",{children:"Premium subscription services"})]})]}),o.jsx(Ve,{}),o.jsxs("section",{children:[o.jsx("h2",{className:"text-xl font-semibold mb-3",style:{color:r.primary},children:"3. User Accounts and Registration"}),o.jsx("p",{className:"text-muted-foreground leading-relaxed mb-3",children:"To access certain features, you must register for an account. You agree to:"}),o.jsxs("ul",{className:"list-disc list-inside text-muted-foreground space-y-1 ml-4",children:[o.jsx("li",{children:"Provide accurate and complete information"}),o.jsx("li",{children:"Maintain the security of your account credentials"}),o.jsx("li",{children:"Accept responsibility for all activities under your account"}),o.jsx("li",{children:"Notify us immediately of any unauthorized use"})]})]}),o.jsx(Ve,{}),o.jsxs("section",{children:[o.jsx("h2",{className:"text-xl font-semibold mb-3",style:{color:r.primary},children:"4. Content and Submissions"}),o.jsx("p",{className:"text-muted-foreground leading-relaxed mb-3",children:"When submitting content (songs, comments, etc.), you agree that:"}),o.jsxs("ul",{className:"list-disc list-inside text-muted-foreground space-y-1 ml-4",children:[o.jsx("li",{children:"You own or have rights to the submitted content"}),o.jsx("li",{children:"Content must comply with our community guidelines"}),o.jsx("li",{children:"We reserve the right to moderate and remove content"}),o.jsx("li",{children:"Inappropriate content may result in account suspension"})]})]}),o.jsx(Ve,{}),o.jsxs("section",{children:[o.jsx("h2",{className:"text-xl font-semibold mb-3",style:{color:r.primary},children:"5. Premium Subscriptions"}),o.jsx("p",{className:"text-muted-foreground leading-relaxed mb-3",children:"Premium subscription terms:"}),o.jsxs("ul",{className:"list-disc list-inside text-muted-foreground space-y-1 ml-4",children:[o.jsx("li",{children:"Subscriptions are billed monthly or annually"}),o.jsx("li",{children:"Cancellation takes effect at the end of current billing period"}),o.jsx("li",{children:"No refunds for partial months"}),o.jsx("li",{children:"Pricing subject to change with 30-day notice"})]})]}),o.jsx(Ve,{}),o.jsxs("section",{children:[o.jsx("h2",{className:"text-xl font-semibold mb-3",style:{color:r.primary},children:"6. Prohibited Uses"}),o.jsx("p",{className:"text-muted-foreground leading-relaxed mb-3",children:"You may not use our service to:"}),o.jsxs("ul",{className:"list-disc list-inside text-muted-foreground space-y-1 ml-4",children:[o.jsx("li",{children:"Violate any applicable laws or regulations"}),o.jsx("li",{children:"Transmit malicious code or harmful content"}),o.jsx("li",{children:"Attempt to gain unauthorized access to our systems"}),o.jsx("li",{children:"Interfere with or disrupt the service"}),o.jsx("li",{children:"Engage in harassment or abusive behavior"})]})]}),o.jsx(Ve,{}),o.jsxs("section",{children:[o.jsx("h2",{className:"text-xl font-semibold mb-3",style:{color:r.primary},children:"7. Intellectual Property"}),o.jsx("p",{className:"text-muted-foreground leading-relaxed",children:"All content on Spandex Salvation Radio, including but not limited to text, graphics, logos, and software, is protected by copyright and other intellectual property laws. You may not reproduce, distribute, or create derivative works without permission."})]}),o.jsx(Ve,{}),o.jsxs("section",{children:[o.jsx("h2",{className:"text-xl font-semibold mb-3",style:{color:r.primary},children:"8. Limitation of Liability"}),o.jsx("p",{className:"text-muted-foreground leading-relaxed",children:"Spandex Salvation Radio shall not be liable for any indirect, incidental, special, consequential, or punitive damages, including but not limited to loss of profits, data, or use, incurred by you or any third party."})]}),o.jsx(Ve,{}),o.jsxs("section",{children:[o.jsx("h2",{className:"text-xl font-semibold mb-3",style:{color:r.primary},children:"9. Termination"}),o.jsx("p",{className:"text-muted-foreground leading-relaxed",children:"We may terminate or suspend your account immediately, without prior notice, for conduct that we believe violates these Terms of Service or is harmful to other users, us, or third parties."})]}),o.jsx(Ve,{}),o.jsxs("section",{children:[o.jsx("h2",{className:"text-xl font-semibold mb-3",style:{color:r.primary},children:"10. Changes to Terms"}),o.jsx("p",{className:"text-muted-foreground leading-relaxed",children:"We reserve the right to modify these terms at any time. We will notify users of significant changes via email or prominent notice on our website. Continued use of the service constitutes acceptance of modified terms."})]}),o.jsx(Ve,{}),o.jsxs("section",{children:[o.jsx("h2",{className:"text-xl font-semibold mb-3",style:{color:r.primary},children:"11. Contact Information"}),o.jsxs("p",{className:"text-muted-foreground leading-relaxed",children:["For questions about these Terms of Service, please contact us at:",o.jsx("br",{}),"Email: legal@spandexsalvationradio.com",o.jsx("br",{}),"Address: [Your Business Address]"]})]})]})})})]})})})]})}function UL(){const{colors:r,currentTheme:e}=ue(),[,t]=zo();return o.jsxs("div",{className:"relative",children:[o.jsx("button",{className:"fixed top-4 left-4 z-50 rounded-full p-2 shadow-lg transition-colors duration-300",onClick:()=>t("/"),"aria-label":"Back to Home",style:{backdropFilter:"blur(4px)",backgroundColor:"rgba(0, 0, 0, 0.7)",color:"#ffffff"},onMouseEnter:n=>{n.currentTarget.style.backgroundColor="rgba(0, 0, 0, 0.9)"},onMouseLeave:n=>{n.currentTarget.style.backgroundColor="rgba(0, 0, 0, 0.7)"},children:o.jsx(ga,{className:"w-6 h-6"})}),o.jsx("div",{className:"min-h-screen p-4 md:p-8",children:o.jsx("div",{className:"max-w-4xl mx-auto",children:o.jsxs(ne,{style:{backgroundColor:r.background,borderColor:r.primary},children:[o.jsxs(Ye,{className:"text-center",children:[o.jsx(Je,{className:"text-3xl font-bold",style:{color:r.text},children:"Privacy Policy"}),o.jsxs("p",{className:"text-muted-foreground",children:["Last updated: ",new Date().toLocaleDateString()]})]}),o.jsx(oe,{children:o.jsx(Bc,{className:"h-[600px] pr-4",children:o.jsxs("div",{className:"space-y-6",style:{color:r.text},children:[o.jsxs("section",{children:[o.jsx("h2",{className:"text-xl font-semibold mb-3",style:{color:r.primary},children:"1. Information We Collect"}),o.jsx("p",{className:"text-muted-foreground leading-relaxed mb-3",children:"We collect information you provide directly to us, such as when you:"}),o.jsxs("ul",{className:"list-disc list-inside text-muted-foreground space-y-1 ml-4",children:[o.jsx("li",{children:"Create an account or profile"}),o.jsx("li",{children:"Subscribe to our premium services"}),o.jsx("li",{children:"Submit song requests or feedback"}),o.jsx("li",{children:"Participate in chat or community features"}),o.jsx("li",{children:"Contact us for support"})]})]}),o.jsx(Ve,{}),o.jsxs("section",{children:[o.jsx("h2",{className:"text-xl font-semibold mb-3",style:{color:r.primary},children:"2. Personal Information"}),o.jsx("p",{className:"text-muted-foreground leading-relaxed mb-3",children:"The types of personal information we may collect include:"}),o.jsxs("ul",{className:"list-disc list-inside text-muted-foreground space-y-1 ml-4",children:[o.jsx("li",{children:"Name and email address"}),o.jsx("li",{children:"Phone number (for verification)"}),o.jsx("li",{children:"Payment information (processed securely via Stripe)"}),o.jsx("li",{children:"Profile preferences and listening history"}),o.jsx("li",{children:"Location data (if you choose to share)"})]})]}),o.jsx(Ve,{}),o.jsxs("section",{children:[o.jsx("h2",{className:"text-xl font-semibold mb-3",style:{color:r.primary},children:"3. Automatic Information Collection"}),o.jsx("p",{className:"text-muted-foreground leading-relaxed mb-3",children:"We automatically collect certain information when you use our service:"}),o.jsxs("ul",{className:"list-disc list-inside text-muted-foreground space-y-1 ml-4",children:[o.jsx("li",{children:"Device information (browser, operating system)"}),o.jsx("li",{children:"Usage data (pages visited, time spent)"}),o.jsx("li",{children:"IP address and approximate location"}),o.jsx("li",{children:"Cookies and similar tracking technologies"}),o.jsx("li",{children:"Streaming preferences and listening patterns"})]})]}),o.jsx(Ve,{}),o.jsxs("section",{children:[o.jsx("h2",{className:"text-xl font-semibold mb-3",style:{color:r.primary},children:"4. How We Use Your Information"}),o.jsx("p",{className:"text-muted-foreground leading-relaxed mb-3",children:"We use the information we collect to:"}),o.jsxs("ul",{className:"list-disc list-inside text-muted-foreground space-y-1 ml-4",children:[o.jsx("li",{children:"Provide and maintain our streaming service"}),o.jsx("li",{children:"Process payments and manage subscriptions"}),o.jsx("li",{children:"Personalize your listening experience"}),o.jsx("li",{children:"Send important updates and notifications"}),o.jsx("li",{children:"Improve our service and develop new features"}),o.jsx("li",{children:"Prevent fraud and ensure security"}),o.jsx("li",{children:"Comply with legal obligations"})]})]}),o.jsx(Ve,{}),o.jsxs("section",{children:[o.jsx("h2",{className:"text-xl font-semibold mb-3",style:{color:r.primary},children:"5. Information Sharing"}),o.jsx("p",{className:"text-muted-foreground leading-relaxed mb-3",children:"We do not sell, trade, or rent your personal information. We may share information in these situations:"}),o.jsxs("ul",{className:"list-disc list-inside text-muted-foreground space-y-1 ml-4",children:[o.jsx("li",{children:"With service providers (Stripe for payments, Firebase for authentication)"}),o.jsx("li",{children:"When required by law or legal process"}),o.jsx("li",{children:"To protect our rights or safety"}),o.jsx("li",{children:"In connection with a business transfer"}),o.jsx("li",{children:"With your explicit consent"})]})]}),o.jsx(Ve,{}),o.jsxs("section",{children:[o.jsx("h2",{className:"text-xl font-semibold mb-3",style:{color:r.primary},children:"6. Data Security"}),o.jsx("p",{className:"text-muted-foreground leading-relaxed",children:"We implement appropriate security measures to protect your personal information against unauthorized access, alteration, disclosure, or destruction. This includes encryption of sensitive data, secure server infrastructure, and regular security assessments."})]}),o.jsx(Ve,{}),o.jsxs("section",{children:[o.jsx("h2",{className:"text-xl font-semibold mb-3",style:{color:r.primary},children:"7. Cookies and Tracking"}),o.jsx("p",{className:"text-muted-foreground leading-relaxed mb-3",children:"We use cookies and similar technologies to:"}),o.jsxs("ul",{className:"list-disc list-inside text-muted-foreground space-y-1 ml-4",children:[o.jsx("li",{children:"Remember your preferences and settings"}),o.jsx("li",{children:"Maintain your login session"}),o.jsx("li",{children:"Analyze usage patterns and improve our service"}),o.jsx("li",{children:"Provide personalized content recommendations"})]}),o.jsx("p",{className:"text-muted-foreground leading-relaxed mt-3",children:"You can control cookie preferences through your browser settings."})]}),o.jsx(Ve,{}),o.jsxs("section",{children:[o.jsx("h2",{className:"text-xl font-semibold mb-3",style:{color:r.primary},children:"8. Third-Party Services"}),o.jsx("p",{className:"text-muted-foreground leading-relaxed mb-3",children:"Our service integrates with third-party providers:"}),o.jsxs("ul",{className:"list-disc list-inside text-muted-foreground space-y-1 ml-4",children:[o.jsxs("li",{children:[o.jsx("strong",{children:"Google OAuth:"})," For account authentication"]}),o.jsxs("li",{children:[o.jsx("strong",{children:"Stripe:"})," For payment processing"]}),o.jsxs("li",{children:[o.jsx("strong",{children:"Firebase:"})," For user data storage and authentication"]}),o.jsxs("li",{children:[o.jsx("strong",{children:"Google reCAPTCHA:"})," For spam and fraud prevention"]})]}),o.jsx("p",{className:"text-muted-foreground leading-relaxed mt-3",children:"These services have their own privacy policies that govern their use of your information."})]}),o.jsx(Ve,{}),o.jsxs("section",{children:[o.jsx("h2",{className:"text-xl font-semibold mb-3",style:{color:r.primary},children:"9. Your Rights and Choices"}),o.jsx("p",{className:"text-muted-foreground leading-relaxed mb-3",children:"You have the right to:"}),o.jsxs("ul",{className:"list-disc list-inside text-muted-foreground space-y-1 ml-4",children:[o.jsx("li",{children:"Access and update your personal information"}),o.jsx("li",{children:"Delete your account and associated data"}),o.jsx("li",{children:"Opt out of marketing communications"}),o.jsx("li",{children:"Request a copy of your data"}),o.jsx("li",{children:"Object to certain processing activities"})]})]}),o.jsx(Ve,{}),o.jsxs("section",{children:[o.jsx("h2",{className:"text-xl font-semibold mb-3",style:{color:r.primary},children:"10. Data Retention"}),o.jsx("p",{className:"text-muted-foreground leading-relaxed",children:"We retain your personal information for as long as necessary to provide our services, comply with legal obligations, resolve disputes, and enforce our agreements. When you delete your account, we will delete or anonymize your personal information within 30 days."})]}),o.jsx(Ve,{}),o.jsxs("section",{children:[o.jsx("h2",{className:"text-xl font-semibold mb-3",style:{color:r.primary},children:"11. Children's Privacy"}),o.jsx("p",{className:"text-muted-foreground leading-relaxed",children:"Our service is not intended for users under 13 years of age. We do not knowingly collect personal information from children under 13. If we become aware that we have collected such information, we will take steps to delete it promptly."})]}),o.jsx(Ve,{}),o.jsxs("section",{children:[o.jsx("h2",{className:"text-xl font-semibold mb-3",style:{color:r.primary},children:"12. International Users"}),o.jsx("p",{className:"text-muted-foreground leading-relaxed",children:"If you are accessing our service from outside the United States, please be aware that your information may be transferred to, stored, and processed in the United States where our servers are located."})]}),o.jsx(Ve,{}),o.jsxs("section",{children:[o.jsx("h2",{className:"text-xl font-semibold mb-3",style:{color:r.primary},children:"13. Changes to This Policy"}),o.jsx("p",{className:"text-muted-foreground leading-relaxed",children:'We may update this Privacy Policy from time to time. We will notify you of any material changes by posting the new policy on this page and updating the "Last updated" date. We encourage you to review this policy periodically.'})]}),o.jsx(Ve,{}),o.jsxs("section",{children:[o.jsx("h2",{className:"text-xl font-semibold mb-3",style:{color:r.primary},children:"14. Contact Us"}),o.jsxs("p",{className:"text-muted-foreground leading-relaxed",children:["If you have any questions about this Privacy Policy or our data practices, please contact us at:",o.jsx("br",{}),"Email: privacy@spandexsalvationradio.com",o.jsx("br",{}),"Address: [Your Business Address]"]})]})]})})})]})})})]})}function $L(){const[r,e]=zo(),[t,n]=m.useState(null),[s,i]=m.useState(!0),{getColors:a}=ue(),l=a();if(m.useEffect(()=>{const h=new URLSearchParams(window.location.search),p=h.get("order_id"),g=h.get("product_id");p?setTimeout(()=>{n({orderId:p,items:[{id:g||"1",title:"Spandex Salvation Classic Tee",variant:"Large",quantity:1,price:24.99,image:"https://images.unsplash.com/photo-1521572163474-6864f9cf17ab?ixlib=rb-4.0.3&auto=format&fit=crop&w=800&h=800"}],subtotal:24.99,shipping:5.99,tax:2.05,total:33.03,customerEmail:"customer@example.com",shippingAddress:{name:"John Doe",address1:"123 Metal Street",city:"Rock City",state:"CA",zip:"90210",country:"United States"},paymentMethod:"•••• 4242",estimatedDelivery:"3-5 business days",trackingNumber:"1Z999AA1234567890"}),i(!1)},1e3):i(!1)},[]),s)return o.jsx("div",{className:"min-h-screen bg-dark-bg flex items-center justify-center",children:o.jsxs("div",{className:"text-center",children:[o.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 mx-auto mb-4",style:{borderColor:l.primary}}),o.jsx("p",{className:"text-white font-semibold",children:"Loading order details..."})]})});if(!t)return o.jsx("div",{className:"min-h-screen bg-dark-bg flex items-center justify-center",children:o.jsx(ne,{className:"bg-gray-900 border-gray-800 max-w-md w-full mx-4",children:o.jsxs(oe,{className:"p-8 text-center",children:[o.jsx(ui,{className:"h-12 w-12 text-gray-400 mx-auto mb-4"}),o.jsx("h2",{className:"text-xl font-bold text-white mb-2",children:"Order Not Found"}),o.jsx("p",{className:"text-gray-400 mb-6",children:"We couldn't find the order you're looking for."}),o.jsx(J,{onClick:()=>e("/"),className:"w-full font-bold transition-all duration-300",style:{backgroundColor:l.primary},children:"Return to Home"})]})})});const u=()=>{e("/")},d=()=>{window.open(`https://spandexsalvation.myshopify.com/account/orders/${t.orderId}`,"_blank")};return o.jsx("div",{className:"min-h-screen bg-dark-bg py-12 px-4",children:o.jsxs("div",{className:"max-w-4xl mx-auto",children:[o.jsxs("div",{className:"text-center mb-8",children:[o.jsx("div",{className:"flex justify-center mb-4",children:o.jsx(Ks,{className:"h-16 w-16",style:{color:l.primary}})}),o.jsx("h1",{className:"text-3xl font-black text-white mb-2",children:"Order Confirmed!"}),o.jsxs("p",{className:"text-gray-400 text-lg",children:["Thank you for your order. We've sent a confirmation email to"," ",o.jsx("span",{className:"text-white font-semibold",children:t.customerEmail})]})]}),o.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-8",children:[o.jsxs(ne,{className:"bg-gray-900 border-gray-800",children:[o.jsxs(Ye,{children:[o.jsx(Je,{className:"text-white font-black",children:"Order Summary"}),o.jsxs("p",{className:"text-gray-400",children:["Order #",t.orderId]})]}),o.jsxs(oe,{className:"space-y-4",children:[t.items.map(h=>o.jsxs("div",{className:"flex items-center space-x-4 p-4 bg-gray-800 rounded-lg",children:[o.jsx("img",{src:h.image,alt:h.title,className:"h-16 w-16 object-cover rounded-lg"}),o.jsxs("div",{className:"flex-1",children:[o.jsx("h3",{className:"font-bold text-white",children:h.title}),o.jsx("p",{className:"text-gray-400 text-sm",children:h.variant}),o.jsxs("div",{className:"flex justify-between items-center mt-2",children:[o.jsxs("span",{className:"text-gray-400",children:["Qty: ",h.quantity]}),o.jsxs("span",{className:"font-bold text-white",children:["$",h.price.toFixed(2)]})]})]})]},h.id)),o.jsxs("div",{className:"border-t border-gray-700 pt-4 space-y-2",children:[o.jsxs("div",{className:"flex justify-between text-gray-400",children:[o.jsx("span",{children:"Subtotal"}),o.jsxs("span",{children:["$",t.subtotal.toFixed(2)]})]}),o.jsxs("div",{className:"flex justify-between text-gray-400",children:[o.jsx("span",{children:"Shipping"}),o.jsxs("span",{children:["$",t.shipping.toFixed(2)]})]}),o.jsxs("div",{className:"flex justify-between text-gray-400",children:[o.jsx("span",{children:"Tax"}),o.jsxs("span",{children:["$",t.tax.toFixed(2)]})]}),o.jsxs("div",{className:"flex justify-between text-white font-bold text-lg pt-2 border-t border-gray-700",children:[o.jsx("span",{children:"Total"}),o.jsxs("span",{children:["$",t.total.toFixed(2)]})]})]})]})]}),o.jsxs("div",{className:"space-y-6",children:[o.jsxs(ne,{className:"bg-gray-900 border-gray-800",children:[o.jsx(Ye,{children:o.jsxs(Je,{className:"text-white font-black flex items-center",children:[o.jsx(ui,{className:"h-5 w-5 mr-2"}),"Shipping Address"]})}),o.jsxs(oe,{children:[o.jsxs("div",{className:"text-gray-300 space-y-1",children:[o.jsx("p",{className:"font-semibold text-white",children:t.shippingAddress.name}),o.jsx("p",{children:t.shippingAddress.address1}),t.shippingAddress.address2&&o.jsx("p",{children:t.shippingAddress.address2}),o.jsxs("p",{children:[t.shippingAddress.city,", ",t.shippingAddress.state," ",t.shippingAddress.zip]}),o.jsx("p",{children:t.shippingAddress.country})]}),o.jsxs("div",{className:"mt-4 p-3 bg-gray-800 rounded-lg",children:[o.jsxs("div",{className:"flex items-center text-sm",children:[o.jsx(Hl,{className:"h-4 w-4 mr-2",style:{color:l.primary}}),o.jsx("span",{className:"text-gray-400",children:"Estimated delivery: "}),o.jsx("span",{className:"text-white font-semibold ml-1",children:t.estimatedDelivery})]}),t.trackingNumber&&o.jsxs("div",{className:"flex items-center text-sm mt-2",children:[o.jsx(ui,{className:"h-4 w-4 mr-2",style:{color:l.primary}}),o.jsx("span",{className:"text-gray-400",children:"Tracking: "}),o.jsx("span",{className:"text-white font-semibold ml-1",children:t.trackingNumber})]})]})]})]}),o.jsxs(ne,{className:"bg-gray-900 border-gray-800",children:[o.jsx(Ye,{children:o.jsxs(Je,{className:"text-white font-black flex items-center",children:[o.jsx(Kd,{className:"h-5 w-5 mr-2"}),"Payment Method"]})}),o.jsx(oe,{children:o.jsxs("div",{className:"flex items-center justify-between",children:[o.jsxs("div",{className:"flex items-center",children:[o.jsx(Kd,{className:"h-8 w-8 text-gray-400 mr-3"}),o.jsxs("div",{children:[o.jsxs("p",{className:"text-white font-semibold",children:["Card ending in ",t.paymentMethod]}),o.jsx("p",{className:"text-gray-400 text-sm",children:"Payment processed successfully"})]})]}),o.jsx(Ke,{variant:"secondary",className:"bg-green-600 text-white",children:"Paid"})]})})]}),o.jsxs("div",{className:"space-y-3",children:[o.jsxs(J,{onClick:d,className:"w-full font-bold transition-all duration-300 focus:outline-none focus:ring-0",style:{backgroundColor:l.primary},children:[o.jsx(ui,{className:"h-4 w-4 mr-2"}),"View Order in Account"]}),o.jsxs(J,{onClick:u,variant:"outline",className:"w-full font-bold transition-all duration-300 border-gray-600 text-gray-300 hover:bg-gray-800 focus:outline-none focus:ring-0",children:[o.jsx(ga,{className:"h-4 w-4 mr-2"}),"Continue Shopping"]})]})]})]}),o.jsx(ne,{className:"bg-gray-900 border-gray-800 mt-8",children:o.jsxs(oe,{className:"p-6",children:[o.jsx("h3",{className:"text-white font-bold mb-3",children:"What's Next?"}),o.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4 text-sm",children:[o.jsxs("div",{className:"flex items-start space-x-3",children:[o.jsx(Hl,{className:"h-5 w-5 mt-0.5",style:{color:l.primary}}),o.jsxs("div",{children:[o.jsx("p",{className:"text-white font-semibold",children:"Order Confirmation"}),o.jsx("p",{className:"text-gray-400",children:"You'll receive an email confirmation shortly"})]})]}),o.jsxs("div",{className:"flex items-start space-x-3",children:[o.jsx(ui,{className:"h-5 w-5 mt-0.5",style:{color:l.primary}}),o.jsxs("div",{children:[o.jsx("p",{className:"text-white font-semibold",children:"Processing"}),o.jsx("p",{className:"text-gray-400",children:"Your order will be processed within 1-2 business days"})]})]}),o.jsxs("div",{className:"flex items-start space-x-3",children:[o.jsx(UM,{className:"h-5 w-5 mt-0.5",style:{color:l.primary}}),o.jsxs("div",{children:[o.jsx("p",{className:"text-white font-semibold",children:"Tracking"}),o.jsx("p",{className:"text-gray-400",children:"You'll receive tracking information once shipped"})]})]})]})]})})]})})}function BL(){return o.jsx("div",{className:"min-h-screen w-full flex items-center justify-center bg-gray-50",children:o.jsx(ne,{className:"w-full max-w-md mx-4",children:o.jsxs(oe,{className:"pt-6",children:[o.jsxs("div",{className:"flex mb-4 gap-2",children:[o.jsx(s_,{className:"h-8 w-8 text-red-500"}),o.jsx("h1",{className:"text-2xl font-bold text-gray-900",children:"404 Page Not Found"})]}),o.jsx("p",{className:"mt-4 text-sm text-gray-600",children:"Did you forget to add the page to the router?"})]})})})}function zL({children:r}){return o.jsx(o.Fragment,{children:r})}function qL(){return o.jsxs(b4,{children:[o.jsx(Nt,{path:"/",component:p3}),o.jsx(Nt,{path:"/music",component:g3}),o.jsx(Nt,{path:"/profile",component:CL}),o.jsx(Nt,{path:"/login",component:IL}),o.jsx(Nt,{path:"/subscribe",component:RL}),o.jsx(Nt,{path:"/support",component:PL}),o.jsx(Nt,{path:"/schedule",component:ML}),o.jsx(Nt,{path:"/features",component:DL}),o.jsx(Nt,{path:"/map",component:OL}),o.jsx(Nt,{path:"/submissions",component:LL}),o.jsx(Nt,{path:"/contact",component:VL}),o.jsx(Nt,{path:"/terms",component:FL}),o.jsx(Nt,{path:"/privacy",component:UL}),o.jsx(Nt,{path:"/order-confirmation",component:$L}),o.jsx(Nt,{component:BL})]})}function HL(){const[r,e]=m.useState(!0);return m.useEffect(()=>(J4(),GD(),console.log("Performance data collection initialized for site-wide monitoring"),()=>{ml.destroy()}),[]),o.jsx(kD,{children:o.jsx(U4,{client:eM,children:o.jsx(TD,{children:o.jsx(vD,{children:o.jsx(u5,{children:o.jsx(wD,{children:o.jsx(fD,{children:o.jsxs(R_,{children:[o.jsx(ED,{}),o.jsx(W5,{}),o.jsx(CD,{siteKey:"",children:o.jsxs(zL,{children:[o.jsx(qL,{}),o.jsx(t1,{isEnabled:r,onToggle:()=>e(!r)}),o.jsx(KD,{showMetrics:!1,logToConsole:!0})]})})]})})})})})})})})}"serviceWorker"in navigator&&window.addEventListener("load",()=>{navigator.serviceWorker.register("/sw.js").then(r=>{console.log("Service Worker registered successfully:",r)}).catch(r=>{console.log("Service Worker registration failed:",r)})});_E.createRoot(document.getElementById("root")).render(o.jsx(xx.StrictMode,{children:o.jsx(HL,{})}));
