var im=r=>{throw TypeError(r)};var Lc=(r,e,t)=>e.has(r)||im("Cannot "+t);var M=(r,e,t)=>(Lc(r,e,"read from private field"),t?t.call(r):e.get(r)),le=(r,e,t)=>e.has(r)?im("Cannot add the same private member more than once"):e instanceof WeakSet?e.add(r):e.set(r,t),Y=(r,e,t,s)=>(Lc(r,e,"write to private field"),s?s.call(r,t):e.set(r,t),t),ve=(r,e,t)=>(Lc(r,e,"access private method"),t);var pa=(r,e,t,s)=>({set _(n){Y(r,e,n,t)},get _(){return M(r,e,s)}});import{r as p,R as T_,s as E_,j as o,P as Pe,c as fn,a as Yg,u as $e,B as N_,b as Kn,d as Ur,e as ue,f as $t,g as vu,h as C_,i as wu,k as mr,l as I_,m as lo,D as _u,C as Tu,n as Xg,o as ji,p as Eu,A as Cl,q as Nu,_ as Cu,O as Il,t as Iu,v as Sl,w as kl,T as Su,x as ku,y as Jg,S as S_,z as Zg,E as ex,F as k_,G as tx,I as rx,H as sx,J as nx,K as ox,L as ix,M as ax,N as j_,Q as A_,U as lx,W as P_,V as R_,X as cx,Y as dx,Z as ux,$ as hx,a0 as fx,a1 as M_,a2 as mx}from"./ui-CmVV_4Rf.js";import{a as D_}from"./vendor-BtP0CW_r.js";(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const n of document.querySelectorAll('link[rel="modulepreload"]'))s(n);new MutationObserver(n=>{for(const i of n)if(i.type==="childList")for(const a of i.addedNodes)a.tagName==="LINK"&&a.rel==="modulepreload"&&s(a)}).observe(document,{childList:!0,subtree:!0});function t(n){const i={};return n.integrity&&(i.integrity=n.integrity),n.referrerPolicy&&(i.referrerPolicy=n.referrerPolicy),n.crossOrigin==="use-credentials"?i.credentials="include":n.crossOrigin==="anonymous"?i.credentials="omit":i.credentials="same-origin",i}function s(n){if(n.ep)return;n.ep=!0;const i=t(n);fetch(n.href,i)}})();var ga={},am;function O_(){if(am)return ga;am=1;var r=D_();return ga.createRoot=r.createRoot,ga.hydrateRoot=r.hydrateRoot,ga}var L_=O_();function V_(r,e){if(r instanceof RegExp)return{keys:!1,pattern:r};var t,s,n,i,a=[],l="",d=r.split("/");for(d[0]||d.shift();n=d.shift();)t=n[0],t==="*"?(a.push(t),l+=n[1]==="?"?"(?:/(.*))?":"/(.*)"):t===":"?(s=n.indexOf("?",1),i=n.indexOf(".",1),a.push(n.substring(1,~s?s:~i?i:n.length)),l+=~s&&!~i?"(?:/([^/]+?))?":"/([^/]+?)",~i&&(l+=(~s?"?":"")+"\\"+n.substring(i))):l+="/"+n;return{keys:a,pattern:new RegExp("^"+l+(e?"(?=$|/)":"/?$"),"i")}}const F_=T_.useInsertionEffect,U_=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u",$_=U_?p.useLayoutEffect:p.useEffect,B_=F_||$_,px=r=>{const e=p.useRef([r,(...t)=>e[0](...t)]).current;return B_(()=>{e[0]=r}),e[1]},z_="popstate",ju="pushState",Au="replaceState",H_="hashchange",lm=[z_,ju,Au,H_],q_=r=>{for(const e of lm)addEventListener(e,r);return()=>{for(const e of lm)removeEventListener(e,r)}},gx=(r,e)=>E_.useSyncExternalStore(q_,r,e),W_=()=>location.search,G_=({ssrSearch:r=""}={})=>gx(W_,()=>r),cm=()=>location.pathname,K_=({ssrPath:r}={})=>gx(cm,r?()=>r:cm),Q_=(r,{replace:e=!1,state:t=null}={})=>history[e?Au:ju](t,"",r),Y_=(r={})=>[K_(r),Q_],dm=Symbol.for("wouter_v3");if(typeof history<"u"&&typeof window[dm]>"u"){for(const r of[ju,Au]){const e=history[r];history[r]=function(){const t=e.apply(this,arguments),s=new Event(r);return s.arguments=arguments,dispatchEvent(s),t}}Object.defineProperty(window,dm,{value:!0})}const X_=(r,e)=>e.toLowerCase().indexOf(r.toLowerCase())?"~"+e:e.slice(r.length)||"/",xx=(r="")=>r==="/"?"":r,J_=(r,e)=>r[0]==="~"?r.slice(1):xx(e)+r,Z_=(r="",e)=>X_(fd(xx(r)),fd(e)),e2=r=>r[0]==="?"?r.slice(1):r,fd=r=>{try{return decodeURI(r)}catch{return r}},t2=r=>fd(e2(r)),yx={hook:Y_,searchHook:G_,parser:V_,base:"",ssrPath:void 0,ssrSearch:void 0,ssrContext:void 0,hrefs:r=>r},bx=p.createContext(yx),co=()=>p.useContext(bx),vx={},wx=p.createContext(vx),r2=()=>p.useContext(wx),jl=r=>{const[e,t]=r.hook(r);return[Z_(r.base,e),px((s,n)=>t(J_(s,r.base),n))]},Ai=()=>jl(co()),s2=()=>{const r=co();return t2(r.searchHook(r))},_x=(r,e,t,s)=>{const{pattern:n,keys:i}=e instanceof RegExp?{keys:!1,pattern:e}:r(e||"*",s),a=n.exec(t)||[],[l,...d]=a;return l!==void 0?[!0,(()=>{const u=i!==!1?Object.fromEntries(i.map((m,x)=>[m,d[x]])):a.groups;let h={...d};return u&&Object.assign(h,u),h})(),...s?[l]:[]]:[!1,null]},n2=({children:r,...e})=>{var h,m;const t=co(),s=e.hook?yx:t;let n=s;const[i,a]=((h=e.ssrPath)==null?void 0:h.split("?"))??[];a&&(e.ssrSearch=a,e.ssrPath=i),e.hrefs=e.hrefs??((m=e.hook)==null?void 0:m.hrefs);let l=p.useRef({}),d=l.current,u=d;for(let x in s){const g=x==="base"?s[x]+(e[x]||""):e[x]||s[x];d===u&&g!==u[x]&&(l.current=u={...u}),u[x]=g,(g!==s[x]||g!==n[x])&&(n=u)}return p.createElement(bx.Provider,{value:n,children:r})},um=({children:r,component:e},t)=>e?p.createElement(e,{params:t}):typeof r=="function"?r(t):r,o2=r=>{let e=p.useRef(vx);const t=e.current;return e.current=Object.keys(r).length!==Object.keys(t).length||Object.entries(r).some(([s,n])=>n!==t[s])?r:t},tr=({path:r,nest:e,match:t,...s})=>{const n=co(),[i]=jl(n),[a,l,d]=t??_x(n.parser,r,i,e),u=o2({...r2(),...l});if(!a)return null;const h=d?p.createElement(n2,{base:d},um(s,u)):um(s,u);return p.createElement(wx.Provider,{value:u,children:h})},Tx=p.forwardRef((r,e)=>{const t=co(),[s,n]=jl(t),{to:i="",href:a=i,onClick:l,asChild:d,children:u,className:h,replace:m,state:x,...g}=r,v=px(w=>{w.ctrlKey||w.metaKey||w.altKey||w.shiftKey||w.button!==0||(l==null||l(w),w.defaultPrevented||(w.preventDefault(),n(a,r)))}),b=t.hrefs(a[0]==="~"?a.slice(1):t.base+a,t);return d&&p.isValidElement(u)?p.cloneElement(u,{onClick:v,href:b}):p.createElement("a",{...g,onClick:v,href:b,className:h!=null&&h.call?h(s===a):h,children:u,ref:e})}),Ex=r=>Array.isArray(r)?r.flatMap(e=>Ex(e&&e.type===p.Fragment?e.props.children:e)):[r],i2=({children:r,location:e})=>{const t=co(),[s]=jl(t);for(const n of Ex(r)){let i=0;if(p.isValidElement(n)&&(i=_x(t.parser,n.props.path,e||s,n.props.nest))[0])return p.cloneElement(n,{match:i})}return null};var uo=class{constructor(){this.listeners=new Set,this.subscribe=this.subscribe.bind(this)}subscribe(r){return this.listeners.add(r),this.onSubscribe(),()=>{this.listeners.delete(r),this.onUnsubscribe()}}hasListeners(){return this.listeners.size>0}onSubscribe(){}onUnsubscribe(){}},tn=typeof window>"u"||"Deno"in globalThis;function Ct(){}function a2(r,e){return typeof r=="function"?r(e):r}function md(r){return typeof r=="number"&&r>=0&&r!==1/0}function Nx(r,e){return Math.max(r+(e||0)-Date.now(),0)}function ps(r,e){return typeof r=="function"?r(e):r}function Kt(r,e){return typeof r=="function"?r(e):r}function hm(r,e){const{type:t="all",exact:s,fetchStatus:n,predicate:i,queryKey:a,stale:l}=r;if(a){if(s){if(e.queryHash!==Pu(a,e.options))return!1}else if(!ci(e.queryKey,a))return!1}if(t!=="all"){const d=e.isActive();if(t==="active"&&!d||t==="inactive"&&d)return!1}return!(typeof l=="boolean"&&e.isStale()!==l||n&&n!==e.state.fetchStatus||i&&!i(e))}function fm(r,e){const{exact:t,status:s,predicate:n,mutationKey:i}=r;if(i){if(!e.options.mutationKey)return!1;if(t){if(rn(e.options.mutationKey)!==rn(i))return!1}else if(!ci(e.options.mutationKey,i))return!1}return!(s&&e.state.status!==s||n&&!n(e))}function Pu(r,e){return((e==null?void 0:e.queryKeyHashFn)||rn)(r)}function rn(r){return JSON.stringify(r,(e,t)=>pd(t)?Object.keys(t).sort().reduce((s,n)=>(s[n]=t[n],s),{}):t)}function ci(r,e){return r===e?!0:typeof r!=typeof e?!1:r&&e&&typeof r=="object"&&typeof e=="object"?Object.keys(e).every(t=>ci(r[t],e[t])):!1}function Cx(r,e){if(r===e)return r;const t=mm(r)&&mm(e);if(t||pd(r)&&pd(e)){const s=t?r:Object.keys(r),n=s.length,i=t?e:Object.keys(e),a=i.length,l=t?[]:{},d=new Set(s);let u=0;for(let h=0;h<a;h++){const m=t?h:i[h];(!t&&d.has(m)||t)&&r[m]===void 0&&e[m]===void 0?(l[m]=void 0,u++):(l[m]=Cx(r[m],e[m]),l[m]===r[m]&&r[m]!==void 0&&u++)}return n===a&&u===n?r:l}return e}function Ba(r,e){if(!e||Object.keys(r).length!==Object.keys(e).length)return!1;for(const t in r)if(r[t]!==e[t])return!1;return!0}function mm(r){return Array.isArray(r)&&r.length===Object.keys(r).length}function pd(r){if(!pm(r))return!1;const e=r.constructor;if(e===void 0)return!0;const t=e.prototype;return!(!pm(t)||!t.hasOwnProperty("isPrototypeOf")||Object.getPrototypeOf(r)!==Object.prototype)}function pm(r){return Object.prototype.toString.call(r)==="[object Object]"}function l2(r){return new Promise(e=>{setTimeout(e,r)})}function gd(r,e,t){return typeof t.structuralSharing=="function"?t.structuralSharing(r,e):t.structuralSharing!==!1?Cx(r,e):e}function c2(r,e,t=0){const s=[...r,e];return t&&s.length>t?s.slice(1):s}function d2(r,e,t=0){const s=[e,...r];return t&&s.length>t?s.slice(0,-1):s}var Ru=Symbol();function Ix(r,e){return!r.queryFn&&(e!=null&&e.initialPromise)?()=>e.initialPromise:!r.queryFn||r.queryFn===Ru?()=>Promise.reject(new Error(`Missing queryFn: '${r.queryHash}'`)):r.queryFn}function Sx(r,e){return typeof r=="function"?r(...e):!!r}var qs,ns,On,Ug,u2=(Ug=class extends uo{constructor(){super();le(this,qs);le(this,ns);le(this,On);Y(this,On,e=>{if(!tn&&window.addEventListener){const t=()=>e();return window.addEventListener("visibilitychange",t,!1),()=>{window.removeEventListener("visibilitychange",t)}}})}onSubscribe(){M(this,ns)||this.setEventListener(M(this,On))}onUnsubscribe(){var e;this.hasListeners()||((e=M(this,ns))==null||e.call(this),Y(this,ns,void 0))}setEventListener(e){var t;Y(this,On,e),(t=M(this,ns))==null||t.call(this),Y(this,ns,e(s=>{typeof s=="boolean"?this.setFocused(s):this.onFocus()}))}setFocused(e){M(this,qs)!==e&&(Y(this,qs,e),this.onFocus())}onFocus(){const e=this.isFocused();this.listeners.forEach(t=>{t(e)})}isFocused(){var e;return typeof M(this,qs)=="boolean"?M(this,qs):((e=globalThis.document)==null?void 0:e.visibilityState)!=="hidden"}},qs=new WeakMap,ns=new WeakMap,On=new WeakMap,Ug),Mu=new u2,Ln,os,Vn,$g,h2=($g=class extends uo{constructor(){super();le(this,Ln,!0);le(this,os);le(this,Vn);Y(this,Vn,e=>{if(!tn&&window.addEventListener){const t=()=>e(!0),s=()=>e(!1);return window.addEventListener("online",t,!1),window.addEventListener("offline",s,!1),()=>{window.removeEventListener("online",t),window.removeEventListener("offline",s)}}})}onSubscribe(){M(this,os)||this.setEventListener(M(this,Vn))}onUnsubscribe(){var e;this.hasListeners()||((e=M(this,os))==null||e.call(this),Y(this,os,void 0))}setEventListener(e){var t;Y(this,Vn,e),(t=M(this,os))==null||t.call(this),Y(this,os,e(this.setOnline.bind(this)))}setOnline(e){M(this,Ln)!==e&&(Y(this,Ln,e),this.listeners.forEach(s=>{s(e)}))}isOnline(){return M(this,Ln)}},Ln=new WeakMap,os=new WeakMap,Vn=new WeakMap,$g),za=new h2;function xd(){let r,e;const t=new Promise((n,i)=>{r=n,e=i});t.status="pending",t.catch(()=>{});function s(n){Object.assign(t,n),delete t.resolve,delete t.reject}return t.resolve=n=>{s({status:"fulfilled",value:n}),r(n)},t.reject=n=>{s({status:"rejected",reason:n}),e(n)},t}function f2(r){return Math.min(1e3*2**r,3e4)}function kx(r){return(r??"online")==="online"?za.isOnline():!0}var jx=class extends Error{constructor(r){super("CancelledError"),this.revert=r==null?void 0:r.revert,this.silent=r==null?void 0:r.silent}};function Vc(r){return r instanceof jx}function Ax(r){let e=!1,t=0,s=!1,n;const i=xd(),a=b=>{var w;s||(x(new jx(b)),(w=r.abort)==null||w.call(r))},l=()=>{e=!0},d=()=>{e=!1},u=()=>Mu.isFocused()&&(r.networkMode==="always"||za.isOnline())&&r.canRun(),h=()=>kx(r.networkMode)&&r.canRun(),m=b=>{var w;s||(s=!0,(w=r.onSuccess)==null||w.call(r,b),n==null||n(),i.resolve(b))},x=b=>{var w;s||(s=!0,(w=r.onError)==null||w.call(r,b),n==null||n(),i.reject(b))},g=()=>new Promise(b=>{var w;n=k=>{(s||u())&&b(k)},(w=r.onPause)==null||w.call(r)}).then(()=>{var b;n=void 0,s||(b=r.onContinue)==null||b.call(r)}),v=()=>{if(s)return;let b;const w=t===0?r.initialPromise:void 0;try{b=w??r.fn()}catch(k){b=Promise.reject(k)}Promise.resolve(b).then(m).catch(k=>{var $;if(s)return;const T=r.retry??(tn?0:3),_=r.retryDelay??f2,R=typeof _=="function"?_(t,k):_,D=T===!0||typeof T=="number"&&t<T||typeof T=="function"&&T(t,k);if(e||!D){x(k);return}t++,($=r.onFail)==null||$.call(r,t,k),l2(R).then(()=>u()?void 0:g()).then(()=>{e?x(k):v()})})};return{promise:i,cancel:a,continue:()=>(n==null||n(),i),cancelRetry:l,continueRetry:d,canStart:h,start:()=>(h()?v():g().then(v),i)}}var m2=r=>setTimeout(r,0);function p2(){let r=[],e=0,t=l=>{l()},s=l=>{l()},n=m2;const i=l=>{e?r.push(l):n(()=>{t(l)})},a=()=>{const l=r;r=[],l.length&&n(()=>{s(()=>{l.forEach(d=>{t(d)})})})};return{batch:l=>{let d;e++;try{d=l()}finally{e--,e||a()}return d},batchCalls:l=>(...d)=>{i(()=>{l(...d)})},schedule:i,setNotifyFunction:l=>{t=l},setBatchNotifyFunction:l=>{s=l},setScheduler:l=>{n=l}}}var st=p2(),Ws,Bg,Px=(Bg=class{constructor(){le(this,Ws)}destroy(){this.clearGcTimeout()}scheduleGc(){this.clearGcTimeout(),md(this.gcTime)&&Y(this,Ws,setTimeout(()=>{this.optionalRemove()},this.gcTime))}updateGcTime(r){this.gcTime=Math.max(this.gcTime||0,r??(tn?1/0:5*60*1e3))}clearGcTimeout(){M(this,Ws)&&(clearTimeout(M(this,Ws)),Y(this,Ws,void 0))}},Ws=new WeakMap,Bg),Fn,Gs,Ut,Ks,xt,Ci,Qs,Wt,Nr,zg,g2=(zg=class extends Px{constructor(t){super();le(this,Wt);le(this,Fn);le(this,Gs);le(this,Ut);le(this,Ks);le(this,xt);le(this,Ci);le(this,Qs);Y(this,Qs,!1),Y(this,Ci,t.defaultOptions),this.setOptions(t.options),this.observers=[],Y(this,Ks,t.client),Y(this,Ut,M(this,Ks).getQueryCache()),this.queryKey=t.queryKey,this.queryHash=t.queryHash,Y(this,Fn,x2(this.options)),this.state=t.state??M(this,Fn),this.scheduleGc()}get meta(){return this.options.meta}get promise(){var t;return(t=M(this,xt))==null?void 0:t.promise}setOptions(t){this.options={...M(this,Ci),...t},this.updateGcTime(this.options.gcTime)}optionalRemove(){!this.observers.length&&this.state.fetchStatus==="idle"&&M(this,Ut).remove(this)}setData(t,s){const n=gd(this.state.data,t,this.options);return ve(this,Wt,Nr).call(this,{data:n,type:"success",dataUpdatedAt:s==null?void 0:s.updatedAt,manual:s==null?void 0:s.manual}),n}setState(t,s){ve(this,Wt,Nr).call(this,{type:"setState",state:t,setStateOptions:s})}cancel(t){var n,i;const s=(n=M(this,xt))==null?void 0:n.promise;return(i=M(this,xt))==null||i.cancel(t),s?s.then(Ct).catch(Ct):Promise.resolve()}destroy(){super.destroy(),this.cancel({silent:!0})}reset(){this.destroy(),this.setState(M(this,Fn))}isActive(){return this.observers.some(t=>Kt(t.options.enabled,this)!==!1)}isDisabled(){return this.getObserversCount()>0?!this.isActive():this.options.queryFn===Ru||this.state.dataUpdateCount+this.state.errorUpdateCount===0}isStatic(){return this.getObserversCount()>0?this.observers.some(t=>ps(t.options.staleTime,this)==="static"):!1}isStale(){return this.getObserversCount()>0?this.observers.some(t=>t.getCurrentResult().isStale):this.state.data===void 0||this.state.isInvalidated}isStaleByTime(t=0){return this.state.data===void 0?!0:t==="static"?!1:this.state.isInvalidated?!0:!Nx(this.state.dataUpdatedAt,t)}onFocus(){var s;const t=this.observers.find(n=>n.shouldFetchOnWindowFocus());t==null||t.refetch({cancelRefetch:!1}),(s=M(this,xt))==null||s.continue()}onOnline(){var s;const t=this.observers.find(n=>n.shouldFetchOnReconnect());t==null||t.refetch({cancelRefetch:!1}),(s=M(this,xt))==null||s.continue()}addObserver(t){this.observers.includes(t)||(this.observers.push(t),this.clearGcTimeout(),M(this,Ut).notify({type:"observerAdded",query:this,observer:t}))}removeObserver(t){this.observers.includes(t)&&(this.observers=this.observers.filter(s=>s!==t),this.observers.length||(M(this,xt)&&(M(this,Qs)?M(this,xt).cancel({revert:!0}):M(this,xt).cancelRetry()),this.scheduleGc()),M(this,Ut).notify({type:"observerRemoved",query:this,observer:t}))}getObserversCount(){return this.observers.length}invalidate(){this.state.isInvalidated||ve(this,Wt,Nr).call(this,{type:"invalidate"})}fetch(t,s){var h,m,x;if(this.state.fetchStatus!=="idle"){if(this.state.data!==void 0&&(s!=null&&s.cancelRefetch))this.cancel({silent:!0});else if(M(this,xt))return M(this,xt).continueRetry(),M(this,xt).promise}if(t&&this.setOptions(t),!this.options.queryFn){const g=this.observers.find(v=>v.options.queryFn);g&&this.setOptions(g.options)}const n=new AbortController,i=g=>{Object.defineProperty(g,"signal",{enumerable:!0,get:()=>(Y(this,Qs,!0),n.signal)})},a=()=>{const g=Ix(this.options,s),b=(()=>{const w={client:M(this,Ks),queryKey:this.queryKey,meta:this.meta};return i(w),w})();return Y(this,Qs,!1),this.options.persister?this.options.persister(g,b,this):g(b)},d=(()=>{const g={fetchOptions:s,options:this.options,queryKey:this.queryKey,client:M(this,Ks),state:this.state,fetchFn:a};return i(g),g})();(h=this.options.behavior)==null||h.onFetch(d,this),Y(this,Gs,this.state),(this.state.fetchStatus==="idle"||this.state.fetchMeta!==((m=d.fetchOptions)==null?void 0:m.meta))&&ve(this,Wt,Nr).call(this,{type:"fetch",meta:(x=d.fetchOptions)==null?void 0:x.meta});const u=g=>{var v,b,w,k;Vc(g)&&g.silent||ve(this,Wt,Nr).call(this,{type:"error",error:g}),Vc(g)||((b=(v=M(this,Ut).config).onError)==null||b.call(v,g,this),(k=(w=M(this,Ut).config).onSettled)==null||k.call(w,this.state.data,g,this)),this.scheduleGc()};return Y(this,xt,Ax({initialPromise:s==null?void 0:s.initialPromise,fn:d.fetchFn,abort:n.abort.bind(n),onSuccess:g=>{var v,b,w,k;if(g===void 0){u(new Error(`${this.queryHash} data is undefined`));return}try{this.setData(g)}catch(T){u(T);return}(b=(v=M(this,Ut).config).onSuccess)==null||b.call(v,g,this),(k=(w=M(this,Ut).config).onSettled)==null||k.call(w,g,this.state.error,this),this.scheduleGc()},onError:u,onFail:(g,v)=>{ve(this,Wt,Nr).call(this,{type:"failed",failureCount:g,error:v})},onPause:()=>{ve(this,Wt,Nr).call(this,{type:"pause"})},onContinue:()=>{ve(this,Wt,Nr).call(this,{type:"continue"})},retry:d.options.retry,retryDelay:d.options.retryDelay,networkMode:d.options.networkMode,canRun:()=>!0})),M(this,xt).start()}},Fn=new WeakMap,Gs=new WeakMap,Ut=new WeakMap,Ks=new WeakMap,xt=new WeakMap,Ci=new WeakMap,Qs=new WeakMap,Wt=new WeakSet,Nr=function(t){const s=n=>{switch(t.type){case"failed":return{...n,fetchFailureCount:t.failureCount,fetchFailureReason:t.error};case"pause":return{...n,fetchStatus:"paused"};case"continue":return{...n,fetchStatus:"fetching"};case"fetch":return{...n,...Rx(n.data,this.options),fetchMeta:t.meta??null};case"success":return Y(this,Gs,void 0),{...n,data:t.data,dataUpdateCount:n.dataUpdateCount+1,dataUpdatedAt:t.dataUpdatedAt??Date.now(),error:null,isInvalidated:!1,status:"success",...!t.manual&&{fetchStatus:"idle",fetchFailureCount:0,fetchFailureReason:null}};case"error":const i=t.error;return Vc(i)&&i.revert&&M(this,Gs)?{...M(this,Gs),fetchStatus:"idle"}:{...n,error:i,errorUpdateCount:n.errorUpdateCount+1,errorUpdatedAt:Date.now(),fetchFailureCount:n.fetchFailureCount+1,fetchFailureReason:i,fetchStatus:"idle",status:"error"};case"invalidate":return{...n,isInvalidated:!0};case"setState":return{...n,...t.state}}};this.state=s(this.state),st.batch(()=>{this.observers.forEach(n=>{n.onQueryUpdate()}),M(this,Ut).notify({query:this,type:"updated",action:t})})},zg);function Rx(r,e){return{fetchFailureCount:0,fetchFailureReason:null,fetchStatus:kx(e.networkMode)?"fetching":"paused",...r===void 0&&{error:null,status:"pending"}}}function x2(r){const e=typeof r.initialData=="function"?r.initialData():r.initialData,t=e!==void 0,s=t?typeof r.initialDataUpdatedAt=="function"?r.initialDataUpdatedAt():r.initialDataUpdatedAt:0;return{data:e,dataUpdateCount:0,dataUpdatedAt:t?s??Date.now():0,error:null,errorUpdateCount:0,errorUpdatedAt:0,fetchFailureCount:0,fetchFailureReason:null,fetchMeta:null,isInvalidated:!1,status:t?"success":"pending",fetchStatus:"idle"}}var nr,Hg,y2=(Hg=class extends uo{constructor(e={}){super();le(this,nr);this.config=e,Y(this,nr,new Map)}build(e,t,s){const n=t.queryKey,i=t.queryHash??Pu(n,t);let a=this.get(i);return a||(a=new g2({client:e,queryKey:n,queryHash:i,options:e.defaultQueryOptions(t),state:s,defaultOptions:e.getQueryDefaults(n)}),this.add(a)),a}add(e){M(this,nr).has(e.queryHash)||(M(this,nr).set(e.queryHash,e),this.notify({type:"added",query:e}))}remove(e){const t=M(this,nr).get(e.queryHash);t&&(e.destroy(),t===e&&M(this,nr).delete(e.queryHash),this.notify({type:"removed",query:e}))}clear(){st.batch(()=>{this.getAll().forEach(e=>{this.remove(e)})})}get(e){return M(this,nr).get(e)}getAll(){return[...M(this,nr).values()]}find(e){const t={exact:!0,...e};return this.getAll().find(s=>hm(t,s))}findAll(e={}){const t=this.getAll();return Object.keys(e).length>0?t.filter(s=>hm(e,s)):t}notify(e){st.batch(()=>{this.listeners.forEach(t=>{t(e)})})}onFocus(){st.batch(()=>{this.getAll().forEach(e=>{e.onFocus()})})}onOnline(){st.batch(()=>{this.getAll().forEach(e=>{e.onOnline()})})}},nr=new WeakMap,Hg),or,Et,Ys,ir,Xr,qg,b2=(qg=class extends Px{constructor(t){super();le(this,ir);le(this,or);le(this,Et);le(this,Ys);this.mutationId=t.mutationId,Y(this,Et,t.mutationCache),Y(this,or,[]),this.state=t.state||Mx(),this.setOptions(t.options),this.scheduleGc()}setOptions(t){this.options=t,this.updateGcTime(this.options.gcTime)}get meta(){return this.options.meta}addObserver(t){M(this,or).includes(t)||(M(this,or).push(t),this.clearGcTimeout(),M(this,Et).notify({type:"observerAdded",mutation:this,observer:t}))}removeObserver(t){Y(this,or,M(this,or).filter(s=>s!==t)),this.scheduleGc(),M(this,Et).notify({type:"observerRemoved",mutation:this,observer:t})}optionalRemove(){M(this,or).length||(this.state.status==="pending"?this.scheduleGc():M(this,Et).remove(this))}continue(){var t;return((t=M(this,Ys))==null?void 0:t.continue())??this.execute(this.state.variables)}async execute(t){var a,l,d,u,h,m,x,g,v,b,w,k,T,_,R,D,$,S,I,E;const s=()=>{ve(this,ir,Xr).call(this,{type:"continue"})};Y(this,Ys,Ax({fn:()=>this.options.mutationFn?this.options.mutationFn(t):Promise.reject(new Error("No mutationFn found")),onFail:(j,C)=>{ve(this,ir,Xr).call(this,{type:"failed",failureCount:j,error:C})},onPause:()=>{ve(this,ir,Xr).call(this,{type:"pause"})},onContinue:s,retry:this.options.retry??0,retryDelay:this.options.retryDelay,networkMode:this.options.networkMode,canRun:()=>M(this,Et).canRun(this)}));const n=this.state.status==="pending",i=!M(this,Ys).canStart();try{if(n)s();else{ve(this,ir,Xr).call(this,{type:"pending",variables:t,isPaused:i}),await((l=(a=M(this,Et).config).onMutate)==null?void 0:l.call(a,t,this));const C=await((u=(d=this.options).onMutate)==null?void 0:u.call(d,t));C!==this.state.context&&ve(this,ir,Xr).call(this,{type:"pending",context:C,variables:t,isPaused:i})}const j=await M(this,Ys).start();return await((m=(h=M(this,Et).config).onSuccess)==null?void 0:m.call(h,j,t,this.state.context,this)),await((g=(x=this.options).onSuccess)==null?void 0:g.call(x,j,t,this.state.context)),await((b=(v=M(this,Et).config).onSettled)==null?void 0:b.call(v,j,null,this.state.variables,this.state.context,this)),await((k=(w=this.options).onSettled)==null?void 0:k.call(w,j,null,t,this.state.context)),ve(this,ir,Xr).call(this,{type:"success",data:j}),j}catch(j){try{throw await((_=(T=M(this,Et).config).onError)==null?void 0:_.call(T,j,t,this.state.context,this)),await((D=(R=this.options).onError)==null?void 0:D.call(R,j,t,this.state.context)),await((S=($=M(this,Et).config).onSettled)==null?void 0:S.call($,void 0,j,this.state.variables,this.state.context,this)),await((E=(I=this.options).onSettled)==null?void 0:E.call(I,void 0,j,t,this.state.context)),j}finally{ve(this,ir,Xr).call(this,{type:"error",error:j})}}finally{M(this,Et).runNext(this)}}},or=new WeakMap,Et=new WeakMap,Ys=new WeakMap,ir=new WeakSet,Xr=function(t){const s=n=>{switch(t.type){case"failed":return{...n,failureCount:t.failureCount,failureReason:t.error};case"pause":return{...n,isPaused:!0};case"continue":return{...n,isPaused:!1};case"pending":return{...n,context:t.context,data:void 0,failureCount:0,failureReason:null,error:null,isPaused:t.isPaused,status:"pending",variables:t.variables,submittedAt:Date.now()};case"success":return{...n,data:t.data,failureCount:0,failureReason:null,error:null,status:"success",isPaused:!1};case"error":return{...n,data:void 0,error:t.error,failureCount:n.failureCount+1,failureReason:t.error,isPaused:!1,status:"error"}}};this.state=s(this.state),st.batch(()=>{M(this,or).forEach(n=>{n.onMutationUpdate(t)}),M(this,Et).notify({mutation:this,type:"updated",action:t})})},qg);function Mx(){return{context:void 0,data:void 0,error:null,failureCount:0,failureReason:null,isPaused:!1,status:"idle",variables:void 0,submittedAt:0}}var Cr,Gt,Ii,Wg,v2=(Wg=class extends uo{constructor(e={}){super();le(this,Cr);le(this,Gt);le(this,Ii);this.config=e,Y(this,Cr,new Set),Y(this,Gt,new Map),Y(this,Ii,0)}build(e,t,s){const n=new b2({mutationCache:this,mutationId:++pa(this,Ii)._,options:e.defaultMutationOptions(t),state:s});return this.add(n),n}add(e){M(this,Cr).add(e);const t=xa(e);if(typeof t=="string"){const s=M(this,Gt).get(t);s?s.push(e):M(this,Gt).set(t,[e])}this.notify({type:"added",mutation:e})}remove(e){if(M(this,Cr).delete(e)){const t=xa(e);if(typeof t=="string"){const s=M(this,Gt).get(t);if(s)if(s.length>1){const n=s.indexOf(e);n!==-1&&s.splice(n,1)}else s[0]===e&&M(this,Gt).delete(t)}}this.notify({type:"removed",mutation:e})}canRun(e){const t=xa(e);if(typeof t=="string"){const s=M(this,Gt).get(t),n=s==null?void 0:s.find(i=>i.state.status==="pending");return!n||n===e}else return!0}runNext(e){var s;const t=xa(e);if(typeof t=="string"){const n=(s=M(this,Gt).get(t))==null?void 0:s.find(i=>i!==e&&i.state.isPaused);return(n==null?void 0:n.continue())??Promise.resolve()}else return Promise.resolve()}clear(){st.batch(()=>{M(this,Cr).forEach(e=>{this.notify({type:"removed",mutation:e})}),M(this,Cr).clear(),M(this,Gt).clear()})}getAll(){return Array.from(M(this,Cr))}find(e){const t={exact:!0,...e};return this.getAll().find(s=>fm(t,s))}findAll(e={}){return this.getAll().filter(t=>fm(e,t))}notify(e){st.batch(()=>{this.listeners.forEach(t=>{t(e)})})}resumePausedMutations(){const e=this.getAll().filter(t=>t.state.isPaused);return st.batch(()=>Promise.all(e.map(t=>t.continue().catch(Ct))))}},Cr=new WeakMap,Gt=new WeakMap,Ii=new WeakMap,Wg);function xa(r){var e;return(e=r.options.scope)==null?void 0:e.id}function gm(r){return{onFetch:(e,t)=>{var h,m,x,g,v;const s=e.options,n=(x=(m=(h=e.fetchOptions)==null?void 0:h.meta)==null?void 0:m.fetchMore)==null?void 0:x.direction,i=((g=e.state.data)==null?void 0:g.pages)||[],a=((v=e.state.data)==null?void 0:v.pageParams)||[];let l={pages:[],pageParams:[]},d=0;const u=async()=>{let b=!1;const w=_=>{Object.defineProperty(_,"signal",{enumerable:!0,get:()=>(e.signal.aborted?b=!0:e.signal.addEventListener("abort",()=>{b=!0}),e.signal)})},k=Ix(e.options,e.fetchOptions),T=async(_,R,D)=>{if(b)return Promise.reject();if(R==null&&_.pages.length)return Promise.resolve(_);const S=(()=>{const C={client:e.client,queryKey:e.queryKey,pageParam:R,direction:D?"backward":"forward",meta:e.options.meta};return w(C),C})(),I=await k(S),{maxPages:E}=e.options,j=D?d2:c2;return{pages:j(_.pages,I,E),pageParams:j(_.pageParams,R,E)}};if(n&&i.length){const _=n==="backward",R=_?w2:xm,D={pages:i,pageParams:a},$=R(s,D);l=await T(D,$,_)}else{const _=r??i.length;do{const R=d===0?a[0]??s.initialPageParam:xm(s,l);if(d>0&&R==null)break;l=await T(l,R),d++}while(d<_)}return l};e.options.persister?e.fetchFn=()=>{var b,w;return(w=(b=e.options).persister)==null?void 0:w.call(b,u,{client:e.client,queryKey:e.queryKey,meta:e.options.meta,signal:e.signal},t)}:e.fetchFn=u}}}function xm(r,{pages:e,pageParams:t}){const s=e.length-1;return e.length>0?r.getNextPageParam(e[s],e,t[s],t):void 0}function w2(r,{pages:e,pageParams:t}){var s;return e.length>0?(s=r.getPreviousPageParam)==null?void 0:s.call(r,e[0],e,t[0],t):void 0}var Qe,is,as,Un,$n,ls,Bn,zn,Gg,_2=(Gg=class{constructor(r={}){le(this,Qe);le(this,is);le(this,as);le(this,Un);le(this,$n);le(this,ls);le(this,Bn);le(this,zn);Y(this,Qe,r.queryCache||new y2),Y(this,is,r.mutationCache||new v2),Y(this,as,r.defaultOptions||{}),Y(this,Un,new Map),Y(this,$n,new Map),Y(this,ls,0)}mount(){pa(this,ls)._++,M(this,ls)===1&&(Y(this,Bn,Mu.subscribe(async r=>{r&&(await this.resumePausedMutations(),M(this,Qe).onFocus())})),Y(this,zn,za.subscribe(async r=>{r&&(await this.resumePausedMutations(),M(this,Qe).onOnline())})))}unmount(){var r,e;pa(this,ls)._--,M(this,ls)===0&&((r=M(this,Bn))==null||r.call(this),Y(this,Bn,void 0),(e=M(this,zn))==null||e.call(this),Y(this,zn,void 0))}isFetching(r){return M(this,Qe).findAll({...r,fetchStatus:"fetching"}).length}isMutating(r){return M(this,is).findAll({...r,status:"pending"}).length}getQueryData(r){var t;const e=this.defaultQueryOptions({queryKey:r});return(t=M(this,Qe).get(e.queryHash))==null?void 0:t.state.data}ensureQueryData(r){const e=this.defaultQueryOptions(r),t=M(this,Qe).build(this,e),s=t.state.data;return s===void 0?this.fetchQuery(r):(r.revalidateIfStale&&t.isStaleByTime(ps(e.staleTime,t))&&this.prefetchQuery(e),Promise.resolve(s))}getQueriesData(r){return M(this,Qe).findAll(r).map(({queryKey:e,state:t})=>{const s=t.data;return[e,s]})}setQueryData(r,e,t){const s=this.defaultQueryOptions({queryKey:r}),n=M(this,Qe).get(s.queryHash),i=n==null?void 0:n.state.data,a=a2(e,i);if(a!==void 0)return M(this,Qe).build(this,s).setData(a,{...t,manual:!0})}setQueriesData(r,e,t){return st.batch(()=>M(this,Qe).findAll(r).map(({queryKey:s})=>[s,this.setQueryData(s,e,t)]))}getQueryState(r){var t;const e=this.defaultQueryOptions({queryKey:r});return(t=M(this,Qe).get(e.queryHash))==null?void 0:t.state}removeQueries(r){const e=M(this,Qe);st.batch(()=>{e.findAll(r).forEach(t=>{e.remove(t)})})}resetQueries(r,e){const t=M(this,Qe);return st.batch(()=>(t.findAll(r).forEach(s=>{s.reset()}),this.refetchQueries({type:"active",...r},e)))}cancelQueries(r,e={}){const t={revert:!0,...e},s=st.batch(()=>M(this,Qe).findAll(r).map(n=>n.cancel(t)));return Promise.all(s).then(Ct).catch(Ct)}invalidateQueries(r,e={}){return st.batch(()=>(M(this,Qe).findAll(r).forEach(t=>{t.invalidate()}),(r==null?void 0:r.refetchType)==="none"?Promise.resolve():this.refetchQueries({...r,type:(r==null?void 0:r.refetchType)??(r==null?void 0:r.type)??"active"},e)))}refetchQueries(r,e={}){const t={...e,cancelRefetch:e.cancelRefetch??!0},s=st.batch(()=>M(this,Qe).findAll(r).filter(n=>!n.isDisabled()&&!n.isStatic()).map(n=>{let i=n.fetch(void 0,t);return t.throwOnError||(i=i.catch(Ct)),n.state.fetchStatus==="paused"?Promise.resolve():i}));return Promise.all(s).then(Ct)}fetchQuery(r){const e=this.defaultQueryOptions(r);e.retry===void 0&&(e.retry=!1);const t=M(this,Qe).build(this,e);return t.isStaleByTime(ps(e.staleTime,t))?t.fetch(e):Promise.resolve(t.state.data)}prefetchQuery(r){return this.fetchQuery(r).then(Ct).catch(Ct)}fetchInfiniteQuery(r){return r.behavior=gm(r.pages),this.fetchQuery(r)}prefetchInfiniteQuery(r){return this.fetchInfiniteQuery(r).then(Ct).catch(Ct)}ensureInfiniteQueryData(r){return r.behavior=gm(r.pages),this.ensureQueryData(r)}resumePausedMutations(){return za.isOnline()?M(this,is).resumePausedMutations():Promise.resolve()}getQueryCache(){return M(this,Qe)}getMutationCache(){return M(this,is)}getDefaultOptions(){return M(this,as)}setDefaultOptions(r){Y(this,as,r)}setQueryDefaults(r,e){M(this,Un).set(rn(r),{queryKey:r,defaultOptions:e})}getQueryDefaults(r){const e=[...M(this,Un).values()],t={};return e.forEach(s=>{ci(r,s.queryKey)&&Object.assign(t,s.defaultOptions)}),t}setMutationDefaults(r,e){M(this,$n).set(rn(r),{mutationKey:r,defaultOptions:e})}getMutationDefaults(r){const e=[...M(this,$n).values()],t={};return e.forEach(s=>{ci(r,s.mutationKey)&&Object.assign(t,s.defaultOptions)}),t}defaultQueryOptions(r){if(r._defaulted)return r;const e={...M(this,as).queries,...this.getQueryDefaults(r.queryKey),...r,_defaulted:!0};return e.queryHash||(e.queryHash=Pu(e.queryKey,e)),e.refetchOnReconnect===void 0&&(e.refetchOnReconnect=e.networkMode!=="always"),e.throwOnError===void 0&&(e.throwOnError=!!e.suspense),!e.networkMode&&e.persister&&(e.networkMode="offlineFirst"),e.queryFn===Ru&&(e.enabled=!1),e}defaultMutationOptions(r){return r!=null&&r._defaulted?r:{...M(this,as).mutations,...(r==null?void 0:r.mutationKey)&&this.getMutationDefaults(r.mutationKey),...r,_defaulted:!0}}clear(){M(this,Qe).clear(),M(this,is).clear()}},Qe=new WeakMap,is=new WeakMap,as=new WeakMap,Un=new WeakMap,$n=new WeakMap,ls=new WeakMap,Bn=new WeakMap,zn=new WeakMap,Gg),St,Ie,Si,Nt,Xs,Hn,cs,ds,ki,qn,Wn,Js,Zs,us,Gn,De,zo,yd,bd,vd,wd,_d,Td,Ed,Dx,Kg,T2=(Kg=class extends uo{constructor(e,t){super();le(this,De);le(this,St);le(this,Ie);le(this,Si);le(this,Nt);le(this,Xs);le(this,Hn);le(this,cs);le(this,ds);le(this,ki);le(this,qn);le(this,Wn);le(this,Js);le(this,Zs);le(this,us);le(this,Gn,new Set);this.options=t,Y(this,St,e),Y(this,ds,null),Y(this,cs,xd()),this.options.experimental_prefetchInRender||M(this,cs).reject(new Error("experimental_prefetchInRender feature flag is not enabled")),this.bindMethods(),this.setOptions(t)}bindMethods(){this.refetch=this.refetch.bind(this)}onSubscribe(){this.listeners.size===1&&(M(this,Ie).addObserver(this),ym(M(this,Ie),this.options)?ve(this,De,zo).call(this):this.updateResult(),ve(this,De,wd).call(this))}onUnsubscribe(){this.hasListeners()||this.destroy()}shouldFetchOnReconnect(){return Nd(M(this,Ie),this.options,this.options.refetchOnReconnect)}shouldFetchOnWindowFocus(){return Nd(M(this,Ie),this.options,this.options.refetchOnWindowFocus)}destroy(){this.listeners=new Set,ve(this,De,_d).call(this),ve(this,De,Td).call(this),M(this,Ie).removeObserver(this)}setOptions(e){const t=this.options,s=M(this,Ie);if(this.options=M(this,St).defaultQueryOptions(e),this.options.enabled!==void 0&&typeof this.options.enabled!="boolean"&&typeof this.options.enabled!="function"&&typeof Kt(this.options.enabled,M(this,Ie))!="boolean")throw new Error("Expected enabled to be a boolean or a callback that returns a boolean");ve(this,De,Ed).call(this),M(this,Ie).setOptions(this.options),t._defaulted&&!Ba(this.options,t)&&M(this,St).getQueryCache().notify({type:"observerOptionsUpdated",query:M(this,Ie),observer:this});const n=this.hasListeners();n&&bm(M(this,Ie),s,this.options,t)&&ve(this,De,zo).call(this),this.updateResult(),n&&(M(this,Ie)!==s||Kt(this.options.enabled,M(this,Ie))!==Kt(t.enabled,M(this,Ie))||ps(this.options.staleTime,M(this,Ie))!==ps(t.staleTime,M(this,Ie)))&&ve(this,De,yd).call(this);const i=ve(this,De,bd).call(this);n&&(M(this,Ie)!==s||Kt(this.options.enabled,M(this,Ie))!==Kt(t.enabled,M(this,Ie))||i!==M(this,us))&&ve(this,De,vd).call(this,i)}getOptimisticResult(e){const t=M(this,St).getQueryCache().build(M(this,St),e),s=this.createResult(t,e);return N2(this,s)&&(Y(this,Nt,s),Y(this,Hn,this.options),Y(this,Xs,M(this,Ie).state)),s}getCurrentResult(){return M(this,Nt)}trackResult(e,t){return new Proxy(e,{get:(s,n)=>(this.trackProp(n),t==null||t(n),Reflect.get(s,n))})}trackProp(e){M(this,Gn).add(e)}getCurrentQuery(){return M(this,Ie)}refetch({...e}={}){return this.fetch({...e})}fetchOptimistic(e){const t=M(this,St).defaultQueryOptions(e),s=M(this,St).getQueryCache().build(M(this,St),t);return s.fetch().then(()=>this.createResult(s,t))}fetch(e){return ve(this,De,zo).call(this,{...e,cancelRefetch:e.cancelRefetch??!0}).then(()=>(this.updateResult(),M(this,Nt)))}createResult(e,t){var E;const s=M(this,Ie),n=this.options,i=M(this,Nt),a=M(this,Xs),l=M(this,Hn),u=e!==s?e.state:M(this,Si),{state:h}=e;let m={...h},x=!1,g;if(t._optimisticResults){const j=this.hasListeners(),C=!j&&ym(e,t),A=j&&bm(e,s,t,n);(C||A)&&(m={...m,...Rx(h.data,e.options)}),t._optimisticResults==="isRestoring"&&(m.fetchStatus="idle")}let{error:v,errorUpdatedAt:b,status:w}=m;g=m.data;let k=!1;if(t.placeholderData!==void 0&&g===void 0&&w==="pending"){let j;i!=null&&i.isPlaceholderData&&t.placeholderData===(l==null?void 0:l.placeholderData)?(j=i.data,k=!0):j=typeof t.placeholderData=="function"?t.placeholderData((E=M(this,Wn))==null?void 0:E.state.data,M(this,Wn)):t.placeholderData,j!==void 0&&(w="success",g=gd(i==null?void 0:i.data,j,t),x=!0)}if(t.select&&g!==void 0&&!k)if(i&&g===(a==null?void 0:a.data)&&t.select===M(this,ki))g=M(this,qn);else try{Y(this,ki,t.select),g=t.select(g),g=gd(i==null?void 0:i.data,g,t),Y(this,qn,g),Y(this,ds,null)}catch(j){Y(this,ds,j)}M(this,ds)&&(v=M(this,ds),g=M(this,qn),b=Date.now(),w="error");const T=m.fetchStatus==="fetching",_=w==="pending",R=w==="error",D=_&&T,$=g!==void 0,I={status:w,fetchStatus:m.fetchStatus,isPending:_,isSuccess:w==="success",isError:R,isInitialLoading:D,isLoading:D,data:g,dataUpdatedAt:m.dataUpdatedAt,error:v,errorUpdatedAt:b,failureCount:m.fetchFailureCount,failureReason:m.fetchFailureReason,errorUpdateCount:m.errorUpdateCount,isFetched:m.dataUpdateCount>0||m.errorUpdateCount>0,isFetchedAfterMount:m.dataUpdateCount>u.dataUpdateCount||m.errorUpdateCount>u.errorUpdateCount,isFetching:T,isRefetching:T&&!_,isLoadingError:R&&!$,isPaused:m.fetchStatus==="paused",isPlaceholderData:x,isRefetchError:R&&$,isStale:Du(e,t),refetch:this.refetch,promise:M(this,cs)};if(this.options.experimental_prefetchInRender){const j=P=>{I.status==="error"?P.reject(I.error):I.data!==void 0&&P.resolve(I.data)},C=()=>{const P=Y(this,cs,I.promise=xd());j(P)},A=M(this,cs);switch(A.status){case"pending":e.queryHash===s.queryHash&&j(A);break;case"fulfilled":(I.status==="error"||I.data!==A.value)&&C();break;case"rejected":(I.status!=="error"||I.error!==A.reason)&&C();break}}return I}updateResult(){const e=M(this,Nt),t=this.createResult(M(this,Ie),this.options);if(Y(this,Xs,M(this,Ie).state),Y(this,Hn,this.options),M(this,Xs).data!==void 0&&Y(this,Wn,M(this,Ie)),Ba(t,e))return;Y(this,Nt,t);const s=()=>{if(!e)return!0;const{notifyOnChangeProps:n}=this.options,i=typeof n=="function"?n():n;if(i==="all"||!i&&!M(this,Gn).size)return!0;const a=new Set(i??M(this,Gn));return this.options.throwOnError&&a.add("error"),Object.keys(M(this,Nt)).some(l=>{const d=l;return M(this,Nt)[d]!==e[d]&&a.has(d)})};ve(this,De,Dx).call(this,{listeners:s()})}onQueryUpdate(){this.updateResult(),this.hasListeners()&&ve(this,De,wd).call(this)}},St=new WeakMap,Ie=new WeakMap,Si=new WeakMap,Nt=new WeakMap,Xs=new WeakMap,Hn=new WeakMap,cs=new WeakMap,ds=new WeakMap,ki=new WeakMap,qn=new WeakMap,Wn=new WeakMap,Js=new WeakMap,Zs=new WeakMap,us=new WeakMap,Gn=new WeakMap,De=new WeakSet,zo=function(e){ve(this,De,Ed).call(this);let t=M(this,Ie).fetch(this.options,e);return e!=null&&e.throwOnError||(t=t.catch(Ct)),t},yd=function(){ve(this,De,_d).call(this);const e=ps(this.options.staleTime,M(this,Ie));if(tn||M(this,Nt).isStale||!md(e))return;const s=Nx(M(this,Nt).dataUpdatedAt,e)+1;Y(this,Js,setTimeout(()=>{M(this,Nt).isStale||this.updateResult()},s))},bd=function(){return(typeof this.options.refetchInterval=="function"?this.options.refetchInterval(M(this,Ie)):this.options.refetchInterval)??!1},vd=function(e){ve(this,De,Td).call(this),Y(this,us,e),!(tn||Kt(this.options.enabled,M(this,Ie))===!1||!md(M(this,us))||M(this,us)===0)&&Y(this,Zs,setInterval(()=>{(this.options.refetchIntervalInBackground||Mu.isFocused())&&ve(this,De,zo).call(this)},M(this,us)))},wd=function(){ve(this,De,yd).call(this),ve(this,De,vd).call(this,ve(this,De,bd).call(this))},_d=function(){M(this,Js)&&(clearTimeout(M(this,Js)),Y(this,Js,void 0))},Td=function(){M(this,Zs)&&(clearInterval(M(this,Zs)),Y(this,Zs,void 0))},Ed=function(){const e=M(this,St).getQueryCache().build(M(this,St),this.options);if(e===M(this,Ie))return;const t=M(this,Ie);Y(this,Ie,e),Y(this,Si,e.state),this.hasListeners()&&(t==null||t.removeObserver(this),e.addObserver(this))},Dx=function(e){st.batch(()=>{e.listeners&&this.listeners.forEach(t=>{t(M(this,Nt))}),M(this,St).getQueryCache().notify({query:M(this,Ie),type:"observerResultsUpdated"})})},Kg);function E2(r,e){return Kt(e.enabled,r)!==!1&&r.state.data===void 0&&!(r.state.status==="error"&&e.retryOnMount===!1)}function ym(r,e){return E2(r,e)||r.state.data!==void 0&&Nd(r,e,e.refetchOnMount)}function Nd(r,e,t){if(Kt(e.enabled,r)!==!1&&ps(e.staleTime,r)!=="static"){const s=typeof t=="function"?t(r):t;return s==="always"||s!==!1&&Du(r,e)}return!1}function bm(r,e,t,s){return(r!==e||Kt(s.enabled,r)===!1)&&(!t.suspense||r.state.status!=="error")&&Du(r,t)}function Du(r,e){return Kt(e.enabled,r)!==!1&&r.isStaleByTime(ps(e.staleTime,r))}function N2(r,e){return!Ba(r.getCurrentResult(),e)}var hs,fs,kt,Ir,Rr,Ia,Cd,Qg,C2=(Qg=class extends uo{constructor(t,s){super();le(this,Rr);le(this,hs);le(this,fs);le(this,kt);le(this,Ir);Y(this,hs,t),this.setOptions(s),this.bindMethods(),ve(this,Rr,Ia).call(this)}bindMethods(){this.mutate=this.mutate.bind(this),this.reset=this.reset.bind(this)}setOptions(t){var n;const s=this.options;this.options=M(this,hs).defaultMutationOptions(t),Ba(this.options,s)||M(this,hs).getMutationCache().notify({type:"observerOptionsUpdated",mutation:M(this,kt),observer:this}),s!=null&&s.mutationKey&&this.options.mutationKey&&rn(s.mutationKey)!==rn(this.options.mutationKey)?this.reset():((n=M(this,kt))==null?void 0:n.state.status)==="pending"&&M(this,kt).setOptions(this.options)}onUnsubscribe(){var t;this.hasListeners()||(t=M(this,kt))==null||t.removeObserver(this)}onMutationUpdate(t){ve(this,Rr,Ia).call(this),ve(this,Rr,Cd).call(this,t)}getCurrentResult(){return M(this,fs)}reset(){var t;(t=M(this,kt))==null||t.removeObserver(this),Y(this,kt,void 0),ve(this,Rr,Ia).call(this),ve(this,Rr,Cd).call(this)}mutate(t,s){var n;return Y(this,Ir,s),(n=M(this,kt))==null||n.removeObserver(this),Y(this,kt,M(this,hs).getMutationCache().build(M(this,hs),this.options)),M(this,kt).addObserver(this),M(this,kt).execute(t)}},hs=new WeakMap,fs=new WeakMap,kt=new WeakMap,Ir=new WeakMap,Rr=new WeakSet,Ia=function(){var s;const t=((s=M(this,kt))==null?void 0:s.state)??Mx();Y(this,fs,{...t,isPending:t.status==="pending",isSuccess:t.status==="success",isError:t.status==="error",isIdle:t.status==="idle",mutate:this.mutate,reset:this.reset})},Cd=function(t){st.batch(()=>{var s,n,i,a,l,d,u,h;if(M(this,Ir)&&this.hasListeners()){const m=M(this,fs).variables,x=M(this,fs).context;(t==null?void 0:t.type)==="success"?((n=(s=M(this,Ir)).onSuccess)==null||n.call(s,t.data,m,x),(a=(i=M(this,Ir)).onSettled)==null||a.call(i,t.data,null,m,x)):(t==null?void 0:t.type)==="error"&&((d=(l=M(this,Ir)).onError)==null||d.call(l,t.error,m,x),(h=(u=M(this,Ir)).onSettled)==null||h.call(u,void 0,t.error,m,x))}this.listeners.forEach(m=>{m(M(this,fs))})})},Qg),Ox=p.createContext(void 0),Al=r=>{const e=p.useContext(Ox);if(!e)throw new Error("No QueryClient set, use QueryClientProvider to set one");return e},I2=({client:r,children:e})=>(p.useEffect(()=>(r.mount(),()=>{r.unmount()}),[r]),o.jsx(Ox.Provider,{value:r,children:e})),Lx=p.createContext(!1),S2=()=>p.useContext(Lx);Lx.Provider;function k2(){let r=!1;return{clearReset:()=>{r=!1},reset:()=>{r=!0},isReset:()=>r}}var j2=p.createContext(k2()),A2=()=>p.useContext(j2),P2=(r,e)=>{(r.suspense||r.throwOnError||r.experimental_prefetchInRender)&&(e.isReset()||(r.retryOnMount=!1))},R2=r=>{p.useEffect(()=>{r.clearReset()},[r])},M2=({result:r,errorResetBoundary:e,throwOnError:t,query:s,suspense:n})=>r.isError&&!e.isReset()&&!r.isFetching&&s&&(n&&r.data===void 0||Sx(t,[r.error,s])),D2=r=>{if(r.suspense){const e=s=>s==="static"?s:Math.max(s??1e3,1e3),t=r.staleTime;r.staleTime=typeof t=="function"?(...s)=>e(t(...s)):e(t),typeof r.gcTime=="number"&&(r.gcTime=Math.max(r.gcTime,1e3))}},O2=(r,e)=>r.isLoading&&r.isFetching&&!e,L2=(r,e)=>(r==null?void 0:r.suspense)&&e.isPending,vm=(r,e,t)=>e.fetchOptimistic(r).catch(()=>{t.clearReset()});function V2(r,e,t){var m,x,g,v,b;const s=S2(),n=A2(),i=Al(),a=i.defaultQueryOptions(r);(x=(m=i.getDefaultOptions().queries)==null?void 0:m._experimental_beforeQuery)==null||x.call(m,a),a._optimisticResults=s?"isRestoring":"optimistic",D2(a),P2(a,n),R2(n);const l=!i.getQueryCache().get(a.queryHash),[d]=p.useState(()=>new e(i,a)),u=d.getOptimisticResult(a),h=!s&&r.subscribed!==!1;if(p.useSyncExternalStore(p.useCallback(w=>{const k=h?d.subscribe(st.batchCalls(w)):Ct;return d.updateResult(),k},[d,h]),()=>d.getCurrentResult(),()=>d.getCurrentResult()),p.useEffect(()=>{d.setOptions(a)},[a,d]),L2(a,u))throw vm(a,d,n);if(M2({result:u,errorResetBoundary:n,throwOnError:a.throwOnError,query:i.getQueryCache().get(a.queryHash),suspense:a.suspense}))throw u.error;if((v=(g=i.getDefaultOptions().queries)==null?void 0:g._experimental_afterQuery)==null||v.call(g,a,u),a.experimental_prefetchInRender&&!tn&&O2(u,s)){const w=l?vm(a,d,n):(b=i.getQueryCache().get(a.queryHash))==null?void 0:b.promise;w==null||w.catch(Ct).finally(()=>{d.updateResult()})}return a.notifyOnChangeProps?u:d.trackResult(u)}function Ou(r,e){return V2(r,T2)}function Ha(r,e){const t=Al(),[s]=p.useState(()=>new C2(t,r));p.useEffect(()=>{s.setOptions(r)},[s,r]);const n=p.useSyncExternalStore(p.useCallback(a=>s.subscribe(st.batchCalls(a)),[s]),()=>s.getCurrentResult(),()=>s.getCurrentResult()),i=p.useCallback((a,l)=>{s.mutate(a,l).catch(Ct)},[s]);if(n.error&&Sx(s.options.throwOnError,[n.error]))throw n.error;return{...n,mutate:i,mutateAsync:n.mutate}}async function Vx(r){if(!r.ok){const e=await r.text()||r.statusText;throw new Error(`${r.status}: ${e}`)}}async function gs(r,e,t){const s=await fetch(e,{method:r,headers:t?{"Content-Type":"application/json"}:{},body:t?JSON.stringify(t):void 0,credentials:"include"});return await Vx(s),s}const F2=({on401:r})=>async({queryKey:e})=>{const t=await fetch(e[0],{credentials:"include"});await Vx(t);const s=t.headers.get("content-type");if(!s||!s.includes("application/json"))return console.log("Non-JSON response detected, skipping parse"),null;const n=await t.text();if(!n||n.trim()===""||n==="undefined")return console.log("Empty or undefined response, returning null"),null;try{return JSON.parse(n)}catch(i){return console.error("JSON parse error for query:",e[0],"Error:",i,"Response text:",n),null}},U2=new _2({defaultOptions:{queries:{queryFn:F2({on401:"throw"}),refetchInterval:!1,refetchOnWindowFocus:!1,staleTime:1/0,retry:!1},mutations:{retry:!1}}}),$2=1,B2=1e6;let Fc=0;function z2(){return Fc=(Fc+1)%Number.MAX_SAFE_INTEGER,Fc.toString()}const Uc=new Map,wm=r=>{if(Uc.has(r))return;const e=setTimeout(()=>{Uc.delete(r),Yo({type:"REMOVE_TOAST",toastId:r})},B2);Uc.set(r,e)},H2=(r,e)=>{switch(e.type){case"ADD_TOAST":return{...r,toasts:[e.toast,...r.toasts].slice(0,$2)};case"UPDATE_TOAST":return{...r,toasts:r.toasts.map(t=>t.id===e.toast.id?{...t,...e.toast}:t)};case"DISMISS_TOAST":{const{toastId:t}=e;return t?wm(t):r.toasts.forEach(s=>{wm(s.id)}),{...r,toasts:r.toasts.map(s=>s.id===t||t===void 0?{...s,open:!1}:s)}}case"REMOVE_TOAST":return e.toastId===void 0?{...r,toasts:[]}:{...r,toasts:r.toasts.filter(t=>t.id!==e.toastId)}}},Sa=[];let ka={toasts:[]};function Yo(r){ka=H2(ka,r),Sa.forEach(e=>{e(ka)})}function q2({...r}){const e=z2(),t=n=>Yo({type:"UPDATE_TOAST",toast:{...n,id:e}}),s=()=>Yo({type:"DISMISS_TOAST",toastId:e});return Yo({type:"ADD_TOAST",toast:{...r,id:e,open:!0,onOpenChange:n=>{n||s()}}}),{id:e,dismiss:s,update:t}}function xr(){const[r,e]=p.useState(ka);return p.useEffect(()=>(Sa.push(e),()=>{const t=Sa.indexOf(e);t>-1&&Sa.splice(t,1)}),[r]),{...r,toast:q2,dismiss:t=>Yo({type:"DISMISS_TOAST",toastId:t})}}var Fx=Object.freeze({position:"absolute",border:0,width:1,height:1,padding:0,margin:-1,overflow:"hidden",clip:"rect(0, 0, 0, 0)",whiteSpace:"nowrap",wordWrap:"normal"}),W2="VisuallyHidden",Pl=p.forwardRef((r,e)=>o.jsx(Pe.span,{...r,ref:e,style:{...Fx,...r.style}}));Pl.displayName=W2;var G2=Pl,Lu="ToastProvider",[Vu,K2,Q2]=Yg("Toast"),[Ux,D6]=fn("Toast",[Q2]),[Y2,Rl]=Ux(Lu),$x=r=>{const{__scopeToast:e,label:t="Notification",duration:s=5e3,swipeDirection:n="right",swipeThreshold:i=50,children:a}=r,[l,d]=p.useState(null),[u,h]=p.useState(0),m=p.useRef(!1),x=p.useRef(!1);return t.trim()||console.error(`Invalid prop \`label\` supplied to \`${Lu}\`. Expected non-empty \`string\`.`),o.jsx(Vu.Provider,{scope:e,children:o.jsx(Y2,{scope:e,label:t,duration:s,swipeDirection:n,swipeThreshold:i,toastCount:u,viewport:l,onViewportChange:d,onToastAdd:p.useCallback(()=>h(g=>g+1),[]),onToastRemove:p.useCallback(()=>h(g=>g-1),[]),isFocusedToastEscapeKeyDownRef:m,isClosePausedRef:x,children:a})})};$x.displayName=Lu;var Bx="ToastViewport",X2=["F8"],Id="toast.viewportPause",Sd="toast.viewportResume",zx=p.forwardRef((r,e)=>{const{__scopeToast:t,hotkey:s=X2,label:n="Notifications ({hotkey})",...i}=r,a=Rl(Bx,t),l=K2(t),d=p.useRef(null),u=p.useRef(null),h=p.useRef(null),m=p.useRef(null),x=$e(e,m,a.onViewportChange),g=s.join("+").replace(/Key/g,"").replace(/Digit/g,""),v=a.toastCount>0;p.useEffect(()=>{const w=k=>{var _;s.length!==0&&s.every(R=>k[R]||k.code===R)&&((_=m.current)==null||_.focus())};return document.addEventListener("keydown",w),()=>document.removeEventListener("keydown",w)},[s]),p.useEffect(()=>{const w=d.current,k=m.current;if(v&&w&&k){const T=()=>{if(!a.isClosePausedRef.current){const $=new CustomEvent(Id);k.dispatchEvent($),a.isClosePausedRef.current=!0}},_=()=>{if(a.isClosePausedRef.current){const $=new CustomEvent(Sd);k.dispatchEvent($),a.isClosePausedRef.current=!1}},R=$=>{!w.contains($.relatedTarget)&&_()},D=()=>{w.contains(document.activeElement)||_()};return w.addEventListener("focusin",T),w.addEventListener("focusout",R),w.addEventListener("pointermove",T),w.addEventListener("pointerleave",D),window.addEventListener("blur",T),window.addEventListener("focus",_),()=>{w.removeEventListener("focusin",T),w.removeEventListener("focusout",R),w.removeEventListener("pointermove",T),w.removeEventListener("pointerleave",D),window.removeEventListener("blur",T),window.removeEventListener("focus",_)}}},[v,a.isClosePausedRef]);const b=p.useCallback(({tabbingDirection:w})=>{const T=l().map(_=>{const R=_.ref.current,D=[R,...dT(R)];return w==="forwards"?D:D.reverse()});return(w==="forwards"?T.reverse():T).flat()},[l]);return p.useEffect(()=>{const w=m.current;if(w){const k=T=>{var D,$,S;const _=T.altKey||T.ctrlKey||T.metaKey;if(T.key==="Tab"&&!_){const I=document.activeElement,E=T.shiftKey;if(T.target===w&&E){(D=u.current)==null||D.focus();return}const A=b({tabbingDirection:E?"backwards":"forwards"}),P=A.findIndex(W=>W===I);$c(A.slice(P+1))?T.preventDefault():E?($=u.current)==null||$.focus():(S=h.current)==null||S.focus()}};return w.addEventListener("keydown",k),()=>w.removeEventListener("keydown",k)}},[l,b]),o.jsxs(N_,{ref:d,role:"region","aria-label":n.replace("{hotkey}",g),tabIndex:-1,style:{pointerEvents:v?void 0:"none"},children:[v&&o.jsx(kd,{ref:u,onFocusFromOutsideViewport:()=>{const w=b({tabbingDirection:"forwards"});$c(w)}}),o.jsx(Vu.Slot,{scope:t,children:o.jsx(Pe.ol,{tabIndex:-1,...i,ref:x})}),v&&o.jsx(kd,{ref:h,onFocusFromOutsideViewport:()=>{const w=b({tabbingDirection:"backwards"});$c(w)}})]})});zx.displayName=Bx;var Hx="ToastFocusProxy",kd=p.forwardRef((r,e)=>{const{__scopeToast:t,onFocusFromOutsideViewport:s,...n}=r,i=Rl(Hx,t);return o.jsx(Pl,{"aria-hidden":!0,tabIndex:0,...n,ref:e,style:{position:"fixed"},onFocus:a=>{var u;const l=a.relatedTarget;!((u=i.viewport)!=null&&u.contains(l))&&s()}})});kd.displayName=Hx;var Pi="Toast",J2="toast.swipeStart",Z2="toast.swipeMove",eT="toast.swipeCancel",tT="toast.swipeEnd",qx=p.forwardRef((r,e)=>{const{forceMount:t,open:s,defaultOpen:n,onOpenChange:i,...a}=r,[l,d]=Kn({prop:s,defaultProp:n??!0,onChange:i,caller:Pi});return o.jsx(Ur,{present:t||l,children:o.jsx(nT,{open:l,...a,ref:e,onClose:()=>d(!1),onPause:$t(r.onPause),onResume:$t(r.onResume),onSwipeStart:ue(r.onSwipeStart,u=>{u.currentTarget.setAttribute("data-swipe","start")}),onSwipeMove:ue(r.onSwipeMove,u=>{const{x:h,y:m}=u.detail.delta;u.currentTarget.setAttribute("data-swipe","move"),u.currentTarget.style.setProperty("--radix-toast-swipe-move-x",`${h}px`),u.currentTarget.style.setProperty("--radix-toast-swipe-move-y",`${m}px`)}),onSwipeCancel:ue(r.onSwipeCancel,u=>{u.currentTarget.setAttribute("data-swipe","cancel"),u.currentTarget.style.removeProperty("--radix-toast-swipe-move-x"),u.currentTarget.style.removeProperty("--radix-toast-swipe-move-y"),u.currentTarget.style.removeProperty("--radix-toast-swipe-end-x"),u.currentTarget.style.removeProperty("--radix-toast-swipe-end-y")}),onSwipeEnd:ue(r.onSwipeEnd,u=>{const{x:h,y:m}=u.detail.delta;u.currentTarget.setAttribute("data-swipe","end"),u.currentTarget.style.removeProperty("--radix-toast-swipe-move-x"),u.currentTarget.style.removeProperty("--radix-toast-swipe-move-y"),u.currentTarget.style.setProperty("--radix-toast-swipe-end-x",`${h}px`),u.currentTarget.style.setProperty("--radix-toast-swipe-end-y",`${m}px`),d(!1)})})})});qx.displayName=Pi;var[rT,sT]=Ux(Pi,{onClose(){}}),nT=p.forwardRef((r,e)=>{const{__scopeToast:t,type:s="foreground",duration:n,open:i,onClose:a,onEscapeKeyDown:l,onPause:d,onResume:u,onSwipeStart:h,onSwipeMove:m,onSwipeCancel:x,onSwipeEnd:g,...v}=r,b=Rl(Pi,t),[w,k]=p.useState(null),T=$e(e,W=>k(W)),_=p.useRef(null),R=p.useRef(null),D=n||b.duration,$=p.useRef(0),S=p.useRef(D),I=p.useRef(0),{onToastAdd:E,onToastRemove:j}=b,C=$t(()=>{var oe;(w==null?void 0:w.contains(document.activeElement))&&((oe=b.viewport)==null||oe.focus()),a()}),A=p.useCallback(W=>{!W||W===1/0||(window.clearTimeout(I.current),$.current=new Date().getTime(),I.current=window.setTimeout(C,W))},[C]);p.useEffect(()=>{const W=b.viewport;if(W){const oe=()=>{A(S.current),u==null||u()},U=()=>{const X=new Date().getTime()-$.current;S.current=S.current-X,window.clearTimeout(I.current),d==null||d()};return W.addEventListener(Id,U),W.addEventListener(Sd,oe),()=>{W.removeEventListener(Id,U),W.removeEventListener(Sd,oe)}}},[b.viewport,D,d,u,A]),p.useEffect(()=>{i&&!b.isClosePausedRef.current&&A(D)},[i,D,b.isClosePausedRef,A]),p.useEffect(()=>(E(),()=>j()),[E,j]);const P=p.useMemo(()=>w?Jx(w):null,[w]);return b.viewport?o.jsxs(o.Fragment,{children:[P&&o.jsx(oT,{__scopeToast:t,role:"status","aria-live":s==="foreground"?"assertive":"polite","aria-atomic":!0,children:P}),o.jsx(rT,{scope:t,onClose:C,children:vu.createPortal(o.jsx(Vu.ItemSlot,{scope:t,children:o.jsx(C_,{asChild:!0,onEscapeKeyDown:ue(l,()=>{b.isFocusedToastEscapeKeyDownRef.current||C(),b.isFocusedToastEscapeKeyDownRef.current=!1}),children:o.jsx(Pe.li,{role:"status","aria-live":"off","aria-atomic":!0,tabIndex:0,"data-state":i?"open":"closed","data-swipe-direction":b.swipeDirection,...v,ref:T,style:{userSelect:"none",touchAction:"none",...r.style},onKeyDown:ue(r.onKeyDown,W=>{W.key==="Escape"&&(l==null||l(W.nativeEvent),W.nativeEvent.defaultPrevented||(b.isFocusedToastEscapeKeyDownRef.current=!0,C()))}),onPointerDown:ue(r.onPointerDown,W=>{W.button===0&&(_.current={x:W.clientX,y:W.clientY})}),onPointerMove:ue(r.onPointerMove,W=>{if(!_.current)return;const oe=W.clientX-_.current.x,U=W.clientY-_.current.y,X=!!R.current,xe=["left","right"].includes(b.swipeDirection),V=["left","up"].includes(b.swipeDirection)?Math.min:Math.max,be=xe?V(0,oe):0,ce=xe?0:V(0,U),Ue=W.pointerType==="touch"?10:2,Se={x:be,y:ce},ne={originalEvent:W,delta:Se};X?(R.current=Se,ya(Z2,m,ne,{discrete:!1})):_m(Se,b.swipeDirection,Ue)?(R.current=Se,ya(J2,h,ne,{discrete:!1}),W.target.setPointerCapture(W.pointerId)):(Math.abs(oe)>Ue||Math.abs(U)>Ue)&&(_.current=null)}),onPointerUp:ue(r.onPointerUp,W=>{const oe=R.current,U=W.target;if(U.hasPointerCapture(W.pointerId)&&U.releasePointerCapture(W.pointerId),R.current=null,_.current=null,oe){const X=W.currentTarget,xe={originalEvent:W,delta:oe};_m(oe,b.swipeDirection,b.swipeThreshold)?ya(tT,g,xe,{discrete:!0}):ya(eT,x,xe,{discrete:!0}),X.addEventListener("click",V=>V.preventDefault(),{once:!0})}})})})}),b.viewport)})]}):null}),oT=r=>{const{__scopeToast:e,children:t,...s}=r,n=Rl(Pi,e),[i,a]=p.useState(!1),[l,d]=p.useState(!1);return lT(()=>a(!0)),p.useEffect(()=>{const u=window.setTimeout(()=>d(!0),1e3);return()=>window.clearTimeout(u)},[]),l?null:o.jsx(wu,{asChild:!0,children:o.jsx(Pl,{...s,children:i&&o.jsxs(o.Fragment,{children:[n.label," ",t]})})})},iT="ToastTitle",Wx=p.forwardRef((r,e)=>{const{__scopeToast:t,...s}=r;return o.jsx(Pe.div,{...s,ref:e})});Wx.displayName=iT;var aT="ToastDescription",Gx=p.forwardRef((r,e)=>{const{__scopeToast:t,...s}=r;return o.jsx(Pe.div,{...s,ref:e})});Gx.displayName=aT;var Kx="ToastAction",Qx=p.forwardRef((r,e)=>{const{altText:t,...s}=r;return t.trim()?o.jsx(Xx,{altText:t,asChild:!0,children:o.jsx(Fu,{...s,ref:e})}):(console.error(`Invalid prop \`altText\` supplied to \`${Kx}\`. Expected non-empty \`string\`.`),null)});Qx.displayName=Kx;var Yx="ToastClose",Fu=p.forwardRef((r,e)=>{const{__scopeToast:t,...s}=r,n=sT(Yx,t);return o.jsx(Xx,{asChild:!0,children:o.jsx(Pe.button,{type:"button",...s,ref:e,onClick:ue(r.onClick,n.onClose)})})});Fu.displayName=Yx;var Xx=p.forwardRef((r,e)=>{const{__scopeToast:t,altText:s,...n}=r;return o.jsx(Pe.div,{"data-radix-toast-announce-exclude":"","data-radix-toast-announce-alt":s||void 0,...n,ref:e})});function Jx(r){const e=[];return Array.from(r.childNodes).forEach(s=>{if(s.nodeType===s.TEXT_NODE&&s.textContent&&e.push(s.textContent),cT(s)){const n=s.ariaHidden||s.hidden||s.style.display==="none",i=s.dataset.radixToastAnnounceExclude==="";if(!n)if(i){const a=s.dataset.radixToastAnnounceAlt;a&&e.push(a)}else e.push(...Jx(s))}}),e}function ya(r,e,t,{discrete:s}){const n=t.originalEvent.currentTarget,i=new CustomEvent(r,{bubbles:!0,cancelable:!0,detail:t});e&&n.addEventListener(r,e,{once:!0}),s?I_(n,i):n.dispatchEvent(i)}var _m=(r,e,t=0)=>{const s=Math.abs(r.x),n=Math.abs(r.y),i=s>n;return e==="left"||e==="right"?i&&s>t:!i&&n>t};function lT(r=()=>{}){const e=$t(r);mr(()=>{let t=0,s=0;return t=window.requestAnimationFrame(()=>s=window.requestAnimationFrame(e)),()=>{window.cancelAnimationFrame(t),window.cancelAnimationFrame(s)}},[e])}function cT(r){return r.nodeType===r.ELEMENT_NODE}function dT(r){const e=[],t=document.createTreeWalker(r,NodeFilter.SHOW_ELEMENT,{acceptNode:s=>{const n=s.tagName==="INPUT"&&s.type==="hidden";return s.disabled||s.hidden||n?NodeFilter.FILTER_SKIP:s.tabIndex>=0?NodeFilter.FILTER_ACCEPT:NodeFilter.FILTER_SKIP}});for(;t.nextNode();)e.push(t.currentNode);return e}function $c(r){const e=document.activeElement;return r.some(t=>t===e?!0:(t.focus(),document.activeElement!==e))}var uT=$x,Zx=zx,e0=qx,t0=Wx,r0=Gx,s0=Qx,n0=Fu;function o0(r){var e,t,s="";if(typeof r=="string"||typeof r=="number")s+=r;else if(typeof r=="object")if(Array.isArray(r)){var n=r.length;for(e=0;e<n;e++)r[e]&&(t=o0(r[e]))&&(s&&(s+=" "),s+=t)}else for(t in r)r[t]&&(s&&(s+=" "),s+=t);return s}function i0(){for(var r,e,t=0,s="",n=arguments.length;t<n;t++)(r=arguments[t])&&(e=o0(r))&&(s&&(s+=" "),s+=e);return s}const Tm=r=>typeof r=="boolean"?`${r}`:r===0?"0":r,Em=i0,Ml=(r,e)=>t=>{var s;if((e==null?void 0:e.variants)==null)return Em(r,t==null?void 0:t.class,t==null?void 0:t.className);const{variants:n,defaultVariants:i}=e,a=Object.keys(n).map(u=>{const h=t==null?void 0:t[u],m=i==null?void 0:i[u];if(h===null)return null;const x=Tm(h)||Tm(m);return n[u][x]}),l=t&&Object.entries(t).reduce((u,h)=>{let[m,x]=h;return x===void 0||(u[m]=x),u},{}),d=e==null||(s=e.compoundVariants)===null||s===void 0?void 0:s.reduce((u,h)=>{let{class:m,className:x,...g}=h;return Object.entries(g).every(v=>{let[b,w]=v;return Array.isArray(w)?w.includes({...i,...l}[b]):{...i,...l}[b]===w})?[...u,m,x]:u},[]);return Em(r,a,d,t==null?void 0:t.class,t==null?void 0:t.className)};/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const hT=r=>r.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase(),a0=(...r)=>r.filter((e,t,s)=>!!e&&s.indexOf(e)===t).join(" ");/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */var fT={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const mT=p.forwardRef(({color:r="currentColor",size:e=24,strokeWidth:t=2,absoluteStrokeWidth:s,className:n="",children:i,iconNode:a,...l},d)=>p.createElement("svg",{ref:d,...fT,width:e,height:e,stroke:r,strokeWidth:s?Number(t)*24/Number(e):t,className:a0("lucide",n),...l},[...a.map(([u,h])=>p.createElement(u,h)),...Array.isArray(i)?i:[i]]));/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Z=(r,e)=>{const t=p.forwardRef(({className:s,...n},i)=>p.createElement(mT,{ref:i,iconNode:e,className:a0(`lucide-${hT(r)}`,s),...n}));return t.displayName=`${r}`,t};/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const pT=Z("Archive",[["rect",{width:"20",height:"5",x:"2",y:"3",rx:"1",key:"1wp1u1"}],["path",{d:"M4 8v11a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V8",key:"1s80jp"}],["path",{d:"M10 12h4",key:"a56b0p"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ri=Z("ArrowLeft",[["path",{d:"m12 19-7-7 7-7",key:"1l729n"}],["path",{d:"M19 12H5",key:"x3x0zl"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const xs=Z("Calendar",[["path",{d:"M8 2v4",key:"1cmpym"}],["path",{d:"M16 2v4",key:"4m81vk"}],["rect",{width:"18",height:"18",x:"3",y:"4",rx:"2",key:"1hopcy"}],["path",{d:"M3 10h18",key:"8toen8"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const gT=Z("Camera",[["path",{d:"M14.5 4h-5L7 7H4a2 2 0 0 0-2 2v9a2 2 0 0 0 2 2h16a2 2 0 0 0 2-2V9a2 2 0 0 0-2-2h-3l-2.5-3z",key:"1tc9qg"}],["circle",{cx:"12",cy:"13",r:"3",key:"1vg3eu"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ho=Z("Check",[["path",{d:"M20 6 9 17l-5-5",key:"1gmf2c"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Qn=Z("ChevronDown",[["path",{d:"m6 9 6 6 6-6",key:"qrunsl"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const xT=Z("ChevronLeft",[["path",{d:"m15 18-6-6 6-6",key:"1wnfg3"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const l0=Z("ChevronRight",[["path",{d:"m9 18 6-6-6-6",key:"mthhwq"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const yT=Z("ChevronUp",[["path",{d:"m18 15-6-6-6 6",key:"153udz"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const c0=Z("CircleAlert",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["line",{x1:"12",x2:"12",y1:"8",y2:"12",key:"1pkeuh"}],["line",{x1:"12",x2:"12.01",y1:"16",y2:"16",key:"4dfq90"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Zr=Z("CircleCheckBig",[["path",{d:"M21.801 10A10 10 0 1 1 17 3.335",key:"yps3ct"}],["path",{d:"m9 11 3 3L22 4",key:"1pflzl"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const bT=Z("Circle",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const vT=Z("Copy",[["rect",{width:"14",height:"14",x:"8",y:"8",rx:"2",ry:"2",key:"17jyea"}],["path",{d:"M4 16c-1.1 0-2-.9-2-2V4c0-1.1.9-2 2-2h10c1.1 0 2 .9 2 2",key:"zix9uf"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const di=Z("CreditCard",[["rect",{width:"20",height:"14",x:"2",y:"5",rx:"2",key:"ynyp8z"}],["line",{x1:"2",x2:"22",y1:"10",y2:"10",key:"1b3vmo"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const lr=Z("Crown",[["path",{d:"M11.562 3.266a.5.5 0 0 1 .876 0L15.39 8.87a1 1 0 0 0 1.516.294L21.183 5.5a.5.5 0 0 1 .798.519l-2.834 10.246a1 1 0 0 1-.956.734H5.81a1 1 0 0 1-.957-.734L2.02 6.02a.5.5 0 0 1 .798-.519l4.276 3.664a1 1 0 0 0 1.516-.294z",key:"1vdc57"}],["path",{d:"M5 21h14",key:"11awu3"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const wT=Z("Download",[["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}],["polyline",{points:"7 10 12 15 17 10",key:"2ggqvy"}],["line",{x1:"12",x2:"12",y1:"15",y2:"3",key:"1vk2je"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const _T=Z("EyeOff",[["path",{d:"M10.733 5.076a10.744 10.744 0 0 1 11.205 6.575 1 1 0 0 1 0 .696 10.747 10.747 0 0 1-1.444 2.49",key:"ct8e1f"}],["path",{d:"M14.084 14.158a3 3 0 0 1-4.242-4.242",key:"151rxh"}],["path",{d:"M17.479 17.499a10.75 10.75 0 0 1-15.417-5.151 1 1 0 0 1 0-.696 10.75 10.75 0 0 1 4.446-5.143",key:"13bj9a"}],["path",{d:"m2 2 20 20",key:"1ooewy"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const d0=Z("Eye",[["path",{d:"M2.062 12.348a1 1 0 0 1 0-.696 10.75 10.75 0 0 1 19.876 0 1 1 0 0 1 0 .696 10.75 10.75 0 0 1-19.876 0",key:"1nclc0"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const jd=Z("FileText",[["path",{d:"M15 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V7Z",key:"1rqfz7"}],["path",{d:"M14 2v4a2 2 0 0 0 2 2h4",key:"tnqrlb"}],["path",{d:"M10 9H8",key:"b1mrlr"}],["path",{d:"M16 13H8",key:"t4e002"}],["path",{d:"M16 17H8",key:"z1uh3a"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const TT=Z("Flame",[["path",{d:"M8.5 14.5A2.5 2.5 0 0 0 11 12c0-1.38-.5-2-1-3-1.072-2.143-.224-4.054 2-6 .5 2.5 2 4.9 4 6.5 2 1.6 3 3.5 3 5.5a7 7 0 1 1-14 0c0-1.153.433-2.294 1-3a2.5 2.5 0 0 0 2.5 2.5z",key:"96xj49"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ET=Z("Globe",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M12 2a14.5 14.5 0 0 0 0 20 14.5 14.5 0 0 0 0-20",key:"13o1zl"}],["path",{d:"M2 12h20",key:"9i4pu4"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Sn=Z("Heart",[["path",{d:"M19 14c1.49-1.46 3-3.21 3-5.5A5.5 5.5 0 0 0 16.5 3c-1.76 0-3 .5-4.5 2-1.5-1.5-2.74-2-4.5-2A5.5 5.5 0 0 0 2 8.5c0 2.3 1.5 4.05 3 5.5l7 7Z",key:"c3ymky"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const u0=Z("LoaderCircle",[["path",{d:"M21 12a9 9 0 1 1-6.219-8.56",key:"13zald"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const qa=Z("Lock",[["rect",{width:"18",height:"11",x:"3",y:"11",rx:"2",ry:"2",key:"1w4ew1"}],["path",{d:"M7 11V7a5 5 0 0 1 10 0v4",key:"fwvmzm"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const h0=Z("LogIn",[["path",{d:"M15 3h4a2 2 0 0 1 2 2v14a2 2 0 0 1-2 2h-4",key:"u53s6r"}],["polyline",{points:"10 17 15 12 10 7",key:"1ail0h"}],["line",{x1:"15",x2:"3",y1:"12",y2:"12",key:"v6grx8"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ad=Z("LogOut",[["path",{d:"M9 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h4",key:"1uf3rs"}],["polyline",{points:"16 17 21 12 16 7",key:"1gabdz"}],["line",{x1:"21",x2:"9",y1:"12",y2:"12",key:"1uyos4"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ui=Z("Mail",[["rect",{width:"20",height:"16",x:"2",y:"4",rx:"2",key:"18n3k1"}],["path",{d:"m22 7-8.97 5.7a1.94 1.94 0 0 1-2.06 0L2 7",key:"1ocrg3"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Xo=Z("MapPin",[["path",{d:"M20 10c0 4.993-5.539 10.193-7.399 11.799a1 1 0 0 1-1.202 0C9.539 20.193 4 14.993 4 10a8 8 0 0 1 16 0",key:"1r0f0z"}],["circle",{cx:"12",cy:"10",r:"3",key:"ilqhr7"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const NT=Z("Maximize2",[["polyline",{points:"15 3 21 3 21 9",key:"mznyad"}],["polyline",{points:"9 21 3 21 3 15",key:"1avn1i"}],["line",{x1:"21",x2:"14",y1:"3",y2:"10",key:"ota7mn"}],["line",{x1:"3",x2:"10",y1:"21",y2:"14",key:"1atl0r"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Nm=Z("Menu",[["line",{x1:"4",x2:"20",y1:"12",y2:"12",key:"1e0a9i"}],["line",{x1:"4",x2:"20",y1:"6",y2:"6",key:"1owob3"}],["line",{x1:"4",x2:"20",y1:"18",y2:"18",key:"yk5zj1"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Jo=Z("MessageCircle",[["path",{d:"M7.9 20A9 9 0 1 0 4 16.1L2 22Z",key:"vv11sd"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const CT=Z("MicOff",[["line",{x1:"2",x2:"22",y1:"2",y2:"22",key:"a6p6uj"}],["path",{d:"M18.89 13.23A7.12 7.12 0 0 0 19 12v-2",key:"80xlxr"}],["path",{d:"M5 10v2a7 7 0 0 0 12 5",key:"p2k8kg"}],["path",{d:"M15 9.34V5a3 3 0 0 0-5.68-1.33",key:"1gzdoj"}],["path",{d:"M9 9v3a3 3 0 0 0 5.12 2.12",key:"r2i35w"}],["line",{x1:"12",x2:"12",y1:"19",y2:"22",key:"x3vr5v"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const IT=Z("Minimize2",[["polyline",{points:"4 14 10 14 10 20",key:"11kfnr"}],["polyline",{points:"20 10 14 10 14 4",key:"rlmsce"}],["line",{x1:"14",x2:"21",y1:"10",y2:"3",key:"o5lafz"}],["line",{x1:"3",x2:"10",y1:"21",y2:"14",key:"1atl0r"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ST=Z("Moon",[["path",{d:"M12 3a6 6 0 0 0 9 9 9 9 0 1 1-9-9Z",key:"a7tn18"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Yn=Z("Music",[["path",{d:"M9 18V5l12-2v13",key:"1jmyc2"}],["circle",{cx:"6",cy:"18",r:"3",key:"fqmcym"}],["circle",{cx:"18",cy:"16",r:"3",key:"1hluhg"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Oo=Z("Package",[["path",{d:"M11 21.73a2 2 0 0 0 2 0l7-4A2 2 0 0 0 21 16V8a2 2 0 0 0-1-1.73l-7-4a2 2 0 0 0-2 0l-7 4A2 2 0 0 0 3 8v8a2 2 0 0 0 1 1.73z",key:"1a0edw"}],["path",{d:"M12 22V12",key:"d0xqtd"}],["path",{d:"m3.3 7 7.703 4.734a2 2 0 0 0 1.994 0L20.7 7",key:"yx3hmr"}],["path",{d:"m7.5 4.27 9 5.15",key:"1c824w"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Cm=Z("Palette",[["circle",{cx:"13.5",cy:"6.5",r:".5",fill:"currentColor",key:"1okk4w"}],["circle",{cx:"17.5",cy:"10.5",r:".5",fill:"currentColor",key:"f64h9f"}],["circle",{cx:"8.5",cy:"7.5",r:".5",fill:"currentColor",key:"fotxhn"}],["circle",{cx:"6.5",cy:"12.5",r:".5",fill:"currentColor",key:"qy21gx"}],["path",{d:"M12 2C6.5 2 2 6.5 2 12s4.5 10 10 10c.926 0 1.648-.746 1.648-1.688 0-.437-.18-.835-.437-1.125-.29-.289-.438-.652-.438-1.125a1.64 1.64 0 0 1 1.668-1.668h1.996c3.051 0 5.555-2.503 5.555-5.554C21.965 6.012 17.461 2 12 2z",key:"12rzf8"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Wa=Z("Phone",[["path",{d:"M22 16.92v3a2 2 0 0 1-2.18 2 19.79 19.79 0 0 1-8.63-3.07 19.5 19.5 0 0 1-6-6 19.79 19.79 0 0 1-3.07-8.67A2 2 0 0 1 4.11 2h3a2 2 0 0 1 2 1.72 12.84 12.84 0 0 0 .7 2.81 2 2 0 0 1-.45 2.11L8.09 9.91a16 16 0 0 0 6 6l1.27-1.27a2 2 0 0 1 2.11-.45 12.84 12.84 0 0 0 2.81.7A2 2 0 0 1 22 16.92z",key:"foiqr5"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const kT=Z("Play",[["polygon",{points:"6 3 20 12 6 21 6 3",key:"1oa8hb"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Im=Z("Plus",[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"M12 5v14",key:"s699le"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Uu=Z("Radio",[["path",{d:"M4.9 19.1C1 15.2 1 8.8 4.9 4.9",key:"1vaf9d"}],["path",{d:"M7.8 16.2c-2.3-2.3-2.3-6.1 0-8.5",key:"u1ii0m"}],["circle",{cx:"12",cy:"12",r:"2",key:"1c9p78"}],["path",{d:"M16.2 7.8c2.3 2.3 2.3 6.1 0 8.5",key:"1j5fej"}],["path",{d:"M19.1 4.9C23 8.8 23 15.1 19.1 19",key:"10b0cb"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Sm=Z("RotateCcw",[["path",{d:"M3 12a9 9 0 1 0 9-9 9.75 9.75 0 0 0-6.74 2.74L3 8",key:"1357e3"}],["path",{d:"M3 3v5h5",key:"1xhq8a"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const km=Z("Save",[["path",{d:"M15.2 3a2 2 0 0 1 1.4.6l3.8 3.8a2 2 0 0 1 .6 1.4V19a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2z",key:"1c8476"}],["path",{d:"M17 21v-7a1 1 0 0 0-1-1H8a1 1 0 0 0-1 1v7",key:"1ydtos"}],["path",{d:"M7 3v4a1 1 0 0 0 1 1h7",key:"t51u73"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const hi=Z("Send",[["path",{d:"M14.536 21.686a.5.5 0 0 0 .937-.024l6.5-19a.496.496 0 0 0-.635-.635l-19 6.5a.5.5 0 0 0-.024.937l7.93 3.18a2 2 0 0 1 1.112 1.11z",key:"1ffxy3"}],["path",{d:"m21.854 2.147-10.94 10.939",key:"12cjpa"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const jT=Z("Settings",[["path",{d:"M12.22 2h-.44a2 2 0 0 0-2 2v.18a2 2 0 0 1-1 1.73l-.43.25a2 2 0 0 1-2 0l-.15-.08a2 2 0 0 0-2.73.73l-.22.38a2 2 0 0 0 .73 2.73l.15.1a2 2 0 0 1 1 1.72v.51a2 2 0 0 1-1 1.74l-.15.09a2 2 0 0 0-.73 2.73l.22.38a2 2 0 0 0 2.73.73l.15-.08a2 2 0 0 1 2 0l.43.25a2 2 0 0 1 1 1.73V20a2 2 0 0 0 2 2h.44a2 2 0 0 0 2-2v-.18a2 2 0 0 1 1-1.73l.43-.25a2 2 0 0 1 2 0l.15.08a2 2 0 0 0 2.73-.73l.22-.39a2 2 0 0 0-.73-2.73l-.15-.08a2 2 0 0 1-1-1.74v-.5a2 2 0 0 1 1-1.74l.15-.09a2 2 0 0 0 .73-2.73l-.22-.38a2 2 0 0 0-2.73-.73l-.15.08a2 2 0 0 1-2 0l-.43-.25a2 2 0 0 1-1-1.73V4a2 2 0 0 0-2-2z",key:"1qme2f"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const AT=Z("Share",[["path",{d:"M4 12v8a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2v-8",key:"1b2hhj"}],["polyline",{points:"16 6 12 2 8 6",key:"m901s6"}],["line",{x1:"12",x2:"12",y1:"2",y2:"15",key:"1p0rca"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const jm=Z("Shirt",[["path",{d:"M20.38 3.46 16 2a4 4 0 0 1-8 0L3.62 3.46a2 2 0 0 0-1.34 2.23l.58 3.47a1 1 0 0 0 .99.84H6v10c0 1.1.9 2 2 2h8a2 2 0 0 0 2-2V10h2.15a1 1 0 0 0 .99-.84l.58-3.47a2 2 0 0 0-1.34-2.23z",key:"1wgbhj"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Bc=Z("ShoppingBag",[["path",{d:"M6 2 3 6v14a2 2 0 0 0 2 2h14a2 2 0 0 0 2-2V6l-3-4Z",key:"hou9p0"}],["path",{d:"M3 6h18",key:"d0wm0j"}],["path",{d:"M16 10a4 4 0 0 1-8 0",key:"1ltviw"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const $u=Z("ShoppingCart",[["circle",{cx:"8",cy:"21",r:"1",key:"jimo8o"}],["circle",{cx:"19",cy:"21",r:"1",key:"13723u"}],["path",{d:"M2.05 2.05h2l2.66 12.42a2 2 0 0 0 2 1.58h9.78a2 2 0 0 0 1.95-1.57l1.65-7.43H5.12",key:"9zh506"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Am=Z("Skull",[["path",{d:"m12.5 17-.5-1-.5 1h1z",key:"3me087"}],["path",{d:"M15 22a1 1 0 0 0 1-1v-1a2 2 0 0 0 1.56-3.25 8 8 0 1 0-11.12 0A2 2 0 0 0 8 20v1a1 1 0 0 0 1 1z",key:"1o5pge"}],["circle",{cx:"15",cy:"12",r:"1",key:"1tmaij"}],["circle",{cx:"9",cy:"12",r:"1",key:"1vctgf"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const f0=Z("Sparkles",[["path",{d:"M9.937 15.5A2 2 0 0 0 8.5 14.063l-6.135-1.582a.5.5 0 0 1 0-.962L8.5 9.936A2 2 0 0 0 9.937 8.5l1.582-6.135a.5.5 0 0 1 .963 0L14.063 8.5A2 2 0 0 0 15.5 9.937l6.135 1.581a.5.5 0 0 1 0 .964L15.5 14.063a2 2 0 0 0-1.437 1.437l-1.582 6.135a.5.5 0 0 1-.963 0z",key:"4pj2yx"}],["path",{d:"M20 3v4",key:"1olli1"}],["path",{d:"M22 5h-4",key:"1gvqau"}],["path",{d:"M4 17v2",key:"vumght"}],["path",{d:"M5 18H3",key:"zchphs"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Pm=Z("SquarePen",[["path",{d:"M12 3H5a2 2 0 0 0-2 2v14a2 2 0 0 0 2 2h14a2 2 0 0 0 2-2v-7",key:"1m0v6g"}],["path",{d:"M18.375 2.625a1 1 0 0 1 3 3l-9.013 9.014a2 2 0 0 1-.853.505l-2.873.84a.5.5 0 0 1-.62-.62l.84-2.873a2 2 0 0 1 .506-.852z",key:"ohrbg2"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Mi=Z("Star",[["polygon",{points:"12 2 15.09 8.26 22 9.27 17 14.14 18.18 21.02 12 17.77 5.82 21.02 7 14.14 2 9.27 8.91 8.26 12 2",key:"8f66p6"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const PT=Z("Sun",[["circle",{cx:"12",cy:"12",r:"4",key:"4exip2"}],["path",{d:"M12 2v2",key:"tus03m"}],["path",{d:"M12 20v2",key:"1lh1kg"}],["path",{d:"m4.93 4.93 1.41 1.41",key:"149t6j"}],["path",{d:"m17.66 17.66 1.41 1.41",key:"ptbguv"}],["path",{d:"M2 12h2",key:"1t8f8n"}],["path",{d:"M20 12h2",key:"1q8mjw"}],["path",{d:"m6.34 17.66-1.41 1.41",key:"1m8zz5"}],["path",{d:"m19.07 4.93-1.41 1.41",key:"1shlcs"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const RT=Z("Trash2",[["path",{d:"M3 6h18",key:"d0wm0j"}],["path",{d:"M19 6v14c0 1-1 2-2 2H7c-1 0-2-1-2-2V6",key:"4alrt4"}],["path",{d:"M8 6V4c0-1 1-2 2-2h4c1 0 2 1 2 2v2",key:"v07s0e"}],["line",{x1:"10",x2:"10",y1:"11",y2:"17",key:"1uufr5"}],["line",{x1:"14",x2:"14",y1:"11",y2:"17",key:"xtxkd"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const MT=Z("TreePine",[["path",{d:"m17 14 3 3.3a1 1 0 0 1-.7 1.7H4.7a1 1 0 0 1-.7-1.7L7 14h-.3a1 1 0 0 1-.7-1.7L9 9h-.2A1 1 0 0 1 8 7.3L12 3l4 4.3a1 1 0 0 1-.8 1.7H15l3 3.3a1 1 0 0 1-.7 1.7H17Z",key:"cpyugq"}],["path",{d:"M12 22v-3",key:"kmzjlo"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const DT=Z("TrendingUp",[["polyline",{points:"22 7 13.5 15.5 8.5 10.5 2 17",key:"126l90"}],["polyline",{points:"16 7 22 7 22 13",key:"kwv8wd"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const OT=Z("Upload",[["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}],["polyline",{points:"17 8 12 3 7 8",key:"t8dd8p"}],["line",{x1:"12",x2:"12",y1:"3",y2:"15",key:"widbto"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const m0=Z("UserPlus",[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}],["line",{x1:"19",x2:"19",y1:"8",y2:"14",key:"1bvyxn"}],["line",{x1:"22",x2:"16",y1:"11",y2:"11",key:"1shjgl"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Qt=Z("User",[["path",{d:"M19 21v-2a4 4 0 0 0-4-4H9a4 4 0 0 0-4 4v2",key:"975kel"}],["circle",{cx:"12",cy:"7",r:"4",key:"17ys0d"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Pd=Z("Users",[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}],["path",{d:"M22 21v-2a4 4 0 0 0-3-3.87",key:"kshegd"}],["path",{d:"M16 3.13a4 4 0 0 1 0 7.75",key:"1da9ce"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const LT=Z("Volume2",[["path",{d:"M11 4.702a.705.705 0 0 0-1.203-.498L6.413 7.587A1.4 1.4 0 0 1 5.416 8H3a1 1 0 0 0-1 1v6a1 1 0 0 0 1 1h2.416a1.4 1.4 0 0 1 .997.413l3.383 3.384A.705.705 0 0 0 11 19.298z",key:"uqj9uw"}],["path",{d:"M16 9a5 5 0 0 1 0 6",key:"1q6k2b"}],["path",{d:"M19.364 18.364a9 9 0 0 0 0-12.728",key:"ijwkga"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const VT=Z("VolumeX",[["path",{d:"M11 4.702a.705.705 0 0 0-1.203-.498L6.413 7.587A1.4 1.4 0 0 1 5.416 8H3a1 1 0 0 0-1 1v6a1 1 0 0 0 1 1h2.416a1.4 1.4 0 0 1 .997.413l3.383 3.384A.705.705 0 0 0 11 19.298z",key:"uqj9uw"}],["line",{x1:"22",x2:"16",y1:"9",y2:"15",key:"1ewh16"}],["line",{x1:"16",x2:"22",y1:"9",y2:"15",key:"5ykzw1"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Mr=Z("X",[["path",{d:"M18 6 6 18",key:"1bl5f8"}],["path",{d:"m6 6 12 12",key:"d8bk6v"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const p0=Z("Zap",[["path",{d:"M4 14a1 1 0 0 1-.78-1.63l9.9-10.2a.5.5 0 0 1 .86.46l-1.92 6.02A1 1 0 0 0 13 10h7a1 1 0 0 1 .78 1.63l-9.9 10.2a.5.5 0 0 1-.86-.46l1.92-6.02A1 1 0 0 0 11 14z",key:"1xq2db"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Rm=Z("ZoomIn",[["circle",{cx:"11",cy:"11",r:"8",key:"4ej97u"}],["line",{x1:"21",x2:"16.65",y1:"21",y2:"16.65",key:"13gj7c"}],["line",{x1:"11",x2:"11",y1:"8",y2:"14",key:"1vmskp"}],["line",{x1:"8",x2:"14",y1:"11",y2:"11",key:"durymu"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Mm=Z("ZoomOut",[["circle",{cx:"11",cy:"11",r:"8",key:"4ej97u"}],["line",{x1:"21",x2:"16.65",y1:"21",y2:"16.65",key:"13gj7c"}],["line",{x1:"8",x2:"14",y1:"11",y2:"11",key:"durymu"}]]),Bu="-",FT=r=>{const e=$T(r),{conflictingClassGroups:t,conflictingClassGroupModifiers:s}=r;return{getClassGroupId:a=>{const l=a.split(Bu);return l[0]===""&&l.length!==1&&l.shift(),g0(l,e)||UT(a)},getConflictingClassGroupIds:(a,l)=>{const d=t[a]||[];return l&&s[a]?[...d,...s[a]]:d}}},g0=(r,e)=>{var a;if(r.length===0)return e.classGroupId;const t=r[0],s=e.nextPart.get(t),n=s?g0(r.slice(1),s):void 0;if(n)return n;if(e.validators.length===0)return;const i=r.join(Bu);return(a=e.validators.find(({validator:l})=>l(i)))==null?void 0:a.classGroupId},Dm=/^\[(.+)\]$/,UT=r=>{if(Dm.test(r)){const e=Dm.exec(r)[1],t=e==null?void 0:e.substring(0,e.indexOf(":"));if(t)return"arbitrary.."+t}},$T=r=>{const{theme:e,prefix:t}=r,s={nextPart:new Map,validators:[]};return zT(Object.entries(r.classGroups),t).forEach(([i,a])=>{Rd(a,s,i,e)}),s},Rd=(r,e,t,s)=>{r.forEach(n=>{if(typeof n=="string"){const i=n===""?e:Om(e,n);i.classGroupId=t;return}if(typeof n=="function"){if(BT(n)){Rd(n(s),e,t,s);return}e.validators.push({validator:n,classGroupId:t});return}Object.entries(n).forEach(([i,a])=>{Rd(a,Om(e,i),t,s)})})},Om=(r,e)=>{let t=r;return e.split(Bu).forEach(s=>{t.nextPart.has(s)||t.nextPart.set(s,{nextPart:new Map,validators:[]}),t=t.nextPart.get(s)}),t},BT=r=>r.isThemeGetter,zT=(r,e)=>e?r.map(([t,s])=>{const n=s.map(i=>typeof i=="string"?e+i:typeof i=="object"?Object.fromEntries(Object.entries(i).map(([a,l])=>[e+a,l])):i);return[t,n]}):r,HT=r=>{if(r<1)return{get:()=>{},set:()=>{}};let e=0,t=new Map,s=new Map;const n=(i,a)=>{t.set(i,a),e++,e>r&&(e=0,s=t,t=new Map)};return{get(i){let a=t.get(i);if(a!==void 0)return a;if((a=s.get(i))!==void 0)return n(i,a),a},set(i,a){t.has(i)?t.set(i,a):n(i,a)}}},x0="!",qT=r=>{const{separator:e,experimentalParseClassName:t}=r,s=e.length===1,n=e[0],i=e.length,a=l=>{const d=[];let u=0,h=0,m;for(let w=0;w<l.length;w++){let k=l[w];if(u===0){if(k===n&&(s||l.slice(w,w+i)===e)){d.push(l.slice(h,w)),h=w+i;continue}if(k==="/"){m=w;continue}}k==="["?u++:k==="]"&&u--}const x=d.length===0?l:l.substring(h),g=x.startsWith(x0),v=g?x.substring(1):x,b=m&&m>h?m-h:void 0;return{modifiers:d,hasImportantModifier:g,baseClassName:v,maybePostfixModifierPosition:b}};return t?l=>t({className:l,parseClassName:a}):a},WT=r=>{if(r.length<=1)return r;const e=[];let t=[];return r.forEach(s=>{s[0]==="["?(e.push(...t.sort(),s),t=[]):t.push(s)}),e.push(...t.sort()),e},GT=r=>({cache:HT(r.cacheSize),parseClassName:qT(r),...FT(r)}),KT=/\s+/,QT=(r,e)=>{const{parseClassName:t,getClassGroupId:s,getConflictingClassGroupIds:n}=e,i=[],a=r.trim().split(KT);let l="";for(let d=a.length-1;d>=0;d-=1){const u=a[d],{modifiers:h,hasImportantModifier:m,baseClassName:x,maybePostfixModifierPosition:g}=t(u);let v=!!g,b=s(v?x.substring(0,g):x);if(!b){if(!v){l=u+(l.length>0?" "+l:l);continue}if(b=s(x),!b){l=u+(l.length>0?" "+l:l);continue}v=!1}const w=WT(h).join(":"),k=m?w+x0:w,T=k+b;if(i.includes(T))continue;i.push(T);const _=n(b,v);for(let R=0;R<_.length;++R){const D=_[R];i.push(k+D)}l=u+(l.length>0?" "+l:l)}return l};function YT(){let r=0,e,t,s="";for(;r<arguments.length;)(e=arguments[r++])&&(t=y0(e))&&(s&&(s+=" "),s+=t);return s}const y0=r=>{if(typeof r=="string")return r;let e,t="";for(let s=0;s<r.length;s++)r[s]&&(e=y0(r[s]))&&(t&&(t+=" "),t+=e);return t};function XT(r,...e){let t,s,n,i=a;function a(d){const u=e.reduce((h,m)=>m(h),r());return t=GT(u),s=t.cache.get,n=t.cache.set,i=l,l(d)}function l(d){const u=s(d);if(u)return u;const h=QT(d,t);return n(d,h),h}return function(){return i(YT.apply(null,arguments))}}const ze=r=>{const e=t=>t[r]||[];return e.isThemeGetter=!0,e},b0=/^\[(?:([a-z-]+):)?(.+)\]$/i,JT=/^\d+\/\d+$/,ZT=new Set(["px","full","screen"]),eE=/^(\d+(\.\d+)?)?(xs|sm|md|lg|xl)$/,tE=/\d+(%|px|r?em|[sdl]?v([hwib]|min|max)|pt|pc|in|cm|mm|cap|ch|ex|r?lh|cq(w|h|i|b|min|max))|\b(calc|min|max|clamp)\(.+\)|^0$/,rE=/^(rgba?|hsla?|hwb|(ok)?(lab|lch))\(.+\)$/,sE=/^(inset_)?-?((\d+)?\.?(\d+)[a-z]+|0)_-?((\d+)?\.?(\d+)[a-z]+|0)/,nE=/^(url|image|image-set|cross-fade|element|(repeating-)?(linear|radial|conic)-gradient)\(.+\)$/,Er=r=>jn(r)||ZT.has(r)||JT.test(r),Wr=r=>fo(r,"length",hE),jn=r=>!!r&&!Number.isNaN(Number(r)),zc=r=>fo(r,"number",jn),Lo=r=>!!r&&Number.isInteger(Number(r)),oE=r=>r.endsWith("%")&&jn(r.slice(0,-1)),ye=r=>b0.test(r),Gr=r=>eE.test(r),iE=new Set(["length","size","percentage"]),aE=r=>fo(r,iE,v0),lE=r=>fo(r,"position",v0),cE=new Set(["image","url"]),dE=r=>fo(r,cE,mE),uE=r=>fo(r,"",fE),Vo=()=>!0,fo=(r,e,t)=>{const s=b0.exec(r);return s?s[1]?typeof e=="string"?s[1]===e:e.has(s[1]):t(s[2]):!1},hE=r=>tE.test(r)&&!rE.test(r),v0=()=>!1,fE=r=>sE.test(r),mE=r=>nE.test(r),pE=()=>{const r=ze("colors"),e=ze("spacing"),t=ze("blur"),s=ze("brightness"),n=ze("borderColor"),i=ze("borderRadius"),a=ze("borderSpacing"),l=ze("borderWidth"),d=ze("contrast"),u=ze("grayscale"),h=ze("hueRotate"),m=ze("invert"),x=ze("gap"),g=ze("gradientColorStops"),v=ze("gradientColorStopPositions"),b=ze("inset"),w=ze("margin"),k=ze("opacity"),T=ze("padding"),_=ze("saturate"),R=ze("scale"),D=ze("sepia"),$=ze("skew"),S=ze("space"),I=ze("translate"),E=()=>["auto","contain","none"],j=()=>["auto","hidden","clip","visible","scroll"],C=()=>["auto",ye,e],A=()=>[ye,e],P=()=>["",Er,Wr],W=()=>["auto",jn,ye],oe=()=>["bottom","center","left","left-bottom","left-top","right","right-bottom","right-top","top"],U=()=>["solid","dashed","dotted","double","none"],X=()=>["normal","multiply","screen","overlay","darken","lighten","color-dodge","color-burn","hard-light","soft-light","difference","exclusion","hue","saturation","color","luminosity"],xe=()=>["start","end","center","between","around","evenly","stretch"],V=()=>["","0",ye],be=()=>["auto","avoid","all","avoid-page","page","left","right","column"],ce=()=>[jn,ye];return{cacheSize:500,separator:":",theme:{colors:[Vo],spacing:[Er,Wr],blur:["none","",Gr,ye],brightness:ce(),borderColor:[r],borderRadius:["none","","full",Gr,ye],borderSpacing:A(),borderWidth:P(),contrast:ce(),grayscale:V(),hueRotate:ce(),invert:V(),gap:A(),gradientColorStops:[r],gradientColorStopPositions:[oE,Wr],inset:C(),margin:C(),opacity:ce(),padding:A(),saturate:ce(),scale:ce(),sepia:V(),skew:ce(),space:A(),translate:A()},classGroups:{aspect:[{aspect:["auto","square","video",ye]}],container:["container"],columns:[{columns:[Gr]}],"break-after":[{"break-after":be()}],"break-before":[{"break-before":be()}],"break-inside":[{"break-inside":["auto","avoid","avoid-page","avoid-column"]}],"box-decoration":[{"box-decoration":["slice","clone"]}],box:[{box:["border","content"]}],display:["block","inline-block","inline","flex","inline-flex","table","inline-table","table-caption","table-cell","table-column","table-column-group","table-footer-group","table-header-group","table-row-group","table-row","flow-root","grid","inline-grid","contents","list-item","hidden"],float:[{float:["right","left","none","start","end"]}],clear:[{clear:["left","right","both","none","start","end"]}],isolation:["isolate","isolation-auto"],"object-fit":[{object:["contain","cover","fill","none","scale-down"]}],"object-position":[{object:[...oe(),ye]}],overflow:[{overflow:j()}],"overflow-x":[{"overflow-x":j()}],"overflow-y":[{"overflow-y":j()}],overscroll:[{overscroll:E()}],"overscroll-x":[{"overscroll-x":E()}],"overscroll-y":[{"overscroll-y":E()}],position:["static","fixed","absolute","relative","sticky"],inset:[{inset:[b]}],"inset-x":[{"inset-x":[b]}],"inset-y":[{"inset-y":[b]}],start:[{start:[b]}],end:[{end:[b]}],top:[{top:[b]}],right:[{right:[b]}],bottom:[{bottom:[b]}],left:[{left:[b]}],visibility:["visible","invisible","collapse"],z:[{z:["auto",Lo,ye]}],basis:[{basis:C()}],"flex-direction":[{flex:["row","row-reverse","col","col-reverse"]}],"flex-wrap":[{flex:["wrap","wrap-reverse","nowrap"]}],flex:[{flex:["1","auto","initial","none",ye]}],grow:[{grow:V()}],shrink:[{shrink:V()}],order:[{order:["first","last","none",Lo,ye]}],"grid-cols":[{"grid-cols":[Vo]}],"col-start-end":[{col:["auto",{span:["full",Lo,ye]},ye]}],"col-start":[{"col-start":W()}],"col-end":[{"col-end":W()}],"grid-rows":[{"grid-rows":[Vo]}],"row-start-end":[{row:["auto",{span:[Lo,ye]},ye]}],"row-start":[{"row-start":W()}],"row-end":[{"row-end":W()}],"grid-flow":[{"grid-flow":["row","col","dense","row-dense","col-dense"]}],"auto-cols":[{"auto-cols":["auto","min","max","fr",ye]}],"auto-rows":[{"auto-rows":["auto","min","max","fr",ye]}],gap:[{gap:[x]}],"gap-x":[{"gap-x":[x]}],"gap-y":[{"gap-y":[x]}],"justify-content":[{justify:["normal",...xe()]}],"justify-items":[{"justify-items":["start","end","center","stretch"]}],"justify-self":[{"justify-self":["auto","start","end","center","stretch"]}],"align-content":[{content:["normal",...xe(),"baseline"]}],"align-items":[{items:["start","end","center","baseline","stretch"]}],"align-self":[{self:["auto","start","end","center","stretch","baseline"]}],"place-content":[{"place-content":[...xe(),"baseline"]}],"place-items":[{"place-items":["start","end","center","baseline","stretch"]}],"place-self":[{"place-self":["auto","start","end","center","stretch"]}],p:[{p:[T]}],px:[{px:[T]}],py:[{py:[T]}],ps:[{ps:[T]}],pe:[{pe:[T]}],pt:[{pt:[T]}],pr:[{pr:[T]}],pb:[{pb:[T]}],pl:[{pl:[T]}],m:[{m:[w]}],mx:[{mx:[w]}],my:[{my:[w]}],ms:[{ms:[w]}],me:[{me:[w]}],mt:[{mt:[w]}],mr:[{mr:[w]}],mb:[{mb:[w]}],ml:[{ml:[w]}],"space-x":[{"space-x":[S]}],"space-x-reverse":["space-x-reverse"],"space-y":[{"space-y":[S]}],"space-y-reverse":["space-y-reverse"],w:[{w:["auto","min","max","fit","svw","lvw","dvw",ye,e]}],"min-w":[{"min-w":[ye,e,"min","max","fit"]}],"max-w":[{"max-w":[ye,e,"none","full","min","max","fit","prose",{screen:[Gr]},Gr]}],h:[{h:[ye,e,"auto","min","max","fit","svh","lvh","dvh"]}],"min-h":[{"min-h":[ye,e,"min","max","fit","svh","lvh","dvh"]}],"max-h":[{"max-h":[ye,e,"min","max","fit","svh","lvh","dvh"]}],size:[{size:[ye,e,"auto","min","max","fit"]}],"font-size":[{text:["base",Gr,Wr]}],"font-smoothing":["antialiased","subpixel-antialiased"],"font-style":["italic","not-italic"],"font-weight":[{font:["thin","extralight","light","normal","medium","semibold","bold","extrabold","black",zc]}],"font-family":[{font:[Vo]}],"fvn-normal":["normal-nums"],"fvn-ordinal":["ordinal"],"fvn-slashed-zero":["slashed-zero"],"fvn-figure":["lining-nums","oldstyle-nums"],"fvn-spacing":["proportional-nums","tabular-nums"],"fvn-fraction":["diagonal-fractions","stacked-fractions"],tracking:[{tracking:["tighter","tight","normal","wide","wider","widest",ye]}],"line-clamp":[{"line-clamp":["none",jn,zc]}],leading:[{leading:["none","tight","snug","normal","relaxed","loose",Er,ye]}],"list-image":[{"list-image":["none",ye]}],"list-style-type":[{list:["none","disc","decimal",ye]}],"list-style-position":[{list:["inside","outside"]}],"placeholder-color":[{placeholder:[r]}],"placeholder-opacity":[{"placeholder-opacity":[k]}],"text-alignment":[{text:["left","center","right","justify","start","end"]}],"text-color":[{text:[r]}],"text-opacity":[{"text-opacity":[k]}],"text-decoration":["underline","overline","line-through","no-underline"],"text-decoration-style":[{decoration:[...U(),"wavy"]}],"text-decoration-thickness":[{decoration:["auto","from-font",Er,Wr]}],"underline-offset":[{"underline-offset":["auto",Er,ye]}],"text-decoration-color":[{decoration:[r]}],"text-transform":["uppercase","lowercase","capitalize","normal-case"],"text-overflow":["truncate","text-ellipsis","text-clip"],"text-wrap":[{text:["wrap","nowrap","balance","pretty"]}],indent:[{indent:A()}],"vertical-align":[{align:["baseline","top","middle","bottom","text-top","text-bottom","sub","super",ye]}],whitespace:[{whitespace:["normal","nowrap","pre","pre-line","pre-wrap","break-spaces"]}],break:[{break:["normal","words","all","keep"]}],hyphens:[{hyphens:["none","manual","auto"]}],content:[{content:["none",ye]}],"bg-attachment":[{bg:["fixed","local","scroll"]}],"bg-clip":[{"bg-clip":["border","padding","content","text"]}],"bg-opacity":[{"bg-opacity":[k]}],"bg-origin":[{"bg-origin":["border","padding","content"]}],"bg-position":[{bg:[...oe(),lE]}],"bg-repeat":[{bg:["no-repeat",{repeat:["","x","y","round","space"]}]}],"bg-size":[{bg:["auto","cover","contain",aE]}],"bg-image":[{bg:["none",{"gradient-to":["t","tr","r","br","b","bl","l","tl"]},dE]}],"bg-color":[{bg:[r]}],"gradient-from-pos":[{from:[v]}],"gradient-via-pos":[{via:[v]}],"gradient-to-pos":[{to:[v]}],"gradient-from":[{from:[g]}],"gradient-via":[{via:[g]}],"gradient-to":[{to:[g]}],rounded:[{rounded:[i]}],"rounded-s":[{"rounded-s":[i]}],"rounded-e":[{"rounded-e":[i]}],"rounded-t":[{"rounded-t":[i]}],"rounded-r":[{"rounded-r":[i]}],"rounded-b":[{"rounded-b":[i]}],"rounded-l":[{"rounded-l":[i]}],"rounded-ss":[{"rounded-ss":[i]}],"rounded-se":[{"rounded-se":[i]}],"rounded-ee":[{"rounded-ee":[i]}],"rounded-es":[{"rounded-es":[i]}],"rounded-tl":[{"rounded-tl":[i]}],"rounded-tr":[{"rounded-tr":[i]}],"rounded-br":[{"rounded-br":[i]}],"rounded-bl":[{"rounded-bl":[i]}],"border-w":[{border:[l]}],"border-w-x":[{"border-x":[l]}],"border-w-y":[{"border-y":[l]}],"border-w-s":[{"border-s":[l]}],"border-w-e":[{"border-e":[l]}],"border-w-t":[{"border-t":[l]}],"border-w-r":[{"border-r":[l]}],"border-w-b":[{"border-b":[l]}],"border-w-l":[{"border-l":[l]}],"border-opacity":[{"border-opacity":[k]}],"border-style":[{border:[...U(),"hidden"]}],"divide-x":[{"divide-x":[l]}],"divide-x-reverse":["divide-x-reverse"],"divide-y":[{"divide-y":[l]}],"divide-y-reverse":["divide-y-reverse"],"divide-opacity":[{"divide-opacity":[k]}],"divide-style":[{divide:U()}],"border-color":[{border:[n]}],"border-color-x":[{"border-x":[n]}],"border-color-y":[{"border-y":[n]}],"border-color-s":[{"border-s":[n]}],"border-color-e":[{"border-e":[n]}],"border-color-t":[{"border-t":[n]}],"border-color-r":[{"border-r":[n]}],"border-color-b":[{"border-b":[n]}],"border-color-l":[{"border-l":[n]}],"divide-color":[{divide:[n]}],"outline-style":[{outline:["",...U()]}],"outline-offset":[{"outline-offset":[Er,ye]}],"outline-w":[{outline:[Er,Wr]}],"outline-color":[{outline:[r]}],"ring-w":[{ring:P()}],"ring-w-inset":["ring-inset"],"ring-color":[{ring:[r]}],"ring-opacity":[{"ring-opacity":[k]}],"ring-offset-w":[{"ring-offset":[Er,Wr]}],"ring-offset-color":[{"ring-offset":[r]}],shadow:[{shadow:["","inner","none",Gr,uE]}],"shadow-color":[{shadow:[Vo]}],opacity:[{opacity:[k]}],"mix-blend":[{"mix-blend":[...X(),"plus-lighter","plus-darker"]}],"bg-blend":[{"bg-blend":X()}],filter:[{filter:["","none"]}],blur:[{blur:[t]}],brightness:[{brightness:[s]}],contrast:[{contrast:[d]}],"drop-shadow":[{"drop-shadow":["","none",Gr,ye]}],grayscale:[{grayscale:[u]}],"hue-rotate":[{"hue-rotate":[h]}],invert:[{invert:[m]}],saturate:[{saturate:[_]}],sepia:[{sepia:[D]}],"backdrop-filter":[{"backdrop-filter":["","none"]}],"backdrop-blur":[{"backdrop-blur":[t]}],"backdrop-brightness":[{"backdrop-brightness":[s]}],"backdrop-contrast":[{"backdrop-contrast":[d]}],"backdrop-grayscale":[{"backdrop-grayscale":[u]}],"backdrop-hue-rotate":[{"backdrop-hue-rotate":[h]}],"backdrop-invert":[{"backdrop-invert":[m]}],"backdrop-opacity":[{"backdrop-opacity":[k]}],"backdrop-saturate":[{"backdrop-saturate":[_]}],"backdrop-sepia":[{"backdrop-sepia":[D]}],"border-collapse":[{border:["collapse","separate"]}],"border-spacing":[{"border-spacing":[a]}],"border-spacing-x":[{"border-spacing-x":[a]}],"border-spacing-y":[{"border-spacing-y":[a]}],"table-layout":[{table:["auto","fixed"]}],caption:[{caption:["top","bottom"]}],transition:[{transition:["none","all","","colors","opacity","shadow","transform",ye]}],duration:[{duration:ce()}],ease:[{ease:["linear","in","out","in-out",ye]}],delay:[{delay:ce()}],animate:[{animate:["none","spin","ping","pulse","bounce",ye]}],transform:[{transform:["","gpu","none"]}],scale:[{scale:[R]}],"scale-x":[{"scale-x":[R]}],"scale-y":[{"scale-y":[R]}],rotate:[{rotate:[Lo,ye]}],"translate-x":[{"translate-x":[I]}],"translate-y":[{"translate-y":[I]}],"skew-x":[{"skew-x":[$]}],"skew-y":[{"skew-y":[$]}],"transform-origin":[{origin:["center","top","top-right","right","bottom-right","bottom","bottom-left","left","top-left",ye]}],accent:[{accent:["auto",r]}],appearance:[{appearance:["none","auto"]}],cursor:[{cursor:["auto","default","pointer","wait","text","move","help","not-allowed","none","context-menu","progress","cell","crosshair","vertical-text","alias","copy","no-drop","grab","grabbing","all-scroll","col-resize","row-resize","n-resize","e-resize","s-resize","w-resize","ne-resize","nw-resize","se-resize","sw-resize","ew-resize","ns-resize","nesw-resize","nwse-resize","zoom-in","zoom-out",ye]}],"caret-color":[{caret:[r]}],"pointer-events":[{"pointer-events":["none","auto"]}],resize:[{resize:["none","y","x",""]}],"scroll-behavior":[{scroll:["auto","smooth"]}],"scroll-m":[{"scroll-m":A()}],"scroll-mx":[{"scroll-mx":A()}],"scroll-my":[{"scroll-my":A()}],"scroll-ms":[{"scroll-ms":A()}],"scroll-me":[{"scroll-me":A()}],"scroll-mt":[{"scroll-mt":A()}],"scroll-mr":[{"scroll-mr":A()}],"scroll-mb":[{"scroll-mb":A()}],"scroll-ml":[{"scroll-ml":A()}],"scroll-p":[{"scroll-p":A()}],"scroll-px":[{"scroll-px":A()}],"scroll-py":[{"scroll-py":A()}],"scroll-ps":[{"scroll-ps":A()}],"scroll-pe":[{"scroll-pe":A()}],"scroll-pt":[{"scroll-pt":A()}],"scroll-pr":[{"scroll-pr":A()}],"scroll-pb":[{"scroll-pb":A()}],"scroll-pl":[{"scroll-pl":A()}],"snap-align":[{snap:["start","end","center","align-none"]}],"snap-stop":[{snap:["normal","always"]}],"snap-type":[{snap:["none","x","y","both"]}],"snap-strictness":[{snap:["mandatory","proximity"]}],touch:[{touch:["auto","none","manipulation"]}],"touch-x":[{"touch-pan":["x","left","right"]}],"touch-y":[{"touch-pan":["y","up","down"]}],"touch-pz":["touch-pinch-zoom"],select:[{select:["none","text","all","auto"]}],"will-change":[{"will-change":["auto","scroll","contents","transform",ye]}],fill:[{fill:[r,"none"]}],"stroke-w":[{stroke:[Er,Wr,zc]}],stroke:[{stroke:[r,"none"]}],sr:["sr-only","not-sr-only"],"forced-color-adjust":[{"forced-color-adjust":["auto","none"]}]},conflictingClassGroups:{overflow:["overflow-x","overflow-y"],overscroll:["overscroll-x","overscroll-y"],inset:["inset-x","inset-y","start","end","top","right","bottom","left"],"inset-x":["right","left"],"inset-y":["top","bottom"],flex:["basis","grow","shrink"],gap:["gap-x","gap-y"],p:["px","py","ps","pe","pt","pr","pb","pl"],px:["pr","pl"],py:["pt","pb"],m:["mx","my","ms","me","mt","mr","mb","ml"],mx:["mr","ml"],my:["mt","mb"],size:["w","h"],"font-size":["leading"],"fvn-normal":["fvn-ordinal","fvn-slashed-zero","fvn-figure","fvn-spacing","fvn-fraction"],"fvn-ordinal":["fvn-normal"],"fvn-slashed-zero":["fvn-normal"],"fvn-figure":["fvn-normal"],"fvn-spacing":["fvn-normal"],"fvn-fraction":["fvn-normal"],"line-clamp":["display","overflow"],rounded:["rounded-s","rounded-e","rounded-t","rounded-r","rounded-b","rounded-l","rounded-ss","rounded-se","rounded-ee","rounded-es","rounded-tl","rounded-tr","rounded-br","rounded-bl"],"rounded-s":["rounded-ss","rounded-es"],"rounded-e":["rounded-se","rounded-ee"],"rounded-t":["rounded-tl","rounded-tr"],"rounded-r":["rounded-tr","rounded-br"],"rounded-b":["rounded-br","rounded-bl"],"rounded-l":["rounded-tl","rounded-bl"],"border-spacing":["border-spacing-x","border-spacing-y"],"border-w":["border-w-s","border-w-e","border-w-t","border-w-r","border-w-b","border-w-l"],"border-w-x":["border-w-r","border-w-l"],"border-w-y":["border-w-t","border-w-b"],"border-color":["border-color-s","border-color-e","border-color-t","border-color-r","border-color-b","border-color-l"],"border-color-x":["border-color-r","border-color-l"],"border-color-y":["border-color-t","border-color-b"],"scroll-m":["scroll-mx","scroll-my","scroll-ms","scroll-me","scroll-mt","scroll-mr","scroll-mb","scroll-ml"],"scroll-mx":["scroll-mr","scroll-ml"],"scroll-my":["scroll-mt","scroll-mb"],"scroll-p":["scroll-px","scroll-py","scroll-ps","scroll-pe","scroll-pt","scroll-pr","scroll-pb","scroll-pl"],"scroll-px":["scroll-pr","scroll-pl"],"scroll-py":["scroll-pt","scroll-pb"],touch:["touch-x","touch-y","touch-pz"],"touch-x":["touch"],"touch-y":["touch"],"touch-pz":["touch"]},conflictingClassGroupModifiers:{"font-size":["leading"]}}},gE=XT(pE);function se(...r){return gE(i0(r))}const xE=uT,w0=p.forwardRef(({className:r,...e},t)=>o.jsx(Zx,{ref:t,className:se("fixed top-0 z-[100] flex max-h-screen w-full flex-col-reverse p-4 sm:bottom-0 sm:right-0 sm:top-auto sm:flex-col md:max-w-[420px]",r),...e}));w0.displayName=Zx.displayName;const yE=Ml("group pointer-events-auto relative flex w-full items-center justify-between space-x-4 overflow-hidden rounded-md border p-6 pr-8 shadow-lg transition-all data-[swipe=cancel]:translate-x-0 data-[swipe=end]:translate-x-[var(--radix-toast-swipe-end-x)] data-[swipe=move]:translate-x-[var(--radix-toast-swipe-move-x)] data-[swipe=move]:transition-none data-[state=open]:animate-in data-[state=closed]:animate-out data-[swipe=end]:animate-out data-[state=closed]:fade-out-80 data-[state=closed]:slide-out-to-right-full data-[state=open]:slide-in-from-top-full data-[state=open]:sm:slide-in-from-bottom-full",{variants:{variant:{default:"border bg-background text-foreground",destructive:"destructive group border-destructive bg-destructive text-destructive-foreground"}},defaultVariants:{variant:"default"}}),_0=p.forwardRef(({className:r,variant:e,...t},s)=>o.jsx(e0,{ref:s,className:se(yE({variant:e}),r),...t}));_0.displayName=e0.displayName;const bE=p.forwardRef(({className:r,...e},t)=>o.jsx(s0,{ref:t,className:se("inline-flex h-8 shrink-0 items-center justify-center rounded-md border bg-transparent px-3 text-sm font-medium ring-offset-background transition-colors hover:bg-secondary focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2 disabled:pointer-events-none disabled:opacity-50 group-[.destructive]:border-muted/40 group-[.destructive]:hover:border-destructive/30 group-[.destructive]:hover:bg-destructive group-[.destructive]:hover:text-destructive-foreground group-[.destructive]:focus:ring-destructive",r),...e}));bE.displayName=s0.displayName;const T0=p.forwardRef(({className:r,...e},t)=>o.jsx(n0,{ref:t,className:se("absolute right-2 top-2 rounded-md p-1 text-foreground/50 opacity-0 transition-opacity hover:text-foreground focus:opacity-100 focus:outline-none focus:ring-2 group-hover:opacity-100 group-[.destructive]:text-red-300 group-[.destructive]:hover:text-red-50 group-[.destructive]:focus:ring-red-400 group-[.destructive]:focus:ring-offset-red-600",r),"toast-close":"",...e,children:o.jsx(Mr,{className:"h-4 w-4"})}));T0.displayName=n0.displayName;const E0=p.forwardRef(({className:r,...e},t)=>o.jsx(t0,{ref:t,className:se("text-sm font-semibold",r),...e}));E0.displayName=t0.displayName;const N0=p.forwardRef(({className:r,...e},t)=>o.jsx(r0,{ref:t,className:se("text-sm opacity-90",r),...e}));N0.displayName=r0.displayName;function vE(){const{toasts:r}=xr();return o.jsxs(xE,{children:[r.map(function({id:e,title:t,description:s,action:n,...i}){return o.jsxs(_0,{...i,children:[o.jsxs("div",{className:"grid gap-1",children:[t&&o.jsx(E0,{children:t}),s&&o.jsx(N0,{children:s})]}),n,o.jsx(T0,{})]},e)}),o.jsx(w0,{})]})}var[Dl,O6]=fn("Tooltip",[lo]),Ol=lo(),C0="TooltipProvider",wE=700,Md="tooltip.open",[_E,zu]=Dl(C0),I0=r=>{const{__scopeTooltip:e,delayDuration:t=wE,skipDelayDuration:s=300,disableHoverableContent:n=!1,children:i}=r,a=p.useRef(!0),l=p.useRef(!1),d=p.useRef(0);return p.useEffect(()=>{const u=d.current;return()=>window.clearTimeout(u)},[]),o.jsx(_E,{scope:e,isOpenDelayedRef:a,delayDuration:t,onOpen:p.useCallback(()=>{window.clearTimeout(d.current),a.current=!1},[]),onClose:p.useCallback(()=>{window.clearTimeout(d.current),d.current=window.setTimeout(()=>a.current=!0,s)},[s]),isPointerInTransitRef:l,onPointerInTransitChange:p.useCallback(u=>{l.current=u},[]),disableHoverableContent:n,children:i})};I0.displayName=C0;var fi="Tooltip",[TE,Ll]=Dl(fi),S0=r=>{const{__scopeTooltip:e,children:t,open:s,defaultOpen:n,onOpenChange:i,disableHoverableContent:a,delayDuration:l}=r,d=zu(fi,r.__scopeTooltip),u=Ol(e),[h,m]=p.useState(null),x=ji(),g=p.useRef(0),v=a??d.disableHoverableContent,b=l??d.delayDuration,w=p.useRef(!1),[k,T]=Kn({prop:s,defaultProp:n??!1,onChange:S=>{S?(d.onOpen(),document.dispatchEvent(new CustomEvent(Md))):d.onClose(),i==null||i(S)},caller:fi}),_=p.useMemo(()=>k?w.current?"delayed-open":"instant-open":"closed",[k]),R=p.useCallback(()=>{window.clearTimeout(g.current),g.current=0,w.current=!1,T(!0)},[T]),D=p.useCallback(()=>{window.clearTimeout(g.current),g.current=0,T(!1)},[T]),$=p.useCallback(()=>{window.clearTimeout(g.current),g.current=window.setTimeout(()=>{w.current=!0,T(!0),g.current=0},b)},[b,T]);return p.useEffect(()=>()=>{g.current&&(window.clearTimeout(g.current),g.current=0)},[]),o.jsx(Eu,{...u,children:o.jsx(TE,{scope:e,contentId:x,open:k,stateAttribute:_,trigger:h,onTriggerChange:m,onTriggerEnter:p.useCallback(()=>{d.isOpenDelayedRef.current?$():R()},[d.isOpenDelayedRef,$,R]),onTriggerLeave:p.useCallback(()=>{v?D():(window.clearTimeout(g.current),g.current=0)},[D,v]),onOpen:R,onClose:D,disableHoverableContent:v,children:t})})};S0.displayName=fi;var Dd="TooltipTrigger",k0=p.forwardRef((r,e)=>{const{__scopeTooltip:t,...s}=r,n=Ll(Dd,t),i=zu(Dd,t),a=Ol(t),l=p.useRef(null),d=$e(e,l,n.onTriggerChange),u=p.useRef(!1),h=p.useRef(!1),m=p.useCallback(()=>u.current=!1,[]);return p.useEffect(()=>()=>document.removeEventListener("pointerup",m),[m]),o.jsx(Cl,{asChild:!0,...a,children:o.jsx(Pe.button,{"aria-describedby":n.open?n.contentId:void 0,"data-state":n.stateAttribute,...s,ref:d,onPointerMove:ue(r.onPointerMove,x=>{x.pointerType!=="touch"&&!h.current&&!i.isPointerInTransitRef.current&&(n.onTriggerEnter(),h.current=!0)}),onPointerLeave:ue(r.onPointerLeave,()=>{n.onTriggerLeave(),h.current=!1}),onPointerDown:ue(r.onPointerDown,()=>{n.open&&n.onClose(),u.current=!0,document.addEventListener("pointerup",m,{once:!0})}),onFocus:ue(r.onFocus,()=>{u.current||n.onOpen()}),onBlur:ue(r.onBlur,n.onClose),onClick:ue(r.onClick,n.onClose)})})});k0.displayName=Dd;var EE="TooltipPortal",[L6,NE]=Dl(EE,{forceMount:void 0}),Xn="TooltipContent",j0=p.forwardRef((r,e)=>{const t=NE(Xn,r.__scopeTooltip),{forceMount:s=t.forceMount,side:n="top",...i}=r,a=Ll(Xn,r.__scopeTooltip);return o.jsx(Ur,{present:s||a.open,children:a.disableHoverableContent?o.jsx(A0,{side:n,...i,ref:e}):o.jsx(CE,{side:n,...i,ref:e})})}),CE=p.forwardRef((r,e)=>{const t=Ll(Xn,r.__scopeTooltip),s=zu(Xn,r.__scopeTooltip),n=p.useRef(null),i=$e(e,n),[a,l]=p.useState(null),{trigger:d,onClose:u}=t,h=n.current,{onPointerInTransitChange:m}=s,x=p.useCallback(()=>{l(null),m(!1)},[m]),g=p.useCallback((v,b)=>{const w=v.currentTarget,k={x:v.clientX,y:v.clientY},T=AE(k,w.getBoundingClientRect()),_=PE(k,T),R=RE(b.getBoundingClientRect()),D=DE([..._,...R]);l(D),m(!0)},[m]);return p.useEffect(()=>()=>x(),[x]),p.useEffect(()=>{if(d&&h){const v=w=>g(w,h),b=w=>g(w,d);return d.addEventListener("pointerleave",v),h.addEventListener("pointerleave",b),()=>{d.removeEventListener("pointerleave",v),h.removeEventListener("pointerleave",b)}}},[d,h,g,x]),p.useEffect(()=>{if(a){const v=b=>{const w=b.target,k={x:b.clientX,y:b.clientY},T=(d==null?void 0:d.contains(w))||(h==null?void 0:h.contains(w)),_=!ME(k,a);T?x():_&&(x(),u())};return document.addEventListener("pointermove",v),()=>document.removeEventListener("pointermove",v)}},[d,h,a,u,x]),o.jsx(A0,{...r,ref:i})}),[IE,SE]=Dl(fi,{isInside:!1}),kE=Xg("TooltipContent"),A0=p.forwardRef((r,e)=>{const{__scopeTooltip:t,children:s,"aria-label":n,onEscapeKeyDown:i,onPointerDownOutside:a,...l}=r,d=Ll(Xn,t),u=Ol(t),{onClose:h}=d;return p.useEffect(()=>(document.addEventListener(Md,h),()=>document.removeEventListener(Md,h)),[h]),p.useEffect(()=>{if(d.trigger){const m=x=>{const g=x.target;g!=null&&g.contains(d.trigger)&&h()};return window.addEventListener("scroll",m,{capture:!0}),()=>window.removeEventListener("scroll",m,{capture:!0})}},[d.trigger,h]),o.jsx(_u,{asChild:!0,disableOutsidePointerEvents:!1,onEscapeKeyDown:i,onPointerDownOutside:a,onFocusOutside:m=>m.preventDefault(),onDismiss:h,children:o.jsxs(Tu,{"data-state":d.stateAttribute,...u,...l,ref:e,style:{...l.style,"--radix-tooltip-content-transform-origin":"var(--radix-popper-transform-origin)","--radix-tooltip-content-available-width":"var(--radix-popper-available-width)","--radix-tooltip-content-available-height":"var(--radix-popper-available-height)","--radix-tooltip-trigger-width":"var(--radix-popper-anchor-width)","--radix-tooltip-trigger-height":"var(--radix-popper-anchor-height)"},children:[o.jsx(kE,{children:s}),o.jsx(IE,{scope:t,isInside:!0,children:o.jsx(G2,{id:d.contentId,role:"tooltip",children:n||s})})]})})});j0.displayName=Xn;var P0="TooltipArrow",jE=p.forwardRef((r,e)=>{const{__scopeTooltip:t,...s}=r,n=Ol(t);return SE(P0,t).isInside?null:o.jsx(Nu,{...n,...s,ref:e})});jE.displayName=P0;function AE(r,e){const t=Math.abs(e.top-r.y),s=Math.abs(e.bottom-r.y),n=Math.abs(e.right-r.x),i=Math.abs(e.left-r.x);switch(Math.min(t,s,n,i)){case i:return"left";case n:return"right";case t:return"top";case s:return"bottom";default:throw new Error("unreachable")}}function PE(r,e,t=5){const s=[];switch(e){case"top":s.push({x:r.x-t,y:r.y+t},{x:r.x+t,y:r.y+t});break;case"bottom":s.push({x:r.x-t,y:r.y-t},{x:r.x+t,y:r.y-t});break;case"left":s.push({x:r.x+t,y:r.y-t},{x:r.x+t,y:r.y+t});break;case"right":s.push({x:r.x-t,y:r.y-t},{x:r.x-t,y:r.y+t});break}return s}function RE(r){const{top:e,right:t,bottom:s,left:n}=r;return[{x:n,y:e},{x:t,y:e},{x:t,y:s},{x:n,y:s}]}function ME(r,e){const{x:t,y:s}=r;let n=!1;for(let i=0,a=e.length-1;i<e.length;a=i++){const l=e[i],d=e[a],u=l.x,h=l.y,m=d.x,x=d.y;h>s!=x>s&&t<(m-u)*(s-h)/(x-h)+u&&(n=!n)}return n}function DE(r){const e=r.slice();return e.sort((t,s)=>t.x<s.x?-1:t.x>s.x?1:t.y<s.y?-1:t.y>s.y?1:0),OE(e)}function OE(r){if(r.length<=1)return r.slice();const e=[];for(let s=0;s<r.length;s++){const n=r[s];for(;e.length>=2;){const i=e[e.length-1],a=e[e.length-2];if((i.x-a.x)*(n.y-a.y)>=(i.y-a.y)*(n.x-a.x))e.pop();else break}e.push(n)}e.pop();const t=[];for(let s=r.length-1;s>=0;s--){const n=r[s];for(;t.length>=2;){const i=t[t.length-1],a=t[t.length-2];if((i.x-a.x)*(n.y-a.y)>=(i.y-a.y)*(n.x-a.x))t.pop();else break}t.push(n)}return t.pop(),e.length===1&&t.length===1&&e[0].x===t[0].x&&e[0].y===t[0].y?e:e.concat(t)}var LE=I0,VE=S0,FE=k0,R0=j0;const M0=LE,Hc=VE,qc=FE,ja=p.forwardRef(({className:r,sideOffset:e=4,...t},s)=>o.jsx(R0,{ref:s,sideOffset:e,className:se("z-50 overflow-hidden rounded-md px-3 py-1.5 text-sm shadow-md animate-in fade-in-0 zoom-in-95 data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=closed]:zoom-out-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2","bg-black text-white border border-gray-600 dark:bg-white dark:text-black dark:border-gray-400","shadow-lg backdrop-blur-sm font-medium max-w-xs",r),...t}));ja.displayName=R0.displayName;const UE=p.createContext(void 0);function $E({children:r}){const[e,t]=p.useState(null),s=async(i,a)=>{try{const l=await fetch("/api/auth/login",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({username:i,password:a})});if(l.ok){const d=await l.json();return t(d),!0}return!1}catch(l){return console.error("Login error:",l),!1}},n=()=>{t(null)};return o.jsx(UE.Provider,{value:{user:e,isAdmin:(e==null?void 0:e.isAdmin)||!1,login:s,logout:n},children:r})}const Jr={"classic-metal":{name:"Classic Metal",description:"Traditional orange and black metal aesthetic",colors:{dark:{primary:"#ff6b35",primaryDark:"#e55a2b",primaryText:"#ffffff",secondary:"#ff8c42",accent:"#ffd23f",background:"#000000",surface:"#1a1a1a",text:"#ffffff",textSecondary:"#cccccc",textMuted:"#999999",border:"#333333",card:"#1a1a1a",cardBackground:"#1a1a1a"},light:{primary:"#d4510a",primaryDark:"#b8450a",primaryText:"#ffffff",secondary:"#e8630e",accent:"#f4a900",background:"#000000",surface:"#1a1a1a",text:"#ffffff",textSecondary:"#cccccc",textMuted:"#999999",border:"#333333",card:"#1a1a1a",cardBackground:"#1a1a1a"}},gradient:"linear-gradient(135deg, #ff6b35 0%, #ff8c42 100%)"},"black-metal":{name:"Black Metal",description:"Dark, atmospheric with silver accents",colors:{dark:{primary:"#c0c0c0",primaryDark:"#a0a0a0",primaryText:"#000000",secondary:"#8b8b8b",accent:"#ffffff",background:"#0a0a0a",surface:"#1a1a1a",text:"#e0e0e0",textSecondary:"#b0b0b0",textMuted:"#808080",border:"#333333",card:"#1a1a1a",cardBackground:"#1a1a1a"},light:{primary:"#666666",primaryDark:"#555555",primaryText:"#ffffff",secondary:"#888888",accent:"#333333",background:"#0a0a0a",surface:"#1a1a1a",text:"#e0e0e0",textSecondary:"#b0b0b0",textMuted:"#808080",border:"#333333",card:"#1a1a1a",cardBackground:"#1a1a1a"}},gradient:"linear-gradient(135deg, #c0c0c0 0%, #8b8b8b 100%)"},"death-metal":{name:"Death Metal",description:"Blood red with dark crimson tones",colors:{dark:{primary:"#dc143c",secondary:"#b71c1c",accent:"#ff1744",background:"#0d0000",surface:"#1a0505",text:"#ffcccc",textSecondary:"#ff9999",textMuted:"#cc6666",border:"#4d1414",card:"#1a0505",cardBackground:"#1a0505"},light:{primary:"#c62828",secondary:"#d32f2f",accent:"#f44336",background:"#0d0000",surface:"#1a0505",text:"#ffcccc",textSecondary:"#ff9999",textMuted:"#cc6666",border:"#4d1414",card:"#1a0505",cardBackground:"#1a0505"}},gradient:"linear-gradient(135deg, #dc143c 0%, #b71c1c 100%)"},"power-metal":{name:"Power Metal",description:"Epic gold and blue fantasy theme",colors:{dark:{primary:"#ffd700",primaryText:"#000000",secondary:"#4169e1",accent:"#87ceeb",background:"#0a0a1a",surface:"#1a1a2e",text:"#f0f8ff",textSecondary:"#ddeeff",textMuted:"#aabbcc",border:"#2a2a5a",card:"#1a1a2e",cardBackground:"#1a1a2e"},light:{primary:"#ffb300",primaryText:"#000000",secondary:"#1976d2",accent:"#0277bd",background:"#0a0a1a",surface:"#1a1a2e",text:"#f0f8ff",textSecondary:"#ddeeff",textMuted:"#aabbcc",border:"#2a2a5a",card:"#1a1a2e",cardBackground:"#1a1a2e"}},gradient:"linear-gradient(135deg, #ffd700 0%, #4169e1 100%)"},"doom-metal":{name:"Doom Metal",description:"Earth tones with deep greens and browns",colors:{dark:{primary:"#8b4513",secondary:"#2e7d32",accent:"#ff8f00",background:"#0a0a0a",surface:"#1a1a0a",text:"#f0e68c",textSecondary:"#daa520",textMuted:"#b8860b",border:"#3e2723",card:"#1a1a0a",cardBackground:"#1a1a0a"},light:{primary:"#6d4c41",secondary:"#388e3c",accent:"#ff9800",background:"#0a0a0a",surface:"#1a1a0a",text:"#f0e68c",textSecondary:"#daa520",textMuted:"#b8860b",border:"#3e2723",card:"#1a1a0a",cardBackground:"#1a1a0a"}},gradient:"linear-gradient(135deg, #8b4513 0%, #2e7d32 100%)"},"thrash-metal":{name:"Thrash Metal",description:"Electric yellow and purple high energy",colors:{dark:{primary:"#ffeb3b",secondary:"#9c27b0",accent:"#e91e63",background:"#0a0a0a",surface:"#1a0a1a",text:"#fff9c4",textSecondary:"#f4ff81",textMuted:"#cccc00",border:"#4a148c",card:"#1a0a1a",cardBackground:"#1a0a1a"},light:{primary:"#f57f17",secondary:"#7b1fa2",accent:"#c2185b",background:"#0a0a0a",surface:"#1a0a1a",text:"#fff9c4",textSecondary:"#f4ff81",textMuted:"#cccc00",border:"#4a148c",card:"#1a0a1a",cardBackground:"#1a0a1a"}},gradient:"linear-gradient(135deg, #ffeb3b 0%, #9c27b0 100%)"},"gothic-metal":{name:"Gothic Metal",description:"Deep purple and dark rose elegance",colors:{dark:{primary:"#9c27b0",secondary:"#ad1457",accent:"#e1bee7",background:"#0a0a0a",surface:"#1a0a1a",text:"#f3e5f5",textSecondary:"#e1bee7",textMuted:"#b868cc",border:"#4a148c",card:"#1a0a1a",cardBackground:"#1a0a1a"},light:{primary:"#7b1fa2",secondary:"#c2185b",accent:"#e91e63",background:"#0a0a0a",surface:"#1a0a1a",text:"#f3e5f5",textSecondary:"#e1bee7",textMuted:"#b868cc",border:"#4a148c",card:"#1a0a1a",cardBackground:"#1a0a1a"}},gradient:"linear-gradient(135deg, #9c27b0 0%, #ad1457 100%)"},"light-mode":{name:"Light Mode",description:"Clean and bright classic light theme",colors:{dark:{primary:"#2563eb",secondary:"#3b82f6",accent:"#60a5fa",background:"#000000",surface:"#1a1a1a",text:"#ffffff",textSecondary:"#cccccc",textMuted:"#999999",border:"#333333",card:"#1a1a1a",cardBackground:"#1a1a1a"},light:{primary:"#2563eb",primaryDark:"#1d4ed8",primaryText:"#ffffff",secondary:"#3b82f6",accent:"#60a5fa",background:"#ffffff",surface:"#f8fafc",text:"#1f2937",textSecondary:"#475569",textMuted:"#6b7280",border:"#e2e8f0",card:"#ffffff",cardBackground:"#ffffff"}},gradient:"linear-gradient(135deg, #3b82f6 0%, #60a5fa 100%)"},"dark-mode":{name:"Dark Mode",description:"Sleek and modern classic dark theme",colors:{dark:{primary:"#60a5fa",secondary:"#3b82f6",accent:"#93c5fd",background:"#0f172a",surface:"#1e293b",text:"#f1f5f9",textSecondary:"#cbd5e1",textMuted:"#64748b",border:"#334155",card:"#1e293b",cardBackground:"#1e293b"},light:{primary:"#60a5fa",secondary:"#3b82f6",accent:"#93c5fd",background:"#0f172a",surface:"#1e293b",text:"#f1f5f9",textSecondary:"#cbd5e1",textMuted:"#64748b",border:"#334155",card:"#1e293b",cardBackground:"#1e293b"}},gradient:"linear-gradient(135deg, #60a5fa 0%, #3b82f6 100%)"},"glassmorphism-premium":{name:"Glassmorphism Rock",description:"Premium vibrant glass effect with rock vibes",colors:{dark:{primary:"#ff0080",primaryDark:"#e6006b",primaryText:"#ffffff",secondary:"#ff6600",accent:"#ffff00",background:"linear-gradient(135deg, #8b0080 0%, #ff0080 25%, #ff6600 50%, #ffff00 75%, #ff0080 100%)",surface:"rgba(255, 255, 255, 0.08)",text:"#ffffff",textSecondary:"#e0e0e0",textMuted:"#cccccc",border:"rgba(255, 255, 255, 0.18)",card:"rgba(255, 255, 255, 0.08)",cardBackground:"rgba(255, 255, 255, 0.08)"},light:{primary:"#ff0080",primaryDark:"#e6006b",primaryText:"#ffffff",secondary:"#ff6600",accent:"#ffff00",background:"linear-gradient(135deg, #8b0080 0%, #ff0080 25%, #ff6600 50%, #ffff00 75%, #ff0080 100%)",surface:"rgba(255, 255, 255, 0.08)",text:"#ffffff",textSecondary:"#e0e0e0",textMuted:"#cccccc",border:"rgba(255, 255, 255, 0.18)",card:"rgba(255, 255, 255, 0.08)",cardBackground:"rgba(255, 255, 255, 0.08)"}},gradient:"linear-gradient(135deg, #8b0080 0%, #ff0080 25%, #ff6600 50%, #ffff00 75%, #ff0080 100%)",isPremium:!0}},D0=p.createContext(void 0);function BE({children:r}){const[e,t]=p.useState(()=>{if(typeof window<"u"){const g=localStorage.getItem("metal-theme");return g&&g in Jr?g:"classic-metal"}return"classic-metal"}),[s,n]=p.useState(()=>{if(typeof window<"u"){const g=localStorage.getItem("metal-theme"),v=localStorage.getItem("theme-mode");return g==="light-mode"?!1:v!=="light"}return!0}),i=()=>{n(g=>{const v=!g;return localStorage.setItem("theme-mode",v?"dark":"light"),v})},a=()=>{i()},d=((g,v)=>{const b=Jr[g];return v?b.colors.dark:b.colors.light})(e,s);p.useEffect(()=>{const g=e==="light-mode",v=document.documentElement;document.body.style.opacity="0.7",document.body.style.transition="opacity 0.15s ease-out",setTimeout(()=>{v.style.transition="all 0.3s ease",e==="glassmorphism-premium"?(document.body.style.background=d.background,document.body.style.backgroundSize="400% 400%",document.body.style.animation="glassmorphGradient 8s ease infinite",v.style.setProperty("--color-background","transparent"),v.classList.add("glassmorphism-theme")):(document.body.style.background="",document.body.style.backgroundSize="",document.body.style.animation="",v.classList.remove("glassmorphism-theme"),v.style.setProperty("--color-background",d.background)),v.style.setProperty("--color-primary",d.primary),v.style.setProperty("--color-secondary",d.secondary),v.style.setProperty("--color-accent",d.accent),v.style.setProperty("--color-surface",d.surface),v.style.setProperty("--color-text",d.text),v.style.setProperty("--color-text-secondary",d.textSecondary),v.style.setProperty("--color-border",d.border),v.style.setProperty("--color-card",d.card),v.style.setProperty("--gradient-primary",Jr[e].gradient),v.classList.remove("light","dark"),v.classList.add(g?"light":"dark"),localStorage.setItem("metal-theme",e),setTimeout(()=>{document.body.style.opacity="1",document.body.style.transition="opacity 0.15s ease-in",setTimeout(()=>{v.style.transition="",document.body.style.transition=""},150)},150)},150)},[e,s,d]);const u=g=>{g==="light-mode"?(n(!1),localStorage.setItem("theme-mode","light")):g!=="light-mode"&&(n(!0),localStorage.setItem("theme-mode","dark")),t(g)},h=()=>d,m=()=>Jr[e].gradient,x={currentTheme:e,isDarkMode:s,colors:{...d,primaryText:d.primaryText||(d.primary==="#c0c0c0"?"#000000":"#ffffff")},theme:Jr[e],setTheme:u,toggleDarkMode:i,toggleTheme:a,gradient:Jr[e].gradient,getColors:h,getGradient:m};return o.jsx(D0.Provider,{value:x,children:r})}function Me(){const r=p.useContext(D0);if(r===void 0)throw new Error("useTheme must be used within a ThemeProvider");return r}const O0=p.createContext(void 0);function Wc(r,e){return{"Youth Gone Wild":"https://images.unsplash.com/photo-1493225457124-a3eb161ffa5f?ixlib=rb-4.0.3&auto=format&fit=crop&w=400&h=400","18 and Life":"https://images.unsplash.com/photo-1493225457124-a3eb161ffa5f?ixlib=rb-4.0.3&auto=format&fit=crop&w=400&h=400","I Remember You":"https://images.unsplash.com/photo-1493225457124-a3eb161ffa5f?ixlib=rb-4.0.3&auto=format&fit=crop&w=400&h=400","Master of Puppets":"https://images.unsplash.com/photo-1571330735066-03aaa9429d89?ixlib=rb-4.0.3&auto=format&fit=crop&w=400&h=400","Ace of Spades":"https://images.unsplash.com/photo-1571330735066-03aaa9429d89?ixlib=rb-4.0.3&auto=format&fit=crop&w=400&h=400","Breaking the Law":"https://images.unsplash.com/photo-1571330735066-03aaa9429d89?ixlib=rb-4.0.3&auto=format&fit=crop&w=400&h=400"}[r]||"https://images.unsplash.com/photo-1493225457124-a3eb161ffa5f?ixlib=rb-4.0.3&auto=format&fit=crop&w=400&h=400"}function zE({children:r}){const[e,t]=p.useState(!1),[s,n]=p.useState(()=>{if(typeof window<"u"){const L=localStorage.getItem("radio-volume");return L?parseFloat(L):.7}return .7}),[i,a]=p.useState(()=>typeof window<"u"?localStorage.getItem("radio-muted")==="true":!1),[l,d]=p.useState(!1),[u,h]=p.useState(null),[m,x]=p.useState({id:"hot-97",stationId:"hot-97",name:"Hot 97",frequency:"97.1 FM",location:"New York, NY",genre:"Hip Hop & R&B",streamUrl:"https://playerservices.streamtheworld.com/api/livestream-redirect/WQHTFMAAC.aac",description:"New York's #1 Hip Hop & R&B",icon:""}),[g,v]=p.useState({title:"Hot 97",artist:"New York's Hip Hop & Urban Contemporary",album:"97.1 FM  New York, NY",artwork:"",isAd:!1,stationName:"Hot 97",frequency:"97.1 FM",location:"New York, NY",genre:"Hip Hop & Urban Contemporary",lastUpdated:new Date}),[b,w]=p.useState(!1),[k,T]=p.useState({}),[_,R]=p.useState(null),[D,$]=p.useState("Hot 97"),[S,I]=p.useState(null),[E,j]=p.useState(!1),C=p.useRef(null),A=p.useRef(0),P=3,W=L=>{if(!L||!L.streamUrl)return["https://playerservices.streamtheworld.com/api/livestream-redirect/WQHTFMAAC.aac","https://playerservices.streamtheworld.com/api/livestream-redirect/WQHTFM.mp3"];const K=L.streamUrl;return L.id==="hot-97"?["https://playerservices.streamtheworld.com/api/livestream-redirect/WQHTFMAAC.aac","https://playerservices.streamtheworld.com/api/livestream-redirect/WQHTFM.mp3","https://26183.live.streamtheworld.com:443/WQHTFMAAC.aac","https://26183.live.streamtheworld.com:443/WQHTFM.mp3","https://ice1.somafm.com/beatblender-128-mp3","https://ice2.somafm.com/beatblender-128-mp3","https://ice6.somafm.com/beatblender-128-mp3"]:L.id==="power-106"?["https://playerservices.streamtheworld.com/api/livestream-redirect/KPWRFMAAC.aac","https://playerservices.streamtheworld.com/api/livestream-redirect/KPWRFM.mp3","https://ice1.somafm.com/beatblender-128-mp3","https://ice2.somafm.com/beatblender-128-mp3","https://ice6.somafm.com/beatblender-128-mp3"]:L.id==="beat-955"?["https://playerservices.streamtheworld.com/api/livestream-redirect/KBFBFMAAC.aac","https://playerservices.streamtheworld.com/api/livestream-redirect/KBFBFM.mp3","https://24883.live.streamtheworld.com/KBFBFMAAC.aac","https://ice1.somafm.com/beatblender-128-mp3","https://ice2.somafm.com/beatblender-128-mp3","https://ice6.somafm.com/beatblender-128-mp3"]:L.id==="somafm-metal"?["https://ice1.somafm.com/metal-128-mp3","https://ice2.somafm.com/metal-128-mp3","https://ice6.somafm.com/metal-128-mp3","https://ice1.somafm.com/beatblender-128-mp3","https://ice2.somafm.com/beatblender-128-mp3","https://ice6.somafm.com/beatblender-128-mp3"]:L.id==="hot-105"?["https://playerservices.streamtheworld.com/api/livestream-redirect/WMIBFMAAC.aac","https://playerservices.streamtheworld.com/api/livestream-redirect/WMIBFM.mp3","https://ice1.somafm.com/beatblender-128-mp3","https://ice2.somafm.com/beatblender-128-mp3","https://ice6.somafm.com/beatblender-128-mp3"]:L.id==="q-93"?["https://playerservices.streamtheworld.com/api/livestream-redirect/WQUE-FMAAC.aac","https://playerservices.streamtheworld.com/api/livestream-redirect/WQUE-FM.mp3","https://ice1.somafm.com/beatblender-128-mp3","https://ice2.somafm.com/beatblender-128-mp3","https://ice6.somafm.com/beatblender-128-mp3"]:[K,"https://playerservices.streamtheworld.com/api/livestream-redirect/WQHTFMAAC.aac","https://ice1.somafm.com/beatblender-128-mp3","https://ice2.somafm.com/beatblender-128-mp3","https://ice6.somafm.com/beatblender-128-mp3"]},oe=async()=>{const L=C.current;if(L)try{e?(L.pause(),h(null),A.current=0):await U()}catch(K){console.error("Playback toggle error:",K),X(K)}},U=async()=>{const L=C.current;if(!L)return;d(!0),h(null);let K=!1;const re=W(m);if(!re||((re==null?void 0:re.length)||0)===0)throw new Error("No stream URLs available");for(let ge=0;ge<((re==null?void 0:re.length)||0);ge++)try{const ke=re[ge];console.log(`Trying radio stream ${ge+1}: ${ke}`),L.pause(),L.currentTime=0,L.src=ke,L.load(),await new Promise((Pt,Xi)=>{const wo=setTimeout(()=>{Xi(new Error("Stream loading timeout"))},3e3),Br=()=>{clearTimeout(wo),Ji(),Pt(!0)},_o=()=>{clearTimeout(wo),Ji(),Xi(new Error("Stream loading error"))},Ji=()=>{L.removeEventListener("canplaythrough",Br),L.removeEventListener("loadeddata",Br),L.removeEventListener("error",_o)};L.addEventListener("canplaythrough",Br),L.addEventListener("loadeddata",Br),L.addEventListener("error",_o)});const We=L.play();if(We!==void 0){await We,K=!0,A.current=0,console.log(`Stream ${ge+1} connected successfully via redirect`);break}}catch(ke){if(console.warn(`Stream ${ge+1} failed:`,(ke==null?void 0:ke.message)||"Unknown error"),ge===((re==null?void 0:re.length)||0)-1)throw new Error("All stream sources failed")}if(!K)throw new Error("All stream formats failed")},X=L=>{var re;let K="Failed to start playback";if(L.name==="NotAllowedError"?K="Please click play to start the stream":L.name==="NotSupportedError"?K="Stream format not supported - trying alternative formats":L.name==="AbortError"?K="Stream loading was interrupted":K="Unable to connect to radio stream",A.current<P&&!((re=L.name)!=null&&re.includes("NotAllowed"))&&!e){A.current++,console.log(`Auto-retry attempt ${A.current}/${P}`),setTimeout(()=>{var ge;!e&&!((ge=L.name)!=null&&ge.includes("NotAllowed"))&&U().catch(()=>{h(K),d(!1),t(!1)})},1e3);return}h(K),d(!1),t(!1)},xe=L=>{n(L),typeof window<"u"&&localStorage.setItem("radio-volume",L.toString()),C.current&&(C.current.volume=i?0:L)},V=()=>{const L=!i;a(L),typeof window<"u"&&localStorage.setItem("radio-muted",L.toString()),C.current&&(C.current.volume=L?0:s)},be=async L=>{const K=C.current;if(K)try{d(!0),h(null),e&&(K.pause(),t(!1)),x(L),$(L.name);const re=W(L);K.src=re[0],K.load(),await new Promise(ge=>{const ke=setTimeout(ge,1500),We=()=>{clearTimeout(ke),Pt(),ge()},Pt=()=>{K.removeEventListener("canplay",We),K.removeEventListener("loadeddata",We),K.removeEventListener("error",We)};K.addEventListener("canplay",We),K.addEventListener("loadeddata",We),K.addEventListener("error",We)}),v({title:L.name,artist:L.description,album:`${L.frequency}  ${L.location}`,artwork:""}),console.log(`Station changed to: ${L.name} (${L.streamUrl})`)}catch(re){console.error("Failed to change station:",re),h("Failed to switch station")}finally{d(!1)}},ce=()=>{console.log("Audio play event triggered"),t(!0),d(!1),h(null)},Ue=()=>{console.log("Audio pause event triggered"),t(!1),d(!1)},Se=()=>{console.log("Audio loadstart event triggered"),d(!0),h(null)},ne=()=>{console.log("Audio canplay event triggered")},H=()=>{console.log("Audio canplaythrough event triggered")},ie=L=>{console.error("Audio error:",L),d(!1),t(!1);const K=C.current;K&&K.src&&!K.paused&&h("Unable to connect to radio stream")},Q=()=>{console.log("Audio stalled event triggered")},we=()=>{console.log("Audio waiting event triggered"),d(!0)};p.useEffect(()=>{const L=C.current;if(L)return L.volume=i?0:s,L.addEventListener("play",ce),L.addEventListener("pause",Ue),L.addEventListener("loadstart",Se),L.addEventListener("canplay",ne),L.addEventListener("canplaythrough",H),L.addEventListener("error",ie),L.addEventListener("stalled",Q),L.addEventListener("waiting",we),()=>{L.removeEventListener("play",ce),L.removeEventListener("pause",Ue),L.removeEventListener("loadstart",Se),L.removeEventListener("canplay",ne),L.removeEventListener("canplaythrough",H),L.removeEventListener("error",ie),L.removeEventListener("stalled",Q),L.removeEventListener("waiting",we)}},[s,i]),p.useEffect(()=>{(async()=>{try{!e&&!u&&m&&(console.log("[RadioContext] Attempting immediate auto-play on mount."),await oe())}catch(re){console.log("[RadioContext] Immediate auto-play blocked by browser:",re)}})(),(async()=>{if(!localStorage.getItem("radio-user-interacted")){const ge=async()=>{localStorage.setItem("radio-user-interacted","true"),document.removeEventListener("click",ge),document.removeEventListener("keydown",ge),document.removeEventListener("touchstart",ge),setTimeout(async()=>{try{!e&&!u&&m&&(console.log("Auto-playing first station after user interaction:",m.name),await oe())}catch(ke){console.log("Auto-play prevented by browser:",ke)}},1e3)};document.addEventListener("click",ge),document.addEventListener("keydown",ge),document.addEventListener("touchstart",ge)}})()},[]),p.useEffect(()=>{const K=setTimeout(async()=>{try{const re=localStorage.getItem("last-selected-station");localStorage.getItem("auto-play-enabled")!=="false"&&m&&(console.log("[RadioContext] Auto-playing station:",m.name),setTimeout(async()=>{e||await oe()},1e3))}catch(re){console.error("[RadioContext] Auto-play initialization error:",re)}},2e3);return()=>clearTimeout(K)},[]),p.useEffect(()=>{m&&localStorage.setItem("last-selected-station",m.id)},[m]),p.useEffect(()=>{e&&m?v({title:m.name,artist:m.description,album:`${m.frequency}  ${m.location}`,artwork:""}):e||v({title:D,artist:"",album:"",artwork:""})},[e,D,m]);const Le=p.useCallback(async L=>{if(!(!L||!e)){console.log(`[RadioContext] Fetching metadata for station: ${L.name} (${L.id})`);try{const K=`/api/now-playing?station=${L.stationId||L.id}`;console.log(`[RadioContext] Calling metadata endpoint: ${K}`);const re=await fetch(K);console.log(`[RadioContext] Metadata response status: ${re.status}`);const ge=re.headers.get("content-type");if(console.log(`[RadioContext] Metadata response content-type: ${ge}`),!re.ok)throw console.warn(`[RadioContext] Metadata endpoint returned error: ${re.status} ${re.statusText}`),new Error(`HTTP ${re.status}: ${re.statusText}`);if(!ge||!ge.includes("application/json")){console.warn("[RadioContext] Metadata endpoint did not return JSON:",K);const Pt={title:L.name,artist:L.description,album:`${L.frequency}  ${L.location}`,artwork:Wc(L.name,L.description),isAd:!1,stationName:L.name,frequency:L.frequency,location:L.location,genre:L.genre,lastUpdated:new Date};v(Pt),console.log(`[RadioContext] Using fallback metadata: "${Pt.title}" by ${Pt.artist}`);return}const ke=await re.json();console.log("[RadioContext] Received metadata:",ke);const We={title:ke.title||L.name,artist:ke.artist||L.description,album:ke.album||`${L.frequency}  ${L.location}`,artwork:ke.artwork||Wc(ke.title||L.name,ke.artist||L.description),isAd:ke.isAd||!1,adCompany:ke.adCompany,adReason:ke.adReason,stationName:L.name,frequency:L.frequency,location:L.location,genre:L.genre,lastUpdated:new Date};v(We),w(ke.isAd||!1),T({company:ke.adCompany,reason:ke.adReason,artwork:ke.isAd?ke.artwork:void 0}),console.log(`[RadioContext] Live metadata updated: "${We.title}" by ${We.artist}${We.isAd?" (Advertisement)":""}`),We.isAd&&console.log(`[RadioContext] Ad detected: ${We.adCompany||"Unknown Company"} - ${We.adReason||"Various indicators"}`)}catch(K){console.error("[RadioContext] Failed to fetch live metadata:",K);const re={title:L.name,artist:L.description,album:`${L.frequency}  ${L.location}`,artwork:Wc(L.name,L.description),isAd:!1,stationName:L.name,frequency:L.frequency,location:L.location,genre:L.genre,lastUpdated:new Date};v(re),console.log(`[RadioContext] Using fallback metadata due to error: "${re.title}" by ${re.artist}`)}}},[e]);p.useEffect(()=>{if(e&&m){Le(m);const L=setInterval(()=>{Le(m)},1e4);return R(L),()=>{L&&clearInterval(L)}}else _&&(clearInterval(_),R(null))},[e,m,Le]),p.useEffect(()=>()=>{_&&clearInterval(_)},[_]);const Ce={isPlaying:e,volume:s,isMuted:i,isLoading:l,error:u,currentTrack:g,currentStation:m,stationName:D,isTransitioning:E,isAdPlaying:b,adInfo:k,togglePlayback:oe,setVolume:xe,toggleMute:V,changeStation:be,setCurrentTrack:v,audioRef:C};return o.jsx(O0.Provider,{value:Ce,children:r})}function Ga(){const r=p.useContext(O0);if(r===void 0)throw new Error("useRadio must be used within a RadioProvider");return r}const HE=()=>{};var Lm={};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const L0=function(r){const e=[];let t=0;for(let s=0;s<r.length;s++){let n=r.charCodeAt(s);n<128?e[t++]=n:n<2048?(e[t++]=n>>6|192,e[t++]=n&63|128):(n&64512)===55296&&s+1<r.length&&(r.charCodeAt(s+1)&64512)===56320?(n=65536+((n&1023)<<10)+(r.charCodeAt(++s)&1023),e[t++]=n>>18|240,e[t++]=n>>12&63|128,e[t++]=n>>6&63|128,e[t++]=n&63|128):(e[t++]=n>>12|224,e[t++]=n>>6&63|128,e[t++]=n&63|128)}return e},qE=function(r){const e=[];let t=0,s=0;for(;t<r.length;){const n=r[t++];if(n<128)e[s++]=String.fromCharCode(n);else if(n>191&&n<224){const i=r[t++];e[s++]=String.fromCharCode((n&31)<<6|i&63)}else if(n>239&&n<365){const i=r[t++],a=r[t++],l=r[t++],d=((n&7)<<18|(i&63)<<12|(a&63)<<6|l&63)-65536;e[s++]=String.fromCharCode(55296+(d>>10)),e[s++]=String.fromCharCode(56320+(d&1023))}else{const i=r[t++],a=r[t++];e[s++]=String.fromCharCode((n&15)<<12|(i&63)<<6|a&63)}}return e.join("")},V0={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:typeof atob=="function",encodeByteArray(r,e){if(!Array.isArray(r))throw Error("encodeByteArray takes an array as a parameter");this.init_();const t=e?this.byteToCharMapWebSafe_:this.byteToCharMap_,s=[];for(let n=0;n<r.length;n+=3){const i=r[n],a=n+1<r.length,l=a?r[n+1]:0,d=n+2<r.length,u=d?r[n+2]:0,h=i>>2,m=(i&3)<<4|l>>4;let x=(l&15)<<2|u>>6,g=u&63;d||(g=64,a||(x=64)),s.push(t[h],t[m],t[x],t[g])}return s.join("")},encodeString(r,e){return this.HAS_NATIVE_SUPPORT&&!e?btoa(r):this.encodeByteArray(L0(r),e)},decodeString(r,e){return this.HAS_NATIVE_SUPPORT&&!e?atob(r):qE(this.decodeStringToByteArray(r,e))},decodeStringToByteArray(r,e){this.init_();const t=e?this.charToByteMapWebSafe_:this.charToByteMap_,s=[];for(let n=0;n<r.length;){const i=t[r.charAt(n++)],l=n<r.length?t[r.charAt(n)]:0;++n;const u=n<r.length?t[r.charAt(n)]:64;++n;const m=n<r.length?t[r.charAt(n)]:64;if(++n,i==null||l==null||u==null||m==null)throw new WE;const x=i<<2|l>>4;if(s.push(x),u!==64){const g=l<<4&240|u>>2;if(s.push(g),m!==64){const v=u<<6&192|m;s.push(v)}}}return s},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let r=0;r<this.ENCODED_VALS.length;r++)this.byteToCharMap_[r]=this.ENCODED_VALS.charAt(r),this.charToByteMap_[this.byteToCharMap_[r]]=r,this.byteToCharMapWebSafe_[r]=this.ENCODED_VALS_WEBSAFE.charAt(r),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[r]]=r,r>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(r)]=r,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(r)]=r)}}};class WE extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}}const GE=function(r){const e=L0(r);return V0.encodeByteArray(e,!0)},Ka=function(r){return GE(r).replace(/\./g,"")},F0=function(r){try{return V0.decodeString(r,!0)}catch(e){console.error("base64Decode failed: ",e)}return null};/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function KE(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("Unable to locate global object.")}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const QE=()=>KE().__FIREBASE_DEFAULTS__,YE=()=>{if(typeof process>"u"||typeof Lm>"u")return;const r=Lm.__FIREBASE_DEFAULTS__;if(r)return JSON.parse(r)},XE=()=>{if(typeof document>"u")return;let r;try{r=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch{return}const e=r&&F0(r[1]);return e&&JSON.parse(e)},Vl=()=>{try{return HE()||QE()||YE()||XE()}catch(r){console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${r}`);return}},U0=r=>{var e,t;return(t=(e=Vl())===null||e===void 0?void 0:e.emulatorHosts)===null||t===void 0?void 0:t[r]},$0=r=>{const e=U0(r);if(!e)return;const t=e.lastIndexOf(":");if(t<=0||t+1===e.length)throw new Error(`Invalid host ${e} with no separate hostname and port!`);const s=parseInt(e.substring(t+1),10);return e[0]==="["?[e.substring(1,t-1),s]:[e.substring(0,t),s]},B0=()=>{var r;return(r=Vl())===null||r===void 0?void 0:r.config},z0=r=>{var e;return(e=Vl())===null||e===void 0?void 0:e[`_${r}`]};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class JE{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((e,t)=>{this.resolve=e,this.reject=t})}wrapCallback(e){return(t,s)=>{t?this.reject(t):this.resolve(s),typeof e=="function"&&(this.promise.catch(()=>{}),e.length===1?e(t):e(t,s))}}}/**
 * @license
 * Copyright 2025 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function js(r){return r.endsWith(".cloudworkstations.dev")}async function Hu(r){return(await fetch(r,{credentials:"include"})).ok}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function H0(r,e){if(r.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');const t={alg:"none",type:"JWT"},s=e||"demo-project",n=r.iat||0,i=r.sub||r.user_id;if(!i)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");const a=Object.assign({iss:`https://securetoken.google.com/${s}`,aud:s,iat:n,exp:n+3600,auth_time:n,sub:i,user_id:i,firebase:{sign_in_provider:"custom",identities:{}}},r);return[Ka(JSON.stringify(t)),Ka(JSON.stringify(a)),""].join(".")}const Zo={};function ZE(){const r={prod:[],emulator:[]};for(const e of Object.keys(Zo))Zo[e]?r.emulator.push(e):r.prod.push(e);return r}function eN(r){let e=document.getElementById(r),t=!1;return e||(e=document.createElement("div"),e.setAttribute("id",r),t=!0),{created:t,element:e}}let Vm=!1;function qu(r,e){if(typeof window>"u"||typeof document>"u"||!js(window.location.host)||Zo[r]===e||Zo[r]||Vm)return;Zo[r]=e;function t(x){return`__firebase__banner__${x}`}const s="__firebase__banner",i=ZE().prod.length>0;function a(){const x=document.getElementById(s);x&&x.remove()}function l(x){x.style.display="flex",x.style.background="#7faaf0",x.style.position="fixed",x.style.bottom="5px",x.style.left="5px",x.style.padding=".5em",x.style.borderRadius="5px",x.style.alignItems="center"}function d(x,g){x.setAttribute("width","24"),x.setAttribute("id",g),x.setAttribute("height","24"),x.setAttribute("viewBox","0 0 24 24"),x.setAttribute("fill","none"),x.style.marginLeft="-6px"}function u(){const x=document.createElement("span");return x.style.cursor="pointer",x.style.marginLeft="16px",x.style.fontSize="24px",x.innerHTML=" &times;",x.onclick=()=>{Vm=!0,a()},x}function h(x,g){x.setAttribute("id",g),x.innerText="Learn more",x.href="https://firebase.google.com/docs/studio/preview-apps#preview-backend",x.setAttribute("target","__blank"),x.style.paddingLeft="5px",x.style.textDecoration="underline"}function m(){const x=eN(s),g=t("text"),v=document.getElementById(g)||document.createElement("span"),b=t("learnmore"),w=document.getElementById(b)||document.createElement("a"),k=t("preprendIcon"),T=document.getElementById(k)||document.createElementNS("http://www.w3.org/2000/svg","svg");if(x.created){const _=x.element;l(_),h(w,b);const R=u();d(T,k),_.append(T,v,w,R),document.body.appendChild(_)}i?(v.innerText="Preview backend disconnected.",T.innerHTML=`<g clip-path="url(#clip0_6013_33858)">
<path d="M4.8 17.6L12 5.6L19.2 17.6H4.8ZM6.91667 16.4H17.0833L12 7.93333L6.91667 16.4ZM12 15.6C12.1667 15.6 12.3056 15.5444 12.4167 15.4333C12.5389 15.3111 12.6 15.1667 12.6 15C12.6 14.8333 12.5389 14.6944 12.4167 14.5833C12.3056 14.4611 12.1667 14.4 12 14.4C11.8333 14.4 11.6889 14.4611 11.5667 14.5833C11.4556 14.6944 11.4 14.8333 11.4 15C11.4 15.1667 11.4556 15.3111 11.5667 15.4333C11.6889 15.5444 11.8333 15.6 12 15.6ZM11.4 13.6H12.6V10.4H11.4V13.6Z" fill="#212121"/>
</g>
<defs>
<clipPath id="clip0_6013_33858">
<rect width="24" height="24" fill="white"/>
</clipPath>
</defs>`):(T.innerHTML=`<g clip-path="url(#clip0_6083_34804)">
<path d="M11.4 15.2H12.6V11.2H11.4V15.2ZM12 10C12.1667 10 12.3056 9.94444 12.4167 9.83333C12.5389 9.71111 12.6 9.56667 12.6 9.4C12.6 9.23333 12.5389 9.09444 12.4167 8.98333C12.3056 8.86111 12.1667 8.8 12 8.8C11.8333 8.8 11.6889 8.86111 11.5667 8.98333C11.4556 9.09444 11.4 9.23333 11.4 9.4C11.4 9.56667 11.4556 9.71111 11.5667 9.83333C11.6889 9.94444 11.8333 10 12 10ZM12 18.4C11.1222 18.4 10.2944 18.2333 9.51667 17.9C8.73889 17.5667 8.05556 17.1111 7.46667 16.5333C6.88889 15.9444 6.43333 15.2611 6.1 14.4833C5.76667 13.7056 5.6 12.8778 5.6 12C5.6 11.1111 5.76667 10.2833 6.1 9.51667C6.43333 8.73889 6.88889 8.06111 7.46667 7.48333C8.05556 6.89444 8.73889 6.43333 9.51667 6.1C10.2944 5.76667 11.1222 5.6 12 5.6C12.8889 5.6 13.7167 5.76667 14.4833 6.1C15.2611 6.43333 15.9389 6.89444 16.5167 7.48333C17.1056 8.06111 17.5667 8.73889 17.9 9.51667C18.2333 10.2833 18.4 11.1111 18.4 12C18.4 12.8778 18.2333 13.7056 17.9 14.4833C17.5667 15.2611 17.1056 15.9444 16.5167 16.5333C15.9389 17.1111 15.2611 17.5667 14.4833 17.9C13.7167 18.2333 12.8889 18.4 12 18.4ZM12 17.2C13.4444 17.2 14.6722 16.6944 15.6833 15.6833C16.6944 14.6722 17.2 13.4444 17.2 12C17.2 10.5556 16.6944 9.32778 15.6833 8.31667C14.6722 7.30555 13.4444 6.8 12 6.8C10.5556 6.8 9.32778 7.30555 8.31667 8.31667C7.30556 9.32778 6.8 10.5556 6.8 12C6.8 13.4444 7.30556 14.6722 8.31667 15.6833C9.32778 16.6944 10.5556 17.2 12 17.2Z" fill="#212121"/>
</g>
<defs>
<clipPath id="clip0_6083_34804">
<rect width="24" height="24" fill="white"/>
</clipPath>
</defs>`,v.innerText="Preview backend running in this workspace."),v.setAttribute("id",g)}document.readyState==="loading"?window.addEventListener("DOMContentLoaded",m):m()}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function vt(){return typeof navigator<"u"&&typeof navigator.userAgent=="string"?navigator.userAgent:""}function tN(){return typeof window<"u"&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(vt())}function rN(){var r;const e=(r=Vl())===null||r===void 0?void 0:r.forceEnvironment;if(e==="node")return!0;if(e==="browser")return!1;try{return Object.prototype.toString.call(global.process)==="[object process]"}catch{return!1}}function sN(){return typeof navigator<"u"&&navigator.userAgent==="Cloudflare-Workers"}function nN(){const r=typeof chrome=="object"?chrome.runtime:typeof browser=="object"?browser.runtime:void 0;return typeof r=="object"&&r.id!==void 0}function oN(){return typeof navigator=="object"&&navigator.product==="ReactNative"}function iN(){const r=vt();return r.indexOf("MSIE ")>=0||r.indexOf("Trident/")>=0}function aN(){return!rN()&&!!navigator.userAgent&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")}function lN(){try{return typeof indexedDB=="object"}catch{return!1}}function cN(){return new Promise((r,e)=>{try{let t=!0;const s="validate-browser-context-for-indexeddb-analytics-module",n=self.indexedDB.open(s);n.onsuccess=()=>{n.result.close(),t||self.indexedDB.deleteDatabase(s),r(!0)},n.onupgradeneeded=()=>{t=!1},n.onerror=()=>{var i;e(((i=n.error)===null||i===void 0?void 0:i.message)||"")}}catch(t){e(t)}})}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const dN="FirebaseError";class yr extends Error{constructor(e,t,s){super(t),this.code=e,this.customData=s,this.name=dN,Object.setPrototypeOf(this,yr.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,Di.prototype.create)}}class Di{constructor(e,t,s){this.service=e,this.serviceName=t,this.errors=s}create(e,...t){const s=t[0]||{},n=`${this.service}/${e}`,i=this.errors[e],a=i?uN(i,s):"Error",l=`${this.serviceName}: ${a} (${n}).`;return new yr(n,l,s)}}function uN(r,e){return r.replace(hN,(t,s)=>{const n=e[s];return n!=null?String(n):`<${s}?>`})}const hN=/\{\$([^}]+)}/g;function fN(r){for(const e in r)if(Object.prototype.hasOwnProperty.call(r,e))return!1;return!0}function sn(r,e){if(r===e)return!0;const t=Object.keys(r),s=Object.keys(e);for(const n of t){if(!s.includes(n))return!1;const i=r[n],a=e[n];if(Fm(i)&&Fm(a)){if(!sn(i,a))return!1}else if(i!==a)return!1}for(const n of s)if(!t.includes(n))return!1;return!0}function Fm(r){return r!==null&&typeof r=="object"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function mo(r){const e=[];for(const[t,s]of Object.entries(r))Array.isArray(s)?s.forEach(n=>{e.push(encodeURIComponent(t)+"="+encodeURIComponent(n))}):e.push(encodeURIComponent(t)+"="+encodeURIComponent(s));return e.length?"&"+e.join("&"):""}function mN(r,e){const t=new pN(r,e);return t.subscribe.bind(t)}class pN{constructor(e,t){this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=t,this.task.then(()=>{e(this)}).catch(s=>{this.error(s)})}next(e){this.forEachObserver(t=>{t.next(e)})}error(e){this.forEachObserver(t=>{t.error(e)}),this.close(e)}complete(){this.forEachObserver(e=>{e.complete()}),this.close()}subscribe(e,t,s){let n;if(e===void 0&&t===void 0&&s===void 0)throw new Error("Missing Observer.");gN(e,["next","error","complete"])?n=e:n={next:e,error:t,complete:s},n.next===void 0&&(n.next=Gc),n.error===void 0&&(n.error=Gc),n.complete===void 0&&(n.complete=Gc);const i=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then(()=>{try{this.finalError?n.error(this.finalError):n.complete()}catch{}}),this.observers.push(n),i}unsubscribeOne(e){this.observers===void 0||this.observers[e]===void 0||(delete this.observers[e],this.observerCount-=1,this.observerCount===0&&this.onNoObservers!==void 0&&this.onNoObservers(this))}forEachObserver(e){if(!this.finalized)for(let t=0;t<this.observers.length;t++)this.sendOne(t,e)}sendOne(e,t){this.task.then(()=>{if(this.observers!==void 0&&this.observers[e]!==void 0)try{t(this.observers[e])}catch(s){typeof console<"u"&&console.error&&console.error(s)}})}close(e){this.finalized||(this.finalized=!0,e!==void 0&&(this.finalError=e),this.task.then(()=>{this.observers=void 0,this.onNoObservers=void 0}))}}function gN(r,e){if(typeof r!="object"||r===null)return!1;for(const t of e)if(t in r&&typeof r[t]=="function")return!0;return!1}function Gc(){}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ye(r){return r&&r._delegate?r._delegate:r}class Ts{constructor(e,t,s){this.name=e,this.instanceFactory=t,this.type=s,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(e){return this.instantiationMode=e,this}setMultipleInstances(e){return this.multipleInstances=e,this}setServiceProps(e){return this.serviceProps=e,this}setInstanceCreatedCallback(e){return this.onInstanceCreated=e,this}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const $s="[DEFAULT]";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class xN{constructor(e,t){this.name=e,this.container=t,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(e){const t=this.normalizeInstanceIdentifier(e);if(!this.instancesDeferred.has(t)){const s=new JE;if(this.instancesDeferred.set(t,s),this.isInitialized(t)||this.shouldAutoInitialize())try{const n=this.getOrInitializeService({instanceIdentifier:t});n&&s.resolve(n)}catch{}}return this.instancesDeferred.get(t).promise}getImmediate(e){var t;const s=this.normalizeInstanceIdentifier(e==null?void 0:e.identifier),n=(t=e==null?void 0:e.optional)!==null&&t!==void 0?t:!1;if(this.isInitialized(s)||this.shouldAutoInitialize())try{return this.getOrInitializeService({instanceIdentifier:s})}catch(i){if(n)return null;throw i}else{if(n)return null;throw Error(`Service ${this.name} is not available`)}}getComponent(){return this.component}setComponent(e){if(e.name!==this.name)throw Error(`Mismatching Component ${e.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=e,!!this.shouldAutoInitialize()){if(bN(e))try{this.getOrInitializeService({instanceIdentifier:$s})}catch{}for(const[t,s]of this.instancesDeferred.entries()){const n=this.normalizeInstanceIdentifier(t);try{const i=this.getOrInitializeService({instanceIdentifier:n});s.resolve(i)}catch{}}}}clearInstance(e=$s){this.instancesDeferred.delete(e),this.instancesOptions.delete(e),this.instances.delete(e)}async delete(){const e=Array.from(this.instances.values());await Promise.all([...e.filter(t=>"INTERNAL"in t).map(t=>t.INTERNAL.delete()),...e.filter(t=>"_delete"in t).map(t=>t._delete())])}isComponentSet(){return this.component!=null}isInitialized(e=$s){return this.instances.has(e)}getOptions(e=$s){return this.instancesOptions.get(e)||{}}initialize(e={}){const{options:t={}}=e,s=this.normalizeInstanceIdentifier(e.instanceIdentifier);if(this.isInitialized(s))throw Error(`${this.name}(${s}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);const n=this.getOrInitializeService({instanceIdentifier:s,options:t});for(const[i,a]of this.instancesDeferred.entries()){const l=this.normalizeInstanceIdentifier(i);s===l&&a.resolve(n)}return n}onInit(e,t){var s;const n=this.normalizeInstanceIdentifier(t),i=(s=this.onInitCallbacks.get(n))!==null&&s!==void 0?s:new Set;i.add(e),this.onInitCallbacks.set(n,i);const a=this.instances.get(n);return a&&e(a,n),()=>{i.delete(e)}}invokeOnInitCallbacks(e,t){const s=this.onInitCallbacks.get(t);if(s)for(const n of s)try{n(e,t)}catch{}}getOrInitializeService({instanceIdentifier:e,options:t={}}){let s=this.instances.get(e);if(!s&&this.component&&(s=this.component.instanceFactory(this.container,{instanceIdentifier:yN(e),options:t}),this.instances.set(e,s),this.instancesOptions.set(e,t),this.invokeOnInitCallbacks(s,e),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,e,s)}catch{}return s||null}normalizeInstanceIdentifier(e=$s){return this.component?this.component.multipleInstances?e:$s:e}shouldAutoInitialize(){return!!this.component&&this.component.instantiationMode!=="EXPLICIT"}}function yN(r){return r===$s?void 0:r}function bN(r){return r.instantiationMode==="EAGER"}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class vN{constructor(e){this.name=e,this.providers=new Map}addComponent(e){const t=this.getProvider(e.name);if(t.isComponentSet())throw new Error(`Component ${e.name} has already been registered with ${this.name}`);t.setComponent(e)}addOrOverwriteComponent(e){this.getProvider(e.name).isComponentSet()&&this.providers.delete(e.name),this.addComponent(e)}getProvider(e){if(this.providers.has(e))return this.providers.get(e);const t=new xN(e,this);return this.providers.set(e,t),t}getProviders(){return Array.from(this.providers.values())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var Ee;(function(r){r[r.DEBUG=0]="DEBUG",r[r.VERBOSE=1]="VERBOSE",r[r.INFO=2]="INFO",r[r.WARN=3]="WARN",r[r.ERROR=4]="ERROR",r[r.SILENT=5]="SILENT"})(Ee||(Ee={}));const wN={debug:Ee.DEBUG,verbose:Ee.VERBOSE,info:Ee.INFO,warn:Ee.WARN,error:Ee.ERROR,silent:Ee.SILENT},_N=Ee.INFO,TN={[Ee.DEBUG]:"log",[Ee.VERBOSE]:"log",[Ee.INFO]:"info",[Ee.WARN]:"warn",[Ee.ERROR]:"error"},EN=(r,e,...t)=>{if(e<r.logLevel)return;const s=new Date().toISOString(),n=TN[e];if(n)console[n](`[${s}]  ${r.name}:`,...t);else throw new Error(`Attempted to log a message with an invalid logType (value: ${e})`)};class Wu{constructor(e){this.name=e,this._logLevel=_N,this._logHandler=EN,this._userLogHandler=null}get logLevel(){return this._logLevel}set logLevel(e){if(!(e in Ee))throw new TypeError(`Invalid value "${e}" assigned to \`logLevel\``);this._logLevel=e}setLogLevel(e){this._logLevel=typeof e=="string"?wN[e]:e}get logHandler(){return this._logHandler}set logHandler(e){if(typeof e!="function")throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=e}get userLogHandler(){return this._userLogHandler}set userLogHandler(e){this._userLogHandler=e}debug(...e){this._userLogHandler&&this._userLogHandler(this,Ee.DEBUG,...e),this._logHandler(this,Ee.DEBUG,...e)}log(...e){this._userLogHandler&&this._userLogHandler(this,Ee.VERBOSE,...e),this._logHandler(this,Ee.VERBOSE,...e)}info(...e){this._userLogHandler&&this._userLogHandler(this,Ee.INFO,...e),this._logHandler(this,Ee.INFO,...e)}warn(...e){this._userLogHandler&&this._userLogHandler(this,Ee.WARN,...e),this._logHandler(this,Ee.WARN,...e)}error(...e){this._userLogHandler&&this._userLogHandler(this,Ee.ERROR,...e),this._logHandler(this,Ee.ERROR,...e)}}const NN=(r,e)=>e.some(t=>r instanceof t);let Um,$m;function CN(){return Um||(Um=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}function IN(){return $m||($m=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}const q0=new WeakMap,Od=new WeakMap,W0=new WeakMap,Kc=new WeakMap,Gu=new WeakMap;function SN(r){const e=new Promise((t,s)=>{const n=()=>{r.removeEventListener("success",i),r.removeEventListener("error",a)},i=()=>{t(ys(r.result)),n()},a=()=>{s(r.error),n()};r.addEventListener("success",i),r.addEventListener("error",a)});return e.then(t=>{t instanceof IDBCursor&&q0.set(t,r)}).catch(()=>{}),Gu.set(e,r),e}function kN(r){if(Od.has(r))return;const e=new Promise((t,s)=>{const n=()=>{r.removeEventListener("complete",i),r.removeEventListener("error",a),r.removeEventListener("abort",a)},i=()=>{t(),n()},a=()=>{s(r.error||new DOMException("AbortError","AbortError")),n()};r.addEventListener("complete",i),r.addEventListener("error",a),r.addEventListener("abort",a)});Od.set(r,e)}let Ld={get(r,e,t){if(r instanceof IDBTransaction){if(e==="done")return Od.get(r);if(e==="objectStoreNames")return r.objectStoreNames||W0.get(r);if(e==="store")return t.objectStoreNames[1]?void 0:t.objectStore(t.objectStoreNames[0])}return ys(r[e])},set(r,e,t){return r[e]=t,!0},has(r,e){return r instanceof IDBTransaction&&(e==="done"||e==="store")?!0:e in r}};function jN(r){Ld=r(Ld)}function AN(r){return r===IDBDatabase.prototype.transaction&&!("objectStoreNames"in IDBTransaction.prototype)?function(e,...t){const s=r.call(Qc(this),e,...t);return W0.set(s,e.sort?e.sort():[e]),ys(s)}:IN().includes(r)?function(...e){return r.apply(Qc(this),e),ys(q0.get(this))}:function(...e){return ys(r.apply(Qc(this),e))}}function PN(r){return typeof r=="function"?AN(r):(r instanceof IDBTransaction&&kN(r),NN(r,CN())?new Proxy(r,Ld):r)}function ys(r){if(r instanceof IDBRequest)return SN(r);if(Kc.has(r))return Kc.get(r);const e=PN(r);return e!==r&&(Kc.set(r,e),Gu.set(e,r)),e}const Qc=r=>Gu.get(r);function RN(r,e,{blocked:t,upgrade:s,blocking:n,terminated:i}={}){const a=indexedDB.open(r,e),l=ys(a);return s&&a.addEventListener("upgradeneeded",d=>{s(ys(a.result),d.oldVersion,d.newVersion,ys(a.transaction),d)}),t&&a.addEventListener("blocked",d=>t(d.oldVersion,d.newVersion,d)),l.then(d=>{i&&d.addEventListener("close",()=>i()),n&&d.addEventListener("versionchange",u=>n(u.oldVersion,u.newVersion,u))}).catch(()=>{}),l}const MN=["get","getKey","getAll","getAllKeys","count"],DN=["put","add","delete","clear"],Yc=new Map;function Bm(r,e){if(!(r instanceof IDBDatabase&&!(e in r)&&typeof e=="string"))return;if(Yc.get(e))return Yc.get(e);const t=e.replace(/FromIndex$/,""),s=e!==t,n=DN.includes(t);if(!(t in(s?IDBIndex:IDBObjectStore).prototype)||!(n||MN.includes(t)))return;const i=async function(a,...l){const d=this.transaction(a,n?"readwrite":"readonly");let u=d.store;return s&&(u=u.index(l.shift())),(await Promise.all([u[t](...l),n&&d.done]))[0]};return Yc.set(e,i),i}jN(r=>({...r,get:(e,t,s)=>Bm(e,t)||r.get(e,t,s),has:(e,t)=>!!Bm(e,t)||r.has(e,t)}));/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ON{constructor(e){this.container=e}getPlatformInfoString(){return this.container.getProviders().map(t=>{if(LN(t)){const s=t.getImmediate();return`${s.library}/${s.version}`}else return null}).filter(t=>t).join(" ")}}function LN(r){const e=r.getComponent();return(e==null?void 0:e.type)==="VERSION"}const Vd="@firebase/app",zm="0.13.1";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Dr=new Wu("@firebase/app"),VN="@firebase/app-compat",FN="@firebase/analytics-compat",UN="@firebase/analytics",$N="@firebase/app-check-compat",BN="@firebase/app-check",zN="@firebase/auth",HN="@firebase/auth-compat",qN="@firebase/database",WN="@firebase/data-connect",GN="@firebase/database-compat",KN="@firebase/functions",QN="@firebase/functions-compat",YN="@firebase/installations",XN="@firebase/installations-compat",JN="@firebase/messaging",ZN="@firebase/messaging-compat",eC="@firebase/performance",tC="@firebase/performance-compat",rC="@firebase/remote-config",sC="@firebase/remote-config-compat",nC="@firebase/storage",oC="@firebase/storage-compat",iC="@firebase/firestore",aC="@firebase/ai",lC="@firebase/firestore-compat",cC="firebase",dC="11.9.0";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Fd="[DEFAULT]",uC={[Vd]:"fire-core",[VN]:"fire-core-compat",[UN]:"fire-analytics",[FN]:"fire-analytics-compat",[BN]:"fire-app-check",[$N]:"fire-app-check-compat",[zN]:"fire-auth",[HN]:"fire-auth-compat",[qN]:"fire-rtdb",[WN]:"fire-data-connect",[GN]:"fire-rtdb-compat",[KN]:"fire-fn",[QN]:"fire-fn-compat",[YN]:"fire-iid",[XN]:"fire-iid-compat",[JN]:"fire-fcm",[ZN]:"fire-fcm-compat",[eC]:"fire-perf",[tC]:"fire-perf-compat",[rC]:"fire-rc",[sC]:"fire-rc-compat",[nC]:"fire-gcs",[oC]:"fire-gcs-compat",[iC]:"fire-fst",[lC]:"fire-fst-compat",[aC]:"fire-vertex","fire-js":"fire-js",[cC]:"fire-js-all"};/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Qa=new Map,hC=new Map,Ud=new Map;function Hm(r,e){try{r.container.addComponent(e)}catch(t){Dr.debug(`Component ${e.name} failed to register with FirebaseApp ${r.name}`,t)}}function nn(r){const e=r.name;if(Ud.has(e))return Dr.debug(`There were multiple attempts to register component ${e}.`),!1;Ud.set(e,r);for(const t of Qa.values())Hm(t,r);for(const t of hC.values())Hm(t,r);return!0}function Fl(r,e){const t=r.container.getProvider("heartbeat").getImmediate({optional:!0});return t&&t.triggerHeartbeat(),r.container.getProvider(e)}function Dt(r){return r==null?!1:r.settings!==void 0}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const fC={"no-app":"No Firebase App '{$appName}' has been created - call initializeApp() first","bad-app-name":"Illegal App name: '{$appName}'","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","server-app-deleted":"Firebase Server App has been deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}.","finalization-registry-not-supported":"FirebaseServerApp deleteOnDeref field defined but the JS runtime does not support FinalizationRegistry.","invalid-server-app-environment":"FirebaseServerApp is not for use in browser environments."},bs=new Di("app","Firebase",fC);/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class mC{constructor(e,t,s){this._isDeleted=!1,this._options=Object.assign({},e),this._config=Object.assign({},t),this._name=t.name,this._automaticDataCollectionEnabled=t.automaticDataCollectionEnabled,this._container=s,this.container.addComponent(new Ts("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(e){this.checkDestroyed(),this._automaticDataCollectionEnabled=e}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(e){this._isDeleted=e}checkDestroyed(){if(this.isDeleted)throw bs.create("app-deleted",{appName:this._name})}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const mn=dC;function G0(r,e={}){let t=r;typeof e!="object"&&(e={name:e});const s=Object.assign({name:Fd,automaticDataCollectionEnabled:!0},e),n=s.name;if(typeof n!="string"||!n)throw bs.create("bad-app-name",{appName:String(n)});if(t||(t=B0()),!t)throw bs.create("no-options");const i=Qa.get(n);if(i){if(sn(t,i.options)&&sn(s,i.config))return i;throw bs.create("duplicate-app",{appName:n})}const a=new vN(n);for(const d of Ud.values())a.addComponent(d);const l=new mC(t,s,a);return Qa.set(n,l),l}function Ku(r=Fd){const e=Qa.get(r);if(!e&&r===Fd&&B0())return G0();if(!e)throw bs.create("no-app",{appName:r});return e}function cr(r,e,t){var s;let n=(s=uC[r])!==null&&s!==void 0?s:r;t&&(n+=`-${t}`);const i=n.match(/\s|\//),a=e.match(/\s|\//);if(i||a){const l=[`Unable to register library "${n}" with version "${e}":`];i&&l.push(`library name "${n}" contains illegal characters (whitespace or "/")`),i&&a&&l.push("and"),a&&l.push(`version name "${e}" contains illegal characters (whitespace or "/")`),Dr.warn(l.join(" "));return}nn(new Ts(`${n}-version`,()=>({library:n,version:e}),"VERSION"))}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const pC="firebase-heartbeat-database",gC=1,mi="firebase-heartbeat-store";let Xc=null;function K0(){return Xc||(Xc=RN(pC,gC,{upgrade:(r,e)=>{switch(e){case 0:try{r.createObjectStore(mi)}catch(t){console.warn(t)}}}}).catch(r=>{throw bs.create("idb-open",{originalErrorMessage:r.message})})),Xc}async function xC(r){try{const t=(await K0()).transaction(mi),s=await t.objectStore(mi).get(Q0(r));return await t.done,s}catch(e){if(e instanceof yr)Dr.warn(e.message);else{const t=bs.create("idb-get",{originalErrorMessage:e==null?void 0:e.message});Dr.warn(t.message)}}}async function qm(r,e){try{const s=(await K0()).transaction(mi,"readwrite");await s.objectStore(mi).put(e,Q0(r)),await s.done}catch(t){if(t instanceof yr)Dr.warn(t.message);else{const s=bs.create("idb-set",{originalErrorMessage:t==null?void 0:t.message});Dr.warn(s.message)}}}function Q0(r){return`${r.name}!${r.options.appId}`}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const yC=1024,bC=30;class vC{constructor(e){this.container=e,this._heartbeatsCache=null;const t=this.container.getProvider("app").getImmediate();this._storage=new _C(t),this._heartbeatsCachePromise=this._storage.read().then(s=>(this._heartbeatsCache=s,s))}async triggerHeartbeat(){var e,t;try{const n=this.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),i=Wm();if(((e=this._heartbeatsCache)===null||e===void 0?void 0:e.heartbeats)==null&&(this._heartbeatsCache=await this._heartbeatsCachePromise,((t=this._heartbeatsCache)===null||t===void 0?void 0:t.heartbeats)==null)||this._heartbeatsCache.lastSentHeartbeatDate===i||this._heartbeatsCache.heartbeats.some(a=>a.date===i))return;if(this._heartbeatsCache.heartbeats.push({date:i,agent:n}),this._heartbeatsCache.heartbeats.length>bC){const a=TC(this._heartbeatsCache.heartbeats);this._heartbeatsCache.heartbeats.splice(a,1)}return this._storage.overwrite(this._heartbeatsCache)}catch(s){Dr.warn(s)}}async getHeartbeatsHeader(){var e;try{if(this._heartbeatsCache===null&&await this._heartbeatsCachePromise,((e=this._heartbeatsCache)===null||e===void 0?void 0:e.heartbeats)==null||this._heartbeatsCache.heartbeats.length===0)return"";const t=Wm(),{heartbeatsToSend:s,unsentEntries:n}=wC(this._heartbeatsCache.heartbeats),i=Ka(JSON.stringify({version:2,heartbeats:s}));return this._heartbeatsCache.lastSentHeartbeatDate=t,n.length>0?(this._heartbeatsCache.heartbeats=n,await this._storage.overwrite(this._heartbeatsCache)):(this._heartbeatsCache.heartbeats=[],this._storage.overwrite(this._heartbeatsCache)),i}catch(t){return Dr.warn(t),""}}}function Wm(){return new Date().toISOString().substring(0,10)}function wC(r,e=yC){const t=[];let s=r.slice();for(const n of r){const i=t.find(a=>a.agent===n.agent);if(i){if(i.dates.push(n.date),Gm(t)>e){i.dates.pop();break}}else if(t.push({agent:n.agent,dates:[n.date]}),Gm(t)>e){t.pop();break}s=s.slice(1)}return{heartbeatsToSend:t,unsentEntries:s}}class _C{constructor(e){this.app=e,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}async runIndexedDBEnvironmentCheck(){return lN()?cN().then(()=>!0).catch(()=>!1):!1}async read(){if(await this._canUseIndexedDBPromise){const t=await xC(this.app);return t!=null&&t.heartbeats?t:{heartbeats:[]}}else return{heartbeats:[]}}async overwrite(e){var t;if(await this._canUseIndexedDBPromise){const n=await this.read();return qm(this.app,{lastSentHeartbeatDate:(t=e.lastSentHeartbeatDate)!==null&&t!==void 0?t:n.lastSentHeartbeatDate,heartbeats:e.heartbeats})}else return}async add(e){var t;if(await this._canUseIndexedDBPromise){const n=await this.read();return qm(this.app,{lastSentHeartbeatDate:(t=e.lastSentHeartbeatDate)!==null&&t!==void 0?t:n.lastSentHeartbeatDate,heartbeats:[...n.heartbeats,...e.heartbeats]})}else return}}function Gm(r){return Ka(JSON.stringify({version:2,heartbeats:r})).length}function TC(r){if(r.length===0)return-1;let e=0,t=r[0].date;for(let s=1;s<r.length;s++)r[s].date<t&&(t=r[s].date,e=s);return e}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function EC(r){nn(new Ts("platform-logger",e=>new ON(e),"PRIVATE")),nn(new Ts("heartbeat",e=>new vC(e),"PRIVATE")),cr(Vd,zm,r),cr(Vd,zm,"esm2017"),cr("fire-js","")}EC("");var NC="firebase",CC="11.9.1";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */cr(NC,CC,"app");function Y0(){return{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}}const IC=Y0,X0=new Di("auth","Firebase",Y0());/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ya=new Wu("@firebase/auth");function SC(r,...e){Ya.logLevel<=Ee.WARN&&Ya.warn(`Auth (${mn}): ${r}`,...e)}function Aa(r,...e){Ya.logLevel<=Ee.ERROR&&Ya.error(`Auth (${mn}): ${r}`,...e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function pr(r,...e){throw Yu(r,...e)}function Ft(r,...e){return Yu(r,...e)}function Qu(r,e,t){const s=Object.assign(Object.assign({},IC()),{[e]:t});return new Di("auth","Firebase",s).create(e,{appName:r.name})}function Ar(r){return Qu(r,"operation-not-supported-in-this-environment","Operations that alter the current user are not supported in conjunction with FirebaseServerApp")}function kC(r,e,t){const s=t;if(!(e instanceof s))throw s.name!==e.constructor.name&&pr(r,"argument-error"),Qu(r,"argument-error",`Type of ${e.constructor.name} does not match expected instance.Did you pass a reference from a different Auth SDK?`)}function Yu(r,...e){if(typeof r!="string"){const t=e[0],s=[...e.slice(1)];return s[0]&&(s[0].appName=r.name),r._errorFactory.create(t,...s)}return X0.create(r,...e)}function ee(r,e,...t){if(!r)throw Yu(e,...t)}function kr(r){const e="INTERNAL ASSERTION FAILED: "+r;throw Aa(e),new Error(e)}function Or(r,e){r||kr(e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function $d(){var r;return typeof self<"u"&&((r=self.location)===null||r===void 0?void 0:r.href)||""}function J0(){return Km()==="http:"||Km()==="https:"}function Km(){var r;return typeof self<"u"&&((r=self.location)===null||r===void 0?void 0:r.protocol)||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function jC(){return typeof navigator<"u"&&navigator&&"onLine"in navigator&&typeof navigator.onLine=="boolean"&&(J0()||nN()||"connection"in navigator)?navigator.onLine:!0}function AC(){if(typeof navigator>"u")return null;const r=navigator;return r.languages&&r.languages[0]||r.language||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Oi{constructor(e,t){this.shortDelay=e,this.longDelay=t,Or(t>e,"Short delay should be less than long delay!"),this.isMobile=tN()||oN()}get(){return jC()?this.isMobile?this.longDelay:this.shortDelay:Math.min(5e3,this.shortDelay)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Xu(r,e){Or(r.emulator,"Emulator should always be set here");const{url:t}=r.emulator;return e?`${t}${e.startsWith("/")?e.slice(1):e}`:t}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Z0{static initialize(e,t,s){this.fetchImpl=e,t&&(this.headersImpl=t),s&&(this.responseImpl=s)}static fetch(){if(this.fetchImpl)return this.fetchImpl;if(typeof self<"u"&&"fetch"in self)return self.fetch;if(typeof globalThis<"u"&&globalThis.fetch)return globalThis.fetch;if(typeof fetch<"u")return fetch;kr("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static headers(){if(this.headersImpl)return this.headersImpl;if(typeof self<"u"&&"Headers"in self)return self.Headers;if(typeof globalThis<"u"&&globalThis.Headers)return globalThis.Headers;if(typeof Headers<"u")return Headers;kr("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static response(){if(this.responseImpl)return this.responseImpl;if(typeof self<"u"&&"Response"in self)return self.Response;if(typeof globalThis<"u"&&globalThis.Response)return globalThis.Response;if(typeof Response<"u")return Response;kr("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const PC={CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_PASSWORD:"wrong-password",MISSING_PASSWORD:"missing-password",INVALID_LOGIN_CREDENTIALS:"invalid-credential",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_REQ_TYPE:"internal-error",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",PASSWORD_DOES_NOT_MEET_REQUIREMENTS:"password-does-not-meet-requirements",INVALID_CODE:"invalid-verification-code",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_SESSION_INFO:"missing-verification-id",SESSION_EXPIRED:"code-expired",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",BLOCKING_FUNCTION_ERROR_RESPONSE:"internal-error",RECAPTCHA_NOT_ENABLED:"recaptcha-not-enabled",MISSING_RECAPTCHA_TOKEN:"missing-recaptcha-token",INVALID_RECAPTCHA_TOKEN:"invalid-recaptcha-token",INVALID_RECAPTCHA_ACTION:"invalid-recaptcha-action",MISSING_CLIENT_TYPE:"missing-client-type",MISSING_RECAPTCHA_VERSION:"missing-recaptcha-version",INVALID_RECAPTCHA_VERSION:"invalid-recaptcha-version",INVALID_REQ_TYPE:"invalid-req-type"};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const RC=["/v1/accounts:signInWithCustomToken","/v1/accounts:signInWithEmailLink","/v1/accounts:signInWithIdp","/v1/accounts:signInWithPassword","/v1/accounts:signInWithPhoneNumber","/v1/token"],MC=new Oi(3e4,6e4);function br(r,e){return r.tenantId&&!e.tenantId?Object.assign(Object.assign({},e),{tenantId:r.tenantId}):e}async function Zt(r,e,t,s,n={}){return ey(r,n,async()=>{let i={},a={};s&&(e==="GET"?a=s:i={body:JSON.stringify(s)});const l=mo(Object.assign({key:r.config.apiKey},a)).slice(1),d=await r._getAdditionalHeaders();d["Content-Type"]="application/json",r.languageCode&&(d["X-Firebase-Locale"]=r.languageCode);const u=Object.assign({method:e,headers:d},i);return sN()||(u.referrerPolicy="no-referrer"),r.emulatorConfig&&js(r.emulatorConfig.host)&&(u.credentials="include"),Z0.fetch()(await ty(r,r.config.apiHost,t,l),u)})}async function ey(r,e,t){r._canInitEmulator=!1;const s=Object.assign(Object.assign({},PC),e);try{const n=new OC(r),i=await Promise.race([t(),n.promise]);n.clearNetworkTimeout();const a=await i.json();if("needConfirmation"in a)throw Ho(r,"account-exists-with-different-credential",a);if(i.ok&&!("errorMessage"in a))return a;{const l=i.ok?a.errorMessage:a.error.message,[d,u]=l.split(" : ");if(d==="FEDERATED_USER_ID_ALREADY_LINKED")throw Ho(r,"credential-already-in-use",a);if(d==="EMAIL_EXISTS")throw Ho(r,"email-already-in-use",a);if(d==="USER_DISABLED")throw Ho(r,"user-disabled",a);const h=s[d]||d.toLowerCase().replace(/[_\s]+/g,"-");if(u)throw Qu(r,h,u);pr(r,h)}}catch(n){if(n instanceof yr)throw n;pr(r,"network-request-failed",{message:String(n)})}}async function Ul(r,e,t,s,n={}){const i=await Zt(r,e,t,s,n);return"mfaPendingCredential"in i&&pr(r,"multi-factor-auth-required",{_serverResponse:i}),i}async function ty(r,e,t,s){const n=`${e}${t}?${s}`,i=r,a=i.config.emulator?Xu(r.config,n):`${r.config.apiScheme}://${n}`;return RC.includes(t)&&(await i._persistenceManagerAvailable,i._getPersistenceType()==="COOKIE")?i._getPersistence()._getFinalTarget(a).toString():a}function DC(r){switch(r){case"ENFORCE":return"ENFORCE";case"AUDIT":return"AUDIT";case"OFF":return"OFF";default:return"ENFORCEMENT_STATE_UNSPECIFIED"}}class OC{clearNetworkTimeout(){clearTimeout(this.timer)}constructor(e){this.auth=e,this.timer=null,this.promise=new Promise((t,s)=>{this.timer=setTimeout(()=>s(Ft(this.auth,"network-request-failed")),MC.get())})}}function Ho(r,e,t){const s={appName:r.name};t.email&&(s.email=t.email),t.phoneNumber&&(s.phoneNumber=t.phoneNumber);const n=Ft(r,e,s);return n.customData._tokenResponse=t,n}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Qm(r){return r!==void 0&&r.getResponse!==void 0}function Ym(r){return r!==void 0&&r.enterprise!==void 0}class ry{constructor(e){if(this.siteKey="",this.recaptchaEnforcementState=[],e.recaptchaKey===void 0)throw new Error("recaptchaKey undefined");this.siteKey=e.recaptchaKey.split("/")[3],this.recaptchaEnforcementState=e.recaptchaEnforcementState}getProviderEnforcementState(e){if(!this.recaptchaEnforcementState||this.recaptchaEnforcementState.length===0)return null;for(const t of this.recaptchaEnforcementState)if(t.provider&&t.provider===e)return DC(t.enforcementState);return null}isProviderEnabled(e){return this.getProviderEnforcementState(e)==="ENFORCE"||this.getProviderEnforcementState(e)==="AUDIT"}isAnyProviderEnabled(){return this.isProviderEnabled("EMAIL_PASSWORD_PROVIDER")||this.isProviderEnabled("PHONE_PROVIDER")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function LC(r){return(await Zt(r,"GET","/v1/recaptchaParams")).recaptchaSiteKey||""}async function sy(r,e){return Zt(r,"GET","/v2/recaptchaConfig",br(r,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function VC(r,e){return Zt(r,"POST","/v1/accounts:delete",e)}async function Xa(r,e){return Zt(r,"POST","/v1/accounts:lookup",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ei(r){if(r)try{const e=new Date(Number(r));if(!isNaN(e.getTime()))return e.toUTCString()}catch{}}async function FC(r,e=!1){const t=Ye(r),s=await t.getIdToken(e),n=Ju(s);ee(n&&n.exp&&n.auth_time&&n.iat,t.auth,"internal-error");const i=typeof n.firebase=="object"?n.firebase:void 0,a=i==null?void 0:i.sign_in_provider;return{claims:n,token:s,authTime:ei(Jc(n.auth_time)),issuedAtTime:ei(Jc(n.iat)),expirationTime:ei(Jc(n.exp)),signInProvider:a||null,signInSecondFactor:(i==null?void 0:i.sign_in_second_factor)||null}}function Jc(r){return Number(r)*1e3}function Ju(r){const[e,t,s]=r.split(".");if(e===void 0||t===void 0||s===void 0)return Aa("JWT malformed, contained fewer than 3 sections"),null;try{const n=F0(t);return n?JSON.parse(n):(Aa("Failed to decode base64 JWT payload"),null)}catch(n){return Aa("Caught error parsing JWT payload as JSON",n==null?void 0:n.toString()),null}}function Xm(r){const e=Ju(r);return ee(e,"internal-error"),ee(typeof e.exp<"u","internal-error"),ee(typeof e.iat<"u","internal-error"),Number(e.exp)-Number(e.iat)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function pi(r,e,t=!1){if(t)return e;try{return await e}catch(s){throw s instanceof yr&&UC(s)&&r.auth.currentUser===r&&await r.auth.signOut(),s}}function UC({code:r}){return r==="auth/user-disabled"||r==="auth/user-token-expired"}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $C{constructor(e){this.user=e,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}_start(){this.isRunning||(this.isRunning=!0,this.schedule())}_stop(){this.isRunning&&(this.isRunning=!1,this.timerId!==null&&clearTimeout(this.timerId))}getInterval(e){var t;if(e){const s=this.errorBackoff;return this.errorBackoff=Math.min(this.errorBackoff*2,96e4),s}else{this.errorBackoff=3e4;const n=((t=this.user.stsTokenManager.expirationTime)!==null&&t!==void 0?t:0)-Date.now()-3e5;return Math.max(0,n)}}schedule(e=!1){if(!this.isRunning)return;const t=this.getInterval(e);this.timerId=setTimeout(async()=>{await this.iteration()},t)}async iteration(){try{await this.user.getIdToken(!0)}catch(e){(e==null?void 0:e.code)==="auth/network-request-failed"&&this.schedule(!0);return}this.schedule()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Bd{constructor(e,t){this.createdAt=e,this.lastLoginAt=t,this._initializeTime()}_initializeTime(){this.lastSignInTime=ei(this.lastLoginAt),this.creationTime=ei(this.createdAt)}_copy(e){this.createdAt=e.createdAt,this.lastLoginAt=e.lastLoginAt,this._initializeTime()}toJSON(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Ja(r){var e;const t=r.auth,s=await r.getIdToken(),n=await pi(r,Xa(t,{idToken:s}));ee(n==null?void 0:n.users.length,t,"internal-error");const i=n.users[0];r._notifyReloadListener(i);const a=!((e=i.providerUserInfo)===null||e===void 0)&&e.length?ny(i.providerUserInfo):[],l=zC(r.providerData,a),d=r.isAnonymous,u=!(r.email&&i.passwordHash)&&!(l!=null&&l.length),h=d?u:!1,m={uid:i.localId,displayName:i.displayName||null,photoURL:i.photoUrl||null,email:i.email||null,emailVerified:i.emailVerified||!1,phoneNumber:i.phoneNumber||null,tenantId:i.tenantId||null,providerData:l,metadata:new Bd(i.createdAt,i.lastLoginAt),isAnonymous:h};Object.assign(r,m)}async function BC(r){const e=Ye(r);await Ja(e),await e.auth._persistUserIfCurrent(e),e.auth._notifyListenersIfCurrent(e)}function zC(r,e){return[...r.filter(s=>!e.some(n=>n.providerId===s.providerId)),...e]}function ny(r){return r.map(e=>{var{providerId:t}=e,s=Cu(e,["providerId"]);return{providerId:t,uid:s.rawId||"",displayName:s.displayName||null,email:s.email||null,phoneNumber:s.phoneNumber||null,photoURL:s.photoUrl||null}})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function HC(r,e){const t=await ey(r,{},async()=>{const s=mo({grant_type:"refresh_token",refresh_token:e}).slice(1),{tokenApiHost:n,apiKey:i}=r.config,a=await ty(r,n,"/v1/token",`key=${i}`),l=await r._getAdditionalHeaders();l["Content-Type"]="application/x-www-form-urlencoded";const d={method:"POST",headers:l,body:s};return r.emulatorConfig&&js(r.emulatorConfig.host)&&(d.credentials="include"),Z0.fetch()(a,d)});return{accessToken:t.access_token,expiresIn:t.expires_in,refreshToken:t.refresh_token}}async function qC(r,e){return Zt(r,"POST","/v2/accounts:revokeToken",br(r,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class An{constructor(){this.refreshToken=null,this.accessToken=null,this.expirationTime=null}get isExpired(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}updateFromServerResponse(e){ee(e.idToken,"internal-error"),ee(typeof e.idToken<"u","internal-error"),ee(typeof e.refreshToken<"u","internal-error");const t="expiresIn"in e&&typeof e.expiresIn<"u"?Number(e.expiresIn):Xm(e.idToken);this.updateTokensAndExpiration(e.idToken,e.refreshToken,t)}updateFromIdToken(e){ee(e.length!==0,"internal-error");const t=Xm(e);this.updateTokensAndExpiration(e,null,t)}async getToken(e,t=!1){return!t&&this.accessToken&&!this.isExpired?this.accessToken:(ee(this.refreshToken,e,"user-token-expired"),this.refreshToken?(await this.refresh(e,this.refreshToken),this.accessToken):null)}clearRefreshToken(){this.refreshToken=null}async refresh(e,t){const{accessToken:s,refreshToken:n,expiresIn:i}=await HC(e,t);this.updateTokensAndExpiration(s,n,Number(i))}updateTokensAndExpiration(e,t,s){this.refreshToken=t||null,this.accessToken=e||null,this.expirationTime=Date.now()+s*1e3}static fromJSON(e,t){const{refreshToken:s,accessToken:n,expirationTime:i}=t,a=new An;return s&&(ee(typeof s=="string","internal-error",{appName:e}),a.refreshToken=s),n&&(ee(typeof n=="string","internal-error",{appName:e}),a.accessToken=n),i&&(ee(typeof i=="number","internal-error",{appName:e}),a.expirationTime=i),a}toJSON(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}_assign(e){this.accessToken=e.accessToken,this.refreshToken=e.refreshToken,this.expirationTime=e.expirationTime}_clone(){return Object.assign(new An,this.toJSON())}_performRefresh(){return kr("not implemented")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Kr(r,e){ee(typeof r=="string"||typeof r>"u","internal-error",{appName:e})}class Yt{constructor(e){var{uid:t,auth:s,stsTokenManager:n}=e,i=Cu(e,["uid","auth","stsTokenManager"]);this.providerId="firebase",this.proactiveRefresh=new $C(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=t,this.auth=s,this.stsTokenManager=n,this.accessToken=n.accessToken,this.displayName=i.displayName||null,this.email=i.email||null,this.emailVerified=i.emailVerified||!1,this.phoneNumber=i.phoneNumber||null,this.photoURL=i.photoURL||null,this.isAnonymous=i.isAnonymous||!1,this.tenantId=i.tenantId||null,this.providerData=i.providerData?[...i.providerData]:[],this.metadata=new Bd(i.createdAt||void 0,i.lastLoginAt||void 0)}async getIdToken(e){const t=await pi(this,this.stsTokenManager.getToken(this.auth,e));return ee(t,this.auth,"internal-error"),this.accessToken!==t&&(this.accessToken=t,await this.auth._persistUserIfCurrent(this),this.auth._notifyListenersIfCurrent(this)),t}getIdTokenResult(e){return FC(this,e)}reload(){return BC(this)}_assign(e){this!==e&&(ee(this.uid===e.uid,this.auth,"internal-error"),this.displayName=e.displayName,this.photoURL=e.photoURL,this.email=e.email,this.emailVerified=e.emailVerified,this.phoneNumber=e.phoneNumber,this.isAnonymous=e.isAnonymous,this.tenantId=e.tenantId,this.providerData=e.providerData.map(t=>Object.assign({},t)),this.metadata._copy(e.metadata),this.stsTokenManager._assign(e.stsTokenManager))}_clone(e){const t=new Yt(Object.assign(Object.assign({},this),{auth:e,stsTokenManager:this.stsTokenManager._clone()}));return t.metadata._copy(this.metadata),t}_onReload(e){ee(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=e,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}_notifyReloadListener(e){this.reloadListener?this.reloadListener(e):this.reloadUserInfo=e}_startProactiveRefresh(){this.proactiveRefresh._start()}_stopProactiveRefresh(){this.proactiveRefresh._stop()}async _updateTokensIfNecessary(e,t=!1){let s=!1;e.idToken&&e.idToken!==this.stsTokenManager.accessToken&&(this.stsTokenManager.updateFromServerResponse(e),s=!0),t&&await Ja(this),await this.auth._persistUserIfCurrent(this),s&&this.auth._notifyListenersIfCurrent(this)}async delete(){if(Dt(this.auth.app))return Promise.reject(Ar(this.auth));const e=await this.getIdToken();return await pi(this,VC(this.auth,{idToken:e})),this.stsTokenManager.clearRefreshToken(),this.auth.signOut()}toJSON(){return Object.assign(Object.assign({uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map(e=>Object.assign({},e)),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId},this.metadata.toJSON()),{apiKey:this.auth.config.apiKey,appName:this.auth.name})}get refreshToken(){return this.stsTokenManager.refreshToken||""}static _fromJSON(e,t){var s,n,i,a,l,d,u,h;const m=(s=t.displayName)!==null&&s!==void 0?s:void 0,x=(n=t.email)!==null&&n!==void 0?n:void 0,g=(i=t.phoneNumber)!==null&&i!==void 0?i:void 0,v=(a=t.photoURL)!==null&&a!==void 0?a:void 0,b=(l=t.tenantId)!==null&&l!==void 0?l:void 0,w=(d=t._redirectEventId)!==null&&d!==void 0?d:void 0,k=(u=t.createdAt)!==null&&u!==void 0?u:void 0,T=(h=t.lastLoginAt)!==null&&h!==void 0?h:void 0,{uid:_,emailVerified:R,isAnonymous:D,providerData:$,stsTokenManager:S}=t;ee(_&&S,e,"internal-error");const I=An.fromJSON(this.name,S);ee(typeof _=="string",e,"internal-error"),Kr(m,e.name),Kr(x,e.name),ee(typeof R=="boolean",e,"internal-error"),ee(typeof D=="boolean",e,"internal-error"),Kr(g,e.name),Kr(v,e.name),Kr(b,e.name),Kr(w,e.name),Kr(k,e.name),Kr(T,e.name);const E=new Yt({uid:_,auth:e,email:x,emailVerified:R,displayName:m,isAnonymous:D,photoURL:v,phoneNumber:g,tenantId:b,stsTokenManager:I,createdAt:k,lastLoginAt:T});return $&&Array.isArray($)&&(E.providerData=$.map(j=>Object.assign({},j))),w&&(E._redirectEventId=w),E}static async _fromIdTokenResponse(e,t,s=!1){const n=new An;n.updateFromServerResponse(t);const i=new Yt({uid:t.localId,auth:e,stsTokenManager:n,isAnonymous:s});return await Ja(i),i}static async _fromGetAccountInfoResponse(e,t,s){const n=t.users[0];ee(n.localId!==void 0,"internal-error");const i=n.providerUserInfo!==void 0?ny(n.providerUserInfo):[],a=!(n.email&&n.passwordHash)&&!(i!=null&&i.length),l=new An;l.updateFromIdToken(s);const d=new Yt({uid:n.localId,auth:e,stsTokenManager:l,isAnonymous:a}),u={uid:n.localId,displayName:n.displayName||null,photoURL:n.photoUrl||null,email:n.email||null,emailVerified:n.emailVerified||!1,phoneNumber:n.phoneNumber||null,tenantId:n.tenantId||null,providerData:i,metadata:new Bd(n.createdAt,n.lastLoginAt),isAnonymous:!(n.email&&n.passwordHash)&&!(i!=null&&i.length)};return Object.assign(d,u),d}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Jm=new Map;function jr(r){Or(r instanceof Function,"Expected a class definition");let e=Jm.get(r);return e?(Or(e instanceof r,"Instance stored in cache mismatched with class"),e):(e=new r,Jm.set(r,e),e)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class oy{constructor(){this.type="NONE",this.storage={}}async _isAvailable(){return!0}async _set(e,t){this.storage[e]=t}async _get(e){const t=this.storage[e];return t===void 0?null:t}async _remove(e){delete this.storage[e]}_addListener(e,t){}_removeListener(e,t){}}oy.type="NONE";const Zm=oy;/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Pa(r,e,t){return`firebase:${r}:${e}:${t}`}class Pn{constructor(e,t,s){this.persistence=e,this.auth=t,this.userKey=s;const{config:n,name:i}=this.auth;this.fullUserKey=Pa(this.userKey,n.apiKey,i),this.fullPersistenceKey=Pa("persistence",n.apiKey,i),this.boundEventHandler=t._onStorageEvent.bind(t),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}setCurrentUser(e){return this.persistence._set(this.fullUserKey,e.toJSON())}async getCurrentUser(){const e=await this.persistence._get(this.fullUserKey);if(!e)return null;if(typeof e=="string"){const t=await Xa(this.auth,{idToken:e}).catch(()=>{});return t?Yt._fromGetAccountInfoResponse(this.auth,t,e):null}return Yt._fromJSON(this.auth,e)}removeCurrentUser(){return this.persistence._remove(this.fullUserKey)}savePersistenceForRedirect(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}async setPersistence(e){if(this.persistence===e)return;const t=await this.getCurrentUser();if(await this.removeCurrentUser(),this.persistence=e,t)return this.setCurrentUser(t)}delete(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}static async create(e,t,s="authUser"){if(!t.length)return new Pn(jr(Zm),e,s);const n=(await Promise.all(t.map(async u=>{if(await u._isAvailable())return u}))).filter(u=>u);let i=n[0]||jr(Zm);const a=Pa(s,e.config.apiKey,e.name);let l=null;for(const u of t)try{const h=await u._get(a);if(h){let m;if(typeof h=="string"){const x=await Xa(e,{idToken:h}).catch(()=>{});if(!x)break;m=await Yt._fromGetAccountInfoResponse(e,x,h)}else m=Yt._fromJSON(e,h);u!==i&&(l=m),i=u;break}}catch{}const d=n.filter(u=>u._shouldAllowMigration);return!i._shouldAllowMigration||!d.length?new Pn(i,e,s):(i=d[0],l&&await i._set(a,l.toJSON()),await Promise.all(t.map(async u=>{if(u!==i)try{await u._remove(a)}catch{}})),new Pn(i,e,s))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ep(r){const e=r.toLowerCase();if(e.includes("opera/")||e.includes("opr/")||e.includes("opios/"))return"Opera";if(cy(e))return"IEMobile";if(e.includes("msie")||e.includes("trident/"))return"IE";if(e.includes("edge/"))return"Edge";if(iy(e))return"Firefox";if(e.includes("silk/"))return"Silk";if(uy(e))return"Blackberry";if(hy(e))return"Webos";if(ay(e))return"Safari";if((e.includes("chrome/")||ly(e))&&!e.includes("edge/"))return"Chrome";if(dy(e))return"Android";{const t=/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/,s=r.match(t);if((s==null?void 0:s.length)===2)return s[1]}return"Other"}function iy(r=vt()){return/firefox\//i.test(r)}function ay(r=vt()){const e=r.toLowerCase();return e.includes("safari/")&&!e.includes("chrome/")&&!e.includes("crios/")&&!e.includes("android")}function ly(r=vt()){return/crios\//i.test(r)}function cy(r=vt()){return/iemobile/i.test(r)}function dy(r=vt()){return/android/i.test(r)}function uy(r=vt()){return/blackberry/i.test(r)}function hy(r=vt()){return/webos/i.test(r)}function Zu(r=vt()){return/iphone|ipad|ipod/i.test(r)||/macintosh/i.test(r)&&/mobile/i.test(r)}function WC(r=vt()){var e;return Zu(r)&&!!(!((e=window.navigator)===null||e===void 0)&&e.standalone)}function GC(){return iN()&&document.documentMode===10}function fy(r=vt()){return Zu(r)||dy(r)||hy(r)||uy(r)||/windows phone/i.test(r)||cy(r)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function my(r,e=[]){let t;switch(r){case"Browser":t=ep(vt());break;case"Worker":t=`${ep(vt())}-${r}`;break;default:t=r}const s=e.length?e.join(","):"FirebaseCore-web";return`${t}/JsCore/${mn}/${s}`}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class KC{constructor(e){this.auth=e,this.queue=[]}pushCallback(e,t){const s=i=>new Promise((a,l)=>{try{const d=e(i);a(d)}catch(d){l(d)}});s.onAbort=t,this.queue.push(s);const n=this.queue.length-1;return()=>{this.queue[n]=()=>Promise.resolve()}}async runMiddleware(e){if(this.auth.currentUser===e)return;const t=[];try{for(const s of this.queue)await s(e),s.onAbort&&t.push(s.onAbort)}catch(s){t.reverse();for(const n of t)try{n()}catch{}throw this.auth._errorFactory.create("login-blocked",{originalMessage:s==null?void 0:s.message})}}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function QC(r,e={}){return Zt(r,"GET","/v2/passwordPolicy",br(r,e))}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const YC=6;class XC{constructor(e){var t,s,n,i;const a=e.customStrengthOptions;this.customStrengthOptions={},this.customStrengthOptions.minPasswordLength=(t=a.minPasswordLength)!==null&&t!==void 0?t:YC,a.maxPasswordLength&&(this.customStrengthOptions.maxPasswordLength=a.maxPasswordLength),a.containsLowercaseCharacter!==void 0&&(this.customStrengthOptions.containsLowercaseLetter=a.containsLowercaseCharacter),a.containsUppercaseCharacter!==void 0&&(this.customStrengthOptions.containsUppercaseLetter=a.containsUppercaseCharacter),a.containsNumericCharacter!==void 0&&(this.customStrengthOptions.containsNumericCharacter=a.containsNumericCharacter),a.containsNonAlphanumericCharacter!==void 0&&(this.customStrengthOptions.containsNonAlphanumericCharacter=a.containsNonAlphanumericCharacter),this.enforcementState=e.enforcementState,this.enforcementState==="ENFORCEMENT_STATE_UNSPECIFIED"&&(this.enforcementState="OFF"),this.allowedNonAlphanumericCharacters=(n=(s=e.allowedNonAlphanumericCharacters)===null||s===void 0?void 0:s.join(""))!==null&&n!==void 0?n:"",this.forceUpgradeOnSignin=(i=e.forceUpgradeOnSignin)!==null&&i!==void 0?i:!1,this.schemaVersion=e.schemaVersion}validatePassword(e){var t,s,n,i,a,l;const d={isValid:!0,passwordPolicy:this};return this.validatePasswordLengthOptions(e,d),this.validatePasswordCharacterOptions(e,d),d.isValid&&(d.isValid=(t=d.meetsMinPasswordLength)!==null&&t!==void 0?t:!0),d.isValid&&(d.isValid=(s=d.meetsMaxPasswordLength)!==null&&s!==void 0?s:!0),d.isValid&&(d.isValid=(n=d.containsLowercaseLetter)!==null&&n!==void 0?n:!0),d.isValid&&(d.isValid=(i=d.containsUppercaseLetter)!==null&&i!==void 0?i:!0),d.isValid&&(d.isValid=(a=d.containsNumericCharacter)!==null&&a!==void 0?a:!0),d.isValid&&(d.isValid=(l=d.containsNonAlphanumericCharacter)!==null&&l!==void 0?l:!0),d}validatePasswordLengthOptions(e,t){const s=this.customStrengthOptions.minPasswordLength,n=this.customStrengthOptions.maxPasswordLength;s&&(t.meetsMinPasswordLength=e.length>=s),n&&(t.meetsMaxPasswordLength=e.length<=n)}validatePasswordCharacterOptions(e,t){this.updatePasswordCharacterOptionsStatuses(t,!1,!1,!1,!1);let s;for(let n=0;n<e.length;n++)s=e.charAt(n),this.updatePasswordCharacterOptionsStatuses(t,s>="a"&&s<="z",s>="A"&&s<="Z",s>="0"&&s<="9",this.allowedNonAlphanumericCharacters.includes(s))}updatePasswordCharacterOptionsStatuses(e,t,s,n,i){this.customStrengthOptions.containsLowercaseLetter&&(e.containsLowercaseLetter||(e.containsLowercaseLetter=t)),this.customStrengthOptions.containsUppercaseLetter&&(e.containsUppercaseLetter||(e.containsUppercaseLetter=s)),this.customStrengthOptions.containsNumericCharacter&&(e.containsNumericCharacter||(e.containsNumericCharacter=n)),this.customStrengthOptions.containsNonAlphanumericCharacter&&(e.containsNonAlphanumericCharacter||(e.containsNonAlphanumericCharacter=i))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class JC{constructor(e,t,s,n){this.app=e,this.heartbeatServiceProvider=t,this.appCheckServiceProvider=s,this.config=n,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new tp(this),this.idTokenSubscription=new tp(this),this.beforeStateQueue=new KC(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION=1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=X0,this._agentRecaptchaConfig=null,this._tenantRecaptchaConfigs={},this._projectPasswordPolicy=null,this._tenantPasswordPolicies={},this._resolvePersistenceManagerAvailable=void 0,this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=e.name,this.clientVersion=n.sdkClientVersion,this._persistenceManagerAvailable=new Promise(i=>this._resolvePersistenceManagerAvailable=i)}_initializeWithPersistence(e,t){return t&&(this._popupRedirectResolver=jr(t)),this._initializationPromise=this.queue(async()=>{var s,n,i;if(!this._deleted&&(this.persistenceManager=await Pn.create(this,e),(s=this._resolvePersistenceManagerAvailable)===null||s===void 0||s.call(this),!this._deleted)){if(!((n=this._popupRedirectResolver)===null||n===void 0)&&n._shouldInitProactively)try{await this._popupRedirectResolver._initialize(this)}catch{}await this.initializeCurrentUser(t),this.lastNotifiedUid=((i=this.currentUser)===null||i===void 0?void 0:i.uid)||null,!this._deleted&&(this._isInitialized=!0)}}),this._initializationPromise}async _onStorageEvent(){if(this._deleted)return;const e=await this.assertedPersistence.getCurrentUser();if(!(!this.currentUser&&!e)){if(this.currentUser&&e&&this.currentUser.uid===e.uid){this._currentUser._assign(e),await this.currentUser.getIdToken();return}await this._updateCurrentUser(e,!0)}}async initializeCurrentUserFromIdToken(e){try{const t=await Xa(this,{idToken:e}),s=await Yt._fromGetAccountInfoResponse(this,t,e);await this.directlySetCurrentUser(s)}catch(t){console.warn("FirebaseServerApp could not login user with provided authIdToken: ",t),await this.directlySetCurrentUser(null)}}async initializeCurrentUser(e){var t;if(Dt(this.app)){const a=this.app.settings.authIdToken;return a?new Promise(l=>{setTimeout(()=>this.initializeCurrentUserFromIdToken(a).then(l,l))}):this.directlySetCurrentUser(null)}const s=await this.assertedPersistence.getCurrentUser();let n=s,i=!1;if(e&&this.config.authDomain){await this.getOrInitRedirectPersistenceManager();const a=(t=this.redirectUser)===null||t===void 0?void 0:t._redirectEventId,l=n==null?void 0:n._redirectEventId,d=await this.tryRedirectSignIn(e);(!a||a===l)&&(d!=null&&d.user)&&(n=d.user,i=!0)}if(!n)return this.directlySetCurrentUser(null);if(!n._redirectEventId){if(i)try{await this.beforeStateQueue.runMiddleware(n)}catch(a){n=s,this._popupRedirectResolver._overrideRedirectResult(this,()=>Promise.reject(a))}return n?this.reloadAndSetCurrentUserOrClear(n):this.directlySetCurrentUser(null)}return ee(this._popupRedirectResolver,this,"argument-error"),await this.getOrInitRedirectPersistenceManager(),this.redirectUser&&this.redirectUser._redirectEventId===n._redirectEventId?this.directlySetCurrentUser(n):this.reloadAndSetCurrentUserOrClear(n)}async tryRedirectSignIn(e){let t=null;try{t=await this._popupRedirectResolver._completeRedirectFn(this,e,!0)}catch{await this._setRedirectUser(null)}return t}async reloadAndSetCurrentUserOrClear(e){try{await Ja(e)}catch(t){if((t==null?void 0:t.code)!=="auth/network-request-failed")return this.directlySetCurrentUser(null)}return this.directlySetCurrentUser(e)}useDeviceLanguage(){this.languageCode=AC()}async _delete(){this._deleted=!0}async updateCurrentUser(e){if(Dt(this.app))return Promise.reject(Ar(this));const t=e?Ye(e):null;return t&&ee(t.auth.config.apiKey===this.config.apiKey,this,"invalid-user-token"),this._updateCurrentUser(t&&t._clone(this))}async _updateCurrentUser(e,t=!1){if(!this._deleted)return e&&ee(this.tenantId===e.tenantId,this,"tenant-id-mismatch"),t||await this.beforeStateQueue.runMiddleware(e),this.queue(async()=>{await this.directlySetCurrentUser(e),this.notifyAuthListeners()})}async signOut(){return Dt(this.app)?Promise.reject(Ar(this)):(await this.beforeStateQueue.runMiddleware(null),(this.redirectPersistenceManager||this._popupRedirectResolver)&&await this._setRedirectUser(null),this._updateCurrentUser(null,!0))}setPersistence(e){return Dt(this.app)?Promise.reject(Ar(this)):this.queue(async()=>{await this.assertedPersistence.setPersistence(jr(e))})}_getRecaptchaConfig(){return this.tenantId==null?this._agentRecaptchaConfig:this._tenantRecaptchaConfigs[this.tenantId]}async validatePassword(e){this._getPasswordPolicyInternal()||await this._updatePasswordPolicy();const t=this._getPasswordPolicyInternal();return t.schemaVersion!==this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION?Promise.reject(this._errorFactory.create("unsupported-password-policy-schema-version",{})):t.validatePassword(e)}_getPasswordPolicyInternal(){return this.tenantId===null?this._projectPasswordPolicy:this._tenantPasswordPolicies[this.tenantId]}async _updatePasswordPolicy(){const e=await QC(this),t=new XC(e);this.tenantId===null?this._projectPasswordPolicy=t:this._tenantPasswordPolicies[this.tenantId]=t}_getPersistenceType(){return this.assertedPersistence.persistence.type}_getPersistence(){return this.assertedPersistence.persistence}_updateErrorMap(e){this._errorFactory=new Di("auth","Firebase",e())}onAuthStateChanged(e,t,s){return this.registerStateListener(this.authStateSubscription,e,t,s)}beforeAuthStateChanged(e,t){return this.beforeStateQueue.pushCallback(e,t)}onIdTokenChanged(e,t,s){return this.registerStateListener(this.idTokenSubscription,e,t,s)}authStateReady(){return new Promise((e,t)=>{if(this.currentUser)e();else{const s=this.onAuthStateChanged(()=>{s(),e()},t)}})}async revokeAccessToken(e){if(this.currentUser){const t=await this.currentUser.getIdToken(),s={providerId:"apple.com",tokenType:"ACCESS_TOKEN",token:e,idToken:t};this.tenantId!=null&&(s.tenantId=this.tenantId),await qC(this,s)}}toJSON(){var e;return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:(e=this._currentUser)===null||e===void 0?void 0:e.toJSON()}}async _setRedirectUser(e,t){const s=await this.getOrInitRedirectPersistenceManager(t);return e===null?s.removeCurrentUser():s.setCurrentUser(e)}async getOrInitRedirectPersistenceManager(e){if(!this.redirectPersistenceManager){const t=e&&jr(e)||this._popupRedirectResolver;ee(t,this,"argument-error"),this.redirectPersistenceManager=await Pn.create(this,[jr(t._redirectPersistence)],"redirectUser"),this.redirectUser=await this.redirectPersistenceManager.getCurrentUser()}return this.redirectPersistenceManager}async _redirectUserForId(e){var t,s;return this._isInitialized&&await this.queue(async()=>{}),((t=this._currentUser)===null||t===void 0?void 0:t._redirectEventId)===e?this._currentUser:((s=this.redirectUser)===null||s===void 0?void 0:s._redirectEventId)===e?this.redirectUser:null}async _persistUserIfCurrent(e){if(e===this.currentUser)return this.queue(async()=>this.directlySetCurrentUser(e))}_notifyListenersIfCurrent(e){e===this.currentUser&&this.notifyAuthListeners()}_key(){return`${this.config.authDomain}:${this.config.apiKey}:${this.name}`}_startProactiveRefresh(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}_stopProactiveRefresh(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}get _currentUser(){return this.currentUser}notifyAuthListeners(){var e,t;if(!this._isInitialized)return;this.idTokenSubscription.next(this.currentUser);const s=(t=(e=this.currentUser)===null||e===void 0?void 0:e.uid)!==null&&t!==void 0?t:null;this.lastNotifiedUid!==s&&(this.lastNotifiedUid=s,this.authStateSubscription.next(this.currentUser))}registerStateListener(e,t,s,n){if(this._deleted)return()=>{};const i=typeof t=="function"?t:t.next.bind(t);let a=!1;const l=this._isInitialized?Promise.resolve():this._initializationPromise;if(ee(l,this,"internal-error"),l.then(()=>{a||i(this.currentUser)}),typeof t=="function"){const d=e.addObserver(t,s,n);return()=>{a=!0,d()}}else{const d=e.addObserver(t);return()=>{a=!0,d()}}}async directlySetCurrentUser(e){this.currentUser&&this.currentUser!==e&&this._currentUser._stopProactiveRefresh(),e&&this.isProactiveRefreshEnabled&&e._startProactiveRefresh(),this.currentUser=e,e?await this.assertedPersistence.setCurrentUser(e):await this.assertedPersistence.removeCurrentUser()}queue(e){return this.operations=this.operations.then(e,e),this.operations}get assertedPersistence(){return ee(this.persistenceManager,this,"internal-error"),this.persistenceManager}_logFramework(e){!e||this.frameworks.includes(e)||(this.frameworks.push(e),this.frameworks.sort(),this.clientVersion=my(this.config.clientPlatform,this._getFrameworks()))}_getFrameworks(){return this.frameworks}async _getAdditionalHeaders(){var e;const t={"X-Client-Version":this.clientVersion};this.app.options.appId&&(t["X-Firebase-gmpid"]=this.app.options.appId);const s=await((e=this.heartbeatServiceProvider.getImmediate({optional:!0}))===null||e===void 0?void 0:e.getHeartbeatsHeader());s&&(t["X-Firebase-Client"]=s);const n=await this._getAppCheckToken();return n&&(t["X-Firebase-AppCheck"]=n),t}async _getAppCheckToken(){var e;if(Dt(this.app)&&this.app.settings.appCheckToken)return this.app.settings.appCheckToken;const t=await((e=this.appCheckServiceProvider.getImmediate({optional:!0}))===null||e===void 0?void 0:e.getToken());return t!=null&&t.error&&SC(`Error while retrieving App Check token: ${t.error}`),t==null?void 0:t.token}}function vr(r){return Ye(r)}class tp{constructor(e){this.auth=e,this.observer=null,this.addObserver=mN(t=>this.observer=t)}get next(){return ee(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Li={async loadJS(){throw new Error("Unable to load external scripts")},recaptchaV2Script:"",recaptchaEnterpriseScript:"",gapiScript:""};function ZC(r){Li=r}function eh(r){return Li.loadJS(r)}function eI(){return Li.recaptchaV2Script}function tI(){return Li.recaptchaEnterpriseScript}function rI(){return Li.gapiScript}function py(r){return`__${r}${Math.floor(Math.random()*1e6)}`}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const sI=500,nI=6e4,ba=1e12;class oI{constructor(e){this.auth=e,this.counter=ba,this._widgets=new Map}render(e,t){const s=this.counter;return this._widgets.set(s,new lI(e,this.auth.name,t||{})),this.counter++,s}reset(e){var t;const s=e||ba;(t=this._widgets.get(s))===null||t===void 0||t.delete(),this._widgets.delete(s)}getResponse(e){var t;const s=e||ba;return((t=this._widgets.get(s))===null||t===void 0?void 0:t.getResponse())||""}async execute(e){var t;const s=e||ba;return(t=this._widgets.get(s))===null||t===void 0||t.execute(),""}}class iI{constructor(){this.enterprise=new aI}ready(e){e()}execute(e,t){return Promise.resolve("token")}render(e,t){return""}}class aI{ready(e){e()}execute(e,t){return Promise.resolve("token")}render(e,t){return""}}class lI{constructor(e,t,s){this.params=s,this.timerId=null,this.deleted=!1,this.responseToken=null,this.clickHandler=()=>{this.execute()};const n=typeof e=="string"?document.getElementById(e):e;ee(n,"argument-error",{appName:t}),this.container=n,this.isVisible=this.params.size!=="invisible",this.isVisible?this.execute():this.container.addEventListener("click",this.clickHandler)}getResponse(){return this.checkIfDeleted(),this.responseToken}delete(){this.checkIfDeleted(),this.deleted=!0,this.timerId&&(clearTimeout(this.timerId),this.timerId=null),this.container.removeEventListener("click",this.clickHandler)}execute(){this.checkIfDeleted(),!this.timerId&&(this.timerId=window.setTimeout(()=>{this.responseToken=cI(50);const{callback:e,"expired-callback":t}=this.params;if(e)try{e(this.responseToken)}catch{}this.timerId=window.setTimeout(()=>{if(this.timerId=null,this.responseToken=null,t)try{t()}catch{}this.isVisible&&this.execute()},nI)},sI))}checkIfDeleted(){if(this.deleted)throw new Error("reCAPTCHA mock was already deleted!")}}function cI(r){const e=[],t="1234567890abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ";for(let s=0;s<r;s++)e.push(t.charAt(Math.floor(Math.random()*t.length)));return e.join("")}const dI="recaptcha-enterprise",ti="NO_RECAPTCHA";class gy{constructor(e){this.type=dI,this.auth=vr(e)}async verify(e="verify",t=!1){async function s(i){if(!t){if(i.tenantId==null&&i._agentRecaptchaConfig!=null)return i._agentRecaptchaConfig.siteKey;if(i.tenantId!=null&&i._tenantRecaptchaConfigs[i.tenantId]!==void 0)return i._tenantRecaptchaConfigs[i.tenantId].siteKey}return new Promise(async(a,l)=>{sy(i,{clientType:"CLIENT_TYPE_WEB",version:"RECAPTCHA_ENTERPRISE"}).then(d=>{if(d.recaptchaKey===void 0)l(new Error("recaptcha Enterprise site key undefined"));else{const u=new ry(d);return i.tenantId==null?i._agentRecaptchaConfig=u:i._tenantRecaptchaConfigs[i.tenantId]=u,a(u.siteKey)}}).catch(d=>{l(d)})})}function n(i,a,l){const d=window.grecaptcha;Ym(d)?d.enterprise.ready(()=>{d.enterprise.execute(i,{action:e}).then(u=>{a(u)}).catch(()=>{a(ti)})}):l(Error("No reCAPTCHA enterprise script loaded."))}return this.auth.settings.appVerificationDisabledForTesting?new iI().execute("siteKey",{action:"verify"}):new Promise((i,a)=>{s(this.auth).then(l=>{if(!t&&Ym(window.grecaptcha))n(l,i,a);else{if(typeof window>"u"){a(new Error("RecaptchaVerifier is only supported in browser"));return}let d=tI();d.length!==0&&(d+=l),eh(d).then(()=>{n(l,i,a)}).catch(u=>{a(u)})}}).catch(l=>{a(l)})})}}async function Zc(r,e,t,s=!1,n=!1){const i=new gy(r);let a;if(n)a=ti;else try{a=await i.verify(t)}catch{a=await i.verify(t,!0)}const l=Object.assign({},e);if(t==="mfaSmsEnrollment"||t==="mfaSmsSignIn"){if("phoneEnrollmentInfo"in l){const d=l.phoneEnrollmentInfo.phoneNumber,u=l.phoneEnrollmentInfo.recaptchaToken;Object.assign(l,{phoneEnrollmentInfo:{phoneNumber:d,recaptchaToken:u,captchaResponse:a,clientType:"CLIENT_TYPE_WEB",recaptchaVersion:"RECAPTCHA_ENTERPRISE"}})}else if("phoneSignInInfo"in l){const d=l.phoneSignInInfo.recaptchaToken;Object.assign(l,{phoneSignInInfo:{recaptchaToken:d,captchaResponse:a,clientType:"CLIENT_TYPE_WEB",recaptchaVersion:"RECAPTCHA_ENTERPRISE"}})}return l}return s?Object.assign(l,{captchaResp:a}):Object.assign(l,{captchaResponse:a}),Object.assign(l,{clientType:"CLIENT_TYPE_WEB"}),Object.assign(l,{recaptchaVersion:"RECAPTCHA_ENTERPRISE"}),l}async function ed(r,e,t,s,n){var i;if(!((i=r._getRecaptchaConfig())===null||i===void 0)&&i.isProviderEnabled("PHONE_PROVIDER")){const a=await Zc(r,e,t);return s(r,a).catch(async l=>{var d;if(((d=r._getRecaptchaConfig())===null||d===void 0?void 0:d.getProviderEnforcementState("PHONE_PROVIDER"))==="AUDIT"&&(l.code==="auth/missing-recaptcha-token"||l.code==="auth/invalid-app-credential")){console.log(`Failed to verify with reCAPTCHA Enterprise. Automatically triggering the reCAPTCHA v2 flow to complete the ${t} flow.`);const u=await Zc(r,e,t,!1,!0);return s(r,u)}return Promise.reject(l)})}else{const a=await Zc(r,e,t,!1,!0);return s(r,a)}}async function uI(r){const e=vr(r),t=await sy(e,{clientType:"CLIENT_TYPE_WEB",version:"RECAPTCHA_ENTERPRISE"}),s=new ry(t);e.tenantId==null?e._agentRecaptchaConfig=s:e._tenantRecaptchaConfigs[e.tenantId]=s,s.isAnyProviderEnabled()&&new gy(e).verify()}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function hI(r,e){const t=Fl(r,"auth");if(t.isInitialized()){const n=t.getImmediate(),i=t.getOptions();if(sn(i,e??{}))return n;pr(n,"already-initialized")}return t.initialize({options:e})}function fI(r,e){const t=(e==null?void 0:e.persistence)||[],s=(Array.isArray(t)?t:[t]).map(jr);e!=null&&e.errorMap&&r._updateErrorMap(e.errorMap),r._initializeWithPersistence(s,e==null?void 0:e.popupRedirectResolver)}function mI(r,e,t){const s=vr(r);ee(/^https?:\/\//.test(e),s,"invalid-emulator-scheme");const n=!1,i=xy(e),{host:a,port:l}=pI(e),d=l===null?"":`:${l}`,u={url:`${i}//${a}${d}/`},h=Object.freeze({host:a,port:l,protocol:i.replace(":",""),options:Object.freeze({disableWarnings:n})});if(!s._canInitEmulator){ee(s.config.emulator&&s.emulatorConfig,s,"emulator-config-failed"),ee(sn(u,s.config.emulator)&&sn(h,s.emulatorConfig),s,"emulator-config-failed");return}s.config.emulator=u,s.emulatorConfig=h,s.settings.appVerificationDisabledForTesting=!0,js(a)?(Hu(`${i}//${a}${d}`),qu("Auth",!0)):gI()}function xy(r){const e=r.indexOf(":");return e<0?"":r.substr(0,e+1)}function pI(r){const e=xy(r),t=/(\/\/)?([^?#/]+)/.exec(r.substr(e.length));if(!t)return{host:"",port:null};const s=t[2].split("@").pop()||"",n=/^(\[[^\]]+\])(:|$)/.exec(s);if(n){const i=n[1];return{host:i,port:rp(s.substr(i.length+1))}}else{const[i,a]=s.split(":");return{host:i,port:rp(a)}}}function rp(r){if(!r)return null;const e=Number(r);return isNaN(e)?null:e}function gI(){function r(){const e=document.createElement("p"),t=e.style;e.innerText="Running in emulator mode. Do not use with production credentials.",t.position="fixed",t.width="100%",t.backgroundColor="#ffffff",t.border=".1em solid #000000",t.color="#b50000",t.bottom="0px",t.left="0px",t.margin="0px",t.zIndex="10000",t.textAlign="center",e.classList.add("firebase-emulator-warning"),document.body.appendChild(e)}typeof console<"u"&&typeof console.info=="function"&&console.info("WARNING: You are using the Auth Emulator, which is intended for local testing only.  Do not use with production credentials."),typeof window<"u"&&typeof document<"u"&&(document.readyState==="loading"?window.addEventListener("DOMContentLoaded",r):r())}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class th{constructor(e,t){this.providerId=e,this.signInMethod=t}toJSON(){return kr("not implemented")}_getIdTokenResponse(e){return kr("not implemented")}_linkToIdToken(e,t){return kr("not implemented")}_getReauthenticationResolver(e){return kr("not implemented")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Rn(r,e){return Ul(r,"POST","/v1/accounts:signInWithIdp",br(r,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const xI="http://localhost";class on extends th{constructor(){super(...arguments),this.pendingToken=null}static _fromParams(e){const t=new on(e.providerId,e.signInMethod);return e.idToken||e.accessToken?(e.idToken&&(t.idToken=e.idToken),e.accessToken&&(t.accessToken=e.accessToken),e.nonce&&!e.pendingToken&&(t.nonce=e.nonce),e.pendingToken&&(t.pendingToken=e.pendingToken)):e.oauthToken&&e.oauthTokenSecret?(t.accessToken=e.oauthToken,t.secret=e.oauthTokenSecret):pr("argument-error"),t}toJSON(){return{idToken:this.idToken,accessToken:this.accessToken,secret:this.secret,nonce:this.nonce,pendingToken:this.pendingToken,providerId:this.providerId,signInMethod:this.signInMethod}}static fromJSON(e){const t=typeof e=="string"?JSON.parse(e):e,{providerId:s,signInMethod:n}=t,i=Cu(t,["providerId","signInMethod"]);if(!s||!n)return null;const a=new on(s,n);return a.idToken=i.idToken||void 0,a.accessToken=i.accessToken||void 0,a.secret=i.secret,a.nonce=i.nonce,a.pendingToken=i.pendingToken||null,a}_getIdTokenResponse(e){const t=this.buildRequest();return Rn(e,t)}_linkToIdToken(e,t){const s=this.buildRequest();return s.idToken=t,Rn(e,s)}_getReauthenticationResolver(e){const t=this.buildRequest();return t.autoCreate=!1,Rn(e,t)}buildRequest(){const e={requestUri:xI,returnSecureToken:!0};if(this.pendingToken)e.pendingToken=this.pendingToken;else{const t={};this.idToken&&(t.id_token=this.idToken),this.accessToken&&(t.access_token=this.accessToken),this.secret&&(t.oauth_token_secret=this.secret),t.providerId=this.providerId,this.nonce&&!this.pendingToken&&(t.nonce=this.nonce),e.postBody=mo(t)}return e}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function sp(r,e){return Zt(r,"POST","/v1/accounts:sendVerificationCode",br(r,e))}async function yI(r,e){return Ul(r,"POST","/v1/accounts:signInWithPhoneNumber",br(r,e))}async function bI(r,e){const t=await Ul(r,"POST","/v1/accounts:signInWithPhoneNumber",br(r,e));if(t.temporaryProof)throw Ho(r,"account-exists-with-different-credential",t);return t}const vI={USER_NOT_FOUND:"user-not-found"};async function wI(r,e){const t=Object.assign(Object.assign({},e),{operation:"REAUTH"});return Ul(r,"POST","/v1/accounts:signInWithPhoneNumber",br(r,t),vI)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ri extends th{constructor(e){super("phone","phone"),this.params=e}static _fromVerification(e,t){return new ri({verificationId:e,verificationCode:t})}static _fromTokenResponse(e,t){return new ri({phoneNumber:e,temporaryProof:t})}_getIdTokenResponse(e){return yI(e,this._makeVerificationRequest())}_linkToIdToken(e,t){return bI(e,Object.assign({idToken:t},this._makeVerificationRequest()))}_getReauthenticationResolver(e){return wI(e,this._makeVerificationRequest())}_makeVerificationRequest(){const{temporaryProof:e,phoneNumber:t,verificationId:s,verificationCode:n}=this.params;return e&&t?{temporaryProof:e,phoneNumber:t}:{sessionInfo:s,code:n}}toJSON(){const e={providerId:this.providerId};return this.params.phoneNumber&&(e.phoneNumber=this.params.phoneNumber),this.params.temporaryProof&&(e.temporaryProof=this.params.temporaryProof),this.params.verificationCode&&(e.verificationCode=this.params.verificationCode),this.params.verificationId&&(e.verificationId=this.params.verificationId),e}static fromJSON(e){typeof e=="string"&&(e=JSON.parse(e));const{verificationId:t,verificationCode:s,phoneNumber:n,temporaryProof:i}=e;return!s&&!t&&!n&&!i?null:new ri({verificationId:t,verificationCode:s,phoneNumber:n,temporaryProof:i})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class rh{constructor(e){this.providerId=e,this.defaultLanguageCode=null,this.customParameters={}}setDefaultLanguage(e){this.defaultLanguageCode=e}setCustomParameters(e){return this.customParameters=e,this}getCustomParameters(){return this.customParameters}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Vi extends rh{constructor(){super(...arguments),this.scopes=[]}addScope(e){return this.scopes.includes(e)||this.scopes.push(e),this}getScopes(){return[...this.scopes]}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class es extends Vi{constructor(){super("facebook.com")}static credential(e){return on._fromParams({providerId:es.PROVIDER_ID,signInMethod:es.FACEBOOK_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return es.credentialFromTaggedObject(e)}static credentialFromError(e){return es.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return es.credential(e.oauthAccessToken)}catch{return null}}}es.FACEBOOK_SIGN_IN_METHOD="facebook.com";es.PROVIDER_ID="facebook.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Sr extends Vi{constructor(){super("google.com"),this.addScope("profile")}static credential(e,t){return on._fromParams({providerId:Sr.PROVIDER_ID,signInMethod:Sr.GOOGLE_SIGN_IN_METHOD,idToken:e,accessToken:t})}static credentialFromResult(e){return Sr.credentialFromTaggedObject(e)}static credentialFromError(e){return Sr.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthIdToken:t,oauthAccessToken:s}=e;if(!t&&!s)return null;try{return Sr.credential(t,s)}catch{return null}}}Sr.GOOGLE_SIGN_IN_METHOD="google.com";Sr.PROVIDER_ID="google.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ts extends Vi{constructor(){super("github.com")}static credential(e){return on._fromParams({providerId:ts.PROVIDER_ID,signInMethod:ts.GITHUB_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return ts.credentialFromTaggedObject(e)}static credentialFromError(e){return ts.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return ts.credential(e.oauthAccessToken)}catch{return null}}}ts.GITHUB_SIGN_IN_METHOD="github.com";ts.PROVIDER_ID="github.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class rs extends Vi{constructor(){super("twitter.com")}static credential(e,t){return on._fromParams({providerId:rs.PROVIDER_ID,signInMethod:rs.TWITTER_SIGN_IN_METHOD,oauthToken:e,oauthTokenSecret:t})}static credentialFromResult(e){return rs.credentialFromTaggedObject(e)}static credentialFromError(e){return rs.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthAccessToken:t,oauthTokenSecret:s}=e;if(!t||!s)return null;try{return rs.credential(t,s)}catch{return null}}}rs.TWITTER_SIGN_IN_METHOD="twitter.com";rs.PROVIDER_ID="twitter.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Jn{constructor(e){this.user=e.user,this.providerId=e.providerId,this._tokenResponse=e._tokenResponse,this.operationType=e.operationType}static async _fromIdTokenResponse(e,t,s,n=!1){const i=await Yt._fromIdTokenResponse(e,s,n),a=np(s);return new Jn({user:i,providerId:a,_tokenResponse:s,operationType:t})}static async _forOperation(e,t,s){await e._updateTokensIfNecessary(s,!0);const n=np(s);return new Jn({user:e,providerId:n,_tokenResponse:s,operationType:t})}}function np(r){return r.providerId?r.providerId:"phoneNumber"in r?"phone":null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Za extends yr{constructor(e,t,s,n){var i;super(t.code,t.message),this.operationType=s,this.user=n,Object.setPrototypeOf(this,Za.prototype),this.customData={appName:e.name,tenantId:(i=e.tenantId)!==null&&i!==void 0?i:void 0,_serverResponse:t.customData._serverResponse,operationType:s}}static _fromErrorAndOperation(e,t,s,n){return new Za(e,t,s,n)}}function yy(r,e,t,s){return(e==="reauthenticate"?t._getReauthenticationResolver(r):t._getIdTokenResponse(r)).catch(i=>{throw i.code==="auth/multi-factor-auth-required"?Za._fromErrorAndOperation(r,i,e,s):i})}async function _I(r,e,t=!1){const s=await pi(r,e._linkToIdToken(r.auth,await r.getIdToken()),t);return Jn._forOperation(r,"link",s)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function TI(r,e,t=!1){const{auth:s}=r;if(Dt(s.app))return Promise.reject(Ar(s));const n="reauthenticate";try{const i=await pi(r,yy(s,n,e,r),t);ee(i.idToken,s,"internal-error");const a=Ju(i.idToken);ee(a,s,"internal-error");const{sub:l}=a;return ee(r.uid===l,s,"user-mismatch"),Jn._forOperation(r,n,i)}catch(i){throw(i==null?void 0:i.code)==="auth/user-not-found"&&pr(s,"user-mismatch"),i}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function by(r,e,t=!1){if(Dt(r.app))return Promise.reject(Ar(r));const s="signIn",n=await yy(r,s,e),i=await Jn._fromIdTokenResponse(r,s,n);return t||await r._updateCurrentUser(i.user),i}async function EI(r,e){return by(vr(r),e)}function NI(r,e,t,s){return Ye(r).onIdTokenChanged(e,t,s)}function CI(r,e,t){return Ye(r).beforeAuthStateChanged(e,t)}function II(r,e,t,s){return Ye(r).onAuthStateChanged(e,t,s)}function SI(r){return Ye(r).signOut()}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function op(r,e){return Zt(r,"POST","/v2/accounts/mfaEnrollment:start",br(r,e))}const el="__sak";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class vy{constructor(e,t){this.storageRetriever=e,this.type=t}_isAvailable(){try{return this.storage?(this.storage.setItem(el,"1"),this.storage.removeItem(el),Promise.resolve(!0)):Promise.resolve(!1)}catch{return Promise.resolve(!1)}}_set(e,t){return this.storage.setItem(e,JSON.stringify(t)),Promise.resolve()}_get(e){const t=this.storage.getItem(e);return Promise.resolve(t?JSON.parse(t):null)}_remove(e){return this.storage.removeItem(e),Promise.resolve()}get storage(){return this.storageRetriever()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const kI=1e3,jI=10;class wy extends vy{constructor(){super(()=>window.localStorage,"LOCAL"),this.boundEventHandler=(e,t)=>this.onStorageEvent(e,t),this.listeners={},this.localCache={},this.pollTimer=null,this.fallbackToPolling=fy(),this._shouldAllowMigration=!0}forAllChangedKeys(e){for(const t of Object.keys(this.listeners)){const s=this.storage.getItem(t),n=this.localCache[t];s!==n&&e(t,n,s)}}onStorageEvent(e,t=!1){if(!e.key){this.forAllChangedKeys((a,l,d)=>{this.notifyListeners(a,d)});return}const s=e.key;t?this.detachListener():this.stopPolling();const n=()=>{const a=this.storage.getItem(s);!t&&this.localCache[s]===a||this.notifyListeners(s,a)},i=this.storage.getItem(s);GC()&&i!==e.newValue&&e.newValue!==e.oldValue?setTimeout(n,jI):n()}notifyListeners(e,t){this.localCache[e]=t;const s=this.listeners[e];if(s)for(const n of Array.from(s))n(t&&JSON.parse(t))}startPolling(){this.stopPolling(),this.pollTimer=setInterval(()=>{this.forAllChangedKeys((e,t,s)=>{this.onStorageEvent(new StorageEvent("storage",{key:e,oldValue:t,newValue:s}),!0)})},kI)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}attachListener(){window.addEventListener("storage",this.boundEventHandler)}detachListener(){window.removeEventListener("storage",this.boundEventHandler)}_addListener(e,t){Object.keys(this.listeners).length===0&&(this.fallbackToPolling?this.startPolling():this.attachListener()),this.listeners[e]||(this.listeners[e]=new Set,this.localCache[e]=this.storage.getItem(e)),this.listeners[e].add(t)}_removeListener(e,t){this.listeners[e]&&(this.listeners[e].delete(t),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&(this.detachListener(),this.stopPolling())}async _set(e,t){await super._set(e,t),this.localCache[e]=JSON.stringify(t)}async _get(e){const t=await super._get(e);return this.localCache[e]=JSON.stringify(t),t}async _remove(e){await super._remove(e),delete this.localCache[e]}}wy.type="LOCAL";const AI=wy;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _y extends vy{constructor(){super(()=>window.sessionStorage,"SESSION")}_addListener(e,t){}_removeListener(e,t){}}_y.type="SESSION";const Ty=_y;/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function PI(r){return Promise.all(r.map(async e=>{try{return{fulfilled:!0,value:await e}}catch(t){return{fulfilled:!1,reason:t}}}))}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $l{constructor(e){this.eventTarget=e,this.handlersMap={},this.boundEventHandler=this.handleEvent.bind(this)}static _getInstance(e){const t=this.receivers.find(n=>n.isListeningto(e));if(t)return t;const s=new $l(e);return this.receivers.push(s),s}isListeningto(e){return this.eventTarget===e}async handleEvent(e){const t=e,{eventId:s,eventType:n,data:i}=t.data,a=this.handlersMap[n];if(!(a!=null&&a.size))return;t.ports[0].postMessage({status:"ack",eventId:s,eventType:n});const l=Array.from(a).map(async u=>u(t.origin,i)),d=await PI(l);t.ports[0].postMessage({status:"done",eventId:s,eventType:n,response:d})}_subscribe(e,t){Object.keys(this.handlersMap).length===0&&this.eventTarget.addEventListener("message",this.boundEventHandler),this.handlersMap[e]||(this.handlersMap[e]=new Set),this.handlersMap[e].add(t)}_unsubscribe(e,t){this.handlersMap[e]&&t&&this.handlersMap[e].delete(t),(!t||this.handlersMap[e].size===0)&&delete this.handlersMap[e],Object.keys(this.handlersMap).length===0&&this.eventTarget.removeEventListener("message",this.boundEventHandler)}}$l.receivers=[];/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function sh(r="",e=10){let t="";for(let s=0;s<e;s++)t+=Math.floor(Math.random()*10);return r+t}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class RI{constructor(e){this.target=e,this.handlers=new Set}removeMessageHandler(e){e.messageChannel&&(e.messageChannel.port1.removeEventListener("message",e.onMessage),e.messageChannel.port1.close()),this.handlers.delete(e)}async _send(e,t,s=50){const n=typeof MessageChannel<"u"?new MessageChannel:null;if(!n)throw new Error("connection_unavailable");let i,a;return new Promise((l,d)=>{const u=sh("",20);n.port1.start();const h=setTimeout(()=>{d(new Error("unsupported_event"))},s);a={messageChannel:n,onMessage(m){const x=m;if(x.data.eventId===u)switch(x.data.status){case"ack":clearTimeout(h),i=setTimeout(()=>{d(new Error("timeout"))},3e3);break;case"done":clearTimeout(i),l(x.data.response);break;default:clearTimeout(h),clearTimeout(i),d(new Error("invalid_response"));break}}},this.handlers.add(a),n.port1.addEventListener("message",a.onMessage),this.target.postMessage({eventType:e,eventId:u,data:t},[n.port2])}).finally(()=>{a&&this.removeMessageHandler(a)})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function tt(){return window}function MI(r){tt().location.href=r}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function nh(){return typeof tt().WorkerGlobalScope<"u"&&typeof tt().importScripts=="function"}async function DI(){if(!(navigator!=null&&navigator.serviceWorker))return null;try{return(await navigator.serviceWorker.ready).active}catch{return null}}function OI(){var r;return((r=navigator==null?void 0:navigator.serviceWorker)===null||r===void 0?void 0:r.controller)||null}function LI(){return nh()?self:null}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ey="firebaseLocalStorageDb",VI=1,tl="firebaseLocalStorage",Ny="fbase_key";class Fi{constructor(e){this.request=e}toPromise(){return new Promise((e,t)=>{this.request.addEventListener("success",()=>{e(this.request.result)}),this.request.addEventListener("error",()=>{t(this.request.error)})})}}function Bl(r,e){return r.transaction([tl],e?"readwrite":"readonly").objectStore(tl)}function FI(){const r=indexedDB.deleteDatabase(Ey);return new Fi(r).toPromise()}function zd(){const r=indexedDB.open(Ey,VI);return new Promise((e,t)=>{r.addEventListener("error",()=>{t(r.error)}),r.addEventListener("upgradeneeded",()=>{const s=r.result;try{s.createObjectStore(tl,{keyPath:Ny})}catch(n){t(n)}}),r.addEventListener("success",async()=>{const s=r.result;s.objectStoreNames.contains(tl)?e(s):(s.close(),await FI(),e(await zd()))})})}async function ip(r,e,t){const s=Bl(r,!0).put({[Ny]:e,value:t});return new Fi(s).toPromise()}async function UI(r,e){const t=Bl(r,!1).get(e),s=await new Fi(t).toPromise();return s===void 0?null:s.value}function ap(r,e){const t=Bl(r,!0).delete(e);return new Fi(t).toPromise()}const $I=800,BI=3;class Cy{constructor(){this.type="LOCAL",this._shouldAllowMigration=!0,this.listeners={},this.localCache={},this.pollTimer=null,this.pendingWrites=0,this.receiver=null,this.sender=null,this.serviceWorkerReceiverAvailable=!1,this.activeServiceWorker=null,this._workerInitializationPromise=this.initializeServiceWorkerMessaging().then(()=>{},()=>{})}async _openDb(){return this.db?this.db:(this.db=await zd(),this.db)}async _withRetries(e){let t=0;for(;;)try{const s=await this._openDb();return await e(s)}catch(s){if(t++>BI)throw s;this.db&&(this.db.close(),this.db=void 0)}}async initializeServiceWorkerMessaging(){return nh()?this.initializeReceiver():this.initializeSender()}async initializeReceiver(){this.receiver=$l._getInstance(LI()),this.receiver._subscribe("keyChanged",async(e,t)=>({keyProcessed:(await this._poll()).includes(t.key)})),this.receiver._subscribe("ping",async(e,t)=>["keyChanged"])}async initializeSender(){var e,t;if(this.activeServiceWorker=await DI(),!this.activeServiceWorker)return;this.sender=new RI(this.activeServiceWorker);const s=await this.sender._send("ping",{},800);s&&!((e=s[0])===null||e===void 0)&&e.fulfilled&&!((t=s[0])===null||t===void 0)&&t.value.includes("keyChanged")&&(this.serviceWorkerReceiverAvailable=!0)}async notifyServiceWorker(e){if(!(!this.sender||!this.activeServiceWorker||OI()!==this.activeServiceWorker))try{await this.sender._send("keyChanged",{key:e},this.serviceWorkerReceiverAvailable?800:50)}catch{}}async _isAvailable(){try{if(!indexedDB)return!1;const e=await zd();return await ip(e,el,"1"),await ap(e,el),!0}catch{}return!1}async _withPendingWrite(e){this.pendingWrites++;try{await e()}finally{this.pendingWrites--}}async _set(e,t){return this._withPendingWrite(async()=>(await this._withRetries(s=>ip(s,e,t)),this.localCache[e]=t,this.notifyServiceWorker(e)))}async _get(e){const t=await this._withRetries(s=>UI(s,e));return this.localCache[e]=t,t}async _remove(e){return this._withPendingWrite(async()=>(await this._withRetries(t=>ap(t,e)),delete this.localCache[e],this.notifyServiceWorker(e)))}async _poll(){const e=await this._withRetries(n=>{const i=Bl(n,!1).getAll();return new Fi(i).toPromise()});if(!e)return[];if(this.pendingWrites!==0)return[];const t=[],s=new Set;if(e.length!==0)for(const{fbase_key:n,value:i}of e)s.add(n),JSON.stringify(this.localCache[n])!==JSON.stringify(i)&&(this.notifyListeners(n,i),t.push(n));for(const n of Object.keys(this.localCache))this.localCache[n]&&!s.has(n)&&(this.notifyListeners(n,null),t.push(n));return t}notifyListeners(e,t){this.localCache[e]=t;const s=this.listeners[e];if(s)for(const n of Array.from(s))n(t)}startPolling(){this.stopPolling(),this.pollTimer=setInterval(async()=>this._poll(),$I)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}_addListener(e,t){Object.keys(this.listeners).length===0&&this.startPolling(),this.listeners[e]||(this.listeners[e]=new Set,this._get(e)),this.listeners[e].add(t)}_removeListener(e,t){this.listeners[e]&&(this.listeners[e].delete(t),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&this.stopPolling()}}Cy.type="LOCAL";const zI=Cy;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function lp(r,e){return Zt(r,"POST","/v2/accounts/mfaSignIn:start",br(r,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const td=py("rcb"),HI=new Oi(3e4,6e4);class qI{constructor(){var e;this.hostLanguage="",this.counter=0,this.librarySeparatelyLoaded=!!(!((e=tt().grecaptcha)===null||e===void 0)&&e.render)}load(e,t=""){return ee(WI(t),e,"argument-error"),this.shouldResolveImmediately(t)&&Qm(tt().grecaptcha)?Promise.resolve(tt().grecaptcha):new Promise((s,n)=>{const i=tt().setTimeout(()=>{n(Ft(e,"network-request-failed"))},HI.get());tt()[td]=()=>{tt().clearTimeout(i),delete tt()[td];const l=tt().grecaptcha;if(!l||!Qm(l)){n(Ft(e,"internal-error"));return}const d=l.render;l.render=(u,h)=>{const m=d(u,h);return this.counter++,m},this.hostLanguage=t,s(l)};const a=`${eI()}?${mo({onload:td,render:"explicit",hl:t})}`;eh(a).catch(()=>{clearTimeout(i),n(Ft(e,"internal-error"))})})}clearedOneInstance(){this.counter--}shouldResolveImmediately(e){var t;return!!(!((t=tt().grecaptcha)===null||t===void 0)&&t.render)&&(e===this.hostLanguage||this.counter>0||this.librarySeparatelyLoaded)}}function WI(r){return r.length<=6&&/^\s*[a-zA-Z0-9\-]*\s*$/.test(r)}class GI{async load(e){return new oI(e)}clearedOneInstance(){}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const si="recaptcha",KI={theme:"light",type:"image"};class QI{constructor(e,t,s=Object.assign({},KI)){this.parameters=s,this.type=si,this.destroyed=!1,this.widgetId=null,this.tokenChangeListeners=new Set,this.renderPromise=null,this.recaptcha=null,this.auth=vr(e),this.isInvisible=this.parameters.size==="invisible",ee(typeof document<"u",this.auth,"operation-not-supported-in-this-environment");const n=typeof t=="string"?document.getElementById(t):t;ee(n,this.auth,"argument-error"),this.container=n,this.parameters.callback=this.makeTokenCallback(this.parameters.callback),this._recaptchaLoader=this.auth.settings.appVerificationDisabledForTesting?new GI:new qI,this.validateStartingState()}async verify(){this.assertNotDestroyed();const e=await this.render(),t=this.getAssertedRecaptcha(),s=t.getResponse(e);return s||new Promise(n=>{const i=a=>{a&&(this.tokenChangeListeners.delete(i),n(a))};this.tokenChangeListeners.add(i),this.isInvisible&&t.execute(e)})}render(){try{this.assertNotDestroyed()}catch(e){return Promise.reject(e)}return this.renderPromise?this.renderPromise:(this.renderPromise=this.makeRenderPromise().catch(e=>{throw this.renderPromise=null,e}),this.renderPromise)}_reset(){this.assertNotDestroyed(),this.widgetId!==null&&this.getAssertedRecaptcha().reset(this.widgetId)}clear(){this.assertNotDestroyed(),this.destroyed=!0,this._recaptchaLoader.clearedOneInstance(),this.isInvisible||this.container.childNodes.forEach(e=>{this.container.removeChild(e)})}validateStartingState(){ee(!this.parameters.sitekey,this.auth,"argument-error"),ee(this.isInvisible||!this.container.hasChildNodes(),this.auth,"argument-error"),ee(typeof document<"u",this.auth,"operation-not-supported-in-this-environment")}makeTokenCallback(e){return t=>{if(this.tokenChangeListeners.forEach(s=>s(t)),typeof e=="function")e(t);else if(typeof e=="string"){const s=tt()[e];typeof s=="function"&&s(t)}}}assertNotDestroyed(){ee(!this.destroyed,this.auth,"internal-error")}async makeRenderPromise(){if(await this.init(),!this.widgetId){let e=this.container;if(!this.isInvisible){const t=document.createElement("div");e.appendChild(t),e=t}this.widgetId=this.getAssertedRecaptcha().render(e,this.parameters)}return this.widgetId}async init(){ee(J0()&&!nh(),this.auth,"internal-error"),await YI(),this.recaptcha=await this._recaptchaLoader.load(this.auth,this.auth.languageCode||void 0);const e=await LC(this.auth);ee(e,this.auth,"internal-error"),this.parameters.sitekey=e}getAssertedRecaptcha(){return ee(this.recaptcha,this.auth,"internal-error"),this.recaptcha}}function YI(){let r=null;return new Promise(e=>{if(document.readyState==="complete"){e();return}r=()=>e(),window.addEventListener("load",r)}).catch(e=>{throw r&&window.removeEventListener("load",r),e})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class XI{constructor(e,t){this.verificationId=e,this.onConfirmation=t}confirm(e){const t=ri._fromVerification(this.verificationId,e);return this.onConfirmation(t)}}async function cp(r,e,t){if(Dt(r.app))return Promise.reject(Ar(r));const s=vr(r),n=await JI(s,e,Ye(t));return new XI(n,i=>EI(s,i))}async function JI(r,e,t){var s;if(!r._getRecaptchaConfig())try{await uI(r)}catch{console.log("Failed to initialize reCAPTCHA Enterprise config. Triggering the reCAPTCHA v2 verification.")}try{let n;if(typeof e=="string"?n={phoneNumber:e}:n=e,"session"in n){const i=n.session;if("phoneNumber"in n){ee(i.type==="enroll",r,"internal-error");const a={idToken:i.credential,phoneEnrollmentInfo:{phoneNumber:n.phoneNumber,clientType:"CLIENT_TYPE_WEB"}};return(await ed(r,a,"mfaSmsEnrollment",async(h,m)=>{if(m.phoneEnrollmentInfo.captchaResponse===ti){ee((t==null?void 0:t.type)===si,h,"argument-error");const x=await rd(h,m,t);return op(h,x)}return op(h,m)},"PHONE_PROVIDER").catch(h=>Promise.reject(h))).phoneSessionInfo.sessionInfo}else{ee(i.type==="signin",r,"internal-error");const a=((s=n.multiFactorHint)===null||s===void 0?void 0:s.uid)||n.multiFactorUid;ee(a,r,"missing-multi-factor-info");const l={mfaPendingCredential:i.credential,mfaEnrollmentId:a,phoneSignInInfo:{clientType:"CLIENT_TYPE_WEB"}};return(await ed(r,l,"mfaSmsSignIn",async(m,x)=>{if(x.phoneSignInInfo.captchaResponse===ti){ee((t==null?void 0:t.type)===si,m,"argument-error");const g=await rd(m,x,t);return lp(m,g)}return lp(m,x)},"PHONE_PROVIDER").catch(m=>Promise.reject(m))).phoneResponseInfo.sessionInfo}}else{const i={phoneNumber:n.phoneNumber,clientType:"CLIENT_TYPE_WEB"};return(await ed(r,i,"sendVerificationCode",async(u,h)=>{if(h.captchaResponse===ti){ee((t==null?void 0:t.type)===si,u,"argument-error");const m=await rd(u,h,t);return sp(u,m)}return sp(u,h)},"PHONE_PROVIDER").catch(u=>Promise.reject(u))).sessionInfo}}finally{t==null||t._reset()}}async function rd(r,e,t){ee(t.type===si,r,"argument-error");const s=await t.verify();ee(typeof s=="string",r,"argument-error");const n=Object.assign({},e);if("phoneEnrollmentInfo"in n){const i=n.phoneEnrollmentInfo.phoneNumber,a=n.phoneEnrollmentInfo.captchaResponse,l=n.phoneEnrollmentInfo.clientType,d=n.phoneEnrollmentInfo.recaptchaVersion;return Object.assign(n,{phoneEnrollmentInfo:{phoneNumber:i,recaptchaToken:s,captchaResponse:a,clientType:l,recaptchaVersion:d}}),n}else if("phoneSignInInfo"in n){const i=n.phoneSignInInfo.captchaResponse,a=n.phoneSignInInfo.clientType,l=n.phoneSignInInfo.recaptchaVersion;return Object.assign(n,{phoneSignInInfo:{recaptchaToken:s,captchaResponse:i,clientType:a,recaptchaVersion:l}}),n}else return Object.assign(n,{recaptchaToken:s}),n}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Iy(r,e){return e?jr(e):(ee(r._popupRedirectResolver,r,"argument-error"),r._popupRedirectResolver)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class oh extends th{constructor(e){super("custom","custom"),this.params=e}_getIdTokenResponse(e){return Rn(e,this._buildIdpRequest())}_linkToIdToken(e,t){return Rn(e,this._buildIdpRequest(t))}_getReauthenticationResolver(e){return Rn(e,this._buildIdpRequest())}_buildIdpRequest(e){const t={requestUri:this.params.requestUri,sessionId:this.params.sessionId,postBody:this.params.postBody,tenantId:this.params.tenantId,pendingToken:this.params.pendingToken,returnSecureToken:!0,returnIdpCredential:!0};return e&&(t.idToken=e),t}}function ZI(r){return by(r.auth,new oh(r),r.bypassAuthState)}function eS(r){const{auth:e,user:t}=r;return ee(t,e,"internal-error"),TI(t,new oh(r),r.bypassAuthState)}async function tS(r){const{auth:e,user:t}=r;return ee(t,e,"internal-error"),_I(t,new oh(r),r.bypassAuthState)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Sy{constructor(e,t,s,n,i=!1){this.auth=e,this.resolver=s,this.user=n,this.bypassAuthState=i,this.pendingPromise=null,this.eventManager=null,this.filter=Array.isArray(t)?t:[t]}execute(){return new Promise(async(e,t)=>{this.pendingPromise={resolve:e,reject:t};try{this.eventManager=await this.resolver._initialize(this.auth),await this.onExecution(),this.eventManager.registerConsumer(this)}catch(s){this.reject(s)}})}async onAuthEvent(e){const{urlResponse:t,sessionId:s,postBody:n,tenantId:i,error:a,type:l}=e;if(a){this.reject(a);return}const d={auth:this.auth,requestUri:t,sessionId:s,tenantId:i||void 0,postBody:n||void 0,user:this.user,bypassAuthState:this.bypassAuthState};try{this.resolve(await this.getIdpTask(l)(d))}catch(u){this.reject(u)}}onError(e){this.reject(e)}getIdpTask(e){switch(e){case"signInViaPopup":case"signInViaRedirect":return ZI;case"linkViaPopup":case"linkViaRedirect":return tS;case"reauthViaPopup":case"reauthViaRedirect":return eS;default:pr(this.auth,"internal-error")}}resolve(e){Or(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.resolve(e),this.unregisterAndCleanUp()}reject(e){Or(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.reject(e),this.unregisterAndCleanUp()}unregisterAndCleanUp(){this.eventManager&&this.eventManager.unregisterConsumer(this),this.pendingPromise=null,this.cleanUp()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const rS=new Oi(2e3,1e4);class kn extends Sy{constructor(e,t,s,n,i){super(e,t,n,i),this.provider=s,this.authWindow=null,this.pollId=null,kn.currentPopupAction&&kn.currentPopupAction.cancel(),kn.currentPopupAction=this}async executeNotNull(){const e=await this.execute();return ee(e,this.auth,"internal-error"),e}async onExecution(){Or(this.filter.length===1,"Popup operations only handle one event");const e=sh();this.authWindow=await this.resolver._openPopup(this.auth,this.provider,this.filter[0],e),this.authWindow.associatedEvent=e,this.resolver._originValidation(this.auth).catch(t=>{this.reject(t)}),this.resolver._isIframeWebStorageSupported(this.auth,t=>{t||this.reject(Ft(this.auth,"web-storage-unsupported"))}),this.pollUserCancellation()}get eventId(){var e;return((e=this.authWindow)===null||e===void 0?void 0:e.associatedEvent)||null}cancel(){this.reject(Ft(this.auth,"cancelled-popup-request"))}cleanUp(){this.authWindow&&this.authWindow.close(),this.pollId&&window.clearTimeout(this.pollId),this.authWindow=null,this.pollId=null,kn.currentPopupAction=null}pollUserCancellation(){const e=()=>{var t,s;if(!((s=(t=this.authWindow)===null||t===void 0?void 0:t.window)===null||s===void 0)&&s.closed){this.pollId=window.setTimeout(()=>{this.pollId=null,this.reject(Ft(this.auth,"popup-closed-by-user"))},8e3);return}this.pollId=window.setTimeout(e,rS.get())};e()}}kn.currentPopupAction=null;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const sS="pendingRedirect",Ra=new Map;class nS extends Sy{constructor(e,t,s=!1){super(e,["signInViaRedirect","linkViaRedirect","reauthViaRedirect","unknown"],t,void 0,s),this.eventId=null}async execute(){let e=Ra.get(this.auth._key());if(!e){try{const s=await oS(this.resolver,this.auth)?await super.execute():null;e=()=>Promise.resolve(s)}catch(t){e=()=>Promise.reject(t)}Ra.set(this.auth._key(),e)}return this.bypassAuthState||Ra.set(this.auth._key(),()=>Promise.resolve(null)),e()}async onAuthEvent(e){if(e.type==="signInViaRedirect")return super.onAuthEvent(e);if(e.type==="unknown"){this.resolve(null);return}if(e.eventId){const t=await this.auth._redirectUserForId(e.eventId);if(t)return this.user=t,super.onAuthEvent(e);this.resolve(null)}}async onExecution(){}cleanUp(){}}async function oS(r,e){const t=jy(e),s=ky(r);if(!await s._isAvailable())return!1;const n=await s._get(t)==="true";return await s._remove(t),n}async function iS(r,e){return ky(r)._set(jy(e),"true")}function aS(r,e){Ra.set(r._key(),e)}function ky(r){return jr(r._redirectPersistence)}function jy(r){return Pa(sS,r.config.apiKey,r.name)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function lS(r,e,t){return cS(r,e,t)}async function cS(r,e,t){if(Dt(r.app))return Promise.reject(Ar(r));const s=vr(r);kC(r,e,rh),await s._initializationPromise;const n=Iy(s,t);return await iS(n,s),n._openRedirect(s,e,"signInViaRedirect")}async function dS(r,e){return await vr(r)._initializationPromise,Ay(r,e,!1)}async function Ay(r,e,t=!1){if(Dt(r.app))return Promise.reject(Ar(r));const s=vr(r),n=Iy(s,e),a=await new nS(s,n,t).execute();return a&&!t&&(delete a.user._redirectEventId,await s._persistUserIfCurrent(a.user),await s._setRedirectUser(null,e)),a}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const uS=10*60*1e3;class hS{constructor(e){this.auth=e,this.cachedEventUids=new Set,this.consumers=new Set,this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1,this.lastProcessedEventTime=Date.now()}registerConsumer(e){this.consumers.add(e),this.queuedRedirectEvent&&this.isEventForConsumer(this.queuedRedirectEvent,e)&&(this.sendToConsumer(this.queuedRedirectEvent,e),this.saveEventToCache(this.queuedRedirectEvent),this.queuedRedirectEvent=null)}unregisterConsumer(e){this.consumers.delete(e)}onEvent(e){if(this.hasEventBeenHandled(e))return!1;let t=!1;return this.consumers.forEach(s=>{this.isEventForConsumer(e,s)&&(t=!0,this.sendToConsumer(e,s),this.saveEventToCache(e))}),this.hasHandledPotentialRedirect||!fS(e)||(this.hasHandledPotentialRedirect=!0,t||(this.queuedRedirectEvent=e,t=!0)),t}sendToConsumer(e,t){var s;if(e.error&&!Py(e)){const n=((s=e.error.code)===null||s===void 0?void 0:s.split("auth/")[1])||"internal-error";t.onError(Ft(this.auth,n))}else t.onAuthEvent(e)}isEventForConsumer(e,t){const s=t.eventId===null||!!e.eventId&&e.eventId===t.eventId;return t.filter.includes(e.type)&&s}hasEventBeenHandled(e){return Date.now()-this.lastProcessedEventTime>=uS&&this.cachedEventUids.clear(),this.cachedEventUids.has(dp(e))}saveEventToCache(e){this.cachedEventUids.add(dp(e)),this.lastProcessedEventTime=Date.now()}}function dp(r){return[r.type,r.eventId,r.sessionId,r.tenantId].filter(e=>e).join("-")}function Py({type:r,error:e}){return r==="unknown"&&(e==null?void 0:e.code)==="auth/no-auth-event"}function fS(r){switch(r.type){case"signInViaRedirect":case"linkViaRedirect":case"reauthViaRedirect":return!0;case"unknown":return Py(r);default:return!1}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function mS(r,e={}){return Zt(r,"GET","/v1/projects",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const pS=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,gS=/^https?/;async function xS(r){if(r.config.emulator)return;const{authorizedDomains:e}=await mS(r);for(const t of e)try{if(yS(t))return}catch{}pr(r,"unauthorized-domain")}function yS(r){const e=$d(),{protocol:t,hostname:s}=new URL(e);if(r.startsWith("chrome-extension://")){const a=new URL(r);return a.hostname===""&&s===""?t==="chrome-extension:"&&r.replace("chrome-extension://","")===e.replace("chrome-extension://",""):t==="chrome-extension:"&&a.hostname===s}if(!gS.test(t))return!1;if(pS.test(r))return s===r;const n=r.replace(/\./g,"\\.");return new RegExp("^(.+\\."+n+"|"+n+")$","i").test(s)}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const bS=new Oi(3e4,6e4);function up(){const r=tt().___jsl;if(r!=null&&r.H){for(const e of Object.keys(r.H))if(r.H[e].r=r.H[e].r||[],r.H[e].L=r.H[e].L||[],r.H[e].r=[...r.H[e].L],r.CP)for(let t=0;t<r.CP.length;t++)r.CP[t]=null}}function vS(r){return new Promise((e,t)=>{var s,n,i;function a(){up(),gapi.load("gapi.iframes",{callback:()=>{e(gapi.iframes.getContext())},ontimeout:()=>{up(),t(Ft(r,"network-request-failed"))},timeout:bS.get()})}if(!((n=(s=tt().gapi)===null||s===void 0?void 0:s.iframes)===null||n===void 0)&&n.Iframe)e(gapi.iframes.getContext());else if(!((i=tt().gapi)===null||i===void 0)&&i.load)a();else{const l=py("iframefcb");return tt()[l]=()=>{gapi.load?a():t(Ft(r,"network-request-failed"))},eh(`${rI()}?onload=${l}`).catch(d=>t(d))}}).catch(e=>{throw Ma=null,e})}let Ma=null;function wS(r){return Ma=Ma||vS(r),Ma}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const _S=new Oi(5e3,15e3),TS="__/auth/iframe",ES="emulator/auth/iframe",NS={style:{position:"absolute",top:"-100px",width:"1px",height:"1px"},"aria-hidden":"true",tabindex:"-1"},CS=new Map([["identitytoolkit.googleapis.com","p"],["staging-identitytoolkit.sandbox.googleapis.com","s"],["test-identitytoolkit.sandbox.googleapis.com","t"]]);function IS(r){const e=r.config;ee(e.authDomain,r,"auth-domain-config-required");const t=e.emulator?Xu(e,ES):`https://${r.config.authDomain}/${TS}`,s={apiKey:e.apiKey,appName:r.name,v:mn},n=CS.get(r.config.apiHost);n&&(s.eid=n);const i=r._getFrameworks();return i.length&&(s.fw=i.join(",")),`${t}?${mo(s).slice(1)}`}async function SS(r){const e=await wS(r),t=tt().gapi;return ee(t,r,"internal-error"),e.open({where:document.body,url:IS(r),messageHandlersFilter:t.iframes.CROSS_ORIGIN_IFRAMES_FILTER,attributes:NS,dontclear:!0},s=>new Promise(async(n,i)=>{await s.restyle({setHideOnLeave:!1});const a=Ft(r,"network-request-failed"),l=tt().setTimeout(()=>{i(a)},_S.get());function d(){tt().clearTimeout(l),n(s)}s.ping(d).then(d,()=>{i(a)})}))}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const kS={location:"yes",resizable:"yes",statusbar:"yes",toolbar:"no"},jS=500,AS=600,PS="_blank",RS="http://localhost";class hp{constructor(e){this.window=e,this.associatedEvent=null}close(){if(this.window)try{this.window.close()}catch{}}}function MS(r,e,t,s=jS,n=AS){const i=Math.max((window.screen.availHeight-n)/2,0).toString(),a=Math.max((window.screen.availWidth-s)/2,0).toString();let l="";const d=Object.assign(Object.assign({},kS),{width:s.toString(),height:n.toString(),top:i,left:a}),u=vt().toLowerCase();t&&(l=ly(u)?PS:t),iy(u)&&(e=e||RS,d.scrollbars="yes");const h=Object.entries(d).reduce((x,[g,v])=>`${x}${g}=${v},`,"");if(WC(u)&&l!=="_self")return DS(e||"",l),new hp(null);const m=window.open(e||"",l,h);ee(m,r,"popup-blocked");try{m.focus()}catch{}return new hp(m)}function DS(r,e){const t=document.createElement("a");t.href=r,t.target=e;const s=document.createEvent("MouseEvent");s.initMouseEvent("click",!0,!0,window,1,0,0,0,0,!1,!1,!1,!1,1,null),t.dispatchEvent(s)}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const OS="__/auth/handler",LS="emulator/auth/handler",VS=encodeURIComponent("fac");async function fp(r,e,t,s,n,i){ee(r.config.authDomain,r,"auth-domain-config-required"),ee(r.config.apiKey,r,"invalid-api-key");const a={apiKey:r.config.apiKey,appName:r.name,authType:t,redirectUrl:s,v:mn,eventId:n};if(e instanceof rh){e.setDefaultLanguage(r.languageCode),a.providerId=e.providerId||"",fN(e.getCustomParameters())||(a.customParameters=JSON.stringify(e.getCustomParameters()));for(const[h,m]of Object.entries({}))a[h]=m}if(e instanceof Vi){const h=e.getScopes().filter(m=>m!=="");h.length>0&&(a.scopes=h.join(","))}r.tenantId&&(a.tid=r.tenantId);const l=a;for(const h of Object.keys(l))l[h]===void 0&&delete l[h];const d=await r._getAppCheckToken(),u=d?`#${VS}=${encodeURIComponent(d)}`:"";return`${FS(r)}?${mo(l).slice(1)}${u}`}function FS({config:r}){return r.emulator?Xu(r,LS):`https://${r.authDomain}/${OS}`}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const sd="webStorageSupport";class US{constructor(){this.eventManagers={},this.iframes={},this.originValidationPromises={},this._redirectPersistence=Ty,this._completeRedirectFn=Ay,this._overrideRedirectResult=aS}async _openPopup(e,t,s,n){var i;Or((i=this.eventManagers[e._key()])===null||i===void 0?void 0:i.manager,"_initialize() not called before _openPopup()");const a=await fp(e,t,s,$d(),n);return MS(e,a,sh())}async _openRedirect(e,t,s,n){await this._originValidation(e);const i=await fp(e,t,s,$d(),n);return MI(i),new Promise(()=>{})}_initialize(e){const t=e._key();if(this.eventManagers[t]){const{manager:n,promise:i}=this.eventManagers[t];return n?Promise.resolve(n):(Or(i,"If manager is not set, promise should be"),i)}const s=this.initAndGetManager(e);return this.eventManagers[t]={promise:s},s.catch(()=>{delete this.eventManagers[t]}),s}async initAndGetManager(e){const t=await SS(e),s=new hS(e);return t.register("authEvent",n=>(ee(n==null?void 0:n.authEvent,e,"invalid-auth-event"),{status:s.onEvent(n.authEvent)?"ACK":"ERROR"}),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER),this.eventManagers[e._key()]={manager:s},this.iframes[e._key()]=t,s}_isIframeWebStorageSupported(e,t){this.iframes[e._key()].send(sd,{type:sd},n=>{var i;const a=(i=n==null?void 0:n[0])===null||i===void 0?void 0:i[sd];a!==void 0&&t(!!a),pr(e,"internal-error")},gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER)}_originValidation(e){const t=e._key();return this.originValidationPromises[t]||(this.originValidationPromises[t]=xS(e)),this.originValidationPromises[t]}get _shouldInitProactively(){return fy()||ay()||Zu()}}const $S=US;var mp="@firebase/auth",pp="1.10.7";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class BS{constructor(e){this.auth=e,this.internalListeners=new Map}getUid(){var e;return this.assertAuthConfigured(),((e=this.auth.currentUser)===null||e===void 0?void 0:e.uid)||null}async getToken(e){return this.assertAuthConfigured(),await this.auth._initializationPromise,this.auth.currentUser?{accessToken:await this.auth.currentUser.getIdToken(e)}:null}addAuthTokenListener(e){if(this.assertAuthConfigured(),this.internalListeners.has(e))return;const t=this.auth.onIdTokenChanged(s=>{e((s==null?void 0:s.stsTokenManager.accessToken)||null)});this.internalListeners.set(e,t),this.updateProactiveRefresh()}removeAuthTokenListener(e){this.assertAuthConfigured();const t=this.internalListeners.get(e);t&&(this.internalListeners.delete(e),t(),this.updateProactiveRefresh())}assertAuthConfigured(){ee(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}updateProactiveRefresh(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function zS(r){switch(r){case"Node":return"node";case"ReactNative":return"rn";case"Worker":return"webworker";case"Cordova":return"cordova";case"WebExtension":return"web-extension";default:return}}function HS(r){nn(new Ts("auth",(e,{options:t})=>{const s=e.getProvider("app").getImmediate(),n=e.getProvider("heartbeat"),i=e.getProvider("app-check-internal"),{apiKey:a,authDomain:l}=s.options;ee(a&&!a.includes(":"),"invalid-api-key",{appName:s.name});const d={apiKey:a,authDomain:l,clientPlatform:r,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:my(r)},u=new JC(s,n,i,d);return fI(u,t),u},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((e,t,s)=>{e.getProvider("auth-internal").initialize()})),nn(new Ts("auth-internal",e=>{const t=vr(e.getProvider("auth").getImmediate());return(s=>new BS(s))(t)},"PRIVATE").setInstantiationMode("EXPLICIT")),cr(mp,pp,zS(r)),cr(mp,pp,"esm2017")}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const qS=5*60,WS=z0("authIdTokenMaxAge")||qS;let gp=null;const GS=r=>async e=>{const t=e&&await e.getIdTokenResult(),s=t&&(new Date().getTime()-Date.parse(t.issuedAtTime))/1e3;if(s&&s>WS)return;const n=t==null?void 0:t.token;gp!==n&&(gp=n,await fetch(r,{method:n?"POST":"DELETE",headers:n?{Authorization:`Bearer ${n}`}:{}}))};function KS(r=Ku()){const e=Fl(r,"auth");if(e.isInitialized())return e.getImmediate();const t=hI(r,{popupRedirectResolver:$S,persistence:[zI,AI,Ty]}),s=z0("authTokenSyncURL");if(s&&typeof isSecureContext=="boolean"&&isSecureContext){const i=new URL(s,location.origin);if(location.origin===i.origin){const a=GS(i.toString());CI(t,a,()=>a(t.currentUser)),NI(t,l=>a(l))}}const n=U0("auth");return n&&mI(t,`http://${n}`),t}function QS(){var r,e;return(e=(r=document.getElementsByTagName("head"))===null||r===void 0?void 0:r[0])!==null&&e!==void 0?e:document}ZC({loadJS(r){return new Promise((e,t)=>{const s=document.createElement("script");s.setAttribute("src",r),s.onload=e,s.onerror=n=>{const i=Ft("internal-error");i.customData=n,t(i)},s.type="text/javascript",s.charset="UTF-8",QS().appendChild(s)})},gapiScript:"https://apis.google.com/js/api.js",recaptchaV2Script:"https://www.google.com/recaptcha/api.js",recaptchaEnterpriseScript:"https://www.google.com/recaptcha/enterprise.js?render="});HS("Browser");var xp=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var vs,Ry;(function(){var r;/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/function e(S,I){function E(){}E.prototype=I.prototype,S.D=I.prototype,S.prototype=new E,S.prototype.constructor=S,S.C=function(j,C,A){for(var P=Array(arguments.length-2),W=2;W<arguments.length;W++)P[W-2]=arguments[W];return I.prototype[C].apply(j,P)}}function t(){this.blockSize=-1}function s(){this.blockSize=-1,this.blockSize=64,this.g=Array(4),this.B=Array(this.blockSize),this.o=this.h=0,this.s()}e(s,t),s.prototype.s=function(){this.g[0]=1732584193,this.g[1]=4023233417,this.g[2]=2562383102,this.g[3]=271733878,this.o=this.h=0};function n(S,I,E){E||(E=0);var j=Array(16);if(typeof I=="string")for(var C=0;16>C;++C)j[C]=I.charCodeAt(E++)|I.charCodeAt(E++)<<8|I.charCodeAt(E++)<<16|I.charCodeAt(E++)<<24;else for(C=0;16>C;++C)j[C]=I[E++]|I[E++]<<8|I[E++]<<16|I[E++]<<24;I=S.g[0],E=S.g[1],C=S.g[2];var A=S.g[3],P=I+(A^E&(C^A))+j[0]+3614090360&4294967295;I=E+(P<<7&4294967295|P>>>25),P=A+(C^I&(E^C))+j[1]+3905402710&4294967295,A=I+(P<<12&4294967295|P>>>20),P=C+(E^A&(I^E))+j[2]+606105819&4294967295,C=A+(P<<17&4294967295|P>>>15),P=E+(I^C&(A^I))+j[3]+3250441966&4294967295,E=C+(P<<22&4294967295|P>>>10),P=I+(A^E&(C^A))+j[4]+4118548399&4294967295,I=E+(P<<7&4294967295|P>>>25),P=A+(C^I&(E^C))+j[5]+1200080426&4294967295,A=I+(P<<12&4294967295|P>>>20),P=C+(E^A&(I^E))+j[6]+2821735955&4294967295,C=A+(P<<17&4294967295|P>>>15),P=E+(I^C&(A^I))+j[7]+4249261313&4294967295,E=C+(P<<22&4294967295|P>>>10),P=I+(A^E&(C^A))+j[8]+1770035416&4294967295,I=E+(P<<7&4294967295|P>>>25),P=A+(C^I&(E^C))+j[9]+2336552879&4294967295,A=I+(P<<12&4294967295|P>>>20),P=C+(E^A&(I^E))+j[10]+4294925233&4294967295,C=A+(P<<17&4294967295|P>>>15),P=E+(I^C&(A^I))+j[11]+2304563134&4294967295,E=C+(P<<22&4294967295|P>>>10),P=I+(A^E&(C^A))+j[12]+1804603682&4294967295,I=E+(P<<7&4294967295|P>>>25),P=A+(C^I&(E^C))+j[13]+4254626195&4294967295,A=I+(P<<12&4294967295|P>>>20),P=C+(E^A&(I^E))+j[14]+2792965006&4294967295,C=A+(P<<17&4294967295|P>>>15),P=E+(I^C&(A^I))+j[15]+1236535329&4294967295,E=C+(P<<22&4294967295|P>>>10),P=I+(C^A&(E^C))+j[1]+4129170786&4294967295,I=E+(P<<5&4294967295|P>>>27),P=A+(E^C&(I^E))+j[6]+3225465664&4294967295,A=I+(P<<9&4294967295|P>>>23),P=C+(I^E&(A^I))+j[11]+643717713&4294967295,C=A+(P<<14&4294967295|P>>>18),P=E+(A^I&(C^A))+j[0]+3921069994&4294967295,E=C+(P<<20&4294967295|P>>>12),P=I+(C^A&(E^C))+j[5]+3593408605&4294967295,I=E+(P<<5&4294967295|P>>>27),P=A+(E^C&(I^E))+j[10]+38016083&4294967295,A=I+(P<<9&4294967295|P>>>23),P=C+(I^E&(A^I))+j[15]+3634488961&4294967295,C=A+(P<<14&4294967295|P>>>18),P=E+(A^I&(C^A))+j[4]+3889429448&4294967295,E=C+(P<<20&4294967295|P>>>12),P=I+(C^A&(E^C))+j[9]+568446438&4294967295,I=E+(P<<5&4294967295|P>>>27),P=A+(E^C&(I^E))+j[14]+3275163606&4294967295,A=I+(P<<9&4294967295|P>>>23),P=C+(I^E&(A^I))+j[3]+4107603335&4294967295,C=A+(P<<14&4294967295|P>>>18),P=E+(A^I&(C^A))+j[8]+1163531501&4294967295,E=C+(P<<20&4294967295|P>>>12),P=I+(C^A&(E^C))+j[13]+2850285829&4294967295,I=E+(P<<5&4294967295|P>>>27),P=A+(E^C&(I^E))+j[2]+4243563512&4294967295,A=I+(P<<9&4294967295|P>>>23),P=C+(I^E&(A^I))+j[7]+1735328473&4294967295,C=A+(P<<14&4294967295|P>>>18),P=E+(A^I&(C^A))+j[12]+2368359562&4294967295,E=C+(P<<20&4294967295|P>>>12),P=I+(E^C^A)+j[5]+4294588738&4294967295,I=E+(P<<4&4294967295|P>>>28),P=A+(I^E^C)+j[8]+2272392833&4294967295,A=I+(P<<11&4294967295|P>>>21),P=C+(A^I^E)+j[11]+1839030562&4294967295,C=A+(P<<16&4294967295|P>>>16),P=E+(C^A^I)+j[14]+4259657740&4294967295,E=C+(P<<23&4294967295|P>>>9),P=I+(E^C^A)+j[1]+2763975236&4294967295,I=E+(P<<4&4294967295|P>>>28),P=A+(I^E^C)+j[4]+1272893353&4294967295,A=I+(P<<11&4294967295|P>>>21),P=C+(A^I^E)+j[7]+4139469664&4294967295,C=A+(P<<16&4294967295|P>>>16),P=E+(C^A^I)+j[10]+3200236656&4294967295,E=C+(P<<23&4294967295|P>>>9),P=I+(E^C^A)+j[13]+681279174&4294967295,I=E+(P<<4&4294967295|P>>>28),P=A+(I^E^C)+j[0]+3936430074&4294967295,A=I+(P<<11&4294967295|P>>>21),P=C+(A^I^E)+j[3]+3572445317&4294967295,C=A+(P<<16&4294967295|P>>>16),P=E+(C^A^I)+j[6]+76029189&4294967295,E=C+(P<<23&4294967295|P>>>9),P=I+(E^C^A)+j[9]+3654602809&4294967295,I=E+(P<<4&4294967295|P>>>28),P=A+(I^E^C)+j[12]+3873151461&4294967295,A=I+(P<<11&4294967295|P>>>21),P=C+(A^I^E)+j[15]+530742520&4294967295,C=A+(P<<16&4294967295|P>>>16),P=E+(C^A^I)+j[2]+3299628645&4294967295,E=C+(P<<23&4294967295|P>>>9),P=I+(C^(E|~A))+j[0]+4096336452&4294967295,I=E+(P<<6&4294967295|P>>>26),P=A+(E^(I|~C))+j[7]+1126891415&4294967295,A=I+(P<<10&4294967295|P>>>22),P=C+(I^(A|~E))+j[14]+2878612391&4294967295,C=A+(P<<15&4294967295|P>>>17),P=E+(A^(C|~I))+j[5]+4237533241&4294967295,E=C+(P<<21&4294967295|P>>>11),P=I+(C^(E|~A))+j[12]+1700485571&4294967295,I=E+(P<<6&4294967295|P>>>26),P=A+(E^(I|~C))+j[3]+2399980690&4294967295,A=I+(P<<10&4294967295|P>>>22),P=C+(I^(A|~E))+j[10]+4293915773&4294967295,C=A+(P<<15&4294967295|P>>>17),P=E+(A^(C|~I))+j[1]+2240044497&4294967295,E=C+(P<<21&4294967295|P>>>11),P=I+(C^(E|~A))+j[8]+1873313359&4294967295,I=E+(P<<6&4294967295|P>>>26),P=A+(E^(I|~C))+j[15]+4264355552&4294967295,A=I+(P<<10&4294967295|P>>>22),P=C+(I^(A|~E))+j[6]+2734768916&4294967295,C=A+(P<<15&4294967295|P>>>17),P=E+(A^(C|~I))+j[13]+1309151649&4294967295,E=C+(P<<21&4294967295|P>>>11),P=I+(C^(E|~A))+j[4]+4149444226&4294967295,I=E+(P<<6&4294967295|P>>>26),P=A+(E^(I|~C))+j[11]+3174756917&4294967295,A=I+(P<<10&4294967295|P>>>22),P=C+(I^(A|~E))+j[2]+718787259&4294967295,C=A+(P<<15&4294967295|P>>>17),P=E+(A^(C|~I))+j[9]+3951481745&4294967295,S.g[0]=S.g[0]+I&4294967295,S.g[1]=S.g[1]+(C+(P<<21&4294967295|P>>>11))&4294967295,S.g[2]=S.g[2]+C&4294967295,S.g[3]=S.g[3]+A&4294967295}s.prototype.u=function(S,I){I===void 0&&(I=S.length);for(var E=I-this.blockSize,j=this.B,C=this.h,A=0;A<I;){if(C==0)for(;A<=E;)n(this,S,A),A+=this.blockSize;if(typeof S=="string"){for(;A<I;)if(j[C++]=S.charCodeAt(A++),C==this.blockSize){n(this,j),C=0;break}}else for(;A<I;)if(j[C++]=S[A++],C==this.blockSize){n(this,j),C=0;break}}this.h=C,this.o+=I},s.prototype.v=function(){var S=Array((56>this.h?this.blockSize:2*this.blockSize)-this.h);S[0]=128;for(var I=1;I<S.length-8;++I)S[I]=0;var E=8*this.o;for(I=S.length-8;I<S.length;++I)S[I]=E&255,E/=256;for(this.u(S),S=Array(16),I=E=0;4>I;++I)for(var j=0;32>j;j+=8)S[E++]=this.g[I]>>>j&255;return S};function i(S,I){var E=l;return Object.prototype.hasOwnProperty.call(E,S)?E[S]:E[S]=I(S)}function a(S,I){this.h=I;for(var E=[],j=!0,C=S.length-1;0<=C;C--){var A=S[C]|0;j&&A==I||(E[C]=A,j=!1)}this.g=E}var l={};function d(S){return-128<=S&&128>S?i(S,function(I){return new a([I|0],0>I?-1:0)}):new a([S|0],0>S?-1:0)}function u(S){if(isNaN(S)||!isFinite(S))return m;if(0>S)return w(u(-S));for(var I=[],E=1,j=0;S>=E;j++)I[j]=S/E|0,E*=4294967296;return new a(I,0)}function h(S,I){if(S.length==0)throw Error("number format error: empty string");if(I=I||10,2>I||36<I)throw Error("radix out of range: "+I);if(S.charAt(0)=="-")return w(h(S.substring(1),I));if(0<=S.indexOf("-"))throw Error('number format error: interior "-" character');for(var E=u(Math.pow(I,8)),j=m,C=0;C<S.length;C+=8){var A=Math.min(8,S.length-C),P=parseInt(S.substring(C,C+A),I);8>A?(A=u(Math.pow(I,A)),j=j.j(A).add(u(P))):(j=j.j(E),j=j.add(u(P)))}return j}var m=d(0),x=d(1),g=d(16777216);r=a.prototype,r.m=function(){if(b(this))return-w(this).m();for(var S=0,I=1,E=0;E<this.g.length;E++){var j=this.i(E);S+=(0<=j?j:4294967296+j)*I,I*=4294967296}return S},r.toString=function(S){if(S=S||10,2>S||36<S)throw Error("radix out of range: "+S);if(v(this))return"0";if(b(this))return"-"+w(this).toString(S);for(var I=u(Math.pow(S,6)),E=this,j="";;){var C=R(E,I).g;E=k(E,C.j(I));var A=((0<E.g.length?E.g[0]:E.h)>>>0).toString(S);if(E=C,v(E))return A+j;for(;6>A.length;)A="0"+A;j=A+j}},r.i=function(S){return 0>S?0:S<this.g.length?this.g[S]:this.h};function v(S){if(S.h!=0)return!1;for(var I=0;I<S.g.length;I++)if(S.g[I]!=0)return!1;return!0}function b(S){return S.h==-1}r.l=function(S){return S=k(this,S),b(S)?-1:v(S)?0:1};function w(S){for(var I=S.g.length,E=[],j=0;j<I;j++)E[j]=~S.g[j];return new a(E,~S.h).add(x)}r.abs=function(){return b(this)?w(this):this},r.add=function(S){for(var I=Math.max(this.g.length,S.g.length),E=[],j=0,C=0;C<=I;C++){var A=j+(this.i(C)&65535)+(S.i(C)&65535),P=(A>>>16)+(this.i(C)>>>16)+(S.i(C)>>>16);j=P>>>16,A&=65535,P&=65535,E[C]=P<<16|A}return new a(E,E[E.length-1]&-2147483648?-1:0)};function k(S,I){return S.add(w(I))}r.j=function(S){if(v(this)||v(S))return m;if(b(this))return b(S)?w(this).j(w(S)):w(w(this).j(S));if(b(S))return w(this.j(w(S)));if(0>this.l(g)&&0>S.l(g))return u(this.m()*S.m());for(var I=this.g.length+S.g.length,E=[],j=0;j<2*I;j++)E[j]=0;for(j=0;j<this.g.length;j++)for(var C=0;C<S.g.length;C++){var A=this.i(j)>>>16,P=this.i(j)&65535,W=S.i(C)>>>16,oe=S.i(C)&65535;E[2*j+2*C]+=P*oe,T(E,2*j+2*C),E[2*j+2*C+1]+=A*oe,T(E,2*j+2*C+1),E[2*j+2*C+1]+=P*W,T(E,2*j+2*C+1),E[2*j+2*C+2]+=A*W,T(E,2*j+2*C+2)}for(j=0;j<I;j++)E[j]=E[2*j+1]<<16|E[2*j];for(j=I;j<2*I;j++)E[j]=0;return new a(E,0)};function T(S,I){for(;(S[I]&65535)!=S[I];)S[I+1]+=S[I]>>>16,S[I]&=65535,I++}function _(S,I){this.g=S,this.h=I}function R(S,I){if(v(I))throw Error("division by zero");if(v(S))return new _(m,m);if(b(S))return I=R(w(S),I),new _(w(I.g),w(I.h));if(b(I))return I=R(S,w(I)),new _(w(I.g),I.h);if(30<S.g.length){if(b(S)||b(I))throw Error("slowDivide_ only works with positive integers.");for(var E=x,j=I;0>=j.l(S);)E=D(E),j=D(j);var C=$(E,1),A=$(j,1);for(j=$(j,2),E=$(E,2);!v(j);){var P=A.add(j);0>=P.l(S)&&(C=C.add(E),A=P),j=$(j,1),E=$(E,1)}return I=k(S,C.j(I)),new _(C,I)}for(C=m;0<=S.l(I);){for(E=Math.max(1,Math.floor(S.m()/I.m())),j=Math.ceil(Math.log(E)/Math.LN2),j=48>=j?1:Math.pow(2,j-48),A=u(E),P=A.j(I);b(P)||0<P.l(S);)E-=j,A=u(E),P=A.j(I);v(A)&&(A=x),C=C.add(A),S=k(S,P)}return new _(C,S)}r.A=function(S){return R(this,S).h},r.and=function(S){for(var I=Math.max(this.g.length,S.g.length),E=[],j=0;j<I;j++)E[j]=this.i(j)&S.i(j);return new a(E,this.h&S.h)},r.or=function(S){for(var I=Math.max(this.g.length,S.g.length),E=[],j=0;j<I;j++)E[j]=this.i(j)|S.i(j);return new a(E,this.h|S.h)},r.xor=function(S){for(var I=Math.max(this.g.length,S.g.length),E=[],j=0;j<I;j++)E[j]=this.i(j)^S.i(j);return new a(E,this.h^S.h)};function D(S){for(var I=S.g.length+1,E=[],j=0;j<I;j++)E[j]=S.i(j)<<1|S.i(j-1)>>>31;return new a(E,S.h)}function $(S,I){var E=I>>5;I%=32;for(var j=S.g.length-E,C=[],A=0;A<j;A++)C[A]=0<I?S.i(A+E)>>>I|S.i(A+E+1)<<32-I:S.i(A+E);return new a(C,S.h)}s.prototype.digest=s.prototype.v,s.prototype.reset=s.prototype.s,s.prototype.update=s.prototype.u,Ry=s,a.prototype.add=a.prototype.add,a.prototype.multiply=a.prototype.j,a.prototype.modulo=a.prototype.A,a.prototype.compare=a.prototype.l,a.prototype.toNumber=a.prototype.m,a.prototype.toString=a.prototype.toString,a.prototype.getBits=a.prototype.i,a.fromNumber=u,a.fromString=h,vs=a}).apply(typeof xp<"u"?xp:typeof self<"u"?self:typeof window<"u"?window:{});var va=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var My,qo,Dy,Da,Hd,Oy,Ly,Vy;(function(){var r,e=typeof Object.defineProperties=="function"?Object.defineProperty:function(c,f,y){return c==Array.prototype||c==Object.prototype||(c[f]=y.value),c};function t(c){c=[typeof globalThis=="object"&&globalThis,c,typeof window=="object"&&window,typeof self=="object"&&self,typeof va=="object"&&va];for(var f=0;f<c.length;++f){var y=c[f];if(y&&y.Math==Math)return y}throw Error("Cannot find global object")}var s=t(this);function n(c,f){if(f)e:{var y=s;c=c.split(".");for(var N=0;N<c.length-1;N++){var O=c[N];if(!(O in y))break e;y=y[O]}c=c[c.length-1],N=y[c],f=f(N),f!=N&&f!=null&&e(y,c,{configurable:!0,writable:!0,value:f})}}function i(c,f){c instanceof String&&(c+="");var y=0,N=!1,O={next:function(){if(!N&&y<c.length){var F=y++;return{value:f(F,c[F]),done:!1}}return N=!0,{done:!0,value:void 0}}};return O[Symbol.iterator]=function(){return O},O}n("Array.prototype.values",function(c){return c||function(){return i(this,function(f,y){return y})}});/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/var a=a||{},l=this||self;function d(c){var f=typeof c;return f=f!="object"?f:c?Array.isArray(c)?"array":f:"null",f=="array"||f=="object"&&typeof c.length=="number"}function u(c){var f=typeof c;return f=="object"&&c!=null||f=="function"}function h(c,f,y){return c.call.apply(c.bind,arguments)}function m(c,f,y){if(!c)throw Error();if(2<arguments.length){var N=Array.prototype.slice.call(arguments,2);return function(){var O=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(O,N),c.apply(f,O)}}return function(){return c.apply(f,arguments)}}function x(c,f,y){return x=Function.prototype.bind&&Function.prototype.bind.toString().indexOf("native code")!=-1?h:m,x.apply(null,arguments)}function g(c,f){var y=Array.prototype.slice.call(arguments,1);return function(){var N=y.slice();return N.push.apply(N,arguments),c.apply(this,N)}}function v(c,f){function y(){}y.prototype=f.prototype,c.aa=f.prototype,c.prototype=new y,c.prototype.constructor=c,c.Qb=function(N,O,F){for(var G=Array(arguments.length-2),Fe=2;Fe<arguments.length;Fe++)G[Fe-2]=arguments[Fe];return f.prototype[O].apply(N,G)}}function b(c){const f=c.length;if(0<f){const y=Array(f);for(let N=0;N<f;N++)y[N]=c[N];return y}return[]}function w(c,f){for(let y=1;y<arguments.length;y++){const N=arguments[y];if(d(N)){const O=c.length||0,F=N.length||0;c.length=O+F;for(let G=0;G<F;G++)c[O+G]=N[G]}else c.push(N)}}class k{constructor(f,y){this.i=f,this.j=y,this.h=0,this.g=null}get(){let f;return 0<this.h?(this.h--,f=this.g,this.g=f.next,f.next=null):f=this.i(),f}}function T(c){return/^[\s\xa0]*$/.test(c)}function _(){var c=l.navigator;return c&&(c=c.userAgent)?c:""}function R(c){return R[" "](c),c}R[" "]=function(){};var D=_().indexOf("Gecko")!=-1&&!(_().toLowerCase().indexOf("webkit")!=-1&&_().indexOf("Edge")==-1)&&!(_().indexOf("Trident")!=-1||_().indexOf("MSIE")!=-1)&&_().indexOf("Edge")==-1;function $(c,f,y){for(const N in c)f.call(y,c[N],N,c)}function S(c,f){for(const y in c)f.call(void 0,c[y],y,c)}function I(c){const f={};for(const y in c)f[y]=c[y];return f}const E="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function j(c,f){let y,N;for(let O=1;O<arguments.length;O++){N=arguments[O];for(y in N)c[y]=N[y];for(let F=0;F<E.length;F++)y=E[F],Object.prototype.hasOwnProperty.call(N,y)&&(c[y]=N[y])}}function C(c){var f=1;c=c.split(":");const y=[];for(;0<f&&c.length;)y.push(c.shift()),f--;return c.length&&y.push(c.join(":")),y}function A(c){l.setTimeout(()=>{throw c},0)}function P(){var c=V;let f=null;return c.g&&(f=c.g,c.g=c.g.next,c.g||(c.h=null),f.next=null),f}class W{constructor(){this.h=this.g=null}add(f,y){const N=oe.get();N.set(f,y),this.h?this.h.next=N:this.g=N,this.h=N}}var oe=new k(()=>new U,c=>c.reset());class U{constructor(){this.next=this.g=this.h=null}set(f,y){this.h=f,this.g=y,this.next=null}reset(){this.next=this.g=this.h=null}}let X,xe=!1,V=new W,be=()=>{const c=l.Promise.resolve(void 0);X=()=>{c.then(ce)}};var ce=()=>{for(var c;c=P();){try{c.h.call(c.g)}catch(y){A(y)}var f=oe;f.j(c),100>f.h&&(f.h++,c.next=f.g,f.g=c)}xe=!1};function Ue(){this.s=this.s,this.C=this.C}Ue.prototype.s=!1,Ue.prototype.ma=function(){this.s||(this.s=!0,this.N())},Ue.prototype.N=function(){if(this.C)for(;this.C.length;)this.C.shift()()};function Se(c,f){this.type=c,this.g=this.target=f,this.defaultPrevented=!1}Se.prototype.h=function(){this.defaultPrevented=!0};var ne=function(){if(!l.addEventListener||!Object.defineProperty)return!1;var c=!1,f=Object.defineProperty({},"passive",{get:function(){c=!0}});try{const y=()=>{};l.addEventListener("test",y,f),l.removeEventListener("test",y,f)}catch{}return c}();function H(c,f){if(Se.call(this,c?c.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,c){var y=this.type=c.type,N=c.changedTouches&&c.changedTouches.length?c.changedTouches[0]:null;if(this.target=c.target||c.srcElement,this.g=f,f=c.relatedTarget){if(D){e:{try{R(f.nodeName);var O=!0;break e}catch{}O=!1}O||(f=null)}}else y=="mouseover"?f=c.fromElement:y=="mouseout"&&(f=c.toElement);this.relatedTarget=f,N?(this.clientX=N.clientX!==void 0?N.clientX:N.pageX,this.clientY=N.clientY!==void 0?N.clientY:N.pageY,this.screenX=N.screenX||0,this.screenY=N.screenY||0):(this.clientX=c.clientX!==void 0?c.clientX:c.pageX,this.clientY=c.clientY!==void 0?c.clientY:c.pageY,this.screenX=c.screenX||0,this.screenY=c.screenY||0),this.button=c.button,this.key=c.key||"",this.ctrlKey=c.ctrlKey,this.altKey=c.altKey,this.shiftKey=c.shiftKey,this.metaKey=c.metaKey,this.pointerId=c.pointerId||0,this.pointerType=typeof c.pointerType=="string"?c.pointerType:ie[c.pointerType]||"",this.state=c.state,this.i=c,c.defaultPrevented&&H.aa.h.call(this)}}v(H,Se);var ie={2:"touch",3:"pen",4:"mouse"};H.prototype.h=function(){H.aa.h.call(this);var c=this.i;c.preventDefault?c.preventDefault():c.returnValue=!1};var Q="closure_listenable_"+(1e6*Math.random()|0),we=0;function Le(c,f,y,N,O){this.listener=c,this.proxy=null,this.src=f,this.type=y,this.capture=!!N,this.ha=O,this.key=++we,this.da=this.fa=!1}function Ce(c){c.da=!0,c.listener=null,c.proxy=null,c.src=null,c.ha=null}function L(c){this.src=c,this.g={},this.h=0}L.prototype.add=function(c,f,y,N,O){var F=c.toString();c=this.g[F],c||(c=this.g[F]=[],this.h++);var G=re(c,f,N,O);return-1<G?(f=c[G],y||(f.fa=!1)):(f=new Le(f,this.src,F,!!N,O),f.fa=y,c.push(f)),f};function K(c,f){var y=f.type;if(y in c.g){var N=c.g[y],O=Array.prototype.indexOf.call(N,f,void 0),F;(F=0<=O)&&Array.prototype.splice.call(N,O,1),F&&(Ce(f),c.g[y].length==0&&(delete c.g[y],c.h--))}}function re(c,f,y,N){for(var O=0;O<c.length;++O){var F=c[O];if(!F.da&&F.listener==f&&F.capture==!!y&&F.ha==N)return O}return-1}var ge="closure_lm_"+(1e6*Math.random()|0),ke={};function We(c,f,y,N,O){if(Array.isArray(f)){for(var F=0;F<f.length;F++)We(c,f[F],y,N,O);return null}return y=df(y),c&&c[Q]?c.K(f,y,u(N)?!!N.capture:!1,O):Pt(c,f,y,!1,N,O)}function Pt(c,f,y,N,O,F){if(!f)throw Error("Invalid event type");var G=u(O)?!!O.capture:!!O,Fe=bc(c);if(Fe||(c[ge]=Fe=new L(c)),y=Fe.add(f,y,N,G,F),y.proxy)return y;if(N=Xi(),y.proxy=N,N.src=c,N.listener=y,c.addEventListener)ne||(O=G),O===void 0&&(O=!1),c.addEventListener(f.toString(),N,O);else if(c.attachEvent)c.attachEvent(_o(f.toString()),N);else if(c.addListener&&c.removeListener)c.addListener(N);else throw Error("addEventListener and attachEvent are unavailable.");return y}function Xi(){function c(y){return f.call(c.src,c.listener,y)}const f=Ji;return c}function wo(c,f,y,N,O){if(Array.isArray(f))for(var F=0;F<f.length;F++)wo(c,f[F],y,N,O);else N=u(N)?!!N.capture:!!N,y=df(y),c&&c[Q]?(c=c.i,f=String(f).toString(),f in c.g&&(F=c.g[f],y=re(F,y,N,O),-1<y&&(Ce(F[y]),Array.prototype.splice.call(F,y,1),F.length==0&&(delete c.g[f],c.h--)))):c&&(c=bc(c))&&(f=c.g[f.toString()],c=-1,f&&(c=re(f,y,N,O)),(y=-1<c?f[c]:null)&&Br(y))}function Br(c){if(typeof c!="number"&&c&&!c.da){var f=c.src;if(f&&f[Q])K(f.i,c);else{var y=c.type,N=c.proxy;f.removeEventListener?f.removeEventListener(y,N,c.capture):f.detachEvent?f.detachEvent(_o(y),N):f.addListener&&f.removeListener&&f.removeListener(N),(y=bc(f))?(K(y,c),y.h==0&&(y.src=null,f[ge]=null)):Ce(c)}}}function _o(c){return c in ke?ke[c]:ke[c]="on"+c}function Ji(c,f){if(c.da)c=!0;else{f=new H(f,this);var y=c.listener,N=c.ha||c.src;c.fa&&Br(c),c=y.call(N,f)}return c}function bc(c){return c=c[ge],c instanceof L?c:null}var vc="__closure_events_fn_"+(1e9*Math.random()>>>0);function df(c){return typeof c=="function"?c:(c[vc]||(c[vc]=function(f){return c.handleEvent(f)}),c[vc])}function ft(){Ue.call(this),this.i=new L(this),this.M=this,this.F=null}v(ft,Ue),ft.prototype[Q]=!0,ft.prototype.removeEventListener=function(c,f,y,N){wo(this,c,f,y,N)};function wt(c,f){var y,N=c.F;if(N)for(y=[];N;N=N.F)y.push(N);if(c=c.M,N=f.type||f,typeof f=="string")f=new Se(f,c);else if(f instanceof Se)f.target=f.target||c;else{var O=f;f=new Se(N,c),j(f,O)}if(O=!0,y)for(var F=y.length-1;0<=F;F--){var G=f.g=y[F];O=Zi(G,N,!0,f)&&O}if(G=f.g=c,O=Zi(G,N,!0,f)&&O,O=Zi(G,N,!1,f)&&O,y)for(F=0;F<y.length;F++)G=f.g=y[F],O=Zi(G,N,!1,f)&&O}ft.prototype.N=function(){if(ft.aa.N.call(this),this.i){var c=this.i,f;for(f in c.g){for(var y=c.g[f],N=0;N<y.length;N++)Ce(y[N]);delete c.g[f],c.h--}}this.F=null},ft.prototype.K=function(c,f,y,N){return this.i.add(String(c),f,!1,y,N)},ft.prototype.L=function(c,f,y,N){return this.i.add(String(c),f,!0,y,N)};function Zi(c,f,y,N){if(f=c.i.g[String(f)],!f)return!0;f=f.concat();for(var O=!0,F=0;F<f.length;++F){var G=f[F];if(G&&!G.da&&G.capture==y){var Fe=G.listener,ct=G.ha||G.src;G.fa&&K(c.i,G),O=Fe.call(ct,N)!==!1&&O}}return O&&!N.defaultPrevented}function uf(c,f,y){if(typeof c=="function")y&&(c=x(c,y));else if(c&&typeof c.handleEvent=="function")c=x(c.handleEvent,c);else throw Error("Invalid listener argument");return 2147483647<Number(f)?-1:l.setTimeout(c,f||0)}function hf(c){c.g=uf(()=>{c.g=null,c.i&&(c.i=!1,hf(c))},c.l);const f=c.h;c.h=null,c.m.apply(null,f)}class X1 extends Ue{constructor(f,y){super(),this.m=f,this.l=y,this.h=null,this.i=!1,this.g=null}j(f){this.h=arguments,this.g?this.i=!0:hf(this)}N(){super.N(),this.g&&(l.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function To(c){Ue.call(this),this.h=c,this.g={}}v(To,Ue);var ff=[];function mf(c){$(c.g,function(f,y){this.g.hasOwnProperty(y)&&Br(f)},c),c.g={}}To.prototype.N=function(){To.aa.N.call(this),mf(this)},To.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")};var wc=l.JSON.stringify,J1=l.JSON.parse,Z1=class{stringify(c){return l.JSON.stringify(c,void 0)}parse(c){return l.JSON.parse(c,void 0)}};function _c(){}_c.prototype.h=null;function pf(c){return c.h||(c.h=c.i())}function gf(){}var Eo={OPEN:"a",kb:"b",Ja:"c",wb:"d"};function Tc(){Se.call(this,"d")}v(Tc,Se);function Ec(){Se.call(this,"c")}v(Ec,Se);var Ls={},xf=null;function ea(){return xf=xf||new ft}Ls.La="serverreachability";function yf(c){Se.call(this,Ls.La,c)}v(yf,Se);function No(c){const f=ea();wt(f,new yf(f))}Ls.STAT_EVENT="statevent";function bf(c,f){Se.call(this,Ls.STAT_EVENT,c),this.stat=f}v(bf,Se);function _t(c){const f=ea();wt(f,new bf(f,c))}Ls.Ma="timingevent";function vf(c,f){Se.call(this,Ls.Ma,c),this.size=f}v(vf,Se);function Co(c,f){if(typeof c!="function")throw Error("Fn must not be null and must be a function");return l.setTimeout(function(){c()},f)}function Io(){this.g=!0}Io.prototype.xa=function(){this.g=!1};function e_(c,f,y,N,O,F){c.info(function(){if(c.g)if(F)for(var G="",Fe=F.split("&"),ct=0;ct<Fe.length;ct++){var Re=Fe[ct].split("=");if(1<Re.length){var mt=Re[0];Re=Re[1];var pt=mt.split("_");G=2<=pt.length&&pt[1]=="type"?G+(mt+"="+Re+"&"):G+(mt+"=redacted&")}}else G=null;else G=F;return"XMLHTTP REQ ("+N+") [attempt "+O+"]: "+f+`
`+y+`
`+G})}function t_(c,f,y,N,O,F,G){c.info(function(){return"XMLHTTP RESP ("+N+") [ attempt "+O+"]: "+f+`
`+y+`
`+F+" "+G})}function xn(c,f,y,N){c.info(function(){return"XMLHTTP TEXT ("+f+"): "+s_(c,y)+(N?" "+N:"")})}function r_(c,f){c.info(function(){return"TIMEOUT: "+f})}Io.prototype.info=function(){};function s_(c,f){if(!c.g)return f;if(!f)return null;try{var y=JSON.parse(f);if(y){for(c=0;c<y.length;c++)if(Array.isArray(y[c])){var N=y[c];if(!(2>N.length)){var O=N[1];if(Array.isArray(O)&&!(1>O.length)){var F=O[0];if(F!="noop"&&F!="stop"&&F!="close")for(var G=1;G<O.length;G++)O[G]=""}}}}return wc(y)}catch{return f}}var ta={NO_ERROR:0,gb:1,tb:2,sb:3,nb:4,rb:5,ub:6,Ia:7,TIMEOUT:8,xb:9},wf={lb:"complete",Hb:"success",Ja:"error",Ia:"abort",zb:"ready",Ab:"readystatechange",TIMEOUT:"timeout",vb:"incrementaldata",yb:"progress",ob:"downloadprogress",Pb:"uploadprogress"},Nc;function ra(){}v(ra,_c),ra.prototype.g=function(){return new XMLHttpRequest},ra.prototype.i=function(){return{}},Nc=new ra;function zr(c,f,y,N){this.j=c,this.i=f,this.l=y,this.R=N||1,this.U=new To(this),this.I=45e3,this.H=null,this.o=!1,this.m=this.A=this.v=this.L=this.F=this.S=this.B=null,this.D=[],this.g=null,this.C=0,this.s=this.u=null,this.X=-1,this.J=!1,this.O=0,this.M=null,this.W=this.K=this.T=this.P=!1,this.h=new _f}function _f(){this.i=null,this.g="",this.h=!1}var Tf={},Cc={};function Ic(c,f,y){c.L=1,c.v=ia(_r(f)),c.m=y,c.P=!0,Ef(c,null)}function Ef(c,f){c.F=Date.now(),sa(c),c.A=_r(c.v);var y=c.A,N=c.R;Array.isArray(N)||(N=[String(N)]),Vf(y.i,"t",N),c.C=0,y=c.j.J,c.h=new _f,c.g=rm(c.j,y?f:null,!c.m),0<c.O&&(c.M=new X1(x(c.Y,c,c.g),c.O)),f=c.U,y=c.g,N=c.ca;var O="readystatechange";Array.isArray(O)||(O&&(ff[0]=O.toString()),O=ff);for(var F=0;F<O.length;F++){var G=We(y,O[F],N||f.handleEvent,!1,f.h||f);if(!G)break;f.g[G.key]=G}f=c.H?I(c.H):{},c.m?(c.u||(c.u="POST"),f["Content-Type"]="application/x-www-form-urlencoded",c.g.ea(c.A,c.u,c.m,f)):(c.u="GET",c.g.ea(c.A,c.u,null,f)),No(),e_(c.i,c.u,c.A,c.l,c.R,c.m)}zr.prototype.ca=function(c){c=c.target;const f=this.M;f&&Tr(c)==3?f.j():this.Y(c)},zr.prototype.Y=function(c){try{if(c==this.g)e:{const pt=Tr(this.g);var f=this.g.Ba();const vn=this.g.Z();if(!(3>pt)&&(pt!=3||this.g&&(this.h.h||this.g.oa()||qf(this.g)))){this.J||pt!=4||f==7||(f==8||0>=vn?No(3):No(2)),Sc(this);var y=this.g.Z();this.X=y;t:if(Nf(this)){var N=qf(this.g);c="";var O=N.length,F=Tr(this.g)==4;if(!this.h.i){if(typeof TextDecoder>"u"){Vs(this),So(this);var G="";break t}this.h.i=new l.TextDecoder}for(f=0;f<O;f++)this.h.h=!0,c+=this.h.i.decode(N[f],{stream:!(F&&f==O-1)});N.length=0,this.h.g+=c,this.C=0,G=this.h.g}else G=this.g.oa();if(this.o=y==200,t_(this.i,this.u,this.A,this.l,this.R,pt,y),this.o){if(this.T&&!this.K){t:{if(this.g){var Fe,ct=this.g;if((Fe=ct.g?ct.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!T(Fe)){var Re=Fe;break t}}Re=null}if(y=Re)xn(this.i,this.l,y,"Initial handshake response via X-HTTP-Initial-Response"),this.K=!0,kc(this,y);else{this.o=!1,this.s=3,_t(12),Vs(this),So(this);break e}}if(this.P){y=!0;let zt;for(;!this.J&&this.C<G.length;)if(zt=n_(this,G),zt==Cc){pt==4&&(this.s=4,_t(14),y=!1),xn(this.i,this.l,null,"[Incomplete Response]");break}else if(zt==Tf){this.s=4,_t(15),xn(this.i,this.l,G,"[Invalid Chunk]"),y=!1;break}else xn(this.i,this.l,zt,null),kc(this,zt);if(Nf(this)&&this.C!=0&&(this.h.g=this.h.g.slice(this.C),this.C=0),pt!=4||G.length!=0||this.h.h||(this.s=1,_t(16),y=!1),this.o=this.o&&y,!y)xn(this.i,this.l,G,"[Invalid Chunked Response]"),Vs(this),So(this);else if(0<G.length&&!this.W){this.W=!0;var mt=this.j;mt.g==this&&mt.ba&&!mt.M&&(mt.j.info("Great, no buffering proxy detected. Bytes received: "+G.length),Dc(mt),mt.M=!0,_t(11))}}else xn(this.i,this.l,G,null),kc(this,G);pt==4&&Vs(this),this.o&&!this.J&&(pt==4?Jf(this.j,this):(this.o=!1,sa(this)))}else w_(this.g),y==400&&0<G.indexOf("Unknown SID")?(this.s=3,_t(12)):(this.s=0,_t(13)),Vs(this),So(this)}}}catch{}finally{}};function Nf(c){return c.g?c.u=="GET"&&c.L!=2&&c.j.Ca:!1}function n_(c,f){var y=c.C,N=f.indexOf(`
`,y);return N==-1?Cc:(y=Number(f.substring(y,N)),isNaN(y)?Tf:(N+=1,N+y>f.length?Cc:(f=f.slice(N,N+y),c.C=N+y,f)))}zr.prototype.cancel=function(){this.J=!0,Vs(this)};function sa(c){c.S=Date.now()+c.I,Cf(c,c.I)}function Cf(c,f){if(c.B!=null)throw Error("WatchDog timer not null");c.B=Co(x(c.ba,c),f)}function Sc(c){c.B&&(l.clearTimeout(c.B),c.B=null)}zr.prototype.ba=function(){this.B=null;const c=Date.now();0<=c-this.S?(r_(this.i,this.A),this.L!=2&&(No(),_t(17)),Vs(this),this.s=2,So(this)):Cf(this,this.S-c)};function So(c){c.j.G==0||c.J||Jf(c.j,c)}function Vs(c){Sc(c);var f=c.M;f&&typeof f.ma=="function"&&f.ma(),c.M=null,mf(c.U),c.g&&(f=c.g,c.g=null,f.abort(),f.ma())}function kc(c,f){try{var y=c.j;if(y.G!=0&&(y.g==c||jc(y.h,c))){if(!c.K&&jc(y.h,c)&&y.G==3){try{var N=y.Da.g.parse(f)}catch{N=null}if(Array.isArray(N)&&N.length==3){var O=N;if(O[0]==0){e:if(!y.u){if(y.g)if(y.g.F+3e3<c.F)ha(y),da(y);else break e;Mc(y),_t(18)}}else y.za=O[1],0<y.za-y.T&&37500>O[2]&&y.F&&y.v==0&&!y.C&&(y.C=Co(x(y.Za,y),6e3));if(1>=kf(y.h)&&y.ca){try{y.ca()}catch{}y.ca=void 0}}else Us(y,11)}else if((c.K||y.g==c)&&ha(y),!T(f))for(O=y.Da.g.parse(f),f=0;f<O.length;f++){let Re=O[f];if(y.T=Re[0],Re=Re[1],y.G==2)if(Re[0]=="c"){y.K=Re[1],y.ia=Re[2];const mt=Re[3];mt!=null&&(y.la=mt,y.j.info("VER="+y.la));const pt=Re[4];pt!=null&&(y.Aa=pt,y.j.info("SVER="+y.Aa));const vn=Re[5];vn!=null&&typeof vn=="number"&&0<vn&&(N=1.5*vn,y.L=N,y.j.info("backChannelRequestTimeoutMs_="+N)),N=y;const zt=c.g;if(zt){const ma=zt.g?zt.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(ma){var F=N.h;F.g||ma.indexOf("spdy")==-1&&ma.indexOf("quic")==-1&&ma.indexOf("h2")==-1||(F.j=F.l,F.g=new Set,F.h&&(Ac(F,F.h),F.h=null))}if(N.D){const Oc=zt.g?zt.g.getResponseHeader("X-HTTP-Session-Id"):null;Oc&&(N.ya=Oc,Be(N.I,N.D,Oc))}}y.G=3,y.l&&y.l.ua(),y.ba&&(y.R=Date.now()-c.F,y.j.info("Handshake RTT: "+y.R+"ms")),N=y;var G=c;if(N.qa=tm(N,N.J?N.ia:null,N.W),G.K){jf(N.h,G);var Fe=G,ct=N.L;ct&&(Fe.I=ct),Fe.B&&(Sc(Fe),sa(Fe)),N.g=G}else Yf(N);0<y.i.length&&ua(y)}else Re[0]!="stop"&&Re[0]!="close"||Us(y,7);else y.G==3&&(Re[0]=="stop"||Re[0]=="close"?Re[0]=="stop"?Us(y,7):Rc(y):Re[0]!="noop"&&y.l&&y.l.ta(Re),y.v=0)}}No(4)}catch{}}var o_=class{constructor(c,f){this.g=c,this.map=f}};function If(c){this.l=c||10,l.PerformanceNavigationTiming?(c=l.performance.getEntriesByType("navigation"),c=0<c.length&&(c[0].nextHopProtocol=="hq"||c[0].nextHopProtocol=="h2")):c=!!(l.chrome&&l.chrome.loadTimes&&l.chrome.loadTimes()&&l.chrome.loadTimes().wasFetchedViaSpdy),this.j=c?this.l:1,this.g=null,1<this.j&&(this.g=new Set),this.h=null,this.i=[]}function Sf(c){return c.h?!0:c.g?c.g.size>=c.j:!1}function kf(c){return c.h?1:c.g?c.g.size:0}function jc(c,f){return c.h?c.h==f:c.g?c.g.has(f):!1}function Ac(c,f){c.g?c.g.add(f):c.h=f}function jf(c,f){c.h&&c.h==f?c.h=null:c.g&&c.g.has(f)&&c.g.delete(f)}If.prototype.cancel=function(){if(this.i=Af(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&this.g.size!==0){for(const c of this.g.values())c.cancel();this.g.clear()}};function Af(c){if(c.h!=null)return c.i.concat(c.h.D);if(c.g!=null&&c.g.size!==0){let f=c.i;for(const y of c.g.values())f=f.concat(y.D);return f}return b(c.i)}function i_(c){if(c.V&&typeof c.V=="function")return c.V();if(typeof Map<"u"&&c instanceof Map||typeof Set<"u"&&c instanceof Set)return Array.from(c.values());if(typeof c=="string")return c.split("");if(d(c)){for(var f=[],y=c.length,N=0;N<y;N++)f.push(c[N]);return f}f=[],y=0;for(N in c)f[y++]=c[N];return f}function a_(c){if(c.na&&typeof c.na=="function")return c.na();if(!c.V||typeof c.V!="function"){if(typeof Map<"u"&&c instanceof Map)return Array.from(c.keys());if(!(typeof Set<"u"&&c instanceof Set)){if(d(c)||typeof c=="string"){var f=[];c=c.length;for(var y=0;y<c;y++)f.push(y);return f}f=[],y=0;for(const N in c)f[y++]=N;return f}}}function Pf(c,f){if(c.forEach&&typeof c.forEach=="function")c.forEach(f,void 0);else if(d(c)||typeof c=="string")Array.prototype.forEach.call(c,f,void 0);else for(var y=a_(c),N=i_(c),O=N.length,F=0;F<O;F++)f.call(void 0,N[F],y&&y[F],c)}var Rf=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function l_(c,f){if(c){c=c.split("&");for(var y=0;y<c.length;y++){var N=c[y].indexOf("="),O=null;if(0<=N){var F=c[y].substring(0,N);O=c[y].substring(N+1)}else F=c[y];f(F,O?decodeURIComponent(O.replace(/\+/g," ")):"")}}}function Fs(c){if(this.g=this.o=this.j="",this.s=null,this.m=this.l="",this.h=!1,c instanceof Fs){this.h=c.h,na(this,c.j),this.o=c.o,this.g=c.g,oa(this,c.s),this.l=c.l;var f=c.i,y=new Ao;y.i=f.i,f.g&&(y.g=new Map(f.g),y.h=f.h),Mf(this,y),this.m=c.m}else c&&(f=String(c).match(Rf))?(this.h=!1,na(this,f[1]||"",!0),this.o=ko(f[2]||""),this.g=ko(f[3]||"",!0),oa(this,f[4]),this.l=ko(f[5]||"",!0),Mf(this,f[6]||"",!0),this.m=ko(f[7]||"")):(this.h=!1,this.i=new Ao(null,this.h))}Fs.prototype.toString=function(){var c=[],f=this.j;f&&c.push(jo(f,Df,!0),":");var y=this.g;return(y||f=="file")&&(c.push("//"),(f=this.o)&&c.push(jo(f,Df,!0),"@"),c.push(encodeURIComponent(String(y)).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),y=this.s,y!=null&&c.push(":",String(y))),(y=this.l)&&(this.g&&y.charAt(0)!="/"&&c.push("/"),c.push(jo(y,y.charAt(0)=="/"?u_:d_,!0))),(y=this.i.toString())&&c.push("?",y),(y=this.m)&&c.push("#",jo(y,f_)),c.join("")};function _r(c){return new Fs(c)}function na(c,f,y){c.j=y?ko(f,!0):f,c.j&&(c.j=c.j.replace(/:$/,""))}function oa(c,f){if(f){if(f=Number(f),isNaN(f)||0>f)throw Error("Bad port number "+f);c.s=f}else c.s=null}function Mf(c,f,y){f instanceof Ao?(c.i=f,m_(c.i,c.h)):(y||(f=jo(f,h_)),c.i=new Ao(f,c.h))}function Be(c,f,y){c.i.set(f,y)}function ia(c){return Be(c,"zx",Math.floor(2147483648*Math.random()).toString(36)+Math.abs(Math.floor(2147483648*Math.random())^Date.now()).toString(36)),c}function ko(c,f){return c?f?decodeURI(c.replace(/%25/g,"%2525")):decodeURIComponent(c):""}function jo(c,f,y){return typeof c=="string"?(c=encodeURI(c).replace(f,c_),y&&(c=c.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),c):null}function c_(c){return c=c.charCodeAt(0),"%"+(c>>4&15).toString(16)+(c&15).toString(16)}var Df=/[#\/\?@]/g,d_=/[#\?:]/g,u_=/[#\?]/g,h_=/[#\?@]/g,f_=/#/g;function Ao(c,f){this.h=this.g=null,this.i=c||null,this.j=!!f}function Hr(c){c.g||(c.g=new Map,c.h=0,c.i&&l_(c.i,function(f,y){c.add(decodeURIComponent(f.replace(/\+/g," ")),y)}))}r=Ao.prototype,r.add=function(c,f){Hr(this),this.i=null,c=yn(this,c);var y=this.g.get(c);return y||this.g.set(c,y=[]),y.push(f),this.h+=1,this};function Of(c,f){Hr(c),f=yn(c,f),c.g.has(f)&&(c.i=null,c.h-=c.g.get(f).length,c.g.delete(f))}function Lf(c,f){return Hr(c),f=yn(c,f),c.g.has(f)}r.forEach=function(c,f){Hr(this),this.g.forEach(function(y,N){y.forEach(function(O){c.call(f,O,N,this)},this)},this)},r.na=function(){Hr(this);const c=Array.from(this.g.values()),f=Array.from(this.g.keys()),y=[];for(let N=0;N<f.length;N++){const O=c[N];for(let F=0;F<O.length;F++)y.push(f[N])}return y},r.V=function(c){Hr(this);let f=[];if(typeof c=="string")Lf(this,c)&&(f=f.concat(this.g.get(yn(this,c))));else{c=Array.from(this.g.values());for(let y=0;y<c.length;y++)f=f.concat(c[y])}return f},r.set=function(c,f){return Hr(this),this.i=null,c=yn(this,c),Lf(this,c)&&(this.h-=this.g.get(c).length),this.g.set(c,[f]),this.h+=1,this},r.get=function(c,f){return c?(c=this.V(c),0<c.length?String(c[0]):f):f};function Vf(c,f,y){Of(c,f),0<y.length&&(c.i=null,c.g.set(yn(c,f),b(y)),c.h+=y.length)}r.toString=function(){if(this.i)return this.i;if(!this.g)return"";const c=[],f=Array.from(this.g.keys());for(var y=0;y<f.length;y++){var N=f[y];const F=encodeURIComponent(String(N)),G=this.V(N);for(N=0;N<G.length;N++){var O=F;G[N]!==""&&(O+="="+encodeURIComponent(String(G[N]))),c.push(O)}}return this.i=c.join("&")};function yn(c,f){return f=String(f),c.j&&(f=f.toLowerCase()),f}function m_(c,f){f&&!c.j&&(Hr(c),c.i=null,c.g.forEach(function(y,N){var O=N.toLowerCase();N!=O&&(Of(this,N),Vf(this,O,y))},c)),c.j=f}function p_(c,f){const y=new Io;if(l.Image){const N=new Image;N.onload=g(qr,y,"TestLoadImage: loaded",!0,f,N),N.onerror=g(qr,y,"TestLoadImage: error",!1,f,N),N.onabort=g(qr,y,"TestLoadImage: abort",!1,f,N),N.ontimeout=g(qr,y,"TestLoadImage: timeout",!1,f,N),l.setTimeout(function(){N.ontimeout&&N.ontimeout()},1e4),N.src=c}else f(!1)}function g_(c,f){const y=new Io,N=new AbortController,O=setTimeout(()=>{N.abort(),qr(y,"TestPingServer: timeout",!1,f)},1e4);fetch(c,{signal:N.signal}).then(F=>{clearTimeout(O),F.ok?qr(y,"TestPingServer: ok",!0,f):qr(y,"TestPingServer: server error",!1,f)}).catch(()=>{clearTimeout(O),qr(y,"TestPingServer: error",!1,f)})}function qr(c,f,y,N,O){try{O&&(O.onload=null,O.onerror=null,O.onabort=null,O.ontimeout=null),N(y)}catch{}}function x_(){this.g=new Z1}function y_(c,f,y){const N=y||"";try{Pf(c,function(O,F){let G=O;u(O)&&(G=wc(O)),f.push(N+F+"="+encodeURIComponent(G))})}catch(O){throw f.push(N+"type="+encodeURIComponent("_badmap")),O}}function aa(c){this.l=c.Ub||null,this.j=c.eb||!1}v(aa,_c),aa.prototype.g=function(){return new la(this.l,this.j)},aa.prototype.i=function(c){return function(){return c}}({});function la(c,f){ft.call(this),this.D=c,this.o=f,this.m=void 0,this.status=this.readyState=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.u=new Headers,this.h=null,this.B="GET",this.A="",this.g=!1,this.v=this.j=this.l=null}v(la,ft),r=la.prototype,r.open=function(c,f){if(this.readyState!=0)throw this.abort(),Error("Error reopening a connection");this.B=c,this.A=f,this.readyState=1,Ro(this)},r.send=function(c){if(this.readyState!=1)throw this.abort(),Error("need to call open() first. ");this.g=!0;const f={headers:this.u,method:this.B,credentials:this.m,cache:void 0};c&&(f.body=c),(this.D||l).fetch(new Request(this.A,f)).then(this.Sa.bind(this),this.ga.bind(this))},r.abort=function(){this.response=this.responseText="",this.u=new Headers,this.status=0,this.j&&this.j.cancel("Request was aborted.").catch(()=>{}),1<=this.readyState&&this.g&&this.readyState!=4&&(this.g=!1,Po(this)),this.readyState=0},r.Sa=function(c){if(this.g&&(this.l=c,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=c.headers,this.readyState=2,Ro(this)),this.g&&(this.readyState=3,Ro(this),this.g)))if(this.responseType==="arraybuffer")c.arrayBuffer().then(this.Qa.bind(this),this.ga.bind(this));else if(typeof l.ReadableStream<"u"&&"body"in c){if(this.j=c.body.getReader(),this.o){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.v=new TextDecoder;Ff(this)}else c.text().then(this.Ra.bind(this),this.ga.bind(this))};function Ff(c){c.j.read().then(c.Pa.bind(c)).catch(c.ga.bind(c))}r.Pa=function(c){if(this.g){if(this.o&&c.value)this.response.push(c.value);else if(!this.o){var f=c.value?c.value:new Uint8Array(0);(f=this.v.decode(f,{stream:!c.done}))&&(this.response=this.responseText+=f)}c.done?Po(this):Ro(this),this.readyState==3&&Ff(this)}},r.Ra=function(c){this.g&&(this.response=this.responseText=c,Po(this))},r.Qa=function(c){this.g&&(this.response=c,Po(this))},r.ga=function(){this.g&&Po(this)};function Po(c){c.readyState=4,c.l=null,c.j=null,c.v=null,Ro(c)}r.setRequestHeader=function(c,f){this.u.append(c,f)},r.getResponseHeader=function(c){return this.h&&this.h.get(c.toLowerCase())||""},r.getAllResponseHeaders=function(){if(!this.h)return"";const c=[],f=this.h.entries();for(var y=f.next();!y.done;)y=y.value,c.push(y[0]+": "+y[1]),y=f.next();return c.join(`\r
`)};function Ro(c){c.onreadystatechange&&c.onreadystatechange.call(c)}Object.defineProperty(la.prototype,"withCredentials",{get:function(){return this.m==="include"},set:function(c){this.m=c?"include":"same-origin"}});function Uf(c){let f="";return $(c,function(y,N){f+=N,f+=":",f+=y,f+=`\r
`}),f}function Pc(c,f,y){e:{for(N in y){var N=!1;break e}N=!0}N||(y=Uf(y),typeof c=="string"?y!=null&&encodeURIComponent(String(y)):Be(c,f,y))}function Ke(c){ft.call(this),this.headers=new Map,this.o=c||null,this.h=!1,this.v=this.g=null,this.D="",this.m=0,this.l="",this.j=this.B=this.u=this.A=!1,this.I=null,this.H="",this.J=!1}v(Ke,ft);var b_=/^https?$/i,v_=["POST","PUT"];r=Ke.prototype,r.Ha=function(c){this.J=c},r.ea=function(c,f,y,N){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.D+"; newUri="+c);f=f?f.toUpperCase():"GET",this.D=c,this.l="",this.m=0,this.A=!1,this.h=!0,this.g=this.o?this.o.g():Nc.g(),this.v=this.o?pf(this.o):pf(Nc),this.g.onreadystatechange=x(this.Ea,this);try{this.B=!0,this.g.open(f,String(c),!0),this.B=!1}catch(F){$f(this,F);return}if(c=y||"",y=new Map(this.headers),N)if(Object.getPrototypeOf(N)===Object.prototype)for(var O in N)y.set(O,N[O]);else if(typeof N.keys=="function"&&typeof N.get=="function")for(const F of N.keys())y.set(F,N.get(F));else throw Error("Unknown input type for opt_headers: "+String(N));N=Array.from(y.keys()).find(F=>F.toLowerCase()=="content-type"),O=l.FormData&&c instanceof l.FormData,!(0<=Array.prototype.indexOf.call(v_,f,void 0))||N||O||y.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");for(const[F,G]of y)this.g.setRequestHeader(F,G);this.H&&(this.g.responseType=this.H),"withCredentials"in this.g&&this.g.withCredentials!==this.J&&(this.g.withCredentials=this.J);try{Hf(this),this.u=!0,this.g.send(c),this.u=!1}catch(F){$f(this,F)}};function $f(c,f){c.h=!1,c.g&&(c.j=!0,c.g.abort(),c.j=!1),c.l=f,c.m=5,Bf(c),ca(c)}function Bf(c){c.A||(c.A=!0,wt(c,"complete"),wt(c,"error"))}r.abort=function(c){this.g&&this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1,this.m=c||7,wt(this,"complete"),wt(this,"abort"),ca(this))},r.N=function(){this.g&&(this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1),ca(this,!0)),Ke.aa.N.call(this)},r.Ea=function(){this.s||(this.B||this.u||this.j?zf(this):this.bb())},r.bb=function(){zf(this)};function zf(c){if(c.h&&typeof a<"u"&&(!c.v[1]||Tr(c)!=4||c.Z()!=2)){if(c.u&&Tr(c)==4)uf(c.Ea,0,c);else if(wt(c,"readystatechange"),Tr(c)==4){c.h=!1;try{const G=c.Z();e:switch(G){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var f=!0;break e;default:f=!1}var y;if(!(y=f)){var N;if(N=G===0){var O=String(c.D).match(Rf)[1]||null;!O&&l.self&&l.self.location&&(O=l.self.location.protocol.slice(0,-1)),N=!b_.test(O?O.toLowerCase():"")}y=N}if(y)wt(c,"complete"),wt(c,"success");else{c.m=6;try{var F=2<Tr(c)?c.g.statusText:""}catch{F=""}c.l=F+" ["+c.Z()+"]",Bf(c)}}finally{ca(c)}}}}function ca(c,f){if(c.g){Hf(c);const y=c.g,N=c.v[0]?()=>{}:null;c.g=null,c.v=null,f||wt(c,"ready");try{y.onreadystatechange=N}catch{}}}function Hf(c){c.I&&(l.clearTimeout(c.I),c.I=null)}r.isActive=function(){return!!this.g};function Tr(c){return c.g?c.g.readyState:0}r.Z=function(){try{return 2<Tr(this)?this.g.status:-1}catch{return-1}},r.oa=function(){try{return this.g?this.g.responseText:""}catch{return""}},r.Oa=function(c){if(this.g){var f=this.g.responseText;return c&&f.indexOf(c)==0&&(f=f.substring(c.length)),J1(f)}};function qf(c){try{if(!c.g)return null;if("response"in c.g)return c.g.response;switch(c.H){case"":case"text":return c.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in c.g)return c.g.mozResponseArrayBuffer}return null}catch{return null}}function w_(c){const f={};c=(c.g&&2<=Tr(c)&&c.g.getAllResponseHeaders()||"").split(`\r
`);for(let N=0;N<c.length;N++){if(T(c[N]))continue;var y=C(c[N]);const O=y[0];if(y=y[1],typeof y!="string")continue;y=y.trim();const F=f[O]||[];f[O]=F,F.push(y)}S(f,function(N){return N.join(", ")})}r.Ba=function(){return this.m},r.Ka=function(){return typeof this.l=="string"?this.l:String(this.l)};function Mo(c,f,y){return y&&y.internalChannelParams&&y.internalChannelParams[c]||f}function Wf(c){this.Aa=0,this.i=[],this.j=new Io,this.ia=this.qa=this.I=this.W=this.g=this.ya=this.D=this.H=this.m=this.S=this.o=null,this.Ya=this.U=0,this.Va=Mo("failFast",!1,c),this.F=this.C=this.u=this.s=this.l=null,this.X=!0,this.za=this.T=-1,this.Y=this.v=this.B=0,this.Ta=Mo("baseRetryDelayMs",5e3,c),this.cb=Mo("retryDelaySeedMs",1e4,c),this.Wa=Mo("forwardChannelMaxRetries",2,c),this.wa=Mo("forwardChannelRequestTimeoutMs",2e4,c),this.pa=c&&c.xmlHttpFactory||void 0,this.Xa=c&&c.Tb||void 0,this.Ca=c&&c.useFetchStreams||!1,this.L=void 0,this.J=c&&c.supportsCrossDomainXhr||!1,this.K="",this.h=new If(c&&c.concurrentRequestLimit),this.Da=new x_,this.P=c&&c.fastHandshake||!1,this.O=c&&c.encodeInitMessageHeaders||!1,this.P&&this.O&&(this.O=!1),this.Ua=c&&c.Rb||!1,c&&c.xa&&this.j.xa(),c&&c.forceLongPolling&&(this.X=!1),this.ba=!this.P&&this.X&&c&&c.detectBufferingProxy||!1,this.ja=void 0,c&&c.longPollingTimeout&&0<c.longPollingTimeout&&(this.ja=c.longPollingTimeout),this.ca=void 0,this.R=0,this.M=!1,this.ka=this.A=null}r=Wf.prototype,r.la=8,r.G=1,r.connect=function(c,f,y,N){_t(0),this.W=c,this.H=f||{},y&&N!==void 0&&(this.H.OSID=y,this.H.OAID=N),this.F=this.X,this.I=tm(this,null,this.W),ua(this)};function Rc(c){if(Gf(c),c.G==3){var f=c.U++,y=_r(c.I);if(Be(y,"SID",c.K),Be(y,"RID",f),Be(y,"TYPE","terminate"),Do(c,y),f=new zr(c,c.j,f),f.L=2,f.v=ia(_r(y)),y=!1,l.navigator&&l.navigator.sendBeacon)try{y=l.navigator.sendBeacon(f.v.toString(),"")}catch{}!y&&l.Image&&(new Image().src=f.v,y=!0),y||(f.g=rm(f.j,null),f.g.ea(f.v)),f.F=Date.now(),sa(f)}em(c)}function da(c){c.g&&(Dc(c),c.g.cancel(),c.g=null)}function Gf(c){da(c),c.u&&(l.clearTimeout(c.u),c.u=null),ha(c),c.h.cancel(),c.s&&(typeof c.s=="number"&&l.clearTimeout(c.s),c.s=null)}function ua(c){if(!Sf(c.h)&&!c.s){c.s=!0;var f=c.Ga;X||be(),xe||(X(),xe=!0),V.add(f,c),c.B=0}}function __(c,f){return kf(c.h)>=c.h.j-(c.s?1:0)?!1:c.s?(c.i=f.D.concat(c.i),!0):c.G==1||c.G==2||c.B>=(c.Va?0:c.Wa)?!1:(c.s=Co(x(c.Ga,c,f),Zf(c,c.B)),c.B++,!0)}r.Ga=function(c){if(this.s)if(this.s=null,this.G==1){if(!c){this.U=Math.floor(1e5*Math.random()),c=this.U++;const O=new zr(this,this.j,c);let F=this.o;if(this.S&&(F?(F=I(F),j(F,this.S)):F=this.S),this.m!==null||this.O||(O.H=F,F=null),this.P)e:{for(var f=0,y=0;y<this.i.length;y++){t:{var N=this.i[y];if("__data__"in N.map&&(N=N.map.__data__,typeof N=="string")){N=N.length;break t}N=void 0}if(N===void 0)break;if(f+=N,4096<f){f=y;break e}if(f===4096||y===this.i.length-1){f=y+1;break e}}f=1e3}else f=1e3;f=Qf(this,O,f),y=_r(this.I),Be(y,"RID",c),Be(y,"CVER",22),this.D&&Be(y,"X-HTTP-Session-Id",this.D),Do(this,y),F&&(this.O?f="headers="+encodeURIComponent(String(Uf(F)))+"&"+f:this.m&&Pc(y,this.m,F)),Ac(this.h,O),this.Ua&&Be(y,"TYPE","init"),this.P?(Be(y,"$req",f),Be(y,"SID","null"),O.T=!0,Ic(O,y,null)):Ic(O,y,f),this.G=2}}else this.G==3&&(c?Kf(this,c):this.i.length==0||Sf(this.h)||Kf(this))};function Kf(c,f){var y;f?y=f.l:y=c.U++;const N=_r(c.I);Be(N,"SID",c.K),Be(N,"RID",y),Be(N,"AID",c.T),Do(c,N),c.m&&c.o&&Pc(N,c.m,c.o),y=new zr(c,c.j,y,c.B+1),c.m===null&&(y.H=c.o),f&&(c.i=f.D.concat(c.i)),f=Qf(c,y,1e3),y.I=Math.round(.5*c.wa)+Math.round(.5*c.wa*Math.random()),Ac(c.h,y),Ic(y,N,f)}function Do(c,f){c.H&&$(c.H,function(y,N){Be(f,N,y)}),c.l&&Pf({},function(y,N){Be(f,N,y)})}function Qf(c,f,y){y=Math.min(c.i.length,y);var N=c.l?x(c.l.Na,c.l,c):null;e:{var O=c.i;let F=-1;for(;;){const G=["count="+y];F==-1?0<y?(F=O[0].g,G.push("ofs="+F)):F=0:G.push("ofs="+F);let Fe=!0;for(let ct=0;ct<y;ct++){let Re=O[ct].g;const mt=O[ct].map;if(Re-=F,0>Re)F=Math.max(0,O[ct].g-100),Fe=!1;else try{y_(mt,G,"req"+Re+"_")}catch{N&&N(mt)}}if(Fe){N=G.join("&");break e}}}return c=c.i.splice(0,y),f.D=c,N}function Yf(c){if(!c.g&&!c.u){c.Y=1;var f=c.Fa;X||be(),xe||(X(),xe=!0),V.add(f,c),c.v=0}}function Mc(c){return c.g||c.u||3<=c.v?!1:(c.Y++,c.u=Co(x(c.Fa,c),Zf(c,c.v)),c.v++,!0)}r.Fa=function(){if(this.u=null,Xf(this),this.ba&&!(this.M||this.g==null||0>=this.R)){var c=2*this.R;this.j.info("BP detection timer enabled: "+c),this.A=Co(x(this.ab,this),c)}},r.ab=function(){this.A&&(this.A=null,this.j.info("BP detection timeout reached."),this.j.info("Buffering proxy detected and switch to long-polling!"),this.F=!1,this.M=!0,_t(10),da(this),Xf(this))};function Dc(c){c.A!=null&&(l.clearTimeout(c.A),c.A=null)}function Xf(c){c.g=new zr(c,c.j,"rpc",c.Y),c.m===null&&(c.g.H=c.o),c.g.O=0;var f=_r(c.qa);Be(f,"RID","rpc"),Be(f,"SID",c.K),Be(f,"AID",c.T),Be(f,"CI",c.F?"0":"1"),!c.F&&c.ja&&Be(f,"TO",c.ja),Be(f,"TYPE","xmlhttp"),Do(c,f),c.m&&c.o&&Pc(f,c.m,c.o),c.L&&(c.g.I=c.L);var y=c.g;c=c.ia,y.L=1,y.v=ia(_r(f)),y.m=null,y.P=!0,Ef(y,c)}r.Za=function(){this.C!=null&&(this.C=null,da(this),Mc(this),_t(19))};function ha(c){c.C!=null&&(l.clearTimeout(c.C),c.C=null)}function Jf(c,f){var y=null;if(c.g==f){ha(c),Dc(c),c.g=null;var N=2}else if(jc(c.h,f))y=f.D,jf(c.h,f),N=1;else return;if(c.G!=0){if(f.o)if(N==1){y=f.m?f.m.length:0,f=Date.now()-f.F;var O=c.B;N=ea(),wt(N,new vf(N,y)),ua(c)}else Yf(c);else if(O=f.s,O==3||O==0&&0<f.X||!(N==1&&__(c,f)||N==2&&Mc(c)))switch(y&&0<y.length&&(f=c.h,f.i=f.i.concat(y)),O){case 1:Us(c,5);break;case 4:Us(c,10);break;case 3:Us(c,6);break;default:Us(c,2)}}}function Zf(c,f){let y=c.Ta+Math.floor(Math.random()*c.cb);return c.isActive()||(y*=2),y*f}function Us(c,f){if(c.j.info("Error code "+f),f==2){var y=x(c.fb,c),N=c.Xa;const O=!N;N=new Fs(N||"//www.google.com/images/cleardot.gif"),l.location&&l.location.protocol=="http"||na(N,"https"),ia(N),O?p_(N.toString(),y):g_(N.toString(),y)}else _t(2);c.G=0,c.l&&c.l.sa(f),em(c),Gf(c)}r.fb=function(c){c?(this.j.info("Successfully pinged google.com"),_t(2)):(this.j.info("Failed to ping google.com"),_t(1))};function em(c){if(c.G=0,c.ka=[],c.l){const f=Af(c.h);(f.length!=0||c.i.length!=0)&&(w(c.ka,f),w(c.ka,c.i),c.h.i.length=0,b(c.i),c.i.length=0),c.l.ra()}}function tm(c,f,y){var N=y instanceof Fs?_r(y):new Fs(y);if(N.g!="")f&&(N.g=f+"."+N.g),oa(N,N.s);else{var O=l.location;N=O.protocol,f=f?f+"."+O.hostname:O.hostname,O=+O.port;var F=new Fs(null);N&&na(F,N),f&&(F.g=f),O&&oa(F,O),y&&(F.l=y),N=F}return y=c.D,f=c.ya,y&&f&&Be(N,y,f),Be(N,"VER",c.la),Do(c,N),N}function rm(c,f,y){if(f&&!c.J)throw Error("Can't create secondary domain capable XhrIo object.");return f=c.Ca&&!c.pa?new Ke(new aa({eb:y})):new Ke(c.pa),f.Ha(c.J),f}r.isActive=function(){return!!this.l&&this.l.isActive(this)};function sm(){}r=sm.prototype,r.ua=function(){},r.ta=function(){},r.sa=function(){},r.ra=function(){},r.isActive=function(){return!0},r.Na=function(){};function fa(){}fa.prototype.g=function(c,f){return new Rt(c,f)};function Rt(c,f){ft.call(this),this.g=new Wf(f),this.l=c,this.h=f&&f.messageUrlParams||null,c=f&&f.messageHeaders||null,f&&f.clientProtocolHeaderRequired&&(c?c["X-Client-Protocol"]="webchannel":c={"X-Client-Protocol":"webchannel"}),this.g.o=c,c=f&&f.initMessageHeaders||null,f&&f.messageContentType&&(c?c["X-WebChannel-Content-Type"]=f.messageContentType:c={"X-WebChannel-Content-Type":f.messageContentType}),f&&f.va&&(c?c["X-WebChannel-Client-Profile"]=f.va:c={"X-WebChannel-Client-Profile":f.va}),this.g.S=c,(c=f&&f.Sb)&&!T(c)&&(this.g.m=c),this.v=f&&f.supportsCrossDomainXhr||!1,this.u=f&&f.sendRawJson||!1,(f=f&&f.httpSessionIdParam)&&!T(f)&&(this.g.D=f,c=this.h,c!==null&&f in c&&(c=this.h,f in c&&delete c[f])),this.j=new bn(this)}v(Rt,ft),Rt.prototype.m=function(){this.g.l=this.j,this.v&&(this.g.J=!0),this.g.connect(this.l,this.h||void 0)},Rt.prototype.close=function(){Rc(this.g)},Rt.prototype.o=function(c){var f=this.g;if(typeof c=="string"){var y={};y.__data__=c,c=y}else this.u&&(y={},y.__data__=wc(c),c=y);f.i.push(new o_(f.Ya++,c)),f.G==3&&ua(f)},Rt.prototype.N=function(){this.g.l=null,delete this.j,Rc(this.g),delete this.g,Rt.aa.N.call(this)};function nm(c){Tc.call(this),c.__headers__&&(this.headers=c.__headers__,this.statusCode=c.__status__,delete c.__headers__,delete c.__status__);var f=c.__sm__;if(f){e:{for(const y in f){c=y;break e}c=void 0}(this.i=c)&&(c=this.i,f=f!==null&&c in f?f[c]:void 0),this.data=f}else this.data=c}v(nm,Tc);function om(){Ec.call(this),this.status=1}v(om,Ec);function bn(c){this.g=c}v(bn,sm),bn.prototype.ua=function(){wt(this.g,"a")},bn.prototype.ta=function(c){wt(this.g,new nm(c))},bn.prototype.sa=function(c){wt(this.g,new om)},bn.prototype.ra=function(){wt(this.g,"b")},fa.prototype.createWebChannel=fa.prototype.g,Rt.prototype.send=Rt.prototype.o,Rt.prototype.open=Rt.prototype.m,Rt.prototype.close=Rt.prototype.close,Vy=function(){return new fa},Ly=function(){return ea()},Oy=Ls,Hd={mb:0,pb:1,qb:2,Jb:3,Ob:4,Lb:5,Mb:6,Kb:7,Ib:8,Nb:9,PROXY:10,NOPROXY:11,Gb:12,Cb:13,Db:14,Bb:15,Eb:16,Fb:17,ib:18,hb:19,jb:20},ta.NO_ERROR=0,ta.TIMEOUT=8,ta.HTTP_ERROR=6,Da=ta,wf.COMPLETE="complete",Dy=wf,gf.EventType=Eo,Eo.OPEN="a",Eo.CLOSE="b",Eo.ERROR="c",Eo.MESSAGE="d",ft.prototype.listen=ft.prototype.K,qo=gf,Ke.prototype.listenOnce=Ke.prototype.L,Ke.prototype.getLastError=Ke.prototype.Ka,Ke.prototype.getLastErrorCode=Ke.prototype.Ba,Ke.prototype.getStatus=Ke.prototype.Z,Ke.prototype.getResponseJson=Ke.prototype.Oa,Ke.prototype.getResponseText=Ke.prototype.oa,Ke.prototype.send=Ke.prototype.ea,Ke.prototype.setWithCredentials=Ke.prototype.Ha,My=Ke}).apply(typeof va<"u"?va:typeof self<"u"?self:typeof window<"u"?window:{});const yp="@firebase/firestore",bp="4.7.17";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class yt{constructor(e){this.uid=e}isAuthenticated(){return this.uid!=null}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(e){return e.uid===this.uid}}yt.UNAUTHENTICATED=new yt(null),yt.GOOGLE_CREDENTIALS=new yt("google-credentials-uid"),yt.FIRST_PARTY=new yt("first-party-uid"),yt.MOCK_USER=new yt("mock-user");/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let po="11.9.0";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const an=new Wu("@firebase/firestore");function Tn(){return an.logLevel}function J(r,...e){if(an.logLevel<=Ee.DEBUG){const t=e.map(ih);an.debug(`Firestore (${po}): ${r}`,...t)}}function Lr(r,...e){if(an.logLevel<=Ee.ERROR){const t=e.map(ih);an.error(`Firestore (${po}): ${r}`,...t)}}function Zn(r,...e){if(an.logLevel<=Ee.WARN){const t=e.map(ih);an.warn(`Firestore (${po}): ${r}`,...t)}}function ih(r){if(typeof r=="string")return r;try{/**
* @license
* Copyright 2020 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/return function(t){return JSON.stringify(t)}(r)}catch{return r}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function de(r,e,t){let s="Unexpected state";typeof e=="string"?s=e:t=e,Fy(r,s,t)}function Fy(r,e,t){let s=`FIRESTORE (${po}) INTERNAL ASSERTION FAILED: ${e} (ID: ${r.toString(16)})`;if(t!==void 0)try{s+=" CONTEXT: "+JSON.stringify(t)}catch{s+=" CONTEXT: "+t}throw Lr(s),new Error(s)}function Oe(r,e,t,s){let n="Unexpected state";typeof t=="string"?n=t:s=t,r||Fy(e,n,s)}function pe(r,e){return r}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const z={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class te extends yr{constructor(e,t){super(e,t),this.code=e,this.message=t,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Pr{constructor(){this.promise=new Promise((e,t)=>{this.resolve=e,this.reject=t})}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Uy{constructor(e,t){this.user=t,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${e}`)}}class YS{getToken(){return Promise.resolve(null)}invalidateToken(){}start(e,t){e.enqueueRetryable(()=>t(yt.UNAUTHENTICATED))}shutdown(){}}class XS{constructor(e){this.token=e,this.changeListener=null}getToken(){return Promise.resolve(this.token)}invalidateToken(){}start(e,t){this.changeListener=t,e.enqueueRetryable(()=>t(this.token.user))}shutdown(){this.changeListener=null}}class JS{constructor(e){this.t=e,this.currentUser=yt.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(e,t){Oe(this.o===void 0,42304);let s=this.i;const n=d=>this.i!==s?(s=this.i,t(d)):Promise.resolve();let i=new Pr;this.o=()=>{this.i++,this.currentUser=this.u(),i.resolve(),i=new Pr,e.enqueueRetryable(()=>n(this.currentUser))};const a=()=>{const d=i;e.enqueueRetryable(async()=>{await d.promise,await n(this.currentUser)})},l=d=>{J("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=d,this.o&&(this.auth.addAuthTokenListener(this.o),a())};this.t.onInit(d=>l(d)),setTimeout(()=>{if(!this.auth){const d=this.t.getImmediate({optional:!0});d?l(d):(J("FirebaseAuthCredentialsProvider","Auth not yet detected"),i.resolve(),i=new Pr)}},0),a()}getToken(){const e=this.i,t=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(t).then(s=>this.i!==e?(J("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):s?(Oe(typeof s.accessToken=="string",31837,{l:s}),new Uy(s.accessToken,this.currentUser)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.o&&this.auth.removeAuthTokenListener(this.o),this.o=void 0}u(){const e=this.auth&&this.auth.getUid();return Oe(e===null||typeof e=="string",2055,{h:e}),new yt(e)}}class ZS{constructor(e,t,s){this.P=e,this.T=t,this.I=s,this.type="FirstParty",this.user=yt.FIRST_PARTY,this.A=new Map}R(){return this.I?this.I():null}get headers(){this.A.set("X-Goog-AuthUser",this.P);const e=this.R();return e&&this.A.set("Authorization",e),this.T&&this.A.set("X-Goog-Iam-Authorization-Token",this.T),this.A}}class ek{constructor(e,t,s){this.P=e,this.T=t,this.I=s}getToken(){return Promise.resolve(new ZS(this.P,this.T,this.I))}start(e,t){e.enqueueRetryable(()=>t(yt.FIRST_PARTY))}shutdown(){}invalidateToken(){}}class vp{constructor(e){this.value=e,this.type="AppCheck",this.headers=new Map,e&&e.length>0&&this.headers.set("x-firebase-appcheck",this.value)}}class tk{constructor(e,t){this.V=t,this.forceRefresh=!1,this.appCheck=null,this.m=null,this.p=null,Dt(e)&&e.settings.appCheckToken&&(this.p=e.settings.appCheckToken)}start(e,t){Oe(this.o===void 0,3512);const s=i=>{i.error!=null&&J("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${i.error.message}`);const a=i.token!==this.m;return this.m=i.token,J("FirebaseAppCheckTokenProvider",`Received ${a?"new":"existing"} token.`),a?t(i.token):Promise.resolve()};this.o=i=>{e.enqueueRetryable(()=>s(i))};const n=i=>{J("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=i,this.o&&this.appCheck.addTokenListener(this.o)};this.V.onInit(i=>n(i)),setTimeout(()=>{if(!this.appCheck){const i=this.V.getImmediate({optional:!0});i?n(i):J("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}},0)}getToken(){if(this.p)return Promise.resolve(new vp(this.p));const e=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(e).then(t=>t?(Oe(typeof t.token=="string",44558,{tokenResult:t}),this.m=t.token,new vp(t.token)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.o&&this.appCheck.removeTokenListener(this.o),this.o=void 0}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function rk(r){const e=typeof self<"u"&&(self.crypto||self.msCrypto),t=new Uint8Array(r);if(e&&typeof e.getRandomValues=="function")e.getRandomValues(t);else for(let s=0;s<r;s++)t[s]=Math.floor(256*Math.random());return t}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function $y(){return new TextEncoder}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class By{static newId(){const e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",t=62*Math.floor(4.129032258064516);let s="";for(;s.length<20;){const n=rk(40);for(let i=0;i<n.length;++i)s.length<20&&n[i]<t&&(s+=e.charAt(n[i]%62))}return s}}function Te(r,e){return r<e?-1:r>e?1:0}function qd(r,e){let t=0;for(;t<r.length&&t<e.length;){const s=r.codePointAt(t),n=e.codePointAt(t);if(s!==n){if(s<128&&n<128)return Te(s,n);{const i=$y(),a=sk(i.encode(wp(r,t)),i.encode(wp(e,t)));return a!==0?a:Te(s,n)}}t+=s>65535?2:1}return Te(r.length,e.length)}function wp(r,e){return r.codePointAt(e)>65535?r.substring(e,e+2):r.substring(e,e+1)}function sk(r,e){for(let t=0;t<r.length&&t<e.length;++t)if(r[t]!==e[t])return Te(r[t],e[t]);return Te(r.length,e.length)}function eo(r,e,t){return r.length===e.length&&r.every((s,n)=>t(s,e[n]))}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const _p=-62135596800,Tp=1e6;class nt{static now(){return nt.fromMillis(Date.now())}static fromDate(e){return nt.fromMillis(e.getTime())}static fromMillis(e){const t=Math.floor(e/1e3),s=Math.floor((e-1e3*t)*Tp);return new nt(t,s)}constructor(e,t){if(this.seconds=e,this.nanoseconds=t,t<0)throw new te(z.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+t);if(t>=1e9)throw new te(z.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+t);if(e<_p)throw new te(z.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e);if(e>=253402300800)throw new te(z.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/Tp}_compareTo(e){return this.seconds===e.seconds?Te(this.nanoseconds,e.nanoseconds):Te(this.seconds,e.seconds)}isEqual(e){return e.seconds===this.seconds&&e.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{seconds:this.seconds,nanoseconds:this.nanoseconds}}valueOf(){const e=this.seconds-_p;return String(e).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class fe{static fromTimestamp(e){return new fe(e)}static min(){return new fe(new nt(0,0))}static max(){return new fe(new nt(253402300799,999999999))}constructor(e){this.timestamp=e}compareTo(e){return this.timestamp._compareTo(e.timestamp)}isEqual(e){return this.timestamp.isEqual(e.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ep="__name__";class sr{constructor(e,t,s){t===void 0?t=0:t>e.length&&de(637,{offset:t,range:e.length}),s===void 0?s=e.length-t:s>e.length-t&&de(1746,{length:s,range:e.length-t}),this.segments=e,this.offset=t,this.len=s}get length(){return this.len}isEqual(e){return sr.comparator(this,e)===0}child(e){const t=this.segments.slice(this.offset,this.limit());return e instanceof sr?e.forEach(s=>{t.push(s)}):t.push(e),this.construct(t)}limit(){return this.offset+this.length}popFirst(e){return e=e===void 0?1:e,this.construct(this.segments,this.offset+e,this.length-e)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(e){return this.segments[this.offset+e]}isEmpty(){return this.length===0}isPrefixOf(e){if(e.length<this.length)return!1;for(let t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}isImmediateParentOf(e){if(this.length+1!==e.length)return!1;for(let t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}forEach(e){for(let t=this.offset,s=this.limit();t<s;t++)e(this.segments[t])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(e,t){const s=Math.min(e.length,t.length);for(let n=0;n<s;n++){const i=sr.compareSegments(e.get(n),t.get(n));if(i!==0)return i}return Te(e.length,t.length)}static compareSegments(e,t){const s=sr.isNumericId(e),n=sr.isNumericId(t);return s&&!n?-1:!s&&n?1:s&&n?sr.extractNumericId(e).compare(sr.extractNumericId(t)):qd(e,t)}static isNumericId(e){return e.startsWith("__id")&&e.endsWith("__")}static extractNumericId(e){return vs.fromString(e.substring(4,e.length-2))}}class qe extends sr{construct(e,t,s){return new qe(e,t,s)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}toUriEncodedString(){return this.toArray().map(encodeURIComponent).join("/")}static fromString(...e){const t=[];for(const s of e){if(s.indexOf("//")>=0)throw new te(z.INVALID_ARGUMENT,`Invalid segment (${s}). Paths must not contain // in them.`);t.push(...s.split("/").filter(n=>n.length>0))}return new qe(t)}static emptyPath(){return new qe([])}}const nk=/^[_a-zA-Z][_a-zA-Z0-9]*$/;class ut extends sr{construct(e,t,s){return new ut(e,t,s)}static isValidIdentifier(e){return nk.test(e)}canonicalString(){return this.toArray().map(e=>(e=e.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),ut.isValidIdentifier(e)||(e="`"+e+"`"),e)).join(".")}toString(){return this.canonicalString()}isKeyField(){return this.length===1&&this.get(0)===Ep}static keyField(){return new ut([Ep])}static fromServerFormat(e){const t=[];let s="",n=0;const i=()=>{if(s.length===0)throw new te(z.INVALID_ARGUMENT,`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);t.push(s),s=""};let a=!1;for(;n<e.length;){const l=e[n];if(l==="\\"){if(n+1===e.length)throw new te(z.INVALID_ARGUMENT,"Path has trailing escape character: "+e);const d=e[n+1];if(d!=="\\"&&d!=="."&&d!=="`")throw new te(z.INVALID_ARGUMENT,"Path has invalid escape sequence: "+e);s+=d,n+=2}else l==="`"?(a=!a,n++):l!=="."||a?(s+=l,n++):(i(),n++)}if(i(),a)throw new te(z.INVALID_ARGUMENT,"Unterminated ` in path: "+e);return new ut(t)}static emptyPath(){return new ut([])}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ae{constructor(e){this.path=e}static fromPath(e){return new ae(qe.fromString(e))}static fromName(e){return new ae(qe.fromString(e).popFirst(5))}static empty(){return new ae(qe.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(e){return this.path.length>=2&&this.path.get(this.path.length-2)===e}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(e){return e!==null&&qe.comparator(this.path,e.path)===0}toString(){return this.path.toString()}static comparator(e,t){return qe.comparator(e.path,t.path)}static isDocumentKey(e){return e.length%2==0}static fromSegments(e){return new ae(new qe(e.slice()))}}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const gi=-1;function ok(r,e){const t=r.toTimestamp().seconds,s=r.toTimestamp().nanoseconds+1,n=fe.fromTimestamp(s===1e9?new nt(t+1,0):new nt(t,s));return new Es(n,ae.empty(),e)}function ik(r){return new Es(r.readTime,r.key,gi)}class Es{constructor(e,t,s){this.readTime=e,this.documentKey=t,this.largestBatchId=s}static min(){return new Es(fe.min(),ae.empty(),gi)}static max(){return new Es(fe.max(),ae.empty(),gi)}}function ak(r,e){let t=r.readTime.compareTo(e.readTime);return t!==0?t:(t=ae.comparator(r.documentKey,e.documentKey),t!==0?t:Te(r.largestBatchId,e.largestBatchId))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const lk="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.";class ck{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(e){this.onCommittedListeners.push(e)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach(e=>e())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function go(r){if(r.code!==z.FAILED_PRECONDITION||r.message!==lk)throw r;J("LocalStore","Unexpectedly lost primary lease")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class B{constructor(e){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,e(t=>{this.isDone=!0,this.result=t,this.nextCallback&&this.nextCallback(t)},t=>{this.isDone=!0,this.error=t,this.catchCallback&&this.catchCallback(t)})}catch(e){return this.next(void 0,e)}next(e,t){return this.callbackAttached&&de(59440),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(t,this.error):this.wrapSuccess(e,this.result):new B((s,n)=>{this.nextCallback=i=>{this.wrapSuccess(e,i).next(s,n)},this.catchCallback=i=>{this.wrapFailure(t,i).next(s,n)}})}toPromise(){return new Promise((e,t)=>{this.next(e,t)})}wrapUserFunction(e){try{const t=e();return t instanceof B?t:B.resolve(t)}catch(t){return B.reject(t)}}wrapSuccess(e,t){return e?this.wrapUserFunction(()=>e(t)):B.resolve(t)}wrapFailure(e,t){return e?this.wrapUserFunction(()=>e(t)):B.reject(t)}static resolve(e){return new B((t,s)=>{t(e)})}static reject(e){return new B((t,s)=>{s(e)})}static waitFor(e){return new B((t,s)=>{let n=0,i=0,a=!1;e.forEach(l=>{++n,l.next(()=>{++i,a&&i===n&&t()},d=>s(d))}),a=!0,i===n&&t()})}static or(e){let t=B.resolve(!1);for(const s of e)t=t.next(n=>n?B.resolve(n):s());return t}static forEach(e,t){const s=[];return e.forEach((n,i)=>{s.push(t.call(this,n,i))}),this.waitFor(s)}static mapArray(e,t){return new B((s,n)=>{const i=e.length,a=new Array(i);let l=0;for(let d=0;d<i;d++){const u=d;t(e[u]).next(h=>{a[u]=h,++l,l===i&&s(a)},h=>n(h))}})}static doWhile(e,t){return new B((s,n)=>{const i=()=>{e()===!0?t().next(()=>{i()},n):s()};i()})}}function dk(r){const e=r.match(/Android ([\d.]+)/i),t=e?e[1].split(".").slice(0,2).join("."):"-1";return Number(t)}function xo(r){return r.name==="IndexedDbTransactionError"}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class zl{constructor(e,t){this.previousValue=e,t&&(t.sequenceNumberHandler=s=>this.ue(s),this.ce=s=>t.writeSequenceNumber(s))}ue(e){return this.previousValue=Math.max(e,this.previousValue),this.previousValue}next(){const e=++this.previousValue;return this.ce&&this.ce(e),e}}zl.le=-1;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ah=-1;function Hl(r){return r==null}function rl(r){return r===0&&1/r==-1/0}function uk(r){return typeof r=="number"&&Number.isInteger(r)&&!rl(r)&&r<=Number.MAX_SAFE_INTEGER&&r>=Number.MIN_SAFE_INTEGER}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const zy="";function hk(r){let e="";for(let t=0;t<r.length;t++)e.length>0&&(e=Np(e)),e=fk(r.get(t),e);return Np(e)}function fk(r,e){let t=e;const s=r.length;for(let n=0;n<s;n++){const i=r.charAt(n);switch(i){case"\0":t+="";break;case zy:t+="";break;default:t+=i}}return t}function Np(r){return r+zy+""}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Cp(r){let e=0;for(const t in r)Object.prototype.hasOwnProperty.call(r,t)&&e++;return e}function As(r,e){for(const t in r)Object.prototype.hasOwnProperty.call(r,t)&&e(t,r[t])}function Hy(r){for(const e in r)if(Object.prototype.hasOwnProperty.call(r,e))return!1;return!0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ge{constructor(e,t){this.comparator=e,this.root=t||dt.EMPTY}insert(e,t){return new Ge(this.comparator,this.root.insert(e,t,this.comparator).copy(null,null,dt.BLACK,null,null))}remove(e){return new Ge(this.comparator,this.root.remove(e,this.comparator).copy(null,null,dt.BLACK,null,null))}get(e){let t=this.root;for(;!t.isEmpty();){const s=this.comparator(e,t.key);if(s===0)return t.value;s<0?t=t.left:s>0&&(t=t.right)}return null}indexOf(e){let t=0,s=this.root;for(;!s.isEmpty();){const n=this.comparator(e,s.key);if(n===0)return t+s.left.size;n<0?s=s.left:(t+=s.left.size+1,s=s.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(e){return this.root.inorderTraversal(e)}forEach(e){this.inorderTraversal((t,s)=>(e(t,s),!1))}toString(){const e=[];return this.inorderTraversal((t,s)=>(e.push(`${t}:${s}`),!1)),`{${e.join(", ")}}`}reverseTraversal(e){return this.root.reverseTraversal(e)}getIterator(){return new wa(this.root,null,this.comparator,!1)}getIteratorFrom(e){return new wa(this.root,e,this.comparator,!1)}getReverseIterator(){return new wa(this.root,null,this.comparator,!0)}getReverseIteratorFrom(e){return new wa(this.root,e,this.comparator,!0)}}class wa{constructor(e,t,s,n){this.isReverse=n,this.nodeStack=[];let i=1;for(;!e.isEmpty();)if(i=t?s(e.key,t):1,t&&n&&(i*=-1),i<0)e=this.isReverse?e.left:e.right;else{if(i===0){this.nodeStack.push(e);break}this.nodeStack.push(e),e=this.isReverse?e.right:e.left}}getNext(){let e=this.nodeStack.pop();const t={key:e.key,value:e.value};if(this.isReverse)for(e=e.left;!e.isEmpty();)this.nodeStack.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack.push(e),e=e.left;return t}hasNext(){return this.nodeStack.length>0}peek(){if(this.nodeStack.length===0)return null;const e=this.nodeStack[this.nodeStack.length-1];return{key:e.key,value:e.value}}}class dt{constructor(e,t,s,n,i){this.key=e,this.value=t,this.color=s??dt.RED,this.left=n??dt.EMPTY,this.right=i??dt.EMPTY,this.size=this.left.size+1+this.right.size}copy(e,t,s,n,i){return new dt(e??this.key,t??this.value,s??this.color,n??this.left,i??this.right)}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,t,s){let n=this;const i=s(e,n.key);return n=i<0?n.copy(null,null,null,n.left.insert(e,t,s),null):i===0?n.copy(null,t,null,null,null):n.copy(null,null,null,null,n.right.insert(e,t,s)),n.fixUp()}removeMin(){if(this.left.isEmpty())return dt.EMPTY;let e=this;return e.left.isRed()||e.left.left.isRed()||(e=e.moveRedLeft()),e=e.copy(null,null,null,e.left.removeMin(),null),e.fixUp()}remove(e,t){let s,n=this;if(t(e,n.key)<0)n.left.isEmpty()||n.left.isRed()||n.left.left.isRed()||(n=n.moveRedLeft()),n=n.copy(null,null,null,n.left.remove(e,t),null);else{if(n.left.isRed()&&(n=n.rotateRight()),n.right.isEmpty()||n.right.isRed()||n.right.left.isRed()||(n=n.moveRedRight()),t(e,n.key)===0){if(n.right.isEmpty())return dt.EMPTY;s=n.right.min(),n=n.copy(s.key,s.value,null,null,n.right.removeMin())}n=n.copy(null,null,null,null,n.right.remove(e,t))}return n.fixUp()}isRed(){return this.color}fixUp(){let e=this;return e.right.isRed()&&!e.left.isRed()&&(e=e.rotateLeft()),e.left.isRed()&&e.left.left.isRed()&&(e=e.rotateRight()),e.left.isRed()&&e.right.isRed()&&(e=e.colorFlip()),e}moveRedLeft(){let e=this.colorFlip();return e.right.left.isRed()&&(e=e.copy(null,null,null,null,e.right.rotateRight()),e=e.rotateLeft(),e=e.colorFlip()),e}moveRedRight(){let e=this.colorFlip();return e.left.left.isRed()&&(e=e.rotateRight(),e=e.colorFlip()),e}rotateLeft(){const e=this.copy(null,null,dt.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight(){const e=this.copy(null,null,dt.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip(){const e=this.left.copy(null,null,!this.left.color,null,null),t=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,t)}checkMaxDepth(){const e=this.check();return Math.pow(2,e)<=this.size+1}check(){if(this.isRed()&&this.left.isRed())throw de(43730,{key:this.key,value:this.value});if(this.right.isRed())throw de(14113,{key:this.key,value:this.value});const e=this.left.check();if(e!==this.right.check())throw de(27949);return e+(this.isRed()?0:1)}}dt.EMPTY=null,dt.RED=!0,dt.BLACK=!1;dt.EMPTY=new class{constructor(){this.size=0}get key(){throw de(57766)}get value(){throw de(16141)}get color(){throw de(16727)}get left(){throw de(29726)}get right(){throw de(36894)}copy(e,t,s,n,i){return this}insert(e,t,s){return new dt(e,t)}remove(e,t){return this}isEmpty(){return!0}inorderTraversal(e){return!1}reverseTraversal(e){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ot{constructor(e){this.comparator=e,this.data=new Ge(this.comparator)}has(e){return this.data.get(e)!==null}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(e){return this.data.indexOf(e)}forEach(e){this.data.inorderTraversal((t,s)=>(e(t),!1))}forEachInRange(e,t){const s=this.data.getIteratorFrom(e[0]);for(;s.hasNext();){const n=s.getNext();if(this.comparator(n.key,e[1])>=0)return;t(n.key)}}forEachWhile(e,t){let s;for(s=t!==void 0?this.data.getIteratorFrom(t):this.data.getIterator();s.hasNext();)if(!e(s.getNext().key))return}firstAfterOrEqual(e){const t=this.data.getIteratorFrom(e);return t.hasNext()?t.getNext().key:null}getIterator(){return new Ip(this.data.getIterator())}getIteratorFrom(e){return new Ip(this.data.getIteratorFrom(e))}add(e){return this.copy(this.data.remove(e).insert(e,!0))}delete(e){return this.has(e)?this.copy(this.data.remove(e)):this}isEmpty(){return this.data.isEmpty()}unionWith(e){let t=this;return t.size<e.size&&(t=e,e=this),e.forEach(s=>{t=t.add(s)}),t}isEqual(e){if(!(e instanceof ot)||this.size!==e.size)return!1;const t=this.data.getIterator(),s=e.data.getIterator();for(;t.hasNext();){const n=t.getNext().key,i=s.getNext().key;if(this.comparator(n,i)!==0)return!1}return!0}toArray(){const e=[];return this.forEach(t=>{e.push(t)}),e}toString(){const e=[];return this.forEach(t=>e.push(t)),"SortedSet("+e.toString()+")"}copy(e){const t=new ot(this.comparator);return t.data=e,t}}class Ip{constructor(e){this.iter=e}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ot{constructor(e){this.fields=e,e.sort(ut.comparator)}static empty(){return new Ot([])}unionWith(e){let t=new ot(ut.comparator);for(const s of this.fields)t=t.add(s);for(const s of e)t=t.add(s);return new Ot(t.toArray())}covers(e){for(const t of this.fields)if(t.isPrefixOf(e))return!0;return!1}isEqual(e){return eo(this.fields,e.fields,(t,s)=>t.isEqual(s))}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class qy extends Error{constructor(){super(...arguments),this.name="Base64DecodeError"}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ht{constructor(e){this.binaryString=e}static fromBase64String(e){const t=function(n){try{return atob(n)}catch(i){throw typeof DOMException<"u"&&i instanceof DOMException?new qy("Invalid base64 string: "+i):i}}(e);return new ht(t)}static fromUint8Array(e){const t=function(n){let i="";for(let a=0;a<n.length;++a)i+=String.fromCharCode(n[a]);return i}(e);return new ht(t)}[Symbol.iterator](){let e=0;return{next:()=>e<this.binaryString.length?{value:this.binaryString.charCodeAt(e++),done:!1}:{value:void 0,done:!0}}}toBase64(){return function(t){return btoa(t)}(this.binaryString)}toUint8Array(){return function(t){const s=new Uint8Array(t.length);for(let n=0;n<t.length;n++)s[n]=t.charCodeAt(n);return s}(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(e){return Te(this.binaryString,e.binaryString)}isEqual(e){return this.binaryString===e.binaryString}}ht.EMPTY_BYTE_STRING=new ht("");const mk=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function Ns(r){if(Oe(!!r,39018),typeof r=="string"){let e=0;const t=mk.exec(r);if(Oe(!!t,46558,{timestamp:r}),t[1]){let n=t[1];n=(n+"000000000").substr(0,9),e=Number(n)}const s=new Date(r);return{seconds:Math.floor(s.getTime()/1e3),nanos:e}}return{seconds:Ze(r.seconds),nanos:Ze(r.nanos)}}function Ze(r){return typeof r=="number"?r:typeof r=="string"?Number(r):0}function Cs(r){return typeof r=="string"?ht.fromBase64String(r):ht.fromUint8Array(r)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Wy="server_timestamp",Gy="__type__",Ky="__previous_value__",Qy="__local_write_time__";function lh(r){var e,t;return((t=(((e=r==null?void 0:r.mapValue)===null||e===void 0?void 0:e.fields)||{})[Gy])===null||t===void 0?void 0:t.stringValue)===Wy}function ql(r){const e=r.mapValue.fields[Ky];return lh(e)?ql(e):e}function xi(r){const e=Ns(r.mapValue.fields[Qy].timestampValue);return new nt(e.seconds,e.nanos)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class pk{constructor(e,t,s,n,i,a,l,d,u,h){this.databaseId=e,this.appId=t,this.persistenceKey=s,this.host=n,this.ssl=i,this.forceLongPolling=a,this.autoDetectLongPolling=l,this.longPollingOptions=d,this.useFetchStreams=u,this.isUsingEmulator=h}}const sl="(default)";class yi{constructor(e,t){this.projectId=e,this.database=t||sl}static empty(){return new yi("","")}get isDefaultDatabase(){return this.database===sl}isEqual(e){return e instanceof yi&&e.projectId===this.projectId&&e.database===this.database}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Yy="__type__",gk="__max__",_a={mapValue:{}},Xy="__vector__",nl="value";function Is(r){return"nullValue"in r?0:"booleanValue"in r?1:"integerValue"in r||"doubleValue"in r?2:"timestampValue"in r?3:"stringValue"in r?5:"bytesValue"in r?6:"referenceValue"in r?7:"geoPointValue"in r?8:"arrayValue"in r?9:"mapValue"in r?lh(r)?4:yk(r)?9007199254740991:xk(r)?10:11:de(28295,{value:r})}function gr(r,e){if(r===e)return!0;const t=Is(r);if(t!==Is(e))return!1;switch(t){case 0:case 9007199254740991:return!0;case 1:return r.booleanValue===e.booleanValue;case 4:return xi(r).isEqual(xi(e));case 3:return function(n,i){if(typeof n.timestampValue=="string"&&typeof i.timestampValue=="string"&&n.timestampValue.length===i.timestampValue.length)return n.timestampValue===i.timestampValue;const a=Ns(n.timestampValue),l=Ns(i.timestampValue);return a.seconds===l.seconds&&a.nanos===l.nanos}(r,e);case 5:return r.stringValue===e.stringValue;case 6:return function(n,i){return Cs(n.bytesValue).isEqual(Cs(i.bytesValue))}(r,e);case 7:return r.referenceValue===e.referenceValue;case 8:return function(n,i){return Ze(n.geoPointValue.latitude)===Ze(i.geoPointValue.latitude)&&Ze(n.geoPointValue.longitude)===Ze(i.geoPointValue.longitude)}(r,e);case 2:return function(n,i){if("integerValue"in n&&"integerValue"in i)return Ze(n.integerValue)===Ze(i.integerValue);if("doubleValue"in n&&"doubleValue"in i){const a=Ze(n.doubleValue),l=Ze(i.doubleValue);return a===l?rl(a)===rl(l):isNaN(a)&&isNaN(l)}return!1}(r,e);case 9:return eo(r.arrayValue.values||[],e.arrayValue.values||[],gr);case 10:case 11:return function(n,i){const a=n.mapValue.fields||{},l=i.mapValue.fields||{};if(Cp(a)!==Cp(l))return!1;for(const d in a)if(a.hasOwnProperty(d)&&(l[d]===void 0||!gr(a[d],l[d])))return!1;return!0}(r,e);default:return de(52216,{left:r})}}function bi(r,e){return(r.values||[]).find(t=>gr(t,e))!==void 0}function to(r,e){if(r===e)return 0;const t=Is(r),s=Is(e);if(t!==s)return Te(t,s);switch(t){case 0:case 9007199254740991:return 0;case 1:return Te(r.booleanValue,e.booleanValue);case 2:return function(i,a){const l=Ze(i.integerValue||i.doubleValue),d=Ze(a.integerValue||a.doubleValue);return l<d?-1:l>d?1:l===d?0:isNaN(l)?isNaN(d)?0:-1:1}(r,e);case 3:return Sp(r.timestampValue,e.timestampValue);case 4:return Sp(xi(r),xi(e));case 5:return qd(r.stringValue,e.stringValue);case 6:return function(i,a){const l=Cs(i),d=Cs(a);return l.compareTo(d)}(r.bytesValue,e.bytesValue);case 7:return function(i,a){const l=i.split("/"),d=a.split("/");for(let u=0;u<l.length&&u<d.length;u++){const h=Te(l[u],d[u]);if(h!==0)return h}return Te(l.length,d.length)}(r.referenceValue,e.referenceValue);case 8:return function(i,a){const l=Te(Ze(i.latitude),Ze(a.latitude));return l!==0?l:Te(Ze(i.longitude),Ze(a.longitude))}(r.geoPointValue,e.geoPointValue);case 9:return kp(r.arrayValue,e.arrayValue);case 10:return function(i,a){var l,d,u,h;const m=i.fields||{},x=a.fields||{},g=(l=m[nl])===null||l===void 0?void 0:l.arrayValue,v=(d=x[nl])===null||d===void 0?void 0:d.arrayValue,b=Te(((u=g==null?void 0:g.values)===null||u===void 0?void 0:u.length)||0,((h=v==null?void 0:v.values)===null||h===void 0?void 0:h.length)||0);return b!==0?b:kp(g,v)}(r.mapValue,e.mapValue);case 11:return function(i,a){if(i===_a.mapValue&&a===_a.mapValue)return 0;if(i===_a.mapValue)return 1;if(a===_a.mapValue)return-1;const l=i.fields||{},d=Object.keys(l),u=a.fields||{},h=Object.keys(u);d.sort(),h.sort();for(let m=0;m<d.length&&m<h.length;++m){const x=qd(d[m],h[m]);if(x!==0)return x;const g=to(l[d[m]],u[h[m]]);if(g!==0)return g}return Te(d.length,h.length)}(r.mapValue,e.mapValue);default:throw de(23264,{Pe:t})}}function Sp(r,e){if(typeof r=="string"&&typeof e=="string"&&r.length===e.length)return Te(r,e);const t=Ns(r),s=Ns(e),n=Te(t.seconds,s.seconds);return n!==0?n:Te(t.nanos,s.nanos)}function kp(r,e){const t=r.values||[],s=e.values||[];for(let n=0;n<t.length&&n<s.length;++n){const i=to(t[n],s[n]);if(i)return i}return Te(t.length,s.length)}function ro(r){return Wd(r)}function Wd(r){return"nullValue"in r?"null":"booleanValue"in r?""+r.booleanValue:"integerValue"in r?""+r.integerValue:"doubleValue"in r?""+r.doubleValue:"timestampValue"in r?function(t){const s=Ns(t);return`time(${s.seconds},${s.nanos})`}(r.timestampValue):"stringValue"in r?r.stringValue:"bytesValue"in r?function(t){return Cs(t).toBase64()}(r.bytesValue):"referenceValue"in r?function(t){return ae.fromName(t).toString()}(r.referenceValue):"geoPointValue"in r?function(t){return`geo(${t.latitude},${t.longitude})`}(r.geoPointValue):"arrayValue"in r?function(t){let s="[",n=!0;for(const i of t.values||[])n?n=!1:s+=",",s+=Wd(i);return s+"]"}(r.arrayValue):"mapValue"in r?function(t){const s=Object.keys(t.fields||{}).sort();let n="{",i=!0;for(const a of s)i?i=!1:n+=",",n+=`${a}:${Wd(t.fields[a])}`;return n+"}"}(r.mapValue):de(61005,{value:r})}function Oa(r){switch(Is(r)){case 0:case 1:return 4;case 2:return 8;case 3:case 8:return 16;case 4:const e=ql(r);return e?16+Oa(e):16;case 5:return 2*r.stringValue.length;case 6:return Cs(r.bytesValue).approximateByteSize();case 7:return r.referenceValue.length;case 9:return function(s){return(s.values||[]).reduce((n,i)=>n+Oa(i),0)}(r.arrayValue);case 10:case 11:return function(s){let n=0;return As(s.fields,(i,a)=>{n+=i.length+Oa(a)}),n}(r.mapValue);default:throw de(13486,{value:r})}}function jp(r,e){return{referenceValue:`projects/${r.projectId}/databases/${r.database}/documents/${e.path.canonicalString()}`}}function Gd(r){return!!r&&"integerValue"in r}function ch(r){return!!r&&"arrayValue"in r}function Ap(r){return!!r&&"nullValue"in r}function Pp(r){return!!r&&"doubleValue"in r&&isNaN(Number(r.doubleValue))}function La(r){return!!r&&"mapValue"in r}function xk(r){var e,t;return((t=(((e=r==null?void 0:r.mapValue)===null||e===void 0?void 0:e.fields)||{})[Yy])===null||t===void 0?void 0:t.stringValue)===Xy}function ni(r){if(r.geoPointValue)return{geoPointValue:Object.assign({},r.geoPointValue)};if(r.timestampValue&&typeof r.timestampValue=="object")return{timestampValue:Object.assign({},r.timestampValue)};if(r.mapValue){const e={mapValue:{fields:{}}};return As(r.mapValue.fields,(t,s)=>e.mapValue.fields[t]=ni(s)),e}if(r.arrayValue){const e={arrayValue:{values:[]}};for(let t=0;t<(r.arrayValue.values||[]).length;++t)e.arrayValue.values[t]=ni(r.arrayValue.values[t]);return e}return Object.assign({},r)}function yk(r){return(((r.mapValue||{}).fields||{}).__type__||{}).stringValue===gk}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class At{constructor(e){this.value=e}static empty(){return new At({mapValue:{}})}field(e){if(e.isEmpty())return this.value;{let t=this.value;for(let s=0;s<e.length-1;++s)if(t=(t.mapValue.fields||{})[e.get(s)],!La(t))return null;return t=(t.mapValue.fields||{})[e.lastSegment()],t||null}}set(e,t){this.getFieldsMap(e.popLast())[e.lastSegment()]=ni(t)}setAll(e){let t=ut.emptyPath(),s={},n=[];e.forEach((a,l)=>{if(!t.isImmediateParentOf(l)){const d=this.getFieldsMap(t);this.applyChanges(d,s,n),s={},n=[],t=l.popLast()}a?s[l.lastSegment()]=ni(a):n.push(l.lastSegment())});const i=this.getFieldsMap(t);this.applyChanges(i,s,n)}delete(e){const t=this.field(e.popLast());La(t)&&t.mapValue.fields&&delete t.mapValue.fields[e.lastSegment()]}isEqual(e){return gr(this.value,e.value)}getFieldsMap(e){let t=this.value;t.mapValue.fields||(t.mapValue={fields:{}});for(let s=0;s<e.length;++s){let n=t.mapValue.fields[e.get(s)];La(n)&&n.mapValue.fields||(n={mapValue:{fields:{}}},t.mapValue.fields[e.get(s)]=n),t=n}return t.mapValue.fields}applyChanges(e,t,s){As(t,(n,i)=>e[n]=i);for(const n of s)delete e[n]}clone(){return new At(ni(this.value))}}function Jy(r){const e=[];return As(r.fields,(t,s)=>{const n=new ut([t]);if(La(s)){const i=Jy(s.mapValue).fields;if(i.length===0)e.push(n);else for(const a of i)e.push(n.child(a))}else e.push(n)}),new Ot(e)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class bt{constructor(e,t,s,n,i,a,l){this.key=e,this.documentType=t,this.version=s,this.readTime=n,this.createTime=i,this.data=a,this.documentState=l}static newInvalidDocument(e){return new bt(e,0,fe.min(),fe.min(),fe.min(),At.empty(),0)}static newFoundDocument(e,t,s,n){return new bt(e,1,t,fe.min(),s,n,0)}static newNoDocument(e,t){return new bt(e,2,t,fe.min(),fe.min(),At.empty(),0)}static newUnknownDocument(e,t){return new bt(e,3,t,fe.min(),fe.min(),At.empty(),2)}convertToFoundDocument(e,t){return!this.createTime.isEqual(fe.min())||this.documentType!==2&&this.documentType!==0||(this.createTime=e),this.version=e,this.documentType=1,this.data=t,this.documentState=0,this}convertToNoDocument(e){return this.version=e,this.documentType=2,this.data=At.empty(),this.documentState=0,this}convertToUnknownDocument(e){return this.version=e,this.documentType=3,this.data=At.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=fe.min(),this}setReadTime(e){return this.readTime=e,this}get hasLocalMutations(){return this.documentState===1}get hasCommittedMutations(){return this.documentState===2}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return this.documentType!==0}isFoundDocument(){return this.documentType===1}isNoDocument(){return this.documentType===2}isUnknownDocument(){return this.documentType===3}isEqual(e){return e instanceof bt&&this.key.isEqual(e.key)&&this.version.isEqual(e.version)&&this.documentType===e.documentType&&this.documentState===e.documentState&&this.data.isEqual(e.data)}mutableCopy(){return new bt(this.key,this.documentType,this.version,this.readTime,this.createTime,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {createTime: ${this.createTime}}), {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ol{constructor(e,t){this.position=e,this.inclusive=t}}function Rp(r,e,t){let s=0;for(let n=0;n<r.position.length;n++){const i=e[n],a=r.position[n];if(i.field.isKeyField()?s=ae.comparator(ae.fromName(a.referenceValue),t.key):s=to(a,t.data.field(i.field)),i.dir==="desc"&&(s*=-1),s!==0)break}return s}function Mp(r,e){if(r===null)return e===null;if(e===null||r.inclusive!==e.inclusive||r.position.length!==e.position.length)return!1;for(let t=0;t<r.position.length;t++)if(!gr(r.position[t],e.position[t]))return!1;return!0}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class il{constructor(e,t="asc"){this.field=e,this.dir=t}}function bk(r,e){return r.dir===e.dir&&r.field.isEqual(e.field)}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Zy{}class rt extends Zy{constructor(e,t,s){super(),this.field=e,this.op=t,this.value=s}static create(e,t,s){return e.isKeyField()?t==="in"||t==="not-in"?this.createKeyFieldInFilter(e,t,s):new wk(e,t,s):t==="array-contains"?new Ek(e,s):t==="in"?new Nk(e,s):t==="not-in"?new Ck(e,s):t==="array-contains-any"?new Ik(e,s):new rt(e,t,s)}static createKeyFieldInFilter(e,t,s){return t==="in"?new _k(e,s):new Tk(e,s)}matches(e){const t=e.data.field(this.field);return this.op==="!="?t!==null&&t.nullValue===void 0&&this.matchesComparison(to(t,this.value)):t!==null&&Is(this.value)===Is(t)&&this.matchesComparison(to(t,this.value))}matchesComparison(e){switch(this.op){case"<":return e<0;case"<=":return e<=0;case"==":return e===0;case"!=":return e!==0;case">":return e>0;case">=":return e>=0;default:return de(47266,{operator:this.op})}}isInequality(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}getFlattenedFilters(){return[this]}getFilters(){return[this]}}class Jt extends Zy{constructor(e,t){super(),this.filters=e,this.op=t,this.Te=null}static create(e,t){return new Jt(e,t)}matches(e){return eb(this)?this.filters.find(t=>!t.matches(e))===void 0:this.filters.find(t=>t.matches(e))!==void 0}getFlattenedFilters(){return this.Te!==null||(this.Te=this.filters.reduce((e,t)=>e.concat(t.getFlattenedFilters()),[])),this.Te}getFilters(){return Object.assign([],this.filters)}}function eb(r){return r.op==="and"}function tb(r){return vk(r)&&eb(r)}function vk(r){for(const e of r.filters)if(e instanceof Jt)return!1;return!0}function Kd(r){if(r instanceof rt)return r.field.canonicalString()+r.op.toString()+ro(r.value);if(tb(r))return r.filters.map(e=>Kd(e)).join(",");{const e=r.filters.map(t=>Kd(t)).join(",");return`${r.op}(${e})`}}function rb(r,e){return r instanceof rt?function(s,n){return n instanceof rt&&s.op===n.op&&s.field.isEqual(n.field)&&gr(s.value,n.value)}(r,e):r instanceof Jt?function(s,n){return n instanceof Jt&&s.op===n.op&&s.filters.length===n.filters.length?s.filters.reduce((i,a,l)=>i&&rb(a,n.filters[l]),!0):!1}(r,e):void de(19439)}function sb(r){return r instanceof rt?function(t){return`${t.field.canonicalString()} ${t.op} ${ro(t.value)}`}(r):r instanceof Jt?function(t){return t.op.toString()+" {"+t.getFilters().map(sb).join(" ,")+"}"}(r):"Filter"}class wk extends rt{constructor(e,t,s){super(e,t,s),this.key=ae.fromName(s.referenceValue)}matches(e){const t=ae.comparator(e.key,this.key);return this.matchesComparison(t)}}class _k extends rt{constructor(e,t){super(e,"in",t),this.keys=nb("in",t)}matches(e){return this.keys.some(t=>t.isEqual(e.key))}}class Tk extends rt{constructor(e,t){super(e,"not-in",t),this.keys=nb("not-in",t)}matches(e){return!this.keys.some(t=>t.isEqual(e.key))}}function nb(r,e){var t;return(((t=e.arrayValue)===null||t===void 0?void 0:t.values)||[]).map(s=>ae.fromName(s.referenceValue))}class Ek extends rt{constructor(e,t){super(e,"array-contains",t)}matches(e){const t=e.data.field(this.field);return ch(t)&&bi(t.arrayValue,this.value)}}class Nk extends rt{constructor(e,t){super(e,"in",t)}matches(e){const t=e.data.field(this.field);return t!==null&&bi(this.value.arrayValue,t)}}class Ck extends rt{constructor(e,t){super(e,"not-in",t)}matches(e){if(bi(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;const t=e.data.field(this.field);return t!==null&&t.nullValue===void 0&&!bi(this.value.arrayValue,t)}}class Ik extends rt{constructor(e,t){super(e,"array-contains-any",t)}matches(e){const t=e.data.field(this.field);return!(!ch(t)||!t.arrayValue.values)&&t.arrayValue.values.some(s=>bi(this.value.arrayValue,s))}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Sk{constructor(e,t=null,s=[],n=[],i=null,a=null,l=null){this.path=e,this.collectionGroup=t,this.orderBy=s,this.filters=n,this.limit=i,this.startAt=a,this.endAt=l,this.Ie=null}}function Dp(r,e=null,t=[],s=[],n=null,i=null,a=null){return new Sk(r,e,t,s,n,i,a)}function dh(r){const e=pe(r);if(e.Ie===null){let t=e.path.canonicalString();e.collectionGroup!==null&&(t+="|cg:"+e.collectionGroup),t+="|f:",t+=e.filters.map(s=>Kd(s)).join(","),t+="|ob:",t+=e.orderBy.map(s=>function(i){return i.field.canonicalString()+i.dir}(s)).join(","),Hl(e.limit)||(t+="|l:",t+=e.limit),e.startAt&&(t+="|lb:",t+=e.startAt.inclusive?"b:":"a:",t+=e.startAt.position.map(s=>ro(s)).join(",")),e.endAt&&(t+="|ub:",t+=e.endAt.inclusive?"a:":"b:",t+=e.endAt.position.map(s=>ro(s)).join(",")),e.Ie=t}return e.Ie}function uh(r,e){if(r.limit!==e.limit||r.orderBy.length!==e.orderBy.length)return!1;for(let t=0;t<r.orderBy.length;t++)if(!bk(r.orderBy[t],e.orderBy[t]))return!1;if(r.filters.length!==e.filters.length)return!1;for(let t=0;t<r.filters.length;t++)if(!rb(r.filters[t],e.filters[t]))return!1;return r.collectionGroup===e.collectionGroup&&!!r.path.isEqual(e.path)&&!!Mp(r.startAt,e.startAt)&&Mp(r.endAt,e.endAt)}function Qd(r){return ae.isDocumentKey(r.path)&&r.collectionGroup===null&&r.filters.length===0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ui{constructor(e,t=null,s=[],n=[],i=null,a="F",l=null,d=null){this.path=e,this.collectionGroup=t,this.explicitOrderBy=s,this.filters=n,this.limit=i,this.limitType=a,this.startAt=l,this.endAt=d,this.Ee=null,this.de=null,this.Ae=null,this.startAt,this.endAt}}function kk(r,e,t,s,n,i,a,l){return new Ui(r,e,t,s,n,i,a,l)}function hh(r){return new Ui(r)}function Op(r){return r.filters.length===0&&r.limit===null&&r.startAt==null&&r.endAt==null&&(r.explicitOrderBy.length===0||r.explicitOrderBy.length===1&&r.explicitOrderBy[0].field.isKeyField())}function ob(r){return r.collectionGroup!==null}function oi(r){const e=pe(r);if(e.Ee===null){e.Ee=[];const t=new Set;for(const i of e.explicitOrderBy)e.Ee.push(i),t.add(i.field.canonicalString());const s=e.explicitOrderBy.length>0?e.explicitOrderBy[e.explicitOrderBy.length-1].dir:"asc";(function(a){let l=new ot(ut.comparator);return a.filters.forEach(d=>{d.getFlattenedFilters().forEach(u=>{u.isInequality()&&(l=l.add(u.field))})}),l})(e).forEach(i=>{t.has(i.canonicalString())||i.isKeyField()||e.Ee.push(new il(i,s))}),t.has(ut.keyField().canonicalString())||e.Ee.push(new il(ut.keyField(),s))}return e.Ee}function dr(r){const e=pe(r);return e.de||(e.de=jk(e,oi(r))),e.de}function jk(r,e){if(r.limitType==="F")return Dp(r.path,r.collectionGroup,e,r.filters,r.limit,r.startAt,r.endAt);{e=e.map(n=>{const i=n.dir==="desc"?"asc":"desc";return new il(n.field,i)});const t=r.endAt?new ol(r.endAt.position,r.endAt.inclusive):null,s=r.startAt?new ol(r.startAt.position,r.startAt.inclusive):null;return Dp(r.path,r.collectionGroup,e,r.filters,r.limit,t,s)}}function Yd(r,e){const t=r.filters.concat([e]);return new Ui(r.path,r.collectionGroup,r.explicitOrderBy.slice(),t,r.limit,r.limitType,r.startAt,r.endAt)}function Xd(r,e,t){return new Ui(r.path,r.collectionGroup,r.explicitOrderBy.slice(),r.filters.slice(),e,t,r.startAt,r.endAt)}function Wl(r,e){return uh(dr(r),dr(e))&&r.limitType===e.limitType}function ib(r){return`${dh(dr(r))}|lt:${r.limitType}`}function En(r){return`Query(target=${function(t){let s=t.path.canonicalString();return t.collectionGroup!==null&&(s+=" collectionGroup="+t.collectionGroup),t.filters.length>0&&(s+=`, filters: [${t.filters.map(n=>sb(n)).join(", ")}]`),Hl(t.limit)||(s+=", limit: "+t.limit),t.orderBy.length>0&&(s+=`, orderBy: [${t.orderBy.map(n=>function(a){return`${a.field.canonicalString()} (${a.dir})`}(n)).join(", ")}]`),t.startAt&&(s+=", startAt: ",s+=t.startAt.inclusive?"b:":"a:",s+=t.startAt.position.map(n=>ro(n)).join(",")),t.endAt&&(s+=", endAt: ",s+=t.endAt.inclusive?"a:":"b:",s+=t.endAt.position.map(n=>ro(n)).join(",")),`Target(${s})`}(dr(r))}; limitType=${r.limitType})`}function Gl(r,e){return e.isFoundDocument()&&function(s,n){const i=n.key.path;return s.collectionGroup!==null?n.key.hasCollectionId(s.collectionGroup)&&s.path.isPrefixOf(i):ae.isDocumentKey(s.path)?s.path.isEqual(i):s.path.isImmediateParentOf(i)}(r,e)&&function(s,n){for(const i of oi(s))if(!i.field.isKeyField()&&n.data.field(i.field)===null)return!1;return!0}(r,e)&&function(s,n){for(const i of s.filters)if(!i.matches(n))return!1;return!0}(r,e)&&function(s,n){return!(s.startAt&&!function(a,l,d){const u=Rp(a,l,d);return a.inclusive?u<=0:u<0}(s.startAt,oi(s),n)||s.endAt&&!function(a,l,d){const u=Rp(a,l,d);return a.inclusive?u>=0:u>0}(s.endAt,oi(s),n))}(r,e)}function Ak(r){return r.collectionGroup||(r.path.length%2==1?r.path.lastSegment():r.path.get(r.path.length-2))}function ab(r){return(e,t)=>{let s=!1;for(const n of oi(r)){const i=Pk(n,e,t);if(i!==0)return i;s=s||n.field.isKeyField()}return 0}}function Pk(r,e,t){const s=r.field.isKeyField()?ae.comparator(e.key,t.key):function(i,a,l){const d=a.data.field(i),u=l.data.field(i);return d!==null&&u!==null?to(d,u):de(42886)}(r.field,e,t);switch(r.dir){case"asc":return s;case"desc":return-1*s;default:return de(19790,{direction:r.dir})}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class pn{constructor(e,t){this.mapKeyFn=e,this.equalsFn=t,this.inner={},this.innerSize=0}get(e){const t=this.mapKeyFn(e),s=this.inner[t];if(s!==void 0){for(const[n,i]of s)if(this.equalsFn(n,e))return i}}has(e){return this.get(e)!==void 0}set(e,t){const s=this.mapKeyFn(e),n=this.inner[s];if(n===void 0)return this.inner[s]=[[e,t]],void this.innerSize++;for(let i=0;i<n.length;i++)if(this.equalsFn(n[i][0],e))return void(n[i]=[e,t]);n.push([e,t]),this.innerSize++}delete(e){const t=this.mapKeyFn(e),s=this.inner[t];if(s===void 0)return!1;for(let n=0;n<s.length;n++)if(this.equalsFn(s[n][0],e))return s.length===1?delete this.inner[t]:s.splice(n,1),this.innerSize--,!0;return!1}forEach(e){As(this.inner,(t,s)=>{for(const[n,i]of s)e(n,i)})}isEmpty(){return Hy(this.inner)}size(){return this.innerSize}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Rk=new Ge(ae.comparator);function Vr(){return Rk}const lb=new Ge(ae.comparator);function Wo(...r){let e=lb;for(const t of r)e=e.insert(t.key,t);return e}function cb(r){let e=lb;return r.forEach((t,s)=>e=e.insert(t,s.overlayedDocument)),e}function zs(){return ii()}function db(){return ii()}function ii(){return new pn(r=>r.toString(),(r,e)=>r.isEqual(e))}const Mk=new Ge(ae.comparator),Dk=new ot(ae.comparator);function Ne(...r){let e=Dk;for(const t of r)e=e.add(t);return e}const Ok=new ot(Te);function Lk(){return Ok}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function fh(r,e){if(r.useProto3Json){if(isNaN(e))return{doubleValue:"NaN"};if(e===1/0)return{doubleValue:"Infinity"};if(e===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:rl(e)?"-0":e}}function ub(r){return{integerValue:""+r}}function Vk(r,e){return uk(e)?ub(e):fh(r,e)}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Kl{constructor(){this._=void 0}}function Fk(r,e,t){return r instanceof al?function(n,i){const a={fields:{[Gy]:{stringValue:Wy},[Qy]:{timestampValue:{seconds:n.seconds,nanos:n.nanoseconds}}}};return i&&lh(i)&&(i=ql(i)),i&&(a.fields[Ky]=i),{mapValue:a}}(t,e):r instanceof vi?fb(r,e):r instanceof wi?mb(r,e):function(n,i){const a=hb(n,i),l=Lp(a)+Lp(n.Re);return Gd(a)&&Gd(n.Re)?ub(l):fh(n.serializer,l)}(r,e)}function Uk(r,e,t){return r instanceof vi?fb(r,e):r instanceof wi?mb(r,e):t}function hb(r,e){return r instanceof ll?function(s){return Gd(s)||function(i){return!!i&&"doubleValue"in i}(s)}(e)?e:{integerValue:0}:null}class al extends Kl{}class vi extends Kl{constructor(e){super(),this.elements=e}}function fb(r,e){const t=pb(e);for(const s of r.elements)t.some(n=>gr(n,s))||t.push(s);return{arrayValue:{values:t}}}class wi extends Kl{constructor(e){super(),this.elements=e}}function mb(r,e){let t=pb(e);for(const s of r.elements)t=t.filter(n=>!gr(n,s));return{arrayValue:{values:t}}}class ll extends Kl{constructor(e,t){super(),this.serializer=e,this.Re=t}}function Lp(r){return Ze(r.integerValue||r.doubleValue)}function pb(r){return ch(r)&&r.arrayValue.values?r.arrayValue.values.slice():[]}function $k(r,e){return r.field.isEqual(e.field)&&function(s,n){return s instanceof vi&&n instanceof vi||s instanceof wi&&n instanceof wi?eo(s.elements,n.elements,gr):s instanceof ll&&n instanceof ll?gr(s.Re,n.Re):s instanceof al&&n instanceof al}(r.transform,e.transform)}class Bk{constructor(e,t){this.version=e,this.transformResults=t}}class ur{constructor(e,t){this.updateTime=e,this.exists=t}static none(){return new ur}static exists(e){return new ur(void 0,e)}static updateTime(e){return new ur(e)}get isNone(){return this.updateTime===void 0&&this.exists===void 0}isEqual(e){return this.exists===e.exists&&(this.updateTime?!!e.updateTime&&this.updateTime.isEqual(e.updateTime):!e.updateTime)}}function Va(r,e){return r.updateTime!==void 0?e.isFoundDocument()&&e.version.isEqual(r.updateTime):r.exists===void 0||r.exists===e.isFoundDocument()}class Ql{}function gb(r,e){if(!r.hasLocalMutations||e&&e.fields.length===0)return null;if(e===null)return r.isNoDocument()?new yb(r.key,ur.none()):new $i(r.key,r.data,ur.none());{const t=r.data,s=At.empty();let n=new ot(ut.comparator);for(let i of e.fields)if(!n.has(i)){let a=t.field(i);a===null&&i.length>1&&(i=i.popLast(),a=t.field(i)),a===null?s.delete(i):s.set(i,a),n=n.add(i)}return new Ps(r.key,s,new Ot(n.toArray()),ur.none())}}function zk(r,e,t){r instanceof $i?function(n,i,a){const l=n.value.clone(),d=Fp(n.fieldTransforms,i,a.transformResults);l.setAll(d),i.convertToFoundDocument(a.version,l).setHasCommittedMutations()}(r,e,t):r instanceof Ps?function(n,i,a){if(!Va(n.precondition,i))return void i.convertToUnknownDocument(a.version);const l=Fp(n.fieldTransforms,i,a.transformResults),d=i.data;d.setAll(xb(n)),d.setAll(l),i.convertToFoundDocument(a.version,d).setHasCommittedMutations()}(r,e,t):function(n,i,a){i.convertToNoDocument(a.version).setHasCommittedMutations()}(0,e,t)}function ai(r,e,t,s){return r instanceof $i?function(i,a,l,d){if(!Va(i.precondition,a))return l;const u=i.value.clone(),h=Up(i.fieldTransforms,d,a);return u.setAll(h),a.convertToFoundDocument(a.version,u).setHasLocalMutations(),null}(r,e,t,s):r instanceof Ps?function(i,a,l,d){if(!Va(i.precondition,a))return l;const u=Up(i.fieldTransforms,d,a),h=a.data;return h.setAll(xb(i)),h.setAll(u),a.convertToFoundDocument(a.version,h).setHasLocalMutations(),l===null?null:l.unionWith(i.fieldMask.fields).unionWith(i.fieldTransforms.map(m=>m.field))}(r,e,t,s):function(i,a,l){return Va(i.precondition,a)?(a.convertToNoDocument(a.version).setHasLocalMutations(),null):l}(r,e,t)}function Hk(r,e){let t=null;for(const s of r.fieldTransforms){const n=e.data.field(s.field),i=hb(s.transform,n||null);i!=null&&(t===null&&(t=At.empty()),t.set(s.field,i))}return t||null}function Vp(r,e){return r.type===e.type&&!!r.key.isEqual(e.key)&&!!r.precondition.isEqual(e.precondition)&&!!function(s,n){return s===void 0&&n===void 0||!(!s||!n)&&eo(s,n,(i,a)=>$k(i,a))}(r.fieldTransforms,e.fieldTransforms)&&(r.type===0?r.value.isEqual(e.value):r.type!==1||r.data.isEqual(e.data)&&r.fieldMask.isEqual(e.fieldMask))}class $i extends Ql{constructor(e,t,s,n=[]){super(),this.key=e,this.value=t,this.precondition=s,this.fieldTransforms=n,this.type=0}getFieldMask(){return null}}class Ps extends Ql{constructor(e,t,s,n,i=[]){super(),this.key=e,this.data=t,this.fieldMask=s,this.precondition=n,this.fieldTransforms=i,this.type=1}getFieldMask(){return this.fieldMask}}function xb(r){const e=new Map;return r.fieldMask.fields.forEach(t=>{if(!t.isEmpty()){const s=r.data.field(t);e.set(t,s)}}),e}function Fp(r,e,t){const s=new Map;Oe(r.length===t.length,32656,{Ve:t.length,me:r.length});for(let n=0;n<t.length;n++){const i=r[n],a=i.transform,l=e.data.field(i.field);s.set(i.field,Uk(a,l,t[n]))}return s}function Up(r,e,t){const s=new Map;for(const n of r){const i=n.transform,a=t.data.field(n.field);s.set(n.field,Fk(i,a,e))}return s}class yb extends Ql{constructor(e,t){super(),this.key=e,this.precondition=t,this.type=2,this.fieldTransforms=[]}getFieldMask(){return null}}class qk extends Ql{constructor(e,t){super(),this.key=e,this.precondition=t,this.type=3,this.fieldTransforms=[]}getFieldMask(){return null}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Wk{constructor(e,t,s,n){this.batchId=e,this.localWriteTime=t,this.baseMutations=s,this.mutations=n}applyToRemoteDocument(e,t){const s=t.mutationResults;for(let n=0;n<this.mutations.length;n++){const i=this.mutations[n];i.key.isEqual(e.key)&&zk(i,e,s[n])}}applyToLocalView(e,t){for(const s of this.baseMutations)s.key.isEqual(e.key)&&(t=ai(s,e,t,this.localWriteTime));for(const s of this.mutations)s.key.isEqual(e.key)&&(t=ai(s,e,t,this.localWriteTime));return t}applyToLocalDocumentSet(e,t){const s=db();return this.mutations.forEach(n=>{const i=e.get(n.key),a=i.overlayedDocument;let l=this.applyToLocalView(a,i.mutatedFields);l=t.has(n.key)?null:l;const d=gb(a,l);d!==null&&s.set(n.key,d),a.isValidDocument()||a.convertToNoDocument(fe.min())}),s}keys(){return this.mutations.reduce((e,t)=>e.add(t.key),Ne())}isEqual(e){return this.batchId===e.batchId&&eo(this.mutations,e.mutations,(t,s)=>Vp(t,s))&&eo(this.baseMutations,e.baseMutations,(t,s)=>Vp(t,s))}}class mh{constructor(e,t,s,n){this.batch=e,this.commitVersion=t,this.mutationResults=s,this.docVersions=n}static from(e,t,s){Oe(e.mutations.length===s.length,58842,{fe:e.mutations.length,ge:s.length});let n=function(){return Mk}();const i=e.mutations;for(let a=0;a<i.length;a++)n=n.insert(i[a].key,s[a].version);return new mh(e,t,s,n)}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Gk{constructor(e,t){this.largestBatchId=e,this.mutation=t}getKey(){return this.mutation.key}isEqual(e){return e!==null&&this.mutation===e.mutation}toString(){return`Overlay{
      largestBatchId: ${this.largestBatchId},
      mutation: ${this.mutation.toString()}
    }`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Kk{constructor(e,t){this.count=e,this.unchangedNames=t}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var et,je;function Qk(r){switch(r){case z.OK:return de(64938);case z.CANCELLED:case z.UNKNOWN:case z.DEADLINE_EXCEEDED:case z.RESOURCE_EXHAUSTED:case z.INTERNAL:case z.UNAVAILABLE:case z.UNAUTHENTICATED:return!1;case z.INVALID_ARGUMENT:case z.NOT_FOUND:case z.ALREADY_EXISTS:case z.PERMISSION_DENIED:case z.FAILED_PRECONDITION:case z.ABORTED:case z.OUT_OF_RANGE:case z.UNIMPLEMENTED:case z.DATA_LOSS:return!0;default:return de(15467,{code:r})}}function bb(r){if(r===void 0)return Lr("GRPC error has no .code"),z.UNKNOWN;switch(r){case et.OK:return z.OK;case et.CANCELLED:return z.CANCELLED;case et.UNKNOWN:return z.UNKNOWN;case et.DEADLINE_EXCEEDED:return z.DEADLINE_EXCEEDED;case et.RESOURCE_EXHAUSTED:return z.RESOURCE_EXHAUSTED;case et.INTERNAL:return z.INTERNAL;case et.UNAVAILABLE:return z.UNAVAILABLE;case et.UNAUTHENTICATED:return z.UNAUTHENTICATED;case et.INVALID_ARGUMENT:return z.INVALID_ARGUMENT;case et.NOT_FOUND:return z.NOT_FOUND;case et.ALREADY_EXISTS:return z.ALREADY_EXISTS;case et.PERMISSION_DENIED:return z.PERMISSION_DENIED;case et.FAILED_PRECONDITION:return z.FAILED_PRECONDITION;case et.ABORTED:return z.ABORTED;case et.OUT_OF_RANGE:return z.OUT_OF_RANGE;case et.UNIMPLEMENTED:return z.UNIMPLEMENTED;case et.DATA_LOSS:return z.DATA_LOSS;default:return de(39323,{code:r})}}(je=et||(et={}))[je.OK=0]="OK",je[je.CANCELLED=1]="CANCELLED",je[je.UNKNOWN=2]="UNKNOWN",je[je.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",je[je.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",je[je.NOT_FOUND=5]="NOT_FOUND",je[je.ALREADY_EXISTS=6]="ALREADY_EXISTS",je[je.PERMISSION_DENIED=7]="PERMISSION_DENIED",je[je.UNAUTHENTICATED=16]="UNAUTHENTICATED",je[je.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",je[je.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",je[je.ABORTED=10]="ABORTED",je[je.OUT_OF_RANGE=11]="OUT_OF_RANGE",je[je.UNIMPLEMENTED=12]="UNIMPLEMENTED",je[je.INTERNAL=13]="INTERNAL",je[je.UNAVAILABLE=14]="UNAVAILABLE",je[je.DATA_LOSS=15]="DATA_LOSS";/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Yk=new vs([4294967295,4294967295],0);function $p(r){const e=$y().encode(r),t=new Ry;return t.update(e),new Uint8Array(t.digest())}function Bp(r){const e=new DataView(r.buffer),t=e.getUint32(0,!0),s=e.getUint32(4,!0),n=e.getUint32(8,!0),i=e.getUint32(12,!0);return[new vs([t,s],0),new vs([n,i],0)]}class ph{constructor(e,t,s){if(this.bitmap=e,this.padding=t,this.hashCount=s,t<0||t>=8)throw new Go(`Invalid padding: ${t}`);if(s<0)throw new Go(`Invalid hash count: ${s}`);if(e.length>0&&this.hashCount===0)throw new Go(`Invalid hash count: ${s}`);if(e.length===0&&t!==0)throw new Go(`Invalid padding when bitmap length is 0: ${t}`);this.pe=8*e.length-t,this.ye=vs.fromNumber(this.pe)}we(e,t,s){let n=e.add(t.multiply(vs.fromNumber(s)));return n.compare(Yk)===1&&(n=new vs([n.getBits(0),n.getBits(1)],0)),n.modulo(this.ye).toNumber()}be(e){return!!(this.bitmap[Math.floor(e/8)]&1<<e%8)}mightContain(e){if(this.pe===0)return!1;const t=$p(e),[s,n]=Bp(t);for(let i=0;i<this.hashCount;i++){const a=this.we(s,n,i);if(!this.be(a))return!1}return!0}static create(e,t,s){const n=e%8==0?0:8-e%8,i=new Uint8Array(Math.ceil(e/8)),a=new ph(i,n,t);return s.forEach(l=>a.insert(l)),a}insert(e){if(this.pe===0)return;const t=$p(e),[s,n]=Bp(t);for(let i=0;i<this.hashCount;i++){const a=this.we(s,n,i);this.Se(a)}}Se(e){const t=Math.floor(e/8),s=e%8;this.bitmap[t]|=1<<s}}class Go extends Error{constructor(){super(...arguments),this.name="BloomFilterError"}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Yl{constructor(e,t,s,n,i){this.snapshotVersion=e,this.targetChanges=t,this.targetMismatches=s,this.documentUpdates=n,this.resolvedLimboDocuments=i}static createSynthesizedRemoteEventForCurrentChange(e,t,s){const n=new Map;return n.set(e,Bi.createSynthesizedTargetChangeForCurrentChange(e,t,s)),new Yl(fe.min(),n,new Ge(Te),Vr(),Ne())}}class Bi{constructor(e,t,s,n,i){this.resumeToken=e,this.current=t,this.addedDocuments=s,this.modifiedDocuments=n,this.removedDocuments=i}static createSynthesizedTargetChangeForCurrentChange(e,t,s){return new Bi(s,t,Ne(),Ne(),Ne())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Fa{constructor(e,t,s,n){this.De=e,this.removedTargetIds=t,this.key=s,this.ve=n}}class vb{constructor(e,t){this.targetId=e,this.Ce=t}}class wb{constructor(e,t,s=ht.EMPTY_BYTE_STRING,n=null){this.state=e,this.targetIds=t,this.resumeToken=s,this.cause=n}}class zp{constructor(){this.Fe=0,this.Me=Hp(),this.xe=ht.EMPTY_BYTE_STRING,this.Oe=!1,this.Ne=!0}get current(){return this.Oe}get resumeToken(){return this.xe}get Be(){return this.Fe!==0}get Le(){return this.Ne}ke(e){e.approximateByteSize()>0&&(this.Ne=!0,this.xe=e)}qe(){let e=Ne(),t=Ne(),s=Ne();return this.Me.forEach((n,i)=>{switch(i){case 0:e=e.add(n);break;case 2:t=t.add(n);break;case 1:s=s.add(n);break;default:de(38017,{changeType:i})}}),new Bi(this.xe,this.Oe,e,t,s)}Qe(){this.Ne=!1,this.Me=Hp()}$e(e,t){this.Ne=!0,this.Me=this.Me.insert(e,t)}Ue(e){this.Ne=!0,this.Me=this.Me.remove(e)}Ke(){this.Fe+=1}We(){this.Fe-=1,Oe(this.Fe>=0,3241,{Fe:this.Fe})}Ge(){this.Ne=!0,this.Oe=!0}}class Xk{constructor(e){this.ze=e,this.je=new Map,this.He=Vr(),this.Je=Ta(),this.Ye=Ta(),this.Ze=new Ge(Te)}Xe(e){for(const t of e.De)e.ve&&e.ve.isFoundDocument()?this.et(t,e.ve):this.tt(t,e.key,e.ve);for(const t of e.removedTargetIds)this.tt(t,e.key,e.ve)}nt(e){this.forEachTarget(e,t=>{const s=this.rt(t);switch(e.state){case 0:this.it(t)&&s.ke(e.resumeToken);break;case 1:s.We(),s.Be||s.Qe(),s.ke(e.resumeToken);break;case 2:s.We(),s.Be||this.removeTarget(t);break;case 3:this.it(t)&&(s.Ge(),s.ke(e.resumeToken));break;case 4:this.it(t)&&(this.st(t),s.ke(e.resumeToken));break;default:de(56790,{state:e.state})}})}forEachTarget(e,t){e.targetIds.length>0?e.targetIds.forEach(t):this.je.forEach((s,n)=>{this.it(n)&&t(n)})}ot(e){const t=e.targetId,s=e.Ce.count,n=this._t(t);if(n){const i=n.target;if(Qd(i))if(s===0){const a=new ae(i.path);this.tt(t,a,bt.newNoDocument(a,fe.min()))}else Oe(s===1,20013,{expectedCount:s});else{const a=this.ut(t);if(a!==s){const l=this.ct(e),d=l?this.lt(l,e,a):1;if(d!==0){this.st(t);const u=d===2?"TargetPurposeExistenceFilterMismatchBloom":"TargetPurposeExistenceFilterMismatch";this.Ze=this.Ze.insert(t,u)}}}}}ct(e){const t=e.Ce.unchangedNames;if(!t||!t.bits)return null;const{bits:{bitmap:s="",padding:n=0},hashCount:i=0}=t;let a,l;try{a=Cs(s).toUint8Array()}catch(d){if(d instanceof qy)return Zn("Decoding the base64 bloom filter in existence filter failed ("+d.message+"); ignoring the bloom filter and falling back to full re-query."),null;throw d}try{l=new ph(a,n,i)}catch(d){return Zn(d instanceof Go?"BloomFilter error: ":"Applying bloom filter failed: ",d),null}return l.pe===0?null:l}lt(e,t,s){return t.Ce.count===s-this.Tt(e,t.targetId)?0:2}Tt(e,t){const s=this.ze.getRemoteKeysForTarget(t);let n=0;return s.forEach(i=>{const a=this.ze.Pt(),l=`projects/${a.projectId}/databases/${a.database}/documents/${i.path.canonicalString()}`;e.mightContain(l)||(this.tt(t,i,null),n++)}),n}It(e){const t=new Map;this.je.forEach((i,a)=>{const l=this._t(a);if(l){if(i.current&&Qd(l.target)){const d=new ae(l.target.path);this.Et(d).has(a)||this.dt(a,d)||this.tt(a,d,bt.newNoDocument(d,e))}i.Le&&(t.set(a,i.qe()),i.Qe())}});let s=Ne();this.Ye.forEach((i,a)=>{let l=!0;a.forEachWhile(d=>{const u=this._t(d);return!u||u.purpose==="TargetPurposeLimboResolution"||(l=!1,!1)}),l&&(s=s.add(i))}),this.He.forEach((i,a)=>a.setReadTime(e));const n=new Yl(e,t,this.Ze,this.He,s);return this.He=Vr(),this.Je=Ta(),this.Ye=Ta(),this.Ze=new Ge(Te),n}et(e,t){if(!this.it(e))return;const s=this.dt(e,t.key)?2:0;this.rt(e).$e(t.key,s),this.He=this.He.insert(t.key,t),this.Je=this.Je.insert(t.key,this.Et(t.key).add(e)),this.Ye=this.Ye.insert(t.key,this.At(t.key).add(e))}tt(e,t,s){if(!this.it(e))return;const n=this.rt(e);this.dt(e,t)?n.$e(t,1):n.Ue(t),this.Ye=this.Ye.insert(t,this.At(t).delete(e)),this.Ye=this.Ye.insert(t,this.At(t).add(e)),s&&(this.He=this.He.insert(t,s))}removeTarget(e){this.je.delete(e)}ut(e){const t=this.rt(e).qe();return this.ze.getRemoteKeysForTarget(e).size+t.addedDocuments.size-t.removedDocuments.size}Ke(e){this.rt(e).Ke()}rt(e){let t=this.je.get(e);return t||(t=new zp,this.je.set(e,t)),t}At(e){let t=this.Ye.get(e);return t||(t=new ot(Te),this.Ye=this.Ye.insert(e,t)),t}Et(e){let t=this.Je.get(e);return t||(t=new ot(Te),this.Je=this.Je.insert(e,t)),t}it(e){const t=this._t(e)!==null;return t||J("WatchChangeAggregator","Detected inactive target",e),t}_t(e){const t=this.je.get(e);return t&&t.Be?null:this.ze.Rt(e)}st(e){this.je.set(e,new zp),this.ze.getRemoteKeysForTarget(e).forEach(t=>{this.tt(e,t,null)})}dt(e,t){return this.ze.getRemoteKeysForTarget(e).has(t)}}function Ta(){return new Ge(ae.comparator)}function Hp(){return new Ge(ae.comparator)}const Jk={asc:"ASCENDING",desc:"DESCENDING"},Zk={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"},ej={and:"AND",or:"OR"};class tj{constructor(e,t){this.databaseId=e,this.useProto3Json=t}}function Jd(r,e){return r.useProto3Json||Hl(e)?e:{value:e}}function cl(r,e){return r.useProto3Json?`${new Date(1e3*e.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+e.nanoseconds).slice(-9)}Z`:{seconds:""+e.seconds,nanos:e.nanoseconds}}function _b(r,e){return r.useProto3Json?e.toBase64():e.toUint8Array()}function rj(r,e){return cl(r,e.toTimestamp())}function hr(r){return Oe(!!r,49232),fe.fromTimestamp(function(t){const s=Ns(t);return new nt(s.seconds,s.nanos)}(r))}function gh(r,e){return Zd(r,e).canonicalString()}function Zd(r,e){const t=function(n){return new qe(["projects",n.projectId,"databases",n.database])}(r).child("documents");return e===void 0?t:t.child(e)}function Tb(r){const e=qe.fromString(r);return Oe(Sb(e),10190,{key:e.toString()}),e}function eu(r,e){return gh(r.databaseId,e.path)}function nd(r,e){const t=Tb(e);if(t.get(1)!==r.databaseId.projectId)throw new te(z.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+t.get(1)+" vs "+r.databaseId.projectId);if(t.get(3)!==r.databaseId.database)throw new te(z.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+t.get(3)+" vs "+r.databaseId.database);return new ae(Nb(t))}function Eb(r,e){return gh(r.databaseId,e)}function sj(r){const e=Tb(r);return e.length===4?qe.emptyPath():Nb(e)}function tu(r){return new qe(["projects",r.databaseId.projectId,"databases",r.databaseId.database]).canonicalString()}function Nb(r){return Oe(r.length>4&&r.get(4)==="documents",29091,{key:r.toString()}),r.popFirst(5)}function qp(r,e,t){return{name:eu(r,e),fields:t.value.mapValue.fields}}function nj(r,e){let t;if("targetChange"in e){e.targetChange;const s=function(u){return u==="NO_CHANGE"?0:u==="ADD"?1:u==="REMOVE"?2:u==="CURRENT"?3:u==="RESET"?4:de(39313,{state:u})}(e.targetChange.targetChangeType||"NO_CHANGE"),n=e.targetChange.targetIds||[],i=function(u,h){return u.useProto3Json?(Oe(h===void 0||typeof h=="string",58123),ht.fromBase64String(h||"")):(Oe(h===void 0||h instanceof Buffer||h instanceof Uint8Array,16193),ht.fromUint8Array(h||new Uint8Array))}(r,e.targetChange.resumeToken),a=e.targetChange.cause,l=a&&function(u){const h=u.code===void 0?z.UNKNOWN:bb(u.code);return new te(h,u.message||"")}(a);t=new wb(s,n,i,l||null)}else if("documentChange"in e){e.documentChange;const s=e.documentChange;s.document,s.document.name,s.document.updateTime;const n=nd(r,s.document.name),i=hr(s.document.updateTime),a=s.document.createTime?hr(s.document.createTime):fe.min(),l=new At({mapValue:{fields:s.document.fields}}),d=bt.newFoundDocument(n,i,a,l),u=s.targetIds||[],h=s.removedTargetIds||[];t=new Fa(u,h,d.key,d)}else if("documentDelete"in e){e.documentDelete;const s=e.documentDelete;s.document;const n=nd(r,s.document),i=s.readTime?hr(s.readTime):fe.min(),a=bt.newNoDocument(n,i),l=s.removedTargetIds||[];t=new Fa([],l,a.key,a)}else if("documentRemove"in e){e.documentRemove;const s=e.documentRemove;s.document;const n=nd(r,s.document),i=s.removedTargetIds||[];t=new Fa([],i,n,null)}else{if(!("filter"in e))return de(11601,{Vt:e});{e.filter;const s=e.filter;s.targetId;const{count:n=0,unchangedNames:i}=s,a=new Kk(n,i),l=s.targetId;t=new vb(l,a)}}return t}function oj(r,e){let t;if(e instanceof $i)t={update:qp(r,e.key,e.value)};else if(e instanceof yb)t={delete:eu(r,e.key)};else if(e instanceof Ps)t={update:qp(r,e.key,e.data),updateMask:mj(e.fieldMask)};else{if(!(e instanceof qk))return de(16599,{ft:e.type});t={verify:eu(r,e.key)}}return e.fieldTransforms.length>0&&(t.updateTransforms=e.fieldTransforms.map(s=>function(i,a){const l=a.transform;if(l instanceof al)return{fieldPath:a.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(l instanceof vi)return{fieldPath:a.field.canonicalString(),appendMissingElements:{values:l.elements}};if(l instanceof wi)return{fieldPath:a.field.canonicalString(),removeAllFromArray:{values:l.elements}};if(l instanceof ll)return{fieldPath:a.field.canonicalString(),increment:l.Re};throw de(20930,{transform:a.transform})}(0,s))),e.precondition.isNone||(t.currentDocument=function(n,i){return i.updateTime!==void 0?{updateTime:rj(n,i.updateTime)}:i.exists!==void 0?{exists:i.exists}:de(27497)}(r,e.precondition)),t}function ij(r,e){return r&&r.length>0?(Oe(e!==void 0,14353),r.map(t=>function(n,i){let a=n.updateTime?hr(n.updateTime):hr(i);return a.isEqual(fe.min())&&(a=hr(i)),new Bk(a,n.transformResults||[])}(t,e))):[]}function aj(r,e){return{documents:[Eb(r,e.path)]}}function lj(r,e){const t={structuredQuery:{}},s=e.path;let n;e.collectionGroup!==null?(n=s,t.structuredQuery.from=[{collectionId:e.collectionGroup,allDescendants:!0}]):(n=s.popLast(),t.structuredQuery.from=[{collectionId:s.lastSegment()}]),t.parent=Eb(r,n);const i=function(u){if(u.length!==0)return Ib(Jt.create(u,"and"))}(e.filters);i&&(t.structuredQuery.where=i);const a=function(u){if(u.length!==0)return u.map(h=>function(x){return{field:Nn(x.field),direction:uj(x.dir)}}(h))}(e.orderBy);a&&(t.structuredQuery.orderBy=a);const l=Jd(r,e.limit);return l!==null&&(t.structuredQuery.limit=l),e.startAt&&(t.structuredQuery.startAt=function(u){return{before:u.inclusive,values:u.position}}(e.startAt)),e.endAt&&(t.structuredQuery.endAt=function(u){return{before:!u.inclusive,values:u.position}}(e.endAt)),{gt:t,parent:n}}function cj(r){let e=sj(r.parent);const t=r.structuredQuery,s=t.from?t.from.length:0;let n=null;if(s>0){Oe(s===1,65062);const h=t.from[0];h.allDescendants?n=h.collectionId:e=e.child(h.collectionId)}let i=[];t.where&&(i=function(m){const x=Cb(m);return x instanceof Jt&&tb(x)?x.getFilters():[x]}(t.where));let a=[];t.orderBy&&(a=function(m){return m.map(x=>function(v){return new il(Cn(v.field),function(w){switch(w){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}}(v.direction))}(x))}(t.orderBy));let l=null;t.limit&&(l=function(m){let x;return x=typeof m=="object"?m.value:m,Hl(x)?null:x}(t.limit));let d=null;t.startAt&&(d=function(m){const x=!!m.before,g=m.values||[];return new ol(g,x)}(t.startAt));let u=null;return t.endAt&&(u=function(m){const x=!m.before,g=m.values||[];return new ol(g,x)}(t.endAt)),kk(e,n,a,i,l,"F",d,u)}function dj(r,e){const t=function(n){switch(n){case"TargetPurposeListen":return null;case"TargetPurposeExistenceFilterMismatch":return"existence-filter-mismatch";case"TargetPurposeExistenceFilterMismatchBloom":return"existence-filter-mismatch-bloom";case"TargetPurposeLimboResolution":return"limbo-document";default:return de(28987,{purpose:n})}}(e.purpose);return t==null?null:{"goog-listen-tags":t}}function Cb(r){return r.unaryFilter!==void 0?function(t){switch(t.unaryFilter.op){case"IS_NAN":const s=Cn(t.unaryFilter.field);return rt.create(s,"==",{doubleValue:NaN});case"IS_NULL":const n=Cn(t.unaryFilter.field);return rt.create(n,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":const i=Cn(t.unaryFilter.field);return rt.create(i,"!=",{doubleValue:NaN});case"IS_NOT_NULL":const a=Cn(t.unaryFilter.field);return rt.create(a,"!=",{nullValue:"NULL_VALUE"});case"OPERATOR_UNSPECIFIED":return de(61313);default:return de(60726)}}(r):r.fieldFilter!==void 0?function(t){return rt.create(Cn(t.fieldFilter.field),function(n){switch(n){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";case"OPERATOR_UNSPECIFIED":return de(58110);default:return de(50506)}}(t.fieldFilter.op),t.fieldFilter.value)}(r):r.compositeFilter!==void 0?function(t){return Jt.create(t.compositeFilter.filters.map(s=>Cb(s)),function(n){switch(n){case"AND":return"and";case"OR":return"or";default:return de(1026)}}(t.compositeFilter.op))}(r):de(30097,{filter:r})}function uj(r){return Jk[r]}function hj(r){return Zk[r]}function fj(r){return ej[r]}function Nn(r){return{fieldPath:r.canonicalString()}}function Cn(r){return ut.fromServerFormat(r.fieldPath)}function Ib(r){return r instanceof rt?function(t){if(t.op==="=="){if(Pp(t.value))return{unaryFilter:{field:Nn(t.field),op:"IS_NAN"}};if(Ap(t.value))return{unaryFilter:{field:Nn(t.field),op:"IS_NULL"}}}else if(t.op==="!="){if(Pp(t.value))return{unaryFilter:{field:Nn(t.field),op:"IS_NOT_NAN"}};if(Ap(t.value))return{unaryFilter:{field:Nn(t.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:Nn(t.field),op:hj(t.op),value:t.value}}}(r):r instanceof Jt?function(t){const s=t.getFilters().map(n=>Ib(n));return s.length===1?s[0]:{compositeFilter:{op:fj(t.op),filters:s}}}(r):de(54877,{filter:r})}function mj(r){const e=[];return r.fields.forEach(t=>e.push(t.canonicalString())),{fieldPaths:e}}function Sb(r){return r.length>=4&&r.get(0)==="projects"&&r.get(2)==="databases"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ms{constructor(e,t,s,n,i=fe.min(),a=fe.min(),l=ht.EMPTY_BYTE_STRING,d=null){this.target=e,this.targetId=t,this.purpose=s,this.sequenceNumber=n,this.snapshotVersion=i,this.lastLimboFreeSnapshotVersion=a,this.resumeToken=l,this.expectedCount=d}withSequenceNumber(e){return new ms(this.target,this.targetId,this.purpose,e,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,this.expectedCount)}withResumeToken(e,t){return new ms(this.target,this.targetId,this.purpose,this.sequenceNumber,t,this.lastLimboFreeSnapshotVersion,e,null)}withExpectedCount(e){return new ms(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,e)}withLastLimboFreeSnapshotVersion(e){return new ms(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,e,this.resumeToken,this.expectedCount)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class pj{constructor(e){this.wt=e}}function gj(r){const e=cj({parent:r.parent,structuredQuery:r.structuredQuery});return r.limitType==="LAST"?Xd(e,e.limit,"L"):e}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class xj{constructor(){this.Cn=new yj}addToCollectionParentIndex(e,t){return this.Cn.add(t),B.resolve()}getCollectionParents(e,t){return B.resolve(this.Cn.getEntries(t))}addFieldIndex(e,t){return B.resolve()}deleteFieldIndex(e,t){return B.resolve()}deleteAllFieldIndexes(e){return B.resolve()}createTargetIndexes(e,t){return B.resolve()}getDocumentsMatchingTarget(e,t){return B.resolve(null)}getIndexType(e,t){return B.resolve(0)}getFieldIndexes(e,t){return B.resolve([])}getNextCollectionGroupToUpdate(e){return B.resolve(null)}getMinOffset(e,t){return B.resolve(Es.min())}getMinOffsetFromCollectionGroup(e,t){return B.resolve(Es.min())}updateCollectionGroup(e,t,s){return B.resolve()}updateIndexEntries(e,t){return B.resolve()}}class yj{constructor(){this.index={}}add(e){const t=e.lastSegment(),s=e.popLast(),n=this.index[t]||new ot(qe.comparator),i=!n.has(s);return this.index[t]=n.add(s),i}has(e){const t=e.lastSegment(),s=e.popLast(),n=this.index[t];return n&&n.has(s)}getEntries(e){return(this.index[e]||new ot(qe.comparator)).toArray()}}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Wp={didRun:!1,sequenceNumbersCollected:0,targetsRemoved:0,documentsRemoved:0},kb=41943040;class jt{static withCacheSize(e){return new jt(e,jt.DEFAULT_COLLECTION_PERCENTILE,jt.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)}constructor(e,t,s){this.cacheSizeCollectionThreshold=e,this.percentileToCollect=t,this.maximumSequenceNumbersToCollect=s}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */jt.DEFAULT_COLLECTION_PERCENTILE=10,jt.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,jt.DEFAULT=new jt(kb,jt.DEFAULT_COLLECTION_PERCENTILE,jt.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),jt.DISABLED=new jt(-1,0,0);/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class so{constructor(e){this.ur=e}next(){return this.ur+=2,this.ur}static cr(){return new so(0)}static lr(){return new so(-1)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Gp="LruGarbageCollector",bj=1048576;function Kp([r,e],[t,s]){const n=Te(r,t);return n===0?Te(e,s):n}class vj{constructor(e){this.Er=e,this.buffer=new ot(Kp),this.dr=0}Ar(){return++this.dr}Rr(e){const t=[e,this.Ar()];if(this.buffer.size<this.Er)this.buffer=this.buffer.add(t);else{const s=this.buffer.last();Kp(t,s)<0&&(this.buffer=this.buffer.delete(s).add(t))}}get maxValue(){return this.buffer.last()[0]}}class wj{constructor(e,t,s){this.garbageCollector=e,this.asyncQueue=t,this.localStore=s,this.Vr=null}start(){this.garbageCollector.params.cacheSizeCollectionThreshold!==-1&&this.mr(6e4)}stop(){this.Vr&&(this.Vr.cancel(),this.Vr=null)}get started(){return this.Vr!==null}mr(e){J(Gp,`Garbage collection scheduled in ${e}ms`),this.Vr=this.asyncQueue.enqueueAfterDelay("lru_garbage_collection",e,async()=>{this.Vr=null;try{await this.localStore.collectGarbage(this.garbageCollector)}catch(t){xo(t)?J(Gp,"Ignoring IndexedDB error during garbage collection: ",t):await go(t)}await this.mr(3e5)})}}class _j{constructor(e,t){this.gr=e,this.params=t}calculateTargetCount(e,t){return this.gr.pr(e).next(s=>Math.floor(t/100*s))}nthSequenceNumber(e,t){if(t===0)return B.resolve(zl.le);const s=new vj(t);return this.gr.forEachTarget(e,n=>s.Rr(n.sequenceNumber)).next(()=>this.gr.yr(e,n=>s.Rr(n))).next(()=>s.maxValue)}removeTargets(e,t,s){return this.gr.removeTargets(e,t,s)}removeOrphanedDocuments(e,t){return this.gr.removeOrphanedDocuments(e,t)}collect(e,t){return this.params.cacheSizeCollectionThreshold===-1?(J("LruGarbageCollector","Garbage collection skipped; disabled"),B.resolve(Wp)):this.getCacheSize(e).next(s=>s<this.params.cacheSizeCollectionThreshold?(J("LruGarbageCollector",`Garbage collection skipped; Cache size ${s} is lower than threshold ${this.params.cacheSizeCollectionThreshold}`),Wp):this.wr(e,t))}getCacheSize(e){return this.gr.getCacheSize(e)}wr(e,t){let s,n,i,a,l,d,u;const h=Date.now();return this.calculateTargetCount(e,this.params.percentileToCollect).next(m=>(m>this.params.maximumSequenceNumbersToCollect?(J("LruGarbageCollector",`Capping sequence numbers to collect down to the maximum of ${this.params.maximumSequenceNumbersToCollect} from ${m}`),n=this.params.maximumSequenceNumbersToCollect):n=m,a=Date.now(),this.nthSequenceNumber(e,n))).next(m=>(s=m,l=Date.now(),this.removeTargets(e,s,t))).next(m=>(i=m,d=Date.now(),this.removeOrphanedDocuments(e,s))).next(m=>(u=Date.now(),Tn()<=Ee.DEBUG&&J("LruGarbageCollector",`LRU Garbage Collection
	Counted targets in ${a-h}ms
	Determined least recently used ${n} in `+(l-a)+`ms
	Removed ${i} targets in `+(d-l)+`ms
	Removed ${m} documents in `+(u-d)+`ms
Total Duration: ${u-h}ms`),B.resolve({didRun:!0,sequenceNumbersCollected:n,targetsRemoved:i,documentsRemoved:m})))}}function Tj(r,e){return new _j(r,e)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ej{constructor(){this.changes=new pn(e=>e.toString(),(e,t)=>e.isEqual(t)),this.changesApplied=!1}addEntry(e){this.assertNotApplied(),this.changes.set(e.key,e)}removeEntry(e,t){this.assertNotApplied(),this.changes.set(e,bt.newInvalidDocument(e).setReadTime(t))}getEntry(e,t){this.assertNotApplied();const s=this.changes.get(t);return s!==void 0?B.resolve(s):this.getFromCache(e,t)}getEntries(e,t){return this.getAllFromCache(e,t)}apply(e){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(e)}assertNotApplied(){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Nj{constructor(e,t){this.overlayedDocument=e,this.mutatedFields=t}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Cj{constructor(e,t,s,n){this.remoteDocumentCache=e,this.mutationQueue=t,this.documentOverlayCache=s,this.indexManager=n}getDocument(e,t){let s=null;return this.documentOverlayCache.getOverlay(e,t).next(n=>(s=n,this.remoteDocumentCache.getEntry(e,t))).next(n=>(s!==null&&ai(s.mutation,n,Ot.empty(),nt.now()),n))}getDocuments(e,t){return this.remoteDocumentCache.getEntries(e,t).next(s=>this.getLocalViewOfDocuments(e,s,Ne()).next(()=>s))}getLocalViewOfDocuments(e,t,s=Ne()){const n=zs();return this.populateOverlays(e,n,t).next(()=>this.computeViews(e,t,n,s).next(i=>{let a=Wo();return i.forEach((l,d)=>{a=a.insert(l,d.overlayedDocument)}),a}))}getOverlayedDocuments(e,t){const s=zs();return this.populateOverlays(e,s,t).next(()=>this.computeViews(e,t,s,Ne()))}populateOverlays(e,t,s){const n=[];return s.forEach(i=>{t.has(i)||n.push(i)}),this.documentOverlayCache.getOverlays(e,n).next(i=>{i.forEach((a,l)=>{t.set(a,l)})})}computeViews(e,t,s,n){let i=Vr();const a=ii(),l=function(){return ii()}();return t.forEach((d,u)=>{const h=s.get(u.key);n.has(u.key)&&(h===void 0||h.mutation instanceof Ps)?i=i.insert(u.key,u):h!==void 0?(a.set(u.key,h.mutation.getFieldMask()),ai(h.mutation,u,h.mutation.getFieldMask(),nt.now())):a.set(u.key,Ot.empty())}),this.recalculateAndSaveOverlays(e,i).next(d=>(d.forEach((u,h)=>a.set(u,h)),t.forEach((u,h)=>{var m;return l.set(u,new Nj(h,(m=a.get(u))!==null&&m!==void 0?m:null))}),l))}recalculateAndSaveOverlays(e,t){const s=ii();let n=new Ge((a,l)=>a-l),i=Ne();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(e,t).next(a=>{for(const l of a)l.keys().forEach(d=>{const u=t.get(d);if(u===null)return;let h=s.get(d)||Ot.empty();h=l.applyToLocalView(u,h),s.set(d,h);const m=(n.get(l.batchId)||Ne()).add(d);n=n.insert(l.batchId,m)})}).next(()=>{const a=[],l=n.getReverseIterator();for(;l.hasNext();){const d=l.getNext(),u=d.key,h=d.value,m=db();h.forEach(x=>{if(!i.has(x)){const g=gb(t.get(x),s.get(x));g!==null&&m.set(x,g),i=i.add(x)}}),a.push(this.documentOverlayCache.saveOverlays(e,u,m))}return B.waitFor(a)}).next(()=>s)}recalculateAndSaveOverlaysForDocumentKeys(e,t){return this.remoteDocumentCache.getEntries(e,t).next(s=>this.recalculateAndSaveOverlays(e,s))}getDocumentsMatchingQuery(e,t,s,n){return function(a){return ae.isDocumentKey(a.path)&&a.collectionGroup===null&&a.filters.length===0}(t)?this.getDocumentsMatchingDocumentQuery(e,t.path):ob(t)?this.getDocumentsMatchingCollectionGroupQuery(e,t,s,n):this.getDocumentsMatchingCollectionQuery(e,t,s,n)}getNextDocuments(e,t,s,n){return this.remoteDocumentCache.getAllFromCollectionGroup(e,t,s,n).next(i=>{const a=n-i.size>0?this.documentOverlayCache.getOverlaysForCollectionGroup(e,t,s.largestBatchId,n-i.size):B.resolve(zs());let l=gi,d=i;return a.next(u=>B.forEach(u,(h,m)=>(l<m.largestBatchId&&(l=m.largestBatchId),i.get(h)?B.resolve():this.remoteDocumentCache.getEntry(e,h).next(x=>{d=d.insert(h,x)}))).next(()=>this.populateOverlays(e,u,i)).next(()=>this.computeViews(e,d,u,Ne())).next(h=>({batchId:l,changes:cb(h)})))})}getDocumentsMatchingDocumentQuery(e,t){return this.getDocument(e,new ae(t)).next(s=>{let n=Wo();return s.isFoundDocument()&&(n=n.insert(s.key,s)),n})}getDocumentsMatchingCollectionGroupQuery(e,t,s,n){const i=t.collectionGroup;let a=Wo();return this.indexManager.getCollectionParents(e,i).next(l=>B.forEach(l,d=>{const u=function(m,x){return new Ui(x,null,m.explicitOrderBy.slice(),m.filters.slice(),m.limit,m.limitType,m.startAt,m.endAt)}(t,d.child(i));return this.getDocumentsMatchingCollectionQuery(e,u,s,n).next(h=>{h.forEach((m,x)=>{a=a.insert(m,x)})})}).next(()=>a))}getDocumentsMatchingCollectionQuery(e,t,s,n){let i;return this.documentOverlayCache.getOverlaysForCollection(e,t.path,s.largestBatchId).next(a=>(i=a,this.remoteDocumentCache.getDocumentsMatchingQuery(e,t,s,i,n))).next(a=>{i.forEach((d,u)=>{const h=u.getKey();a.get(h)===null&&(a=a.insert(h,bt.newInvalidDocument(h)))});let l=Wo();return a.forEach((d,u)=>{const h=i.get(d);h!==void 0&&ai(h.mutation,u,Ot.empty(),nt.now()),Gl(t,u)&&(l=l.insert(d,u))}),l})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ij{constructor(e){this.serializer=e,this.kr=new Map,this.qr=new Map}getBundleMetadata(e,t){return B.resolve(this.kr.get(t))}saveBundleMetadata(e,t){return this.kr.set(t.id,function(n){return{id:n.id,version:n.version,createTime:hr(n.createTime)}}(t)),B.resolve()}getNamedQuery(e,t){return B.resolve(this.qr.get(t))}saveNamedQuery(e,t){return this.qr.set(t.name,function(n){return{name:n.name,query:gj(n.bundledQuery),readTime:hr(n.readTime)}}(t)),B.resolve()}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Sj{constructor(){this.overlays=new Ge(ae.comparator),this.Qr=new Map}getOverlay(e,t){return B.resolve(this.overlays.get(t))}getOverlays(e,t){const s=zs();return B.forEach(t,n=>this.getOverlay(e,n).next(i=>{i!==null&&s.set(n,i)})).next(()=>s)}saveOverlays(e,t,s){return s.forEach((n,i)=>{this.St(e,t,i)}),B.resolve()}removeOverlaysForBatchId(e,t,s){const n=this.Qr.get(s);return n!==void 0&&(n.forEach(i=>this.overlays=this.overlays.remove(i)),this.Qr.delete(s)),B.resolve()}getOverlaysForCollection(e,t,s){const n=zs(),i=t.length+1,a=new ae(t.child("")),l=this.overlays.getIteratorFrom(a);for(;l.hasNext();){const d=l.getNext().value,u=d.getKey();if(!t.isPrefixOf(u.path))break;u.path.length===i&&d.largestBatchId>s&&n.set(d.getKey(),d)}return B.resolve(n)}getOverlaysForCollectionGroup(e,t,s,n){let i=new Ge((u,h)=>u-h);const a=this.overlays.getIterator();for(;a.hasNext();){const u=a.getNext().value;if(u.getKey().getCollectionGroup()===t&&u.largestBatchId>s){let h=i.get(u.largestBatchId);h===null&&(h=zs(),i=i.insert(u.largestBatchId,h)),h.set(u.getKey(),u)}}const l=zs(),d=i.getIterator();for(;d.hasNext()&&(d.getNext().value.forEach((u,h)=>l.set(u,h)),!(l.size()>=n)););return B.resolve(l)}St(e,t,s){const n=this.overlays.get(s.key);if(n!==null){const a=this.Qr.get(n.largestBatchId).delete(s.key);this.Qr.set(n.largestBatchId,a)}this.overlays=this.overlays.insert(s.key,new Gk(t,s));let i=this.Qr.get(t);i===void 0&&(i=Ne(),this.Qr.set(t,i)),this.Qr.set(t,i.add(s.key))}}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class kj{constructor(){this.sessionToken=ht.EMPTY_BYTE_STRING}getSessionToken(e){return B.resolve(this.sessionToken)}setSessionToken(e,t){return this.sessionToken=t,B.resolve()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class xh{constructor(){this.$r=new ot(at.Ur),this.Kr=new ot(at.Wr)}isEmpty(){return this.$r.isEmpty()}addReference(e,t){const s=new at(e,t);this.$r=this.$r.add(s),this.Kr=this.Kr.add(s)}Gr(e,t){e.forEach(s=>this.addReference(s,t))}removeReference(e,t){this.zr(new at(e,t))}jr(e,t){e.forEach(s=>this.removeReference(s,t))}Hr(e){const t=new ae(new qe([])),s=new at(t,e),n=new at(t,e+1),i=[];return this.Kr.forEachInRange([s,n],a=>{this.zr(a),i.push(a.key)}),i}Jr(){this.$r.forEach(e=>this.zr(e))}zr(e){this.$r=this.$r.delete(e),this.Kr=this.Kr.delete(e)}Yr(e){const t=new ae(new qe([])),s=new at(t,e),n=new at(t,e+1);let i=Ne();return this.Kr.forEachInRange([s,n],a=>{i=i.add(a.key)}),i}containsKey(e){const t=new at(e,0),s=this.$r.firstAfterOrEqual(t);return s!==null&&e.isEqual(s.key)}}class at{constructor(e,t){this.key=e,this.Zr=t}static Ur(e,t){return ae.comparator(e.key,t.key)||Te(e.Zr,t.Zr)}static Wr(e,t){return Te(e.Zr,t.Zr)||ae.comparator(e.key,t.key)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class jj{constructor(e,t){this.indexManager=e,this.referenceDelegate=t,this.mutationQueue=[],this.nr=1,this.Xr=new ot(at.Ur)}checkEmpty(e){return B.resolve(this.mutationQueue.length===0)}addMutationBatch(e,t,s,n){const i=this.nr;this.nr++,this.mutationQueue.length>0&&this.mutationQueue[this.mutationQueue.length-1];const a=new Wk(i,t,s,n);this.mutationQueue.push(a);for(const l of n)this.Xr=this.Xr.add(new at(l.key,i)),this.indexManager.addToCollectionParentIndex(e,l.key.path.popLast());return B.resolve(a)}lookupMutationBatch(e,t){return B.resolve(this.ei(t))}getNextMutationBatchAfterBatchId(e,t){const s=t+1,n=this.ti(s),i=n<0?0:n;return B.resolve(this.mutationQueue.length>i?this.mutationQueue[i]:null)}getHighestUnacknowledgedBatchId(){return B.resolve(this.mutationQueue.length===0?ah:this.nr-1)}getAllMutationBatches(e){return B.resolve(this.mutationQueue.slice())}getAllMutationBatchesAffectingDocumentKey(e,t){const s=new at(t,0),n=new at(t,Number.POSITIVE_INFINITY),i=[];return this.Xr.forEachInRange([s,n],a=>{const l=this.ei(a.Zr);i.push(l)}),B.resolve(i)}getAllMutationBatchesAffectingDocumentKeys(e,t){let s=new ot(Te);return t.forEach(n=>{const i=new at(n,0),a=new at(n,Number.POSITIVE_INFINITY);this.Xr.forEachInRange([i,a],l=>{s=s.add(l.Zr)})}),B.resolve(this.ni(s))}getAllMutationBatchesAffectingQuery(e,t){const s=t.path,n=s.length+1;let i=s;ae.isDocumentKey(i)||(i=i.child(""));const a=new at(new ae(i),0);let l=new ot(Te);return this.Xr.forEachWhile(d=>{const u=d.key.path;return!!s.isPrefixOf(u)&&(u.length===n&&(l=l.add(d.Zr)),!0)},a),B.resolve(this.ni(l))}ni(e){const t=[];return e.forEach(s=>{const n=this.ei(s);n!==null&&t.push(n)}),t}removeMutationBatch(e,t){Oe(this.ri(t.batchId,"removed")===0,55003),this.mutationQueue.shift();let s=this.Xr;return B.forEach(t.mutations,n=>{const i=new at(n.key,t.batchId);return s=s.delete(i),this.referenceDelegate.markPotentiallyOrphaned(e,n.key)}).next(()=>{this.Xr=s})}sr(e){}containsKey(e,t){const s=new at(t,0),n=this.Xr.firstAfterOrEqual(s);return B.resolve(t.isEqual(n&&n.key))}performConsistencyCheck(e){return this.mutationQueue.length,B.resolve()}ri(e,t){return this.ti(e)}ti(e){return this.mutationQueue.length===0?0:e-this.mutationQueue[0].batchId}ei(e){const t=this.ti(e);return t<0||t>=this.mutationQueue.length?null:this.mutationQueue[t]}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Aj{constructor(e){this.ii=e,this.docs=function(){return new Ge(ae.comparator)}(),this.size=0}setIndexManager(e){this.indexManager=e}addEntry(e,t){const s=t.key,n=this.docs.get(s),i=n?n.size:0,a=this.ii(t);return this.docs=this.docs.insert(s,{document:t.mutableCopy(),size:a}),this.size+=a-i,this.indexManager.addToCollectionParentIndex(e,s.path.popLast())}removeEntry(e){const t=this.docs.get(e);t&&(this.docs=this.docs.remove(e),this.size-=t.size)}getEntry(e,t){const s=this.docs.get(t);return B.resolve(s?s.document.mutableCopy():bt.newInvalidDocument(t))}getEntries(e,t){let s=Vr();return t.forEach(n=>{const i=this.docs.get(n);s=s.insert(n,i?i.document.mutableCopy():bt.newInvalidDocument(n))}),B.resolve(s)}getDocumentsMatchingQuery(e,t,s,n){let i=Vr();const a=t.path,l=new ae(a.child("__id-9223372036854775808__")),d=this.docs.getIteratorFrom(l);for(;d.hasNext();){const{key:u,value:{document:h}}=d.getNext();if(!a.isPrefixOf(u.path))break;u.path.length>a.length+1||ak(ik(h),s)<=0||(n.has(h.key)||Gl(t,h))&&(i=i.insert(h.key,h.mutableCopy()))}return B.resolve(i)}getAllFromCollectionGroup(e,t,s,n){de(9500)}si(e,t){return B.forEach(this.docs,s=>t(s))}newChangeBuffer(e){return new Pj(this)}getSize(e){return B.resolve(this.size)}}class Pj extends Ej{constructor(e){super(),this.Br=e}applyChanges(e){const t=[];return this.changes.forEach((s,n)=>{n.isValidDocument()?t.push(this.Br.addEntry(e,n)):this.Br.removeEntry(s)}),B.waitFor(t)}getFromCache(e,t){return this.Br.getEntry(e,t)}getAllFromCache(e,t){return this.Br.getEntries(e,t)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Rj{constructor(e){this.persistence=e,this.oi=new pn(t=>dh(t),uh),this.lastRemoteSnapshotVersion=fe.min(),this.highestTargetId=0,this._i=0,this.ai=new xh,this.targetCount=0,this.ui=so.cr()}forEachTarget(e,t){return this.oi.forEach((s,n)=>t(n)),B.resolve()}getLastRemoteSnapshotVersion(e){return B.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(e){return B.resolve(this._i)}allocateTargetId(e){return this.highestTargetId=this.ui.next(),B.resolve(this.highestTargetId)}setTargetsMetadata(e,t,s){return s&&(this.lastRemoteSnapshotVersion=s),t>this._i&&(this._i=t),B.resolve()}Tr(e){this.oi.set(e.target,e);const t=e.targetId;t>this.highestTargetId&&(this.ui=new so(t),this.highestTargetId=t),e.sequenceNumber>this._i&&(this._i=e.sequenceNumber)}addTargetData(e,t){return this.Tr(t),this.targetCount+=1,B.resolve()}updateTargetData(e,t){return this.Tr(t),B.resolve()}removeTargetData(e,t){return this.oi.delete(t.target),this.ai.Hr(t.targetId),this.targetCount-=1,B.resolve()}removeTargets(e,t,s){let n=0;const i=[];return this.oi.forEach((a,l)=>{l.sequenceNumber<=t&&s.get(l.targetId)===null&&(this.oi.delete(a),i.push(this.removeMatchingKeysForTargetId(e,l.targetId)),n++)}),B.waitFor(i).next(()=>n)}getTargetCount(e){return B.resolve(this.targetCount)}getTargetData(e,t){const s=this.oi.get(t)||null;return B.resolve(s)}addMatchingKeys(e,t,s){return this.ai.Gr(t,s),B.resolve()}removeMatchingKeys(e,t,s){this.ai.jr(t,s);const n=this.persistence.referenceDelegate,i=[];return n&&t.forEach(a=>{i.push(n.markPotentiallyOrphaned(e,a))}),B.waitFor(i)}removeMatchingKeysForTargetId(e,t){return this.ai.Hr(t),B.resolve()}getMatchingKeysForTargetId(e,t){const s=this.ai.Yr(t);return B.resolve(s)}containsKey(e,t){return B.resolve(this.ai.containsKey(t))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class jb{constructor(e,t){this.ci={},this.overlays={},this.li=new zl(0),this.hi=!1,this.hi=!0,this.Pi=new kj,this.referenceDelegate=e(this),this.Ti=new Rj(this),this.indexManager=new xj,this.remoteDocumentCache=function(n){return new Aj(n)}(s=>this.referenceDelegate.Ii(s)),this.serializer=new pj(t),this.Ei=new Ij(this.serializer)}start(){return Promise.resolve()}shutdown(){return this.hi=!1,Promise.resolve()}get started(){return this.hi}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(e){return this.indexManager}getDocumentOverlayCache(e){let t=this.overlays[e.toKey()];return t||(t=new Sj,this.overlays[e.toKey()]=t),t}getMutationQueue(e,t){let s=this.ci[e.toKey()];return s||(s=new jj(t,this.referenceDelegate),this.ci[e.toKey()]=s),s}getGlobalsCache(){return this.Pi}getTargetCache(){return this.Ti}getRemoteDocumentCache(){return this.remoteDocumentCache}getBundleCache(){return this.Ei}runTransaction(e,t,s){J("MemoryPersistence","Starting transaction:",e);const n=new Mj(this.li.next());return this.referenceDelegate.di(),s(n).next(i=>this.referenceDelegate.Ai(n).next(()=>i)).toPromise().then(i=>(n.raiseOnCommittedEvent(),i))}Ri(e,t){return B.or(Object.values(this.ci).map(s=>()=>s.containsKey(e,t)))}}class Mj extends ck{constructor(e){super(),this.currentSequenceNumber=e}}class yh{constructor(e){this.persistence=e,this.Vi=new xh,this.mi=null}static fi(e){return new yh(e)}get gi(){if(this.mi)return this.mi;throw de(60996)}addReference(e,t,s){return this.Vi.addReference(s,t),this.gi.delete(s.toString()),B.resolve()}removeReference(e,t,s){return this.Vi.removeReference(s,t),this.gi.add(s.toString()),B.resolve()}markPotentiallyOrphaned(e,t){return this.gi.add(t.toString()),B.resolve()}removeTarget(e,t){this.Vi.Hr(t.targetId).forEach(n=>this.gi.add(n.toString()));const s=this.persistence.getTargetCache();return s.getMatchingKeysForTargetId(e,t.targetId).next(n=>{n.forEach(i=>this.gi.add(i.toString()))}).next(()=>s.removeTargetData(e,t))}di(){this.mi=new Set}Ai(e){const t=this.persistence.getRemoteDocumentCache().newChangeBuffer();return B.forEach(this.gi,s=>{const n=ae.fromPath(s);return this.pi(e,n).next(i=>{i||t.removeEntry(n,fe.min())})}).next(()=>(this.mi=null,t.apply(e)))}updateLimboDocument(e,t){return this.pi(e,t).next(s=>{s?this.gi.delete(t.toString()):this.gi.add(t.toString())})}Ii(e){return 0}pi(e,t){return B.or([()=>B.resolve(this.Vi.containsKey(t)),()=>this.persistence.getTargetCache().containsKey(e,t),()=>this.persistence.Ri(e,t)])}}class dl{constructor(e,t){this.persistence=e,this.yi=new pn(s=>hk(s.path),(s,n)=>s.isEqual(n)),this.garbageCollector=Tj(this,t)}static fi(e,t){return new dl(e,t)}di(){}Ai(e){return B.resolve()}forEachTarget(e,t){return this.persistence.getTargetCache().forEachTarget(e,t)}pr(e){const t=this.br(e);return this.persistence.getTargetCache().getTargetCount(e).next(s=>t.next(n=>s+n))}br(e){let t=0;return this.yr(e,s=>{t++}).next(()=>t)}yr(e,t){return B.forEach(this.yi,(s,n)=>this.Dr(e,s,n).next(i=>i?B.resolve():t(n)))}removeTargets(e,t,s){return this.persistence.getTargetCache().removeTargets(e,t,s)}removeOrphanedDocuments(e,t){let s=0;const n=this.persistence.getRemoteDocumentCache(),i=n.newChangeBuffer();return n.si(e,a=>this.Dr(e,a,t).next(l=>{l||(s++,i.removeEntry(a,fe.min()))})).next(()=>i.apply(e)).next(()=>s)}markPotentiallyOrphaned(e,t){return this.yi.set(t,e.currentSequenceNumber),B.resolve()}removeTarget(e,t){const s=t.withSequenceNumber(e.currentSequenceNumber);return this.persistence.getTargetCache().updateTargetData(e,s)}addReference(e,t,s){return this.yi.set(s,e.currentSequenceNumber),B.resolve()}removeReference(e,t,s){return this.yi.set(s,e.currentSequenceNumber),B.resolve()}updateLimboDocument(e,t){return this.yi.set(t,e.currentSequenceNumber),B.resolve()}Ii(e){let t=e.key.toString().length;return e.isFoundDocument()&&(t+=Oa(e.data.value)),t}Dr(e,t,s){return B.or([()=>this.persistence.Ri(e,t),()=>this.persistence.getTargetCache().containsKey(e,t),()=>{const n=this.yi.get(t);return B.resolve(n!==void 0&&n>s)}])}getCacheSize(e){return this.persistence.getRemoteDocumentCache().getSize(e)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class bh{constructor(e,t,s,n){this.targetId=e,this.fromCache=t,this.ds=s,this.As=n}static Rs(e,t){let s=Ne(),n=Ne();for(const i of t.docChanges)switch(i.type){case 0:s=s.add(i.doc.key);break;case 1:n=n.add(i.doc.key)}return new bh(e,t.fromCache,s,n)}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Dj{constructor(){this._documentReadCount=0}get documentReadCount(){return this._documentReadCount}incrementDocumentReadCount(e){this._documentReadCount+=e}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Oj{constructor(){this.Vs=!1,this.fs=!1,this.gs=100,this.ps=function(){return aN()?8:dk(vt())>0?6:4}()}initialize(e,t){this.ys=e,this.indexManager=t,this.Vs=!0}getDocumentsMatchingQuery(e,t,s,n){const i={result:null};return this.ws(e,t).next(a=>{i.result=a}).next(()=>{if(!i.result)return this.bs(e,t,n,s).next(a=>{i.result=a})}).next(()=>{if(i.result)return;const a=new Dj;return this.Ss(e,t,a).next(l=>{if(i.result=l,this.fs)return this.Ds(e,t,a,l.size)})}).next(()=>i.result)}Ds(e,t,s,n){return s.documentReadCount<this.gs?(Tn()<=Ee.DEBUG&&J("QueryEngine","SDK will not create cache indexes for query:",En(t),"since it only creates cache indexes for collection contains","more than or equal to",this.gs,"documents"),B.resolve()):(Tn()<=Ee.DEBUG&&J("QueryEngine","Query:",En(t),"scans",s.documentReadCount,"local documents and returns",n,"documents as results."),s.documentReadCount>this.ps*n?(Tn()<=Ee.DEBUG&&J("QueryEngine","The SDK decides to create cache indexes for query:",En(t),"as using cache indexes may help improve performance."),this.indexManager.createTargetIndexes(e,dr(t))):B.resolve())}ws(e,t){if(Op(t))return B.resolve(null);let s=dr(t);return this.indexManager.getIndexType(e,s).next(n=>n===0?null:(t.limit!==null&&n===1&&(t=Xd(t,null,"F"),s=dr(t)),this.indexManager.getDocumentsMatchingTarget(e,s).next(i=>{const a=Ne(...i);return this.ys.getDocuments(e,a).next(l=>this.indexManager.getMinOffset(e,s).next(d=>{const u=this.vs(t,l);return this.Cs(t,u,a,d.readTime)?this.ws(e,Xd(t,null,"F")):this.Fs(e,u,t,d)}))})))}bs(e,t,s,n){return Op(t)||n.isEqual(fe.min())?B.resolve(null):this.ys.getDocuments(e,s).next(i=>{const a=this.vs(t,i);return this.Cs(t,a,s,n)?B.resolve(null):(Tn()<=Ee.DEBUG&&J("QueryEngine","Re-using previous result from %s to execute query: %s",n.toString(),En(t)),this.Fs(e,a,t,ok(n,gi)).next(l=>l))})}vs(e,t){let s=new ot(ab(e));return t.forEach((n,i)=>{Gl(e,i)&&(s=s.add(i))}),s}Cs(e,t,s,n){if(e.limit===null)return!1;if(s.size!==t.size)return!0;const i=e.limitType==="F"?t.last():t.first();return!!i&&(i.hasPendingWrites||i.version.compareTo(n)>0)}Ss(e,t,s){return Tn()<=Ee.DEBUG&&J("QueryEngine","Using full collection scan to execute query:",En(t)),this.ys.getDocumentsMatchingQuery(e,t,Es.min(),s)}Fs(e,t,s,n){return this.ys.getDocumentsMatchingQuery(e,s,n).next(i=>(t.forEach(a=>{i=i.insert(a.key,a)}),i))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const vh="LocalStore",Lj=3e8;class Vj{constructor(e,t,s,n){this.persistence=e,this.Ms=t,this.serializer=n,this.xs=new Ge(Te),this.Os=new pn(i=>dh(i),uh),this.Ns=new Map,this.Bs=e.getRemoteDocumentCache(),this.Ti=e.getTargetCache(),this.Ei=e.getBundleCache(),this.Ls(s)}Ls(e){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(e),this.indexManager=this.persistence.getIndexManager(e),this.mutationQueue=this.persistence.getMutationQueue(e,this.indexManager),this.localDocuments=new Cj(this.Bs,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.Bs.setIndexManager(this.indexManager),this.Ms.initialize(this.localDocuments,this.indexManager)}collectGarbage(e){return this.persistence.runTransaction("Collect garbage","readwrite-primary",t=>e.collect(t,this.xs))}}function Fj(r,e,t,s){return new Vj(r,e,t,s)}async function Ab(r,e){const t=pe(r);return await t.persistence.runTransaction("Handle user change","readonly",s=>{let n;return t.mutationQueue.getAllMutationBatches(s).next(i=>(n=i,t.Ls(e),t.mutationQueue.getAllMutationBatches(s))).next(i=>{const a=[],l=[];let d=Ne();for(const u of n){a.push(u.batchId);for(const h of u.mutations)d=d.add(h.key)}for(const u of i){l.push(u.batchId);for(const h of u.mutations)d=d.add(h.key)}return t.localDocuments.getDocuments(s,d).next(u=>({ks:u,removedBatchIds:a,addedBatchIds:l}))})})}function Uj(r,e){const t=pe(r);return t.persistence.runTransaction("Acknowledge batch","readwrite-primary",s=>{const n=e.batch.keys(),i=t.Bs.newChangeBuffer({trackRemovals:!0});return function(l,d,u,h){const m=u.batch,x=m.keys();let g=B.resolve();return x.forEach(v=>{g=g.next(()=>h.getEntry(d,v)).next(b=>{const w=u.docVersions.get(v);Oe(w!==null,48541),b.version.compareTo(w)<0&&(m.applyToRemoteDocument(b,u),b.isValidDocument()&&(b.setReadTime(u.commitVersion),h.addEntry(b)))})}),g.next(()=>l.mutationQueue.removeMutationBatch(d,m))}(t,s,e,i).next(()=>i.apply(s)).next(()=>t.mutationQueue.performConsistencyCheck(s)).next(()=>t.documentOverlayCache.removeOverlaysForBatchId(s,n,e.batch.batchId)).next(()=>t.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(s,function(l){let d=Ne();for(let u=0;u<l.mutationResults.length;++u)l.mutationResults[u].transformResults.length>0&&(d=d.add(l.batch.mutations[u].key));return d}(e))).next(()=>t.localDocuments.getDocuments(s,n))})}function Pb(r){const e=pe(r);return e.persistence.runTransaction("Get last remote snapshot version","readonly",t=>e.Ti.getLastRemoteSnapshotVersion(t))}function $j(r,e){const t=pe(r),s=e.snapshotVersion;let n=t.xs;return t.persistence.runTransaction("Apply remote event","readwrite-primary",i=>{const a=t.Bs.newChangeBuffer({trackRemovals:!0});n=t.xs;const l=[];e.targetChanges.forEach((h,m)=>{const x=n.get(m);if(!x)return;l.push(t.Ti.removeMatchingKeys(i,h.removedDocuments,m).next(()=>t.Ti.addMatchingKeys(i,h.addedDocuments,m)));let g=x.withSequenceNumber(i.currentSequenceNumber);e.targetMismatches.get(m)!==null?g=g.withResumeToken(ht.EMPTY_BYTE_STRING,fe.min()).withLastLimboFreeSnapshotVersion(fe.min()):h.resumeToken.approximateByteSize()>0&&(g=g.withResumeToken(h.resumeToken,s)),n=n.insert(m,g),function(b,w,k){return b.resumeToken.approximateByteSize()===0||w.snapshotVersion.toMicroseconds()-b.snapshotVersion.toMicroseconds()>=Lj?!0:k.addedDocuments.size+k.modifiedDocuments.size+k.removedDocuments.size>0}(x,g,h)&&l.push(t.Ti.updateTargetData(i,g))});let d=Vr(),u=Ne();if(e.documentUpdates.forEach(h=>{e.resolvedLimboDocuments.has(h)&&l.push(t.persistence.referenceDelegate.updateLimboDocument(i,h))}),l.push(Bj(i,a,e.documentUpdates).next(h=>{d=h.qs,u=h.Qs})),!s.isEqual(fe.min())){const h=t.Ti.getLastRemoteSnapshotVersion(i).next(m=>t.Ti.setTargetsMetadata(i,i.currentSequenceNumber,s));l.push(h)}return B.waitFor(l).next(()=>a.apply(i)).next(()=>t.localDocuments.getLocalViewOfDocuments(i,d,u)).next(()=>d)}).then(i=>(t.xs=n,i))}function Bj(r,e,t){let s=Ne(),n=Ne();return t.forEach(i=>s=s.add(i)),e.getEntries(r,s).next(i=>{let a=Vr();return t.forEach((l,d)=>{const u=i.get(l);d.isFoundDocument()!==u.isFoundDocument()&&(n=n.add(l)),d.isNoDocument()&&d.version.isEqual(fe.min())?(e.removeEntry(l,d.readTime),a=a.insert(l,d)):!u.isValidDocument()||d.version.compareTo(u.version)>0||d.version.compareTo(u.version)===0&&u.hasPendingWrites?(e.addEntry(d),a=a.insert(l,d)):J(vh,"Ignoring outdated watch update for ",l,". Current version:",u.version," Watch version:",d.version)}),{qs:a,Qs:n}})}function zj(r,e){const t=pe(r);return t.persistence.runTransaction("Get next mutation batch","readonly",s=>(e===void 0&&(e=ah),t.mutationQueue.getNextMutationBatchAfterBatchId(s,e)))}function Hj(r,e){const t=pe(r);return t.persistence.runTransaction("Allocate target","readwrite",s=>{let n;return t.Ti.getTargetData(s,e).next(i=>i?(n=i,B.resolve(n)):t.Ti.allocateTargetId(s).next(a=>(n=new ms(e,a,"TargetPurposeListen",s.currentSequenceNumber),t.Ti.addTargetData(s,n).next(()=>n))))}).then(s=>{const n=t.xs.get(s.targetId);return(n===null||s.snapshotVersion.compareTo(n.snapshotVersion)>0)&&(t.xs=t.xs.insert(s.targetId,s),t.Os.set(e,s.targetId)),s})}async function ru(r,e,t){const s=pe(r),n=s.xs.get(e),i=t?"readwrite":"readwrite-primary";try{t||await s.persistence.runTransaction("Release target",i,a=>s.persistence.referenceDelegate.removeTarget(a,n))}catch(a){if(!xo(a))throw a;J(vh,`Failed to update sequence numbers for target ${e}: ${a}`)}s.xs=s.xs.remove(e),s.Os.delete(n.target)}function Qp(r,e,t){const s=pe(r);let n=fe.min(),i=Ne();return s.persistence.runTransaction("Execute query","readwrite",a=>function(d,u,h){const m=pe(d),x=m.Os.get(h);return x!==void 0?B.resolve(m.xs.get(x)):m.Ti.getTargetData(u,h)}(s,a,dr(e)).next(l=>{if(l)return n=l.lastLimboFreeSnapshotVersion,s.Ti.getMatchingKeysForTargetId(a,l.targetId).next(d=>{i=d})}).next(()=>s.Ms.getDocumentsMatchingQuery(a,e,t?n:fe.min(),t?i:Ne())).next(l=>(qj(s,Ak(e),l),{documents:l,$s:i})))}function qj(r,e,t){let s=r.Ns.get(e)||fe.min();t.forEach((n,i)=>{i.readTime.compareTo(s)>0&&(s=i.readTime)}),r.Ns.set(e,s)}class Yp{constructor(){this.activeTargetIds=Lk()}js(e){this.activeTargetIds=this.activeTargetIds.add(e)}Hs(e){this.activeTargetIds=this.activeTargetIds.delete(e)}zs(){const e={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(e)}}class Wj{constructor(){this.xo=new Yp,this.Oo={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(e){}updateMutationState(e,t,s){}addLocalQueryTarget(e,t=!0){return t&&this.xo.js(e),this.Oo[e]||"not-current"}updateQueryState(e,t,s){this.Oo[e]=t}removeLocalQueryTarget(e){this.xo.Hs(e)}isLocalQueryTarget(e){return this.xo.activeTargetIds.has(e)}clearQueryState(e){delete this.Oo[e]}getAllActiveQueryTargets(){return this.xo.activeTargetIds}isActiveQueryTarget(e){return this.xo.activeTargetIds.has(e)}start(){return this.xo=new Yp,Promise.resolve()}handleUserChange(e,t,s){}setOnlineState(e){}shutdown(){}writeSequenceNumber(e){}notifyBundleLoaded(e){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Gj{No(e){}shutdown(){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Xp="ConnectivityMonitor";class Jp{constructor(){this.Bo=()=>this.Lo(),this.ko=()=>this.qo(),this.Qo=[],this.$o()}No(e){this.Qo.push(e)}shutdown(){window.removeEventListener("online",this.Bo),window.removeEventListener("offline",this.ko)}$o(){window.addEventListener("online",this.Bo),window.addEventListener("offline",this.ko)}Lo(){J(Xp,"Network connectivity changed: AVAILABLE");for(const e of this.Qo)e(0)}qo(){J(Xp,"Network connectivity changed: UNAVAILABLE");for(const e of this.Qo)e(1)}static C(){return typeof window<"u"&&window.addEventListener!==void 0&&window.removeEventListener!==void 0}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Ea=null;function su(){return Ea===null?Ea=function(){return 268435456+Math.round(2147483648*Math.random())}():Ea++,"0x"+Ea.toString(16)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const od="RestConnection",Kj={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery",RunAggregationQuery:"runAggregationQuery"};class Qj{get Uo(){return!1}constructor(e){this.databaseInfo=e,this.databaseId=e.databaseId;const t=e.ssl?"https":"http",s=encodeURIComponent(this.databaseId.projectId),n=encodeURIComponent(this.databaseId.database);this.Ko=t+"://"+e.host,this.Wo=`projects/${s}/databases/${n}`,this.Go=this.databaseId.database===sl?`project_id=${s}`:`project_id=${s}&database_id=${n}`}zo(e,t,s,n,i){const a=su(),l=this.jo(e,t.toUriEncodedString());J(od,`Sending RPC '${e}' ${a}:`,l,s);const d={"google-cloud-resource-prefix":this.Wo,"x-goog-request-params":this.Go};this.Ho(d,n,i);const{host:u}=new URL(l),h=js(u);return this.Jo(e,l,d,s,h).then(m=>(J(od,`Received RPC '${e}' ${a}: `,m),m),m=>{throw Zn(od,`RPC '${e}' ${a} failed with error: `,m,"url: ",l,"request:",s),m})}Yo(e,t,s,n,i,a){return this.zo(e,t,s,n,i)}Ho(e,t,s){e["X-Goog-Api-Client"]=function(){return"gl-js/ fire/"+po}(),e["Content-Type"]="text/plain",this.databaseInfo.appId&&(e["X-Firebase-GMPID"]=this.databaseInfo.appId),t&&t.headers.forEach((n,i)=>e[i]=n),s&&s.headers.forEach((n,i)=>e[i]=n)}jo(e,t){const s=Kj[e];return`${this.Ko}/v1/${t}:${s}`}terminate(){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Yj{constructor(e){this.Zo=e.Zo,this.Xo=e.Xo}e_(e){this.t_=e}n_(e){this.r_=e}i_(e){this.s_=e}onMessage(e){this.o_=e}close(){this.Xo()}send(e){this.Zo(e)}__(){this.t_()}a_(){this.r_()}u_(e){this.s_(e)}c_(e){this.o_(e)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const gt="WebChannelConnection";class Xj extends Qj{constructor(e){super(e),this.l_=[],this.forceLongPolling=e.forceLongPolling,this.autoDetectLongPolling=e.autoDetectLongPolling,this.useFetchStreams=e.useFetchStreams,this.longPollingOptions=e.longPollingOptions}Jo(e,t,s,n,i){const a=su();return new Promise((l,d)=>{const u=new My;u.setWithCredentials(!0),u.listenOnce(Dy.COMPLETE,()=>{try{switch(u.getLastErrorCode()){case Da.NO_ERROR:const m=u.getResponseJson();J(gt,`XHR for RPC '${e}' ${a} received:`,JSON.stringify(m)),l(m);break;case Da.TIMEOUT:J(gt,`RPC '${e}' ${a} timed out`),d(new te(z.DEADLINE_EXCEEDED,"Request time out"));break;case Da.HTTP_ERROR:const x=u.getStatus();if(J(gt,`RPC '${e}' ${a} failed with status:`,x,"response text:",u.getResponseText()),x>0){let g=u.getResponseJson();Array.isArray(g)&&(g=g[0]);const v=g==null?void 0:g.error;if(v&&v.status&&v.message){const b=function(k){const T=k.toLowerCase().replace(/_/g,"-");return Object.values(z).indexOf(T)>=0?T:z.UNKNOWN}(v.status);d(new te(b,v.message))}else d(new te(z.UNKNOWN,"Server responded with status "+u.getStatus()))}else d(new te(z.UNAVAILABLE,"Connection failed."));break;default:de(9055,{h_:e,streamId:a,P_:u.getLastErrorCode(),T_:u.getLastError()})}}finally{J(gt,`RPC '${e}' ${a} completed.`)}});const h=JSON.stringify(n);J(gt,`RPC '${e}' ${a} sending request:`,n),u.send(t,"POST",h,s,15)})}I_(e,t,s){const n=su(),i=[this.Ko,"/","google.firestore.v1.Firestore","/",e,"/channel"],a=Vy(),l=Ly(),d={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling},u=this.longPollingOptions.timeoutSeconds;u!==void 0&&(d.longPollingTimeout=Math.round(1e3*u)),this.useFetchStreams&&(d.useFetchStreams=!0),this.Ho(d.initMessageHeaders,t,s),d.encodeInitMessageHeaders=!0;const h=i.join("");J(gt,`Creating RPC '${e}' stream ${n}: ${h}`,d);const m=a.createWebChannel(h,d);this.E_(m);let x=!1,g=!1;const v=new Yj({Zo:w=>{g?J(gt,`Not sending because RPC '${e}' stream ${n} is closed:`,w):(x||(J(gt,`Opening RPC '${e}' stream ${n} transport.`),m.open(),x=!0),J(gt,`RPC '${e}' stream ${n} sending:`,w),m.send(w))},Xo:()=>m.close()}),b=(w,k,T)=>{w.listen(k,_=>{try{T(_)}catch(R){setTimeout(()=>{throw R},0)}})};return b(m,qo.EventType.OPEN,()=>{g||(J(gt,`RPC '${e}' stream ${n} transport opened.`),v.__())}),b(m,qo.EventType.CLOSE,()=>{g||(g=!0,J(gt,`RPC '${e}' stream ${n} transport closed`),v.u_(),this.d_(m))}),b(m,qo.EventType.ERROR,w=>{g||(g=!0,Zn(gt,`RPC '${e}' stream ${n} transport errored. Name:`,w.name,"Message:",w.message),v.u_(new te(z.UNAVAILABLE,"The operation could not be completed")))}),b(m,qo.EventType.MESSAGE,w=>{var k;if(!g){const T=w.data[0];Oe(!!T,16349);const _=T,R=(_==null?void 0:_.error)||((k=_[0])===null||k===void 0?void 0:k.error);if(R){J(gt,`RPC '${e}' stream ${n} received error:`,R);const D=R.status;let $=function(E){const j=et[E];if(j!==void 0)return bb(j)}(D),S=R.message;$===void 0&&($=z.INTERNAL,S="Unknown error status: "+D+" with message "+R.message),g=!0,v.u_(new te($,S)),m.close()}else J(gt,`RPC '${e}' stream ${n} received:`,T),v.c_(T)}}),b(l,Oy.STAT_EVENT,w=>{w.stat===Hd.PROXY?J(gt,`RPC '${e}' stream ${n} detected buffering proxy`):w.stat===Hd.NOPROXY&&J(gt,`RPC '${e}' stream ${n} detected no buffering proxy`)}),setTimeout(()=>{v.a_()},0),v}terminate(){this.l_.forEach(e=>e.close()),this.l_=[]}E_(e){this.l_.push(e)}d_(e){this.l_=this.l_.filter(t=>t===e)}}function id(){return typeof document<"u"?document:null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Xl(r){return new tj(r,!0)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Rb{constructor(e,t,s=1e3,n=1.5,i=6e4){this.xi=e,this.timerId=t,this.A_=s,this.R_=n,this.V_=i,this.m_=0,this.f_=null,this.g_=Date.now(),this.reset()}reset(){this.m_=0}p_(){this.m_=this.V_}y_(e){this.cancel();const t=Math.floor(this.m_+this.w_()),s=Math.max(0,Date.now()-this.g_),n=Math.max(0,t-s);n>0&&J("ExponentialBackoff",`Backing off for ${n} ms (base delay: ${this.m_} ms, delay with jitter: ${t} ms, last attempt: ${s} ms ago)`),this.f_=this.xi.enqueueAfterDelay(this.timerId,n,()=>(this.g_=Date.now(),e())),this.m_*=this.R_,this.m_<this.A_&&(this.m_=this.A_),this.m_>this.V_&&(this.m_=this.V_)}b_(){this.f_!==null&&(this.f_.skipDelay(),this.f_=null)}cancel(){this.f_!==null&&(this.f_.cancel(),this.f_=null)}w_(){return(Math.random()-.5)*this.m_}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Zp="PersistentStream";class Mb{constructor(e,t,s,n,i,a,l,d){this.xi=e,this.S_=s,this.D_=n,this.connection=i,this.authCredentialsProvider=a,this.appCheckCredentialsProvider=l,this.listener=d,this.state=0,this.v_=0,this.C_=null,this.F_=null,this.stream=null,this.M_=0,this.x_=new Rb(e,t)}O_(){return this.state===1||this.state===5||this.N_()}N_(){return this.state===2||this.state===3}start(){this.M_=0,this.state!==4?this.auth():this.B_()}async stop(){this.O_()&&await this.close(0)}L_(){this.state=0,this.x_.reset()}k_(){this.N_()&&this.C_===null&&(this.C_=this.xi.enqueueAfterDelay(this.S_,6e4,()=>this.q_()))}Q_(e){this.U_(),this.stream.send(e)}async q_(){if(this.N_())return this.close(0)}U_(){this.C_&&(this.C_.cancel(),this.C_=null)}K_(){this.F_&&(this.F_.cancel(),this.F_=null)}async close(e,t){this.U_(),this.K_(),this.x_.cancel(),this.v_++,e!==4?this.x_.reset():t&&t.code===z.RESOURCE_EXHAUSTED?(Lr(t.toString()),Lr("Using maximum backoff delay to prevent overloading the backend."),this.x_.p_()):t&&t.code===z.UNAUTHENTICATED&&this.state!==3&&(this.authCredentialsProvider.invalidateToken(),this.appCheckCredentialsProvider.invalidateToken()),this.stream!==null&&(this.W_(),this.stream.close(),this.stream=null),this.state=e,await this.listener.i_(t)}W_(){}auth(){this.state=1;const e=this.G_(this.v_),t=this.v_;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then(([s,n])=>{this.v_===t&&this.z_(s,n)},s=>{e(()=>{const n=new te(z.UNKNOWN,"Fetching auth token failed: "+s.message);return this.j_(n)})})}z_(e,t){const s=this.G_(this.v_);this.stream=this.H_(e,t),this.stream.e_(()=>{s(()=>this.listener.e_())}),this.stream.n_(()=>{s(()=>(this.state=2,this.F_=this.xi.enqueueAfterDelay(this.D_,1e4,()=>(this.N_()&&(this.state=3),Promise.resolve())),this.listener.n_()))}),this.stream.i_(n=>{s(()=>this.j_(n))}),this.stream.onMessage(n=>{s(()=>++this.M_==1?this.J_(n):this.onNext(n))})}B_(){this.state=5,this.x_.y_(async()=>{this.state=0,this.start()})}j_(e){return J(Zp,`close with error: ${e}`),this.stream=null,this.close(4,e)}G_(e){return t=>{this.xi.enqueueAndForget(()=>this.v_===e?t():(J(Zp,"stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve()))}}}class Jj extends Mb{constructor(e,t,s,n,i,a){super(e,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",t,s,n,a),this.serializer=i}H_(e,t){return this.connection.I_("Listen",e,t)}J_(e){return this.onNext(e)}onNext(e){this.x_.reset();const t=nj(this.serializer,e),s=function(i){if(!("targetChange"in i))return fe.min();const a=i.targetChange;return a.targetIds&&a.targetIds.length?fe.min():a.readTime?hr(a.readTime):fe.min()}(e);return this.listener.Y_(t,s)}Z_(e){const t={};t.database=tu(this.serializer),t.addTarget=function(i,a){let l;const d=a.target;if(l=Qd(d)?{documents:aj(i,d)}:{query:lj(i,d).gt},l.targetId=a.targetId,a.resumeToken.approximateByteSize()>0){l.resumeToken=_b(i,a.resumeToken);const u=Jd(i,a.expectedCount);u!==null&&(l.expectedCount=u)}else if(a.snapshotVersion.compareTo(fe.min())>0){l.readTime=cl(i,a.snapshotVersion.toTimestamp());const u=Jd(i,a.expectedCount);u!==null&&(l.expectedCount=u)}return l}(this.serializer,e);const s=dj(this.serializer,e);s&&(t.labels=s),this.Q_(t)}X_(e){const t={};t.database=tu(this.serializer),t.removeTarget=e,this.Q_(t)}}class Zj extends Mb{constructor(e,t,s,n,i,a){super(e,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",t,s,n,a),this.serializer=i}get ea(){return this.M_>0}start(){this.lastStreamToken=void 0,super.start()}W_(){this.ea&&this.ta([])}H_(e,t){return this.connection.I_("Write",e,t)}J_(e){return Oe(!!e.streamToken,31322),this.lastStreamToken=e.streamToken,Oe(!e.writeResults||e.writeResults.length===0,55816),this.listener.na()}onNext(e){Oe(!!e.streamToken,12678),this.lastStreamToken=e.streamToken,this.x_.reset();const t=ij(e.writeResults,e.commitTime),s=hr(e.commitTime);return this.listener.ra(s,t)}ia(){const e={};e.database=tu(this.serializer),this.Q_(e)}ta(e){const t={streamToken:this.lastStreamToken,writes:e.map(s=>oj(this.serializer,s))};this.Q_(t)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class eA{}class tA extends eA{constructor(e,t,s,n){super(),this.authCredentials=e,this.appCheckCredentials=t,this.connection=s,this.serializer=n,this.sa=!1}oa(){if(this.sa)throw new te(z.FAILED_PRECONDITION,"The client has already been terminated.")}zo(e,t,s,n){return this.oa(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([i,a])=>this.connection.zo(e,Zd(t,s),n,i,a)).catch(i=>{throw i.name==="FirebaseError"?(i.code===z.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),i):new te(z.UNKNOWN,i.toString())})}Yo(e,t,s,n,i){return this.oa(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([a,l])=>this.connection.Yo(e,Zd(t,s),n,a,l,i)).catch(a=>{throw a.name==="FirebaseError"?(a.code===z.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),a):new te(z.UNKNOWN,a.toString())})}terminate(){this.sa=!0,this.connection.terminate()}}class rA{constructor(e,t){this.asyncQueue=e,this.onlineStateHandler=t,this.state="Unknown",this._a=0,this.aa=null,this.ua=!0}ca(){this._a===0&&(this.la("Unknown"),this.aa=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,()=>(this.aa=null,this.ha("Backend didn't respond within 10 seconds."),this.la("Offline"),Promise.resolve())))}Pa(e){this.state==="Online"?this.la("Unknown"):(this._a++,this._a>=1&&(this.Ta(),this.ha(`Connection failed 1 times. Most recent error: ${e.toString()}`),this.la("Offline")))}set(e){this.Ta(),this._a=0,e==="Online"&&(this.ua=!1),this.la(e)}la(e){e!==this.state&&(this.state=e,this.onlineStateHandler(e))}ha(e){const t=`Could not reach Cloud Firestore backend. ${e}
This typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this.ua?(Lr(t),this.ua=!1):J("OnlineStateTracker",t)}Ta(){this.aa!==null&&(this.aa.cancel(),this.aa=null)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ln="RemoteStore";class sA{constructor(e,t,s,n,i){this.localStore=e,this.datastore=t,this.asyncQueue=s,this.remoteSyncer={},this.Ia=[],this.Ea=new Map,this.da=new Set,this.Aa=[],this.Ra=i,this.Ra.No(a=>{s.enqueueAndForget(async()=>{gn(this)&&(J(ln,"Restarting streams for network reachability change."),await async function(d){const u=pe(d);u.da.add(4),await zi(u),u.Va.set("Unknown"),u.da.delete(4),await Jl(u)}(this))})}),this.Va=new rA(s,n)}}async function Jl(r){if(gn(r))for(const e of r.Aa)await e(!0)}async function zi(r){for(const e of r.Aa)await e(!1)}function Db(r,e){const t=pe(r);t.Ea.has(e.targetId)||(t.Ea.set(e.targetId,e),Eh(t)?Th(t):yo(t).N_()&&_h(t,e))}function wh(r,e){const t=pe(r),s=yo(t);t.Ea.delete(e),s.N_()&&Ob(t,e),t.Ea.size===0&&(s.N_()?s.k_():gn(t)&&t.Va.set("Unknown"))}function _h(r,e){if(r.ma.Ke(e.targetId),e.resumeToken.approximateByteSize()>0||e.snapshotVersion.compareTo(fe.min())>0){const t=r.remoteSyncer.getRemoteKeysForTarget(e.targetId).size;e=e.withExpectedCount(t)}yo(r).Z_(e)}function Ob(r,e){r.ma.Ke(e),yo(r).X_(e)}function Th(r){r.ma=new Xk({getRemoteKeysForTarget:e=>r.remoteSyncer.getRemoteKeysForTarget(e),Rt:e=>r.Ea.get(e)||null,Pt:()=>r.datastore.serializer.databaseId}),yo(r).start(),r.Va.ca()}function Eh(r){return gn(r)&&!yo(r).O_()&&r.Ea.size>0}function gn(r){return pe(r).da.size===0}function Lb(r){r.ma=void 0}async function nA(r){r.Va.set("Online")}async function oA(r){r.Ea.forEach((e,t)=>{_h(r,e)})}async function iA(r,e){Lb(r),Eh(r)?(r.Va.Pa(e),Th(r)):r.Va.set("Unknown")}async function aA(r,e,t){if(r.Va.set("Online"),e instanceof wb&&e.state===2&&e.cause)try{await async function(n,i){const a=i.cause;for(const l of i.targetIds)n.Ea.has(l)&&(await n.remoteSyncer.rejectListen(l,a),n.Ea.delete(l),n.ma.removeTarget(l))}(r,e)}catch(s){J(ln,"Failed to remove targets %s: %s ",e.targetIds.join(","),s),await ul(r,s)}else if(e instanceof Fa?r.ma.Xe(e):e instanceof vb?r.ma.ot(e):r.ma.nt(e),!t.isEqual(fe.min()))try{const s=await Pb(r.localStore);t.compareTo(s)>=0&&await function(i,a){const l=i.ma.It(a);return l.targetChanges.forEach((d,u)=>{if(d.resumeToken.approximateByteSize()>0){const h=i.Ea.get(u);h&&i.Ea.set(u,h.withResumeToken(d.resumeToken,a))}}),l.targetMismatches.forEach((d,u)=>{const h=i.Ea.get(d);if(!h)return;i.Ea.set(d,h.withResumeToken(ht.EMPTY_BYTE_STRING,h.snapshotVersion)),Ob(i,d);const m=new ms(h.target,d,u,h.sequenceNumber);_h(i,m)}),i.remoteSyncer.applyRemoteEvent(l)}(r,t)}catch(s){J(ln,"Failed to raise snapshot:",s),await ul(r,s)}}async function ul(r,e,t){if(!xo(e))throw e;r.da.add(1),await zi(r),r.Va.set("Offline"),t||(t=()=>Pb(r.localStore)),r.asyncQueue.enqueueRetryable(async()=>{J(ln,"Retrying IndexedDB access"),await t(),r.da.delete(1),await Jl(r)})}function Vb(r,e){return e().catch(t=>ul(r,t,e))}async function Zl(r){const e=pe(r),t=Ss(e);let s=e.Ia.length>0?e.Ia[e.Ia.length-1].batchId:ah;for(;lA(e);)try{const n=await zj(e.localStore,s);if(n===null){e.Ia.length===0&&t.k_();break}s=n.batchId,cA(e,n)}catch(n){await ul(e,n)}Fb(e)&&Ub(e)}function lA(r){return gn(r)&&r.Ia.length<10}function cA(r,e){r.Ia.push(e);const t=Ss(r);t.N_()&&t.ea&&t.ta(e.mutations)}function Fb(r){return gn(r)&&!Ss(r).O_()&&r.Ia.length>0}function Ub(r){Ss(r).start()}async function dA(r){Ss(r).ia()}async function uA(r){const e=Ss(r);for(const t of r.Ia)e.ta(t.mutations)}async function hA(r,e,t){const s=r.Ia.shift(),n=mh.from(s,e,t);await Vb(r,()=>r.remoteSyncer.applySuccessfulWrite(n)),await Zl(r)}async function fA(r,e){e&&Ss(r).ea&&await async function(s,n){if(function(a){return Qk(a)&&a!==z.ABORTED}(n.code)){const i=s.Ia.shift();Ss(s).L_(),await Vb(s,()=>s.remoteSyncer.rejectFailedWrite(i.batchId,n)),await Zl(s)}}(r,e),Fb(r)&&Ub(r)}async function eg(r,e){const t=pe(r);t.asyncQueue.verifyOperationInProgress(),J(ln,"RemoteStore received new credentials");const s=gn(t);t.da.add(3),await zi(t),s&&t.Va.set("Unknown"),await t.remoteSyncer.handleCredentialChange(e),t.da.delete(3),await Jl(t)}async function mA(r,e){const t=pe(r);e?(t.da.delete(2),await Jl(t)):e||(t.da.add(2),await zi(t),t.Va.set("Unknown"))}function yo(r){return r.fa||(r.fa=function(t,s,n){const i=pe(t);return i.oa(),new Jj(s,i.connection,i.authCredentials,i.appCheckCredentials,i.serializer,n)}(r.datastore,r.asyncQueue,{e_:nA.bind(null,r),n_:oA.bind(null,r),i_:iA.bind(null,r),Y_:aA.bind(null,r)}),r.Aa.push(async e=>{e?(r.fa.L_(),Eh(r)?Th(r):r.Va.set("Unknown")):(await r.fa.stop(),Lb(r))})),r.fa}function Ss(r){return r.ga||(r.ga=function(t,s,n){const i=pe(t);return i.oa(),new Zj(s,i.connection,i.authCredentials,i.appCheckCredentials,i.serializer,n)}(r.datastore,r.asyncQueue,{e_:()=>Promise.resolve(),n_:dA.bind(null,r),i_:fA.bind(null,r),na:uA.bind(null,r),ra:hA.bind(null,r)}),r.Aa.push(async e=>{e?(r.ga.L_(),await Zl(r)):(await r.ga.stop(),r.Ia.length>0&&(J(ln,`Stopping write stream with ${r.Ia.length} pending writes`),r.Ia=[]))})),r.ga}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Nh{constructor(e,t,s,n,i){this.asyncQueue=e,this.timerId=t,this.targetTimeMs=s,this.op=n,this.removalCallback=i,this.deferred=new Pr,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch(a=>{})}get promise(){return this.deferred.promise}static createAndSchedule(e,t,s,n,i){const a=Date.now()+s,l=new Nh(e,t,a,n,i);return l.start(s),l}start(e){this.timerHandle=setTimeout(()=>this.handleDelayElapsed(),e)}skipDelay(){return this.handleDelayElapsed()}cancel(e){this.timerHandle!==null&&(this.clearTimeout(),this.deferred.reject(new te(z.CANCELLED,"Operation cancelled"+(e?": "+e:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget(()=>this.timerHandle!==null?(this.clearTimeout(),this.op().then(e=>this.deferred.resolve(e))):Promise.resolve())}clearTimeout(){this.timerHandle!==null&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}}function Ch(r,e){if(Lr("AsyncQueue",`${e}: ${r}`),xo(r))return new te(z.UNAVAILABLE,`${e}: ${r}`);throw r}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Mn{static emptySet(e){return new Mn(e.comparator)}constructor(e){this.comparator=e?(t,s)=>e(t,s)||ae.comparator(t.key,s.key):(t,s)=>ae.comparator(t.key,s.key),this.keyedMap=Wo(),this.sortedSet=new Ge(this.comparator)}has(e){return this.keyedMap.get(e)!=null}get(e){return this.keyedMap.get(e)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(e){const t=this.keyedMap.get(e);return t?this.sortedSet.indexOf(t):-1}get size(){return this.sortedSet.size}forEach(e){this.sortedSet.inorderTraversal((t,s)=>(e(t),!1))}add(e){const t=this.delete(e.key);return t.copy(t.keyedMap.insert(e.key,e),t.sortedSet.insert(e,null))}delete(e){const t=this.get(e);return t?this.copy(this.keyedMap.remove(e),this.sortedSet.remove(t)):this}isEqual(e){if(!(e instanceof Mn)||this.size!==e.size)return!1;const t=this.sortedSet.getIterator(),s=e.sortedSet.getIterator();for(;t.hasNext();){const n=t.getNext().key,i=s.getNext().key;if(!n.isEqual(i))return!1}return!0}toString(){const e=[];return this.forEach(t=>{e.push(t.toString())}),e.length===0?"DocumentSet ()":`DocumentSet (
  `+e.join(`  
`)+`
)`}copy(e,t){const s=new Mn;return s.comparator=this.comparator,s.keyedMap=e,s.sortedSet=t,s}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class tg{constructor(){this.pa=new Ge(ae.comparator)}track(e){const t=e.doc.key,s=this.pa.get(t);s?e.type!==0&&s.type===3?this.pa=this.pa.insert(t,e):e.type===3&&s.type!==1?this.pa=this.pa.insert(t,{type:s.type,doc:e.doc}):e.type===2&&s.type===2?this.pa=this.pa.insert(t,{type:2,doc:e.doc}):e.type===2&&s.type===0?this.pa=this.pa.insert(t,{type:0,doc:e.doc}):e.type===1&&s.type===0?this.pa=this.pa.remove(t):e.type===1&&s.type===2?this.pa=this.pa.insert(t,{type:1,doc:s.doc}):e.type===0&&s.type===1?this.pa=this.pa.insert(t,{type:2,doc:e.doc}):de(63341,{Vt:e,ya:s}):this.pa=this.pa.insert(t,e)}wa(){const e=[];return this.pa.inorderTraversal((t,s)=>{e.push(s)}),e}}class no{constructor(e,t,s,n,i,a,l,d,u){this.query=e,this.docs=t,this.oldDocs=s,this.docChanges=n,this.mutatedKeys=i,this.fromCache=a,this.syncStateChanged=l,this.excludesMetadataChanges=d,this.hasCachedResults=u}static fromInitialDocuments(e,t,s,n,i){const a=[];return t.forEach(l=>{a.push({type:0,doc:l})}),new no(e,t,Mn.emptySet(t),a,s,n,!0,!1,i)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(e){if(!(this.fromCache===e.fromCache&&this.hasCachedResults===e.hasCachedResults&&this.syncStateChanged===e.syncStateChanged&&this.mutatedKeys.isEqual(e.mutatedKeys)&&Wl(this.query,e.query)&&this.docs.isEqual(e.docs)&&this.oldDocs.isEqual(e.oldDocs)))return!1;const t=this.docChanges,s=e.docChanges;if(t.length!==s.length)return!1;for(let n=0;n<t.length;n++)if(t[n].type!==s[n].type||!t[n].doc.isEqual(s[n].doc))return!1;return!0}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class pA{constructor(){this.ba=void 0,this.Sa=[]}Da(){return this.Sa.some(e=>e.va())}}class gA{constructor(){this.queries=rg(),this.onlineState="Unknown",this.Ca=new Set}terminate(){(function(t,s){const n=pe(t),i=n.queries;n.queries=rg(),i.forEach((a,l)=>{for(const d of l.Sa)d.onError(s)})})(this,new te(z.ABORTED,"Firestore shutting down"))}}function rg(){return new pn(r=>ib(r),Wl)}async function $b(r,e){const t=pe(r);let s=3;const n=e.query;let i=t.queries.get(n);i?!i.Da()&&e.va()&&(s=2):(i=new pA,s=e.va()?0:1);try{switch(s){case 0:i.ba=await t.onListen(n,!0);break;case 1:i.ba=await t.onListen(n,!1);break;case 2:await t.onFirstRemoteStoreListen(n)}}catch(a){const l=Ch(a,`Initialization of query '${En(e.query)}' failed`);return void e.onError(l)}t.queries.set(n,i),i.Sa.push(e),e.Fa(t.onlineState),i.ba&&e.Ma(i.ba)&&Ih(t)}async function Bb(r,e){const t=pe(r),s=e.query;let n=3;const i=t.queries.get(s);if(i){const a=i.Sa.indexOf(e);a>=0&&(i.Sa.splice(a,1),i.Sa.length===0?n=e.va()?0:1:!i.Da()&&e.va()&&(n=2))}switch(n){case 0:return t.queries.delete(s),t.onUnlisten(s,!0);case 1:return t.queries.delete(s),t.onUnlisten(s,!1);case 2:return t.onLastRemoteStoreUnlisten(s);default:return}}function xA(r,e){const t=pe(r);let s=!1;for(const n of e){const i=n.query,a=t.queries.get(i);if(a){for(const l of a.Sa)l.Ma(n)&&(s=!0);a.ba=n}}s&&Ih(t)}function yA(r,e,t){const s=pe(r),n=s.queries.get(e);if(n)for(const i of n.Sa)i.onError(t);s.queries.delete(e)}function Ih(r){r.Ca.forEach(e=>{e.next()})}var nu,sg;(sg=nu||(nu={})).xa="default",sg.Cache="cache";class zb{constructor(e,t,s){this.query=e,this.Oa=t,this.Na=!1,this.Ba=null,this.onlineState="Unknown",this.options=s||{}}Ma(e){if(!this.options.includeMetadataChanges){const s=[];for(const n of e.docChanges)n.type!==3&&s.push(n);e=new no(e.query,e.docs,e.oldDocs,s,e.mutatedKeys,e.fromCache,e.syncStateChanged,!0,e.hasCachedResults)}let t=!1;return this.Na?this.La(e)&&(this.Oa.next(e),t=!0):this.ka(e,this.onlineState)&&(this.qa(e),t=!0),this.Ba=e,t}onError(e){this.Oa.error(e)}Fa(e){this.onlineState=e;let t=!1;return this.Ba&&!this.Na&&this.ka(this.Ba,e)&&(this.qa(this.Ba),t=!0),t}ka(e,t){if(!e.fromCache||!this.va())return!0;const s=t!=="Offline";return(!this.options.Qa||!s)&&(!e.docs.isEmpty()||e.hasCachedResults||t==="Offline")}La(e){if(e.docChanges.length>0)return!0;const t=this.Ba&&this.Ba.hasPendingWrites!==e.hasPendingWrites;return!(!e.syncStateChanged&&!t)&&this.options.includeMetadataChanges===!0}qa(e){e=no.fromInitialDocuments(e.query,e.docs,e.mutatedKeys,e.fromCache,e.hasCachedResults),this.Na=!0,this.Oa.next(e)}va(){return this.options.source!==nu.Cache}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Hb{constructor(e){this.key=e}}class qb{constructor(e){this.key=e}}class bA{constructor(e,t){this.query=e,this.Ha=t,this.Ja=null,this.hasCachedResults=!1,this.current=!1,this.Ya=Ne(),this.mutatedKeys=Ne(),this.Za=ab(e),this.Xa=new Mn(this.Za)}get eu(){return this.Ha}tu(e,t){const s=t?t.nu:new tg,n=t?t.Xa:this.Xa;let i=t?t.mutatedKeys:this.mutatedKeys,a=n,l=!1;const d=this.query.limitType==="F"&&n.size===this.query.limit?n.last():null,u=this.query.limitType==="L"&&n.size===this.query.limit?n.first():null;if(e.inorderTraversal((h,m)=>{const x=n.get(h),g=Gl(this.query,m)?m:null,v=!!x&&this.mutatedKeys.has(x.key),b=!!g&&(g.hasLocalMutations||this.mutatedKeys.has(g.key)&&g.hasCommittedMutations);let w=!1;x&&g?x.data.isEqual(g.data)?v!==b&&(s.track({type:3,doc:g}),w=!0):this.ru(x,g)||(s.track({type:2,doc:g}),w=!0,(d&&this.Za(g,d)>0||u&&this.Za(g,u)<0)&&(l=!0)):!x&&g?(s.track({type:0,doc:g}),w=!0):x&&!g&&(s.track({type:1,doc:x}),w=!0,(d||u)&&(l=!0)),w&&(g?(a=a.add(g),i=b?i.add(h):i.delete(h)):(a=a.delete(h),i=i.delete(h)))}),this.query.limit!==null)for(;a.size>this.query.limit;){const h=this.query.limitType==="F"?a.last():a.first();a=a.delete(h.key),i=i.delete(h.key),s.track({type:1,doc:h})}return{Xa:a,nu:s,Cs:l,mutatedKeys:i}}ru(e,t){return e.hasLocalMutations&&t.hasCommittedMutations&&!t.hasLocalMutations}applyChanges(e,t,s,n){const i=this.Xa;this.Xa=e.Xa,this.mutatedKeys=e.mutatedKeys;const a=e.nu.wa();a.sort((h,m)=>function(g,v){const b=w=>{switch(w){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return de(20277,{Vt:w})}};return b(g)-b(v)}(h.type,m.type)||this.Za(h.doc,m.doc)),this.iu(s),n=n!=null&&n;const l=t&&!n?this.su():[],d=this.Ya.size===0&&this.current&&!n?1:0,u=d!==this.Ja;return this.Ja=d,a.length!==0||u?{snapshot:new no(this.query,e.Xa,i,a,e.mutatedKeys,d===0,u,!1,!!s&&s.resumeToken.approximateByteSize()>0),ou:l}:{ou:l}}Fa(e){return this.current&&e==="Offline"?(this.current=!1,this.applyChanges({Xa:this.Xa,nu:new tg,mutatedKeys:this.mutatedKeys,Cs:!1},!1)):{ou:[]}}_u(e){return!this.Ha.has(e)&&!!this.Xa.has(e)&&!this.Xa.get(e).hasLocalMutations}iu(e){e&&(e.addedDocuments.forEach(t=>this.Ha=this.Ha.add(t)),e.modifiedDocuments.forEach(t=>{}),e.removedDocuments.forEach(t=>this.Ha=this.Ha.delete(t)),this.current=e.current)}su(){if(!this.current)return[];const e=this.Ya;this.Ya=Ne(),this.Xa.forEach(s=>{this._u(s.key)&&(this.Ya=this.Ya.add(s.key))});const t=[];return e.forEach(s=>{this.Ya.has(s)||t.push(new qb(s))}),this.Ya.forEach(s=>{e.has(s)||t.push(new Hb(s))}),t}au(e){this.Ha=e.$s,this.Ya=Ne();const t=this.tu(e.documents);return this.applyChanges(t,!0)}uu(){return no.fromInitialDocuments(this.query,this.Xa,this.mutatedKeys,this.Ja===0,this.hasCachedResults)}}const Sh="SyncEngine";class vA{constructor(e,t,s){this.query=e,this.targetId=t,this.view=s}}class wA{constructor(e){this.key=e,this.cu=!1}}class _A{constructor(e,t,s,n,i,a){this.localStore=e,this.remoteStore=t,this.eventManager=s,this.sharedClientState=n,this.currentUser=i,this.maxConcurrentLimboResolutions=a,this.lu={},this.hu=new pn(l=>ib(l),Wl),this.Pu=new Map,this.Tu=new Set,this.Iu=new Ge(ae.comparator),this.Eu=new Map,this.du=new xh,this.Au={},this.Ru=new Map,this.Vu=so.lr(),this.onlineState="Unknown",this.mu=void 0}get isPrimaryClient(){return this.mu===!0}}async function TA(r,e,t=!0){const s=Xb(r);let n;const i=s.hu.get(e);return i?(s.sharedClientState.addLocalQueryTarget(i.targetId),n=i.view.uu()):n=await Wb(s,e,t,!0),n}async function EA(r,e){const t=Xb(r);await Wb(t,e,!0,!1)}async function Wb(r,e,t,s){const n=await Hj(r.localStore,dr(e)),i=n.targetId,a=r.sharedClientState.addLocalQueryTarget(i,t);let l;return s&&(l=await NA(r,e,i,a==="current",n.resumeToken)),r.isPrimaryClient&&t&&Db(r.remoteStore,n),l}async function NA(r,e,t,s,n){r.fu=(m,x,g)=>async function(b,w,k,T){let _=w.view.tu(k);_.Cs&&(_=await Qp(b.localStore,w.query,!1).then(({documents:S})=>w.view.tu(S,_)));const R=T&&T.targetChanges.get(w.targetId),D=T&&T.targetMismatches.get(w.targetId)!=null,$=w.view.applyChanges(_,b.isPrimaryClient,R,D);return og(b,w.targetId,$.ou),$.snapshot}(r,m,x,g);const i=await Qp(r.localStore,e,!0),a=new bA(e,i.$s),l=a.tu(i.documents),d=Bi.createSynthesizedTargetChangeForCurrentChange(t,s&&r.onlineState!=="Offline",n),u=a.applyChanges(l,r.isPrimaryClient,d);og(r,t,u.ou);const h=new vA(e,t,a);return r.hu.set(e,h),r.Pu.has(t)?r.Pu.get(t).push(e):r.Pu.set(t,[e]),u.snapshot}async function CA(r,e,t){const s=pe(r),n=s.hu.get(e),i=s.Pu.get(n.targetId);if(i.length>1)return s.Pu.set(n.targetId,i.filter(a=>!Wl(a,e))),void s.hu.delete(e);s.isPrimaryClient?(s.sharedClientState.removeLocalQueryTarget(n.targetId),s.sharedClientState.isActiveQueryTarget(n.targetId)||await ru(s.localStore,n.targetId,!1).then(()=>{s.sharedClientState.clearQueryState(n.targetId),t&&wh(s.remoteStore,n.targetId),ou(s,n.targetId)}).catch(go)):(ou(s,n.targetId),await ru(s.localStore,n.targetId,!0))}async function IA(r,e){const t=pe(r),s=t.hu.get(e),n=t.Pu.get(s.targetId);t.isPrimaryClient&&n.length===1&&(t.sharedClientState.removeLocalQueryTarget(s.targetId),wh(t.remoteStore,s.targetId))}async function SA(r,e,t){const s=DA(r);try{const n=await function(a,l){const d=pe(a),u=nt.now(),h=l.reduce((g,v)=>g.add(v.key),Ne());let m,x;return d.persistence.runTransaction("Locally write mutations","readwrite",g=>{let v=Vr(),b=Ne();return d.Bs.getEntries(g,h).next(w=>{v=w,v.forEach((k,T)=>{T.isValidDocument()||(b=b.add(k))})}).next(()=>d.localDocuments.getOverlayedDocuments(g,v)).next(w=>{m=w;const k=[];for(const T of l){const _=Hk(T,m.get(T.key).overlayedDocument);_!=null&&k.push(new Ps(T.key,_,Jy(_.value.mapValue),ur.exists(!0)))}return d.mutationQueue.addMutationBatch(g,u,k,l)}).next(w=>{x=w;const k=w.applyToLocalDocumentSet(m,b);return d.documentOverlayCache.saveOverlays(g,w.batchId,k)})}).then(()=>({batchId:x.batchId,changes:cb(m)}))}(s.localStore,e);s.sharedClientState.addPendingMutation(n.batchId),function(a,l,d){let u=a.Au[a.currentUser.toKey()];u||(u=new Ge(Te)),u=u.insert(l,d),a.Au[a.currentUser.toKey()]=u}(s,n.batchId,t),await Hi(s,n.changes),await Zl(s.remoteStore)}catch(n){const i=Ch(n,"Failed to persist write");t.reject(i)}}async function Gb(r,e){const t=pe(r);try{const s=await $j(t.localStore,e);e.targetChanges.forEach((n,i)=>{const a=t.Eu.get(i);a&&(Oe(n.addedDocuments.size+n.modifiedDocuments.size+n.removedDocuments.size<=1,22616),n.addedDocuments.size>0?a.cu=!0:n.modifiedDocuments.size>0?Oe(a.cu,14607):n.removedDocuments.size>0&&(Oe(a.cu,42227),a.cu=!1))}),await Hi(t,s,e)}catch(s){await go(s)}}function ng(r,e,t){const s=pe(r);if(s.isPrimaryClient&&t===0||!s.isPrimaryClient&&t===1){const n=[];s.hu.forEach((i,a)=>{const l=a.view.Fa(e);l.snapshot&&n.push(l.snapshot)}),function(a,l){const d=pe(a);d.onlineState=l;let u=!1;d.queries.forEach((h,m)=>{for(const x of m.Sa)x.Fa(l)&&(u=!0)}),u&&Ih(d)}(s.eventManager,e),n.length&&s.lu.Y_(n),s.onlineState=e,s.isPrimaryClient&&s.sharedClientState.setOnlineState(e)}}async function kA(r,e,t){const s=pe(r);s.sharedClientState.updateQueryState(e,"rejected",t);const n=s.Eu.get(e),i=n&&n.key;if(i){let a=new Ge(ae.comparator);a=a.insert(i,bt.newNoDocument(i,fe.min()));const l=Ne().add(i),d=new Yl(fe.min(),new Map,new Ge(Te),a,l);await Gb(s,d),s.Iu=s.Iu.remove(i),s.Eu.delete(e),kh(s)}else await ru(s.localStore,e,!1).then(()=>ou(s,e,t)).catch(go)}async function jA(r,e){const t=pe(r),s=e.batch.batchId;try{const n=await Uj(t.localStore,e);Qb(t,s,null),Kb(t,s),t.sharedClientState.updateMutationState(s,"acknowledged"),await Hi(t,n)}catch(n){await go(n)}}async function AA(r,e,t){const s=pe(r);try{const n=await function(a,l){const d=pe(a);return d.persistence.runTransaction("Reject batch","readwrite-primary",u=>{let h;return d.mutationQueue.lookupMutationBatch(u,l).next(m=>(Oe(m!==null,37113),h=m.keys(),d.mutationQueue.removeMutationBatch(u,m))).next(()=>d.mutationQueue.performConsistencyCheck(u)).next(()=>d.documentOverlayCache.removeOverlaysForBatchId(u,h,l)).next(()=>d.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(u,h)).next(()=>d.localDocuments.getDocuments(u,h))})}(s.localStore,e);Qb(s,e,t),Kb(s,e),s.sharedClientState.updateMutationState(e,"rejected",t),await Hi(s,n)}catch(n){await go(n)}}function Kb(r,e){(r.Ru.get(e)||[]).forEach(t=>{t.resolve()}),r.Ru.delete(e)}function Qb(r,e,t){const s=pe(r);let n=s.Au[s.currentUser.toKey()];if(n){const i=n.get(e);i&&(t?i.reject(t):i.resolve(),n=n.remove(e)),s.Au[s.currentUser.toKey()]=n}}function ou(r,e,t=null){r.sharedClientState.removeLocalQueryTarget(e);for(const s of r.Pu.get(e))r.hu.delete(s),t&&r.lu.gu(s,t);r.Pu.delete(e),r.isPrimaryClient&&r.du.Hr(e).forEach(s=>{r.du.containsKey(s)||Yb(r,s)})}function Yb(r,e){r.Tu.delete(e.path.canonicalString());const t=r.Iu.get(e);t!==null&&(wh(r.remoteStore,t),r.Iu=r.Iu.remove(e),r.Eu.delete(t),kh(r))}function og(r,e,t){for(const s of t)s instanceof Hb?(r.du.addReference(s.key,e),PA(r,s)):s instanceof qb?(J(Sh,"Document no longer in limbo: "+s.key),r.du.removeReference(s.key,e),r.du.containsKey(s.key)||Yb(r,s.key)):de(19791,{pu:s})}function PA(r,e){const t=e.key,s=t.path.canonicalString();r.Iu.get(t)||r.Tu.has(s)||(J(Sh,"New document in limbo: "+t),r.Tu.add(s),kh(r))}function kh(r){for(;r.Tu.size>0&&r.Iu.size<r.maxConcurrentLimboResolutions;){const e=r.Tu.values().next().value;r.Tu.delete(e);const t=new ae(qe.fromString(e)),s=r.Vu.next();r.Eu.set(s,new wA(t)),r.Iu=r.Iu.insert(t,s),Db(r.remoteStore,new ms(dr(hh(t.path)),s,"TargetPurposeLimboResolution",zl.le))}}async function Hi(r,e,t){const s=pe(r),n=[],i=[],a=[];s.hu.isEmpty()||(s.hu.forEach((l,d)=>{a.push(s.fu(d,e,t).then(u=>{var h;if((u||t)&&s.isPrimaryClient){const m=u?!u.fromCache:(h=t==null?void 0:t.targetChanges.get(d.targetId))===null||h===void 0?void 0:h.current;s.sharedClientState.updateQueryState(d.targetId,m?"current":"not-current")}if(u){n.push(u);const m=bh.Rs(d.targetId,u);i.push(m)}}))}),await Promise.all(a),s.lu.Y_(n),await async function(d,u){const h=pe(d);try{await h.persistence.runTransaction("notifyLocalViewChanges","readwrite",m=>B.forEach(u,x=>B.forEach(x.ds,g=>h.persistence.referenceDelegate.addReference(m,x.targetId,g)).next(()=>B.forEach(x.As,g=>h.persistence.referenceDelegate.removeReference(m,x.targetId,g)))))}catch(m){if(!xo(m))throw m;J(vh,"Failed to update sequence numbers: "+m)}for(const m of u){const x=m.targetId;if(!m.fromCache){const g=h.xs.get(x),v=g.snapshotVersion,b=g.withLastLimboFreeSnapshotVersion(v);h.xs=h.xs.insert(x,b)}}}(s.localStore,i))}async function RA(r,e){const t=pe(r);if(!t.currentUser.isEqual(e)){J(Sh,"User change. New user:",e.toKey());const s=await Ab(t.localStore,e);t.currentUser=e,function(i,a){i.Ru.forEach(l=>{l.forEach(d=>{d.reject(new te(z.CANCELLED,a))})}),i.Ru.clear()}(t,"'waitForPendingWrites' promise is rejected due to a user change."),t.sharedClientState.handleUserChange(e,s.removedBatchIds,s.addedBatchIds),await Hi(t,s.ks)}}function MA(r,e){const t=pe(r),s=t.Eu.get(e);if(s&&s.cu)return Ne().add(s.key);{let n=Ne();const i=t.Pu.get(e);if(!i)return n;for(const a of i){const l=t.hu.get(a);n=n.unionWith(l.view.eu)}return n}}function Xb(r){const e=pe(r);return e.remoteStore.remoteSyncer.applyRemoteEvent=Gb.bind(null,e),e.remoteStore.remoteSyncer.getRemoteKeysForTarget=MA.bind(null,e),e.remoteStore.remoteSyncer.rejectListen=kA.bind(null,e),e.lu.Y_=xA.bind(null,e.eventManager),e.lu.gu=yA.bind(null,e.eventManager),e}function DA(r){const e=pe(r);return e.remoteStore.remoteSyncer.applySuccessfulWrite=jA.bind(null,e),e.remoteStore.remoteSyncer.rejectFailedWrite=AA.bind(null,e),e}class hl{constructor(){this.kind="memory",this.synchronizeTabs=!1}async initialize(e){this.serializer=Xl(e.databaseInfo.databaseId),this.sharedClientState=this.bu(e),this.persistence=this.Su(e),await this.persistence.start(),this.localStore=this.Du(e),this.gcScheduler=this.vu(e,this.localStore),this.indexBackfillerScheduler=this.Cu(e,this.localStore)}vu(e,t){return null}Cu(e,t){return null}Du(e){return Fj(this.persistence,new Oj,e.initialUser,this.serializer)}Su(e){return new jb(yh.fi,this.serializer)}bu(e){return new Wj}async terminate(){var e,t;(e=this.gcScheduler)===null||e===void 0||e.stop(),(t=this.indexBackfillerScheduler)===null||t===void 0||t.stop(),this.sharedClientState.shutdown(),await this.persistence.shutdown()}}hl.provider={build:()=>new hl};class OA extends hl{constructor(e){super(),this.cacheSizeBytes=e}vu(e,t){Oe(this.persistence.referenceDelegate instanceof dl,46915);const s=this.persistence.referenceDelegate.garbageCollector;return new wj(s,e.asyncQueue,t)}Su(e){const t=this.cacheSizeBytes!==void 0?jt.withCacheSize(this.cacheSizeBytes):jt.DEFAULT;return new jb(s=>dl.fi(s,t),this.serializer)}}class iu{async initialize(e,t){this.localStore||(this.localStore=e.localStore,this.sharedClientState=e.sharedClientState,this.datastore=this.createDatastore(t),this.remoteStore=this.createRemoteStore(t),this.eventManager=this.createEventManager(t),this.syncEngine=this.createSyncEngine(t,!e.synchronizeTabs),this.sharedClientState.onlineStateHandler=s=>ng(this.syncEngine,s,1),this.remoteStore.remoteSyncer.handleCredentialChange=RA.bind(null,this.syncEngine),await mA(this.remoteStore,this.syncEngine.isPrimaryClient))}createEventManager(e){return function(){return new gA}()}createDatastore(e){const t=Xl(e.databaseInfo.databaseId),s=function(i){return new Xj(i)}(e.databaseInfo);return function(i,a,l,d){return new tA(i,a,l,d)}(e.authCredentials,e.appCheckCredentials,s,t)}createRemoteStore(e){return function(s,n,i,a,l){return new sA(s,n,i,a,l)}(this.localStore,this.datastore,e.asyncQueue,t=>ng(this.syncEngine,t,0),function(){return Jp.C()?new Jp:new Gj}())}createSyncEngine(e,t){return function(n,i,a,l,d,u,h){const m=new _A(n,i,a,l,d,u);return h&&(m.mu=!0),m}(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,e.initialUser,e.maxConcurrentLimboResolutions,t)}async terminate(){var e,t;await async function(n){const i=pe(n);J(ln,"RemoteStore shutting down."),i.da.add(5),await zi(i),i.Ra.shutdown(),i.Va.set("Unknown")}(this.remoteStore),(e=this.datastore)===null||e===void 0||e.terminate(),(t=this.eventManager)===null||t===void 0||t.terminate()}}iu.provider={build:()=>new iu};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Jb{constructor(e){this.observer=e,this.muted=!1}next(e){this.muted||this.observer.next&&this.Mu(this.observer.next,e)}error(e){this.muted||(this.observer.error?this.Mu(this.observer.error,e):Lr("Uncaught Error in snapshot listener:",e.toString()))}xu(){this.muted=!0}Mu(e,t){setTimeout(()=>{this.muted||e(t)},0)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ks="FirestoreClient";class LA{constructor(e,t,s,n,i){this.authCredentials=e,this.appCheckCredentials=t,this.asyncQueue=s,this.databaseInfo=n,this.user=yt.UNAUTHENTICATED,this.clientId=By.newId(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this._uninitializedComponentsProvider=i,this.authCredentials.start(s,async a=>{J(ks,"Received user=",a.uid),await this.authCredentialListener(a),this.user=a}),this.appCheckCredentials.start(s,a=>(J(ks,"Received new app check token=",a),this.appCheckCredentialListener(a,this.user)))}get configuration(){return{asyncQueue:this.asyncQueue,databaseInfo:this.databaseInfo,clientId:this.clientId,authCredentials:this.authCredentials,appCheckCredentials:this.appCheckCredentials,initialUser:this.user,maxConcurrentLimboResolutions:100}}setCredentialChangeListener(e){this.authCredentialListener=e}setAppCheckTokenChangeListener(e){this.appCheckCredentialListener=e}terminate(){this.asyncQueue.enterRestrictedMode();const e=new Pr;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted(async()=>{try{this._onlineComponents&&await this._onlineComponents.terminate(),this._offlineComponents&&await this._offlineComponents.terminate(),this.authCredentials.shutdown(),this.appCheckCredentials.shutdown(),e.resolve()}catch(t){const s=Ch(t,"Failed to shutdown persistence");e.reject(s)}}),e.promise}}async function ad(r,e){r.asyncQueue.verifyOperationInProgress(),J(ks,"Initializing OfflineComponentProvider");const t=r.configuration;await e.initialize(t);let s=t.initialUser;r.setCredentialChangeListener(async n=>{s.isEqual(n)||(await Ab(e.localStore,n),s=n)}),e.persistence.setDatabaseDeletedListener(()=>r.terminate()),r._offlineComponents=e}async function ig(r,e){r.asyncQueue.verifyOperationInProgress();const t=await VA(r);J(ks,"Initializing OnlineComponentProvider"),await e.initialize(t,r.configuration),r.setCredentialChangeListener(s=>eg(e.remoteStore,s)),r.setAppCheckTokenChangeListener((s,n)=>eg(e.remoteStore,n)),r._onlineComponents=e}async function VA(r){if(!r._offlineComponents)if(r._uninitializedComponentsProvider){J(ks,"Using user provided OfflineComponentProvider");try{await ad(r,r._uninitializedComponentsProvider._offline)}catch(e){const t=e;if(!function(n){return n.name==="FirebaseError"?n.code===z.FAILED_PRECONDITION||n.code===z.UNIMPLEMENTED:!(typeof DOMException<"u"&&n instanceof DOMException)||n.code===22||n.code===20||n.code===11}(t))throw t;Zn("Error using user provided cache. Falling back to memory cache: "+t),await ad(r,new hl)}}else J(ks,"Using default OfflineComponentProvider"),await ad(r,new OA(void 0));return r._offlineComponents}async function Zb(r){return r._onlineComponents||(r._uninitializedComponentsProvider?(J(ks,"Using user provided OnlineComponentProvider"),await ig(r,r._uninitializedComponentsProvider._online)):(J(ks,"Using default OnlineComponentProvider"),await ig(r,new iu))),r._onlineComponents}function FA(r){return Zb(r).then(e=>e.syncEngine)}async function ev(r){const e=await Zb(r),t=e.eventManager;return t.onListen=TA.bind(null,e.syncEngine),t.onUnlisten=CA.bind(null,e.syncEngine),t.onFirstRemoteStoreListen=EA.bind(null,e.syncEngine),t.onLastRemoteStoreUnlisten=IA.bind(null,e.syncEngine),t}function UA(r,e,t={}){const s=new Pr;return r.asyncQueue.enqueueAndForget(async()=>function(i,a,l,d,u){const h=new Jb({next:x=>{h.xu(),a.enqueueAndForget(()=>Bb(i,m));const g=x.docs.has(l);!g&&x.fromCache?u.reject(new te(z.UNAVAILABLE,"Failed to get document because the client is offline.")):g&&x.fromCache&&d&&d.source==="server"?u.reject(new te(z.UNAVAILABLE,'Failed to get document from server. (However, this document does exist in the local cache. Run again without setting source to "server" to retrieve the cached document.)')):u.resolve(x)},error:x=>u.reject(x)}),m=new zb(hh(l.path),h,{includeMetadataChanges:!0,Qa:!0});return $b(i,m)}(await ev(r),r.asyncQueue,e,t,s)),s.promise}function $A(r,e,t={}){const s=new Pr;return r.asyncQueue.enqueueAndForget(async()=>function(i,a,l,d,u){const h=new Jb({next:x=>{h.xu(),a.enqueueAndForget(()=>Bb(i,m)),x.fromCache&&d.source==="server"?u.reject(new te(z.UNAVAILABLE,'Failed to get documents from server. (However, these documents may exist in the local cache. Run again without setting source to "server" to retrieve the cached documents.)')):u.resolve(x)},error:x=>u.reject(x)}),m=new zb(l,h,{includeMetadataChanges:!0,Qa:!0});return $b(i,m)}(await ev(r),r.asyncQueue,e,t,s)),s.promise}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function tv(r){const e={};return r.timeoutSeconds!==void 0&&(e.timeoutSeconds=r.timeoutSeconds),e}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ag=new Map;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function rv(r,e,t){if(!t)throw new te(z.INVALID_ARGUMENT,`Function ${r}() cannot be called with an empty ${e}.`)}function BA(r,e,t,s){if(e===!0&&s===!0)throw new te(z.INVALID_ARGUMENT,`${r} and ${t} cannot be used together.`)}function lg(r){if(!ae.isDocumentKey(r))throw new te(z.INVALID_ARGUMENT,`Invalid document reference. Document references must have an even number of segments, but ${r} has ${r.length}.`)}function cg(r){if(ae.isDocumentKey(r))throw new te(z.INVALID_ARGUMENT,`Invalid collection reference. Collection references must have an odd number of segments, but ${r} has ${r.length}.`)}function ec(r){if(r===void 0)return"undefined";if(r===null)return"null";if(typeof r=="string")return r.length>20&&(r=`${r.substring(0,20)}...`),JSON.stringify(r);if(typeof r=="number"||typeof r=="boolean")return""+r;if(typeof r=="object"){if(r instanceof Array)return"an array";{const e=function(s){return s.constructor?s.constructor.name:null}(r);return e?`a custom ${e} object`:"an object"}}return typeof r=="function"?"a function":de(12329,{type:typeof r})}function Fr(r,e){if("_delegate"in r&&(r=r._delegate),!(r instanceof e)){if(e.name===r.constructor.name)throw new te(z.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{const t=ec(r);throw new te(z.INVALID_ARGUMENT,`Expected type '${e.name}', but it was: ${t}`)}}return r}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const sv="firestore.googleapis.com",dg=!0;class ug{constructor(e){var t,s;if(e.host===void 0){if(e.ssl!==void 0)throw new te(z.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host=sv,this.ssl=dg}else this.host=e.host,this.ssl=(t=e.ssl)!==null&&t!==void 0?t:dg;if(this.isUsingEmulator=e.emulatorOptions!==void 0,this.credentials=e.credentials,this.ignoreUndefinedProperties=!!e.ignoreUndefinedProperties,this.localCache=e.localCache,e.cacheSizeBytes===void 0)this.cacheSizeBytes=kb;else{if(e.cacheSizeBytes!==-1&&e.cacheSizeBytes<bj)throw new te(z.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=e.cacheSizeBytes}BA("experimentalForceLongPolling",e.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",e.experimentalAutoDetectLongPolling),this.experimentalForceLongPolling=!!e.experimentalForceLongPolling,this.experimentalForceLongPolling?this.experimentalAutoDetectLongPolling=!1:e.experimentalAutoDetectLongPolling===void 0?this.experimentalAutoDetectLongPolling=!0:this.experimentalAutoDetectLongPolling=!!e.experimentalAutoDetectLongPolling,this.experimentalLongPollingOptions=tv((s=e.experimentalLongPollingOptions)!==null&&s!==void 0?s:{}),function(i){if(i.timeoutSeconds!==void 0){if(isNaN(i.timeoutSeconds))throw new te(z.INVALID_ARGUMENT,`invalid long polling timeout: ${i.timeoutSeconds} (must not be NaN)`);if(i.timeoutSeconds<5)throw new te(z.INVALID_ARGUMENT,`invalid long polling timeout: ${i.timeoutSeconds} (minimum allowed value is 5)`);if(i.timeoutSeconds>30)throw new te(z.INVALID_ARGUMENT,`invalid long polling timeout: ${i.timeoutSeconds} (maximum allowed value is 30)`)}}(this.experimentalLongPollingOptions),this.useFetchStreams=!!e.useFetchStreams}isEqual(e){return this.host===e.host&&this.ssl===e.ssl&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.experimentalForceLongPolling===e.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===e.experimentalAutoDetectLongPolling&&function(s,n){return s.timeoutSeconds===n.timeoutSeconds}(this.experimentalLongPollingOptions,e.experimentalLongPollingOptions)&&this.ignoreUndefinedProperties===e.ignoreUndefinedProperties&&this.useFetchStreams===e.useFetchStreams}}class tc{constructor(e,t,s,n){this._authCredentials=e,this._appCheckCredentials=t,this._databaseId=s,this._app=n,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new ug({}),this._settingsFrozen=!1,this._emulatorOptions={},this._terminateTask="notTerminated"}get app(){if(!this._app)throw new te(z.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return this._terminateTask!=="notTerminated"}_setSettings(e){if(this._settingsFrozen)throw new te(z.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new ug(e),this._emulatorOptions=e.emulatorOptions||{},e.credentials!==void 0&&(this._authCredentials=function(s){if(!s)return new YS;switch(s.type){case"firstParty":return new ek(s.sessionIndex||"0",s.iamToken||null,s.authTokenFactory||null);case"provider":return s.client;default:throw new te(z.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}}(e.credentials))}_getSettings(){return this._settings}_getEmulatorOptions(){return this._emulatorOptions}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask==="notTerminated"&&(this._terminateTask=this._terminate()),this._terminateTask}async _restart(){this._terminateTask==="notTerminated"?await this._terminate():this._terminateTask="notTerminated"}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return function(t){const s=ag.get(t);s&&(J("ComponentProvider","Removing Datastore"),ag.delete(t),s.terminate())}(this),Promise.resolve()}}function zA(r,e,t,s={}){var n;r=Fr(r,tc);const i=js(e),a=r._getSettings(),l=Object.assign(Object.assign({},a),{emulatorOptions:r._getEmulatorOptions()}),d=`${e}:${t}`;i&&(Hu(`https://${d}`),qu("Firestore",!0)),a.host!==sv&&a.host!==d&&Zn("Host has been set in both settings() and connectFirestoreEmulator(), emulator host will be used.");const u=Object.assign(Object.assign({},a),{host:d,ssl:i,emulatorOptions:s});if(!sn(u,l)&&(r._setSettings(u),s.mockUserToken)){let h,m;if(typeof s.mockUserToken=="string")h=s.mockUserToken,m=yt.MOCK_USER;else{h=H0(s.mockUserToken,(n=r._app)===null||n===void 0?void 0:n.options.projectId);const x=s.mockUserToken.sub||s.mockUserToken.user_id;if(!x)throw new te(z.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");m=new yt(x)}r._authCredentials=new XS(new Uy(h,m))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class bo{constructor(e,t,s){this.converter=t,this._query=s,this.type="query",this.firestore=e}withConverter(e){return new bo(this.firestore,e,this._query)}}class It{constructor(e,t,s){this.converter=t,this._key=s,this.type="document",this.firestore=e}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new ws(this.firestore,this.converter,this._key.path.popLast())}withConverter(e){return new It(this.firestore,e,this._key)}}class ws extends bo{constructor(e,t,s){super(e,t,hh(s)),this._path=s,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){const e=this._path.popLast();return e.isEmpty()?null:new It(this.firestore,null,new ae(e))}withConverter(e){return new ws(this.firestore,e,this._path)}}function HA(r,e,...t){if(r=Ye(r),rv("collection","path",e),r instanceof tc){const s=qe.fromString(e,...t);return cg(s),new ws(r,null,s)}{if(!(r instanceof It||r instanceof ws))throw new te(z.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const s=r._path.child(qe.fromString(e,...t));return cg(s),new ws(r.firestore,null,s)}}function rc(r,e,...t){if(r=Ye(r),arguments.length===1&&(e=By.newId()),rv("doc","path",e),r instanceof tc){const s=qe.fromString(e,...t);return lg(s),new It(r,null,new ae(s))}{if(!(r instanceof It||r instanceof ws))throw new te(z.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const s=r._path.child(qe.fromString(e,...t));return lg(s),new It(r.firestore,r instanceof ws?r.converter:null,new ae(s))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const hg="AsyncQueue";class fg{constructor(e=Promise.resolve()){this.Ju=[],this.Yu=!1,this.Zu=[],this.Xu=null,this.ec=!1,this.tc=!1,this.nc=[],this.x_=new Rb(this,"async_queue_retry"),this.rc=()=>{const s=id();s&&J(hg,"Visibility state changed to "+s.visibilityState),this.x_.b_()},this.sc=e;const t=id();t&&typeof t.addEventListener=="function"&&t.addEventListener("visibilitychange",this.rc)}get isShuttingDown(){return this.Yu}enqueueAndForget(e){this.enqueue(e)}enqueueAndForgetEvenWhileRestricted(e){this.oc(),this._c(e)}enterRestrictedMode(e){if(!this.Yu){this.Yu=!0,this.tc=e||!1;const t=id();t&&typeof t.removeEventListener=="function"&&t.removeEventListener("visibilitychange",this.rc)}}enqueue(e){if(this.oc(),this.Yu)return new Promise(()=>{});const t=new Pr;return this._c(()=>this.Yu&&this.tc?Promise.resolve():(e().then(t.resolve,t.reject),t.promise)).then(()=>t.promise)}enqueueRetryable(e){this.enqueueAndForget(()=>(this.Ju.push(e),this.ac()))}async ac(){if(this.Ju.length!==0){try{await this.Ju[0](),this.Ju.shift(),this.x_.reset()}catch(e){if(!xo(e))throw e;J(hg,"Operation failed with retryable error: "+e)}this.Ju.length>0&&this.x_.y_(()=>this.ac())}}_c(e){const t=this.sc.then(()=>(this.ec=!0,e().catch(s=>{throw this.Xu=s,this.ec=!1,Lr("INTERNAL UNHANDLED ERROR: ",mg(s)),s}).then(s=>(this.ec=!1,s))));return this.sc=t,t}enqueueAfterDelay(e,t,s){this.oc(),this.nc.indexOf(e)>-1&&(t=0);const n=Nh.createAndSchedule(this,e,t,s,i=>this.uc(i));return this.Zu.push(n),n}oc(){this.Xu&&de(47125,{cc:mg(this.Xu)})}verifyOperationInProgress(){}async lc(){let e;do e=this.sc,await e;while(e!==this.sc)}hc(e){for(const t of this.Zu)if(t.timerId===e)return!0;return!1}Pc(e){return this.lc().then(()=>{this.Zu.sort((t,s)=>t.targetTimeMs-s.targetTimeMs);for(const t of this.Zu)if(t.skipDelay(),e!=="all"&&t.timerId===e)break;return this.lc()})}Tc(e){this.nc.push(e)}uc(e){const t=this.Zu.indexOf(e);this.Zu.splice(t,1)}}function mg(r){let e=r.message||"";return r.stack&&(e=r.stack.includes(r.message)?r.stack:r.message+`
`+r.stack),e}class qi extends tc{constructor(e,t,s,n){super(e,t,s,n),this.type="firestore",this._queue=new fg,this._persistenceKey=(n==null?void 0:n.name)||"[DEFAULT]"}async _terminate(){if(this._firestoreClient){const e=this._firestoreClient.terminate();this._queue=new fg(e),this._firestoreClient=void 0,await e}}}function qA(r,e){const t=typeof r=="object"?r:Ku(),s=typeof r=="string"?r:sl,n=Fl(t,"firestore").getImmediate({identifier:s});if(!n._initialized){const i=$0("firestore");i&&zA(n,...i)}return n}function jh(r){if(r._terminated)throw new te(z.FAILED_PRECONDITION,"The client has already been terminated.");return r._firestoreClient||WA(r),r._firestoreClient}function WA(r){var e,t,s;const n=r._freezeSettings(),i=function(l,d,u,h){return new pk(l,d,u,h.host,h.ssl,h.experimentalForceLongPolling,h.experimentalAutoDetectLongPolling,tv(h.experimentalLongPollingOptions),h.useFetchStreams,h.isUsingEmulator)}(r._databaseId,((e=r._app)===null||e===void 0?void 0:e.options.appId)||"",r._persistenceKey,n);r._componentsProvider||!((t=n.localCache)===null||t===void 0)&&t._offlineComponentProvider&&(!((s=n.localCache)===null||s===void 0)&&s._onlineComponentProvider)&&(r._componentsProvider={_offline:n.localCache._offlineComponentProvider,_online:n.localCache._onlineComponentProvider}),r._firestoreClient=new LA(r._authCredentials,r._appCheckCredentials,r._queue,i,r._componentsProvider&&function(l){const d=l==null?void 0:l._online.build();return{_offline:l==null?void 0:l._offline.build(d),_online:d}}(r._componentsProvider))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class oo{constructor(e){this._byteString=e}static fromBase64String(e){try{return new oo(ht.fromBase64String(e))}catch(t){throw new te(z.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+t)}}static fromUint8Array(e){return new oo(ht.fromUint8Array(e))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(e){return this._byteString.isEqual(e._byteString)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class sc{constructor(...e){for(let t=0;t<e.length;++t)if(e[t].length===0)throw new te(z.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new ut(e)}isEqual(e){return this._internalPath.isEqual(e._internalPath)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ah{constructor(e){this._methodName=e}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ph{constructor(e,t){if(!isFinite(e)||e<-90||e>90)throw new te(z.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+e);if(!isFinite(t)||t<-180||t>180)throw new te(z.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+t);this._lat=e,this._long=t}get latitude(){return this._lat}get longitude(){return this._long}isEqual(e){return this._lat===e._lat&&this._long===e._long}toJSON(){return{latitude:this._lat,longitude:this._long}}_compareTo(e){return Te(this._lat,e._lat)||Te(this._long,e._long)}}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Rh{constructor(e){this._values=(e||[]).map(t=>t)}toArray(){return this._values.map(e=>e)}isEqual(e){return function(s,n){if(s.length!==n.length)return!1;for(let i=0;i<s.length;++i)if(s[i]!==n[i])return!1;return!0}(this._values,e._values)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const GA=/^__.*__$/;class KA{constructor(e,t,s){this.data=e,this.fieldMask=t,this.fieldTransforms=s}toMutation(e,t){return this.fieldMask!==null?new Ps(e,this.data,this.fieldMask,t,this.fieldTransforms):new $i(e,this.data,t,this.fieldTransforms)}}class nv{constructor(e,t,s){this.data=e,this.fieldMask=t,this.fieldTransforms=s}toMutation(e,t){return new Ps(e,this.data,this.fieldMask,t,this.fieldTransforms)}}function ov(r){switch(r){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw de(40011,{Ic:r})}}class Mh{constructor(e,t,s,n,i,a){this.settings=e,this.databaseId=t,this.serializer=s,this.ignoreUndefinedProperties=n,i===void 0&&this.Ec(),this.fieldTransforms=i||[],this.fieldMask=a||[]}get path(){return this.settings.path}get Ic(){return this.settings.Ic}dc(e){return new Mh(Object.assign(Object.assign({},this.settings),e),this.databaseId,this.serializer,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}Ac(e){var t;const s=(t=this.path)===null||t===void 0?void 0:t.child(e),n=this.dc({path:s,Rc:!1});return n.Vc(e),n}mc(e){var t;const s=(t=this.path)===null||t===void 0?void 0:t.child(e),n=this.dc({path:s,Rc:!1});return n.Ec(),n}fc(e){return this.dc({path:void 0,Rc:!0})}gc(e){return fl(e,this.settings.methodName,this.settings.yc||!1,this.path,this.settings.wc)}contains(e){return this.fieldMask.find(t=>e.isPrefixOf(t))!==void 0||this.fieldTransforms.find(t=>e.isPrefixOf(t.field))!==void 0}Ec(){if(this.path)for(let e=0;e<this.path.length;e++)this.Vc(this.path.get(e))}Vc(e){if(e.length===0)throw this.gc("Document fields must not be empty");if(ov(this.Ic)&&GA.test(e))throw this.gc('Document fields cannot begin and end with "__"')}}class QA{constructor(e,t,s){this.databaseId=e,this.ignoreUndefinedProperties=t,this.serializer=s||Xl(e)}bc(e,t,s,n=!1){return new Mh({Ic:e,methodName:t,wc:s,path:ut.emptyPath(),Rc:!1,yc:n},this.databaseId,this.serializer,this.ignoreUndefinedProperties)}}function Dh(r){const e=r._freezeSettings(),t=Xl(r._databaseId);return new QA(r._databaseId,!!e.ignoreUndefinedProperties,t)}function YA(r,e,t,s,n,i={}){const a=r.bc(i.merge||i.mergeFields?2:0,e,t,n);Oh("Data must be an object, but it was:",a,s);const l=iv(s,a);let d,u;if(i.merge)d=new Ot(a.fieldMask),u=a.fieldTransforms;else if(i.mergeFields){const h=[];for(const m of i.mergeFields){const x=au(e,m,t);if(!a.contains(x))throw new te(z.INVALID_ARGUMENT,`Field '${x}' is specified in your field mask but missing from your input data.`);lv(h,x)||h.push(x)}d=new Ot(h),u=a.fieldTransforms.filter(m=>d.covers(m.field))}else d=null,u=a.fieldTransforms;return new KA(new At(l),d,u)}class nc extends Ah{_toFieldTransform(e){if(e.Ic!==2)throw e.Ic===1?e.gc(`${this._methodName}() can only appear at the top level of your update data`):e.gc(`${this._methodName}() cannot be used with set() unless you pass {merge:true}`);return e.fieldMask.push(e.path),null}isEqual(e){return e instanceof nc}}function XA(r,e,t,s){const n=r.bc(1,e,t);Oh("Data must be an object, but it was:",n,s);const i=[],a=At.empty();As(s,(d,u)=>{const h=Lh(e,d,t);u=Ye(u);const m=n.mc(h);if(u instanceof nc)i.push(h);else{const x=Wi(u,m);x!=null&&(i.push(h),a.set(h,x))}});const l=new Ot(i);return new nv(a,l,n.fieldTransforms)}function JA(r,e,t,s,n,i){const a=r.bc(1,e,t),l=[au(e,s,t)],d=[n];if(i.length%2!=0)throw new te(z.INVALID_ARGUMENT,`Function ${e}() needs to be called with an even number of arguments that alternate between field names and values.`);for(let x=0;x<i.length;x+=2)l.push(au(e,i[x])),d.push(i[x+1]);const u=[],h=At.empty();for(let x=l.length-1;x>=0;--x)if(!lv(u,l[x])){const g=l[x];let v=d[x];v=Ye(v);const b=a.mc(g);if(v instanceof nc)u.push(g);else{const w=Wi(v,b);w!=null&&(u.push(g),h.set(g,w))}}const m=new Ot(u);return new nv(h,m,a.fieldTransforms)}function ZA(r,e,t,s=!1){return Wi(t,r.bc(s?4:3,e))}function Wi(r,e){if(av(r=Ye(r)))return Oh("Unsupported field value:",e,r),iv(r,e);if(r instanceof Ah)return function(s,n){if(!ov(n.Ic))throw n.gc(`${s._methodName}() can only be used with update() and set()`);if(!n.path)throw n.gc(`${s._methodName}() is not currently supported inside arrays`);const i=s._toFieldTransform(n);i&&n.fieldTransforms.push(i)}(r,e),null;if(r===void 0&&e.ignoreUndefinedProperties)return null;if(e.path&&e.fieldMask.push(e.path),r instanceof Array){if(e.settings.Rc&&e.Ic!==4)throw e.gc("Nested arrays are not supported");return function(s,n){const i=[];let a=0;for(const l of s){let d=Wi(l,n.fc(a));d==null&&(d={nullValue:"NULL_VALUE"}),i.push(d),a++}return{arrayValue:{values:i}}}(r,e)}return function(s,n){if((s=Ye(s))===null)return{nullValue:"NULL_VALUE"};if(typeof s=="number")return Vk(n.serializer,s);if(typeof s=="boolean")return{booleanValue:s};if(typeof s=="string")return{stringValue:s};if(s instanceof Date){const i=nt.fromDate(s);return{timestampValue:cl(n.serializer,i)}}if(s instanceof nt){const i=new nt(s.seconds,1e3*Math.floor(s.nanoseconds/1e3));return{timestampValue:cl(n.serializer,i)}}if(s instanceof Ph)return{geoPointValue:{latitude:s.latitude,longitude:s.longitude}};if(s instanceof oo)return{bytesValue:_b(n.serializer,s._byteString)};if(s instanceof It){const i=n.databaseId,a=s.firestore._databaseId;if(!a.isEqual(i))throw n.gc(`Document reference is for database ${a.projectId}/${a.database} but should be for database ${i.projectId}/${i.database}`);return{referenceValue:gh(s.firestore._databaseId||n.databaseId,s._key.path)}}if(s instanceof Rh)return function(a,l){return{mapValue:{fields:{[Yy]:{stringValue:Xy},[nl]:{arrayValue:{values:a.toArray().map(u=>{if(typeof u!="number")throw l.gc("VectorValues must only contain numeric values.");return fh(l.serializer,u)})}}}}}}(s,n);throw n.gc(`Unsupported field value: ${ec(s)}`)}(r,e)}function iv(r,e){const t={};return Hy(r)?e.path&&e.path.length>0&&e.fieldMask.push(e.path):As(r,(s,n)=>{const i=Wi(n,e.Ac(s));i!=null&&(t[s]=i)}),{mapValue:{fields:t}}}function av(r){return!(typeof r!="object"||r===null||r instanceof Array||r instanceof Date||r instanceof nt||r instanceof Ph||r instanceof oo||r instanceof It||r instanceof Ah||r instanceof Rh)}function Oh(r,e,t){if(!av(t)||!function(n){return typeof n=="object"&&n!==null&&(Object.getPrototypeOf(n)===Object.prototype||Object.getPrototypeOf(n)===null)}(t)){const s=ec(t);throw s==="an object"?e.gc(r+" a custom object"):e.gc(r+" "+s)}}function au(r,e,t){if((e=Ye(e))instanceof sc)return e._internalPath;if(typeof e=="string")return Lh(r,e);throw fl("Field path arguments must be of type string or ",r,!1,void 0,t)}const eP=new RegExp("[~\\*/\\[\\]]");function Lh(r,e,t){if(e.search(eP)>=0)throw fl(`Invalid field path (${e}). Paths must not contain '~', '*', '/', '[', or ']'`,r,!1,void 0,t);try{return new sc(...e.split("."))._internalPath}catch{throw fl(`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,r,!1,void 0,t)}}function fl(r,e,t,s,n){const i=s&&!s.isEmpty(),a=n!==void 0;let l=`Function ${e}() called with invalid data`;t&&(l+=" (via `toFirestore()`)"),l+=". ";let d="";return(i||a)&&(d+=" (found",i&&(d+=` in field ${s}`),a&&(d+=` in document ${n}`),d+=")"),new te(z.INVALID_ARGUMENT,l+r+d)}function lv(r,e){return r.some(t=>t.isEqual(e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class cv{constructor(e,t,s,n,i){this._firestore=e,this._userDataWriter=t,this._key=s,this._document=n,this._converter=i}get id(){return this._key.path.lastSegment()}get ref(){return new It(this._firestore,this._converter,this._key)}exists(){return this._document!==null}data(){if(this._document){if(this._converter){const e=new tP(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(e)}return this._userDataWriter.convertValue(this._document.data.value)}}get(e){if(this._document){const t=this._document.data.field(Vh("DocumentSnapshot.get",e));if(t!==null)return this._userDataWriter.convertValue(t)}}}class tP extends cv{data(){return super.data()}}function Vh(r,e){return typeof e=="string"?Lh(r,e):e instanceof sc?e._internalPath:e._delegate._internalPath}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function rP(r){if(r.limitType==="L"&&r.explicitOrderBy.length===0)throw new te(z.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}class Fh{}class sP extends Fh{}function nP(r,e,...t){let s=[];e instanceof Fh&&s.push(e),s=s.concat(t),function(i){const a=i.filter(d=>d instanceof Uh).length,l=i.filter(d=>d instanceof oc).length;if(a>1||a>0&&l>0)throw new te(z.INVALID_ARGUMENT,"InvalidQuery. When using composite filters, you cannot use more than one filter at the top level. Consider nesting the multiple filters within an `and(...)` statement. For example: change `query(query, where(...), or(...))` to `query(query, and(where(...), or(...)))`.")}(s);for(const n of s)r=n._apply(r);return r}class oc extends sP{constructor(e,t,s){super(),this._field=e,this._op=t,this._value=s,this.type="where"}static _create(e,t,s){return new oc(e,t,s)}_apply(e){const t=this._parse(e);return dv(e._query,t),new bo(e.firestore,e.converter,Yd(e._query,t))}_parse(e){const t=Dh(e.firestore);return function(i,a,l,d,u,h,m){let x;if(u.isKeyField()){if(h==="array-contains"||h==="array-contains-any")throw new te(z.INVALID_ARGUMENT,`Invalid Query. You can't perform '${h}' queries on documentId().`);if(h==="in"||h==="not-in"){gg(m,h);const v=[];for(const b of m)v.push(pg(d,i,b));x={arrayValue:{values:v}}}else x=pg(d,i,m)}else h!=="in"&&h!=="not-in"&&h!=="array-contains-any"||gg(m,h),x=ZA(l,a,m,h==="in"||h==="not-in");return rt.create(u,h,x)}(e._query,"where",t,e.firestore._databaseId,this._field,this._op,this._value)}}function oP(r,e,t){const s=e,n=Vh("where",r);return oc._create(n,s,t)}class Uh extends Fh{constructor(e,t){super(),this.type=e,this._queryConstraints=t}static _create(e,t){return new Uh(e,t)}_parse(e){const t=this._queryConstraints.map(s=>s._parse(e)).filter(s=>s.getFilters().length>0);return t.length===1?t[0]:Jt.create(t,this._getOperator())}_apply(e){const t=this._parse(e);return t.getFilters().length===0?e:(function(n,i){let a=n;const l=i.getFlattenedFilters();for(const d of l)dv(a,d),a=Yd(a,d)}(e._query,t),new bo(e.firestore,e.converter,Yd(e._query,t)))}_getQueryConstraints(){return this._queryConstraints}_getOperator(){return this.type==="and"?"and":"or"}}function pg(r,e,t){if(typeof(t=Ye(t))=="string"){if(t==="")throw new te(z.INVALID_ARGUMENT,"Invalid query. When querying with documentId(), you must provide a valid document ID, but it was an empty string.");if(!ob(e)&&t.indexOf("/")!==-1)throw new te(z.INVALID_ARGUMENT,`Invalid query. When querying a collection by documentId(), you must provide a plain document ID, but '${t}' contains a '/' character.`);const s=e.path.child(qe.fromString(t));if(!ae.isDocumentKey(s))throw new te(z.INVALID_ARGUMENT,`Invalid query. When querying a collection group by documentId(), the value provided must result in a valid document path, but '${s}' is not because it has an odd number of segments (${s.length}).`);return jp(r,new ae(s))}if(t instanceof It)return jp(r,t._key);throw new te(z.INVALID_ARGUMENT,`Invalid query. When querying with documentId(), you must provide a valid string or a DocumentReference, but it was: ${ec(t)}.`)}function gg(r,e){if(!Array.isArray(r)||r.length===0)throw new te(z.INVALID_ARGUMENT,`Invalid Query. A non-empty array is required for '${e.toString()}' filters.`)}function dv(r,e){const t=function(n,i){for(const a of n)for(const l of a.getFlattenedFilters())if(i.indexOf(l.op)>=0)return l.op;return null}(r.filters,function(n){switch(n){case"!=":return["!=","not-in"];case"array-contains-any":case"in":return["not-in"];case"not-in":return["array-contains-any","in","not-in","!="];default:return[]}}(e.op));if(t!==null)throw t===e.op?new te(z.INVALID_ARGUMENT,`Invalid query. You cannot use more than one '${e.op.toString()}' filter.`):new te(z.INVALID_ARGUMENT,`Invalid query. You cannot use '${e.op.toString()}' filters with '${t.toString()}' filters.`)}class iP{convertValue(e,t="none"){switch(Is(e)){case 0:return null;case 1:return e.booleanValue;case 2:return Ze(e.integerValue||e.doubleValue);case 3:return this.convertTimestamp(e.timestampValue);case 4:return this.convertServerTimestamp(e,t);case 5:return e.stringValue;case 6:return this.convertBytes(Cs(e.bytesValue));case 7:return this.convertReference(e.referenceValue);case 8:return this.convertGeoPoint(e.geoPointValue);case 9:return this.convertArray(e.arrayValue,t);case 11:return this.convertObject(e.mapValue,t);case 10:return this.convertVectorValue(e.mapValue);default:throw de(62114,{value:e})}}convertObject(e,t){return this.convertObjectMap(e.fields,t)}convertObjectMap(e,t="none"){const s={};return As(e,(n,i)=>{s[n]=this.convertValue(i,t)}),s}convertVectorValue(e){var t,s,n;const i=(n=(s=(t=e.fields)===null||t===void 0?void 0:t[nl].arrayValue)===null||s===void 0?void 0:s.values)===null||n===void 0?void 0:n.map(a=>Ze(a.doubleValue));return new Rh(i)}convertGeoPoint(e){return new Ph(Ze(e.latitude),Ze(e.longitude))}convertArray(e,t){return(e.values||[]).map(s=>this.convertValue(s,t))}convertServerTimestamp(e,t){switch(t){case"previous":const s=ql(e);return s==null?null:this.convertValue(s,t);case"estimate":return this.convertTimestamp(xi(e));default:return null}}convertTimestamp(e){const t=Ns(e);return new nt(t.seconds,t.nanos)}convertDocumentKey(e,t){const s=qe.fromString(e);Oe(Sb(s),9688,{name:e});const n=new yi(s.get(1),s.get(3)),i=new ae(s.popFirst(5));return n.isEqual(t)||Lr(`Document ${i} contains a document reference within a different database (${n.projectId}/${n.database}) which is not supported. It will be treated as a reference in the current database (${t.projectId}/${t.database}) instead.`),i}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function aP(r,e,t){let s;return s=r?r.toFirestore(e):e,s}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ko{constructor(e,t){this.hasPendingWrites=e,this.fromCache=t}isEqual(e){return this.hasPendingWrites===e.hasPendingWrites&&this.fromCache===e.fromCache}}class uv extends cv{constructor(e,t,s,n,i,a){super(e,t,s,n,a),this._firestore=e,this._firestoreImpl=e,this.metadata=i}exists(){return super.exists()}data(e={}){if(this._document){if(this._converter){const t=new Ua(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(t,e)}return this._userDataWriter.convertValue(this._document.data.value,e.serverTimestamps)}}get(e,t={}){if(this._document){const s=this._document.data.field(Vh("DocumentSnapshot.get",e));if(s!==null)return this._userDataWriter.convertValue(s,t.serverTimestamps)}}}class Ua extends uv{data(e={}){return super.data(e)}}class lP{constructor(e,t,s,n){this._firestore=e,this._userDataWriter=t,this._snapshot=n,this.metadata=new Ko(n.hasPendingWrites,n.fromCache),this.query=s}get docs(){const e=[];return this.forEach(t=>e.push(t)),e}get size(){return this._snapshot.docs.size}get empty(){return this.size===0}forEach(e,t){this._snapshot.docs.forEach(s=>{e.call(t,new Ua(this._firestore,this._userDataWriter,s.key,s,new Ko(this._snapshot.mutatedKeys.has(s.key),this._snapshot.fromCache),this.query.converter))})}docChanges(e={}){const t=!!e.includeMetadataChanges;if(t&&this._snapshot.excludesMetadataChanges)throw new te(z.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===t||(this._cachedChanges=function(n,i){if(n._snapshot.oldDocs.isEmpty()){let a=0;return n._snapshot.docChanges.map(l=>{const d=new Ua(n._firestore,n._userDataWriter,l.doc.key,l.doc,new Ko(n._snapshot.mutatedKeys.has(l.doc.key),n._snapshot.fromCache),n.query.converter);return l.doc,{type:"added",doc:d,oldIndex:-1,newIndex:a++}})}{let a=n._snapshot.oldDocs;return n._snapshot.docChanges.filter(l=>i||l.type!==3).map(l=>{const d=new Ua(n._firestore,n._userDataWriter,l.doc.key,l.doc,new Ko(n._snapshot.mutatedKeys.has(l.doc.key),n._snapshot.fromCache),n.query.converter);let u=-1,h=-1;return l.type!==0&&(u=a.indexOf(l.doc.key),a=a.delete(l.doc.key)),l.type!==1&&(a=a.add(l.doc),h=a.indexOf(l.doc.key)),{type:cP(l.type),doc:d,oldIndex:u,newIndex:h}})}}(this,t),this._cachedChangesIncludeMetadataChanges=t),this._cachedChanges}}function cP(r){switch(r){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return de(61501,{type:r})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function dP(r){r=Fr(r,It);const e=Fr(r.firestore,qi);return UA(jh(e),r._key).then(t=>fP(e,r,t))}class hv extends iP{constructor(e){super(),this.firestore=e}convertBytes(e){return new oo(e)}convertReference(e){const t=this.convertDocumentKey(e,this.firestore._databaseId);return new It(this.firestore,null,t)}}function uP(r){r=Fr(r,bo);const e=Fr(r.firestore,qi),t=jh(e),s=new hv(e);return rP(r._query),$A(t,r._query).then(n=>new lP(e,s,r,n))}function fv(r,e,t){r=Fr(r,It);const s=Fr(r.firestore,qi),n=aP(r.converter,e);return mv(s,[YA(Dh(s),"setDoc",r._key,n,r.converter!==null,t).toMutation(r._key,ur.none())])}function hP(r,e,t,...s){r=Fr(r,It);const n=Fr(r.firestore,qi),i=Dh(n);let a;return a=typeof(e=Ye(e))=="string"||e instanceof sc?JA(i,"updateDoc",r._key,e,t,s):XA(i,"updateDoc",r._key,e),mv(n,[a.toMutation(r._key,ur.exists(!0))])}function mv(r,e){return function(s,n){const i=new Pr;return s.asyncQueue.enqueueAndForget(async()=>SA(await FA(s),n,i)),i.promise}(jh(r),e)}function fP(r,e,t){const s=t.docs.get(e._key),n=new hv(r);return new uv(r,n,e._key,s,new Ko(t.hasPendingWrites,t.fromCache),e.converter)}(function(e,t=!0){(function(n){po=n})(mn),nn(new Ts("firestore",(s,{instanceIdentifier:n,options:i})=>{const a=s.getProvider("app").getImmediate(),l=new qi(new JS(s.getProvider("auth-internal")),new tk(a,s.getProvider("app-check-internal")),function(u,h){if(!Object.prototype.hasOwnProperty.apply(u.options,["projectId"]))throw new te(z.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new yi(u.options.projectId,h)}(a,n),a);return i=Object.assign({useFetchStreams:t},i),l._setSettings(i),l},"PUBLIC").setMultipleInstances(!0)),cr(yp,bp,e),cr(yp,bp,"esm2017")})();/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const pv="firebasestorage.googleapis.com",gv="storageBucket",mP=2*60*1e3,pP=10*60*1e3;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Je extends yr{constructor(e,t,s=0){super(ld(e),`Firebase Storage: ${t} (${ld(e)})`),this.status_=s,this.customData={serverResponse:null},this._baseMessage=this.message,Object.setPrototypeOf(this,Je.prototype)}get status(){return this.status_}set status(e){this.status_=e}_codeEquals(e){return ld(e)===this.code}get serverResponse(){return this.customData.serverResponse}set serverResponse(e){this.customData.serverResponse=e,this.customData.serverResponse?this.message=`${this._baseMessage}
${this.customData.serverResponse}`:this.message=this._baseMessage}}var Xe;(function(r){r.UNKNOWN="unknown",r.OBJECT_NOT_FOUND="object-not-found",r.BUCKET_NOT_FOUND="bucket-not-found",r.PROJECT_NOT_FOUND="project-not-found",r.QUOTA_EXCEEDED="quota-exceeded",r.UNAUTHENTICATED="unauthenticated",r.UNAUTHORIZED="unauthorized",r.UNAUTHORIZED_APP="unauthorized-app",r.RETRY_LIMIT_EXCEEDED="retry-limit-exceeded",r.INVALID_CHECKSUM="invalid-checksum",r.CANCELED="canceled",r.INVALID_EVENT_NAME="invalid-event-name",r.INVALID_URL="invalid-url",r.INVALID_DEFAULT_BUCKET="invalid-default-bucket",r.NO_DEFAULT_BUCKET="no-default-bucket",r.CANNOT_SLICE_BLOB="cannot-slice-blob",r.SERVER_FILE_WRONG_SIZE="server-file-wrong-size",r.NO_DOWNLOAD_URL="no-download-url",r.INVALID_ARGUMENT="invalid-argument",r.INVALID_ARGUMENT_COUNT="invalid-argument-count",r.APP_DELETED="app-deleted",r.INVALID_ROOT_OPERATION="invalid-root-operation",r.INVALID_FORMAT="invalid-format",r.INTERNAL_ERROR="internal-error",r.UNSUPPORTED_ENVIRONMENT="unsupported-environment"})(Xe||(Xe={}));function ld(r){return"storage/"+r}function $h(){const r="An unknown error occurred, please check the error payload for server response.";return new Je(Xe.UNKNOWN,r)}function gP(r){return new Je(Xe.OBJECT_NOT_FOUND,"Object '"+r+"' does not exist.")}function xP(r){return new Je(Xe.QUOTA_EXCEEDED,"Quota for bucket '"+r+"' exceeded, please view quota on https://firebase.google.com/pricing/.")}function yP(){const r="User is not authenticated, please authenticate using Firebase Authentication and try again.";return new Je(Xe.UNAUTHENTICATED,r)}function bP(){return new Je(Xe.UNAUTHORIZED_APP,"This app does not have permission to access Firebase Storage on this project.")}function vP(r){return new Je(Xe.UNAUTHORIZED,"User does not have permission to access '"+r+"'.")}function wP(){return new Je(Xe.RETRY_LIMIT_EXCEEDED,"Max retry time for operation exceeded, please try again.")}function _P(){return new Je(Xe.CANCELED,"User canceled the upload/download.")}function TP(r){return new Je(Xe.INVALID_URL,"Invalid URL '"+r+"'.")}function EP(r){return new Je(Xe.INVALID_DEFAULT_BUCKET,"Invalid default bucket '"+r+"'.")}function NP(){return new Je(Xe.NO_DEFAULT_BUCKET,"No default bucket found. Did you set the '"+gv+"' property when initializing the app?")}function CP(){return new Je(Xe.CANNOT_SLICE_BLOB,"Cannot slice blob for upload. Please retry the upload.")}function IP(){return new Je(Xe.NO_DOWNLOAD_URL,"The given file does not have any download URLs.")}function SP(r){return new Je(Xe.UNSUPPORTED_ENVIRONMENT,`${r} is missing. Make sure to install the required polyfills. See https://firebase.google.com/docs/web/environments-js-sdk#polyfills for more information.`)}function lu(r){return new Je(Xe.INVALID_ARGUMENT,r)}function xv(){return new Je(Xe.APP_DELETED,"The Firebase app was deleted.")}function kP(r){return new Je(Xe.INVALID_ROOT_OPERATION,"The operation '"+r+"' cannot be performed on a root reference, create a non-root reference using child, such as .child('file.png').")}function li(r,e){return new Je(Xe.INVALID_FORMAT,"String does not match format '"+r+"': "+e)}function Fo(r){throw new Je(Xe.INTERNAL_ERROR,"Internal error: "+r)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Lt{constructor(e,t){this.bucket=e,this.path_=t}get path(){return this.path_}get isRoot(){return this.path.length===0}fullServerUrl(){const e=encodeURIComponent;return"/b/"+e(this.bucket)+"/o/"+e(this.path)}bucketOnlyServerUrl(){return"/b/"+encodeURIComponent(this.bucket)+"/o"}static makeFromBucketSpec(e,t){let s;try{s=Lt.makeFromUrl(e,t)}catch{return new Lt(e,"")}if(s.path==="")return s;throw EP(e)}static makeFromUrl(e,t){let s=null;const n="([A-Za-z0-9.\\-_]+)";function i(R){R.path.charAt(R.path.length-1)==="/"&&(R.path_=R.path_.slice(0,-1))}const a="(/(.*))?$",l=new RegExp("^gs://"+n+a,"i"),d={bucket:1,path:3};function u(R){R.path_=decodeURIComponent(R.path)}const h="v[A-Za-z0-9_]+",m=t.replace(/[.]/g,"\\."),x="(/([^?#]*).*)?$",g=new RegExp(`^https?://${m}/${h}/b/${n}/o${x}`,"i"),v={bucket:1,path:3},b=t===pv?"(?:storage.googleapis.com|storage.cloud.google.com)":t,w="([^?#]*)",k=new RegExp(`^https?://${b}/${n}/${w}`,"i"),_=[{regex:l,indices:d,postModify:i},{regex:g,indices:v,postModify:u},{regex:k,indices:{bucket:1,path:2},postModify:u}];for(let R=0;R<_.length;R++){const D=_[R],$=D.regex.exec(e);if($){const S=$[D.indices.bucket];let I=$[D.indices.path];I||(I=""),s=new Lt(S,I),D.postModify(s);break}}if(s==null)throw TP(e);return s}}class jP{constructor(e){this.promise_=Promise.reject(e)}getPromise(){return this.promise_}cancel(e=!1){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function AP(r,e,t){let s=1,n=null,i=null,a=!1,l=0;function d(){return l===2}let u=!1;function h(...w){u||(u=!0,e.apply(null,w))}function m(w){n=setTimeout(()=>{n=null,r(g,d())},w)}function x(){i&&clearTimeout(i)}function g(w,...k){if(u){x();return}if(w){x(),h.call(null,w,...k);return}if(d()||a){x(),h.call(null,w,...k);return}s<64&&(s*=2);let _;l===1?(l=2,_=0):_=(s+Math.random())*1e3,m(_)}let v=!1;function b(w){v||(v=!0,x(),!u&&(n!==null?(w||(l=2),clearTimeout(n),m(0)):w||(l=1)))}return m(0),i=setTimeout(()=>{a=!0,b(!0)},t),b}function PP(r){r(!1)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function RP(r){return r!==void 0}function MP(r){return typeof r=="object"&&!Array.isArray(r)}function Bh(r){return typeof r=="string"||r instanceof String}function xg(r){return zh()&&r instanceof Blob}function zh(){return typeof Blob<"u"}function yg(r,e,t,s){if(s<e)throw lu(`Invalid value for '${r}'. Expected ${e} or greater.`);if(s>t)throw lu(`Invalid value for '${r}'. Expected ${t} or less.`)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Hh(r,e,t){let s=e;return t==null&&(s=`https://${e}`),`${t}://${s}/v0${r}`}function yv(r){const e=encodeURIComponent;let t="?";for(const s in r)if(r.hasOwnProperty(s)){const n=e(s)+"="+e(r[s]);t=t+n+"&"}return t=t.slice(0,-1),t}var en;(function(r){r[r.NO_ERROR=0]="NO_ERROR",r[r.NETWORK_ERROR=1]="NETWORK_ERROR",r[r.ABORT=2]="ABORT"})(en||(en={}));/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function DP(r,e){const t=r>=500&&r<600,n=[408,429].indexOf(r)!==-1,i=e.indexOf(r)!==-1;return t||n||i}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class OP{constructor(e,t,s,n,i,a,l,d,u,h,m,x=!0,g=!1){this.url_=e,this.method_=t,this.headers_=s,this.body_=n,this.successCodes_=i,this.additionalRetryCodes_=a,this.callback_=l,this.errorCallback_=d,this.timeout_=u,this.progressCallback_=h,this.connectionFactory_=m,this.retry=x,this.isUsingEmulator=g,this.pendingConnection_=null,this.backoffId_=null,this.canceled_=!1,this.appDelete_=!1,this.promise_=new Promise((v,b)=>{this.resolve_=v,this.reject_=b,this.start_()})}start_(){const e=(s,n)=>{if(n){s(!1,new Na(!1,null,!0));return}const i=this.connectionFactory_();this.pendingConnection_=i;const a=l=>{const d=l.loaded,u=l.lengthComputable?l.total:-1;this.progressCallback_!==null&&this.progressCallback_(d,u)};this.progressCallback_!==null&&i.addUploadProgressListener(a),i.send(this.url_,this.method_,this.isUsingEmulator,this.body_,this.headers_).then(()=>{this.progressCallback_!==null&&i.removeUploadProgressListener(a),this.pendingConnection_=null;const l=i.getErrorCode()===en.NO_ERROR,d=i.getStatus();if(!l||DP(d,this.additionalRetryCodes_)&&this.retry){const h=i.getErrorCode()===en.ABORT;s(!1,new Na(!1,null,h));return}const u=this.successCodes_.indexOf(d)!==-1;s(!0,new Na(u,i))})},t=(s,n)=>{const i=this.resolve_,a=this.reject_,l=n.connection;if(n.wasSuccessCode)try{const d=this.callback_(l,l.getResponse());RP(d)?i(d):i()}catch(d){a(d)}else if(l!==null){const d=$h();d.serverResponse=l.getErrorText(),this.errorCallback_?a(this.errorCallback_(l,d)):a(d)}else if(n.canceled){const d=this.appDelete_?xv():_P();a(d)}else{const d=wP();a(d)}};this.canceled_?t(!1,new Na(!1,null,!0)):this.backoffId_=AP(e,t,this.timeout_)}getPromise(){return this.promise_}cancel(e){this.canceled_=!0,this.appDelete_=e||!1,this.backoffId_!==null&&PP(this.backoffId_),this.pendingConnection_!==null&&this.pendingConnection_.abort()}}class Na{constructor(e,t,s){this.wasSuccessCode=e,this.connection=t,this.canceled=!!s}}function LP(r,e){e!==null&&e.length>0&&(r.Authorization="Firebase "+e)}function VP(r,e){r["X-Firebase-Storage-Version"]="webjs/"+(e??"AppManager")}function FP(r,e){e&&(r["X-Firebase-GMPID"]=e)}function UP(r,e){e!==null&&(r["X-Firebase-AppCheck"]=e)}function $P(r,e,t,s,n,i,a=!0,l=!1){const d=yv(r.urlParams),u=r.url+d,h=Object.assign({},r.headers);return FP(h,e),LP(h,t),VP(h,i),UP(h,s),new OP(u,r.method,h,r.body,r.successCodes,r.additionalRetryCodes,r.handler,r.errorHandler,r.timeout,r.progressCallback,n,a,l)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function BP(){return typeof BlobBuilder<"u"?BlobBuilder:typeof WebKitBlobBuilder<"u"?WebKitBlobBuilder:void 0}function zP(...r){const e=BP();if(e!==void 0){const t=new e;for(let s=0;s<r.length;s++)t.append(r[s]);return t.getBlob()}else{if(zh())return new Blob(r);throw new Je(Xe.UNSUPPORTED_ENVIRONMENT,"This browser doesn't seem to support creating Blobs")}}function HP(r,e,t){return r.webkitSlice?r.webkitSlice(e,t):r.mozSlice?r.mozSlice(e,t):r.slice?r.slice(e,t):null}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function qP(r){if(typeof atob>"u")throw SP("base-64");return atob(r)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ar={RAW:"raw",BASE64:"base64",BASE64URL:"base64url",DATA_URL:"data_url"};class cd{constructor(e,t){this.data=e,this.contentType=t||null}}function WP(r,e){switch(r){case ar.RAW:return new cd(bv(e));case ar.BASE64:case ar.BASE64URL:return new cd(vv(r,e));case ar.DATA_URL:return new cd(KP(e),QP(e))}throw $h()}function bv(r){const e=[];for(let t=0;t<r.length;t++){let s=r.charCodeAt(t);if(s<=127)e.push(s);else if(s<=2047)e.push(192|s>>6,128|s&63);else if((s&64512)===55296)if(!(t<r.length-1&&(r.charCodeAt(t+1)&64512)===56320))e.push(239,191,189);else{const i=s,a=r.charCodeAt(++t);s=65536|(i&1023)<<10|a&1023,e.push(240|s>>18,128|s>>12&63,128|s>>6&63,128|s&63)}else(s&64512)===56320?e.push(239,191,189):e.push(224|s>>12,128|s>>6&63,128|s&63)}return new Uint8Array(e)}function GP(r){let e;try{e=decodeURIComponent(r)}catch{throw li(ar.DATA_URL,"Malformed data URL.")}return bv(e)}function vv(r,e){switch(r){case ar.BASE64:{const n=e.indexOf("-")!==-1,i=e.indexOf("_")!==-1;if(n||i)throw li(r,"Invalid character '"+(n?"-":"_")+"' found: is it base64url encoded?");break}case ar.BASE64URL:{const n=e.indexOf("+")!==-1,i=e.indexOf("/")!==-1;if(n||i)throw li(r,"Invalid character '"+(n?"+":"/")+"' found: is it base64 encoded?");e=e.replace(/-/g,"+").replace(/_/g,"/");break}}let t;try{t=qP(e)}catch(n){throw n.message.includes("polyfill")?n:li(r,"Invalid character found")}const s=new Uint8Array(t.length);for(let n=0;n<t.length;n++)s[n]=t.charCodeAt(n);return s}class wv{constructor(e){this.base64=!1,this.contentType=null;const t=e.match(/^data:([^,]+)?,/);if(t===null)throw li(ar.DATA_URL,"Must be formatted 'data:[<mediatype>][;base64],<data>");const s=t[1]||null;s!=null&&(this.base64=YP(s,";base64"),this.contentType=this.base64?s.substring(0,s.length-7):s),this.rest=e.substring(e.indexOf(",")+1)}}function KP(r){const e=new wv(r);return e.base64?vv(ar.BASE64,e.rest):GP(e.rest)}function QP(r){return new wv(r).contentType}function YP(r,e){return r.length>=e.length?r.substring(r.length-e.length)===e:!1}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ss{constructor(e,t){let s=0,n="";xg(e)?(this.data_=e,s=e.size,n=e.type):e instanceof ArrayBuffer?(t?this.data_=new Uint8Array(e):(this.data_=new Uint8Array(e.byteLength),this.data_.set(new Uint8Array(e))),s=this.data_.length):e instanceof Uint8Array&&(t?this.data_=e:(this.data_=new Uint8Array(e.length),this.data_.set(e)),s=e.length),this.size_=s,this.type_=n}size(){return this.size_}type(){return this.type_}slice(e,t){if(xg(this.data_)){const s=this.data_,n=HP(s,e,t);return n===null?null:new ss(n)}else{const s=new Uint8Array(this.data_.buffer,e,t-e);return new ss(s,!0)}}static getBlob(...e){if(zh()){const t=e.map(s=>s instanceof ss?s.data_:s);return new ss(zP.apply(null,t))}else{const t=e.map(a=>Bh(a)?WP(ar.RAW,a).data:a.data_);let s=0;t.forEach(a=>{s+=a.byteLength});const n=new Uint8Array(s);let i=0;return t.forEach(a=>{for(let l=0;l<a.length;l++)n[i++]=a[l]}),new ss(n,!0)}}uploadData(){return this.data_}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function _v(r){let e;try{e=JSON.parse(r)}catch{return null}return MP(e)?e:null}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function XP(r){if(r.length===0)return null;const e=r.lastIndexOf("/");return e===-1?"":r.slice(0,e)}function JP(r,e){const t=e.split("/").filter(s=>s.length>0).join("/");return r.length===0?t:r+"/"+t}function Tv(r){const e=r.lastIndexOf("/",r.length-2);return e===-1?r:r.slice(e+1)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ZP(r,e){return e}class Tt{constructor(e,t,s,n){this.server=e,this.local=t||e,this.writable=!!s,this.xform=n||ZP}}let Ca=null;function e4(r){return!Bh(r)||r.length<2?r:Tv(r)}function Ev(){if(Ca)return Ca;const r=[];r.push(new Tt("bucket")),r.push(new Tt("generation")),r.push(new Tt("metageneration")),r.push(new Tt("name","fullPath",!0));function e(i,a){return e4(a)}const t=new Tt("name");t.xform=e,r.push(t);function s(i,a){return a!==void 0?Number(a):a}const n=new Tt("size");return n.xform=s,r.push(n),r.push(new Tt("timeCreated")),r.push(new Tt("updated")),r.push(new Tt("md5Hash",null,!0)),r.push(new Tt("cacheControl",null,!0)),r.push(new Tt("contentDisposition",null,!0)),r.push(new Tt("contentEncoding",null,!0)),r.push(new Tt("contentLanguage",null,!0)),r.push(new Tt("contentType",null,!0)),r.push(new Tt("metadata","customMetadata",!0)),Ca=r,Ca}function t4(r,e){function t(){const s=r.bucket,n=r.fullPath,i=new Lt(s,n);return e._makeStorageReference(i)}Object.defineProperty(r,"ref",{get:t})}function r4(r,e,t){const s={};s.type="file";const n=t.length;for(let i=0;i<n;i++){const a=t[i];s[a.local]=a.xform(s,e[a.server])}return t4(s,r),s}function Nv(r,e,t){const s=_v(e);return s===null?null:r4(r,s,t)}function s4(r,e,t,s){const n=_v(e);if(n===null||!Bh(n.downloadTokens))return null;const i=n.downloadTokens;if(i.length===0)return null;const a=encodeURIComponent;return i.split(",").map(u=>{const h=r.bucket,m=r.fullPath,x="/b/"+a(h)+"/o/"+a(m),g=Hh(x,t,s),v=yv({alt:"media",token:u});return g+v})[0]}function n4(r,e){const t={},s=e.length;for(let n=0;n<s;n++){const i=e[n];i.writable&&(t[i.server]=r[i.local])}return JSON.stringify(t)}class Cv{constructor(e,t,s,n){this.url=e,this.method=t,this.handler=s,this.timeout=n,this.urlParams={},this.headers={},this.body=null,this.errorHandler=null,this.progressCallback=null,this.successCodes=[200],this.additionalRetryCodes=[]}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Iv(r){if(!r)throw $h()}function o4(r,e){function t(s,n){const i=Nv(r,n,e);return Iv(i!==null),i}return t}function i4(r,e){function t(s,n){const i=Nv(r,n,e);return Iv(i!==null),s4(i,n,r.host,r._protocol)}return t}function Sv(r){function e(t,s){let n;return t.getStatus()===401?t.getErrorText().includes("Firebase App Check token is invalid")?n=bP():n=yP():t.getStatus()===402?n=xP(r.bucket):t.getStatus()===403?n=vP(r.path):n=s,n.status=t.getStatus(),n.serverResponse=s.serverResponse,n}return e}function a4(r){const e=Sv(r);function t(s,n){let i=e(s,n);return s.getStatus()===404&&(i=gP(r.path)),i.serverResponse=n.serverResponse,i}return t}function l4(r,e,t){const s=e.fullServerUrl(),n=Hh(s,r.host,r._protocol),i="GET",a=r.maxOperationRetryTime,l=new Cv(n,i,i4(r,t),a);return l.errorHandler=a4(e),l}function c4(r,e){return r&&r.contentType||e&&e.type()||"application/octet-stream"}function d4(r,e,t){const s=Object.assign({},t);return s.fullPath=r.path,s.size=e.size(),s.contentType||(s.contentType=c4(null,e)),s}function u4(r,e,t,s,n){const i=e.bucketOnlyServerUrl(),a={"X-Goog-Upload-Protocol":"multipart"};function l(){let _="";for(let R=0;R<2;R++)_=_+Math.random().toString().slice(2);return _}const d=l();a["Content-Type"]="multipart/related; boundary="+d;const u=d4(e,s,n),h=n4(u,t),m="--"+d+`\r
Content-Type: application/json; charset=utf-8\r
\r
`+h+`\r
--`+d+`\r
Content-Type: `+u.contentType+`\r
\r
`,x=`\r
--`+d+"--",g=ss.getBlob(m,s,x);if(g===null)throw CP();const v={name:u.fullPath},b=Hh(i,r.host,r._protocol),w="POST",k=r.maxUploadRetryTime,T=new Cv(b,w,o4(r,t),k);return T.urlParams=v,T.headers=a,T.body=g.uploadData(),T.errorHandler=Sv(e),T}class h4{constructor(){this.sent_=!1,this.xhr_=new XMLHttpRequest,this.initXhr(),this.errorCode_=en.NO_ERROR,this.sendPromise_=new Promise(e=>{this.xhr_.addEventListener("abort",()=>{this.errorCode_=en.ABORT,e()}),this.xhr_.addEventListener("error",()=>{this.errorCode_=en.NETWORK_ERROR,e()}),this.xhr_.addEventListener("load",()=>{e()})})}send(e,t,s,n,i){if(this.sent_)throw Fo("cannot .send() more than once");if(js(e)&&s&&(this.xhr_.withCredentials=!0),this.sent_=!0,this.xhr_.open(t,e,!0),i!==void 0)for(const a in i)i.hasOwnProperty(a)&&this.xhr_.setRequestHeader(a,i[a].toString());return n!==void 0?this.xhr_.send(n):this.xhr_.send(),this.sendPromise_}getErrorCode(){if(!this.sent_)throw Fo("cannot .getErrorCode() before sending");return this.errorCode_}getStatus(){if(!this.sent_)throw Fo("cannot .getStatus() before sending");try{return this.xhr_.status}catch{return-1}}getResponse(){if(!this.sent_)throw Fo("cannot .getResponse() before sending");return this.xhr_.response}getErrorText(){if(!this.sent_)throw Fo("cannot .getErrorText() before sending");return this.xhr_.statusText}abort(){this.xhr_.abort()}getResponseHeader(e){return this.xhr_.getResponseHeader(e)}addUploadProgressListener(e){this.xhr_.upload!=null&&this.xhr_.upload.addEventListener("progress",e)}removeUploadProgressListener(e){this.xhr_.upload!=null&&this.xhr_.upload.removeEventListener("progress",e)}}class f4 extends h4{initXhr(){this.xhr_.responseType="text"}}function kv(){return new f4}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class cn{constructor(e,t){this._service=e,t instanceof Lt?this._location=t:this._location=Lt.makeFromUrl(t,e.host)}toString(){return"gs://"+this._location.bucket+"/"+this._location.path}_newRef(e,t){return new cn(e,t)}get root(){const e=new Lt(this._location.bucket,"");return this._newRef(this._service,e)}get bucket(){return this._location.bucket}get fullPath(){return this._location.path}get name(){return Tv(this._location.path)}get storage(){return this._service}get parent(){const e=XP(this._location.path);if(e===null)return null;const t=new Lt(this._location.bucket,e);return new cn(this._service,t)}_throwIfRoot(e){if(this._location.path==="")throw kP(e)}}function m4(r,e,t){r._throwIfRoot("uploadBytes");const s=u4(r.storage,r._location,Ev(),new ss(e,!0),t);return r.storage.makeRequestWithTokens(s,kv).then(n=>({metadata:n,ref:r}))}function p4(r){r._throwIfRoot("getDownloadURL");const e=l4(r.storage,r._location,Ev());return r.storage.makeRequestWithTokens(e,kv).then(t=>{if(t===null)throw IP();return t})}function g4(r,e){const t=JP(r._location.path,e),s=new Lt(r._location.bucket,t);return new cn(r.storage,s)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function x4(r){return/^[A-Za-z]+:\/\//.test(r)}function y4(r,e){return new cn(r,e)}function jv(r,e){if(r instanceof qh){const t=r;if(t._bucket==null)throw NP();const s=new cn(t,t._bucket);return e!=null?jv(s,e):s}else return e!==void 0?g4(r,e):r}function b4(r,e){if(e&&x4(e)){if(r instanceof qh)return y4(r,e);throw lu("To use ref(service, url), the first argument must be a Storage instance.")}else return jv(r,e)}function bg(r,e){const t=e==null?void 0:e[gv];return t==null?null:Lt.makeFromBucketSpec(t,r)}function v4(r,e,t,s={}){r.host=`${e}:${t}`;const n=js(e);n&&(Hu(`https://${r.host}/b`),qu("Storage",!0)),r._isUsingEmulator=!0,r._protocol=n?"https":"http";const{mockUserToken:i}=s;i&&(r._overrideAuthToken=typeof i=="string"?i:H0(i,r.app.options.projectId))}class qh{constructor(e,t,s,n,i,a=!1){this.app=e,this._authProvider=t,this._appCheckProvider=s,this._url=n,this._firebaseVersion=i,this._isUsingEmulator=a,this._bucket=null,this._host=pv,this._protocol="https",this._appId=null,this._deleted=!1,this._maxOperationRetryTime=mP,this._maxUploadRetryTime=pP,this._requests=new Set,n!=null?this._bucket=Lt.makeFromBucketSpec(n,this._host):this._bucket=bg(this._host,this.app.options)}get host(){return this._host}set host(e){this._host=e,this._url!=null?this._bucket=Lt.makeFromBucketSpec(this._url,e):this._bucket=bg(e,this.app.options)}get maxUploadRetryTime(){return this._maxUploadRetryTime}set maxUploadRetryTime(e){yg("time",0,Number.POSITIVE_INFINITY,e),this._maxUploadRetryTime=e}get maxOperationRetryTime(){return this._maxOperationRetryTime}set maxOperationRetryTime(e){yg("time",0,Number.POSITIVE_INFINITY,e),this._maxOperationRetryTime=e}async _getAuthToken(){if(this._overrideAuthToken)return this._overrideAuthToken;const e=this._authProvider.getImmediate({optional:!0});if(e){const t=await e.getToken();if(t!==null)return t.accessToken}return null}async _getAppCheckToken(){if(Dt(this.app)&&this.app.settings.appCheckToken)return this.app.settings.appCheckToken;const e=this._appCheckProvider.getImmediate({optional:!0});return e?(await e.getToken()).token:null}_delete(){return this._deleted||(this._deleted=!0,this._requests.forEach(e=>e.cancel()),this._requests.clear()),Promise.resolve()}_makeStorageReference(e){return new cn(this,e)}_makeRequest(e,t,s,n,i=!0){if(this._deleted)return new jP(xv());{const a=$P(e,this._appId,s,n,t,this._firebaseVersion,i,this._isUsingEmulator);return this._requests.add(a),a.getPromise().then(()=>this._requests.delete(a),()=>this._requests.delete(a)),a}}async makeRequestWithTokens(e,t){const[s,n]=await Promise.all([this._getAuthToken(),this._getAppCheckToken()]);return this._makeRequest(e,t,s,n).getPromise()}}const vg="@firebase/storage",wg="0.13.13";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Av="storage";function w4(r,e,t){return r=Ye(r),m4(r,e,t)}function _4(r){return r=Ye(r),p4(r)}function T4(r,e){return r=Ye(r),b4(r,e)}function E4(r=Ku(),e){r=Ye(r);const s=Fl(r,Av).getImmediate({identifier:e}),n=$0("storage");return n&&N4(s,...n),s}function N4(r,e,t,s={}){v4(r,e,t,s)}function C4(r,{instanceIdentifier:e}){const t=r.getProvider("app").getImmediate(),s=r.getProvider("auth-internal"),n=r.getProvider("app-check-internal");return new qh(t,s,n,e,mn)}function I4(){nn(new Ts(Av,C4,"PUBLIC").setMultipleInstances(!0)),cr(vg,wg,""),cr(vg,wg,"esm2017")}I4();const S4={};var cu=null;function k4(r){try{return crypto.getRandomValues(new Uint8Array(r))}catch{}try{return S4.randomBytes(r)}catch{}if(!cu)throw Error("Neither WebCryptoAPI nor a crypto module is available. Use bcrypt.setRandomFallback to set an alternative");return cu(r)}function j4(r){cu=r}function Wh(r,e){if(r=r||Gh,typeof r!="number")throw Error("Illegal arguments: "+typeof r+", "+typeof e);r<4?r=4:r>31&&(r=31);var t=[];return t.push("$2b$"),r<10&&t.push("0"),t.push(r.toString()),t.push("$"),t.push(ml(k4(_i),_i)),t.join("")}function Pv(r,e,t){if(typeof e=="function"&&(t=e,e=void 0),typeof r=="function"&&(t=r,r=void 0),typeof r>"u")r=Gh;else if(typeof r!="number")throw Error("illegal arguments: "+typeof r);function s(n){Xt(function(){try{n(null,Wh(r))}catch(i){n(i)}})}if(t){if(typeof t!="function")throw Error("Illegal callback: "+typeof t);s(t)}else return new Promise(function(n,i){s(function(a,l){if(a){i(a);return}n(l)})})}function Rv(r,e){if(typeof e>"u"&&(e=Gh),typeof e=="number"&&(e=Wh(e)),typeof r!="string"||typeof e!="string")throw Error("Illegal arguments: "+typeof r+", "+typeof e);return du(r,e)}function Mv(r,e,t,s){function n(i){typeof r=="string"&&typeof e=="number"?Pv(e,function(a,l){du(r,l,i,s)}):typeof r=="string"&&typeof e=="string"?du(r,e,i,s):Xt(i.bind(this,Error("Illegal arguments: "+typeof r+", "+typeof e)))}if(t){if(typeof t!="function")throw Error("Illegal callback: "+typeof t);n(t)}else return new Promise(function(i,a){n(function(l,d){if(l){a(l);return}i(d)})})}function Dv(r,e){for(var t=r.length^e.length,s=0;s<r.length;++s)t|=r.charCodeAt(s)^e.charCodeAt(s);return t===0}function A4(r,e){if(typeof r!="string"||typeof e!="string")throw Error("Illegal arguments: "+typeof r+", "+typeof e);return e.length!==60?!1:Dv(Rv(r,e.substring(0,e.length-31)),e)}function P4(r,e,t,s){function n(i){if(typeof r!="string"||typeof e!="string"){Xt(i.bind(this,Error("Illegal arguments: "+typeof r+", "+typeof e)));return}if(e.length!==60){Xt(i.bind(this,null,!1));return}Mv(r,e.substring(0,29),function(a,l){a?i(a):i(null,Dv(l,e))},s)}if(t){if(typeof t!="function")throw Error("Illegal callback: "+typeof t);n(t)}else return new Promise(function(i,a){n(function(l,d){if(l){a(l);return}i(d)})})}function R4(r){if(typeof r!="string")throw Error("Illegal arguments: "+typeof r);return parseInt(r.split("$")[2],10)}function M4(r){if(typeof r!="string")throw Error("Illegal arguments: "+typeof r);if(r.length!==60)throw Error("Illegal hash length: "+r.length+" != 60");return r.substring(0,29)}function D4(r){if(typeof r!="string")throw Error("Illegal arguments: "+typeof r);return Ov(r)>72}var Xt=typeof process<"u"&&process&&typeof process.nextTick=="function"?typeof setImmediate=="function"?setImmediate:process.nextTick:setTimeout;function Ov(r){for(var e=0,t=0,s=0;s<r.length;++s)t=r.charCodeAt(s),t<128?e+=1:t<2048?e+=2:(t&64512)===55296&&(r.charCodeAt(s+1)&64512)===56320?(++s,e+=4):e+=3;return e}function O4(r){for(var e=0,t,s,n=new Array(Ov(r)),i=0,a=r.length;i<a;++i)t=r.charCodeAt(i),t<128?n[e++]=t:t<2048?(n[e++]=t>>6|192,n[e++]=t&63|128):(t&64512)===55296&&((s=r.charCodeAt(i+1))&64512)===56320?(t=65536+((t&1023)<<10)+(s&1023),++i,n[e++]=t>>18|240,n[e++]=t>>12&63|128,n[e++]=t>>6&63|128,n[e++]=t&63|128):(n[e++]=t>>12|224,n[e++]=t>>6&63|128,n[e++]=t&63|128);return n}var wn="./ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789".split(""),Qr=[-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,0,1,54,55,56,57,58,59,60,61,62,63,-1,-1,-1,-1,-1,-1,-1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,16,17,18,19,20,21,22,23,24,25,26,27,-1,-1,-1,-1,-1,-1,28,29,30,31,32,33,34,35,36,37,38,39,40,41,42,43,44,45,46,47,48,49,50,51,52,53,-1,-1,-1,-1,-1];function ml(r,e){var t=0,s=[],n,i;if(e<=0||e>r.length)throw Error("Illegal len: "+e);for(;t<e;){if(n=r[t++]&255,s.push(wn[n>>2&63]),n=(n&3)<<4,t>=e){s.push(wn[n&63]);break}if(i=r[t++]&255,n|=i>>4&15,s.push(wn[n&63]),n=(i&15)<<2,t>=e){s.push(wn[n&63]);break}i=r[t++]&255,n|=i>>6&3,s.push(wn[n&63]),s.push(wn[i&63])}return s.join("")}function Lv(r,e){var t=0,s=r.length,n=0,i=[],a,l,d,u,h,m;if(e<=0)throw Error("Illegal len: "+e);for(;t<s-1&&n<e&&(m=r.charCodeAt(t++),a=m<Qr.length?Qr[m]:-1,m=r.charCodeAt(t++),l=m<Qr.length?Qr[m]:-1,!(a==-1||l==-1||(h=a<<2>>>0,h|=(l&48)>>4,i.push(String.fromCharCode(h)),++n>=e||t>=s)||(m=r.charCodeAt(t++),d=m<Qr.length?Qr[m]:-1,d==-1)||(h=(l&15)<<4>>>0,h|=(d&60)>>2,i.push(String.fromCharCode(h)),++n>=e||t>=s)));)m=r.charCodeAt(t++),u=m<Qr.length?Qr[m]:-1,h=(d&3)<<6>>>0,h|=u,i.push(String.fromCharCode(h)),++n;var x=[];for(t=0;t<n;t++)x.push(i[t].charCodeAt(0));return x}var _i=16,Gh=10,L4=16,V4=100,_g=[608135816,2242054355,320440878,57701188,2752067618,698298832,137296536,3964562569,1160258022,953160567,3193202383,887688300,3232508343,3380367581,1065670069,3041331479,2450970073,2306472731],Tg=[3509652390,2564797868,805139163,3491422135,3101798381,1780907670,3128725573,4046225305,614570311,3012652279,134345442,2240740374,1667834072,1901547113,2757295779,4103290238,227898511,1921955416,1904987480,2182433518,2069144605,3260701109,2620446009,720527379,3318853667,677414384,3393288472,3101374703,2390351024,1614419982,1822297739,2954791486,3608508353,3174124327,2024746970,1432378464,3864339955,2857741204,1464375394,1676153920,1439316330,715854006,3033291828,289532110,2706671279,2087905683,3018724369,1668267050,732546397,1947742710,3462151702,2609353502,2950085171,1814351708,2050118529,680887927,999245976,1800124847,3300911131,1713906067,1641548236,4213287313,1216130144,1575780402,4018429277,3917837745,3693486850,3949271944,596196993,3549867205,258830323,2213823033,772490370,2760122372,1774776394,2652871518,566650946,4142492826,1728879713,2882767088,1783734482,3629395816,2517608232,2874225571,1861159788,326777828,3124490320,2130389656,2716951837,967770486,1724537150,2185432712,2364442137,1164943284,2105845187,998989502,3765401048,2244026483,1075463327,1455516326,1322494562,910128902,469688178,1117454909,936433444,3490320968,3675253459,1240580251,122909385,2157517691,634681816,4142456567,3825094682,3061402683,2540495037,79693498,3249098678,1084186820,1583128258,426386531,1761308591,1047286709,322548459,995290223,1845252383,2603652396,3431023940,2942221577,3202600964,3727903485,1712269319,422464435,3234572375,1170764815,3523960633,3117677531,1434042557,442511882,3600875718,1076654713,1738483198,4213154764,2393238008,3677496056,1014306527,4251020053,793779912,2902807211,842905082,4246964064,1395751752,1040244610,2656851899,3396308128,445077038,3742853595,3577915638,679411651,2892444358,2354009459,1767581616,3150600392,3791627101,3102740896,284835224,4246832056,1258075500,768725851,2589189241,3069724005,3532540348,1274779536,3789419226,2764799539,1660621633,3471099624,4011903706,913787905,3497959166,737222580,2514213453,2928710040,3937242737,1804850592,3499020752,2949064160,2386320175,2390070455,2415321851,4061277028,2290661394,2416832540,1336762016,1754252060,3520065937,3014181293,791618072,3188594551,3933548030,2332172193,3852520463,3043980520,413987798,3465142937,3030929376,4245938359,2093235073,3534596313,375366246,2157278981,2479649556,555357303,3870105701,2008414854,3344188149,4221384143,3956125452,2067696032,3594591187,2921233993,2428461,544322398,577241275,1471733935,610547355,4027169054,1432588573,1507829418,2025931657,3646575487,545086370,48609733,2200306550,1653985193,298326376,1316178497,3007786442,2064951626,458293330,2589141269,3591329599,3164325604,727753846,2179363840,146436021,1461446943,4069977195,705550613,3059967265,3887724982,4281599278,3313849956,1404054877,2845806497,146425753,1854211946,1266315497,3048417604,3681880366,3289982499,290971e4,1235738493,2632868024,2414719590,3970600049,1771706367,1449415276,3266420449,422970021,1963543593,2690192192,3826793022,1062508698,1531092325,1804592342,2583117782,2714934279,4024971509,1294809318,4028980673,1289560198,2221992742,1669523910,35572830,157838143,1052438473,1016535060,1802137761,1753167236,1386275462,3080475397,2857371447,1040679964,2145300060,2390574316,1461121720,2956646967,4031777805,4028374788,33600511,2920084762,1018524850,629373528,3691585981,3515945977,2091462646,2486323059,586499841,988145025,935516892,3367335476,2599673255,2839830854,265290510,3972581182,2759138881,3795373465,1005194799,847297441,406762289,1314163512,1332590856,1866599683,4127851711,750260880,613907577,1450815602,3165620655,3734664991,3650291728,3012275730,3704569646,1427272223,778793252,1343938022,2676280711,2052605720,1946737175,3164576444,3914038668,3967478842,3682934266,1661551462,3294938066,4011595847,840292616,3712170807,616741398,312560963,711312465,1351876610,322626781,1910503582,271666773,2175563734,1594956187,70604529,3617834859,1007753275,1495573769,4069517037,2549218298,2663038764,504708206,2263041392,3941167025,2249088522,1514023603,1998579484,1312622330,694541497,2582060303,2151582166,1382467621,776784248,2618340202,3323268794,2497899128,2784771155,503983604,4076293799,907881277,423175695,432175456,1378068232,4145222326,3954048622,3938656102,3820766613,2793130115,2977904593,26017576,3274890735,3194772133,1700274565,1756076034,4006520079,3677328699,720338349,1533947780,354530856,688349552,3973924725,1637815568,332179504,3949051286,53804574,2852348879,3044236432,1282449977,3583942155,3416972820,4006381244,1617046695,2628476075,3002303598,1686838959,431878346,2686675385,1700445008,1080580658,1009431731,832498133,3223435511,2605976345,2271191193,2516031870,1648197032,4164389018,2548247927,300782431,375919233,238389289,3353747414,2531188641,2019080857,1475708069,455242339,2609103871,448939670,3451063019,1395535956,2413381860,1841049896,1491858159,885456874,4264095073,4001119347,1565136089,3898914787,1108368660,540939232,1173283510,2745871338,3681308437,4207628240,3343053890,4016749493,1699691293,1103962373,3625875870,2256883143,3830138730,1031889488,3479347698,1535977030,4236805024,3251091107,2132092099,1774941330,1199868427,1452454533,157007616,2904115357,342012276,595725824,1480756522,206960106,497939518,591360097,863170706,2375253569,3596610801,1814182875,2094937945,3421402208,1082520231,3463918190,2785509508,435703966,3908032597,1641649973,2842273706,3305899714,1510255612,2148256476,2655287854,3276092548,4258621189,236887753,3681803219,274041037,1734335097,3815195456,3317970021,1899903192,1026095262,4050517792,356393447,2410691914,3873677099,3682840055,3913112168,2491498743,4132185628,2489919796,1091903735,1979897079,3170134830,3567386728,3557303409,857797738,1136121015,1342202287,507115054,2535736646,337727348,3213592640,1301675037,2528481711,1895095763,1721773893,3216771564,62756741,2142006736,835421444,2531993523,1442658625,3659876326,2882144922,676362277,1392781812,170690266,3921047035,1759253602,3611846912,1745797284,664899054,1329594018,3901205900,3045908486,2062866102,2865634940,3543621612,3464012697,1080764994,553557557,3656615353,3996768171,991055499,499776247,1265440854,648242737,3940784050,980351604,3713745714,1749149687,3396870395,4211799374,3640570775,1161844396,3125318951,1431517754,545492359,4268468663,3499529547,1437099964,2702547544,3433638243,2581715763,2787789398,1060185593,1593081372,2418618748,4260947970,69676912,2159744348,86519011,2512459080,3838209314,1220612927,3339683548,133810670,1090789135,1078426020,1569222167,845107691,3583754449,4072456591,1091646820,628848692,1613405280,3757631651,526609435,236106946,48312990,2942717905,3402727701,1797494240,859738849,992217954,4005476642,2243076622,3870952857,3732016268,765654824,3490871365,2511836413,1685915746,3888969200,1414112111,2273134842,3281911079,4080962846,172450625,2569994100,980381355,4109958455,2819808352,2716589560,2568741196,3681446669,3329971472,1835478071,660984891,3704678404,4045999559,3422617507,3040415634,1762651403,1719377915,3470491036,2693910283,3642056355,3138596744,1364962596,2073328063,1983633131,926494387,3423689081,2150032023,4096667949,1749200295,3328846651,309677260,2016342300,1779581495,3079819751,111262694,1274766160,443224088,298511866,1025883608,3806446537,1145181785,168956806,3641502830,3584813610,1689216846,3666258015,3200248200,1692713982,2646376535,4042768518,1618508792,1610833997,3523052358,4130873264,2001055236,3610705100,2202168115,4028541809,2961195399,1006657119,2006996926,3186142756,1430667929,3210227297,1314452623,4074634658,4101304120,2273951170,1399257539,3367210612,3027628629,1190975929,2062231137,2333990788,2221543033,2438960610,1181637006,548689776,2362791313,3372408396,3104550113,3145860560,296247880,1970579870,3078560182,3769228297,1714227617,3291629107,3898220290,166772364,1251581989,493813264,448347421,195405023,2709975567,677966185,3703036547,1463355134,2715995803,1338867538,1343315457,2802222074,2684532164,233230375,2599980071,2000651841,3277868038,1638401717,4028070440,3237316320,6314154,819756386,300326615,590932579,1405279636,3267499572,3150704214,2428286686,3959192993,3461946742,1862657033,1266418056,963775037,2089974820,2263052895,1917689273,448879540,3550394620,3981727096,150775221,3627908307,1303187396,508620638,2975983352,2726630617,1817252668,1876281319,1457606340,908771278,3720792119,3617206836,2455994898,1729034894,1080033504,976866871,3556439503,2881648439,1522871579,1555064734,1336096578,3548522304,2579274686,3574697629,3205460757,3593280638,3338716283,3079412587,564236357,2993598910,1781952180,1464380207,3163844217,3332601554,1699332808,1393555694,1183702653,3581086237,1288719814,691649499,2847557200,2895455976,3193889540,2717570544,1781354906,1676643554,2592534050,3230253752,1126444790,2770207658,2633158820,2210423226,2615765581,2414155088,3127139286,673620729,2805611233,1269405062,4015350505,3341807571,4149409754,1057255273,2012875353,2162469141,2276492801,2601117357,993977747,3918593370,2654263191,753973209,36408145,2530585658,25011837,3520020182,2088578344,530523599,2918365339,1524020338,1518925132,3760827505,3759777254,1202760957,3985898139,3906192525,674977740,4174734889,2031300136,2019492241,3983892565,4153806404,3822280332,352677332,2297720250,60907813,90501309,3286998549,1016092578,2535922412,2839152426,457141659,509813237,4120667899,652014361,1966332200,2975202805,55981186,2327461051,676427537,3255491064,2882294119,3433927263,1307055953,942726286,933058658,2468411793,3933900994,4215176142,1361170020,2001714738,2830558078,3274259782,1222529897,1679025792,2729314320,3714953764,1770335741,151462246,3013232138,1682292957,1483529935,471910574,1539241949,458788160,3436315007,1807016891,3718408830,978976581,1043663428,3165965781,1927990952,4200891579,2372276910,3208408903,3533431907,1412390302,2931980059,4132332400,1947078029,3881505623,4168226417,2941484381,1077988104,1320477388,886195818,18198404,3786409e3,2509781533,112762804,3463356488,1866414978,891333506,18488651,661792760,1628790961,3885187036,3141171499,876946877,2693282273,1372485963,791857591,2686433993,3759982718,3167212022,3472953795,2716379847,445679433,3561995674,3504004811,3574258232,54117162,3331405415,2381918588,3769707343,4154350007,1140177722,4074052095,668550556,3214352940,367459370,261225585,2610173221,4209349473,3468074219,3265815641,314222801,3066103646,3808782860,282218597,3406013506,3773591054,379116347,1285071038,846784868,2669647154,3771962079,3550491691,2305946142,453669953,1268987020,3317592352,3279303384,3744833421,2610507566,3859509063,266596637,3847019092,517658769,3462560207,3443424879,370717030,4247526661,2224018117,4143653529,4112773975,2788324899,2477274417,1456262402,2901442914,1517677493,1846949527,2295493580,3734397586,2176403920,1280348187,1908823572,3871786941,846861322,1172426758,3287448474,3383383037,1655181056,3139813346,901632758,1897031941,2986607138,3066810236,3447102507,1393639104,373351379,950779232,625454576,3124240540,4148612726,2007998917,544563296,2244738638,2330496472,2058025392,1291430526,424198748,50039436,29584100,3605783033,2429876329,2791104160,1057563949,3255363231,3075367218,3463963227,1469046755,985887462],Vv=[1332899944,1700884034,1701343084,1684370003,1668446532,1869963892];function Ti(r,e,t,s){var n,i=r[e],a=r[e+1];return i^=t[0],n=s[i>>>24],n+=s[256|i>>16&255],n^=s[512|i>>8&255],n+=s[768|i&255],a^=n^t[1],n=s[a>>>24],n+=s[256|a>>16&255],n^=s[512|a>>8&255],n+=s[768|a&255],i^=n^t[2],n=s[i>>>24],n+=s[256|i>>16&255],n^=s[512|i>>8&255],n+=s[768|i&255],a^=n^t[3],n=s[a>>>24],n+=s[256|a>>16&255],n^=s[512|a>>8&255],n+=s[768|a&255],i^=n^t[4],n=s[i>>>24],n+=s[256|i>>16&255],n^=s[512|i>>8&255],n+=s[768|i&255],a^=n^t[5],n=s[a>>>24],n+=s[256|a>>16&255],n^=s[512|a>>8&255],n+=s[768|a&255],i^=n^t[6],n=s[i>>>24],n+=s[256|i>>16&255],n^=s[512|i>>8&255],n+=s[768|i&255],a^=n^t[7],n=s[a>>>24],n+=s[256|a>>16&255],n^=s[512|a>>8&255],n+=s[768|a&255],i^=n^t[8],n=s[i>>>24],n+=s[256|i>>16&255],n^=s[512|i>>8&255],n+=s[768|i&255],a^=n^t[9],n=s[a>>>24],n+=s[256|a>>16&255],n^=s[512|a>>8&255],n+=s[768|a&255],i^=n^t[10],n=s[i>>>24],n+=s[256|i>>16&255],n^=s[512|i>>8&255],n+=s[768|i&255],a^=n^t[11],n=s[a>>>24],n+=s[256|a>>16&255],n^=s[512|a>>8&255],n+=s[768|a&255],i^=n^t[12],n=s[i>>>24],n+=s[256|i>>16&255],n^=s[512|i>>8&255],n+=s[768|i&255],a^=n^t[13],n=s[a>>>24],n+=s[256|a>>16&255],n^=s[512|a>>8&255],n+=s[768|a&255],i^=n^t[14],n=s[i>>>24],n+=s[256|i>>16&255],n^=s[512|i>>8&255],n+=s[768|i&255],a^=n^t[15],n=s[a>>>24],n+=s[256|a>>16&255],n^=s[512|a>>8&255],n+=s[768|a&255],i^=n^t[16],r[e]=a^t[L4+1],r[e+1]=i,r}function In(r,e){for(var t=0,s=0;t<4;++t)s=s<<8|r[e]&255,e=(e+1)%r.length;return{key:s,offp:e}}function Eg(r,e,t){for(var s=0,n=[0,0],i=e.length,a=t.length,l,d=0;d<i;d++)l=In(r,s),s=l.offp,e[d]=e[d]^l.key;for(d=0;d<i;d+=2)n=Ti(n,0,e,t),e[d]=n[0],e[d+1]=n[1];for(d=0;d<a;d+=2)n=Ti(n,0,e,t),t[d]=n[0],t[d+1]=n[1]}function F4(r,e,t,s){for(var n=0,i=[0,0],a=t.length,l=s.length,d,u=0;u<a;u++)d=In(e,n),n=d.offp,t[u]=t[u]^d.key;for(n=0,u=0;u<a;u+=2)d=In(r,n),n=d.offp,i[0]^=d.key,d=In(r,n),n=d.offp,i[1]^=d.key,i=Ti(i,0,t,s),t[u]=i[0],t[u+1]=i[1];for(u=0;u<l;u+=2)d=In(r,n),n=d.offp,i[0]^=d.key,d=In(r,n),n=d.offp,i[1]^=d.key,i=Ti(i,0,t,s),s[u]=i[0],s[u+1]=i[1]}function Ng(r,e,t,s,n){var i=Vv.slice(),a=i.length,l;if(t<4||t>31)if(l=Error("Illegal number of rounds (4-31): "+t),s){Xt(s.bind(this,l));return}else throw l;if(e.length!==_i)if(l=Error("Illegal salt length: "+e.length+" != "+_i),s){Xt(s.bind(this,l));return}else throw l;t=1<<t>>>0;var d,u,h=0,m;typeof Int32Array=="function"?(d=new Int32Array(_g),u=new Int32Array(Tg)):(d=_g.slice(),u=Tg.slice()),F4(e,r,d,u);function x(){if(n&&n(h/t),h<t)for(var v=Date.now();h<t&&(h=h+1,Eg(r,d,u),Eg(e,d,u),!(Date.now()-v>V4)););else{for(h=0;h<64;h++)for(m=0;m<a>>1;m++)Ti(i,m<<1,d,u);var b=[];for(h=0;h<a;h++)b.push((i[h]>>24&255)>>>0),b.push((i[h]>>16&255)>>>0),b.push((i[h]>>8&255)>>>0),b.push((i[h]&255)>>>0);if(s){s(null,b);return}else return b}s&&Xt(x)}if(typeof s<"u")x();else for(var g;;)if(typeof(g=x())<"u")return g||[]}function du(r,e,t,s){var n;if(typeof r!="string"||typeof e!="string")if(n=Error("Invalid string / salt: Not a string"),t){Xt(t.bind(this,n));return}else throw n;var i,a;if(e.charAt(0)!=="$"||e.charAt(1)!=="2")if(n=Error("Invalid salt version: "+e.substring(0,2)),t){Xt(t.bind(this,n));return}else throw n;if(e.charAt(2)==="$")i="\0",a=3;else{if(i=e.charAt(2),i!=="a"&&i!=="b"&&i!=="y"||e.charAt(3)!=="$")if(n=Error("Invalid salt revision: "+e.substring(2,4)),t){Xt(t.bind(this,n));return}else throw n;a=4}if(e.charAt(a+2)>"$")if(n=Error("Missing salt rounds"),t){Xt(t.bind(this,n));return}else throw n;var l=parseInt(e.substring(a,a+1),10)*10,d=parseInt(e.substring(a+1,a+2),10),u=l+d,h=e.substring(a+3,a+25);r+=i>="a"?"\0":"";var m=O4(r),x=Lv(h,_i);function g(v){var b=[];return b.push("$2"),i>="a"&&b.push(i),b.push("$"),u<10&&b.push("0"),b.push(u.toString()),b.push("$"),b.push(ml(x,x.length)),b.push(ml(v,Vv.length*4-1)),b.join("")}if(typeof t>"u")return g(Ng(m,x,u));Ng(m,x,u,function(v,b){v?t(v,null):t(null,g(b))},s)}function U4(r,e){return ml(r,e)}function $4(r,e){return Lv(r,e)}const Fv={setRandomFallback:j4,genSaltSync:Wh,genSalt:Pv,hashSync:Rv,hash:Mv,compareSync:A4,compare:P4,getRounds:R4,getSalt:M4,truncates:D4,encodeBase64:U4,decodeBase64:$4},B4={apiKey:"AIzaSyCBoEZeDucpm7p9OEDgaUGLzhn5HpItseQ",authDomain:"spandex-salvation-radio-site.firebaseapp.com",projectId:"spandex-salvation-radio-site",storageBucket:"spandex-salvation-radio-site.firebasestorage.app",appId:"1:632263635377:web:2a9bd6118a6a2cb9d8cd90"},Kh=G0(B4),fr=KS(Kh),Gi=qA(Kh),z4=E4(Kh),ic=new Sr;ic.addScope("profile");ic.addScope("email");ic.setCustomParameters({prompt:"select_account"});const Cg=["https://firebasestorage.googleapis.com/v0/b/spandex-salvation-radio-site.appspot.com/o/Avatars%2FBass-Bat.png?alt=media","https://firebasestorage.googleapis.com/v0/b/spandex-salvation-radio-site.appspot.com/o/Avatars%2FDrum-Dragon.png?alt=media","https://firebasestorage.googleapis.com/v0/b/spandex-salvation-radio-site.appspot.com/o/Avatars%2FHeadbanger-Hamster.png?alt=media","https://firebasestorage.googleapis.com/v0/b/spandex-salvation-radio-site.appspot.com/o/Avatars%2FMetal-Queen.png?alt=media","https://firebasestorage.googleapis.com/v0/b/spandex-salvation-radio-site.appspot.com/o/Avatars%2FMetal%20Cat.png?alt=media","https://firebasestorage.googleapis.com/v0/b/spandex-salvation-radio-site.appspot.com/o/Avatars%2FMosh-Pit-Monster.png?alt=media","https://firebasestorage.googleapis.com/v0/b/spandex-salvation-radio-site.appspot.com/o/Avatars%2FRebel-Raccoon.png?alt=media","https://firebasestorage.googleapis.com/v0/b/spandex-salvation-radio-site.appspot.com/o/Avatars%2FRock-Unicorn.png?alt=media"];function Uv(){const r="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789";let e="";for(let t=0;t<10;t++)e+=r.charAt(Math.floor(Math.random()*r.length));return e}function $v(){const r=Math.floor(Math.random()*Cg.length);return Cg[r]}async function H4(r){return await Fv.hash(r,12)}async function q4(r,e){return await Fv.compare(r,e)}async function Qh(){return new Promise(r=>{if(!navigator.geolocation){r(null);return}navigator.geolocation.getCurrentPosition(e=>{r({lat:e.coords.latitude,lng:e.coords.longitude})},()=>{r(null)})})}async function Bv(r){try{console.log("Registering new user:",r.email);const e=Uv(),t=await H4(r.password),s=await Qh(),n=$v(),i={FirstName:r.firstName||"",LastName:r.lastName||"",UserProfileImage:n,EmailAddress:r.email||"",PhoneNumber:r.phoneNumber||"",Location:s?{lat:s.lat,lng:s.lng}:null,IsActiveListening:!1,ActiveSubscription:!1,RenewalDate:null,UserID:e,PasswordHash:t,CreatedAt:new Date().toISOString(),UpdatedAt:new Date().toISOString()};return await fv(rc(Gi,"Users",`User: ${e}`),i),console.log("User registered successfully:",e),{success:!0,userID:e,profile:{...i,PasswordHash:void 0}}}catch(e){return console.error("Error registering user:",e),{success:!1,error:e}}}async function zv(r,e){try{console.log("Attempting login for:",r);const t=HA(Gi,"Users"),s=nP(t,oP("EmailAddress","==",r)),n=await uP(s);if(n.empty)return console.log("No user found with email:",r),{success:!1,error:"Invalid email or password"};const a=n.docs[0].data();return await q4(e,a.PasswordHash)?(console.log("Login successful for user:",a.UserID),{success:!0,userID:a.UserID,profile:{FirstName:a.FirstName,LastName:a.LastName,UserProfileImage:a.UserProfileImage,EmailAddress:a.EmailAddress,PhoneNumber:a.PhoneNumber,Location:a.Location,IsActiveListening:a.IsActiveListening,ActiveSubscription:a.ActiveSubscription,RenewalDate:a.RenewalDate,UserID:a.UserID}}):(console.log("Invalid password for user:",r),{success:!1,error:"Invalid email or password"})}catch(t){return console.error("Error logging in user:",t),{success:!1,error:t}}}async function W4(r){try{const e=await dP(rc(Gi,"Users",`User: ${r}`));if(!e.exists())return{success:!1,error:"User not found"};const t=e.data();return{success:!0,profile:{FirstName:t.FirstName,LastName:t.LastName,UserProfileImage:t.UserProfileImage,EmailAddress:t.EmailAddress,PhoneNumber:t.PhoneNumber,Location:t.Location,IsActiveListening:t.IsActiveListening,ActiveSubscription:t.ActiveSubscription,RenewalDate:t.RenewalDate,UserID:t.UserID}}}catch(e){return console.error("Error getting user profile:",e),{success:!1,error:e}}}async function Hv(r,e){var t,s;try{const n=e||Uv(),i=await Qh(),a={FirstName:((t=r.displayName)==null?void 0:t.split(" ")[0])||"",LastName:((s=r.displayName)==null?void 0:s.split(" ").slice(1).join(" "))||"",UserProfileImage:r.photoURL||$v(),EmailAddress:r.email||"",PhoneNumber:r.phoneNumber||"",Location:i?{lat:i.lat,lng:i.lng}:null,IsActiveListening:!1,ActiveSubscription:!1,RenewalDate:null,UserID:n,GoogleUID:r.uid,CreatedAt:new Date().toISOString(),UpdatedAt:new Date().toISOString()};return await fv(rc(Gi,"Users",`User: ${n}`),a),console.log("User profile created successfully:",n),{success:!0,userID:n,profile:a}}catch(n){return console.error("Error creating user profile:",n),{success:!1,error:n}}}async function ac(r,e){try{const t=rc(Gi,"Users",`User: ${r}`),s={...e,UpdatedAt:new Date().toISOString()};return await hP(t,s),console.log("User profile updated successfully"),{success:!0}}catch(t){return console.error("Error updating user profile:",t),{success:!1,error:t}}}async function G4(r,e){try{const t=T4(z4,`User: ${r}/profile-image`),s=await w4(t,e),n=await _4(s.ref);return await ac(r,{UserProfileImage:n}),{success:!0,url:n}}catch(t){return console.error("Error uploading profile image:",t),{success:!1,error:t}}}async function K4(r,e){try{return await ac(r,{IsActiveListening:e}),{success:!0}}catch(t){return console.error("Error updating listening status:",t),{success:!1,error:t}}}async function Q4(r){try{const e=await Qh();return e?(await ac(r,{Location:e}),{success:!0}):{success:!1,error:"Location not available"}}catch(e){return console.error("Error updating location:",e),{success:!1,error:e}}}async function Y4(){try{console.log("Attempting Google sign-in..."),console.log("Current domain:",window.location.hostname),console.log("Auth domain:",fr.config.authDomain),console.log("OAuth mode: Testing (should work with test users)"),console.log("OAuth Client ID:","632263635377-sa02i1luggs8hlmc6ivt0a6i5gv0irrn.apps.googleusercontent.com"),console.log("Current URL:",window.location.href),console.log("Expected redirect URI:",`${window.location.origin}/__/auth/handler`);const r=window.location.hostname,e=fr.config.authDomain,t=["localhost","127.0.0.1","spandex-salvation-radio-site.web.app","spandex-salvation-radio.com","www.spandex-salvation-radio.com","spandex-salvation-radio-site.firebaseapp.com"];!t.includes(r)&&!r.includes("localhost")&&(console.warn("Current domain may not be authorized for Google OAuth:",r),console.log("Available domains for testing:",t)),console.log("Note: In testing mode, only authorized test users can sign in"),console.log("Make sure your Google account is added as a test user in Google Cloud Console"),await lS(fr,ic),console.log("Redirect initiated successfully")}catch(r){throw console.error("Error signing in with Google:",r),console.error("Error code:",r.code),console.error("Error message:",r.message),r.code==="auth/popup-closed-by-user"?new Error("Sign-in was cancelled. Please try again."):r.code==="auth/popup-blocked"?new Error("Sign-in popup was blocked. Please allow popups for this site."):r.code==="auth/unauthorized-domain"?new Error("This domain is not authorized for Google sign-in. Please contact support."):r.code==="auth/operation-not-allowed"?new Error("Google sign-in is not enabled. Please contact support."):r.code==="auth/access-denied"?new Error("Access denied. You may not be a test user. Please contact support to be added as a test user."):r.code==="auth/redirect-cancelled-by-user"?new Error("Sign-in was cancelled during redirect. Please try again."):r.code==="auth/redirect-operation-pending"?new Error("A redirect operation is already in progress. Please wait."):new Error(`Sign-in failed: ${r.message||"Unknown error"}`)}}async function X4(){try{console.log("Checking for Google sign-in redirect result..."),console.log("Current URL:",window.location.href),console.log("Has URL parameters:",window.location.search.length>0),console.log("URL search params:",window.location.search);const r=await dS(fr);if(console.log("Redirect result:",r),r){const e=r.user;console.log("Google sign-in successful:",e),console.log("User email:",e.email),console.log("User display name:",e.displayName),console.log("User UID:",e.uid);const t=await Hv(e);return console.log("Profile creation result:",t),{success:!0,user:e,profileResult:t}}return console.log("No redirect result found"),console.log("This could mean:"),console.log("1. User cancelled the sign-in"),console.log("2. User is not a test user (in testing mode)"),console.log("3. Domain is not authorized"),console.log("4. OAuth configuration issue"),{success:!1,error:"No redirect result"}}catch(r){return console.error("Error handling redirect result:",r),r.code==="auth/account-exists-with-different-credential"?{success:!1,error:"An account already exists with this email using a different sign-in method."}:r.code==="auth/invalid-credential"?{success:!1,error:"Invalid credentials. Please try again."}:r.code==="auth/operation-not-allowed"?{success:!1,error:"Google sign-in is not enabled. Please contact support."}:r.code==="auth/user-disabled"?{success:!1,error:"This account has been disabled."}:r.code==="auth/user-not-found"?{success:!1,error:"User not found. Please try signing in again."}:r.code==="auth/weak-password"?{success:!1,error:"Password is too weak."}:r.code==="auth/access-denied"?{success:!1,error:"Access denied. You may not be a test user. Please contact support to be added as a test user."}:{success:!1,error:r.message||"Unknown error occurred during sign-in."}}}const qv=p.createContext(void 0);function Rs(){const r=p.useContext(qv);if(r===void 0)throw new Error("useAuth must be used within an AuthProvider");return r}function J4({children:r}){const[e,t]=p.useState(null),[s,n]=p.useState(null),[i,a]=p.useState(null),[l,d]=p.useState(!0),u=async _=>{try{const R=await W4(_);return R.success?(a(R.profile),R.profile):null}catch(R){return console.error("Error loading Firebase profile:",R),null}},h=async()=>{var _,R;try{const D=fr.currentUser;t(D?{id:D.uid,email:D.email||"",username:D.displayName||"",firstName:((_=D.displayName)==null?void 0:_.split(" ")[0])||"",lastName:((R=D.displayName)==null?void 0:R.split(" ").slice(1).join(" "))||"",phoneNumber:D.phoneNumber||"",isEmailVerified:D.emailVerified,isPhoneVerified:!!D.phoneNumber,createdAt:D.metadata.creationTime||new Date().toISOString(),updatedAt:D.metadata.lastSignInTime||new Date().toISOString()}:null)}catch(D){console.error("Error refreshing user:",D),t(null)}finally{d(!1)}},m=async(_,R)=>{try{console.log("[AuthContext] Attempting email/password login...");const D=await zv(_,R);if(!D.success)throw new Error(D.error||"Login failed");console.log("[AuthContext] Login successful:",D.userID),localStorage.setItem("userID",D.userID),localStorage.setItem("userProfile",JSON.stringify(D.profile)),localStorage.setItem("isLoggedIn","true"),t({id:D.userID,email:D.profile.EmailAddress,username:`${D.profile.FirstName} ${D.profile.LastName}`.trim(),firstName:D.profile.FirstName,lastName:D.profile.LastName,phoneNumber:D.profile.PhoneNumber,isEmailVerified:!0,isPhoneVerified:!!D.profile.PhoneNumber,createdAt:new Date().toISOString(),updatedAt:new Date().toISOString()}),a(D.profile),console.log("[AuthContext] Login completed, user state updated")}catch(D){throw console.error("[AuthContext] Login error:",D),new Error(D.message||"Login failed")}},x=async(_,R,D,$,S,I,E)=>{try{console.log("[AuthContext] Attempting email/password registration...");const j=await Bv({firstName:$,lastName:S,email:_,phoneNumber:I,password:R});if(!j.success)throw new Error(j.error||"Registration failed");console.log("[AuthContext] Registration successful:",j.userID),localStorage.setItem("userID",j.userID),localStorage.setItem("userProfile",JSON.stringify(j.profile)),localStorage.setItem("isLoggedIn","true"),t({id:j.userID,email:j.profile.EmailAddress,username:`${j.profile.FirstName} ${j.profile.LastName}`.trim(),firstName:j.profile.FirstName,lastName:j.profile.LastName,phoneNumber:j.profile.PhoneNumber,isEmailVerified:!0,isPhoneVerified:!!j.profile.PhoneNumber,createdAt:new Date().toISOString(),updatedAt:new Date().toISOString()}),a(j.profile),console.log("[AuthContext] Registration completed, user state updated")}catch(j){throw console.error("[AuthContext] Registration error:",j),new Error(j.message||"Registration failed")}},g=async()=>{try{await SI(fr),t(null),n(null),a(null),localStorage.removeItem("userID"),localStorage.removeItem("userProfile"),localStorage.removeItem("isLoggedIn")}catch(_){console.error("Logout error:",_)}},v=async()=>{try{await Y4()}catch(_){throw console.error("Google sign in error:",_),_}},b=async _=>{try{return i!=null&&i.UserID&&(await ac(i.UserID,_)).success?(await u(i.UserID),!0):!1}catch(R){return console.error("Error updating profile:",R),!1}},w=async _=>{try{return i!=null&&i.UserID&&(await G4(i.UserID,_)).success?(await u(i.UserID),!0):!1}catch(R){return console.error("Error uploading profile image:",R),!1}},k=async _=>{try{i!=null&&i.UserID&&await K4(i.UserID,_)}catch(R){console.error("Error updating listening status:",R)}},T=async()=>{try{i!=null&&i.UserID&&(await Q4(i.UserID),await u(i.UserID))}catch(_){console.error("Error updating location:",_)}};return p.useEffect(()=>{console.log("[AuthContext] Setting up authentication listeners...");const _=localStorage.getItem("isLoggedIn"),R=localStorage.getItem("userID"),D=localStorage.getItem("userProfile");if(console.log("[AuthContext] Previous login state:",_),console.log("[AuthContext] Stored userID:",R),console.log("[AuthContext] Stored userProfile:",D),_==="true"&&R&&D)try{const S=JSON.parse(D);t({id:R,email:S.EmailAddress,username:`${S.FirstName} ${S.LastName}`.trim(),firstName:S.FirstName,lastName:S.LastName,phoneNumber:S.PhoneNumber,isEmailVerified:!0,isPhoneVerified:!!S.PhoneNumber,createdAt:new Date().toISOString(),updatedAt:new Date().toISOString()}),a(S),console.log("[AuthContext] Restored user from localStorage:",S)}catch(S){console.error("[AuthContext] Error parsing stored profile:",S),localStorage.removeItem("userID"),localStorage.removeItem("userProfile"),localStorage.removeItem("isLoggedIn")}const $=II(fr,async S=>{var I,E,j;if(console.log("[AuthContext] onAuthStateChanged fired. User:",S),S){console.log("[AuthContext] User authenticated via Google:",{uid:S.uid,email:S.email,displayName:S.displayName,emailVerified:S.emailVerified,providerId:(I=S.providerData[0])==null?void 0:I.providerId}),n(S),localStorage.setItem("isLoggedIn","true"),t({id:S.uid,email:S.email||"",username:S.displayName||"",firstName:((E=S.displayName)==null?void 0:E.split(" ")[0])||"",lastName:((j=S.displayName)==null?void 0:j.split(" ").slice(1).join(" "))||"",phoneNumber:S.phoneNumber||"",isEmailVerified:S.emailVerified,isPhoneVerified:!!S.phoneNumber,createdAt:S.metadata.creationTime||new Date().toISOString(),updatedAt:S.metadata.lastSignInTime||new Date().toISOString()});try{const C=await Hv(S);console.log("[AuthContext] Profile creation result:",C),C.success&&(a(C.profile),console.log("[AuthContext] Firebase profile set:",C.profile))}catch(C){console.error("[AuthContext] Error creating/loading profile:",C)}}else console.log("[AuthContext] No user authenticated, clearing state"),n(null),a(null),t(null),localStorage.removeItem("isLoggedIn");d(!1)});return console.log("[AuthContext] Checking for redirect result..."),X4().then(S=>{var I,E,j;console.log("[AuthContext] handleRedirectResult result:",S),S.success&&S.user?(console.log("[AuthContext] Successful redirect result, setting user state"),n(S.user),t({id:S.user.uid,email:S.user.email||"",username:S.user.displayName||"",firstName:((I=S.user.displayName)==null?void 0:I.split(" ")[0])||"",lastName:((E=S.user.displayName)==null?void 0:E.split(" ").slice(1).join(" "))||"",phoneNumber:S.user.phoneNumber||"",isEmailVerified:S.user.emailVerified,isPhoneVerified:!!S.user.phoneNumber,createdAt:S.user.metadata.creationTime||new Date().toISOString(),updatedAt:S.user.metadata.lastSignInTime||new Date().toISOString()}),(j=S.profileResult)!=null&&j.profile&&a(S.profileResult.profile),d(!1),localStorage.setItem("isLoggedIn","true"),console.log("[AuthContext] User state set after Google redirect:",S.user)):console.log("[AuthContext] No successful redirect result, error:",S.error)}),d(!1),()=>{$()}},[]),o.jsx(qv.Provider,{value:{user:e,firebaseUser:s,firebaseProfile:i,loading:l,isAuthenticated:!!e||!!s,login:m,register:x,logout:g,refreshUser:h,signInWithGoogle:v,updateProfile:b,uploadProfileImage:w,updateListeningStatus:k,updateLocation:T},children:r})}function Z4(){return o.jsx("a",{href:"#main-content",className:"sr-only focus:not-sr-only focus:absolute focus:top-4 focus:left-4 z-50 bg-orange-500 text-white px-4 py-2 rounded-md font-semibold transition-all",children:"Skip to main content"})}function eR(){const{currentTheme:r,getColors:e}=Me(),t=e(),s=r==="light-mode";return p.useEffect(()=>{const n=document.querySelector('meta[name="theme-color"]');if(n)n.setAttribute("content",t.primary);else{const _=document.createElement("meta");_.name="theme-color",_.content=t.primary,document.head.appendChild(_)}document.querySelector('link[rel="icon"]');const i=`
      <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 32 32">
        <defs>
          <linearGradient id="bgGrad" x1="0%" y1="0%" x2="100%" y2="100%">
            <stop offset="0%" style="stop-color:${t.primary}" />
            <stop offset="100%" style="stop-color:${t.secondary}" />
          </linearGradient>
          <linearGradient id="discGrad" x1="0%" y1="0%" x2="100%" y2="100%">
            <stop offset="0%" style="stop-color:#ffffff;stop-opacity:0.95" />
            <stop offset="50%" style="stop-color:#e8e8e8;stop-opacity:0.85" />
            <stop offset="100%" style="stop-color:#d0d0d0;stop-opacity:0.75" />
          </linearGradient>
        </defs>
        
        <!-- Background circle with theme gradient -->
        <circle cx="16" cy="16" r="16" fill="url(#bgGrad)"/>
        
        <!-- Music disc -->
        <circle cx="16" cy="16" r="11" fill="url(#discGrad)"/>
        
        <!-- Center hole -->
        <circle cx="16" cy="16" r="4" fill="${s?"#1a1a1a":"#0a0a0a"}"/>
        
        <!-- Inner ring details -->
        <circle cx="16" cy="16" r="8" stroke="${s?"#666666":"#999999"}" stroke-width="0.5" fill="none" opacity="0.6"/>
        <circle cx="16" cy="16" r="6" stroke="${s?"#888888":"#bbbbbb"}" stroke-width="0.3" fill="none" opacity="0.4"/>
        
        <!-- Shine effect -->
        <path d="M 9 9 A 9 9 0 0 1 23 9" stroke="white" stroke-width="1.2" fill="none" opacity="0.5"/>
        <path d="M 11 11 A 7 7 0 0 1 21 11" stroke="white" stroke-width="0.8" fill="none" opacity="0.3"/>
      </svg>
    `,l=`data:image/svg+xml,${encodeURIComponent(i)}`;if(document.querySelectorAll('link[rel*="icon"]').forEach(_=>{_.href=l}),!document.querySelector('link[rel="icon"]')){const _=document.createElement("link");_.rel="icon",_.type="image/svg+xml",_.href=l,document.head.appendChild(_)}const u=document.querySelector('meta[name="color-scheme"]');if(u)u.setAttribute("content",s?"light":"dark");else{const _=document.createElement("meta");_.name="color-scheme",_.content=s?"light":"dark",document.head.appendChild(_)}const h=document.querySelector('meta[property="og:image"]'),m=s?"#000000":"#ffffff",x=s?"#ffffff":"#000000",g=window.location.origin,v=r.replace("-mode","").replace("-","_"),b=`${g}/api/og-image?theme=${v}&primary=${encodeURIComponent(t.primary)}&secondary=${encodeURIComponent(t.secondary)}&background=${encodeURIComponent(x)}&text=${encodeURIComponent(m)}&v=${Date.now()}`;if(h)h.setAttribute("content",b);else{const _=document.createElement("meta");_.setAttribute("property","og:image"),_.content=b,document.head.appendChild(_)}const w=document.querySelector('meta[name="twitter:image"]');if(w)w.setAttribute("content",b);else{const _=document.createElement("meta");_.name="twitter:image",_.content=b,document.head.appendChild(_)}const k=document.querySelector('meta[property="og:url"]'),T=window.location.href.split("?")[0]+`?theme=${v}&v=${Date.now()}`;if(k)k.setAttribute("content",T);else{const _=document.createElement("meta");_.setAttribute("property","og:url"),_.content=T,document.head.appendChild(_)}document.documentElement.style.setProperty("--preview-primary",t.primary),document.documentElement.style.setProperty("--preview-secondary",t.secondary),document.documentElement.style.setProperty("--preview-background",x),document.documentElement.style.setProperty("--preview-text",m)},[r,t,s]),null}const lc=Jg,tR=Iu,Wv=p.forwardRef(({className:r,...e},t)=>o.jsx(Il,{ref:t,className:se("fixed inset-0 z-50 bg-black/80 data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0",r),...e}));Wv.displayName=Il.displayName;const cc=p.forwardRef(({className:r,children:e,...t},s)=>o.jsxs(tR,{children:[o.jsx(Wv,{}),o.jsxs(Sl,{ref:s,className:se("fixed left-[50%] top-[50%] z-50 grid w-full max-w-lg translate-x-[-50%] translate-y-[-50%] gap-4 border bg-background p-6 shadow-lg duration-200 data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[state=closed]:slide-out-to-left-1/2 data-[state=closed]:slide-out-to-top-[48%] data-[state=open]:slide-in-from-left-1/2 data-[state=open]:slide-in-from-top-[48%] sm:rounded-lg",r),"aria-describedby":"dialog-description",...t,children:[e,o.jsxs(kl,{className:"absolute right-4 top-4 rounded-sm opacity-70 ring-offset-background transition-opacity hover:opacity-100 focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2 disabled:pointer-events-none data-[state=open]:bg-accent data-[state=open]:text-muted-foreground",children:[o.jsx(Mr,{className:"h-4 w-4"}),o.jsx("span",{className:"sr-only",children:"Close"})]})]})]}));cc.displayName=Sl.displayName;const Ki=({className:r,...e})=>o.jsx("div",{className:se("flex flex-col space-y-1.5 text-center sm:text-left",r),...e});Ki.displayName="DialogHeader";const Qi=p.forwardRef(({className:r,...e},t)=>o.jsx(Su,{ref:t,className:se("text-lg font-semibold leading-none tracking-tight",r),...e}));Qi.displayName=Su.displayName;const Yh=p.forwardRef(({className:r,...e},t)=>o.jsx(ku,{ref:t,className:se("text-sm text-muted-foreground",r),...e}));Yh.displayName=ku.displayName;const Ae=p.forwardRef(({className:r,type:e,...t},s)=>o.jsx("input",{type:e,className:se("flex h-10 w-full rounded-md border border-input bg-background px-3 py-2 text-base ring-offset-background file:border-0 file:bg-transparent file:text-sm file:font-medium file:text-foreground placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50 md:text-sm",r),ref:s,...t}));Ae.displayName="Input";const Xh=Ml("inline-flex items-center justify-center gap-2 whitespace-nowrap rounded-md text-sm font-medium ring-offset-background transition-colors focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50 [&_svg]:pointer-events-none [&_svg]:size-4 [&_svg]:shrink-0",{variants:{variant:{default:"bg-primary text-primary-foreground hover:bg-primary/90",destructive:"bg-destructive text-destructive-foreground hover:bg-destructive/90",outline:"border border-input bg-background hover:bg-accent hover:text-accent-foreground",secondary:"bg-secondary text-secondary-foreground hover:bg-secondary/80",ghost:"hover:bg-accent hover:text-accent-foreground",link:"text-primary underline-offset-4 hover:underline"},size:{default:"h-10 px-4 py-2",sm:"h-9 rounded-md px-3",lg:"h-11 rounded-md px-8",icon:"h-10 w-10"}},defaultVariants:{variant:"default",size:"default"}}),q=p.forwardRef(({className:r,variant:e,size:t,asChild:s=!1,...n},i)=>{const a=s?S_:"button";return o.jsx(a,{className:se(Xh({variant:e,size:t,className:r})),ref:i,...n})});q.displayName="Button";var rR="Label",Gv=p.forwardRef((r,e)=>o.jsx(Pe.label,{...r,ref:e,onMouseDown:t=>{var n;t.target.closest("button, input, select, textarea")||((n=r.onMouseDown)==null||n.call(r,t),!t.defaultPrevented&&t.detail>1&&t.preventDefault())}}));Gv.displayName=rR;var Kv=Gv;const sR=Ml("text-sm font-medium leading-none peer-disabled:cursor-not-allowed peer-disabled:opacity-70"),_e=p.forwardRef(({className:r,...e},t)=>o.jsx(Kv,{ref:t,className:se(sR(),r),...e}));_e.displayName=Kv.displayName;const nR=p.createContext(null);function oR(){const r=p.useContext(nR);if(!r)throw new Error("useRecaptcha must be used within a RecaptchaV3Provider");return r}function Ig({isOpen:r,onClose:e,type:t,contactInfo:s}){const[n,i]=p.useState(""),[a,l]=p.useState(!1),[d,u]=p.useState(!1),[h,m]=p.useState(!1),{colors:x}=Me(),{toast:g}=xr(),[v,b]=p.useState(null),[w,k]=p.useState(!1),{executeRecaptcha:T}=oR();p.useEffect(()=>(t==="phone"&&r&&!window.recaptchaVerifier&&(window.recaptchaVerifier=new QI("recaptcha-container",{size:"invisible",callback:()=>k(!0)},fr),k(!0)),()=>{window.recaptchaVerifier&&(window.recaptchaVerifier.clear(),window.recaptchaVerifier=null)}),[t,r]),p.useEffect(()=>{t==="phone"&&r&&w&&!v&&(m(!0),cp(fr,s,window.recaptchaVerifier).then(D=>{b(D),g({title:"Code Sent",description:`A verification code was sent to ${s}.`})}).catch(D=>{g({title:"Error",description:D.message,variant:"destructive"})}).finally(()=>m(!1)))},[t,r,w,s,v,g]),p.useEffect(()=>{r||(i(""),u(!1),l(!1),m(!1))},[r]);const _=async D=>{if(D.preventDefault(),!(a||!n.trim())){l(!0);try{if(t==="phone"){if(!v)throw new Error("No confirmation result. Please resend code.");await v.confirm(n),await gs("POST","/api/user/phone-verified",{})}else await gs("POST","/api/user/verify-email",{code:n});u(!0),g({title:"Verification Successful!",description:`Your ${t} has been verified.`}),setTimeout(()=>{e(),i(""),u(!1)},2e3)}catch($){g({title:"Verification Failed",description:$.message||"Invalid verification code. Please try again.",variant:"destructive"})}finally{l(!1)}}},R=async()=>{if(!h){m(!0);try{t==="phone"?cp(fr,s,window.recaptchaVerifier).then(D=>{b(D),g({title:"Code Sent",description:`A new verification code was sent to ${s}.`})}).catch(D=>{g({title:"Error",description:D.message,variant:"destructive"})}).finally(()=>m(!1)):(await gs("POST","/api/user/send-email-verification",{}),g({title:"Code Sent",description:"A new verification code has been sent to your email."}))}catch(D){g({title:"Error",description:D.message||"Failed to send verification code.",variant:"destructive"}),m(!1)}}};return o.jsx(lc,{open:r,onOpenChange:e,children:o.jsxs(cc,{className:"sm:max-w-md",style:{backgroundColor:x.cardBackground,borderColor:x.primary,color:x.text},children:[o.jsx(Ki,{children:o.jsx(Qi,{className:"flex items-center gap-3 text-xl font-bold",children:d?o.jsxs(o.Fragment,{children:[o.jsx(Zr,{className:"h-6 w-6",style:{color:"#10B981"}}),"Verified!"]}):o.jsxs(o.Fragment,{children:[t==="phone"?o.jsx(Wa,{className:"h-6 w-6",style:{color:x.primary}}):o.jsx(ui,{className:"h-6 w-6",style:{color:x.primary}}),"Verify ",t==="phone"?"Phone Number":"Email Address"]})})}),t==="phone"&&o.jsx("div",{id:"recaptcha-container"}),d?o.jsxs("div",{className:"text-center py-8",children:[o.jsx(Zr,{className:"h-16 w-16 mx-auto mb-4",style:{color:"#10B981"}}),o.jsxs("p",{className:"text-lg",style:{color:x.text},children:["Your ",t," has been successfully verified!"]})]}):o.jsxs("form",{onSubmit:_,className:"space-y-6",children:[o.jsxs("div",{className:"text-center space-y-2",children:[o.jsx("p",{style:{color:x.text},children:"We sent a verification code to:"}),o.jsx("p",{className:"font-medium",style:{color:x.primary},children:s}),o.jsxs("p",{className:"text-sm opacity-75",style:{color:x.text},children:["Enter the 6-digit code to verify your ",t,"."]})]}),o.jsxs("div",{className:"space-y-2",children:[o.jsx(_e,{htmlFor:"verification-code",style:{color:x.text},children:"Verification Code"}),o.jsx(Ae,{id:"verification-code",type:"text",value:n,onChange:D=>i(D.target.value.replace(/\D/g,"").slice(0,6)),className:"text-center text-2xl tracking-wider bg-black/50",style:{color:x.text,borderColor:"#374151"},onFocus:D=>D.currentTarget.style.borderColor=x.primary,onBlur:D=>D.currentTarget.style.borderColor="#374151",placeholder:"000000",maxLength:6,required:!0})]}),o.jsxs("div",{className:"flex flex-col gap-3",children:[o.jsx(q,{type:"submit",disabled:a||((n==null?void 0:n.length)||0)!==6,className:"w-full py-3 font-semibold transition-all duration-200",style:{backgroundColor:x.primary,color:"white",opacity:a||((n==null?void 0:n.length)||0)!==6?.6:1},children:a?"Verifying...":"Verify Code"}),o.jsx(q,{type:"button",variant:"ghost",onClick:R,className:"text-sm",style:{color:x.primary},children:"Didn't receive the code? Resend"})]})]})]})})}class iR extends p.Component{constructor(e){super(e),this.state={hasError:!1}}static getDerivedStateFromError(e){return{hasError:!0,error:e}}componentDidCatch(e,t){console.error("ErrorBoundary caught an error:",e,t)}render(){return this.state.hasError?this.props.fallback||o.jsx("div",{className:"min-h-screen flex items-center justify-center bg-black text-white",children:o.jsxs("div",{className:"text-center p-8",children:[o.jsx("h1",{className:"text-2xl font-bold mb-4",children:"Something went wrong"}),o.jsx("p",{className:"mb-4",children:"The site encountered an error. Please refresh the page."}),o.jsx("button",{onClick:()=>window.location.reload(),className:"px-4 py-2 bg-orange-600 text-white rounded hover:bg-orange-700",children:"Refresh Page"})]})}):this.props.children}}const Qv=j_,Yv=A_,aR=p.forwardRef(({className:r,inset:e,children:t,...s},n)=>o.jsxs(Zg,{ref:n,className:se("flex cursor-default select-none items-center gap-2 rounded-sm px-2 py-1.5 text-sm outline-none focus:bg-accent data-[state=open]:bg-accent [&_svg]:pointer-events-none [&_svg]:size-4 [&_svg]:shrink-0",e&&"pl-8",r),...s,children:[t,o.jsx(l0,{className:"ml-auto"})]}));aR.displayName=Zg.displayName;const lR=p.forwardRef(({className:r,...e},t)=>o.jsx(ex,{ref:t,className:se("z-50 min-w-[8rem] overflow-hidden rounded-md border bg-popover p-1 text-popover-foreground shadow-lg data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2 origin-[--radix-dropdown-menu-content-transform-origin]",r),...e}));lR.displayName=ex.displayName;const Jh=p.forwardRef(({className:r,sideOffset:e=4,...t},s)=>o.jsx(k_,{children:o.jsx(tx,{ref:s,sideOffset:e,className:se("z-50 max-h-[var(--radix-dropdown-menu-content-available-height)] min-w-[8rem] overflow-y-auto overflow-x-hidden rounded-md border bg-popover p-1 text-popover-foreground shadow-md data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2 origin-[--radix-dropdown-menu-content-transform-origin]",r),...t})}));Jh.displayName=tx.displayName;const Hs=p.forwardRef(({className:r,inset:e,...t},s)=>o.jsx(rx,{ref:s,className:se("relative flex cursor-default select-none items-center gap-2 rounded-sm px-2 py-1.5 text-sm outline-none transition-colors focus:bg-accent focus:text-accent-foreground data-[disabled]:pointer-events-none data-[disabled]:opacity-50 [&_svg]:pointer-events-none [&_svg]:size-4 [&_svg]:shrink-0",e&&"pl-8",r),...t}));Hs.displayName=rx.displayName;const cR=p.forwardRef(({className:r,children:e,checked:t,...s},n)=>o.jsxs(sx,{ref:n,className:se("relative flex cursor-default select-none items-center rounded-sm py-1.5 pl-8 pr-2 text-sm outline-none transition-colors focus:bg-accent focus:text-accent-foreground data-[disabled]:pointer-events-none data-[disabled]:opacity-50",r),checked:t,...s,children:[o.jsx("span",{className:"absolute left-2 flex h-3.5 w-3.5 items-center justify-center",children:o.jsx(nx,{children:o.jsx(ho,{className:"h-4 w-4"})})}),e]}));cR.displayName=sx.displayName;const dR=p.forwardRef(({className:r,children:e,...t},s)=>o.jsxs(ox,{ref:s,className:se("relative flex cursor-default select-none items-center rounded-sm py-1.5 pl-8 pr-2 text-sm outline-none transition-colors focus:bg-accent focus:text-accent-foreground data-[disabled]:pointer-events-none data-[disabled]:opacity-50",r),...t,children:[o.jsx("span",{className:"absolute left-2 flex h-3.5 w-3.5 items-center justify-center",children:o.jsx(nx,{children:o.jsx(bT,{className:"h-2 w-2 fill-current"})})}),e]}));dR.displayName=ox.displayName;const uR=p.forwardRef(({className:r,inset:e,...t},s)=>o.jsx(ix,{ref:s,className:se("px-2 py-1.5 text-sm font-semibold",e&&"pl-8",r),...t}));uR.displayName=ix.displayName;const uu=p.forwardRef(({className:r,...e},t)=>o.jsx(ax,{ref:t,className:se("-mx-1 my-1 h-px bg-muted",r),...e}));uu.displayName=ax.displayName;var Xv="AlertDialog",[hR,F6]=fn(Xv,[lx]),$r=lx(),Jv=r=>{const{__scopeAlertDialog:e,...t}=r,s=$r(e);return o.jsx(Jg,{...s,...t,modal:!0})};Jv.displayName=Xv;var fR="AlertDialogTrigger",mR=p.forwardRef((r,e)=>{const{__scopeAlertDialog:t,...s}=r,n=$r(t);return o.jsx(R_,{...n,...s,ref:e})});mR.displayName=fR;var pR="AlertDialogPortal",Zv=r=>{const{__scopeAlertDialog:e,...t}=r,s=$r(e);return o.jsx(Iu,{...s,...t})};Zv.displayName=pR;var gR="AlertDialogOverlay",ew=p.forwardRef((r,e)=>{const{__scopeAlertDialog:t,...s}=r,n=$r(t);return o.jsx(Il,{...n,...s,ref:e})});ew.displayName=gR;var Dn="AlertDialogContent",[xR,yR]=hR(Dn),bR=Xg("AlertDialogContent"),tw=p.forwardRef((r,e)=>{const{__scopeAlertDialog:t,children:s,...n}=r,i=$r(t),a=p.useRef(null),l=$e(e,a),d=p.useRef(null);return o.jsx(P_,{contentName:Dn,titleName:rw,docsSlug:"alert-dialog",children:o.jsx(xR,{scope:t,cancelRef:d,children:o.jsxs(Sl,{role:"alertdialog",...i,...n,ref:l,onOpenAutoFocus:ue(n.onOpenAutoFocus,u=>{var h;u.preventDefault(),(h=d.current)==null||h.focus({preventScroll:!0})}),onPointerDownOutside:u=>u.preventDefault(),onInteractOutside:u=>u.preventDefault(),children:[o.jsx(bR,{children:s}),o.jsx(wR,{contentRef:a})]})})})});tw.displayName=Dn;var rw="AlertDialogTitle",sw=p.forwardRef((r,e)=>{const{__scopeAlertDialog:t,...s}=r,n=$r(t);return o.jsx(Su,{...n,...s,ref:e})});sw.displayName=rw;var nw="AlertDialogDescription",ow=p.forwardRef((r,e)=>{const{__scopeAlertDialog:t,...s}=r,n=$r(t);return o.jsx(ku,{...n,...s,ref:e})});ow.displayName=nw;var vR="AlertDialogAction",iw=p.forwardRef((r,e)=>{const{__scopeAlertDialog:t,...s}=r,n=$r(t);return o.jsx(kl,{...n,...s,ref:e})});iw.displayName=vR;var aw="AlertDialogCancel",lw=p.forwardRef((r,e)=>{const{__scopeAlertDialog:t,...s}=r,{cancelRef:n}=yR(aw,t),i=$r(t),a=$e(e,n);return o.jsx(kl,{...i,...s,ref:a})});lw.displayName=aw;var wR=({contentRef:r})=>{const e=`\`${Dn}\` requires a description for the component to be accessible for screen reader users.

You can add a description to the \`${Dn}\` by passing a \`${nw}\` component as a child, which also benefits sighted users by adding visible context to the dialog.

Alternatively, you can use your own component as a description by assigning it an \`id\` and passing the same value to the \`aria-describedby\` prop in \`${Dn}\`. If the description is confusing or duplicative for sighted users, you can use the \`@radix-ui/react-visually-hidden\` primitive as a wrapper around your description component.

For more information, see https://radix-ui.com/primitives/docs/components/alert-dialog`;return p.useEffect(()=>{var s;document.getElementById((s=r.current)==null?void 0:s.getAttribute("aria-describedby"))||console.warn(e)},[e,r]),null},_R=Jv,TR=Zv,cw=ew,dw=tw,uw=iw,hw=lw,fw=sw,mw=ow;const hu=_R,ER=TR,pw=p.forwardRef(({className:r,...e},t)=>o.jsx(cw,{className:se("fixed inset-0 z-50 bg-black/80 data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0",r),...e,ref:t}));pw.displayName=cw.displayName;const pl=p.forwardRef(({className:r,...e},t)=>o.jsxs(ER,{children:[o.jsx(pw,{}),o.jsx(dw,{ref:t,className:se("fixed left-[50%] top-[50%] z-50 grid w-full max-w-lg translate-x-[-50%] translate-y-[-50%] gap-4 border bg-background p-6 shadow-lg duration-200 data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[state=closed]:slide-out-to-left-1/2 data-[state=closed]:slide-out-to-top-[48%] data-[state=open]:slide-in-from-left-1/2 data-[state=open]:slide-in-from-top-[48%] sm:rounded-lg",r),...e})]}));pl.displayName=dw.displayName;const gl=({className:r,...e})=>o.jsx("div",{className:se("flex flex-col space-y-2 text-center sm:text-left",r),...e});gl.displayName="AlertDialogHeader";const xl=({className:r,...e})=>o.jsx("div",{className:se("flex flex-col-reverse sm:flex-row sm:justify-end sm:space-x-2",r),...e});xl.displayName="AlertDialogFooter";const yl=p.forwardRef(({className:r,...e},t)=>o.jsx(fw,{ref:t,className:se("text-lg font-semibold",r),...e}));yl.displayName=fw.displayName;const bl=p.forwardRef(({className:r,...e},t)=>o.jsx(mw,{ref:t,className:se("text-sm text-muted-foreground",r),...e}));bl.displayName=mw.displayName;const vl=p.forwardRef(({className:r,...e},t)=>o.jsx(uw,{ref:t,className:se(Xh(),r),...e}));vl.displayName=uw.displayName;const wl=p.forwardRef(({className:r,...e},t)=>o.jsx(hw,{ref:t,className:se(Xh({variant:"outline"}),"mt-2 sm:mt-0",r),...e}));wl.displayName=hw.displayName;const he=p.forwardRef(({className:r,...e},t)=>o.jsx("div",{ref:t,className:se("rounded-lg border bg-card text-card-foreground shadow-sm",r),...e}));he.displayName="Card";const it=p.forwardRef(({className:r,...e},t)=>o.jsx("div",{ref:t,className:se("flex flex-col space-y-1.5 p-6",r),...e}));it.displayName="CardHeader";const lt=p.forwardRef(({className:r,...e},t)=>o.jsx("div",{ref:t,className:se("text-2xl font-semibold leading-none tracking-tight",r),...e}));lt.displayName="CardTitle";const $a=p.forwardRef(({className:r,...e},t)=>o.jsx("div",{ref:t,className:se("text-sm text-muted-foreground",r),...e}));$a.displayName="CardDescription";const me=p.forwardRef(({className:r,...e},t)=>o.jsx("div",{ref:t,className:se("p-6 pt-0",r),...e}));me.displayName="CardContent";const NR=p.forwardRef(({className:r,...e},t)=>o.jsx("div",{ref:t,className:se("flex items-center p-6 pt-0",r),...e}));NR.displayName="CardFooter";const CR=Ml("inline-flex items-center rounded-full border px-2.5 py-0.5 text-xs font-semibold transition-colors focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2",{variants:{variant:{default:"border-transparent bg-primary text-primary-foreground hover:bg-primary/80",secondary:"border-transparent bg-secondary text-secondary-foreground hover:bg-secondary/80",destructive:"border-transparent bg-destructive text-destructive-foreground hover:bg-destructive/80",outline:"text-foreground"}},defaultVariants:{variant:"default"}});function Vt({className:r,variant:e,...t}){return o.jsx("div",{className:se(CR({variant:e}),r),...t})}var dc="Popover",[gw,U6]=fn(dc,[lo]),Yi=lo(),[IR,Ms]=gw(dc),xw=r=>{const{__scopePopover:e,children:t,open:s,defaultOpen:n,onOpenChange:i,modal:a=!1}=r,l=Yi(e),d=p.useRef(null),[u,h]=p.useState(!1),[m,x]=Kn({prop:s,defaultProp:n??!1,onChange:i,caller:dc});return o.jsx(Eu,{...l,children:o.jsx(IR,{scope:e,contentId:ji(),triggerRef:d,open:m,onOpenChange:x,onOpenToggle:p.useCallback(()=>x(g=>!g),[x]),hasCustomAnchor:u,onCustomAnchorAdd:p.useCallback(()=>h(!0),[]),onCustomAnchorRemove:p.useCallback(()=>h(!1),[]),modal:a,children:t})})};xw.displayName=dc;var yw="PopoverAnchor",SR=p.forwardRef((r,e)=>{const{__scopePopover:t,...s}=r,n=Ms(yw,t),i=Yi(t),{onCustomAnchorAdd:a,onCustomAnchorRemove:l}=n;return p.useEffect(()=>(a(),()=>l()),[a,l]),o.jsx(Cl,{...i,...s,ref:e})});SR.displayName=yw;var bw="PopoverTrigger",vw=p.forwardRef((r,e)=>{const{__scopePopover:t,...s}=r,n=Ms(bw,t),i=Yi(t),a=$e(e,n.triggerRef),l=o.jsx(Pe.button,{type:"button","aria-haspopup":"dialog","aria-expanded":n.open,"aria-controls":n.contentId,"data-state":Nw(n.open),...s,ref:a,onClick:ue(r.onClick,n.onOpenToggle)});return n.hasCustomAnchor?l:o.jsx(Cl,{asChild:!0,...i,children:l})});vw.displayName=bw;var Zh="PopoverPortal",[kR,jR]=gw(Zh,{forceMount:void 0}),ww=r=>{const{__scopePopover:e,forceMount:t,children:s,container:n}=r,i=Ms(Zh,e);return o.jsx(kR,{scope:e,forceMount:t,children:o.jsx(Ur,{present:t||i.open,children:o.jsx(wu,{asChild:!0,container:n,children:s})})})};ww.displayName=Zh;var io="PopoverContent",_w=p.forwardRef((r,e)=>{const t=jR(io,r.__scopePopover),{forceMount:s=t.forceMount,...n}=r,i=Ms(io,r.__scopePopover);return o.jsx(Ur,{present:s||i.open,children:i.modal?o.jsx(PR,{...n,ref:e}):o.jsx(RR,{...n,ref:e})})});_w.displayName=io;var AR=ux("PopoverContent.RemoveScroll"),PR=p.forwardRef((r,e)=>{const t=Ms(io,r.__scopePopover),s=p.useRef(null),n=$e(e,s),i=p.useRef(!1);return p.useEffect(()=>{const a=s.current;if(a)return cx(a)},[]),o.jsx(dx,{as:AR,allowPinchZoom:!0,children:o.jsx(Tw,{...r,ref:n,trapFocus:t.open,disableOutsidePointerEvents:!0,onCloseAutoFocus:ue(r.onCloseAutoFocus,a=>{var l;a.preventDefault(),i.current||(l=t.triggerRef.current)==null||l.focus()}),onPointerDownOutside:ue(r.onPointerDownOutside,a=>{const l=a.detail.originalEvent,d=l.button===0&&l.ctrlKey===!0,u=l.button===2||d;i.current=u},{checkForDefaultPrevented:!1}),onFocusOutside:ue(r.onFocusOutside,a=>a.preventDefault(),{checkForDefaultPrevented:!1})})})}),RR=p.forwardRef((r,e)=>{const t=Ms(io,r.__scopePopover),s=p.useRef(!1),n=p.useRef(!1);return o.jsx(Tw,{...r,ref:e,trapFocus:!1,disableOutsidePointerEvents:!1,onCloseAutoFocus:i=>{var a,l;(a=r.onCloseAutoFocus)==null||a.call(r,i),i.defaultPrevented||(s.current||(l=t.triggerRef.current)==null||l.focus(),i.preventDefault()),s.current=!1,n.current=!1},onInteractOutside:i=>{var d,u;(d=r.onInteractOutside)==null||d.call(r,i),i.defaultPrevented||(s.current=!0,i.detail.originalEvent.type==="pointerdown"&&(n.current=!0));const a=i.target;((u=t.triggerRef.current)==null?void 0:u.contains(a))&&i.preventDefault(),i.detail.originalEvent.type==="focusin"&&n.current&&i.preventDefault()}})}),Tw=p.forwardRef((r,e)=>{const{__scopePopover:t,trapFocus:s,onOpenAutoFocus:n,onCloseAutoFocus:i,disableOutsidePointerEvents:a,onEscapeKeyDown:l,onPointerDownOutside:d,onFocusOutside:u,onInteractOutside:h,...m}=r,x=Ms(io,t),g=Yi(t);return hx(),o.jsx(fx,{asChild:!0,loop:!0,trapped:s,onMountAutoFocus:n,onUnmountAutoFocus:i,children:o.jsx(_u,{asChild:!0,disableOutsidePointerEvents:a,onInteractOutside:h,onEscapeKeyDown:l,onPointerDownOutside:d,onFocusOutside:u,onDismiss:()=>x.onOpenChange(!1),children:o.jsx(Tu,{"data-state":Nw(x.open),role:"dialog",id:x.contentId,...g,...m,ref:e,style:{...m.style,"--radix-popover-content-transform-origin":"var(--radix-popper-transform-origin)","--radix-popover-content-available-width":"var(--radix-popper-available-width)","--radix-popover-content-available-height":"var(--radix-popper-available-height)","--radix-popover-trigger-width":"var(--radix-popper-anchor-width)","--radix-popover-trigger-height":"var(--radix-popper-anchor-height)"}})})})}),Ew="PopoverClose",MR=p.forwardRef((r,e)=>{const{__scopePopover:t,...s}=r,n=Ms(Ew,t);return o.jsx(Pe.button,{type:"button",...s,ref:e,onClick:ue(r.onClick,()=>n.onOpenChange(!1))})});MR.displayName=Ew;var DR="PopoverArrow",OR=p.forwardRef((r,e)=>{const{__scopePopover:t,...s}=r,n=Yi(t);return o.jsx(Nu,{...n,...s,ref:e})});OR.displayName=DR;function Nw(r){return r?"open":"closed"}var LR=xw,VR=vw,FR=ww,Cw=_w;const UR=LR,$R=VR,Iw=p.forwardRef(({className:r,align:e="center",sideOffset:t=4,...s},n)=>o.jsx(FR,{children:o.jsx(Cw,{ref:n,align:e,sideOffset:t,className:se("z-50 w-72 rounded-md border bg-popover p-4 text-popover-foreground shadow-md outline-none data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2 origin-[--radix-popover-content-transform-origin]",r),...s})}));Iw.displayName=Cw.displayName;const BR={"classic-metal":o.jsx(TT,{className:"w-4 h-4"}),"black-metal":o.jsx(Am,{className:"w-4 h-4"}),"death-metal":o.jsx(Am,{className:"w-4 h-4"}),"power-metal":o.jsx(lr,{className:"w-4 h-4"}),"doom-metal":o.jsx(MT,{className:"w-4 h-4"}),"thrash-metal":o.jsx(p0,{className:"w-4 h-4"}),"gothic-metal":o.jsx(Sn,{className:"w-4 h-4"}),"light-mode":o.jsx(PT,{className:"w-4 h-4"}),"dark-mode":o.jsx(ST,{className:"w-4 h-4"}),"glassmorphism-premium":o.jsx(f0,{className:"w-4 h-4"})};function Sg(){const{currentTheme:r,setTheme:e,getColors:t}=Me(),{user:s}=Rs(),[n,i]=p.useState(!1),[a,l]=p.useState(!1),d=t(),u=(s==null?void 0:s.subscriptionStatus)==="active",h=(g,v)=>{if(v.isPremium&&!u){l(!0);return}e(g),i(!1)},m=()=>{l(!1),i(!1);const g=document.getElementById("subscription-section");g&&g.scrollIntoView({behavior:"smooth",block:"center"})},x=Object.entries(Jr).sort(([g,v],[b,w])=>g===r?-1:b===r?1:v.isPremium&&!w.isPremium?-1:!v.isPremium&&w.isPremium?1:0);return o.jsx("div",{className:"flex items-center gap-2",children:o.jsxs(UR,{open:n,onOpenChange:i,children:[o.jsx($R,{asChild:!0,children:o.jsxs(q,{variant:"ghost",size:"sm",className:"flex items-center gap-2 hover:bg-opacity-20",style:{color:r==="light-mode"?"#000000":d.text,backgroundColor:"transparent"},children:[o.jsx(Cm,{className:"w-4 h-4",style:{color:d.primary}}),o.jsx("span",{className:"hidden sm:inline text-sm font-medium",style:{color:r==="light-mode"?"#3B82F6":d.text},children:Jr[r].name})]})}),o.jsx(Iw,{className:"w-80 p-0 border-0 max-h-[80vh] overflow-hidden",style:{backgroundColor:d.surface,border:`1px solid ${d.border}`},children:o.jsxs(he,{className:"border-0 shadow-xl",style:{backgroundColor:d.surface},children:[o.jsxs(it,{className:"pb-3",children:[o.jsxs(lt,{className:"text-lg font-black flex items-center gap-2",style:{color:d.text},children:[o.jsx(Cm,{className:"w-5 h-5",style:{color:d.primary}}),"Theme Selector"]}),o.jsx("p",{className:"text-sm",style:{color:d.textSecondary},children:"Choose your visual theme"})]}),o.jsx(me,{className:"space-y-2 max-h-[60vh] overflow-y-auto pt-4",children:x.map(([g,v])=>{const b=r===g,w=g==="light-mode",k=v.colors[w?"light":"dark"],T=v.isPremium,_=T&&!u;return o.jsx(q,{onClick:()=>h(g,v),variant:"ghost",className:`w-full justify-start p-3 h-auto hover:bg-opacity-20 ${b?"ring-2":""} ${_?"opacity-75":""}`,style:{backgroundColor:b?d.primary:"transparent",borderColor:b?d.primary:"transparent",color:b?"white":d.text},children:o.jsxs("div",{className:"flex items-start gap-3 w-full",children:[o.jsx("div",{className:"w-8 h-8 rounded-full flex items-center justify-center flex-shrink-0",style:{background:g==="dark-mode"?"linear-gradient(135deg, #0a0a0a 0%, #1a1a1a 100%)":g==="glassmorphism-premium"?"linear-gradient(135deg, #8b0080 0%, #ff0080 25%, #ff6600 50%, #cc9900 75%, #ff0080 100%)":v.gradient,color:"#ffffff"},children:BR[g]}),o.jsxs("div",{className:"flex-1 text-left min-w-0",children:[o.jsxs("div",{className:"flex items-center gap-2 justify-between",children:[o.jsxs("div",{className:"flex items-center gap-2",children:[o.jsx("span",{className:"font-semibold text-sm",style:{color:b?"white":k.primary},children:v.name}),b&&o.jsx(Vt,{variant:"secondary",className:"text-xs px-2 py-0",style:{backgroundColor:"white",color:d.primary},children:"Active"})]}),T&&o.jsx(Mi,{className:"w-4 h-4 flex-shrink-0",style:{color:"#ffd700",fill:"#ffd700",filter:_?"grayscale(100%) opacity(0.5)":"drop-shadow(0 0 1px rgba(255, 215, 0, 0.3))"}})]}),o.jsx("p",{className:"text-xs mt-1 break-words leading-relaxed whitespace-pre-wrap overflow-hidden",style:{color:b?"rgba(255, 255, 255, 0.8)":`${k.primary}80`,wordBreak:"break-word",overflowWrap:"break-word"},children:v.description}),o.jsx("div",{className:"flex gap-1 mt-2",children:g==="glassmorphism-premium"?o.jsxs("div",{className:"flex gap-1",children:[o.jsx("div",{className:"w-3 h-3 rounded-full border",style:{backgroundColor:"#8b0080",borderColor:d.border}}),o.jsx("div",{className:"w-3 h-3 rounded-full border",style:{backgroundColor:"#ff0080",borderColor:d.border}}),o.jsx("div",{className:"w-3 h-3 rounded-full border",style:{backgroundColor:"#ff6600",borderColor:d.border}}),o.jsx("div",{className:"w-3 h-3 rounded-full border",style:{backgroundColor:"#cc9900",borderColor:d.border}})]}):o.jsxs(o.Fragment,{children:[o.jsx("div",{className:"w-3 h-3 rounded-full border",style:{backgroundColor:k.primary,borderColor:d.border}}),o.jsx("div",{className:"w-3 h-3 rounded-full border",style:{backgroundColor:k.secondary,borderColor:d.border}}),o.jsx("div",{className:"w-3 h-3 rounded-full border",style:{backgroundColor:k.accent,borderColor:d.border}})]})})]})]})},g)})}),o.jsx(lc,{open:a,onOpenChange:l,children:o.jsx(cc,{className:"sm:max-w-md border-0",style:{background:"linear-gradient(135deg, #8b0080 0%, #ff0080 25%, #ff6600 50%, #cc9900 75%, #ff0080 100%)",backgroundSize:"400% 400%",animation:"glassmorphGradient 8s ease infinite",backdropFilter:"blur(20px)",border:"1px solid rgba(255, 255, 255, 0.18)"},children:o.jsxs("div",{className:"rounded-lg p-4 max-w-md mx-auto",style:{backgroundColor:"rgba(255, 255, 255, 0.08)",backdropFilter:"blur(20px)",border:"1px solid rgba(255, 255, 255, 0.18)"},children:[o.jsxs(Ki,{className:"text-center space-y-3",children:[o.jsx("div",{className:"flex justify-center",children:o.jsx("div",{className:"w-12 h-12 rounded-full flex items-center justify-center",style:{background:"rgba(255, 255, 255, 0.1)",backdropFilter:"blur(20px)",border:"1px solid rgba(255, 255, 255, 0.2)"},children:o.jsx(f0,{className:"w-6 h-6 text-white"})})}),o.jsx(Qi,{className:"text-xl font-bold text-white leading-tight text-center",children:"Glassmorphism Rock Theme"}),o.jsx(Yh,{className:"text-white/90 text-sm leading-relaxed text-center px-2",children:"Experience the ultimate rock vibe with our premium glassmorphism theme featuring vibrant colors and stunning glass effects."})]}),o.jsxs("div",{className:"mt-4 space-y-4",children:[o.jsxs("div",{className:"text-center",children:[o.jsx("p",{className:"text-white/80 text-xs text-center",children:"This premium theme includes:"}),o.jsxs("ul",{className:"text-white text-xs mt-2 space-y-1 leading-relaxed text-center list-none",children:[o.jsx("li",{children:" Vibrant gradient backgrounds"}),o.jsx("li",{children:" Glass morphism effects"}),o.jsx("li",{children:" Rock-inspired color palette"}),o.jsx("li",{children:" Enhanced visual experience"})]})]}),o.jsxs("div",{className:"flex gap-2 mt-4",children:[o.jsx(q,{onClick:()=>l(!1),variant:"ghost",className:"flex-1 text-white border border-white/30 hover:bg-white/20 font-semibold px-4 py-2 text-sm",style:{backgroundColor:"rgba(255, 255, 255, 0.1)",backdropFilter:"blur(10px)",border:"1px solid rgba(255, 255, 255, 0.3)",borderRadius:"6px"},children:"Cancel"}),o.jsx(q,{onClick:m,className:"flex-1 font-bold px-4 py-2 text-sm text-white",style:{background:"rgba(255, 255, 255, 0.15)",backdropFilter:"blur(15px)",border:"1px solid rgba(255, 255, 255, 0.3)",borderRadius:"6px",boxShadow:"0 4px 20px rgba(255, 255, 255, 0.1)"},children:"Get Premium"})]}),o.jsx("div",{className:"mt-3 pt-3 border-t border-white/20",children:o.jsx(q,{onClick:()=>{e("glassmorphism-premium"),l(!1),i(!1)},className:"w-full font-semibold px-4 py-2 text-xs text-yellow-300",style:{background:"rgba(255, 215, 0, 0.2)",backdropFilter:"blur(15px)",border:"1px solid rgba(255, 215, 0, 0.4)",borderRadius:"6px",boxShadow:"0 4px 20px rgba(255, 215, 0, 0.2)"},children:"Preview Theme (Development Only)"})})]})]})})})]})})]})})}const zR="/assets/GoogleLogoIcon-DXCjZ8Zs.png";function HR({isOpen:r,onClose:e,initialMode:t="login"}){const[s,n]=p.useState(t);p.useEffect(()=>{n(t)},[t]);const[i,a]=p.useState(""),[l,d]=p.useState(""),[u,h]=p.useState(""),[m,x]=p.useState(""),[g,v]=p.useState(""),[b,w]=p.useState(""),[k,T]=p.useState(!1),[_,R]=p.useState(""),{isAuthenticated:D,signInWithGoogle:$}=Rs(),{getColors:S}=Me(),{toast:I}=xr(),E=S(),j=async()=>{try{T(!0),await $(),e()}catch(U){I({title:"Sign In Failed",description:U.message||"Failed to sign in with Google.",variant:"destructive"})}finally{T(!1)}},C=U=>{const X=U.replace(/[^\d]/g,""),xe=(X==null?void 0:X.length)||0;return xe<4?X:xe<7?`(${X.slice(0,3)}) ${X.slice(3)}`:`(${X.slice(0,3)}) ${X.slice(3,6)}-${X.slice(6,10)}`},A=U=>{const X=C(U.target.value);w(X)},P=async U=>{U.preventDefault(),T(!0);try{if(s==="login"){const X=await zv(i,l);if(!X.success)throw new Error(X.error||"Login failed");localStorage.setItem("userID",X.userID),localStorage.setItem("userProfile",JSON.stringify(X.profile)),I({title:"Welcome back!",description:"You've successfully logged in."}),e(),window.location.reload()}else{const X=await Bv({firstName:m,lastName:g,email:i,phoneNumber:b.replace(/[^\d]/g,""),password:l});if(!X.success)throw new Error(X.error||"Registration failed");localStorage.setItem("userID",X.userID),localStorage.setItem("userProfile",JSON.stringify(X.profile)),I({title:"Account created!",description:"Welcome to Spandex Salvation Radio."}),e(),window.location.reload()}W()}catch(X){I({title:s==="login"?"Login failed":"Registration failed",description:X.message||"Please try again.",variant:"destructive"})}finally{T(!1)}},W=()=>{a(""),d(""),h(""),x(""),v(""),w("")},oe=()=>{n(s==="login"?"register":"login"),W()};return o.jsx(lc,{open:r,onOpenChange:e,children:o.jsxs(Iu,{children:[o.jsx(Il,{className:"fixed inset-0 bg-black/80 data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0",style:{zIndex:9999}}),o.jsxs(Sl,{className:"fixed left-[50%] top-[50%] grid w-full max-w-md translate-x-[-50%] translate-y-[-50%] gap-4 p-6 shadow-lg duration-200 data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[state=closed]:slide-out-to-left-1/2 data-[state=closed]:slide-out-to-top-[48%] data-[state=open]:slide-in-from-left-1/2 data-[state=open]:slide-in-from-top-[48%] sm:rounded-lg backdrop-blur-md",style:{backgroundColor:"rgba(0, 0, 0, 0.95)",borderColor:E.primary+"40",border:"1px solid",zIndex:1e4},children:[o.jsxs(kl,{className:"absolute right-4 top-4 rounded-full opacity-70 transition-all duration-200 hover:opacity-100 focus:outline-none disabled:pointer-events-none flex items-center justify-center",style:{color:E.text,backgroundColor:"transparent",border:"none",width:"32px",height:"32px"},onMouseEnter:U=>{U.currentTarget.style.color=E.primary},onMouseLeave:U=>{U.currentTarget.style.color=E.text},children:[o.jsx(Mr,{className:"h-4 w-4"}),o.jsx("span",{className:"sr-only",children:"Close"})]}),o.jsx(Ki,{children:o.jsx(Qi,{className:"flex items-center gap-2",style:{color:E.text},children:s==="login"?o.jsxs(o.Fragment,{children:[o.jsx(h0,{className:"h-5 w-5",style:{color:E.primary}}),"Sign In"]}):o.jsxs(o.Fragment,{children:[o.jsx(m0,{className:"h-5 w-5",style:{color:E.primary}}),"Create Account"]})})}),o.jsxs("form",{onSubmit:P,className:"space-y-4",children:[s==="register"&&o.jsxs(o.Fragment,{children:[o.jsxs("div",{className:"space-y-2",children:[o.jsx(_e,{htmlFor:"username",style:{color:E.text},children:"Username"}),o.jsxs("div",{className:"relative",children:[o.jsx(Qt,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 h-4 w-4 text-gray-400"}),o.jsx(Ae,{id:"username",value:u,onChange:U=>h(U.target.value),className:"pl-10 bg-black/50 focus:ring-0 focus:ring-offset-0 placeholder:text-gray-400 placeholder:opacity-50",style:{color:E.text,borderColor:"#374151"},onFocus:U=>U.currentTarget.style.borderColor=E.primary,onBlur:U=>U.currentTarget.style.borderColor="#374151",placeholder:"Username",required:!0})]})]}),o.jsxs("div",{className:"grid grid-cols-2 gap-3",children:[o.jsxs("div",{className:"space-y-2",children:[o.jsx(_e,{htmlFor:"firstName",style:{color:E.text},children:"First Name"}),o.jsxs("div",{className:"relative",children:[o.jsx(Qt,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 h-4 w-4 text-gray-400"}),o.jsx(Ae,{id:"firstName",value:m,onChange:U=>x(U.target.value),className:"pl-10 bg-black/50 focus:ring-0 focus:ring-offset-0 placeholder:text-gray-400 placeholder:opacity-50",style:{color:E.text,borderColor:"#374151"},onFocus:U=>U.currentTarget.style.borderColor=E.primary,onBlur:U=>U.currentTarget.style.borderColor="#374151",placeholder:"John",required:!0})]})]}),o.jsxs("div",{className:"space-y-2",children:[o.jsx(_e,{htmlFor:"lastName",style:{color:E.text},children:"Last Name"}),o.jsxs("div",{className:"relative",children:[o.jsx(Qt,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 h-4 w-4 text-gray-400"}),o.jsx(Ae,{id:"lastName",value:g,onChange:U=>v(U.target.value),className:"pl-10 bg-black/50 focus:ring-0 focus:ring-offset-0 placeholder:text-gray-400 placeholder:opacity-50",style:{color:E.text,borderColor:"#374151"},onFocus:U=>U.currentTarget.style.borderColor=E.primary,onBlur:U=>U.currentTarget.style.borderColor="#374151",placeholder:"Doe",required:!0})]})]})]}),o.jsxs("div",{className:"space-y-2",children:[o.jsx(_e,{htmlFor:"phoneNumber",style:{color:E.text},children:"Phone Number"}),o.jsxs("div",{className:"relative",children:[o.jsx(Wa,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 h-4 w-4 text-gray-400"}),o.jsx(Ae,{id:"phoneNumber",type:"tel",value:b,onChange:A,className:"pl-10 bg-black/50 focus:ring-0 focus:ring-offset-0 placeholder:text-gray-400 placeholder:opacity-50",style:{color:E.text,borderColor:"#374151"},onFocus:U=>U.currentTarget.style.borderColor=E.primary,onBlur:U=>U.currentTarget.style.borderColor="#374151",placeholder:"+1 (111) 111-1111",required:!0})]})]})]}),o.jsxs("div",{className:"space-y-2",children:[o.jsx(_e,{htmlFor:"email",style:{color:E.text},children:"Email"}),o.jsxs("div",{className:"relative",children:[o.jsx(ui,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 h-4 w-4 text-gray-400"}),o.jsx(Ae,{id:"email",type:"email",value:i,onChange:U=>a(U.target.value),className:"pl-10 bg-black/50 focus:ring-0 focus:ring-offset-0 placeholder:text-gray-400 placeholder:opacity-50",style:{color:E.text,borderColor:"#374151"},onFocus:U=>U.currentTarget.style.borderColor=E.primary,onBlur:U=>U.currentTarget.style.borderColor="#374151",placeholder:"johndoe@email.com",required:!0})]})]}),o.jsxs("div",{className:"space-y-2",children:[o.jsx(_e,{htmlFor:"password",style:{color:E.text},children:"Password"}),o.jsxs("div",{className:"relative",children:[o.jsx(qa,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 h-4 w-4 text-gray-400"}),o.jsx(Ae,{id:"password",type:"password",value:l,onChange:U=>d(U.target.value),className:"pl-10 bg-black/50 focus:ring-0 focus:ring-offset-0 placeholder:text-gray-400 placeholder:opacity-50",style:{color:E.text,borderColor:"#374151"},onFocus:U=>U.currentTarget.style.borderColor=E.primary,onBlur:U=>U.currentTarget.style.borderColor="#374151",placeholder:"Password",autoComplete:s==="login"?"current-password":"new-password",required:!0})]})]}),o.jsx(q,{type:"submit",className:"w-full text-white",style:{backgroundColor:E.primary},onMouseEnter:U=>U.currentTarget.style.backgroundColor=E.secondary,onMouseLeave:U=>U.currentTarget.style.backgroundColor=E.primary,disabled:k,children:k?o.jsxs(o.Fragment,{children:[o.jsx(u0,{className:"mr-2 h-4 w-4 animate-spin"}),s==="login"?"Logging In...":"Creating Account..."]}):s==="login"?"Login":"Create Account"}),o.jsxs("div",{className:"relative",children:[o.jsx("div",{className:"absolute inset-0 flex items-center",children:o.jsx("span",{className:"w-full border-t border-gray-600"})}),o.jsx("div",{className:"relative flex justify-center text-xs uppercase",children:o.jsx("span",{className:"bg-black px-2 text-gray-400",children:"Or continue with"})})]}),o.jsxs(q,{type:"button",variant:"outline",onClick:j,className:"w-full bg-white text-black border-gray-300 hover:bg-gray-50",disabled:k,children:[o.jsx("img",{src:zR,alt:"Google",className:"mr-2 h-4 w-4"}),s==="login"?"Continue with Google":"Sign Up with Google"]}),o.jsx("div",{className:"text-center",children:o.jsx("button",{type:"button",onClick:oe,className:"text-sm transition-colors duration-200",style:{color:E.primary},onMouseEnter:U=>U.currentTarget.style.color=E.secondary,onMouseLeave:U=>U.currentTarget.style.color=E.primary,children:s==="login"?"Don't have an account? Sign up":"Already have an account? Sign in"})})]})]})]})})}const Sw="/assets/MusicLogoIcon@3x-Bi3OpI6R.png";function kw(){var xe;const[r,e]=p.useState(!1),[t,s]=p.useState(!1),[n,i]=p.useState(!1),[a,l]=p.useState("login"),[d,u]=p.useState(!1);p.useEffect(()=>{const V=be=>{var ce;l(((ce=be.detail)==null?void 0:ce.mode)||"login"),i(!0)};return window.addEventListener("openAuthModal",V),()=>window.removeEventListener("openAuthModal",V)},[]);const{colors:h,gradient:m,toggleTheme:x,isDarkMode:g,currentTheme:v}=Me(),{user:b,isAuthenticated:w,isLoading:k}=Rs(),T=()=>{window.location.href="/api/logout"},_=p.useRef(null),R=p.useRef(null),D=p.useRef(null),$=p.useRef(null),S=p.useRef(null),[I,E]=p.useState(0);p.useEffect(()=>{const V=be=>{r&&_.current&&!_.current.contains(be.target)&&D.current&&!D.current.contains(be.target)&&e(!1),t&&R.current&&!R.current.contains(be.target)&&s(!1)};if(r||t)return document.addEventListener("click",V),()=>document.removeEventListener("click",V)},[r,t]),p.useEffect(()=>{const V=()=>{if(S.current){const ce=window.innerWidth,Ue=S.current.offsetWidth||400,ne=ce/2-Ue/2;E(ne)}};V();const be=setTimeout(V,100);return window.addEventListener("resize",V),()=>{clearTimeout(be),window.removeEventListener("resize",V)}},[]);const[j,C]=Ai(),A=(V,be)=>{if(console.log(`Navigation: ${V}, route: ${be}`),e(!1),s(!1),be&&be!==j){C(be),V&&V!==be.replace("/","")&&setTimeout(()=>{const ce=document.getElementById(V);ce&&ce.scrollIntoView({behavior:"smooth",block:"start"})},200);return}if(V){if(j!=="/"){window.location.href=`/#${V}`;return}setTimeout(()=>{const ce=document.getElementById(V);ce&&ce.scrollIntoView({behavior:"smooth",block:"start"})},50)}},P=()=>{j==="/"?window.scrollTo({top:0,behavior:"smooth"}):C("/")},W=()=>{e(!1),s(!1),l("login"),i(!0)},oe=()=>{e(!1),s(!1),l("register"),i(!0)},U=()=>{e(!1),s(!1),T()},X=[{id:1,label:"MUSIC",icon:Yn,action:()=>A("music","/music"),tooltip:"Listen to live radio and music"},{id:2,label:"SCHEDULE",icon:xs,action:()=>A("schedule"),tooltip:"View show schedule and programming"},{id:3,label:"SUPPORT US",icon:Sn,action:()=>A("subscribe"),tooltip:"Support the station with premium subscriptions"},{id:4,label:"SUBMISSIONS",icon:hi,action:()=>A("submissions"),tooltip:"Submit song requests and feedback"},{id:5,label:"CONTACT",icon:Wa,action:()=>A("contact"),tooltip:"Get in touch with the station"},{id:6,label:"LISTEN MAP",icon:Xo,action:()=>A("map"),tooltip:"View live listener map worldwide"},{id:7,label:"FEATURES",icon:Sn,action:()=>A("features"),tooltip:"Explore premium features and subscription tiers"}];return o.jsxs(M0,{children:[o.jsx("nav",{className:"fixed top-0 left-0 right-0 z-50 bg-card/80 backdrop-blur-sm transition-colors duration-300 safe-area-inset-top",children:o.jsxs("div",{className:"w-full relative",children:[o.jsxs("div",{className:"xl:relative flex justify-between items-center h-16",style:{paddingLeft:"15px",paddingRight:"15px"},children:[o.jsxs("div",{className:"flex items-center space-x-4",children:[o.jsx("div",{className:"flex items-center justify-center w-8 h-8 rounded-full cursor-pointer logo-container",style:{background:m,padding:"5px"},onClick:P,onMouseEnter:V=>{const be=V.currentTarget.querySelector("img");be&&!be.classList.contains("logo-spin-easter-egg")&&be.classList.add("logo-spin-easter-egg")},children:o.jsx("img",{src:Sw,alt:"Music Logo",className:"w-full h-full object-contain",onAnimationEnd:V=>{V.currentTarget.classList.remove("logo-spin-easter-egg")}})}),o.jsxs("div",{className:"flex flex-col",id:"brand-text",ref:$,children:[o.jsx("div",{className:"text-sm font-black leading-tight transition-colors duration-300",style:{color:v==="light-mode"?"#1f2937":h.text},children:"SPANDEX SALVATION"}),o.jsx("div",{className:"text-sm font-black leading-tight",style:{color:h.primary},children:"RADIO"})]})]}),o.jsxs("div",{ref:S,className:"hidden xl:flex items-center space-x-4 absolute",style:{left:`${I}px`,top:"50%",transform:"translateY(-50%)",transition:"left 0.3s ease"},children:[X.slice(0,3).map(V=>{const be=V.icon;return o.jsxs(Hc,{children:[o.jsx(qc,{asChild:!0,children:o.jsxs("button",{onClick:V.action,className:"flex items-center space-x-2 text-sm font-semibold transition-all duration-200 px-3 py-2 rounded-md hover:shadow-md",style:{color:h.text},onMouseEnter:ce=>{ce.currentTarget.style.backgroundColor=h.primary+"20",ce.currentTarget.style.color="white"},onMouseLeave:ce=>{ce.currentTarget.style.backgroundColor="transparent",ce.currentTarget.style.color=h.text},children:[o.jsx(be,{size:16,style:{color:h.primary}}),o.jsx("span",{children:V.label})]})}),o.jsx(ja,{side:"bottom",children:V.tooltip})]},V.id)}),o.jsxs("div",{className:"relative",ref:R,children:[o.jsxs(Hc,{children:[o.jsx(qc,{asChild:!0,children:o.jsxs("button",{onClick:()=>s(!t),className:"flex items-center space-x-1 text-sm font-semibold transition-all duration-200 px-3 py-2 rounded-md hover:shadow-md",style:{color:t?"white":h.text,backgroundColor:t?h.primary:"transparent"},onMouseEnter:V=>{t||(V.currentTarget.style.backgroundColor=h.primary+"20",V.currentTarget.style.color="white")},onMouseLeave:V=>{t||(V.currentTarget.style.backgroundColor=t?h.primary:"transparent",V.currentTarget.style.color=t?"white":h.text)},children:[o.jsx(Nm,{size:16,style:{color:t?"white":h.primary,marginLeft:"2px"}}),o.jsx("span",{children:"MORE"}),o.jsx(Qn,{size:14,style:{color:t?"white":h.primary,transform:t?"rotate(180deg)":"rotate(0deg)",transition:"transform 0.2s ease"}})]})}),o.jsx(ja,{side:"bottom",children:"View more navigation options"})]}),t&&o.jsx("div",{className:"absolute left-1/2 transform -translate-x-1/2 mt-2 py-2 rounded-xl shadow-xl border animate-in fade-in-0 slide-in-from-top-2 duration-200 backdrop-blur-md",style:{backgroundColor:g?"rgba(0, 0, 0, 0.95)":"rgba(255, 255, 255, 0.95)",borderColor:h.primary+"40",width:"auto",minWidth:"max-content",zIndex:50},children:X.slice(3).map(V=>{const be=V.icon;return o.jsxs(Hc,{children:[o.jsx(qc,{asChild:!0,children:o.jsxs("button",{onClick:V.action,className:"flex items-center space-x-3 px-4 py-3 text-sm font-semibold transition-all duration-200 whitespace-nowrap hover:rounded-lg w-full",style:{color:h.text},onMouseEnter:ce=>{ce.currentTarget.style.backgroundColor=h.primary+"20",ce.currentTarget.style.color="white"},onMouseLeave:ce=>{ce.currentTarget.style.backgroundColor="transparent",ce.currentTarget.style.color=h.text},children:[o.jsx(be,{size:16,style:{color:h.primary}}),o.jsx("span",{children:V.label})]})}),o.jsx(ja,{side:"left",align:"center",sideOffset:5,children:V.tooltip})]},V.id)})})]})]}),o.jsxs("div",{className:"hidden xl:flex items-center space-x-1 absolute right-4 top-1/2 transform -translate-y-1/2",children:[o.jsx(Sg,{}),w?o.jsx("div",{className:"flex items-center",children:o.jsxs(Qv,{children:[o.jsx(Yv,{asChild:!0,children:o.jsxs("button",{className:"relative flex items-center space-x-2 p-1 rounded-full transition-all duration-200 hover:scale-105",style:{backgroundColor:"transparent"},children:[o.jsxs("div",{className:"relative",children:[o.jsx("div",{className:"w-10 h-10 rounded-full bg-gradient-to-br flex items-center justify-center shadow-lg ring-2 ring-offset-2",style:{background:b!=null&&b.profileImageUrl?`url(${b==null?void 0:b.profileImageUrl}) center/cover`:m,"--ring-color":h.primary,"--ring-offset-color":g?"#000000":"#ffffff"},children:!(b!=null&&b.profileImageUrl)&&o.jsx(Qt,{size:20,className:"text-white"})}),(b==null?void 0:b.activeSubscription)&&o.jsx("div",{className:"absolute -bottom-1 -right-1 w-5 h-5 rounded-full flex items-center justify-center shadow-md",style:{backgroundColor:h.primary,border:`2px solid ${g?"#000000":"#ffffff"}`},children:o.jsx("svg",{width:"12",height:"12",viewBox:"0 0 24 24",fill:"none",className:"text-white",children:o.jsx("path",{d:"M9 12L11 14L15 10M21 12C21 16.9706 16.9706 21 12 21C7.02944 21 3 16.9706 3 12C3 7.02944 7.02944 3 12 3C16.9706 3 21 7.02944 21 12Z",stroke:"currentColor",strokeWidth:"2.5",strokeLinecap:"round",strokeLinejoin:"round"})})})]}),o.jsx(Qn,{size:16,className:"transition-transform duration-200",style:{color:h.text}})]})}),o.jsxs(Jh,{align:"end",className:"w-64 p-2 mt-2 shadow-2xl border-2",style:{backgroundColor:g?"rgba(0, 0, 0, 0.95)":"rgba(255, 255, 255, 0.95)",backdropFilter:"blur(10px)",borderColor:`${h.primary}40`},children:[o.jsxs("div",{className:"px-3 py-2 mb-2",children:[o.jsx("p",{className:"font-black text-sm",style:{color:h.text},children:(b==null?void 0:b.firstName)||((xe=b==null?void 0:b.email)==null?void 0:xe.split("@")[0])||"User"}),o.jsx("p",{className:"text-xs opacity-70",style:{color:h.text},children:b==null?void 0:b.email})]}),o.jsx(uu,{className:"opacity-20"}),o.jsxs(Hs,{onClick:()=>C("/profile?section=profile"),className:"flex items-center space-x-3 p-3 rounded-lg cursor-pointer transition-all duration-200",style:{color:h.text},children:[o.jsx(Qt,{size:18,style:{color:h.primary}}),o.jsx("span",{className:"font-semibold",children:"Profile"})]}),(b==null?void 0:b.activeSubscription)&&o.jsxs(Hs,{onClick:()=>C("/profile?section=subscription"),className:"flex items-center space-x-3 p-3 rounded-lg cursor-pointer transition-all duration-200",style:{color:h.text},children:[o.jsx(di,{size:18,style:{color:h.primary}}),o.jsxs("span",{className:"font-semibold",children:["Subscription",o.jsx("br",{}),"Management"]})]}),o.jsxs(Hs,{onClick:()=>C("/profile?section=submissions"),className:"flex items-center space-x-3 p-3 rounded-lg cursor-pointer transition-all duration-200",style:{color:h.text},children:[o.jsx(jd,{size:18,style:{color:h.primary}}),o.jsxs("span",{className:"font-semibold",children:["Submission",o.jsx("br",{}),"Requests"]})]}),o.jsx(uu,{className:"opacity-20"}),o.jsxs(Hs,{onClick:()=>u(!0),className:"flex items-center space-x-3 p-3 rounded-lg cursor-pointer transition-all duration-200",style:{color:"#EF4444"},children:[o.jsx(Ad,{size:18,className:"text-red-500"}),o.jsx("span",{className:"font-semibold",children:"Logout"})]})]})]})}):o.jsxs("div",{className:"flex items-center space-x-3",children:[o.jsx("button",{onClick:W,className:"px-2 py-1 text-sm font-semibold rounded-md transition-all duration-200 hover:scale-105",style:{color:h.text,border:`1px solid ${h.primary}`,backgroundColor:"transparent",height:"24px",minWidth:"80px"},children:"LOGIN"}),o.jsx("button",{onClick:oe,className:"px-2 py-1 text-sm font-semibold rounded-md transition-all duration-200 hover:scale-105 whitespace-nowrap",style:{backgroundColor:h.primary,color:"white",border:`1px solid ${h.primary}`,height:"24px",minWidth:"80px"},children:"SIGN UP"})]})]}),o.jsxs("div",{className:"xl:hidden flex items-center space-x-3",children:[o.jsx(Sg,{}),o.jsx("button",{ref:_,onClick:()=>e(!r),className:"p-2 rounded-lg transition-colors duration-200 flex items-center justify-center",style:{backgroundColor:r?h.primary:"transparent",color:r?"white":h.primary},children:o.jsx(Nm,{size:24})})]})]}),r&&o.jsx("div",{ref:D,className:"xl:hidden absolute top-full right-4 bg-black/90 backdrop-blur-md border rounded-xl animate-in slide-in-from-top-2 duration-300 shadow-xl",style:{borderColor:h.primary+"40",minWidth:"280px",maxWidth:"320px",zIndex:9999},children:o.jsxs("div",{className:"p-4 space-y-2",children:[o.jsxs("a",{href:"/music",className:"flex items-center space-x-3 px-4 py-3 text-base font-semibold rounded-lg transition-all duration-200 w-full hover:bg-opacity-20 no-underline",style:{color:h.text,backgroundColor:"transparent",display:"flex",textDecoration:"none"},onMouseEnter:V=>{V.currentTarget.style.backgroundColor=h.primary+"20",V.currentTarget.style.color="white"},onMouseLeave:V=>{V.currentTarget.style.backgroundColor="transparent",V.currentTarget.style.color=h.text},children:[o.jsx(Yn,{size:20,style:{color:h.primary}}),o.jsx("span",{children:"MUSIC"})]}),o.jsxs("a",{href:"/#schedule",className:"flex items-center space-x-3 px-4 py-3 text-base font-semibold rounded-lg transition-all duration-200 w-full hover:bg-opacity-20 no-underline",style:{color:h.text,backgroundColor:"transparent",display:"flex",textDecoration:"none"},onMouseEnter:V=>{V.currentTarget.style.backgroundColor=h.primary+"20",V.currentTarget.style.color="white"},onMouseLeave:V=>{V.currentTarget.style.backgroundColor="transparent",V.currentTarget.style.color=h.text},children:[o.jsx(xs,{size:20,style:{color:h.primary}}),o.jsx("span",{children:"SCHEDULE"})]}),o.jsxs("a",{href:"/#subscribe",className:"flex items-center space-x-3 px-4 py-3 text-base font-semibold rounded-lg transition-all duration-200 w-full hover:bg-opacity-20 no-underline",style:{color:h.text,backgroundColor:"transparent",display:"flex",textDecoration:"none"},onMouseEnter:V=>{V.currentTarget.style.backgroundColor=h.primary+"20",V.currentTarget.style.color="white"},onMouseLeave:V=>{V.currentTarget.style.backgroundColor="transparent",V.currentTarget.style.color=h.text},children:[o.jsx(Sn,{size:20,style:{color:h.primary}}),o.jsx("span",{children:"SUPPORT US"})]}),o.jsxs("a",{href:"/#submissions",className:"flex items-center space-x-3 px-4 py-3 text-base font-semibold rounded-lg transition-all duration-200 w-full hover:bg-opacity-20 no-underline",style:{color:h.text,backgroundColor:"transparent",display:"flex",textDecoration:"none"},onMouseEnter:V=>{V.currentTarget.style.backgroundColor=h.primary+"20",V.currentTarget.style.color="white"},onMouseLeave:V=>{V.currentTarget.style.backgroundColor="transparent",V.currentTarget.style.color=h.text},children:[o.jsx(hi,{size:20,style:{color:h.primary}}),o.jsx("span",{children:"SUBMISSIONS"})]}),o.jsxs("a",{href:"/#contact",className:"flex items-center space-x-3 px-4 py-3 text-base font-semibold rounded-lg transition-all duration-200 w-full hover:bg-opacity-20 no-underline",style:{color:h.text,backgroundColor:"transparent",display:"flex",textDecoration:"none"},onMouseEnter:V=>{V.currentTarget.style.backgroundColor=h.primary+"20",V.currentTarget.style.color="white"},onMouseLeave:V=>{V.currentTarget.style.backgroundColor="transparent",V.currentTarget.style.color=h.text},children:[o.jsx(Wa,{size:20,style:{color:h.primary}}),o.jsx("span",{children:"CONTACT"})]}),o.jsxs("a",{href:"/#map",className:"flex items-center space-x-3 px-4 py-3 text-base font-semibold rounded-lg transition-all duration-200 w-full hover:bg-opacity-20 no-underline",style:{color:h.text,backgroundColor:"transparent",display:"flex",textDecoration:"none"},onMouseEnter:V=>{V.currentTarget.style.backgroundColor=h.primary+"20",V.currentTarget.style.color="white"},onMouseLeave:V=>{V.currentTarget.style.backgroundColor="transparent",V.currentTarget.style.color=h.text},children:[o.jsx(Xo,{size:20,style:{color:h.primary}}),o.jsx("span",{children:"LISTEN MAP"})]}),o.jsxs("a",{href:"/#features",className:"flex items-center space-x-3 px-4 py-3 text-base font-semibold rounded-lg transition-all duration-200 w-full hover:bg-opacity-20 no-underline",style:{color:h.text,backgroundColor:"transparent",display:"flex",textDecoration:"none"},onMouseEnter:V=>{V.currentTarget.style.backgroundColor=h.primary+"20",V.currentTarget.style.color="white"},onMouseLeave:V=>{V.currentTarget.style.backgroundColor="transparent",V.currentTarget.style.color=h.text},children:[o.jsx(Sn,{size:20,style:{color:h.primary}}),o.jsx("span",{children:"FEATURES"})]}),o.jsx("div",{className:"border-t my-3",style:{borderColor:h.primary+"40"}}),w?o.jsxs(o.Fragment,{children:[o.jsxs("a",{href:"/profile",className:"flex items-center space-x-3 px-4 py-3 text-base font-semibold rounded-lg transition-all duration-200 w-full no-underline",style:{color:h.text,backgroundColor:h.primary+"20",display:"flex",textDecoration:"none"},onMouseEnter:V=>{V.currentTarget.style.backgroundColor=h.primary+"30",V.currentTarget.style.color="white"},onMouseLeave:V=>{V.currentTarget.style.backgroundColor=h.primary+"20",V.currentTarget.style.color=h.text},children:[o.jsx(Qt,{size:16,style:{color:h.primary}}),o.jsx("span",{children:"PROFILE"})]}),o.jsxs("a",{href:"/api/logout",className:"flex items-center space-x-3 px-4 py-3 text-base font-semibold rounded-lg transition-all duration-200 w-full no-underline",style:{color:h.primary,backgroundColor:"transparent",border:`1px solid ${h.primary}`,display:"flex",textDecoration:"none"},onMouseEnter:V=>{V.currentTarget.style.backgroundColor=h.primary+"20",V.currentTarget.style.color="white"},onMouseLeave:V=>{V.currentTarget.style.backgroundColor="transparent",V.currentTarget.style.color=h.primary},children:[o.jsx(Ad,{size:16,style:{color:h.primary}}),o.jsx("span",{children:"SIGN OUT"})]})]}):o.jsxs(o.Fragment,{children:[o.jsxs("div",{onClick:()=>{setTimeout(()=>{l("login"),i(!0)},100),e(!1)},className:"flex items-center justify-center space-x-3 px-6 py-3 text-sm font-bold rounded-full transition-all duration-300 w-full cursor-pointer shadow-lg",style:{color:"white",background:`linear-gradient(135deg, ${h.primary}, ${h.secondary||h.primary})`,border:"none",transform:"scale(1)"},onMouseEnter:V=>{V.currentTarget.style.transform="scale(1.05)",V.currentTarget.style.boxShadow=`0 8px 25px -8px ${h.primary}60`},onMouseLeave:V=>{V.currentTarget.style.transform="scale(1)",V.currentTarget.style.boxShadow="0 4px 15px -4px rgba(0,0,0,0.2)"},children:[o.jsx(Qt,{size:18,style:{color:"white"}}),o.jsx("span",{children:"LOGIN"})]}),o.jsxs("div",{onClick:()=>{setTimeout(()=>{l("register"),i(!0)},100),e(!1)},className:"flex items-center justify-center space-x-3 px-6 py-3 text-sm font-bold rounded-full transition-all duration-300 w-full cursor-pointer shadow-lg",style:{color:h.primary,background:"rgba(255, 255, 255, 0.1)",border:`2px solid ${h.primary}`,backdropFilter:"blur(10px)",transform:"scale(1)"},onMouseEnter:V=>{V.currentTarget.style.transform="scale(1.05)",V.currentTarget.style.background=`${h.primary}15`,V.currentTarget.style.boxShadow=`0 8px 25px -8px ${h.primary}40`},onMouseLeave:V=>{V.currentTarget.style.transform="scale(1)",V.currentTarget.style.background="rgba(255, 255, 255, 0.1)",V.currentTarget.style.boxShadow="0 4px 15px -4px rgba(0,0,0,0.2)"},children:[o.jsx(m0,{size:18,style:{color:h.primary}}),o.jsx("span",{children:"SIGN UP"})]})]})]})})]})}),o.jsx(hu,{open:d,onOpenChange:u,children:o.jsxs(pl,{className:"max-w-md animate-in fade-in zoom-in duration-300",style:{backgroundColor:g?"rgba(0, 0, 0, 0.95)":"rgba(255, 255, 255, 0.95)",border:`2px solid ${h.primary}40`},children:[o.jsxs(gl,{children:[o.jsx(yl,{className:"text-xl font-black",style:{color:h.text},children:"Confirm Logout"}),o.jsx(bl,{className:"text-base",style:{color:h.text,opacity:.8},children:"Are you sure you want to log out of your account?"})]}),o.jsxs(xl,{className:"flex gap-3",children:[o.jsx(wl,{className:"font-semibold px-6 py-2 rounded-lg transition-all duration-200",style:{backgroundColor:"transparent",color:h.text,border:`1px solid ${h.primary}40`},children:"Cancel"}),o.jsx(vl,{onClick:U,className:"font-semibold px-6 py-2 rounded-lg transition-all duration-200",style:{backgroundColor:"#EF4444",color:"white",border:"1px solid #EF4444"},children:"Logout"})]})]})}),o.jsx(HR,{isOpen:n,onClose:()=>i(!1),initialMode:a})]})}function jw({text:r,className:e="",style:t={},maxWidth:s="100%",isFloating:n=!1,backgroundColor:i="transparent",alignment:a="center"}){const[l,d]=p.useState(!1),[u,h]=p.useState(!1),m=p.useRef(null),x=p.useRef(null);return p.useEffect(()=>{const g=()=>{if(m.current&&x.current){const v=m.current.scrollWidth,b=x.current.clientWidth,w=v>b;h(w),w||d(!1)}};return g(),window.addEventListener("resize",g),()=>window.removeEventListener("resize",g)},[r]),p.useEffect(()=>{if(u){const g=setTimeout(()=>{d(!0)},1e3);return()=>clearTimeout(g)}else d(!1)},[u]),u?o.jsxs("div",{ref:x,className:"relative overflow-hidden whitespace-nowrap",style:{maxWidth:s,backgroundColor:i},children:[o.jsxs("div",{ref:m,className:`${e} whitespace-nowrap`,style:{...t,display:"inline-block",whiteSpace:"nowrap",animation:l&&u?"scrollLeftToRight 8s linear infinite":"none",transform:"translateX(0)"},children:[r,u&&l&&o.jsx("span",{style:{paddingLeft:"50px"},children:r})]}),o.jsx("style",{children:`
        @keyframes scrollLeftToRight {
          0% {
            transform: translateX(0%);
          }
          100% {
            transform: translateX(-100%);
          }
        }
      `})]}):o.jsx("div",{ref:x,className:`flex overflow-hidden ${a==="left"?"justify-start":"justify-center"}`,style:{maxWidth:s,backgroundColor:i},children:o.jsx("div",{ref:m,className:e,style:t,children:r})})}function qR({size:r="md",className:e=""}){const{getColors:t,getGradient:s}=Me(),n=t(),i=s(),a={sm:"w-12 h-12",md:"w-16 h-16",lg:"w-24 h-24"},l={sm:"w-6 h-6",md:"w-8 h-8",lg:"w-12 h-12"};return o.jsx("div",{className:`${a[r]} rounded-xl flex items-center justify-center shadow-lg ${e}`,style:{background:i,border:`2px solid ${n.primary}`},children:o.jsx(Yn,{className:`${l[r]} text-white`})})}function Aw({artwork:r,title:e,artist:t,isPlaying:s=!1,size:n="md",className:i="",isAd:a=!1}){const{getGradient:l,currentTheme:d}=Me(),[u,h]=p.useState(!1),[m,x]=p.useState(!1),[g,v]=p.useState(l()),[b,w]=p.useState(!1),k={sm:"w-10 h-10 sm:w-12 sm:h-12",md:"w-24 h-24 sm:w-32 sm:h-32",lg:"w-32 h-32 sm:w-48 sm:h-48"},T={sm:"sm",md:"md",lg:"lg"};p.useEffect(()=>{const D=l();if(D!==g&&!r){w(!0);const $=setTimeout(()=>{v(D),w(!1)},300);return()=>clearTimeout($)}},[d,l,g,r]),p.useEffect(()=>{if(b){const D=setTimeout(()=>{w(!1)},300);return()=>clearTimeout(D)}},[b]);const _=()=>{x(!0)},R=()=>{x(!1),console.warn(`Failed to load artwork for "${e}" by ${t}. Falling back to themed music logo.`)};return o.jsxs("div",{className:`relative ${k[n]} rounded-xl overflow-hidden shadow-lg cursor-pointer transition-all duration-300 ${i}`,onMouseEnter:()=>h(!0),onMouseLeave:()=>h(!1),style:{transform:u?"scale(1.05)":"scale(1)",boxShadow:u?`0 20px 40px -12px ${l()}40`:"0 4px 8px rgba(0,0,0,0.2)"},children:[o.jsx("div",{className:"absolute inset-0 flex items-center justify-center transition-all duration-500",style:{background:a?"linear-gradient(45deg, #ff4444, #cc0000)":l(),opacity:!r||r===""||!m||r==="advertisement"?1:0,transform:u?"scale(1.1)":"scale(1)"},children:a?o.jsxs("div",{className:"text-center text-white",children:[o.jsx("div",{className:"text-2xl mb-1",children:""}),o.jsx("div",{className:"text-xs font-bold",children:"AD"}),o.jsx("div",{className:"text-xs opacity-80",children:"ADVERTISEMENT"})]}):o.jsx(qR,{size:T[n]})}),r&&r.trim()&&r!=="advertisement"&&o.jsxs("div",{className:"absolute inset-0 transition-all duration-500",style:{opacity:m?1:0,transform:u?"scale(1.05)":"scale(1)"},children:[o.jsx("img",{src:r,alt:`${e} by ${t}`,className:"w-full h-full object-cover",onLoad:_,onError:R,referrerPolicy:"no-referrer",crossOrigin:"anonymous"}),o.jsx("div",{className:"absolute inset-0 transition-opacity duration-300",style:{background:`linear-gradient(45deg, ${l()}20, transparent)`,opacity:u?1:0}}),u&&o.jsx("div",{className:"absolute inset-0 transition-opacity duration-300",style:{background:"linear-gradient(135deg, rgba(255,255,255,0.1) 0%, transparent 50%)",opacity:.6}})]}),o.jsx("div",{className:"absolute inset-0 rounded-xl transition-all duration-300 pointer-events-none",style:{border:u?`2px solid ${l()}80`:"2px solid transparent",boxShadow:u?`inset 0 0 10px ${l()}20`:"none"}}),r&&!m&&o.jsx("div",{className:"absolute inset-0 bg-gradient-to-r from-transparent via-white/10 to-transparent animate-pulse"})]})}const Uo=[{id:"hot-97",stationId:"hot-97",name:"Hot 97",frequency:"97.1 FM",location:"New York, NY",genre:"Hip Hop & R&B",streamUrl:"https://playerservices.streamtheworld.com/api/livestream-redirect/WQHTFMAAC.aac",description:"New York's #1 Hip Hop & R&B",icon:""},{id:"power-106",stationId:"power-106",name:"Power 106",frequency:"105.9 FM",location:"Los Angeles, CA",genre:"Hip Hop & R&B",streamUrl:"https://playerservices.streamtheworld.com/api/livestream-redirect/KPWRFMAAC.aac",description:"LA's #1 Hip Hop & R&B",icon:""},{id:"beat-955",stationId:"beat-955",name:"95.5 The Beat",frequency:"95.5 FM",location:"Dallas, TX",genre:"Hip Hop & R&B",streamUrl:"https://playerservices.streamtheworld.com/api/livestream-redirect/KBFBFMAAC.aac",description:"Dallas' #1 Hip Hop & R&B",icon:""},{id:"somafm-metal",stationId:"somafm-metal",name:"SomaFM Metal",frequency:"Online",location:"San Francisco, CA",genre:"Metal",streamUrl:"https://ice1.somafm.com/metal-128-mp3",description:"Heavy Metal & Hard Rock",icon:""}];function Pw(){const{currentTrack:r,isPlaying:e,isLoading:t,error:s,togglePlayback:n,volume:i,setVolume:a,isMuted:l,toggleMute:d,changeStation:u,currentStation:h,isAdPlaying:m,adInfo:x}=Ga(),{getColors:g,getGradient:v,currentTheme:b}=Me(),w=g(),[k,T]=p.useState(!1),[_,R]=p.useState(Uo[0]),[D,$]=p.useState(!1);p.useEffect(()=>{const U=Uo[0];U&&!_&&R(U)},[]);const[S,I]=p.useState(!1),E=p.useRef(null),j=p.useRef(null),C=p.useRef(null),A=p.useRef(null);p.useEffect(()=>{const U=X=>{C.current&&!C.current.contains(X.target)&&T(!1)};if(k)return document.addEventListener("mousedown",U),()=>document.removeEventListener("mousedown",U)},[k]);const P=()=>{A.current&&(clearTimeout(A.current),A.current=null),$(!0)},W=()=>{A.current=setTimeout(()=>{$(!1)},150)};p.useEffect(()=>()=>{A.current&&clearTimeout(A.current)},[]);const oe=async U=>{if(U.id!==_.id){console.log(`Attempting to change station to: ${U.name} (${U.streamUrl})`),I(!0),R(U),T(!1);try{await u(U),await n()}catch(X){console.error("Failed to switch station:",X)}setTimeout(()=>I(!1),500)}};return o.jsxs("section",{className:"bg-card/50 backdrop-blur-sm rounded-2xl p-6 shadow-lg",role:"region","aria-label":"Radio player controls",children:[o.jsx("audio",{ref:Ga().audioRef,preload:"none",crossOrigin:"anonymous","aria-label":"Live radio stream"}),o.jsx("div",{className:"mb-6",children:o.jsxs("div",{className:"relative",ref:C,children:[o.jsxs(q,{variant:"outline",size:"sm",onClick:()=>T(!k),className:"bg-card/90 backdrop-blur-sm hover:bg-card/95 transition-all duration-200 text-xs px-3 py-1",style:{borderColor:w.primary,borderWidth:"2px",borderRadius:"12px",width:"auto"},children:[o.jsx(Uu,{className:"w-3 h-3 mr-1",style:{color:w.primary}}),o.jsx("span",{style:{color:w.primary},children:(_==null?void 0:_.name)||"95.5 The Beat"}),o.jsx(Qn,{className:`w-3 h-3 ml-1 transition-transform duration-300 ease-in-out transform ${k?"rotate-180":"rotate-0"}`,style:{opacity:.6,color:w.primary}})]}),k&&o.jsx("div",{className:"absolute mt-1 left-1/2 transform -translate-x-1/2 max-h-60 overflow-y-auto bg-black/90 backdrop-blur-lg border shadow-xl z-20 scrollbar-thin",style:{borderColor:w.primary+"40",borderRadius:"12px",minWidth:"300px"},children:o.jsxs("div",{className:"p-2",children:[_&&o.jsx("button",{onClick:()=>oe(_),className:"w-full p-3 text-left rounded-md transition-all duration-300 hover:bg-muted/20 focus:outline-none",style:{background:`linear-gradient(135deg, ${w.primary}40, ${w.secondary}25)`,border:`1px solid ${w.primary}80`,boxShadow:`0 2px 8px ${w.primary}20`},children:o.jsxs("div",{className:"flex items-center gap-3",children:[o.jsx("div",{className:"flex items-center justify-center w-10 h-10 rounded-full",children:o.jsx("span",{className:"text-lg",children:_.icon})}),o.jsxs("div",{className:"flex-1 min-w-0 flex items-center",children:[o.jsxs("div",{className:"flex-1",children:[o.jsx("div",{className:"font-semibold text-sm text-white truncate",children:_.name}),o.jsxs("div",{className:"text-xs text-gray-300 truncate",children:[_.frequency," "," ",_.location]}),o.jsx("div",{className:"text-xs text-gray-400 truncate",children:_.description})]}),e&&o.jsx("div",{className:"flex items-center justify-center w-9 h-9",children:o.jsx("div",{className:"flex items-center justify-center h-full",children:o.jsxs("svg",{className:"w-6 h-6",fill:"none",xmlns:"http://www.w3.org/2000/svg",children:[o.jsx("path",{d:"M11 5L6 9H2V15H6L11 19V5Z",fill:w.primary}),o.jsx("path",{d:"M14 9.5C15.1 10.6 15.1 12.4 14 13.5",stroke:w.primary,strokeWidth:"1.5",className:"animate-pulse",style:{animation:"pulse 1.5s ease-in-out infinite"}}),o.jsx("path",{d:"M16 7.5C18.2 9.7 18.2 13.3 16 15.5",stroke:w.primary,strokeWidth:"1.5",className:"animate-pulse",style:{animation:"pulse 1.5s ease-in-out infinite",animationDelay:"0.3s"}}),o.jsx("path",{d:"M18 5.5C21.3 8.8 21.3 14.2 18 17.5",stroke:w.primary,strokeWidth:"1.5",className:"animate-pulse",style:{animation:"pulse 1.5s ease-in-out infinite",animationDelay:"0.6s"}})]})})})]})]})},_.id+"-selected"),Uo==null?void 0:Uo.filter(U=>U.id!==(_==null?void 0:_.id)).map(U=>o.jsx("button",{onClick:()=>oe(U),className:"w-full p-3 text-left rounded-md transition-all duration-300 hover:bg-muted/20 focus:outline-none",style:{backgroundColor:"transparent"},children:o.jsxs("div",{className:"flex items-center gap-3",children:[o.jsx("div",{className:"flex items-center justify-center w-10 h-10 rounded-full",style:{background:`linear-gradient(135deg, ${w.primary}40, ${w.secondary}20)`,backdropFilter:"blur(10px)"},children:o.jsx("span",{className:"text-lg",children:U.icon})}),o.jsxs("div",{className:"flex-1 min-w-0",children:[o.jsx("div",{className:"font-semibold text-sm text-white truncate",children:U.name}),o.jsxs("div",{className:"text-xs text-gray-300 truncate",children:[U.frequency,"  ",U.location]}),o.jsx("div",{className:"text-xs text-gray-400 truncate",children:U.description})]})]})},U.id))]})})]})}),o.jsxs("div",{className:"flex justify-center mb-6 relative",children:[o.jsx("div",{className:`transition-all duration-1000 transform ${S?"opacity-0 scale-75 rotate-12 blur-md":"opacity-100 scale-100 rotate-0 blur-0"}`,style:{transformOrigin:"center",filter:S?"blur(4px) saturate(0.3)":m?"blur(0px) saturate(1.2) hue-rotate(0deg)":"blur(0px) saturate(1)",animation:S?"none":m?"adPulse 2s ease-in-out infinite":"albumReveal 1.2s cubic-bezier(0.25, 0.46, 0.45, 0.94)"},children:o.jsx(Aw,{artwork:m&&x.artwork?x.artwork:r.artwork,title:r.title,artist:r.artist,size:"lg",isAd:m})}),o.jsx("div",{className:"absolute top-0 left-1/2 transform -translate-x-1/2 -translate-y-1/2",children:o.jsxs("div",{className:`flex items-center gap-1 px-2 py-0.5 rounded-full text-xs font-bold ${m?"bg-red-600 text-white":"bg-red-500 text-white"}`,children:[o.jsx("div",{className:"w-1 h-1 bg-white rounded-full animate-pulse opacity-90"}),o.jsx("span",{className:"opacity-90",children:m?"AD":"LIVE"})]})})]}),o.jsx("div",{className:"text-center mb-6",children:o.jsxs("div",{className:"text-center transition-all duration-1000",style:{opacity:S?.3:1,transform:S?"scale(0.95)":"scale(1)",filter:S?"blur(2px)":"blur(0px)",animation:S?"none":"slideInFromBottom 0.8s cubic-bezier(0.68, -0.55, 0.265, 1.55)"},children:[m&&o.jsx("div",{className:"mb-3 flex justify-center",children:o.jsxs("div",{className:"inline-flex items-center px-3 py-1 rounded-full text-xs font-bold text-white animate-pulse",style:{background:"linear-gradient(45deg, #ff4444, #cc0000)",boxShadow:"0 2px 8px #ff444460"},children:[o.jsx("span",{className:"mr-1",children:""}),"ADVERTISEMENT",x.company&&o.jsxs("span",{className:"ml-1 opacity-80",children:[" ",x.company]})]})}),r.lastUpdated&&o.jsx("div",{className:"mb-2 flex justify-center",children:o.jsxs("div",{className:"inline-flex items-center px-2 py-1 rounded-full text-xs font-medium text-green-400 bg-green-400/10 border border-green-400/20",children:[o.jsx("div",{className:"w-2 h-2 bg-green-400 rounded-full mr-1 animate-pulse"}),"LIVE"]})}),o.jsx("div",{className:"flex justify-center mb-2 w-full overflow-hidden",children:o.jsx("div",{className:`w-full max-w-full ${S?"song-change-shimmer":""}`,children:o.jsx(jw,{text:r.title,className:`font-black whitespace-nowrap ${m?"text-red-400":"text-foreground"}`,style:{fontSize:"32px",lineHeight:"1"},maxWidth:"100%",backgroundColor:"hsl(var(--background))"})})}),r.artist&&r.artist!==r.title&&r.artist!=="Live Stream"&&r.artist!==((_==null?void 0:_.name)||"95.5 The Beat")&&o.jsx("p",{className:`font-black text-2xl mb-1 transition-opacity duration-500 ${m?"text-red-300":"text-foreground"}`,children:r.artist}),r.album&&r.album!=="New York's Hip Hop & R&B"&&r.album!=="Live Stream"&&r.album!==r.title&&r.album!==r.artist&&r.album!==((_==null?void 0:_.name)||"95.5 The Beat")&&o.jsx("p",{className:`text-sm font-medium mb-2 transition-opacity duration-500 ${m?"text-red-200":"text-muted-foreground"}`,children:r.album}),r.stationName&&o.jsxs("p",{className:"text-muted-foreground text-sm font-medium mb-1 transition-opacity duration-500",children:[r.stationName,"  ",r.frequency]}),r.genre&&o.jsx("p",{className:"text-muted-foreground text-xs font-medium transition-opacity duration-500",children:r.genre}),m&&x.reason&&o.jsx("p",{className:"text-red-300 text-xs font-medium mt-2 transition-opacity duration-500",children:x.reason})]})}),o.jsxs("div",{className:"flex flex-col items-center justify-center space-y-4 relative",children:[o.jsx("div",{className:"flex items-center justify-center w-full",children:o.jsx(q,{onClick:n,disabled:t,className:"font-bold py-6 px-10 rounded-full transition-all duration-300 shadow-2xl hover:shadow-3xl transform hover:scale-110 disabled:opacity-50 disabled:transform-none text-xl flex items-center justify-center mx-auto relative",style:{background:`linear-gradient(45deg, ${w.primary}, ${w.secondary})`,color:"white",boxShadow:`0 10px 40px ${w.primary}60`,position:"relative",zIndex:1},children:t?o.jsxs(o.Fragment,{children:[o.jsx("div",{className:"animate-spin rounded-full h-6 w-6 border-2 border-white border-t-transparent mr-3"}),o.jsx("span",{className:"font-semibold text-lg",children:"CONNECTING..."})]}):e?o.jsx("svg",{className:"h-16 w-16",fill:"currentColor",viewBox:"0 0 24 24",children:o.jsx("rect",{x:"4",y:"4",width:"16",height:"16",rx:"4",strokeLinejoin:"round",strokeLinecap:"round"})}):o.jsx("svg",{className:"h-15 w-15",fill:"currentColor",viewBox:"0 0 24 24",style:{animation:"pulse 2s ease-in-out infinite"},children:o.jsx("path",{d:"M8 5c0-.6.4-1 1-1 .2 0 .5.1.7.3l9 7c.8.6.8 1.8 0 2.4l-9 7c-.2.2-.5.3-.7.3-.6 0-1-.4-1-1V5z"})})})}),e&&o.jsx("div",{className:"relative transition-all duration-500 ease-in-out transform opacity-100 translate-y-0 scale-100",ref:E,onMouseEnter:P,onMouseLeave:W,children:o.jsxs("div",{className:"relative flex items-center justify-center pb-16",children:[o.jsx(q,{onClick:d,variant:"ghost",size:"sm",className:"rounded-full flex items-center justify-center transition-all duration-300 hover:scale-105",style:{color:l?"#ef4444":b==="light-mode"?"#1f2937":"#ffffff",background:l||i===0?`${w.primary}40`:b==="light-mode"?"rgba(0, 0, 0, 0.05)":"rgba(255, 255, 255, 0.05)",backdropFilter:"blur(20px)",padding:"5px",width:"auto",height:"auto"},onMouseEnter:U=>{U.currentTarget.style.backgroundColor=b==="light-mode"?"rgba(0, 0, 0, 0.1)":"rgba(255, 255, 255, 0.1)"},onMouseLeave:U=>{U.currentTarget.style.backgroundColor=l||i===0?`${w.primary}40`:b==="light-mode"?"rgba(0, 0, 0, 0.05)":"rgba(255, 255, 255, 0.05)"},"aria-label":l?"Unmute":"Mute",children:l||i===0?o.jsx("div",{className:"transition-all duration-300 ease-in-out",children:o.jsx(VT,{className:"w-10 h-10"})}):o.jsx("div",{className:"relative flex items-center justify-center transition-all duration-300 ease-in-out",children:o.jsxs("svg",{width:"48",height:"48",viewBox:"0 0 24 24",fill:"none",className:"relative",children:[o.jsx("path",{d:"M11 5L6 9H2v6h4l5 4V5z",fill:"currentColor",strokeLinejoin:"round",strokeLinecap:"round"}),o.jsx("path",{d:"M15.54 8.46a5 5 0 0 1 0 7.07",stroke:"currentColor",strokeWidth:"1.5",strokeLinecap:"round",className:"animate-pulse",style:{animation:"pulse 1.5s ease-in-out infinite",animationDelay:"0s"}}),o.jsx("path",{d:"M19.07 4.93a10 10 0 0 1 0 14.14",stroke:"currentColor",strokeWidth:"1.5",strokeLinecap:"round",className:"animate-pulse",style:{animation:"pulse 1.5s ease-in-out infinite",animationDelay:"0.3s"}})]})})}),o.jsx("div",{ref:j,className:`absolute top-full left-1/2 -translate-x-1/2 mt-2 z-50 ${D?"pointer-events-auto":"pointer-events-none"}`,style:{transformOrigin:"top center",transition:"all 0.4s cubic-bezier(0.68, -0.55, 0.265, 1.55)",transform:D?"translateX(-50%) translateY(0px) scale(1) rotateX(0deg)":"translateX(-50%) translateY(-20px) scale(0.3) rotateX(-90deg)",opacity:D?1:0,filter:D?"blur(0px)":"blur(2px)",perspective:"200px"},children:o.jsxs("div",{className:"flex items-center space-x-2",children:[o.jsxs("div",{className:"w-32 h-2 rounded-full relative",style:{backgroundColor:b==="light-mode"?"#d1d5db":"#374151"},children:[o.jsx("div",{className:"h-2 rounded-full transition-all duration-150",style:{width:`${(l?0:i)*100}%`,background:`linear-gradient(45deg, ${w.primary}, ${w.secondary})`}}),o.jsx("input",{type:"range",min:"0",max:"100",value:(l?0:i)*100,onChange:U=>{const X=parseInt(U.target.value)/100;a(X),l&&X>0&&d()},className:"absolute inset-0 w-full h-full opacity-0 cursor-pointer","aria-label":"Volume control",title:"Adjust volume"})]}),o.jsxs("span",{className:"text-xs font-medium min-w-[30px] text-center",style:{color:b==="light-mode"?"#6b7280":"#9ca3af"},children:[Math.round((l?0:i)*100),"%"]})]})})]})})]}),s&&o.jsx("div",{className:"mt-4 text-center text-red-400 text-sm font-medium",children:s})]})}function WR(){const{isDarkMode:r,getColors:e,currentTheme:t}=Me(),s=e(),[n,i]=p.useState({days:0,hours:0,minutes:0,seconds:0});return p.useEffect(()=>{const a=new Date("2025-07-31T12:00:00").getTime(),l=()=>{const u=new Date().getTime(),h=a-u;h>0&&i({days:Math.floor(h/(1e3*60*60*24)),hours:Math.floor(h%(1e3*60*60*24)/(1e3*60*60)),minutes:Math.floor(h%(1e3*60*60)/(1e3*60)),seconds:Math.floor(h%(1e3*60)/1e3)})};l();const d=setInterval(l,1e3);return()=>clearInterval(d)},[]),o.jsxs("section",{id:"home",className:"relative min-h-screen flex items-center justify-center overflow-hidden pt-20",children:[o.jsxs("div",{className:"absolute inset-0 -top-16",children:[o.jsx("div",{className:"absolute inset-0 bg-cover bg-center opacity-25 dark:opacity-20 light:opacity-35",style:{backgroundImage:"url('https://images.unsplash.com/photo-1493225457124-a3eb161ffa5f?ixlib=rb-4.0.3&auto=format&fit=crop&w=1920&h=1080')"}}),o.jsx("div",{className:"absolute inset-0 transition-all duration-300",style:{background:`linear-gradient(to right, 
              ${s.background}80 0%, 
              transparent 20%, 
              transparent 80%, 
              ${s.background}80 100%
            )`}}),o.jsx("div",{className:"absolute inset-0 transition-all duration-300",style:{background:`linear-gradient(to bottom, 
              transparent 0%, 
              transparent 30%, 
              ${s.background}20 50%, 
              ${s.background}60 70%, 
              ${s.background}90 85%, 
              ${s.background} 100%
            )`}})]}),o.jsxs("div",{className:"relative z-10 text-center max-w-4xl mx-auto px-4 pt-12",children:[o.jsxs("h1",{className:"font-orbitron font-black text-5xl md:text-8xl mb-8",style:{color:t==="light-mode"?s.text:"#ffffff"},children:[o.jsx("div",{children:"SPANDEX"}),o.jsx("div",{children:"SALVATION"}),o.jsx("div",{children:"RADIO"})]}),o.jsxs("p",{className:"text-lg md:text-xl font-orbitron font-semibold mb-6 max-w-2xl mx-auto text-center",style:{color:s.textMuted},children:["Bringing you the best of old-school metal with legendary",o.jsx("br",{}),"bands like Skid Row, Twisted Sister, and more.",o.jsx("br",{}),"Join the hairspray rebellion!"]}),o.jsxs("div",{className:"mb-8 flex flex-col justify-center items-center",children:[o.jsx("p",{className:"font-orbitron font-black text-xl md:text-2xl mb-1",style:{color:s.primary},children:"Old School Metal"}),o.jsx("p",{className:"font-orbitron font-black text-base md:text-lg",style:{color:s.primary},children:"24/7 Live Stream"})]}),o.jsxs("div",{className:"mb-8",role:"timer","aria-label":"Live broadcast countdown",children:[o.jsxs("div",{className:"flex flex-col items-center mb-3",children:[o.jsxs("div",{className:"relative mb-3","aria-hidden":"true",children:[o.jsx("div",{className:"w-4 h-4 bg-gradient-to-r from-red-500 to-orange-500 rounded-full animate-pulse shadow-lg"}),o.jsx("div",{className:"absolute inset-0 w-4 h-4 bg-gradient-to-r from-red-500 to-orange-500 rounded-full animate-ping opacity-75"})]}),o.jsx("div",{className:"text-center",children:o.jsx("span",{className:"text-transparent bg-gradient-to-r from-red-500 to-orange-500 bg-clip-text text-xl font-black tracking-wider",children:"LIVE IN"})})]}),o.jsxs("div",{className:"flex justify-center space-x-4 text-center mb-3",children:[o.jsxs("div",{className:"bg-card/40 backdrop-blur-sm p-4 min-w-[90px] rounded-xl transition-colors duration-300 flex flex-col items-center",children:[o.jsx("div",{className:"text-3xl font-bold text-red-500 mb-1 animate-pulse",children:n.days}),o.jsx("div",{className:"text-xs opacity-65 font-semibold",style:{color:t==="light-mode"?"#6b7280":"#9ca3af"},children:"DAYS"})]}),o.jsxs("div",{className:"bg-card/40 backdrop-blur-sm p-4 min-w-[90px] rounded-xl transition-colors duration-300 flex flex-col items-center",children:[o.jsx("div",{className:"text-3xl font-bold text-red-500 mb-1 animate-pulse",children:n.hours}),o.jsx("div",{className:"text-xs opacity-65 font-semibold",style:{color:t==="light-mode"?"#6b7280":"#9ca3af"},children:"HOURS"})]}),o.jsxs("div",{className:"bg-card/40 backdrop-blur-sm p-4 min-w-[90px] rounded-xl transition-colors duration-300 flex flex-col items-center",children:[o.jsx("div",{className:"text-3xl font-bold text-red-500 mb-1 animate-pulse",children:n.minutes}),o.jsx("div",{className:"text-xs opacity-65 font-semibold",style:{color:t==="light-mode"?"#6b7280":"#9ca3af"},children:"MINS"})]}),o.jsxs("div",{className:"bg-card/40 backdrop-blur-sm p-4 min-w-[90px] rounded-xl transition-colors duration-300 flex flex-col items-center",children:[o.jsx("div",{className:"text-3xl font-bold text-red-500 mb-1 animate-pulse",children:n.seconds}),o.jsx("div",{className:"text-xs opacity-65 font-semibold",style:{color:t==="light-mode"?"#6b7280":"#9ca3af"},children:"SECS"})]})]}),o.jsx("div",{className:"text-center mt-3",children:o.jsx("p",{className:"text-sm font-semibold opacity-80",style:{color:s.textMuted},children:"First Broadcast Countdown"})})]}),o.jsx("div",{className:"flex flex-col items-center justify-center space-y-6 mb-12 mt-8",children:o.jsx(Pw,{})})]}),o.jsx("div",{className:"absolute bottom-0 left-0 right-0 h-32 bg-gradient-to-t from-background via-background/50 to-transparent transition-colors duration-300"})]})}function Rw(r,e={}){const[t,s]=p.useState(!1);return p.useEffect(()=>{const n=r.current;if(!n)return;const i=new IntersectionObserver(([a])=>{s(a.isIntersecting)},{threshold:e.threshold||.1,rootMargin:e.rootMargin||"0px",root:e.root||null});return i.observe(n),()=>{i.unobserve(n)}},[r,e.threshold,e.rootMargin,e.root]),t}function Mw(){const[r,e]=p.useState(0),[t,s]=p.useState("none"),[n,i]=p.useState(!1),a=p.useRef(0),l=p.useRef(0),d=p.useRef();return p.useEffect(()=>{const u=()=>{const h=window.scrollY,m=Date.now(),x=m-l.current,g=h-a.current;if(x>0){const v=Math.abs(g)/x;e(v),g>0?s("down"):g<0?s("up"):s("none"),i(!0),d.current&&clearTimeout(d.current),d.current=setTimeout(()=>{i(!1),e(0),s("none")},150)}a.current=h,l.current=m};return a.current=window.scrollY,l.current=Date.now(),window.addEventListener("scroll",u,{passive:!0}),()=>{window.removeEventListener("scroll",u),d.current&&clearTimeout(d.current)}},[]),{velocity:r,direction:t,isScrolling:n}}function fu(r,e,t=150,s){let a=r;if(e>1.5){const l=Math.min(e/1.5,2);a=r*(.5+.5/l)}else e>.3,a=r;return a=Math.max(a,t),s&&(a=Math.min(a,s)),Math.round(a)}const dd=new Set;let kg=0;function Dw({children:r,staggerDelay:e=50,className:t="",direction:s="up",threshold:n=.05}){const i=p.useRef(null),[a,l]=p.useState(!1),[d,u]=p.useState(300),[h,m]=p.useState(e),[x]=p.useState(()=>`stagger-${++kg}`),g=Rw(i,{threshold:n,rootMargin:"200px 0px -50px 0px"}),{velocity:v}=Mw();p.useEffect(()=>{if(g&&!a&&!dd.has(x)){const k=fu(300,v,150,400),T=fu(e,v,25,75);u(k),m(T);const _=0,R=(kg-1)*10,D=_+R;setTimeout(()=>{dd.has(x)||(dd.add(x),l(!0))},D)}},[g,a,x,v,e]);const b=(k,T)=>{const _={up:T?"translateY(0)":"translateY(30px)",down:T?"translateY(0)":"translateY(-30px)",left:T?"translateX(0)":"translateX(30px)",right:T?"translateX(0)":"translateX(-30px)"};return _[k]||_.up},w=p.Children.toArray(r);return o.jsx("div",{ref:i,className:t,children:w.map((k,T)=>{if(!k||typeof k!="object")return k;const _=k;return p.cloneElement(_,{..._.props,key:_.key||T,style:{..._.props.style,opacity:a?1:0,transform:b(s,a),transition:`all ${d}ms cubic-bezier(0.25, 0.46, 0.45, 0.94) ${a?`${T*h}ms`:"0ms"}`,willChange:"opacity, transform"}})})})}function GR(){const{data:r}=Ou({queryKey:["/api/stream-stats"]}),{getColors:e,isDarkMode:t,currentTheme:s}=Me(),n=e();n.primary;const i=l=>{const d=document.getElementById(l);d&&d.scrollIntoView({behavior:"smooth"})},a=()=>{const l=document.getElementById("home");if(l){const d=l.querySelector('[role="region"][aria-label="Radio player controls"]');d?d.scrollIntoView({behavior:"smooth",block:"center"}):l.scrollIntoView({behavior:"smooth",block:"start"})}};return o.jsx("section",{id:"features",className:"py-20 transition-colors duration-300",style:{backgroundColor:n.background},"aria-label":"Platform features",children:o.jsxs("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8",children:[o.jsxs("div",{className:"text-center mb-16",children:[o.jsx("h2",{className:"font-orbitron font-black text-4xl md:text-5xl mb-6",style:{color:s==="light-mode"?"#000000":n.text},children:"ROCK THE AIRWAVES"}),o.jsx("p",{className:"text-xl font-semibold max-w-2xl mx-auto",style:{color:n.textMuted},children:"Experience the ultimate old-school metal radio experience with live streaming, interactive features, and exclusive content."})]}),o.jsxs(Dw,{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-8",staggerDelay:50,direction:"up",children:[o.jsx(he,{className:"group cursor-pointer transition-all duration-300 hover:scale-105 hover:shadow-2xl border-2 p-8 flex flex-col h-full",style:{backgroundColor:n.background,borderColor:`${n.primary}80`,boxShadow:`0 8px 32px ${n.primary}20`},onMouseEnter:l=>{l.currentTarget.style.borderColor=n.primary,l.currentTarget.style.boxShadow=`0 15px 50px ${n.primary}60`},onMouseLeave:l=>{l.currentTarget.style.borderColor=`${n.primary}80`,l.currentTarget.style.boxShadow=`0 8px 32px ${n.primary}20`},onClick:a,children:o.jsxs(me,{className:"p-0 flex flex-col h-full",children:[o.jsx("div",{className:"w-16 h-16 rounded-xl flex items-center justify-center mb-6 shadow-lg",style:{backgroundColor:n.primary},children:o.jsx(Uu,{className:"text-white h-8 w-8"})}),o.jsx("h3",{className:"font-black text-2xl mb-4 h-16 flex items-center text-left",style:{color:n.text},children:"24/7 Live Streaming"}),o.jsx("p",{className:"font-semibold text-lg leading-relaxed mb-6 flex-grow text-left",style:{color:n.textMuted,minHeight:"4.5rem"},children:"Non-stop old-school metal streaming with high-quality audio and minimal buffering."}),o.jsxs("div",{className:"flex items-center text-sm font-bold mt-auto text-left",style:{color:n.primary},children:[o.jsx("div",{className:"w-3 h-3 rounded-full mr-3 animate-pulse",style:{backgroundColor:n.primary}}),o.jsx("span",{children:"Currently Live"})]})]})}),o.jsx(he,{className:"group cursor-pointer transition-all duration-300 hover:scale-105 hover:shadow-2xl border-2 p-8 flex flex-col h-full",style:{backgroundColor:n.background,borderColor:`${n.primary}80`,boxShadow:`0 8px 32px ${n.primary}20`},onMouseEnter:l=>{l.currentTarget.style.borderColor=n.primary,l.currentTarget.style.boxShadow=`0 15px 50px ${n.primary}60`},onMouseLeave:l=>{l.currentTarget.style.borderColor=`${n.primary}80`,l.currentTarget.style.boxShadow=`0 8px 32px ${n.primary}20`},onClick:()=>i("schedule"),children:o.jsxs(me,{className:"p-0 flex flex-col h-full",children:[o.jsx("div",{className:"w-16 h-16 rounded-xl flex items-center justify-center mb-6 shadow-lg",style:{backgroundColor:n.primary},children:o.jsx(pT,{className:"text-white h-8 w-8"})}),o.jsx("h3",{className:"font-black text-2xl mb-4 h-16 flex items-center text-left",style:{color:n.text},children:"Show Archives"}),o.jsx("p",{className:"font-semibold text-lg leading-relaxed mb-6 flex-grow text-left",style:{color:n.textMuted,minHeight:"4.5rem"},children:"Access past shows, special episodes, and exclusive metal content on-demand."}),o.jsxs("div",{className:"flex items-center text-sm font-bold mt-auto text-left",style:{color:n.primary},children:[o.jsx("div",{className:"w-3 h-3 rounded-full mr-3 animate-pulse",style:{backgroundColor:n.primary}}),o.jsx("span",{children:"200+ hours of content"})]})]})}),o.jsx(he,{className:"group cursor-pointer transition-all duration-300 hover:scale-105 hover:shadow-2xl border-2 p-8 flex flex-col h-full",style:{backgroundColor:n.background,borderColor:`${n.primary}80`,boxShadow:`0 8px 32px ${n.primary}20`},onMouseEnter:l=>{l.currentTarget.style.borderColor=n.primary,l.currentTarget.style.boxShadow=`0 15px 50px ${n.primary}60`},onMouseLeave:l=>{l.currentTarget.style.borderColor=`${n.primary}80`,l.currentTarget.style.boxShadow=`0 8px 32px ${n.primary}20`},onClick:()=>i("map"),children:o.jsxs(me,{className:"p-0 flex flex-col h-full",children:[o.jsx("div",{className:"w-16 h-16 rounded-xl flex items-center justify-center mb-6 shadow-lg",style:{backgroundColor:n.primary},children:o.jsx(ET,{className:"text-white h-8 w-8"})}),o.jsx("h3",{className:"font-black text-2xl mb-4 h-16 flex items-center text-left",style:{color:n.text},children:"Global Listener Map"}),o.jsx("p",{className:"font-semibold text-lg leading-relaxed mb-6 flex-grow text-left",style:{color:n.textMuted,minHeight:"4.5rem"},children:"See where metalheads around the world are tuning in from in real-time."}),o.jsxs("div",{className:"flex items-center text-sm font-bold mt-auto text-left",style:{color:n.primary},children:[o.jsx("div",{className:"w-3 h-3 rounded-full mr-3 animate-pulse",style:{backgroundColor:n.primary}}),o.jsxs("span",{children:[(r==null?void 0:r.currentListeners)||42," listeners online"]})]})]})}),o.jsx(he,{className:"group cursor-pointer transition-all duration-300 hover:scale-105 hover:shadow-2xl border-2 p-8 flex flex-col h-full",style:{backgroundColor:n.background,borderColor:`${n.primary}80`,boxShadow:`0 8px 32px ${n.primary}20`},onMouseEnter:l=>{l.currentTarget.style.borderColor=n.primary,l.currentTarget.style.boxShadow=`0 15px 50px ${n.primary}60`},onMouseLeave:l=>{l.currentTarget.style.borderColor=`${n.primary}80`,l.currentTarget.style.boxShadow=`0 8px 32px ${n.primary}20`},onClick:()=>i("subscribe"),children:o.jsxs(me,{className:"p-0 flex flex-col h-full",children:[o.jsx("div",{className:"w-16 h-16 rounded-xl flex items-center justify-center mb-6 shadow-lg",style:{backgroundColor:n.primary},children:o.jsx(lr,{className:"text-white h-8 w-8"})}),o.jsx("h3",{className:"font-black text-2xl mb-4 h-16 flex items-center text-left",style:{color:n.text},children:"Hairspray Rebellion"}),o.jsx("p",{className:"font-semibold mb-6 text-lg leading-relaxed flex-grow text-left",style:{color:n.textMuted},children:"Join our premium membership for exclusive content, early access, and special perks."}),o.jsx("div",{className:"flex justify-start",children:o.jsxs(q,{className:"font-bold text-lg px-6 py-3 rounded-xl transition-all duration-300 hover:scale-105 border-0 flex items-center",style:{color:n.primary,backgroundColor:"transparent",border:"none"},onMouseEnter:l=>{l.currentTarget.style.backgroundColor=n.primary,l.currentTarget.style.color=n.primaryText||"white"},onMouseLeave:l=>{l.currentTarget.style.backgroundColor="transparent",l.currentTarget.style.color=n.primary},onClick:l=>{l.stopPropagation(),i("subscribe")},children:[o.jsx("span",{className:"text-left",children:"Learn More"}),o.jsx(lr,{className:"w-4 h-4 ml-2"})]})})]})}),o.jsx(he,{className:"group cursor-pointer transition-all duration-300 hover:scale-105 hover:shadow-2xl border-2 p-8 flex flex-col h-full",style:{backgroundColor:n.background,borderColor:`${n.primary}80`,boxShadow:`0 8px 32px ${n.primary}20`},onMouseEnter:l=>{l.currentTarget.style.borderColor=n.primary,l.currentTarget.style.boxShadow=`0 15px 50px ${n.primary}60`},onMouseLeave:l=>{l.currentTarget.style.borderColor=`${n.primary}80`,l.currentTarget.style.boxShadow=`0 8px 32px ${n.primary}20`},onClick:()=>i("submissions"),children:o.jsxs(me,{className:"p-0 flex flex-col h-full",children:[o.jsx("div",{className:"w-16 h-16 rounded-xl flex items-center justify-center mb-6 shadow-lg",style:{backgroundColor:n.primary},children:o.jsx(Yn,{className:"text-white h-8 w-8"})}),o.jsx("h3",{className:"font-black text-2xl mb-4 h-16 flex items-center text-left",style:{color:n.text},children:"Song Requests"}),o.jsx("p",{className:"font-semibold mb-6 text-lg leading-relaxed flex-grow text-left",style:{color:n.textMuted},children:"Submit your favorite metal tracks and artist suggestions to be featured on air."}),o.jsx("div",{className:"flex justify-start",children:o.jsxs(q,{className:"font-bold text-lg px-6 py-3 rounded-xl transition-all duration-300 hover:scale-105 border-0 flex items-center",style:{color:n.primary,backgroundColor:"transparent",border:"none"},onMouseEnter:l=>{l.currentTarget.style.backgroundColor=n.primary,l.currentTarget.style.color=n.primaryText||"white"},onMouseLeave:l=>{l.currentTarget.style.backgroundColor="transparent",l.currentTarget.style.color=n.primary},onClick:l=>{l.stopPropagation(),i("submissions")},children:[o.jsx("span",{className:"text-left",children:"Submit Request"}),o.jsx(Yn,{className:"w-4 h-4 ml-2"})]})})]})}),o.jsx(he,{className:"group cursor-pointer transition-all duration-300 hover:scale-105 hover:shadow-2xl border-2 p-8 flex flex-col h-full",style:{backgroundColor:n.background,borderColor:`${n.primary}80`,boxShadow:`0 8px 32px ${n.primary}20`},onMouseEnter:l=>{l.currentTarget.style.borderColor=n.primary,l.currentTarget.style.boxShadow=`0 15px 50px ${n.primary}60`},onMouseLeave:l=>{l.currentTarget.style.borderColor=`${n.primary}80`,l.currentTarget.style.boxShadow=`0 8px 32px ${n.primary}20`},onClick:()=>i("merch"),children:o.jsxs(me,{className:"p-0 flex flex-col h-full",children:[o.jsx("div",{className:"w-16 h-16 rounded-xl flex items-center justify-center mb-6 shadow-lg",style:{backgroundColor:n.primary},children:o.jsx(jm,{className:"text-white h-8 w-8"})}),o.jsx("h3",{className:"font-black text-2xl mb-4 h-16 flex items-center text-left",style:{color:n.text},children:"Official Merch"}),o.jsx("p",{className:"font-semibold mb-6 text-lg leading-relaxed flex-grow text-left",style:{color:n.textMuted},children:"Show your metal pride with official Spandex Salvation Radio merchandise and apparel."}),o.jsx("div",{className:"flex justify-start",children:o.jsxs(q,{className:"font-bold text-lg px-6 py-3 rounded-xl transition-all duration-300 hover:scale-105 border-0 flex items-center",style:{color:n.primary,backgroundColor:"transparent",border:"none"},onMouseEnter:l=>{l.currentTarget.style.backgroundColor=n.primary,l.currentTarget.style.color=n.primaryText||"white"},onMouseLeave:l=>{l.currentTarget.style.backgroundColor="transparent",l.currentTarget.style.color=n.primary},onClick:l=>{l.stopPropagation(),i("merch")},children:[o.jsx("span",{className:"text-left",children:"Shop Now"}),o.jsx(jm,{className:"w-4 h-4 ml-2"})]})})]})})]})]})})}const ud=new Set;let jg=0;function rr({children:r,threshold:e=.05,delay:t=0,duration:s=300,className:n="",direction:i="up"}){const a=p.useRef(null),[l,d]=p.useState(!1),[u,h]=p.useState(s),[m]=p.useState(()=>`fade-${++jg}`),x=Rw(a,{threshold:e,rootMargin:"200px 0px -50px 0px"}),{velocity:g}=Mw();p.useEffect(()=>{if(x&&!l&&!ud.has(m)){const b=fu(s,g,300,800);h(b);const w=0,k=(jg-1)*10,T=w+k+t;setTimeout(()=>{ud.has(m)||(ud.add(m),d(!0))},T)}},[x,l,m,t,g,s]);const v=(b,w)=>{if(b==="none")return"";const k={up:w?"translateY(0)":"translateY(30px)",down:w?"translateY(0)":"translateY(-30px)",left:w?"translateX(0)":"translateX(30px)",right:w?"translateX(0)":"translateX(-30px)"};return k[b]||k.up};return o.jsx("div",{ref:a,className:`transition-all ease-out ${n}`,style:{opacity:l?1:0,transform:v(i,l),transitionDuration:`${u}ms`,transitionDelay:"0ms",willChange:"opacity, transform"},children:r})}function KR(){const{getColors:r,currentTheme:e}=Me(),t=r(),s=()=>{const n=document.getElementById("subscribe");n&&n.scrollIntoView({behavior:"smooth"})};return o.jsx("section",{id:"about",className:"py-20 transition-colors duration-300",style:{backgroundColor:t.background},"aria-label":"About Spandex Salvation Radio",children:o.jsx("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8",children:o.jsxs("div",{className:"flex flex-col lg:flex-row gap-12 items-center",children:[o.jsxs("div",{className:"lg:w-3/5",children:[o.jsx("h2",{className:"font-orbitron font-black text-3xl md:text-4xl mb-6",style:{color:e==="light-mode"?"#000000":t.text},children:"ABOUT THE REBELLION"}),o.jsx("p",{className:"text-lg font-semibold mb-6",style:{color:t.textSecondary},children:"Spandex Salvation Radio was born from a passion for the golden era of metal music. When hair was big, guitars were loud, and the stage was set ablaze with pure rock energy."}),o.jsx("p",{className:"font-semibold mb-6",style:{color:t.textMuted},children:"We're dedicated to preserving and celebrating the legendary sounds of bands like Skid Row, Twisted Sister, Mtley Cre, and countless other metal pioneers who defined a generation."}),o.jsxs(Dw,{className:"flex items-center space-x-6 mb-8",staggerDelay:200,direction:"up",children:[o.jsxs("div",{className:"text-center",children:[o.jsx("div",{className:"text-2xl font-black text-center",style:{color:t.primary},children:"24/7"}),o.jsx("div",{className:"text-sm font-semibold text-center",style:{color:t.textMuted},children:"Live Streaming"})]}),o.jsxs("div",{className:"text-center",children:[o.jsx("div",{className:"text-2xl font-black text-center",style:{color:t.primary},children:"1000+"}),o.jsx("div",{className:"text-sm font-semibold text-center",style:{color:t.textMuted},children:"Metal Tracks"})]}),o.jsxs("div",{className:"text-center",children:[o.jsx("div",{className:"text-2xl font-black text-center",style:{color:t.primary},children:"50+"}),o.jsx("div",{className:"text-sm font-semibold text-center",style:{color:t.textMuted},children:"Countries"})]})]}),o.jsx(rr,{direction:"up",delay:600,children:o.jsx(q,{onClick:s,className:"px-6 py-3 rounded-full font-semibold transition-all duration-300 border-0",style:{backgroundColor:t.primary,color:t.primaryText||"white"},onMouseEnter:n=>{n.currentTarget.style.backgroundColor=t.primaryDark||t.primary,n.currentTarget.style.transform="scale(1.05)"},onMouseLeave:n=>{n.currentTarget.style.backgroundColor=t.primary,n.currentTarget.style.transform="scale(1)"},children:"Join the Revolution"})})]}),o.jsxs("div",{className:"relative hidden lg:block lg:w-2/5",children:[o.jsx("img",{src:"https://images.unsplash.com/photo-1493225457124-a3eb161ffa5f?ixlib=rb-4.0.3&auto=format&fit=crop&w=800&h=600",alt:"Metal concert with band performing on stage under dramatic lighting",className:"rounded-xl shadow-2xl w-full h-auto"}),o.jsx("div",{className:"absolute inset-0 bg-gradient-to-t from-dark-bg/50 to-transparent rounded-xl"})]})]})})})}function QR(){const{getColors:r,currentTheme:e}=Me(),t=r(),{setCurrentTrack:s}=Ga(),[n,i]=p.useState(null),[a,l]=p.useState(null),d=[{id:"1",title:"Morning Metal",host:"DJ Metalhead",dayOfWeek:"Monday",time:"9:00 AM",duration:120,description:"Start your week with the best metal hits",genre:"Heavy Metal"},{id:"2",title:"Thrash Tuesday",host:"DJ Thrash",dayOfWeek:"Tuesday",time:"7:00 PM",duration:180,description:"Pure thrash metal madness",genre:"Thrash Metal"},{id:"3",title:"Death Metal Wednesday",host:"DJ Death",dayOfWeek:"Wednesday",time:"8:00 PM",duration:150,description:"The heaviest death metal around",genre:"Death Metal"}],u=[{id:"1",title:"Classic Metal Hour",host:"DJ Classic",airDate:new Date().toISOString(),duration:60,description:"The best classic metal tracks",genre:"Classic Metal"}],h=k=>{const T=new Date,_=[],R=T.getDay(),D=["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"];for(let $=0;$<7;$++){const S=(R+$)%7,I=D[S],E=(k||[]).filter(j=>j.dayOfWeek===I);if($===0){const j=T.getHours()*60+T.getMinutes(),C=(E||[]).filter(A=>{const[P,W]=A.time.split(" "),[oe,U]=P.split(":").map(Number);let X=oe*60+U;return W==="PM"&&oe!==12?X+=12*60:W==="AM"&&oe===12&&(X=U),X>j});C.sort((A,P)=>{const W=m(A.time),oe=m(P.time);return W-oe}),_.push(...C)}else{const j=(E||[]).sort((C,A)=>{const P=m(C.time),W=m(A.time);return P-W});_.push(...j)}}return _},m=k=>{const[T,_]=k.split(" "),[R,D]=T.split(":").map(Number);let $=R*60+D;return _==="PM"&&R!==12?$+=12*60:_==="AM"&&R===12&&($=D),$},x=h(d),g=k=>new Date(k).toLocaleDateString("en-US",{weekday:"long",month:"long",day:"numeric",year:"numeric"}),v=(k,T)=>{const _=new Date(k).toLocaleDateString("en-US",{month:"long",day:"numeric",year:"numeric"});if(T){const R=Math.floor(T/60),D=T%60;return R===0?`${_}, ${D} min`:D===0?`${_}, ${R} hr`:`${_}, ${R} hr ${D} min`}return _},b=k=>{try{const[T,_]=k.split(":").map(Number),R=new Date;return R.setHours(T,_||0,0,0),R.toLocaleTimeString("en-US",{hour:"numeric",minute:"2-digit",hour12:!0,timeZone:Intl.DateTimeFormat().resolvedOptions().timeZone})}catch{return k}},w=k=>{i(k);const T=`${k.title} - ${g(k.date)}`;s({title:T,artist:k.host||"Spandex Salvation Radio",album:"Past Show Archive",artwork:""})};return o.jsxs("section",{id:"schedule",className:"py-20 transition-colors duration-300",style:{backgroundColor:t.background},children:[o.jsxs("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8",children:[o.jsxs("div",{className:"text-center mb-16",children:[o.jsx("h2",{className:"font-orbitron font-black text-3xl md:text-4xl mb-4",style:{color:e==="light-mode"?"#000000":t.text},children:"SHOW SCHEDULE"}),o.jsx("p",{className:"text-lg font-semibold",style:{color:t.textMuted},children:"Catch your favorite metal shows and discover new content throughout the week."})]}),o.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-8",children:[o.jsxs("div",{children:[o.jsx("h3",{className:"font-black text-xl mb-6 text-center",style:{color:"var(--color-primary)"},children:"This Week's Lineup"}),o.jsx("div",{className:"space-y-4",children:(x||[]).map(k=>o.jsx(he,{className:"group cursor-pointer transition-all duration-300 hover:scale-105 hover:shadow-2xl border-2 p-4",style:{backgroundColor:t.background,borderColor:`${t.primary}80`,boxShadow:`0 8px 32px ${t.primary}20`,height:"160px"},onMouseEnter:T=>{T.currentTarget.style.borderColor=t.primary,T.currentTarget.style.boxShadow=`0 15px 50px ${t.primary}60`},onMouseLeave:T=>{T.currentTarget.style.borderColor=`${t.primary}80`,T.currentTarget.style.boxShadow=`0 8px 32px ${t.primary}20`},onClick:()=>l(k),children:o.jsxs(me,{className:"p-0",style:{height:"100%",display:"flex",flexDirection:"column"},children:[o.jsxs("div",{className:"text-center mb-2",children:[o.jsx("h4",{className:"font-black text-lg",children:k.title}),o.jsxs("p",{className:"text-gray-500 text-sm font-semibold mt-1",children:["Hosted by: ",k.host]})]}),o.jsx("p",{className:"text-gray-400 text-sm font-semibold mb-1 text-center flex-1",children:k.description}),o.jsxs("div",{className:"flex items-center justify-center space-x-2",style:{marginTop:"auto",paddingTop:"8px"},children:[o.jsx(xs,{className:"text-gray-500 h-3 w-3"}),o.jsxs("span",{className:"text-gray-500 text-xs font-bold",children:[k.dayOfWeek," at ",b(k.time)]})]})]})},k.id))})]}),((u==null?void 0:u.length)||0)>0&&o.jsxs("div",{children:[o.jsx("h3",{className:"font-black text-xl mb-6 text-center",style:{color:t.primary},children:"Past Shows"}),o.jsx("div",{className:"space-y-4",children:(u||[]).slice(0,3).map(k=>o.jsx(he,{className:"group cursor-pointer transition-all duration-300 hover:scale-105 hover:shadow-2xl border-2 p-4",style:{backgroundColor:t.background,borderColor:`${t.primary}80`,boxShadow:`0 8px 32px ${t.primary}20`,height:"160px"},onMouseEnter:T=>{T.currentTarget.style.borderColor=t.primary,T.currentTarget.style.boxShadow=`0 15px 50px ${t.primary}60`},onMouseLeave:T=>{T.currentTarget.style.borderColor=`${t.primary}80`,T.currentTarget.style.boxShadow=`0 8px 32px ${t.primary}20`},onClick:()=>w(k),children:o.jsxs(me,{className:"p-0",style:{height:"100%",display:"flex",flexDirection:"row",alignItems:"center"},children:[o.jsxs("div",{style:{flex:"1",display:"flex",flexDirection:"column",height:"100%",justifyContent:"space-between"},children:[o.jsxs("div",{className:"text-center mb-2",children:[o.jsx("h4",{className:"font-black text-lg",style:{color:t.text},children:k.title}),o.jsxs("p",{className:"text-gray-500 text-sm font-semibold mt-1",children:["Hosted by: ",k.host||"Spandex Salvation Radio"]})]}),o.jsx("p",{className:"text-gray-400 text-sm font-semibold text-center flex-1 flex items-center justify-center",children:k.description||"Past episode archive"}),o.jsxs("div",{className:"flex items-center justify-center space-x-2",style:{marginTop:"auto",paddingTop:"8px"},children:[o.jsx(xs,{className:"text-gray-500 h-3 w-3"}),o.jsx("span",{className:"text-gray-500 text-xs font-bold",children:v(k.date,k.duration)})]})]}),o.jsx("div",{style:{display:"flex",alignItems:"center",paddingLeft:"16px"},children:o.jsx(q,{className:"rounded-full transition-all duration-300 hover:scale-110",style:{backgroundColor:t.primary,color:"white",border:"none",width:"48px",height:"48px",minWidth:"48px",maxWidth:"48px",display:"flex",alignItems:"center",justifyContent:"center",padding:"0"},onMouseEnter:T=>{T.currentTarget.style.backgroundColor=t.secondary||t.primary,T.currentTarget.style.transform="scale(1.1)"},onMouseLeave:T=>{T.currentTarget.style.backgroundColor=t.primary,T.currentTarget.style.transform="scale(1)"},onClick:T=>{T.stopPropagation(),w(k)},children:o.jsx(kT,{className:"h-5 w-5",style:{strokeLinecap:"round",strokeLinejoin:"round"},fill:"currentColor"})})})]})},k.id))})]})]}),o.jsx("div",{className:"mt-12 flex justify-center w-full",children:o.jsx(q,{variant:"outline",className:"border-2 px-6 py-3 rounded-full font-bold transition-all duration-200 hover:scale-105",style:{borderColor:t.primary,color:t.primary,backgroundColor:"transparent",width:"25%",minWidth:"200px",maxWidth:"300px"},onMouseEnter:k=>{k.currentTarget.style.backgroundColor=t.primary,k.currentTarget.style.color="white",k.currentTarget.style.borderColor=t.primary},onMouseLeave:k=>{k.currentTarget.style.backgroundColor="transparent",k.currentTarget.style.color=t.primary,k.currentTarget.style.borderColor=t.primary},children:"VIEW ALL ARCHIVES"})})]}),a&&o.jsx("div",{className:"fixed inset-0 bg-black/80 backdrop-blur-md flex items-center justify-center z-50",onClick:()=>l(null),children:o.jsxs("div",{className:"bg-background/95 backdrop-blur-sm border-2 rounded-xl p-8 max-w-md w-full mx-4 relative",style:{borderColor:t.primary,backgroundColor:t.background,boxShadow:`0 25px 50px ${t.primary}40`},onClick:k=>k.stopPropagation(),children:[o.jsx("button",{onClick:()=>l(null),className:"absolute top-4 right-4 p-2 rounded-full transition-all duration-200 hover:scale-110 flex items-center justify-center",style:{color:t.primary,backgroundColor:`${t.primary}20`,width:"40px",height:"40px"},onMouseEnter:k=>{k.currentTarget.style.backgroundColor=t.primary,k.currentTarget.style.color="white"},onMouseLeave:k=>{k.currentTarget.style.backgroundColor=`${t.primary}20`,k.currentTarget.style.color=t.primary},children:o.jsx(Mr,{className:"h-5 w-5"})}),o.jsxs("div",{className:"text-center space-y-4",children:[o.jsx("h2",{className:"font-black text-2xl",style:{color:t.text},children:a.title}),o.jsxs("p",{className:"font-semibold text-base",style:{color:t.text},children:["Hosted by: ",a.host]}),o.jsxs("div",{className:"flex items-center justify-center space-x-2",children:[o.jsx(xs,{className:"h-4 w-4",style:{color:t.primary}}),o.jsxs("span",{className:"text-sm font-bold",style:{color:t.text},children:[a.dayOfWeek," at ",b(a.time)]})]}),o.jsx("p",{className:"text-gray-400 text-sm font-semibold leading-relaxed",children:a.description})]})]})})]})}const Ei=p.forwardRef(({className:r,...e},t)=>o.jsx("textarea",{className:se("flex min-h-[80px] w-full rounded-md border border-input bg-background px-3 py-2 text-base ring-offset-background placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50 md:text-sm",r),ref:t,...e}));Ei.displayName="Textarea";function Ow(r){const e=p.useRef({value:r,previous:r});return p.useMemo(()=>(e.current.value!==r&&(e.current.previous=e.current.value,e.current.value=r),e.current.previous),[r])}var uc="Checkbox",[YR,$6]=fn(uc),[XR,ef]=YR(uc);function JR(r){const{__scopeCheckbox:e,checked:t,children:s,defaultChecked:n,disabled:i,form:a,name:l,onCheckedChange:d,required:u,value:h="on",internal_do_not_use_render:m}=r,[x,g]=Kn({prop:t,defaultProp:n??!1,onChange:d,caller:uc}),[v,b]=p.useState(null),[w,k]=p.useState(null),T=p.useRef(!1),_=v?!!a||!!v.closest("form"):!0,R={checked:x,disabled:i,setChecked:g,control:v,setControl:b,name:l,form:a,value:h,hasConsumerStoppedPropagationRef:T,required:u,defaultChecked:_s(n)?!1:n,isFormControl:_,bubbleInput:w,setBubbleInput:k};return o.jsx(XR,{scope:e,...R,children:ZR(m)?m(R):s})}var Lw="CheckboxTrigger",Vw=p.forwardRef(({__scopeCheckbox:r,onKeyDown:e,onClick:t,...s},n)=>{const{control:i,value:a,disabled:l,checked:d,required:u,setControl:h,setChecked:m,hasConsumerStoppedPropagationRef:x,isFormControl:g,bubbleInput:v}=ef(Lw,r),b=$e(n,h),w=p.useRef(d);return p.useEffect(()=>{const k=i==null?void 0:i.form;if(k){const T=()=>m(w.current);return k.addEventListener("reset",T),()=>k.removeEventListener("reset",T)}},[i,m]),o.jsx(Pe.button,{type:"button",role:"checkbox","aria-checked":_s(d)?"mixed":d,"aria-required":u,"data-state":zw(d),"data-disabled":l?"":void 0,disabled:l,value:a,...s,ref:b,onKeyDown:ue(e,k=>{k.key==="Enter"&&k.preventDefault()}),onClick:ue(t,k=>{m(T=>_s(T)?!0:!T),v&&g&&(x.current=k.isPropagationStopped(),x.current||k.stopPropagation())})})});Vw.displayName=Lw;var tf=p.forwardRef((r,e)=>{const{__scopeCheckbox:t,name:s,checked:n,defaultChecked:i,required:a,disabled:l,value:d,onCheckedChange:u,form:h,...m}=r;return o.jsx(JR,{__scopeCheckbox:t,checked:n,defaultChecked:i,disabled:l,required:a,onCheckedChange:u,name:s,form:h,value:d,internal_do_not_use_render:({isFormControl:x})=>o.jsxs(o.Fragment,{children:[o.jsx(Vw,{...m,ref:e,__scopeCheckbox:t}),x&&o.jsx(Bw,{__scopeCheckbox:t})]})})});tf.displayName=uc;var Fw="CheckboxIndicator",Uw=p.forwardRef((r,e)=>{const{__scopeCheckbox:t,forceMount:s,...n}=r,i=ef(Fw,t);return o.jsx(Ur,{present:s||_s(i.checked)||i.checked===!0,children:o.jsx(Pe.span,{"data-state":zw(i.checked),"data-disabled":i.disabled?"":void 0,...n,ref:e,style:{pointerEvents:"none",...r.style}})})});Uw.displayName=Fw;var $w="CheckboxBubbleInput",Bw=p.forwardRef(({__scopeCheckbox:r,...e},t)=>{const{control:s,hasConsumerStoppedPropagationRef:n,checked:i,defaultChecked:a,required:l,disabled:d,name:u,value:h,form:m,bubbleInput:x,setBubbleInput:g}=ef($w,r),v=$e(t,g),b=Ow(i),w=M_(s);p.useEffect(()=>{const T=x;if(!T)return;const _=window.HTMLInputElement.prototype,D=Object.getOwnPropertyDescriptor(_,"checked").set,$=!n.current;if(b!==i&&D){const S=new Event("click",{bubbles:$});T.indeterminate=_s(i),D.call(T,_s(i)?!1:i),T.dispatchEvent(S)}},[x,b,i,n]);const k=p.useRef(_s(i)?!1:i);return o.jsx(Pe.input,{type:"checkbox","aria-hidden":!0,defaultChecked:a??k.current,required:l,disabled:d,name:u,value:h,form:m,...e,tabIndex:-1,ref:v,style:{...e.style,...w,position:"absolute",pointerEvents:"none",opacity:0,margin:0,transform:"translateX(-100%)"}})});Bw.displayName=$w;function ZR(r){return typeof r=="function"}function _s(r){return r==="indeterminate"}function zw(r){return _s(r)?"indeterminate":r?"checked":"unchecked"}const Hw=p.forwardRef(({className:r,...e},t)=>o.jsx(tf,{ref:t,className:se("peer h-4 w-4 shrink-0 rounded-sm border border-primary ring-offset-background focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50 data-[state=checked]:bg-primary data-[state=checked]:text-primary-foreground",r),...e,children:o.jsx(Uw,{className:se("flex items-center justify-center text-current"),children:o.jsx(ho,{className:"h-4 w-4"})})}));Hw.displayName=tf.displayName;function mu(r,[e,t]){return Math.min(t,Math.max(e,r))}function e5(r,e){return p.useReducer((t,s)=>e[t][s]??t,r)}var rf="ScrollArea",[qw,B6]=fn(rf),[t5,Bt]=qw(rf),Ww=p.forwardRef((r,e)=>{const{__scopeScrollArea:t,type:s="hover",dir:n,scrollHideDelay:i=600,...a}=r,[l,d]=p.useState(null),[u,h]=p.useState(null),[m,x]=p.useState(null),[g,v]=p.useState(null),[b,w]=p.useState(null),[k,T]=p.useState(0),[_,R]=p.useState(0),[D,$]=p.useState(!1),[S,I]=p.useState(!1),E=$e(e,C=>d(C)),j=mx(n);return o.jsx(t5,{scope:t,type:s,dir:j,scrollHideDelay:i,scrollArea:l,viewport:u,onViewportChange:h,content:m,onContentChange:x,scrollbarX:g,onScrollbarXChange:v,scrollbarXEnabled:D,onScrollbarXEnabledChange:$,scrollbarY:b,onScrollbarYChange:w,scrollbarYEnabled:S,onScrollbarYEnabledChange:I,onCornerWidthChange:T,onCornerHeightChange:R,children:o.jsx(Pe.div,{dir:j,...a,ref:E,style:{position:"relative","--radix-scroll-area-corner-width":k+"px","--radix-scroll-area-corner-height":_+"px",...r.style}})})});Ww.displayName=rf;var Gw="ScrollAreaViewport",Kw=p.forwardRef((r,e)=>{const{__scopeScrollArea:t,children:s,nonce:n,...i}=r,a=Bt(Gw,t),l=p.useRef(null),d=$e(e,l,a.onViewportChange);return o.jsxs(o.Fragment,{children:[o.jsx("style",{dangerouslySetInnerHTML:{__html:"[data-radix-scroll-area-viewport]{scrollbar-width:none;-ms-overflow-style:none;-webkit-overflow-scrolling:touch;}[data-radix-scroll-area-viewport]::-webkit-scrollbar{display:none}"},nonce:n}),o.jsx(Pe.div,{"data-radix-scroll-area-viewport":"",...i,ref:d,style:{overflowX:a.scrollbarXEnabled?"scroll":"hidden",overflowY:a.scrollbarYEnabled?"scroll":"hidden",...r.style},children:o.jsx("div",{ref:a.onContentChange,style:{minWidth:"100%",display:"table"},children:s})})]})});Kw.displayName=Gw;var wr="ScrollAreaScrollbar",sf=p.forwardRef((r,e)=>{const{forceMount:t,...s}=r,n=Bt(wr,r.__scopeScrollArea),{onScrollbarXEnabledChange:i,onScrollbarYEnabledChange:a}=n,l=r.orientation==="horizontal";return p.useEffect(()=>(l?i(!0):a(!0),()=>{l?i(!1):a(!1)}),[l,i,a]),n.type==="hover"?o.jsx(r5,{...s,ref:e,forceMount:t}):n.type==="scroll"?o.jsx(s5,{...s,ref:e,forceMount:t}):n.type==="auto"?o.jsx(Qw,{...s,ref:e,forceMount:t}):n.type==="always"?o.jsx(nf,{...s,ref:e}):null});sf.displayName=wr;var r5=p.forwardRef((r,e)=>{const{forceMount:t,...s}=r,n=Bt(wr,r.__scopeScrollArea),[i,a]=p.useState(!1);return p.useEffect(()=>{const l=n.scrollArea;let d=0;if(l){const u=()=>{window.clearTimeout(d),a(!0)},h=()=>{d=window.setTimeout(()=>a(!1),n.scrollHideDelay)};return l.addEventListener("pointerenter",u),l.addEventListener("pointerleave",h),()=>{window.clearTimeout(d),l.removeEventListener("pointerenter",u),l.removeEventListener("pointerleave",h)}}},[n.scrollArea,n.scrollHideDelay]),o.jsx(Ur,{present:t||i,children:o.jsx(Qw,{"data-state":i?"visible":"hidden",...s,ref:e})})}),s5=p.forwardRef((r,e)=>{const{forceMount:t,...s}=r,n=Bt(wr,r.__scopeScrollArea),i=r.orientation==="horizontal",a=fc(()=>d("SCROLL_END"),100),[l,d]=e5("hidden",{hidden:{SCROLL:"scrolling"},scrolling:{SCROLL_END:"idle",POINTER_ENTER:"interacting"},interacting:{SCROLL:"interacting",POINTER_LEAVE:"idle"},idle:{HIDE:"hidden",SCROLL:"scrolling",POINTER_ENTER:"interacting"}});return p.useEffect(()=>{if(l==="idle"){const u=window.setTimeout(()=>d("HIDE"),n.scrollHideDelay);return()=>window.clearTimeout(u)}},[l,n.scrollHideDelay,d]),p.useEffect(()=>{const u=n.viewport,h=i?"scrollLeft":"scrollTop";if(u){let m=u[h];const x=()=>{const g=u[h];m!==g&&(d("SCROLL"),a()),m=g};return u.addEventListener("scroll",x),()=>u.removeEventListener("scroll",x)}},[n.viewport,i,d,a]),o.jsx(Ur,{present:t||l!=="hidden",children:o.jsx(nf,{"data-state":l==="hidden"?"hidden":"visible",...s,ref:e,onPointerEnter:ue(r.onPointerEnter,()=>d("POINTER_ENTER")),onPointerLeave:ue(r.onPointerLeave,()=>d("POINTER_LEAVE"))})})}),Qw=p.forwardRef((r,e)=>{const t=Bt(wr,r.__scopeScrollArea),{forceMount:s,...n}=r,[i,a]=p.useState(!1),l=r.orientation==="horizontal",d=fc(()=>{if(t.viewport){const u=t.viewport.offsetWidth<t.viewport.scrollWidth,h=t.viewport.offsetHeight<t.viewport.scrollHeight;a(l?u:h)}},10);return ao(t.viewport,d),ao(t.content,d),o.jsx(Ur,{present:s||i,children:o.jsx(nf,{"data-state":i?"visible":"hidden",...n,ref:e})})}),nf=p.forwardRef((r,e)=>{const{orientation:t="vertical",...s}=r,n=Bt(wr,r.__scopeScrollArea),i=p.useRef(null),a=p.useRef(0),[l,d]=p.useState({content:0,viewport:0,scrollbar:{size:0,paddingStart:0,paddingEnd:0}}),u=e1(l.viewport,l.content),h={...s,sizes:l,onSizesChange:d,hasThumb:u>0&&u<1,onThumbChange:x=>i.current=x,onThumbPointerUp:()=>a.current=0,onThumbPointerDown:x=>a.current=x};function m(x,g){return c5(x,a.current,l,g)}return t==="horizontal"?o.jsx(n5,{...h,ref:e,onThumbPositionChange:()=>{if(n.viewport&&i.current){const x=n.viewport.scrollLeft,g=Ag(x,l,n.dir);i.current.style.transform=`translate3d(${g}px, 0, 0)`}},onWheelScroll:x=>{n.viewport&&(n.viewport.scrollLeft=x)},onDragScroll:x=>{n.viewport&&(n.viewport.scrollLeft=m(x,n.dir))}}):t==="vertical"?o.jsx(o5,{...h,ref:e,onThumbPositionChange:()=>{if(n.viewport&&i.current){const x=n.viewport.scrollTop,g=Ag(x,l);i.current.style.transform=`translate3d(0, ${g}px, 0)`}},onWheelScroll:x=>{n.viewport&&(n.viewport.scrollTop=x)},onDragScroll:x=>{n.viewport&&(n.viewport.scrollTop=m(x))}}):null}),n5=p.forwardRef((r,e)=>{const{sizes:t,onSizesChange:s,...n}=r,i=Bt(wr,r.__scopeScrollArea),[a,l]=p.useState(),d=p.useRef(null),u=$e(e,d,i.onScrollbarXChange);return p.useEffect(()=>{d.current&&l(getComputedStyle(d.current))},[d]),o.jsx(Xw,{"data-orientation":"horizontal",...n,ref:u,sizes:t,style:{bottom:0,left:i.dir==="rtl"?"var(--radix-scroll-area-corner-width)":0,right:i.dir==="ltr"?"var(--radix-scroll-area-corner-width)":0,"--radix-scroll-area-thumb-width":hc(t)+"px",...r.style},onThumbPointerDown:h=>r.onThumbPointerDown(h.x),onDragScroll:h=>r.onDragScroll(h.x),onWheelScroll:(h,m)=>{if(i.viewport){const x=i.viewport.scrollLeft+h.deltaX;r.onWheelScroll(x),r1(x,m)&&h.preventDefault()}},onResize:()=>{d.current&&i.viewport&&a&&s({content:i.viewport.scrollWidth,viewport:i.viewport.offsetWidth,scrollbar:{size:d.current.clientWidth,paddingStart:Tl(a.paddingLeft),paddingEnd:Tl(a.paddingRight)}})}})}),o5=p.forwardRef((r,e)=>{const{sizes:t,onSizesChange:s,...n}=r,i=Bt(wr,r.__scopeScrollArea),[a,l]=p.useState(),d=p.useRef(null),u=$e(e,d,i.onScrollbarYChange);return p.useEffect(()=>{d.current&&l(getComputedStyle(d.current))},[d]),o.jsx(Xw,{"data-orientation":"vertical",...n,ref:u,sizes:t,style:{top:0,right:i.dir==="ltr"?0:void 0,left:i.dir==="rtl"?0:void 0,bottom:"var(--radix-scroll-area-corner-height)","--radix-scroll-area-thumb-height":hc(t)+"px",...r.style},onThumbPointerDown:h=>r.onThumbPointerDown(h.y),onDragScroll:h=>r.onDragScroll(h.y),onWheelScroll:(h,m)=>{if(i.viewport){const x=i.viewport.scrollTop+h.deltaY;r.onWheelScroll(x),r1(x,m)&&h.preventDefault()}},onResize:()=>{d.current&&i.viewport&&a&&s({content:i.viewport.scrollHeight,viewport:i.viewport.offsetHeight,scrollbar:{size:d.current.clientHeight,paddingStart:Tl(a.paddingTop),paddingEnd:Tl(a.paddingBottom)}})}})}),[i5,Yw]=qw(wr),Xw=p.forwardRef((r,e)=>{const{__scopeScrollArea:t,sizes:s,hasThumb:n,onThumbChange:i,onThumbPointerUp:a,onThumbPointerDown:l,onThumbPositionChange:d,onDragScroll:u,onWheelScroll:h,onResize:m,...x}=r,g=Bt(wr,t),[v,b]=p.useState(null),w=$e(e,E=>b(E)),k=p.useRef(null),T=p.useRef(""),_=g.viewport,R=s.content-s.viewport,D=$t(h),$=$t(d),S=fc(m,10);function I(E){if(k.current){const j=E.clientX-k.current.left,C=E.clientY-k.current.top;u({x:j,y:C})}}return p.useEffect(()=>{const E=j=>{const C=j.target;(v==null?void 0:v.contains(C))&&D(j,R)};return document.addEventListener("wheel",E,{passive:!1}),()=>document.removeEventListener("wheel",E,{passive:!1})},[_,v,R,D]),p.useEffect($,[s,$]),ao(v,S),ao(g.content,S),o.jsx(i5,{scope:t,scrollbar:v,hasThumb:n,onThumbChange:$t(i),onThumbPointerUp:$t(a),onThumbPositionChange:$,onThumbPointerDown:$t(l),children:o.jsx(Pe.div,{...x,ref:w,style:{position:"absolute",...x.style},onPointerDown:ue(r.onPointerDown,E=>{E.button===0&&(E.target.setPointerCapture(E.pointerId),k.current=v.getBoundingClientRect(),T.current=document.body.style.webkitUserSelect,document.body.style.webkitUserSelect="none",g.viewport&&(g.viewport.style.scrollBehavior="auto"),I(E))}),onPointerMove:ue(r.onPointerMove,I),onPointerUp:ue(r.onPointerUp,E=>{const j=E.target;j.hasPointerCapture(E.pointerId)&&j.releasePointerCapture(E.pointerId),document.body.style.webkitUserSelect=T.current,g.viewport&&(g.viewport.style.scrollBehavior=""),k.current=null})})})}),_l="ScrollAreaThumb",Jw=p.forwardRef((r,e)=>{const{forceMount:t,...s}=r,n=Yw(_l,r.__scopeScrollArea);return o.jsx(Ur,{present:t||n.hasThumb,children:o.jsx(a5,{ref:e,...s})})}),a5=p.forwardRef((r,e)=>{const{__scopeScrollArea:t,style:s,...n}=r,i=Bt(_l,t),a=Yw(_l,t),{onThumbPositionChange:l}=a,d=$e(e,m=>a.onThumbChange(m)),u=p.useRef(void 0),h=fc(()=>{u.current&&(u.current(),u.current=void 0)},100);return p.useEffect(()=>{const m=i.viewport;if(m){const x=()=>{if(h(),!u.current){const g=d5(m,l);u.current=g,l()}};return l(),m.addEventListener("scroll",x),()=>m.removeEventListener("scroll",x)}},[i.viewport,h,l]),o.jsx(Pe.div,{"data-state":a.hasThumb?"visible":"hidden",...n,ref:d,style:{width:"var(--radix-scroll-area-thumb-width)",height:"var(--radix-scroll-area-thumb-height)",...s},onPointerDownCapture:ue(r.onPointerDownCapture,m=>{const g=m.target.getBoundingClientRect(),v=m.clientX-g.left,b=m.clientY-g.top;a.onThumbPointerDown({x:v,y:b})}),onPointerUp:ue(r.onPointerUp,a.onThumbPointerUp)})});Jw.displayName=_l;var of="ScrollAreaCorner",Zw=p.forwardRef((r,e)=>{const t=Bt(of,r.__scopeScrollArea),s=!!(t.scrollbarX&&t.scrollbarY);return t.type!=="scroll"&&s?o.jsx(l5,{...r,ref:e}):null});Zw.displayName=of;var l5=p.forwardRef((r,e)=>{const{__scopeScrollArea:t,...s}=r,n=Bt(of,t),[i,a]=p.useState(0),[l,d]=p.useState(0),u=!!(i&&l);return ao(n.scrollbarX,()=>{var m;const h=((m=n.scrollbarX)==null?void 0:m.offsetHeight)||0;n.onCornerHeightChange(h),d(h)}),ao(n.scrollbarY,()=>{var m;const h=((m=n.scrollbarY)==null?void 0:m.offsetWidth)||0;n.onCornerWidthChange(h),a(h)}),u?o.jsx(Pe.div,{...s,ref:e,style:{width:i,height:l,position:"absolute",right:n.dir==="ltr"?0:void 0,left:n.dir==="rtl"?0:void 0,bottom:0,...r.style}}):null});function Tl(r){return r?parseInt(r,10):0}function e1(r,e){const t=r/e;return isNaN(t)?0:t}function hc(r){const e=e1(r.viewport,r.content),t=r.scrollbar.paddingStart+r.scrollbar.paddingEnd,s=(r.scrollbar.size-t)*e;return Math.max(s,18)}function c5(r,e,t,s="ltr"){const n=hc(t),i=n/2,a=e||i,l=n-a,d=t.scrollbar.paddingStart+a,u=t.scrollbar.size-t.scrollbar.paddingEnd-l,h=t.content-t.viewport,m=s==="ltr"?[0,h]:[h*-1,0];return t1([d,u],m)(r)}function Ag(r,e,t="ltr"){const s=hc(e),n=e.scrollbar.paddingStart+e.scrollbar.paddingEnd,i=e.scrollbar.size-n,a=e.content-e.viewport,l=i-s,d=t==="ltr"?[0,a]:[a*-1,0],u=mu(r,d);return t1([0,a],[0,l])(u)}function t1(r,e){return t=>{if(r[0]===r[1]||e[0]===e[1])return e[0];const s=(e[1]-e[0])/(r[1]-r[0]);return e[0]+s*(t-r[0])}}function r1(r,e){return r>0&&r<e}var d5=(r,e=()=>{})=>{let t={left:r.scrollLeft,top:r.scrollTop},s=0;return function n(){const i={left:r.scrollLeft,top:r.scrollTop},a=t.left!==i.left,l=t.top!==i.top;(a||l)&&e(),t=i,s=window.requestAnimationFrame(n)}(),()=>window.cancelAnimationFrame(s)};function fc(r,e){const t=$t(r),s=p.useRef(0);return p.useEffect(()=>()=>window.clearTimeout(s.current),[]),p.useCallback(()=>{window.clearTimeout(s.current),s.current=window.setTimeout(t,e)},[t,e])}function ao(r,e){const t=$t(e);mr(()=>{let s=0;if(r){const n=new ResizeObserver(()=>{cancelAnimationFrame(s),s=window.requestAnimationFrame(t)});return n.observe(r),()=>{window.cancelAnimationFrame(s),n.unobserve(r)}}},[r,t])}var s1=Ww,u5=Kw,h5=Zw;const mc=p.forwardRef(({className:r,children:e,...t},s)=>o.jsxs(s1,{ref:s,className:se("relative overflow-hidden",r),...t,children:[o.jsx(u5,{className:"h-full w-full rounded-[inherit]",children:e}),o.jsx(n1,{}),o.jsx(h5,{})]}));mc.displayName=s1.displayName;const n1=p.forwardRef(({className:r,orientation:e="vertical",...t},s)=>o.jsx(sf,{ref:s,orientation:e,className:se("flex touch-none select-none transition-colors",e==="vertical"&&"h-full w-2.5 border-l border-l-transparent p-[1px]",e==="horizontal"&&"h-2.5 flex-col border-t border-t-transparent p-[1px]",r),...t,children:o.jsx(Jw,{className:"relative flex-1 rounded-full bg-border"})}));n1.displayName=sf.displayName;function f5({isEnabled:r,onToggle:e,isHost:t=!1,premiumFeatureType:s="chat"}){const[n,i]=p.useState(!1),[a,l]=p.useState(""),[d,u]=p.useState([]),[h,m]=p.useState(1),x=p.useRef(null),{user:g,isAuthenticated:v}=Rs(),{getColors:b}=Me();xr();const w=b(),k=(g==null?void 0:g.stripeSubscriptionId)||!1;p.useEffect(()=>{x.current&&(x.current.scrollTop=x.current.scrollHeight)},[d]);const T=D=>{if(D.preventDefault(),!a.trim()||!v||!k)return;const $={id:Date.now().toString(),username:(g==null?void 0:g.firstName)||"Anonymous",message:a.trim(),timestamp:new Date,isHost:t};u(S=>[...S,$]),l("")},_=D=>D.toLocaleTimeString([],{hour:"2-digit",minute:"2-digit"});if(!v)return null;const R=()=>{switch(s){case"chat":return"Premium Subscription is required to access the live chat features";case"submission":return"Premium Subscription is required to submit live song requests to the Spandex Salvation Radio";case"avatar":return"A Premium Subscription is required to enable the checkmark for your profile";case"premium_avatar":return"A Premium Subscription is required to use the rock music avatars";case"profile_badge":return"A Premium Subscription is required to display the premium badge on your profile";default:return"Premium Subscription is required to access this feature"}};return!k&&r&&v?o.jsx("div",{className:"fixed bottom-20 right-4 z-40",children:o.jsx(he,{className:"w-80 shadow-lg border-2 backdrop-blur-sm",style:{background:`linear-gradient(135deg, ${w.primary}15, ${w.primary}05)`,borderColor:w.primary},children:o.jsx(me,{className:"p-4",children:o.jsxs("div",{className:"text-center space-y-3",children:[o.jsx(Jo,{className:"w-8 h-8 mx-auto",style:{color:w.primary}}),o.jsx("h3",{className:"font-bold text-lg",style:{color:w.primary},children:"Premium Feature"}),o.jsx("p",{className:"text-sm text-foreground",children:R()}),o.jsxs("div",{className:"space-y-2",children:[o.jsx("p",{className:"text-xs text-muted-foreground",children:" Live Chat Access  Song Submissions  Exclusive Content"}),o.jsxs("div",{className:"flex gap-2",children:[o.jsx(q,{size:"sm",className:"flex-1",style:{backgroundColor:w.primary,color:w.primaryText||"white"},onClick:()=>window.location.href="/subscribe",children:"Upgrade Now"}),o.jsx(q,{size:"sm",variant:"outline",onClick:e,children:"Close"})]})]})]})})})}):r?o.jsxs(o.Fragment,{children:[!n&&o.jsxs(q,{onClick:()=>i(!0),className:"fixed bottom-4 right-4 z-50 bg-orange-500 hover:bg-orange-600 text-white rounded-full p-4 shadow-lg",children:[o.jsx(Jo,{className:"h-6 w-6"}),o.jsx(Vt,{className:"absolute -top-2 -right-2 bg-red-500 text-white text-xs px-1.5 py-0.5",children:h})]}),n&&o.jsx("div",{className:"fixed bottom-20 right-4 w-80 h-96 z-50",children:o.jsxs(he,{className:"h-full bg-dark-surface border-dark-border shadow-2xl",children:[o.jsx(it,{className:"pb-3",children:o.jsxs("div",{className:"flex items-center justify-between",children:[o.jsxs("div",{className:"flex items-center gap-2",children:[o.jsx(lt,{className:"text-sm font-semibold text-white",children:"Live Chat"}),o.jsxs(Vt,{variant:"secondary",className:"bg-green-500/10 text-green-400 text-xs",children:[o.jsx("div",{className:"w-2 h-2 bg-green-400 rounded-full mr-1"}),"LIVE"]})]}),o.jsxs("div",{className:"flex items-center gap-2",children:[o.jsxs("div",{className:"flex items-center gap-1 text-xs text-gray-400",children:[o.jsx(Pd,{className:"h-3 w-3"}),h]}),t&&o.jsx(q,{onClick:e,variant:"ghost",size:"sm",className:"text-gray-400 hover:text-orange-400 p-1",children:o.jsx(CT,{className:"h-4 w-4"})}),o.jsx(q,{onClick:()=>i(!1),variant:"ghost",size:"sm",className:"text-gray-400 hover:text-red-400 p-1",children:o.jsx(Mr,{className:"h-4 w-4"})})]})]})}),o.jsxs(me,{className:"p-0 flex flex-col h-full",children:[o.jsx(mc,{className:"flex-1 px-4",ref:x,children:o.jsx("div",{className:"space-y-3 py-2",children:(d||[]).length===0?o.jsxs("div",{className:"text-center text-gray-500 text-sm py-8",children:[o.jsx(Jo,{className:"h-8 w-8 mx-auto mb-2 text-gray-600"}),o.jsx("p",{children:"Welcome to the live chat!"}),o.jsx("p",{className:"text-xs",children:"Be respectful and enjoy the show."})]}):(d||[]).map(D=>o.jsxs("div",{className:"flex flex-col gap-1",children:[o.jsxs("div",{className:"flex items-center gap-2 text-xs",children:[o.jsxs("span",{className:`font-medium ${D.isHost?"text-orange-400":"text-gray-300"}`,children:[D.username,D.isHost&&o.jsx(Vt,{className:"ml-1 bg-orange-500/20 text-orange-400 text-xs px-1",children:"HOST"})]}),o.jsx("span",{className:"text-gray-500",children:_(D.timestamp)})]}),o.jsx("p",{className:"text-sm text-gray-200 bg-gray-800/30 rounded px-2 py-1",children:D.message})]},D.id))})}),o.jsx("div",{className:"p-4 border-t border-gray-700",children:o.jsxs("form",{onSubmit:T,className:"flex gap-2",children:[o.jsx(Ae,{value:a,onChange:D=>l(D.target.value),placeholder:"Type your message...",className:"flex-1 bg-gray-800 border-gray-600 text-white placeholder-gray-400 text-sm",maxLength:200}),o.jsx(q,{type:"submit",size:"sm",className:"bg-orange-500 hover:bg-orange-600 px-3",disabled:!a.trim(),children:o.jsx(hi,{className:"h-4 w-4"})})]})})]})]})})]}):null}function m5(){const[r,e]=p.useState({songTitle:"",artistName:"",albumTitle:"",releaseYear:void 0,submitterName:"",message:""}),[t,s]=p.useState(!1),{toast:n}=xr(),i=Al(),{user:a,isAuthenticated:l,isLoading:d}=Rs(),{getColors:u,currentTheme:h}=Me(),m=u(),{data:x=[]}=Ou({queryKey:["/api/submissions"]}),g=Ha({mutationFn:async R=>{if(!l){window.location.href="/#/login";return}if(!_){T(!0);return}return(await gs("POST","/api/submissions",R)).json()},onSuccess:()=>{n({title:"Submission Successful!",description:"Your song request has been submitted for review."}),e({songTitle:"",artistName:"",albumTitle:"",releaseYear:void 0,submitterName:"",message:""}),s(!1),i.invalidateQueries({queryKey:["/api/submissions"]})},onError:()=>{n({title:"Submission Failed",description:"Please check your information and try again.",variant:"destructive"})}}),v=R=>{if(R.preventDefault(),!t){n({title:"Terms Required",description:"Please agree to the terms and conditions.",variant:"destructive"});return}g.mutate(r)},b=(R,D)=>{e($=>({...$,[R]:D}))},w=R=>new Date(R).toLocaleDateString("en-US",{month:"short",day:"numeric"}),[k,T]=p.useState(!1),_=(a==null?void 0:a.stripeSubscriptionId)||!1;return o.jsx("section",{id:"submissions",className:"py-20 transition-colors duration-300",style:{backgroundColor:m.background},children:o.jsxs("div",{className:"max-w-4xl mx-auto px-4 sm:px-6 lg:px-8",children:[o.jsxs("div",{className:"text-center mb-12",children:[o.jsx("h2",{className:"font-orbitron font-bold text-3xl md:text-4xl mb-4",style:{color:h==="light-mode"?"#000000":m.text},children:"SUBMIT YOUR REQUESTS"}),o.jsx("p",{className:"text-lg",style:{color:m.textMuted},children:"Got a metal track that needs to be heard? Submit your requests and help shape our playlist."})]}),!l||!_?o.jsx("div",{className:"mt-6",children:o.jsxs("div",{className:"p-6 rounded-lg text-center transition-all duration-300 animate-in fade-in slide-in-from-top-4",style:{backgroundColor:`${m.primary}25`,borderColor:`${m.primary}30`,border:`1px solid ${m.primary}30`},children:[o.jsxs("div",{className:"flex items-center justify-center gap-2 mb-4",style:{color:m.primary},children:[o.jsx(lr,{className:"h-5 w-5"}),o.jsx("span",{className:"font-semibold",children:"Premium Feature - Paid Subscription Required"})]}),o.jsx("p",{className:"mb-6",style:{color:m.textMuted},children:"Song submissions are available exclusively to paid subscribers. Sign in and upgrade to submit your favorite tracks."}),o.jsxs("div",{className:"flex gap-4 justify-center",children:[o.jsx(q,{onClick:()=>{const R=new CustomEvent("openAuthModal",{detail:{mode:"login"}});window.dispatchEvent(R)},className:"px-6 py-3 rounded-full font-semibold transition-all duration-300 border-0",style:{backgroundColor:m.primary,color:m.primaryText||"white"},onMouseEnter:R=>{R.currentTarget.style.backgroundColor=m.primaryDark||m.primary,R.currentTarget.style.transform="scale(1.05)"},onMouseLeave:R=>{R.currentTarget.style.backgroundColor=m.primary,R.currentTarget.style.transform="scale(1)"},children:"Login"}),o.jsx(q,{onClick:()=>{var R;return(R=document.getElementById("subscribe"))==null?void 0:R.scrollIntoView({behavior:"smooth"})},variant:"outline",className:"px-6 py-3 rounded-full font-semibold transition-all duration-300",style:{borderColor:m.primary,color:m.primary,backgroundColor:"transparent"},onMouseEnter:R=>{R.currentTarget.style.backgroundColor=`${m.primary}10`,R.currentTarget.style.transform="scale(1.05)"},onMouseLeave:R=>{R.currentTarget.style.backgroundColor="transparent",R.currentTarget.style.transform="scale(1)"},children:"View Subscriptions"})]})]})}):o.jsx(he,{className:"bg-dark-surface border-dark-border mb-12",children:o.jsx(me,{className:"p-8",children:o.jsxs("form",{onSubmit:v,className:"space-y-6",children:[o.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[o.jsxs("div",{children:[o.jsx(_e,{htmlFor:"songTitle",className:"text-gray-300 font-semibold",children:"Song Title *"}),o.jsx(Ae,{id:"songTitle",value:r.songTitle,onChange:R=>b("songTitle",R.target.value),placeholder:"Enter song title",required:!0,className:"bg-dark-bg border-dark-border text-white placeholder-gray-500 focus:border-metal-orange"})]}),o.jsxs("div",{children:[o.jsx(_e,{htmlFor:"artistName",className:"text-gray-300 font-semibold",children:"Artist/Band *"}),o.jsx(Ae,{id:"artistName",value:r.artistName,onChange:R=>b("artistName",R.target.value),placeholder:"Enter artist name",required:!0,className:"bg-dark-bg border-dark-border text-white placeholder-gray-500 focus:border-metal-orange"})]})]}),o.jsxs("div",{children:[o.jsx(_e,{htmlFor:"submitterName",className:"text-gray-300 font-semibold",children:"Your Name"}),o.jsx(Ae,{id:"submitterName",value:r.submitterName||"",onChange:R=>b("submitterName",R.target.value),placeholder:"Enter your name (optional)",className:"bg-dark-bg border-dark-border text-white placeholder-gray-400/60 focus:border-metal-orange"})]}),o.jsxs("div",{children:[o.jsx(_e,{htmlFor:"message",className:"text-gray-300 font-semibold",children:"Additional Message"}),o.jsx(Ei,{id:"message",value:r.message||"",onChange:R=>b("message",R.target.value),placeholder:"Tell us why this song rocks or share any additional details...",rows:4,className:"bg-dark-bg border-dark-border text-white placeholder-gray-400/60 focus:border-metal-orange resize-none"})]}),o.jsxs("div",{className:"flex items-center space-x-2",children:[o.jsx(Hw,{id:"terms",checked:t,onCheckedChange:R=>s(R===!0),className:"border-dark-border"}),o.jsx(_e,{htmlFor:"terms",className:"text-gray-400 text-sm",children:"I agree that this submission follows metal music guidelines and community standards."})]}),o.jsxs(q,{type:"submit",disabled:g.isPending,className:"w-full md:w-auto bg-metal-orange hover:bg-orange-600 text-white px-8 py-3 rounded-full font-bold text-lg transition-all duration-300 animate-glow",children:[o.jsx(hi,{className:"mr-2 h-4 w-4"}),g.isPending?"SUBMITTING...":"SUBMIT REQUEST"]})]})})}),(x||[]).length>0&&l&&_&&o.jsxs("div",{className:"mt-16",children:[o.jsx("h3",{className:"font-bold text-xl mb-6",style:{color:"var(--color-primary)"},children:"Recent Submissions"}),o.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:(x||[]).slice(0,4).map(R=>o.jsx(he,{className:"bg-dark-surface border-dark-border",children:o.jsxs(me,{className:"p-4",children:[o.jsxs("div",{className:"flex items-start justify-between mb-2",children:[o.jsxs("div",{children:[o.jsx("h4",{className:"font-semibold",children:R.songTitle}),o.jsx("p",{className:"text-gray-400 text-sm",children:R.artistName})]}),o.jsx("span",{className:`text-xs px-2 py-1 rounded ${R.status==="approved"?"text-metal-orange bg-metal-orange/20":R.status==="rejected"?"text-metal-red bg-metal-red/20":"text-metal-gold bg-metal-gold/20"}`,children:R.status==="approved"?"Approved":R.status==="rejected"?"Rejected":"Pending"})]}),o.jsx("p",{className:"text-gray-500 text-xs",children:R.submitterName?`Submitted by: ${R.submitterName}`:"Anonymous"}),o.jsx("p",{className:"text-gray-500 text-xs",children:R.createdAt?w(R.createdAt):"Recently"})]})},R.id))})]}),k&&o.jsx(f5,{isEnabled:!0,onToggle:()=>T(!1),premiumFeatureType:"submission"})]})})}const p5={"01d":"clear-day.svg","01n":"clear-night.svg","02d":"partly-cloudy-day.svg","02n":"partly-cloudy-night.svg","03d":"cloudy-day-1.svg","03n":"cloudy-night-1.svg","04d":"cloudy-day-2.svg","04n":"cloudy-night-2.svg","09d":"rainy-1-day.svg","09n":"rainy-1-night.svg","10d":"rainy-2.svg","10n":"rainy-3.svg","11d":"thunder.svg","11n":"thunder.svg","13d":"snowy-1.svg","13n":"snowy-2.svg","50d":"fog.svg","50n":"fog.svg"},g5=()=>{const{isDarkMode:r,colors:e}=Me(),t=p.useRef(null);p.useRef(null);const[s,n]=p.useState(null),[i,a]=p.useState(null),[l,d]=p.useState(!1),[u,h]=p.useState(null),[m,x]=p.useState(!0),[g,v]=p.useState(!1),[b,w]=p.useState(!1),[k,T]=p.useState([]),[_,R]=p.useState(null),[D,$]=p.useState(!1),[S,I]=p.useState(null),[E,j]=p.useState({center:null,zoom:null}),C={googleMapsApiKey:"AIzaSyCBoEZeDucpm7p9OEDgaUGLzhn5HpItseQ",googleMapsSigningSecret:"",openWeatherApiKey:"bc23ce0746d4fc5c04d1d765589dadc5",googleMapsMapId:"spandex-salvation-radio-map"},A={activeListeners:42,countries:12,totalListeners:156},P=ne=>p5[ne]||"clear-day.svg",W=async(ne,H)=>{$(!0);try{const ie=await fetch(`/api/weather?lat=${ne}&lon=${H}`);if(ie.ok){const Q=await ie.json();R(Q)}else console.error("Failed to fetch weather data"),R({location:"Unknown Location",temperature:72,description:"Partly Cloudy",icon:"partly-cloudy-day",humidity:65,windSpeed:8,feelsLike:74})}catch(ie){console.error("Error fetching weather:",ie),R({location:"Unknown Location",temperature:72,description:"Partly Cloudy",icon:"partly-cloudy-day",humidity:65,windSpeed:8,feelsLike:74})}finally{$(!1)}},oe=p.useCallback(async()=>{if(!navigator.geolocation){console.log("Geolocation not supported");return}try{const ne=await new Promise((ie,Q)=>{navigator.geolocation.getCurrentPosition(ie,Q,{enableHighAccuracy:!0,timeout:1e4,maximumAge:3e5})}),H={lat:ne.coords.latitude,lng:ne.coords.longitude};h(H),I("granted"),await W(H.lat,H.lng),s&&(s.panTo(H),s.setZoom(10))}catch(ne){if(console.error("Error getting location:",ne),ne instanceof GeolocationPositionError)switch(ne.code){case ne.PERMISSION_DENIED:I("denied");break;case ne.POSITION_UNAVAILABLE:I("denied");break;case ne.TIMEOUT:I("denied");break}}},[s]);p.useEffect(()=>{const ne=localStorage.getItem("locationPermission");ne&&I(ne),oe()},[oe]);const U=(ne,H,ie,Q=!1)=>{const we=new google.maps.Marker({position:ne,map:ie,title:H,icon:{path:google.maps.SymbolPath.CIRCLE,scale:Q?6:5,fillColor:Q?"#4285F4":e.primary,fillOpacity:.7,strokeColor:Q?"#4285F4":e.primary,strokeWeight:0}});let Le=null;const Ce=`
      <div id="custom-infowindow" style="
        background: ${r?"rgba(24, 24, 27, 0.95)":"rgba(255, 255, 255, 0.95)"};
        color: ${r?"#f3f4f6":"#18181b"};
        border-radius: 20px;
        box-shadow: 0 20px 60px rgba(0,0,0,0.3), 0 8px 32px rgba(0,0,0,0.1);
        padding: 24px;
        min-width: 280px;
        max-width: 320px;
        font-family: 'Inter', sans-serif;
        position: relative;
        border: 2px solid ${Q?"#4285F4":e.primary};
        backdrop-filter: blur(20px);
        -webkit-backdrop-filter: blur(20px);
      ">
        <button id="close-infowindow" style="
          position: absolute;
          top: 16px;
          right: 16px;
          background: ${r?"rgba(255,255,255,0.1)":"rgba(0,0,0,0.1)"};
          border: none;
          color: ${r?"#f3f4f6":"#18181b"};
          font-size: 20px;
          cursor: pointer;
          opacity: 0.8;
          border-radius: 50%;
          width: 32px;
          height: 32px;
          display: flex;
          align-items: center;
          justify-content: center;
          transition: all 0.2s ease;
        ">&times;</button>
        <div style="
          font-weight: 700; 
          font-size: 18px; 
          margin-bottom: 8px; 
          display: flex; 
          align-items: center; 
          gap: 8px;
          color: ${Q?"#4285F4":e.primary};
        ">
          ${Q?" Your Location":" Active Listener"}
        </div>
        <div style="
          font-size: 16px; 
          margin-bottom: 8px;
          font-weight: 600;
          color: ${r?"#f3f4f6":"#18181b"};
        ">
          ${H}
        </div>
        <div style="
          font-size: 14px; 
          color: ${r?"#a1a1aa":"#6b7280"};
          background: ${r?"rgba(255,255,255,0.05)":"rgba(0,0,0,0.05)"};
          padding: 8px 12px;
          border-radius: 8px;
          font-family: 'Monaco', 'Menlo', monospace;
        ">
          Lat: ${ne.lat.toFixed(4)}, Lng: ${ne.lng.toFixed(4)}
        </div>
      </div>
    `,L=new google.maps.InfoWindow({content:Ce,maxWidth:320,disableAutoPan:!1});we.addListener("click",()=>{Le&&Le.close(),L.open(ie,we),Le=L,ie.panTo(ne),ie.setZoom(10),setTimeout(()=>{const re=document.getElementById("close-infowindow");re&&(re.onclick=()=>L.close(),re.onmouseenter=()=>{re.style.opacity="1",re.style.transform="scale(1.1)"},re.onmouseleave=()=>{re.style.opacity="0.8",re.style.transform="scale(1)"})},100)}),google.maps.event.addListener(ie,"click",()=>{Le&&Le.close()}),L.addListener("closeclick",()=>{Le=null});const K=new google.maps.OverlayView;return K.setMap(ie),K.onAdd=function(){const re=document.createElement("div");re.className="pulsing-marker-overlay",re.style.cssText=`
        position: absolute;
        width: ${Q?"20px":"16px"};
        height: ${Q?"20px":"16px"};
        border-radius: 50%;
        background: ${Q?"radial-gradient(circle, #4285F4 0%, #2563eb 100%)":`radial-gradient(circle, ${e.primary} 0%, ${e.primary}dd 100%)`};
        border: 0px solid transparent;
        animation: modernPulse 3s ease-in-out infinite;
        transform: translate(-50%, -50%);
        pointer-events: none;
        z-index: 10;
        opacity: 0.6;
        box-shadow: 0 0 20px 4px ${Q?"#4285F4":e.primary}40;
        backdrop-filter: blur(4px);
        -webkit-backdrop-filter: blur(4px);
      `,this.div_=re,this.getPanes().overlayImage.appendChild(re)},K.draw=function(){const ge=this.getProjection().fromLatLngToDivPixel(ne);ge&&(this.div_.style.left=ge.x+"px",this.div_.style.top=ge.y+"px")},{marker:we,infoWindow:L,pulsingOverlay:K}},X=()=>{if(s)if(l)E&&(s.setCenter(E.center),s.setZoom(E.zoom)),d(!1),setTimeout(()=>{s&&google.maps.event.trigger(s,"resize")},100);else{const ne=s.getCenter(),H=s.getZoom();j({center:ne,zoom:H}),d(!0),setTimeout(()=>{s&&google.maps.event.trigger(s,"resize")},100)}},xe=p.useCallback(()=>{if(b||s){console.log("Map initialization already in progress or map exists");return}const ne=t.current;if(!ne||!(C!=null&&C.googleMapsApiKey)){console.log("Map ref or API key not available");return}if(!(ne instanceof Element)){console.error("Map ref is not a valid DOM element");return}const H=ne.getBoundingClientRect();if(console.log("Map ref:",ne,"Bounding rect:",H),H.width<50||H.height<50){v(!0),x(!1);return}w(!0),console.log("Initializing Google Maps with API key:",C.googleMapsApiKey.substring(0,20)+"...");try{if(!window.google||!window.google.maps){console.error("Google Maps not properly loaded"),x(!1),w(!1);return}if(ne.querySelector(".gm-style")){console.log("Map already exists in this ref"),w(!1);return}const ie=new google.maps.Map(ne,{zoom:2,center:{lat:20,lng:0},mapTypeId:google.maps.MapTypeId.ROADMAP,disableDefaultUI:!0,zoomControl:!1,mapTypeControl:!1,scaleControl:!1,streetViewControl:!1,rotateControl:!1,fullscreenControl:!1,styles:r?[{elementType:"geometry",stylers:[{color:"#212121"}]},{elementType:"labels.icon",stylers:[{visibility:"off"}]},{elementType:"labels.text.fill",stylers:[{color:"#757575"}]},{elementType:"labels.text.stroke",stylers:[{color:"#212121"}]},{featureType:"administrative",elementType:"geometry",stylers:[{color:"#757575"}]},{featureType:"administrative.country",elementType:"labels.text.fill",stylers:[{color:"#9CA3AF"}]},{featureType:"administrative.land_parcel",stylers:[{visibility:"off"}]},{featureType:"administrative.locality",elementType:"labels.text.fill",stylers:[{color:"#BDBDBD"}]},{featureType:"poi",elementType:"labels.text.fill",stylers:[{color:"#757575"}]},{featureType:"poi.park",elementType:"geometry",stylers:[{color:"#181818"}]},{featureType:"poi.park",elementType:"labels.text.fill",stylers:[{color:"#616161"}]},{featureType:"poi.park",elementType:"labels.text.stroke",stylers:[{color:"#1B1B1B"}]},{featureType:"road",elementType:"geometry.fill",stylers:[{color:"#2C2C2C"}]},{featureType:"road",elementType:"labels.text.fill",stylers:[{color:"#8A8A8A"}]},{featureType:"road.arterial",elementType:"geometry",stylers:[{color:"#373737"}]},{featureType:"road.highway",elementType:"geometry",stylers:[{color:"#3C3C3C"}]},{featureType:"road.highway.controlled_access",elementType:"geometry",stylers:[{color:"#4E4E4E"}]},{featureType:"road.local",elementType:"labels.text.fill",stylers:[{color:"#616161"}]},{featureType:"transit",elementType:"labels.text.fill",stylers:[{color:"#757575"}]},{featureType:"water",elementType:"geometry",stylers:[{color:"#000000"}]},{featureType:"water",elementType:"labels.text.fill",stylers:[{color:"#3D3D3D"}]},{featureType:"poi.business",stylers:[{visibility:"off"}]},{featureType:"transit",elementType:"labels.icon",stylers:[{visibility:"off"}]},{featureType:"transit",elementType:"geometry",stylers:[{visibility:"off"}]}]:[{featureType:"poi.business",stylers:[{visibility:"off"}]},{featureType:"transit",elementType:"labels.icon",stylers:[{visibility:"off"}]},{featureType:"transit",elementType:"geometry",stylers:[{visibility:"off"}]}]}),Q=[{id:"1",city:"New York",country:"USA",lat:40.7128,lng:-74.006,isActive:!0},{id:"2",city:"London",country:"UK",lat:51.5074,lng:-.1278,isActive:!0},{id:"3",city:"Tokyo",country:"Japan",lat:35.6762,lng:139.6503,isActive:!0},{id:"4",city:"Berlin",country:"Germany",lat:52.52,lng:13.405,isActive:!0},{id:"5",city:"San Francisco",country:"USA",lat:37.7749,lng:-122.4194,isActive:!0}],we=[],Le=[],Ce=[];if(u){const L=U(u,"Your Location",ie,!0);we.push(L.marker),Le.push(L.infoWindow),Ce.push(L.pulsingOverlay)}Q.forEach(L=>{try{const K=U({lat:L.lat,lng:L.lng},`${L.city}, ${L.country}`,ie,!1);we.push(K.marker),Le.push(K.infoWindow),Ce.push(K.pulsingOverlay)}catch(K){console.error("Error creating marker:",K)}}),n(ie),T(we),x(!1),w(!1),console.log("Google Maps initialized successfully"),setTimeout(()=>{ie&&google.maps.event.trigger(ie,"resize")},100)}catch(ie){console.error("Error initializing map:",ie),x(!1),v(!0),w(!1)}},[C==null?void 0:C.googleMapsApiKey,r,e.primary,b,s,u]);p.useEffect(()=>{if(!(C!=null&&C.googleMapsApiKey)){console.log("No Google Maps API key available");return}if(window.google&&window.google.maps&&window.google.maps.Map){console.log("Google Maps already loaded, initializing..."),setTimeout(()=>{xe()},100);return}if(document.querySelector('script[src*="maps.googleapis.com"]')){console.log("Google Maps script already exists, waiting for load..."),setTimeout(()=>{window.google&&window.google.maps&&window.google.maps.Map&&xe()},1e3);return}console.log("Loading Google Maps script...");const H=document.createElement("script");H.src=`https://maps.googleapis.com/maps/api/js?key=${C.googleMapsApiKey}&libraries=places&callback=initMap&loading=async`,H.async=!0,H.defer=!0,window.initMap=()=>{console.log("Google Maps script loaded successfully"),setTimeout(()=>{xe()},200)},H.onerror=ie=>{console.error("Error loading Google Maps script:",ie),x(!1),v(!0),w(!1)},H.onload=()=>{console.log("Google Maps script loaded successfully"),setTimeout(()=>{window.google&&window.google.maps&&window.google.maps.Map?xe():(console.error("Google Maps API not available after script load"),v(!0),x(!1),w(!1))},500)},document.head.appendChild(H)},[C,xe]);const V=()=>{s&&s.setZoom((s.getZoom()||2)+1)},be=()=>{s&&s.setZoom((s.getZoom()||2)-1)},ce=()=>{s&&u?(s.setCenter(u),s.setZoom(10)):Se()},Ue=()=>{s&&(s.setCenter({lat:20,lng:0}),s.setZoom(2))},Se=async()=>{try{console.log("Requesting location permission...");const ne=await new Promise((ie,Q)=>{navigator.geolocation.getCurrentPosition(ie,Q,{enableHighAccuracy:!0,timeout:1e4,maximumAge:6e4})}),H={lat:ne.coords.latitude,lng:ne.coords.longitude};if(console.log("User location obtained:",H),h(H),s){console.log("Adding user location marker to existing map...");const ie=U(H,"Your Location",s,!0);T(Q=>[...Q,ie.marker])}}catch(ne){console.error("Error getting user location:",ne);const H={lat:40.7128,lng:-74.006};console.log("Setting default location for testing:",H),h(H)}};return C?g?o.jsx("div",{className:"h-96 flex items-center justify-center",children:o.jsxs("div",{className:"text-center",children:[o.jsx("p",{className:"text-red-500 font-bold mb-4",children:"Map temporarily unavailable"}),o.jsx("p",{className:"text-gray-600 mb-4",children:"Google Maps API key needs domain configuration"}),o.jsx("div",{className:"w-full h-64 bg-gray-200 rounded-lg flex items-center justify-center",children:o.jsxs("div",{className:"text-center",children:[o.jsx("div",{className:"w-16 h-16 bg-gray-400 rounded-full mb-4 flex items-center justify-center",children:o.jsx("span",{className:"text-2xl",children:""})}),o.jsx("p",{className:"text-gray-600",children:"Interactive Map"}),o.jsx("p",{className:"text-sm text-gray-500",children:"Configure API key domain restrictions"}),o.jsxs("div",{className:"mt-4 p-3 bg-blue-50 rounded-lg",children:[o.jsx("p",{className:"text-sm text-blue-800 font-medium",children:"To fix this:"}),o.jsxs("ol",{className:"text-xs text-blue-700 mt-2 text-left",children:[o.jsx("li",{children:"1. Go to Google Cloud Console"}),o.jsx("li",{children:"2. Navigate to APIs & Services > Credentials"}),o.jsx("li",{children:"3. Find your API key and click on it"}),o.jsx("li",{children:"4. Add these domains to restrictions:"}),o.jsx("li",{className:"ml-4",children:" https://spandex-salvation-radio.com/"}),o.jsx("li",{className:"ml-4",children:" https://www.spandex-salvation-radio.com/"}),o.jsx("li",{className:"ml-4",children:" https://spandex-salvation-radio-site.web.app/"})]})]})]})})]})}):o.jsxs(o.Fragment,{children:[!l&&o.jsx("section",{className:`${r?"bg-black":"bg-white"} py-20`,children:o.jsxs("div",{className:"max-w-full mx-auto px-4 sm:px-6 lg:px-8",children:[o.jsxs("div",{className:"text-center mb-16",children:[o.jsx("h2",{className:`font-orbitron font-black text-3xl md:text-4xl mb-4 ${r?"text-white":"text-black"}`,children:"GLOBAL LISTENERS"}),o.jsx("p",{className:`text-lg font-semibold ${r?"text-gray-400":"text-gray-600"} mb-4`,children:"See where metal fans are tuning in from around the world in real-time."}),o.jsxs("div",{className:"mb-4",children:[o.jsxs("div",{className:"flex items-center justify-center gap-2 mb-2",children:[o.jsx(Xo,{className:`w-5 h-5 ${r?"text-gray-400":"text-gray-600"}`}),o.jsx("span",{className:`text-lg font-semibold ${r?"text-gray-300":"text-gray-700"}`,children:(_==null?void 0:_.location)||"Loading location..."}),S==="denied"&&o.jsx(q,{onClick:Se,size:"sm",className:"ml-2 bg-blue-600 hover:bg-blue-700 text-white text-xs",children:"Enable Location"})]}),o.jsxs("div",{className:"flex items-center justify-center gap-3",children:[_&&o.jsx("div",{className:"flex items-center justify-center",children:D?o.jsx(u0,{className:"w-8 h-8 animate-spin text-gray-400"}):o.jsx("img",{src:`/animated_weather_icons/${P(_.icon)}`,alt:_.description,className:"w-12 h-12 object-contain animate-pulse",style:{filter:r?"brightness(0.8)":"none"}})}),o.jsxs("div",{className:"flex flex-col items-center",children:[o.jsx("span",{className:`text-lg font-bold ${r?"text-white":"text-black"}`,children:_?`${Math.round(_.temperature)}F`:"Loading..."}),o.jsx("span",{className:`text-sm ${r?"text-gray-400":"text-gray-600"}`,children:(_==null?void 0:_.description)||"Loading weather..."})]})]})]})]}),o.jsxs("div",{className:"relative w-full h-96 rounded-xl overflow-hidden shadow-2xl border-2",style:{borderColor:e.primary},children:[m&&o.jsx("div",{className:"absolute inset-0 flex items-center justify-center bg-gray-800 bg-opacity-50 z-20",children:o.jsxs("div",{className:"text-center",children:[o.jsx("div",{className:"animate-spin w-8 h-8 border-4 border-orange-500 border-t-transparent rounded-full mx-auto mb-2"}),o.jsx("p",{className:"text-white font-semibold",children:"Loading Map..."})]})}),o.jsx("div",{ref:t,className:`${l?"fixed inset-0 z-[99999] h-screen":"h-96 rounded-xl"} transition-all duration-500 ease-in-out`,style:{backgroundColor:r?"#1f2937":"#f9fafb",overflow:"hidden"}}),o.jsx(q,{onClick:X,size:"sm",className:"absolute top-4 left-4 z-10 bg-gray-800 hover:bg-gray-700 text-white border-0 shadow-lg transition-all duration-300 hover:scale-105",children:l?o.jsxs(o.Fragment,{children:[o.jsx(IT,{className:"w-4 h-4 mr-1"}),"Close"]}):o.jsxs(o.Fragment,{children:[o.jsx(NT,{className:"w-4 h-4 mr-1"}),"Expand"]})}),o.jsxs("div",{className:"absolute top-4 right-4 z-10 flex flex-col gap-2",children:[o.jsx(q,{onClick:V,size:"sm",className:"p-2 bg-gray-800 hover:bg-gray-700 text-white border-0 shadow-lg transition-all duration-300 hover:scale-105",children:o.jsx(Rm,{className:"w-4 h-4"})}),o.jsx(q,{onClick:be,size:"sm",className:"p-2 bg-gray-800 hover:bg-gray-700 text-white border-0 shadow-lg transition-all duration-300 hover:scale-105",children:o.jsx(Mm,{className:"w-4 h-4"})}),o.jsx(q,{onClick:ce,size:"sm",className:"p-2 bg-gray-800 hover:bg-gray-700 text-white border-0 shadow-lg transition-all duration-300 hover:scale-105",children:o.jsx(Xo,{className:"w-4 h-4"})}),o.jsx(q,{onClick:Ue,size:"sm",className:"p-2 bg-gray-800 hover:bg-gray-700 text-white border-0 shadow-lg transition-all duration-300 hover:scale-105",children:o.jsx(Sm,{className:"w-4 h-4"})})]})]}),o.jsx("div",{className:"w-full max-w-4xl mx-auto mb-8 mt-8",children:o.jsxs(he,{className:"bg-zinc-900/50 dark:bg-zinc-900/50 backdrop-blur-xl border-zinc-800/50 dark:border-zinc-800/50 shadow-2xl",children:[o.jsx(it,{className:"text-center",children:o.jsx(lt,{className:"text-2xl font-bold text-white drop-shadow-md",children:"Live Statistics"})}),o.jsx(me,{className:"py-4",children:o.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-1 space-y-0",children:[o.jsxs("div",{className:"flex-1 text-center",children:[o.jsx("div",{className:"text-sm font-medium text-zinc-400 mb-1",children:"Active Listeners"}),o.jsx("div",{className:"text-3xl md:text-4xl lg:text-5xl font-bold text-white drop-shadow-md",children:A==null?void 0:A.activeListeners})]}),o.jsxs("div",{className:"flex-1 text-center",children:[o.jsx("div",{className:"text-sm font-medium text-zinc-400 mb-1",children:"Countries"}),o.jsx("div",{className:"text-3xl md:text-4xl lg:text-5xl font-bold text-white drop-shadow-md",children:A==null?void 0:A.countries})]}),o.jsxs("div",{className:"flex-1 text-center",children:[o.jsx("div",{className:"text-sm font-medium text-zinc-400 mb-1",children:"Total Listeners"}),o.jsx("div",{className:"text-3xl md:text-4xl lg:text-5xl font-bold text-white drop-shadow-md",children:A==null?void 0:A.totalListeners})]})]})})]})}),o.jsx("div",{className:"w-full max-w-4xl mx-auto",children:o.jsxs(he,{className:"bg-zinc-900/50 dark:bg-zinc-900/50 backdrop-blur-xl border-zinc-800/50 dark:border-zinc-800/50 shadow-2xl",children:[o.jsx(it,{children:o.jsx(lt,{className:"text-2xl font-bold text-white drop-shadow-md",children:"Active Locations"})}),o.jsx(me,{children:o.jsx("div",{className:"space-y-4",children:["New York, USA","London, UK","Tokyo, Japan","Berlin, Germany","San Francisco, USA","Sydney, Australia"].map((ne,H)=>o.jsxs("div",{className:"flex items-center justify-between p-4 bg-zinc-800/30 dark:bg-zinc-800/30 rounded-lg border border-zinc-700/50 dark:border-zinc-700/50",children:[o.jsxs("div",{className:"flex items-center space-x-3",children:[o.jsx("div",{className:"w-3 h-3 rounded-full animate-pulse",style:{backgroundColor:e.primary,boxShadow:`0 0 4px ${e.primary}`}}),o.jsx("span",{className:"text-white font-medium",children:ne})]}),o.jsx("div",{className:"text-lg font-bold text-white",style:{textShadow:`0 0 4px ${e.primary}`},children:Math.floor(Math.random()*50)+1})]},H))})})]})})]})}),l&&o.jsxs("div",{className:"fixed inset-0 z-[99999] bg-black animate-in fade-in duration-300",children:[o.jsx("div",{className:"absolute top-0 left-0 right-0 z-[100000] bg-black/90 backdrop-blur-md border-b border-gray-700 animate-in slide-in-from-top duration-300",children:o.jsx("div",{className:"flex items-center justify-between px-6 py-4",children:o.jsxs("div",{className:"flex items-center gap-4",children:[o.jsx("h2",{className:"text-xl font-bold text-white",children:"Live Interactive Map"}),_&&o.jsx("div",{className:"flex items-center gap-3 bg-gray-900/80 rounded-lg px-4 py-2",children:o.jsxs("div",{className:"flex items-center gap-2",children:[o.jsx("img",{src:`/animated_weather_icons/${P(_.icon)}`,alt:_.description,className:"w-6 h-6 object-contain"}),o.jsxs("div",{className:"text-sm",children:[o.jsx("span",{className:"text-white font-medium",children:_.location}),o.jsxs("span",{className:"text-gray-300 ml-2",children:[Math.round(_.temperature),"F"]})]})]})})]})})}),o.jsxs("div",{className:"absolute top-20 right-6 z-[100001] flex flex-col gap-2 animate-in slide-in-from-right duration-300",children:[o.jsx(q,{onClick:V,size:"sm",className:"p-3 bg-gray-800 hover:bg-gray-700 text-white border-0 shadow-xl scale-110 transition-all duration-300 hover:scale-125",children:o.jsx(Rm,{className:"w-5 h-5"})}),o.jsx(q,{onClick:be,size:"sm",className:"p-3 bg-gray-800 hover:bg-gray-700 text-white border-0 shadow-xl scale-110 transition-all duration-300 hover:scale-125",children:o.jsx(Mm,{className:"w-5 h-5"})}),o.jsx(q,{onClick:ce,size:"sm",className:"p-3 bg-gray-800 hover:bg-gray-700 text-white border-0 shadow-xl scale-110 transition-all duration-300 hover:scale-125",children:o.jsx(Xo,{className:"w-5 h-5"})}),o.jsx(q,{onClick:Ue,size:"sm",className:"p-3 bg-gray-800 hover:bg-gray-700 text-white border-0 shadow-xl scale-110 transition-all duration-300 hover:scale-125",children:o.jsx(Sm,{className:"w-5 h-5"})})]})]})]}):o.jsx("div",{className:"h-96 flex items-center justify-center",children:o.jsx("div",{className:"text-center",children:o.jsx("p",{className:r?"text-white":"text-black",children:"Loading map..."})})})};var x5=[" ","Enter","ArrowUp","ArrowDown"],y5=[" ","Enter"],dn="Select",[pc,gc,b5]=Yg(dn),[vo,z6]=fn(dn,[b5,lo]),xc=lo(),[v5,Ds]=vo(dn),[w5,_5]=vo(dn),o1=r=>{const{__scopeSelect:e,children:t,open:s,defaultOpen:n,onOpenChange:i,value:a,defaultValue:l,onValueChange:d,dir:u,name:h,autoComplete:m,disabled:x,required:g,form:v}=r,b=xc(e),[w,k]=p.useState(null),[T,_]=p.useState(null),[R,D]=p.useState(!1),$=mx(u),[S,I]=Kn({prop:s,defaultProp:n??!1,onChange:i,caller:dn}),[E,j]=Kn({prop:a,defaultProp:l,onChange:d,caller:dn}),C=p.useRef(null),A=w?v||!!w.closest("form"):!0,[P,W]=p.useState(new Set),oe=Array.from(P).map(U=>U.props.value).join(";");return o.jsx(Eu,{...b,children:o.jsxs(v5,{required:g,scope:e,trigger:w,onTriggerChange:k,valueNode:T,onValueNodeChange:_,valueNodeHasChildren:R,onValueNodeHasChildrenChange:D,contentId:ji(),value:E,onValueChange:j,open:S,onOpenChange:I,dir:$,triggerPointerDownPosRef:C,disabled:x,children:[o.jsx(pc.Provider,{scope:e,children:o.jsx(w5,{scope:r.__scopeSelect,onNativeOptionAdd:p.useCallback(U=>{W(X=>new Set(X).add(U))},[]),onNativeOptionRemove:p.useCallback(U=>{W(X=>{const xe=new Set(X);return xe.delete(U),xe})},[]),children:t})}),A?o.jsxs(k1,{"aria-hidden":!0,required:g,tabIndex:-1,name:h,autoComplete:m,value:E,onChange:U=>j(U.target.value),disabled:x,form:v,children:[E===void 0?o.jsx("option",{value:""}):null,Array.from(P)]},oe):null]})})};o1.displayName=dn;var i1="SelectTrigger",a1=p.forwardRef((r,e)=>{const{__scopeSelect:t,disabled:s=!1,...n}=r,i=xc(t),a=Ds(i1,t),l=a.disabled||s,d=$e(e,a.onTriggerChange),u=gc(t),h=p.useRef("touch"),[m,x,g]=A1(b=>{const w=u().filter(_=>!_.disabled),k=w.find(_=>_.value===a.value),T=P1(w,b,k);T!==void 0&&a.onValueChange(T.value)}),v=b=>{l||(a.onOpenChange(!0),g()),b&&(a.triggerPointerDownPosRef.current={x:Math.round(b.pageX),y:Math.round(b.pageY)})};return o.jsx(Cl,{asChild:!0,...i,children:o.jsx(Pe.button,{type:"button",role:"combobox","aria-controls":a.contentId,"aria-expanded":a.open,"aria-required":a.required,"aria-autocomplete":"none",dir:a.dir,"data-state":a.open?"open":"closed",disabled:l,"data-disabled":l?"":void 0,"data-placeholder":j1(a.value)?"":void 0,...n,ref:d,onClick:ue(n.onClick,b=>{b.currentTarget.focus(),h.current!=="mouse"&&v(b)}),onPointerDown:ue(n.onPointerDown,b=>{h.current=b.pointerType;const w=b.target;w.hasPointerCapture(b.pointerId)&&w.releasePointerCapture(b.pointerId),b.button===0&&b.ctrlKey===!1&&b.pointerType==="mouse"&&(v(b),b.preventDefault())}),onKeyDown:ue(n.onKeyDown,b=>{const w=m.current!=="";!(b.ctrlKey||b.altKey||b.metaKey)&&b.key.length===1&&x(b.key),!(w&&b.key===" ")&&x5.includes(b.key)&&(v(),b.preventDefault())})})})});a1.displayName=i1;var l1="SelectValue",c1=p.forwardRef((r,e)=>{const{__scopeSelect:t,className:s,style:n,children:i,placeholder:a="",...l}=r,d=Ds(l1,t),{onValueNodeHasChildrenChange:u}=d,h=i!==void 0,m=$e(e,d.onValueNodeChange);return mr(()=>{u(h)},[u,h]),o.jsx(Pe.span,{...l,ref:m,style:{pointerEvents:"none"},children:j1(d.value)?o.jsx(o.Fragment,{children:a}):i})});c1.displayName=l1;var T5="SelectIcon",d1=p.forwardRef((r,e)=>{const{__scopeSelect:t,children:s,...n}=r;return o.jsx(Pe.span,{"aria-hidden":!0,...n,ref:e,children:s||""})});d1.displayName=T5;var E5="SelectPortal",u1=r=>o.jsx(wu,{asChild:!0,...r});u1.displayName=E5;var un="SelectContent",h1=p.forwardRef((r,e)=>{const t=Ds(un,r.__scopeSelect),[s,n]=p.useState();if(mr(()=>{n(new DocumentFragment)},[]),!t.open){const i=s;return i?vu.createPortal(o.jsx(f1,{scope:r.__scopeSelect,children:o.jsx(pc.Slot,{scope:r.__scopeSelect,children:o.jsx("div",{children:r.children})})}),i):null}return o.jsx(m1,{...r,ref:e})});h1.displayName=un;var qt=10,[f1,Os]=vo(un),N5="SelectContentImpl",C5=ux("SelectContent.RemoveScroll"),m1=p.forwardRef((r,e)=>{const{__scopeSelect:t,position:s="item-aligned",onCloseAutoFocus:n,onEscapeKeyDown:i,onPointerDownOutside:a,side:l,sideOffset:d,align:u,alignOffset:h,arrowPadding:m,collisionBoundary:x,collisionPadding:g,sticky:v,hideWhenDetached:b,avoidCollisions:w,...k}=r,T=Ds(un,t),[_,R]=p.useState(null),[D,$]=p.useState(null),S=$e(e,Q=>R(Q)),[I,E]=p.useState(null),[j,C]=p.useState(null),A=gc(t),[P,W]=p.useState(!1),oe=p.useRef(!1);p.useEffect(()=>{if(_)return cx(_)},[_]),hx();const U=p.useCallback(Q=>{const[we,...Le]=A().map(K=>K.ref.current),[Ce]=Le.slice(-1),L=document.activeElement;for(const K of Q)if(K===L||(K==null||K.scrollIntoView({block:"nearest"}),K===we&&D&&(D.scrollTop=0),K===Ce&&D&&(D.scrollTop=D.scrollHeight),K==null||K.focus(),document.activeElement!==L))return},[A,D]),X=p.useCallback(()=>U([I,_]),[U,I,_]);p.useEffect(()=>{P&&X()},[P,X]);const{onOpenChange:xe,triggerPointerDownPosRef:V}=T;p.useEffect(()=>{if(_){let Q={x:0,y:0};const we=Ce=>{var L,K;Q={x:Math.abs(Math.round(Ce.pageX)-(((L=V.current)==null?void 0:L.x)??0)),y:Math.abs(Math.round(Ce.pageY)-(((K=V.current)==null?void 0:K.y)??0))}},Le=Ce=>{Q.x<=10&&Q.y<=10?Ce.preventDefault():_.contains(Ce.target)||xe(!1),document.removeEventListener("pointermove",we),V.current=null};return V.current!==null&&(document.addEventListener("pointermove",we),document.addEventListener("pointerup",Le,{capture:!0,once:!0})),()=>{document.removeEventListener("pointermove",we),document.removeEventListener("pointerup",Le,{capture:!0})}}},[_,xe,V]),p.useEffect(()=>{const Q=()=>xe(!1);return window.addEventListener("blur",Q),window.addEventListener("resize",Q),()=>{window.removeEventListener("blur",Q),window.removeEventListener("resize",Q)}},[xe]);const[be,ce]=A1(Q=>{const we=A().filter(L=>!L.disabled),Le=we.find(L=>L.ref.current===document.activeElement),Ce=P1(we,Q,Le);Ce&&setTimeout(()=>Ce.ref.current.focus())}),Ue=p.useCallback((Q,we,Le)=>{const Ce=!oe.current&&!Le;(T.value!==void 0&&T.value===we||Ce)&&(E(Q),Ce&&(oe.current=!0))},[T.value]),Se=p.useCallback(()=>_==null?void 0:_.focus(),[_]),ne=p.useCallback((Q,we,Le)=>{const Ce=!oe.current&&!Le;(T.value!==void 0&&T.value===we||Ce)&&C(Q)},[T.value]),H=s==="popper"?pu:p1,ie=H===pu?{side:l,sideOffset:d,align:u,alignOffset:h,arrowPadding:m,collisionBoundary:x,collisionPadding:g,sticky:v,hideWhenDetached:b,avoidCollisions:w}:{};return o.jsx(f1,{scope:t,content:_,viewport:D,onViewportChange:$,itemRefCallback:Ue,selectedItem:I,onItemLeave:Se,itemTextRefCallback:ne,focusSelectedItem:X,selectedItemText:j,position:s,isPositioned:P,searchRef:be,children:o.jsx(dx,{as:C5,allowPinchZoom:!0,children:o.jsx(fx,{asChild:!0,trapped:T.open,onMountAutoFocus:Q=>{Q.preventDefault()},onUnmountAutoFocus:ue(n,Q=>{var we;(we=T.trigger)==null||we.focus({preventScroll:!0}),Q.preventDefault()}),children:o.jsx(_u,{asChild:!0,disableOutsidePointerEvents:!0,onEscapeKeyDown:i,onPointerDownOutside:a,onFocusOutside:Q=>Q.preventDefault(),onDismiss:()=>T.onOpenChange(!1),children:o.jsx(H,{role:"listbox",id:T.contentId,"data-state":T.open?"open":"closed",dir:T.dir,onContextMenu:Q=>Q.preventDefault(),...k,...ie,onPlaced:()=>W(!0),ref:S,style:{display:"flex",flexDirection:"column",outline:"none",...k.style},onKeyDown:ue(k.onKeyDown,Q=>{const we=Q.ctrlKey||Q.altKey||Q.metaKey;if(Q.key==="Tab"&&Q.preventDefault(),!we&&Q.key.length===1&&ce(Q.key),["ArrowUp","ArrowDown","Home","End"].includes(Q.key)){let Ce=A().filter(L=>!L.disabled).map(L=>L.ref.current);if(["ArrowUp","End"].includes(Q.key)&&(Ce=Ce.slice().reverse()),["ArrowUp","ArrowDown"].includes(Q.key)){const L=Q.target,K=Ce.indexOf(L);Ce=Ce.slice(K+1)}setTimeout(()=>U(Ce)),Q.preventDefault()}})})})})})})});m1.displayName=N5;var I5="SelectItemAlignedPosition",p1=p.forwardRef((r,e)=>{const{__scopeSelect:t,onPlaced:s,...n}=r,i=Ds(un,t),a=Os(un,t),[l,d]=p.useState(null),[u,h]=p.useState(null),m=$e(e,S=>h(S)),x=gc(t),g=p.useRef(!1),v=p.useRef(!0),{viewport:b,selectedItem:w,selectedItemText:k,focusSelectedItem:T}=a,_=p.useCallback(()=>{if(i.trigger&&i.valueNode&&l&&u&&b&&w&&k){const S=i.trigger.getBoundingClientRect(),I=u.getBoundingClientRect(),E=i.valueNode.getBoundingClientRect(),j=k.getBoundingClientRect();if(i.dir!=="rtl"){const L=j.left-I.left,K=E.left-L,re=S.left-K,ge=S.width+re,ke=Math.max(ge,I.width),We=window.innerWidth-qt,Pt=mu(K,[qt,Math.max(qt,We-ke)]);l.style.minWidth=ge+"px",l.style.left=Pt+"px"}else{const L=I.right-j.right,K=window.innerWidth-E.right-L,re=window.innerWidth-S.right-K,ge=S.width+re,ke=Math.max(ge,I.width),We=window.innerWidth-qt,Pt=mu(K,[qt,Math.max(qt,We-ke)]);l.style.minWidth=ge+"px",l.style.right=Pt+"px"}const C=x(),A=window.innerHeight-qt*2,P=b.scrollHeight,W=window.getComputedStyle(u),oe=parseInt(W.borderTopWidth,10),U=parseInt(W.paddingTop,10),X=parseInt(W.borderBottomWidth,10),xe=parseInt(W.paddingBottom,10),V=oe+U+P+xe+X,be=Math.min(w.offsetHeight*5,V),ce=window.getComputedStyle(b),Ue=parseInt(ce.paddingTop,10),Se=parseInt(ce.paddingBottom,10),ne=S.top+S.height/2-qt,H=A-ne,ie=w.offsetHeight/2,Q=w.offsetTop+ie,we=oe+U+Q,Le=V-we;if(we<=ne){const L=C.length>0&&w===C[C.length-1].ref.current;l.style.bottom="0px";const K=u.clientHeight-b.offsetTop-b.offsetHeight,re=Math.max(H,ie+(L?Se:0)+K+X),ge=we+re;l.style.height=ge+"px"}else{const L=C.length>0&&w===C[0].ref.current;l.style.top="0px";const re=Math.max(ne,oe+b.offsetTop+(L?Ue:0)+ie)+Le;l.style.height=re+"px",b.scrollTop=we-ne+b.offsetTop}l.style.margin=`${qt}px 0`,l.style.minHeight=be+"px",l.style.maxHeight=A+"px",s==null||s(),requestAnimationFrame(()=>g.current=!0)}},[x,i.trigger,i.valueNode,l,u,b,w,k,i.dir,s]);mr(()=>_(),[_]);const[R,D]=p.useState();mr(()=>{u&&D(window.getComputedStyle(u).zIndex)},[u]);const $=p.useCallback(S=>{S&&v.current===!0&&(_(),T==null||T(),v.current=!1)},[_,T]);return o.jsx(k5,{scope:t,contentWrapper:l,shouldExpandOnScrollRef:g,onScrollButtonChange:$,children:o.jsx("div",{ref:d,style:{display:"flex",flexDirection:"column",position:"fixed",zIndex:R},children:o.jsx(Pe.div,{...n,ref:m,style:{boxSizing:"border-box",maxHeight:"100%",...n.style}})})})});p1.displayName=I5;var S5="SelectPopperPosition",pu=p.forwardRef((r,e)=>{const{__scopeSelect:t,align:s="start",collisionPadding:n=qt,...i}=r,a=xc(t);return o.jsx(Tu,{...a,...i,ref:e,align:s,collisionPadding:n,style:{boxSizing:"border-box",...i.style,"--radix-select-content-transform-origin":"var(--radix-popper-transform-origin)","--radix-select-content-available-width":"var(--radix-popper-available-width)","--radix-select-content-available-height":"var(--radix-popper-available-height)","--radix-select-trigger-width":"var(--radix-popper-anchor-width)","--radix-select-trigger-height":"var(--radix-popper-anchor-height)"}})});pu.displayName=S5;var[k5,af]=vo(un,{}),gu="SelectViewport",g1=p.forwardRef((r,e)=>{const{__scopeSelect:t,nonce:s,...n}=r,i=Os(gu,t),a=af(gu,t),l=$e(e,i.onViewportChange),d=p.useRef(0);return o.jsxs(o.Fragment,{children:[o.jsx("style",{dangerouslySetInnerHTML:{__html:"[data-radix-select-viewport]{scrollbar-width:none;-ms-overflow-style:none;-webkit-overflow-scrolling:touch;}[data-radix-select-viewport]::-webkit-scrollbar{display:none}"},nonce:s}),o.jsx(pc.Slot,{scope:t,children:o.jsx(Pe.div,{"data-radix-select-viewport":"",role:"presentation",...n,ref:l,style:{position:"relative",flex:1,overflow:"hidden auto",...n.style},onScroll:ue(n.onScroll,u=>{const h=u.currentTarget,{contentWrapper:m,shouldExpandOnScrollRef:x}=a;if(x!=null&&x.current&&m){const g=Math.abs(d.current-h.scrollTop);if(g>0){const v=window.innerHeight-qt*2,b=parseFloat(m.style.minHeight),w=parseFloat(m.style.height),k=Math.max(b,w);if(k<v){const T=k+g,_=Math.min(v,T),R=T-_;m.style.height=_+"px",m.style.bottom==="0px"&&(h.scrollTop=R>0?R:0,m.style.justifyContent="flex-end")}}}d.current=h.scrollTop})})})]})});g1.displayName=gu;var x1="SelectGroup",[j5,A5]=vo(x1),P5=p.forwardRef((r,e)=>{const{__scopeSelect:t,...s}=r,n=ji();return o.jsx(j5,{scope:t,id:n,children:o.jsx(Pe.div,{role:"group","aria-labelledby":n,...s,ref:e})})});P5.displayName=x1;var y1="SelectLabel",b1=p.forwardRef((r,e)=>{const{__scopeSelect:t,...s}=r,n=A5(y1,t);return o.jsx(Pe.div,{id:n.id,...s,ref:e})});b1.displayName=y1;var El="SelectItem",[R5,v1]=vo(El),w1=p.forwardRef((r,e)=>{const{__scopeSelect:t,value:s,disabled:n=!1,textValue:i,...a}=r,l=Ds(El,t),d=Os(El,t),u=l.value===s,[h,m]=p.useState(i??""),[x,g]=p.useState(!1),v=$e(e,T=>{var _;return(_=d.itemRefCallback)==null?void 0:_.call(d,T,s,n)}),b=ji(),w=p.useRef("touch"),k=()=>{n||(l.onValueChange(s),l.onOpenChange(!1))};if(s==="")throw new Error("A <Select.Item /> must have a value prop that is not an empty string. This is because the Select value can be set to an empty string to clear the selection and show the placeholder.");return o.jsx(R5,{scope:t,value:s,disabled:n,textId:b,isSelected:u,onItemTextChange:p.useCallback(T=>{m(_=>_||((T==null?void 0:T.textContent)??"").trim())},[]),children:o.jsx(pc.ItemSlot,{scope:t,value:s,disabled:n,textValue:h,children:o.jsx(Pe.div,{role:"option","aria-labelledby":b,"data-highlighted":x?"":void 0,"aria-selected":u&&x,"data-state":u?"checked":"unchecked","aria-disabled":n||void 0,"data-disabled":n?"":void 0,tabIndex:n?void 0:-1,...a,ref:v,onFocus:ue(a.onFocus,()=>g(!0)),onBlur:ue(a.onBlur,()=>g(!1)),onClick:ue(a.onClick,()=>{w.current!=="mouse"&&k()}),onPointerUp:ue(a.onPointerUp,()=>{w.current==="mouse"&&k()}),onPointerDown:ue(a.onPointerDown,T=>{w.current=T.pointerType}),onPointerMove:ue(a.onPointerMove,T=>{var _;w.current=T.pointerType,n?(_=d.onItemLeave)==null||_.call(d):w.current==="mouse"&&T.currentTarget.focus({preventScroll:!0})}),onPointerLeave:ue(a.onPointerLeave,T=>{var _;T.currentTarget===document.activeElement&&((_=d.onItemLeave)==null||_.call(d))}),onKeyDown:ue(a.onKeyDown,T=>{var R;((R=d.searchRef)==null?void 0:R.current)!==""&&T.key===" "||(y5.includes(T.key)&&k(),T.key===" "&&T.preventDefault())})})})})});w1.displayName=El;var Qo="SelectItemText",_1=p.forwardRef((r,e)=>{const{__scopeSelect:t,className:s,style:n,...i}=r,a=Ds(Qo,t),l=Os(Qo,t),d=v1(Qo,t),u=_5(Qo,t),[h,m]=p.useState(null),x=$e(e,k=>m(k),d.onItemTextChange,k=>{var T;return(T=l.itemTextRefCallback)==null?void 0:T.call(l,k,d.value,d.disabled)}),g=h==null?void 0:h.textContent,v=p.useMemo(()=>o.jsx("option",{value:d.value,disabled:d.disabled,children:g},d.value),[d.disabled,d.value,g]),{onNativeOptionAdd:b,onNativeOptionRemove:w}=u;return mr(()=>(b(v),()=>w(v)),[b,w,v]),o.jsxs(o.Fragment,{children:[o.jsx(Pe.span,{id:d.textId,...i,ref:x}),d.isSelected&&a.valueNode&&!a.valueNodeHasChildren?vu.createPortal(i.children,a.valueNode):null]})});_1.displayName=Qo;var T1="SelectItemIndicator",E1=p.forwardRef((r,e)=>{const{__scopeSelect:t,...s}=r;return v1(T1,t).isSelected?o.jsx(Pe.span,{"aria-hidden":!0,...s,ref:e}):null});E1.displayName=T1;var xu="SelectScrollUpButton",N1=p.forwardRef((r,e)=>{const t=Os(xu,r.__scopeSelect),s=af(xu,r.__scopeSelect),[n,i]=p.useState(!1),a=$e(e,s.onScrollButtonChange);return mr(()=>{if(t.viewport&&t.isPositioned){let l=function(){const u=d.scrollTop>0;i(u)};const d=t.viewport;return l(),d.addEventListener("scroll",l),()=>d.removeEventListener("scroll",l)}},[t.viewport,t.isPositioned]),n?o.jsx(I1,{...r,ref:a,onAutoScroll:()=>{const{viewport:l,selectedItem:d}=t;l&&d&&(l.scrollTop=l.scrollTop-d.offsetHeight)}}):null});N1.displayName=xu;var yu="SelectScrollDownButton",C1=p.forwardRef((r,e)=>{const t=Os(yu,r.__scopeSelect),s=af(yu,r.__scopeSelect),[n,i]=p.useState(!1),a=$e(e,s.onScrollButtonChange);return mr(()=>{if(t.viewport&&t.isPositioned){let l=function(){const u=d.scrollHeight-d.clientHeight,h=Math.ceil(d.scrollTop)<u;i(h)};const d=t.viewport;return l(),d.addEventListener("scroll",l),()=>d.removeEventListener("scroll",l)}},[t.viewport,t.isPositioned]),n?o.jsx(I1,{...r,ref:a,onAutoScroll:()=>{const{viewport:l,selectedItem:d}=t;l&&d&&(l.scrollTop=l.scrollTop+d.offsetHeight)}}):null});C1.displayName=yu;var I1=p.forwardRef((r,e)=>{const{__scopeSelect:t,onAutoScroll:s,...n}=r,i=Os("SelectScrollButton",t),a=p.useRef(null),l=gc(t),d=p.useCallback(()=>{a.current!==null&&(window.clearInterval(a.current),a.current=null)},[]);return p.useEffect(()=>()=>d(),[d]),mr(()=>{var h;const u=l().find(m=>m.ref.current===document.activeElement);(h=u==null?void 0:u.ref.current)==null||h.scrollIntoView({block:"nearest"})},[l]),o.jsx(Pe.div,{"aria-hidden":!0,...n,ref:e,style:{flexShrink:0,...n.style},onPointerDown:ue(n.onPointerDown,()=>{a.current===null&&(a.current=window.setInterval(s,50))}),onPointerMove:ue(n.onPointerMove,()=>{var u;(u=i.onItemLeave)==null||u.call(i),a.current===null&&(a.current=window.setInterval(s,50))}),onPointerLeave:ue(n.onPointerLeave,()=>{d()})})}),M5="SelectSeparator",S1=p.forwardRef((r,e)=>{const{__scopeSelect:t,...s}=r;return o.jsx(Pe.div,{"aria-hidden":!0,...s,ref:e})});S1.displayName=M5;var bu="SelectArrow",D5=p.forwardRef((r,e)=>{const{__scopeSelect:t,...s}=r,n=xc(t),i=Ds(bu,t),a=Os(bu,t);return i.open&&a.position==="popper"?o.jsx(Nu,{...n,...s,ref:e}):null});D5.displayName=bu;var O5="SelectBubbleInput",k1=p.forwardRef(({__scopeSelect:r,value:e,...t},s)=>{const n=p.useRef(null),i=$e(s,n),a=Ow(e);return p.useEffect(()=>{const l=n.current;if(!l)return;const d=window.HTMLSelectElement.prototype,h=Object.getOwnPropertyDescriptor(d,"value").set;if(a!==e&&h){const m=new Event("change",{bubbles:!0});h.call(l,e),l.dispatchEvent(m)}},[a,e]),o.jsx(Pe.select,{...t,style:{...Fx,...t.style},ref:i,defaultValue:e})});k1.displayName=O5;function j1(r){return r===""||r===void 0}function A1(r){const e=$t(r),t=p.useRef(""),s=p.useRef(0),n=p.useCallback(a=>{const l=t.current+a;e(l),function d(u){t.current=u,window.clearTimeout(s.current),u!==""&&(s.current=window.setTimeout(()=>d(""),1e3))}(l)},[e]),i=p.useCallback(()=>{t.current="",window.clearTimeout(s.current)},[]);return p.useEffect(()=>()=>window.clearTimeout(s.current),[]),[t,n,i]}function P1(r,e,t){const n=e.length>1&&Array.from(e).every(u=>u===e[0])?e[0]:e,i=t?r.indexOf(t):-1;let a=L5(r,Math.max(i,0));n.length===1&&(a=a.filter(u=>u!==t));const d=a.find(u=>u.textValue.toLowerCase().startsWith(n.toLowerCase()));return d!==t?d:void 0}function L5(r,e){return r.map((t,s)=>r[(e+s)%r.length])}var V5=o1,R1=a1,F5=c1,U5=d1,$5=u1,M1=h1,B5=g1,D1=b1,O1=w1,z5=_1,H5=E1,L1=N1,V1=C1,F1=S1;const U1=V5,$1=F5,lf=p.forwardRef(({className:r,children:e,...t},s)=>o.jsxs(R1,{ref:s,className:se("flex h-10 w-full items-center justify-between rounded-md border border-input bg-background px-3 py-2 text-sm ring-offset-background data-[placeholder]:text-muted-foreground focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50 [&>span]:line-clamp-1",r),...t,children:[e,o.jsx(U5,{asChild:!0,children:o.jsx(Qn,{className:"h-4 w-4 opacity-50"})})]}));lf.displayName=R1.displayName;const B1=p.forwardRef(({className:r,...e},t)=>o.jsx(L1,{ref:t,className:se("flex cursor-default items-center justify-center py-1",r),...e,children:o.jsx(yT,{className:"h-4 w-4"})}));B1.displayName=L1.displayName;const z1=p.forwardRef(({className:r,...e},t)=>o.jsx(V1,{ref:t,className:se("flex cursor-default items-center justify-center py-1",r),...e,children:o.jsx(Qn,{className:"h-4 w-4"})}));z1.displayName=V1.displayName;const cf=p.forwardRef(({className:r,children:e,position:t="popper",...s},n)=>o.jsx($5,{children:o.jsxs(M1,{ref:n,className:se("relative z-50 max-h-[--radix-select-content-available-height] min-w-[8rem] overflow-y-auto overflow-x-hidden rounded-md border bg-popover text-popover-foreground shadow-md data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2 origin-[--radix-select-content-transform-origin]",t==="popper"&&"data-[side=bottom]:translate-y-1 data-[side=left]:-translate-x-1 data-[side=right]:translate-x-1 data-[side=top]:-translate-y-1",r),position:t,...s,children:[o.jsx(B1,{}),o.jsx(B5,{className:se("p-1",t==="popper"&&"h-[var(--radix-select-trigger-height)] w-full min-w-[var(--radix-select-trigger-width)]"),children:e}),o.jsx(z1,{})]})}));cf.displayName=M1.displayName;const q5=p.forwardRef(({className:r,...e},t)=>o.jsx(D1,{ref:t,className:se("py-1.5 pl-8 pr-2 text-sm font-semibold",r),...e}));q5.displayName=D1.displayName;const Mt=p.forwardRef(({className:r,children:e,...t},s)=>o.jsxs(O1,{ref:s,className:se("relative flex w-full cursor-default select-none items-center rounded-sm py-1.5 pl-8 pr-2 text-sm outline-none focus:bg-accent focus:text-accent-foreground data-[disabled]:pointer-events-none data-[disabled]:opacity-50",r),...t,children:[o.jsx("span",{className:"absolute left-2 flex h-3.5 w-3.5 items-center justify-center",children:o.jsx(H5,{children:o.jsx(ho,{className:"h-4 w-4"})})}),o.jsx(z5,{children:e})]}));Mt.displayName=O1.displayName;const W5=p.forwardRef(({className:r,...e},t)=>o.jsx(F1,{ref:t,className:se("-mx-1 my-1 h-px bg-muted",r),...e}));W5.displayName=F1.displayName;function G5(){const[r,e]=p.useState({firstName:"",lastName:"",email:"",subject:"",message:""}),[t,s]=p.useState([]),[n,i]=p.useState(!1),[a,l]=p.useState(!1),[d,u]=p.useState(""),{toast:h}=xr(),{getColors:m,currentTheme:x}=Me(),g=m(),v=Ha({mutationFn:async _=>(await gs("POST","/api/contacts",_)).json(),onSuccess:()=>{u(r.message),i(!0),e({firstName:"",lastName:"",email:"",subject:"",message:""}),s([])},onError:()=>{u(r.message),l(!0)}}),b=_=>{_.preventDefault();const R=[];r.firstName.trim()||R.push("First Name"),r.lastName.trim()||R.push("Last Name"),r.email.trim()||R.push("Email Address"),(!r.subject.trim()||r.subject==="Select a subject")&&R.push("Subject"),r.message.trim()||R.push("Message");const D=/^[^\s@]+@[^\s@]+\.[^\s@]+$/;if(r.email&&!D.test(r.email)&&R.push("Please enter a valid email address"),((R==null?void 0:R.length)||0)>0){s(R);return}s([]),v.mutate(r)},w=()=>{d&&(navigator.clipboard.writeText(d),h({title:"Message Copied",description:"Your message has been copied to clipboard."}))},k=()=>{l(!1),i(!1)},T=(_,R)=>{e(D=>({...D,[_]:R}))};return o.jsx("section",{id:"contact",className:"py-20 transition-colors duration-300",style:{backgroundColor:g.background},children:o.jsxs("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8",children:[o.jsxs("div",{className:"text-center mb-12",children:[o.jsx("h2",{className:"font-orbitron font-black text-3xl md:text-4xl mb-4",style:{color:x==="light-mode"?"#000000":g.text},children:"GET IN TOUCH"}),o.jsx("p",{className:"text-lg font-semibold",style:{color:g.textMuted},children:"Have questions, feedback, or want to get involved? Drop us a line!"})]}),o.jsx("div",{className:"flex justify-center items-center min-h-[500px]",children:o.jsx("div",{className:"w-full max-w-lg",children:o.jsx(he,{className:"transition-all duration-300 mx-auto",style:{backgroundColor:g.card,borderColor:g.primary},children:o.jsxs(me,{className:"p-8",children:[!n&&!a&&o.jsxs(o.Fragment,{children:[o.jsx("h3",{className:"font-black text-xl mb-6 text-center",style:{color:g.primary},children:"Send us a Message"}),((t==null?void 0:t.length)||0)>0&&o.jsxs("div",{className:"mb-4 p-3 bg-red-900/20 border border-red-500 rounded-md",children:[o.jsx("p",{className:"text-red-400 text-sm font-semibold",children:"Please fill out the following required fields:"}),o.jsx("ul",{className:"text-red-300 text-sm mt-1",children:t.map((_,R)=>o.jsxs("li",{children:[" ",_]},R))})]}),o.jsxs("form",{onSubmit:b,className:"space-y-6",children:[o.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[o.jsxs("div",{children:[o.jsxs(_e,{htmlFor:"firstName",className:"font-semibold",style:{color:g.textSecondary},children:["First Name",t.includes("First Name")&&o.jsx("span",{className:"text-red-500",children:"*"})]}),o.jsx(Ae,{id:"firstName",value:r.firstName,onChange:_=>T("firstName",_.target.value),placeholder:"John",required:!0,className:"transition-colors duration-300 placeholder:text-gray-400 placeholder:opacity-50",style:{backgroundColor:g.surface,borderColor:g.border,color:g.text}})]}),o.jsxs("div",{children:[o.jsxs(_e,{htmlFor:"lastName",className:"font-semibold",style:{color:g.textSecondary},children:["Last Name",t.includes("Last Name")&&o.jsx("span",{className:"text-red-500",children:"*"})]}),o.jsx(Ae,{id:"lastName",value:r.lastName,onChange:_=>T("lastName",_.target.value),placeholder:"Doe",required:!0,className:"transition-colors duration-300 placeholder:text-gray-400 placeholder:opacity-50",style:{backgroundColor:g.surface,borderColor:g.border,color:g.text}})]})]}),o.jsxs("div",{children:[o.jsxs(_e,{htmlFor:"email",className:"font-semibold",style:{color:g.textSecondary},children:["Email Address",t.includes("Email Address")&&o.jsx("span",{className:"text-red-500",children:"*"})]}),o.jsx(Ae,{id:"email",type:"email",value:r.email,onChange:_=>T("email",_.target.value),placeholder:"john@example.com",required:!0,className:"transition-colors duration-300 placeholder:text-gray-400 placeholder:opacity-50",style:{backgroundColor:g.surface,borderColor:g.border,color:g.text}})]}),o.jsxs("div",{children:[o.jsxs(_e,{htmlFor:"subject",className:"font-semibold",style:{color:g.textSecondary},children:["Subject",t.includes("Subject")&&o.jsx("span",{className:"text-red-500",children:"*"})]}),o.jsxs(U1,{value:r.subject,onValueChange:_=>T("subject",_),children:[o.jsx(lf,{className:"transition-colors duration-300",style:{backgroundColor:g.surface,borderColor:g.border,color:g.text},"aria-label":"Select message subject",children:o.jsx($1,{placeholder:"Select a subject"})}),o.jsxs(cf,{style:{backgroundColor:g.surface,borderColor:g.border},children:[o.jsx(Mt,{value:"general",children:"General Inquiry"}),o.jsx(Mt,{value:"technical",children:"Technical Support"}),o.jsx(Mt,{value:"partnership",children:"Partnership/Collaboration"}),o.jsx(Mt,{value:"feedback",children:"Feedback"}),o.jsx(Mt,{value:"other",children:"Other"})]})]})]}),o.jsxs("div",{children:[o.jsxs(_e,{htmlFor:"contactMessage",className:"font-semibold",style:{color:g.textSecondary},children:["Message",t.includes("Message")&&o.jsx("span",{className:"text-red-500",children:"*"})]}),o.jsx(Ei,{id:"contactMessage",value:r.message,onChange:_=>T("message",_.target.value),placeholder:"Tell us what's on your mind...",rows:5,required:!0,className:"resize-none transition-colors duration-300 placeholder:text-gray-400 placeholder:opacity-50",style:{backgroundColor:g.surface,borderColor:g.border,color:g.text}})]}),o.jsxs(q,{type:"submit",disabled:v.isPending,className:"w-full px-6 py-3 rounded-full font-bold transition-all duration-300",style:{backgroundColor:g.primary,color:g.primaryText||"white"},onMouseEnter:_=>{_.currentTarget.style.backgroundColor=g.primaryDark||g.primary,_.currentTarget.style.transform="scale(1.02)"},onMouseLeave:_=>{_.currentTarget.style.backgroundColor=g.primary,_.currentTarget.style.transform="scale(1)"},children:[o.jsx(hi,{className:"mr-2 h-4 w-4"}),v.isPending?"SENDING...":"SEND MESSAGE"]})]})]}),n&&o.jsxs("div",{className:"text-center animate-in fade-in duration-500",children:[o.jsxs("div",{className:"relative inline-flex items-center justify-center mb-4",children:[o.jsx("div",{className:"absolute w-16 h-16 rounded-full opacity-50",style:{backgroundColor:g.primary}}),o.jsx(ho,{className:"w-8 h-8 text-green-400 relative z-10"})]}),o.jsx("h3",{className:"font-black text-xl mb-2 text-green-400",children:"Message Sent Successfully!"}),o.jsx("p",{className:"text-gray-300 text-sm",children:"We'll get back to you within 24-48 hours."}),o.jsx(q,{onClick:k,className:"mt-4 px-6 py-2 rounded-full font-bold transition-all duration-300",style:{backgroundColor:g.primary,color:g.primaryText||"white"},children:"Send Another Message"})]}),a&&o.jsxs("div",{className:"text-center animate-in fade-in duration-500",children:[o.jsxs("div",{className:"relative inline-flex items-center justify-center mb-4",children:[o.jsx("div",{className:"absolute w-16 h-16 rounded-full bg-red-600 opacity-50"}),o.jsx(Mr,{className:"w-8 h-8 text-red-400 relative z-10"})]}),o.jsx("h3",{className:"font-black text-xl mb-2 text-red-400",children:"Message Failed to Send"}),o.jsx("p",{className:"text-gray-300 text-sm mb-4",children:"Please refresh the site and try again."}),o.jsxs("div",{className:"space-y-3",children:[o.jsxs(q,{onClick:w,className:"w-full px-6 py-2 rounded-full font-bold transition-all duration-300 bg-gray-600 hover:bg-gray-500 text-white",children:[o.jsx(vT,{className:"mr-2 h-4 w-4"}),"Copy Message to Clipboard"]}),o.jsx(q,{onClick:k,className:"w-full px-6 py-2 rounded-full font-bold transition-all duration-300",style:{backgroundColor:g.primary,color:g.primaryText||"white"},children:"Try Again"})]})]})]})})})})]})})}const K5="/assets/RebelPackageIcon-IfEcyLTj.png",Q5="/assets/LegendPackageIcon-ARagChna.png",Y5="/assets/IconPackageIcon-DztjQ210.png",Ht=[{id:"rebel",name:"REBEL",price:5.99,priceId:"price_rebel_monthly",icon:K5,iconElement:o.jsx(p0,{className:"w-16 h-16"}),gradientStart:"#B56BFF",gradientEnd:"#FF50C3",description:"Start your metal journey",features:["Ad-free streaming experience","High-quality audio (320kbps)","Monthly exclusive playlist","Priority song requests"],perks:[" Guitar picks monthly"," Early access to new shows"]},{id:"legend",name:"LEGEND",price:12.99,priceId:"price_legend_monthly",popular:!0,icon:Q5,iconElement:o.jsx(Mi,{className:"w-16 h-16"}),gradientStart:"#E520C6",gradientEnd:"#F4654F",description:"Become a true metal legend",features:["Everything in Rebel tier","Exclusive live show access","Artist interview archives","VIP Discord community","Monthly exclusive merch discount"],perks:[" Monthly video calls with DJs"," Quarterly mystery box"," Signed albums"]},{id:"icon",name:"ICON",price:24.99,priceId:"price_icon_monthly",icon:Y5,iconElement:o.jsx(lr,{className:"w-16 h-16"}),gradientStart:"#FF50C3",gradientEnd:"#B66BFF",description:"The ultimate metal experience",features:["Everything in Legend tier","Personal DJ requests","Exclusive artist meet & greets","Limited edition vinyl access","Co-host opportunities"],perks:[" Name a weekly show segment"," Annual VIP concert tickets"," Custom merch line"]}];function X5(){const[r,e]=p.useState(1),[t,s]=p.useState(!1),[n,i]=p.useState("right"),[a,l]=p.useState(null),{getColors:d,currentTheme:u}=Me();d();const h=p.useCallback(()=>{t||(console.log("Previous animation starting"),s(!0),i("right"),e(v=>(v-1+((Ht==null?void 0:Ht.length)||0))%((Ht==null?void 0:Ht.length)||1)),setTimeout(()=>{s(!1),console.log("Previous animation complete")},400))},[t]),m=p.useCallback(()=>{t||(console.log("Next animation starting"),s(!0),i("left"),e(v=>(v+1)%((Ht==null?void 0:Ht.length)||1)),setTimeout(()=>{s(!1),console.log("Next animation complete")},400))},[t]);p.useEffect(()=>{const v=b=>{b.key==="ArrowLeft"?(b.preventDefault(),h()):b.key==="ArrowRight"&&(b.preventDefault(),m())};return window.addEventListener("keydown",v),()=>window.removeEventListener("keydown",v)},[h,m]);const x=v=>{!t&&v!==r&&(s(!0),e(v),setTimeout(()=>s(!1),500))},g=Ht[r];return o.jsxs("div",{className:"relative w-full max-w-6xl mx-auto px-4",children:[o.jsxs("div",{className:"relative perspective-1000 subscription-carousel-container overflow-visible py-2 sm:py-4 md:py-6 lg:py-8",style:{minHeight:"700px",height:"auto"},children:[o.jsx("button",{onClick:h,className:"absolute left-2 top-1/2 transform -translate-y-1/2 z-10 bg-black/50 hover:bg-black/70 rounded-full p-2 transition-colors",disabled:t,title:"Previous subscription",children:o.jsx(xT,{className:"w-8 h-8 text-white hover:scale-110 transition-transform drop-shadow-md"})}),o.jsx("button",{onClick:m,className:"absolute right-2 top-1/2 transform -translate-y-1/2 z-10 bg-black/50 hover:bg-black/70 rounded-full p-2 transition-colors",disabled:t,title:"Next subscription",children:o.jsx(l0,{className:"w-8 h-8 text-white hover:scale-110 transition-transform drop-shadow-md"})}),o.jsx("div",{className:"flex items-center justify-center h-full relative",children:o.jsxs("div",{className:"relative w-full max-w-md",style:{transform:t?n==="left"?"translateX(30px) scale(0.98)":"translateX(-30px) scale(0.98)":"translateX(0) scale(1)",opacity:t?.8:1,transition:"all 0.4s ease-in-out"},children:[o.jsx("div",{className:"absolute inset-4 rounded-3xl overflow-hidden",children:o.jsx("div",{className:"absolute inset-0 blur-2xl opacity-40",style:{background:`linear-gradient(135deg, ${g.gradientStart}, ${g.gradientEnd})`}})}),o.jsxs("div",{className:"relative backdrop-blur-xl rounded-3xl p-6 transform transition-all duration-500 hover:scale-105 overflow-hidden flex flex-col subscription-card",style:{border:g.popular?"8px solid transparent":"5px solid transparent",borderRadius:"24px",backgroundColor:u==="light-mode"?"#ffffff":"rgba(0, 0, 0, 0.8)",background:g.popular?`linear-gradient(${u==="light-mode"?"#ffffff":"var(--background)"}, ${u==="light-mode"?"#ffffff":"var(--background)"}) padding-box, linear-gradient(90deg, ${g.gradientStart} 0%, ${g.gradientEnd} 25%, ${g.gradientStart} 50%, ${g.gradientEnd} 75%, ${g.gradientStart} 100%) border-box`:`linear-gradient(${u==="light-mode"?"#ffffff":"var(--background)"}, ${u==="light-mode"?"#ffffff":"var(--background)"}) padding-box, linear-gradient(90deg, ${g.gradientStart}, ${g.gradientEnd}) border-box`,backgroundSize:g.popular?"300% 300%":"100% 100%",animation:g.popular?"gradientFlow 6s ease-in-out infinite":"none",boxShadow:g.popular?`0 0 60px ${g.gradientStart}60, 0 0 120px ${g.gradientEnd}40, 0 0 160px ${g.gradientStart}20`:`0 20px 40px ${g.gradientStart}40`,minHeight:"600px",height:"auto"},onMouseEnter:()=>l(g.id),onMouseLeave:()=>l(null),children:[o.jsx("div",{className:"flex justify-center mb-2 sm:mb-4",children:o.jsx("div",{className:"relative p-2 sm:p-3 rounded-full",style:{background:`linear-gradient(135deg, ${g.gradientStart}20, ${g.gradientEnd}20)`},children:o.jsx("img",{src:g.icon,alt:`${g.name} icon`,className:`w-16 h-16 sm:w-20 sm:h-20 object-contain animate-float ${r===1?"float-delay-1":r===2?"float-delay-2":""}`,style:{animation:"float 4s ease-in-out infinite",animationDelay:r===1?"0.5s":r===2?"1s":"0s"}})})}),o.jsxs("div",{className:"text-center mb-2 sm:mb-4",children:[o.jsx("h3",{className:"text-2xl sm:text-3xl font-black mb-1 sm:mb-2",children:o.jsx("span",{style:{background:`linear-gradient(90deg, ${g.gradientStart}, ${g.gradientEnd})`,WebkitBackgroundClip:"text",WebkitTextFillColor:"transparent",backgroundClip:"text",color:"transparent",display:"inline",padding:0,margin:0,fontWeight:"inherit"},children:g.name},g.id)}),o.jsx("p",{className:"text-sm sm:text-base",style:{color:u==="light-mode"?"rgba(0, 0, 0, 0.6)":"#9ca3af"},children:g.description}),g.popular&&o.jsx("div",{className:"mt-4",children:o.jsx("span",{className:"px-4 py-1 rounded-full text-xs font-bold",style:{background:"linear-gradient(135deg, #ff6b35, #f7931e)",color:"black",whiteSpace:"nowrap"},children:"MOSTPOPULAR"})})]}),o.jsx("div",{className:"text-center mb-3 sm:mb-6",children:o.jsxs("div",{className:"flex items-center justify-center",children:[o.jsxs("span",{className:"text-3xl sm:text-4xl font-black",style:{color:u==="light-mode"?"#000000":"#ffffff"},children:["$",g.price]}),o.jsx("span",{className:"ml-2 text-sm sm:text-base",style:{color:u==="light-mode"?"rgba(0, 0, 0, 0.6)":"#9ca3af"},children:"/month"})]})}),o.jsx("div",{className:"flex-1 flex items-center justify-center py-2 sm:py-4",children:o.jsx("div",{className:"w-full max-w-xs",children:(g.features||[]).sort((v,b)=>((v==null?void 0:v.length)||0)-((b==null?void 0:b.length)||0)).map((v,b)=>o.jsx("div",{className:"flex items-center justify-center mb-2 sm:mb-3 transform transition-all duration-300",style:{transform:a===g.id?"translateX(10px)":"translateX(0)",transitionDelay:`${b*50}ms`},children:o.jsxs("div",{className:"flex items-center",children:[o.jsx("div",{className:"w-3 h-3 sm:w-4 sm:h-4 rounded-full flex items-center justify-center flex-shrink-0 mr-2 sm:mr-3",style:{background:`linear-gradient(135deg, ${g.gradientStart}, ${g.gradientEnd})`},children:o.jsx(ho,{className:"w-2 h-2 sm:w-2.5 sm:h-2.5 text-white"})}),o.jsx("span",{className:"text-xs sm:text-sm font-medium text-center",style:{color:u==="light-mode"?"rgba(0, 0, 0, 0.7)":"#d1d5db"},children:v})]})},b))})}),o.jsx("div",{className:"mb-2 sm:mb-3",children:o.jsxs("div",{className:"bg-white/5 rounded-lg p-2 sm:p-3 max-w-xs mx-auto",children:[o.jsx("h4",{className:"text-xs font-bold mb-1 sm:mb-2 text-center",style:{color:u==="light-mode"?"rgba(0, 0, 0, 0.6)":"#9ca3af"},children:"EXCLUSIVE PERKS"}),o.jsx("div",{className:"space-y-0.5 sm:space-y-1",children:(g.perks||[]).map((v,b)=>o.jsx("div",{className:"text-xs text-center leading-tight",style:{color:u==="light-mode"?"rgba(0, 0, 0, 0.7)":"#d1d5db"},children:v},b))})]})}),o.jsx("div",{className:"mt-auto mb-3 sm:mb-4",children:o.jsxs(q,{className:"w-full py-3 sm:py-4 text-sm sm:text-base font-bold rounded-xl transform transition-all duration-300 hover:scale-105",style:{background:`linear-gradient(135deg, ${g.gradientStart}, ${g.gradientEnd})`,boxShadow:`0 10px 30px ${g.gradientStart}50`},onMouseEnter:v=>{v.currentTarget.style.boxShadow=`0 15px 40px ${g.gradientStart}70`},onMouseLeave:v=>{v.currentTarget.style.boxShadow=`0 10px 30px ${g.gradientStart}50`},children:["Get ",g.name.charAt(0)+g.name.slice(1).toLowerCase()," Now"]})})]})]})})]}),o.jsxs("div",{className:"text-center text-gray-500 text-sm mt-8",children:[o.jsx("span",{className:"md:hidden",children:" Swipe to explore plans "}),o.jsx("span",{className:"hidden md:inline",children:" Click to explore plans "})]}),o.jsx("div",{className:"flex justify-center items-center space-x-6 mt-6",children:(Ht||[]).map((v,b)=>o.jsxs("button",{onClick:()=>x(b),className:se("relative transition-all duration-500 ease-in-out p-3 rounded-full",b===r?"scale-110":"opacity-40 hover:opacity-60 scale-90"),children:[o.jsx("div",{className:se("absolute inset-0 rounded-full transition-all duration-500",b===r?"opacity-100":"opacity-0"),style:{background:`radial-gradient(circle, ${v.gradientStart}20, transparent 70%)`,filter:"blur(12px)"}}),o.jsx("div",{className:se("relative rounded-full transition-all duration-500",b===r?"bg-black/20":"bg-transparent"),style:{padding:"0.5rem"},children:o.jsx("img",{src:v.icon,alt:`${v.name} icon`,className:se("object-contain transition-all duration-500",b===r?"w-8 h-8":"w-6 h-6"),style:{filter:b===r?"drop-shadow(0 0 8px rgba(255,255,255,0.5))":"grayscale(100%) opacity(0.7)"}})}),b===r&&o.jsx("div",{className:"absolute inset-0 rounded-full",style:{background:`linear-gradient(135deg, ${v.gradientStart}60, ${v.gradientEnd}60)`,padding:"2px",WebkitMask:"linear-gradient(#fff 0 0) content-box, linear-gradient(#fff 0 0)",WebkitMaskComposite:"xor",maskComposite:"exclude"}})]},v.id))}),o.jsx("style",{children:`
        @keyframes gradientFlow {
          0% { background-position: 0% 50%; }
          50% { background-position: 100% 50%; }
          100% { background-position: 0% 50%; }
        }
        .preserve-3d {
          transform-style: preserve-3d;
        }
      `})]})}const J5=[{id:"1",title:"Spandex Salvation Classic Tee",description:"Premium cotton tee with vintage logo design. Perfect for any metal fan.",price:24.99,compareAtPrice:29.99,images:["https://images.unsplash.com/photo-1521572163474-6864f9cf17ab?ixlib=rb-4.0.3&auto=format&fit=crop&w=800&h=800"],variants:[{id:"1-s",title:"Small",price:24.99,available:!0,option1:"S"},{id:"1-m",title:"Medium",price:24.99,available:!0,option1:"M"},{id:"1-l",title:"Large",price:24.99,available:!0,option1:"L"},{id:"1-xl",title:"X-Large",price:24.99,available:!1,option1:"XL"}],tags:["apparel","tee","classic"],rating:4.8,reviewCount:127,inStock:!0,featured:!0},{id:"2",title:"Rebellion Hoodie",description:"Heavy-duty hoodie with embroidered logo. Built for the coldest metal nights.",price:49.99,images:["https://images.unsplash.com/photo-1556821840-3a63f95609a7?ixlib=rb-4.0.3&auto=format&fit=crop&w=800&h=800"],variants:[{id:"2-s",title:"Small",price:49.99,available:!0,option1:"S"},{id:"2-m",title:"Medium",price:49.99,available:!0,option1:"M"},{id:"2-l",title:"Large",price:49.99,available:!0,option1:"L"}],tags:["apparel","hoodie","winter"],rating:4.9,reviewCount:89,inStock:!0},{id:"3",title:"Metal Fuel Coffee Mug",description:"15oz ceramic mug to fuel your metal mornings. Dishwasher safe.",price:19.99,images:["https://images.unsplash.com/photo-1544787219-7f47ccb76574?ixlib=rb-4.0.3&auto=format&fit=crop&w=800&h=800"],variants:[{id:"3-default",title:"Default",price:19.99,available:!0}],tags:["accessories","mug","coffee"],rating:4.6,reviewCount:234,inStock:!0,featured:!0},{id:"4",title:"Limited Edition Vinyl Collection",description:"Exclusive compilation of classic metal hits. Limited to 500 copies.",price:34.99,images:["https://images.unsplash.com/photo-1493225457124-a3eb161ffa5f?ixlib=rb-4.0.3&auto=format&fit=crop&w=800&h=800"],variants:[{id:"4-default",title:"Limited Edition",price:34.99,available:!0}],tags:["music","vinyl","limited"],rating:5,reviewCount:45,inStock:!0,featured:!0}];function Z5(){const[r,e]=p.useState([]),[t,s]=p.useState([]),[n,i]=p.useState(null),[a,l]=p.useState(null),[d,u]=p.useState(!0),{toast:h}=xr(),{getColors:m,currentTheme:x}=Me(),g=m();p.useEffect(()=>{setTimeout(()=>{e(J5),u(!1)},1e3)},[]);const v=(k,T,_=1)=>{const R=t.find(D=>D.variantId===T.id);s(R?t.map(D=>D.variantId===T.id?{...D,quantity:D.quantity+_}:D):[...t,{productId:k.id,variantId:T.id,quantity:_,title:`${k.title} - ${T.title}`,price:T.price,image:k.images[0]}]),h({title:"Added to Cart",description:`${k.title} has been added to your cart.`})},b=()=>t.reduce((k,T)=>k+T.price*T.quantity,0),w=async()=>{const k=`https://spandex-salvation-radio.myshopify.com/cart/${(t||[]).map(T=>`${T.variantId}:${T.quantity}`).join(",")}`;h({title:"Redirecting to Checkout",description:"Taking you to secure Shopify checkout..."}),console.log("Redirecting to:",k)};return d?o.jsx("div",{className:"flex items-center justify-center py-20",children:o.jsx("div",{className:"animate-spin w-8 h-8 border-4 border-metal-orange border-t-transparent rounded-full"})}):o.jsx("section",{id:"merch",className:"py-20 transition-colors duration-300",style:{backgroundColor:g.background},children:o.jsxs("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8",children:[o.jsxs("div",{className:"text-center mb-12",children:[o.jsx("h2",{className:"font-orbitron font-black text-3xl md:text-4xl mb-4",style:{color:x==="light-mode"?"#000000":g.text},children:"OFFICIAL MERCH STORE"}),o.jsx("p",{className:"text-gray-400 text-lg font-semibold",children:"Show your metal pride with exclusive Spandex Salvation Radio merchandise."})]}),(t||[]).length>0&&o.jsx("div",{className:"mb-8",children:o.jsx(he,{className:"bg-dark-surface/50 hover:bg-dark-surface/70 transition-all duration-300",children:o.jsx(me,{className:"p-4",children:o.jsxs("div",{className:"flex items-center justify-between",children:[o.jsxs("div",{className:"flex items-center",children:[o.jsx($u,{className:"text-metal-orange h-5 w-5 mr-2"}),o.jsxs("span",{className:"font-black text-white",children:[(t||[]).reduce((k,T)=>k+T.quantity,0)," ","items in cart"]})]}),o.jsxs("div",{className:"flex items-center space-x-4",children:[o.jsxs("span",{className:"font-black text-xl text-metal-orange",children:["$",b().toFixed(2)]}),o.jsx(q,{onClick:w,className:"bg-metal-orange hover:bg-orange-600 text-white px-6 py-2 rounded-full font-bold",children:"Checkout"})]})]})})})}),o.jsxs("div",{className:"mb-12 text-center",children:[o.jsx("h3",{className:"font-black text-xl mb-6 text-center",style:{color:g.primary},children:"Featured Products"}),o.jsx("div",{className:"w-full flex justify-center",children:o.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6 justify-items-center",children:r==null?void 0:r.filter(k=>k.featured).map(k=>o.jsx(e3,{product:k,onAddToCart:(T,_)=>v(k,T,_),onViewDetails:()=>i(k)},k.id))})})]}),n&&o.jsx(t3,{product:n,onClose:()=>i(null),onAddToCart:(k,T)=>v(n,k,T)})]})})}function e3({product:r,onAddToCart:e,onViewDetails:t}){const[s,n]=p.useState(r.variants[0]),{getColors:i,currentTheme:a}=Me(),l=i();return o.jsx(he,{className:"transition-all duration-300 group h-full flex flex-col",style:{backgroundColor:a==="light-mode"?"#ffffff":"rgba(30, 30, 30, 0.5)",borderColor:l.primary},children:o.jsxs(me,{className:"p-4 flex flex-col h-full",children:[o.jsxs("div",{className:"relative mb-4",children:[o.jsx("img",{src:r.images[0],alt:r.title,className:"w-full h-48 object-cover rounded-lg"}),r.featured&&o.jsx(Vt,{className:"absolute top-2 left-2",style:{backgroundColor:l.primary,color:"white"},children:"Featured"}),r.compareAtPrice&&o.jsx(Vt,{className:"absolute top-2 left-2 w-auto",style:{backgroundColor:"#dc2626",color:"white",marginTop:r.featured?"30px":"0"},children:"Sale"}),o.jsxs("div",{className:"absolute inset-0 bg-black/50 opacity-0 group-hover:opacity-100 transition-opacity flex items-center justify-center space-x-2",children:[o.jsx(q,{size:"sm",variant:"secondary",onClick:t,className:"bg-white/90 text-black hover:bg-white",children:o.jsx(d0,{className:"h-4 w-4"})}),o.jsx(q,{size:"sm",variant:"secondary",className:"bg-white/90 text-black hover:bg-white",children:o.jsx(Sn,{className:"h-4 w-4"})}),o.jsx(q,{size:"sm",variant:"secondary",className:"bg-white/90 text-black hover:bg-white",children:o.jsx(AT,{className:"h-4 w-4"})})]})]}),o.jsx("h4",{className:"font-black text-white mb-2",children:r.title}),o.jsx("p",{className:"text-gray-400 text-sm font-semibold line-clamp-2 flex-grow",children:r.description}),o.jsxs("div",{className:"flex flex-col items-center mb-3 mt-3",children:[o.jsxs("div",{className:"flex items-center",children:[[...Array(5)].map((d,u)=>o.jsx(Mi,{className:`h-4 w-4 ${u<Math.floor(r.rating)?"text-yellow-400 fill-current":"text-gray-600"}`},u)),o.jsxs("span",{className:"text-sm font-semibold ml-2",style:{color:a==="light-mode"?"#6b7280":"#9ca3af"},children:["(",r.reviewCount,")"]})]}),o.jsxs("div",{className:"mt-2 mb-3",children:[o.jsxs("span",{className:"text-xl font-black text-metal-orange",children:["$",r.price]}),r.compareAtPrice&&o.jsxs("span",{className:"line-through ml-2",style:{color:a==="light-mode"?"#6b7280":"#9ca3af"},children:["$",r.compareAtPrice]})]}),!r.inStock&&o.jsx(Vt,{variant:"secondary",className:"bg-gray-600 text-white mt-2",children:"Out of Stock"})]}),o.jsxs("div",{className:"mt-auto",children:[(r.variants||[]).length>1&&o.jsxs("div",{className:"relative mb-3",children:[o.jsx("select",{value:s.id,onChange:d=>{var u;return n((u=r.variants)==null?void 0:u.find(h=>h.id===d.target.value))},className:"w-full p-2 bg-dark-bg/50 text-white rounded appearance-none pr-8",style:{borderColor:l.primary},children:(r.variants||[]).map(d=>o.jsxs("option",{value:d.id,disabled:!d.available,children:[d.title," ",!d.available&&"(Out of Stock)"]},d.id))}),o.jsx("div",{className:"absolute inset-y-0 right-2 flex items-center pointer-events-none",children:o.jsx("svg",{className:"w-4 h-4 text-gray-400",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:o.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M19 9l-7 7-7-7"})})})]}),o.jsxs(q,{onClick:()=>console.log("Buy now:",r,s),disabled:!r.inStock||!s.available,className:"w-full font-bold transition-all duration-300",style:{backgroundColor:l.primary,color:l.primaryText||"white"},onMouseEnter:d=>{d.currentTarget.style.backgroundColor=l.primaryDark||l.primary,d.currentTarget.style.transform="scale(1.02)"},onMouseLeave:d=>{d.currentTarget.style.backgroundColor=l.primary,d.currentTarget.style.transform="scale(1)"},children:[o.jsx($u,{className:"mr-2 h-4 w-4"}),"Buy Now"]})]})]})})}function t3({product:r,onClose:e,onAddToCart:t}){const[s,n]=p.useState(r.variants[0]),[i,a]=p.useState(1);return o.jsx("div",{className:"fixed inset-0 z-50 flex items-center justify-center p-4 bg-black/50",children:o.jsx(he,{className:"bg-dark-bg max-w-2xl w-full max-h-[90vh] overflow-y-auto",children:o.jsxs(me,{className:"p-6",children:[o.jsxs("div",{className:"flex justify-between items-start mb-6",children:[o.jsx("h3",{className:"font-black text-2xl text-white",children:r.title}),o.jsx(q,{variant:"ghost",onClick:e,className:"text-gray-400 hover:text-white",children:""})]}),o.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[o.jsx("div",{children:o.jsx("img",{src:r.images[0],alt:r.title,className:"w-full h-64 object-cover rounded-lg"})}),o.jsxs("div",{children:[o.jsx("p",{className:"text-gray-300 font-semibold mb-4",children:r.description}),o.jsxs("div",{className:"flex items-center mb-4",children:[o.jsx("div",{className:"flex items-center",children:[...Array(5)].map((l,d)=>o.jsx(Mi,{className:`h-5 w-5 ${d<Math.floor(r.rating)?"text-yellow-400 fill-current":"text-gray-600"}`},d))}),o.jsxs("span",{className:"font-semibold ml-2",style:{color:"#9ca3af"},children:[r.rating," (",r.reviewCount," reviews)"]})]}),o.jsxs("div",{className:"mb-4",children:[o.jsxs("span",{className:"text-2xl font-black text-metal-orange",children:["$",s.price]}),r.compareAtPrice&&o.jsxs("span",{className:"line-through ml-2",style:{color:"#9ca3af"},children:["$",r.compareAtPrice]})]}),(r.variants||[]).length>1&&o.jsxs("div",{className:"mb-4",children:[o.jsx("label",{className:"block text-gray-300 font-semibold mb-2",children:"Size:"}),o.jsx("select",{value:s.id,onChange:l=>{var d;return n((d=r.variants)==null?void 0:d.find(u=>u.id===l.target.value))},className:"w-full p-2 bg-dark-bg border-dark-border text-white placeholder-gray-500 focus:border-metal-orange rounded",children:(r.variants||[]).map(l=>o.jsxs("option",{value:l.id,disabled:!l.available,children:[l.title," ",!l.available&&"(Out of Stock)"]},l.id))})]}),o.jsxs("div",{className:"mb-6",children:[o.jsx("label",{className:"block text-gray-300 font-semibold mb-2",children:"Quantity:"}),o.jsx("input",{type:"number",min:"1",max:"10",value:i,onChange:l=>a(parseInt(l.target.value)),className:"w-20 p-2 bg-dark-bg/50 text-white rounded"})]}),o.jsxs(q,{onClick:()=>{console.log("Buy now:",r,s),e()},disabled:!r.inStock||!s.available,className:"w-full bg-metal-orange hover:bg-orange-600 text-white font-bold",children:[o.jsx($u,{className:"mr-2 h-4 w-4"}),"Buy Now - $",(s.price*i).toFixed(2)]})]})]})]})})})}function r3({onClose:r}){const[e,t]=p.useState("overview"),[s,n]=p.useState(""),[i,a]=p.useState(""),[l,d]=p.useState(!1),[u,h]=p.useState(null),[m,x]=p.useState(null),[g,v]=p.useState({}),[b,w]=p.useState({}),{colors:k,isDarkMode:T}=Me(),{toast:_}=xr(),R=Al(),D=p.useRef(null);p.useEffect(()=>{const C=A=>{D.current&&!D.current.contains(A.target)&&r()};if(!l)return document.addEventListener("mousedown",C),()=>document.removeEventListener("mousedown",C)},[l,r]);const{data:$}=Ou({queryKey:["/api/schedules"],enabled:l}),S=[{id:"1",name:"Spandex Salvation T-Shirt",price:25.99,description:"Official radio station t-shirt",image:"/api/placeholder/300/300",category:"clothing",stock:50,featured:!0},{id:"2",name:"Metal Horns Mug",price:15.99,description:"Start your day with metal",image:"/api/placeholder/300/300",category:"accessories",stock:30,featured:!1}],I=()=>{s==="admin"&&i==="metaladmin123"?(d(!0),_({title:"Admin Access Granted",description:"Welcome to the admin panel",variant:"default"})):_({title:"Access Denied",description:"Invalid admin credentials",variant:"destructive"})},E=Ha({mutationFn:async C=>gs("PUT",`/api/schedules/${C.id}`,C),onSuccess:()=>{R.invalidateQueries({queryKey:["/api/schedules"]}),x(null),_({title:"Show Updated",description:"Show schedule has been updated successfully"})},onError:C=>{_({title:"Update Failed",description:"Failed to update show schedule",variant:"destructive"})}}),j=Ha({mutationFn:async C=>gs("POST","/api/schedules",C),onSuccess:()=>{R.invalidateQueries({queryKey:["/api/schedules"]}),w({}),_({title:"Show Created",description:"New show has been added to the schedule"})},onError:C=>{_({title:"Creation Failed",description:"Failed to create new show",variant:"destructive"})}});return l?o.jsx("div",{className:"fixed inset-0 bg-black/50 backdrop-blur-sm z-50 flex items-center justify-center p-4",children:o.jsxs(he,{className:`w-full max-w-7xl h-[90vh] ${T?"bg-gray-900":"bg-white"}`,children:[o.jsxs(it,{className:"flex flex-row items-center justify-between",children:[o.jsx(lt,{className:`${T?"text-white":"text-black"}`,children:"Admin Control Panel"}),o.jsx(q,{variant:"ghost",size:"sm",onClick:r,className:`${T?"text-white hover:bg-white/10":"text-black hover:bg-black/10"}`,children:o.jsx(Mr,{className:"w-4 h-4"})})]}),o.jsx(me,{className:"p-0 h-full",children:o.jsxs("div",{className:"flex h-full",children:[o.jsxs("div",{className:`w-64 ${T?"bg-gray-800":"bg-gray-100"} p-4 space-y-2`,children:[o.jsxs(q,{variant:e==="overview"?"default":"ghost",onClick:()=>t("overview"),className:"w-full justify-start",children:[o.jsx(DT,{className:"w-4 h-4 mr-2"}),"Overview"]}),o.jsxs(q,{variant:e==="shows"?"default":"ghost",onClick:()=>t("shows"),className:"w-full justify-start",children:[o.jsx(xs,{className:"w-4 h-4 mr-2"}),"Show Management"]}),o.jsxs(q,{variant:e==="merch"?"default":"ghost",onClick:()=>t("merch"),className:"w-full justify-start",children:[o.jsx(Bc,{className:"w-4 h-4 mr-2"}),"Merchandise"]}),o.jsxs(q,{variant:e==="users"?"default":"ghost",onClick:()=>t("users"),className:"w-full justify-start",children:[o.jsx(Pd,{className:"w-4 h-4 mr-2"}),"User Management"]}),o.jsxs(q,{variant:e==="settings"?"default":"ghost",onClick:()=>t("settings"),className:"w-full justify-start",children:[o.jsx(jT,{className:"w-4 h-4 mr-2"}),"Settings"]})]}),o.jsxs("div",{className:"flex-1 p-6 overflow-y-auto",children:[e==="overview"&&o.jsxs("div",{className:"space-y-6",children:[o.jsx("h2",{className:`text-2xl font-bold ${T?"text-white":"text-black"}`,children:"Dashboard Overview"}),o.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[o.jsx(he,{className:`${T?"bg-gray-800":"bg-gray-50"}`,children:o.jsx(me,{className:"p-4",children:o.jsxs("div",{className:"flex items-center justify-between",children:[o.jsxs("div",{children:[o.jsx("p",{className:`text-sm ${T?"text-gray-400":"text-gray-600"}`,children:"Total Shows"}),o.jsx("p",{className:`text-2xl font-bold ${T?"text-white":"text-black"}`,children:($==null?void 0:$.length)||0})]}),o.jsx(xs,{className:"w-8 h-8",style:{color:k.primary}})]})})}),o.jsx(he,{className:`${T?"bg-gray-800":"bg-gray-50"}`,children:o.jsx(me,{className:"p-4",children:o.jsxs("div",{className:"flex items-center justify-between",children:[o.jsxs("div",{children:[o.jsx("p",{className:`text-sm ${T?"text-gray-400":"text-gray-600"}`,children:"Merch Items"}),o.jsx("p",{className:`text-2xl font-bold ${T?"text-white":"text-black"}`,children:(S==null?void 0:S.length)||0})]}),o.jsx(Bc,{className:"w-8 h-8",style:{color:k.primary}})]})})}),o.jsx(he,{className:`${T?"bg-gray-800":"bg-gray-50"}`,children:o.jsx(me,{className:"p-4",children:o.jsxs("div",{className:"flex items-center justify-between",children:[o.jsxs("div",{children:[o.jsx("p",{className:`text-sm ${T?"text-gray-400":"text-gray-600"}`,children:"Active Users"}),o.jsx("p",{className:`text-2xl font-bold ${T?"text-white":"text-black"}`,children:"42"})]}),o.jsx(Pd,{className:"w-8 h-8",style:{color:k.primary}})]})})})]})]}),e==="shows"&&o.jsxs("div",{className:"space-y-6",children:[o.jsxs("div",{className:"flex justify-between items-center",children:[o.jsx("h2",{className:`text-2xl font-bold ${T?"text-white":"text-black"}`,children:"Show Management"}),o.jsxs(q,{onClick:()=>w({title:"",description:"",host:"",dayOfWeek:"",time:"",duration:""}),style:{backgroundColor:k.primary},children:[o.jsx(Im,{className:"w-4 h-4 mr-2"}),"Add Show"]})]}),Object.keys(b||{}).length>0&&o.jsxs(he,{className:`${T?"bg-gray-800":"bg-gray-50"}`,children:[o.jsx(it,{children:o.jsx(lt,{className:`${T?"text-white":"text-black"}`,children:"Add New Show"})}),o.jsxs(me,{className:"space-y-4",children:[o.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[o.jsxs("div",{children:[o.jsx(_e,{htmlFor:"show-title",children:"Show Title"}),o.jsx(Ae,{id:"show-title",value:b.title||"",onChange:C=>w({...b,title:C.target.value}),placeholder:"Enter show title"})]}),o.jsxs("div",{children:[o.jsx(_e,{htmlFor:"show-host",children:"Host"}),o.jsx(Ae,{id:"show-host",value:b.host||"",onChange:C=>w({...b,host:C.target.value}),placeholder:"Enter host name"})]}),o.jsxs("div",{children:[o.jsx(_e,{htmlFor:"show-day",children:"Day of Week"}),o.jsxs(U1,{value:b.dayOfWeek||"",onValueChange:C=>w({...b,dayOfWeek:C}),children:[o.jsx(lf,{children:o.jsx($1,{placeholder:"Select day"})}),o.jsxs(cf,{children:[o.jsx(Mt,{value:"Monday",children:"Monday"}),o.jsx(Mt,{value:"Tuesday",children:"Tuesday"}),o.jsx(Mt,{value:"Wednesday",children:"Wednesday"}),o.jsx(Mt,{value:"Thursday",children:"Thursday"}),o.jsx(Mt,{value:"Friday",children:"Friday"}),o.jsx(Mt,{value:"Saturday",children:"Saturday"}),o.jsx(Mt,{value:"Sunday",children:"Sunday"})]})]})]}),o.jsxs("div",{children:[o.jsx(_e,{htmlFor:"show-time",children:"Time"}),o.jsx(Ae,{id:"show-time",value:b.time||"",onChange:C=>w({...b,time:C.target.value}),placeholder:"e.g., 7:00 PM"})]}),o.jsxs("div",{children:[o.jsx(_e,{htmlFor:"show-duration",children:"Duration"}),o.jsx(Ae,{id:"show-duration",value:b.duration||"",onChange:C=>w({...b,duration:C.target.value}),placeholder:"e.g., 2 hours"})]})]}),o.jsxs("div",{children:[o.jsx(_e,{htmlFor:"show-description",children:"Description"}),o.jsx(Ei,{id:"show-description",value:b.description||"",onChange:C=>w({...b,description:C.target.value}),placeholder:"Enter show description",rows:3})]}),o.jsxs("div",{className:"flex gap-2",children:[o.jsxs(q,{onClick:()=>j.mutate(b),disabled:j.isPending,style:{backgroundColor:k.primary},children:[o.jsx(km,{className:"w-4 h-4 mr-2"}),"Create Show"]}),o.jsx(q,{variant:"outline",onClick:()=>w({}),children:"Cancel"})]})]})]}),o.jsx("div",{className:"space-y-4",children:($||[]).map(C=>o.jsx(he,{className:`${T?"bg-gray-800":"bg-gray-50"}`,children:o.jsx(me,{className:"p-4",children:(m==null?void 0:m.id)===C.id?o.jsxs("div",{className:"space-y-4",children:[o.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[o.jsxs("div",{children:[o.jsx(_e,{children:"Show Title"}),o.jsx(Ae,{value:m.title,onChange:A=>x({...m,title:A.target.value})})]}),o.jsxs("div",{children:[o.jsx(_e,{children:"Host"}),o.jsx(Ae,{value:m.host,onChange:A=>x({...m,host:A.target.value})})]}),o.jsxs("div",{children:[o.jsx(_e,{children:"Day"}),o.jsx(Ae,{value:m.dayOfWeek,onChange:A=>x({...m,dayOfWeek:A.target.value})})]}),o.jsxs("div",{children:[o.jsx(_e,{children:"Time"}),o.jsx(Ae,{value:m.time,onChange:A=>x({...m,time:A.target.value})})]})]}),o.jsxs("div",{children:[o.jsx(_e,{children:"Description"}),o.jsx(Ei,{value:m.description,onChange:A=>x({...m,description:A.target.value}),rows:3})]}),o.jsxs("div",{className:"flex gap-2",children:[o.jsxs(q,{onClick:()=>E.mutate(m),disabled:E.isPending,style:{backgroundColor:k.primary},children:[o.jsx(km,{className:"w-4 h-4 mr-2"}),"Save"]}),o.jsx(q,{variant:"outline",onClick:()=>x(null),children:"Cancel"})]})]}):o.jsxs("div",{className:"flex justify-between items-start",children:[o.jsxs("div",{children:[o.jsx("h3",{className:`font-bold text-lg ${T?"text-white":"text-black"}`,children:C.title}),o.jsxs("p",{className:`text-sm ${T?"text-gray-400":"text-gray-600"}`,children:[C.host,"  ",C.dayOfWeek," ",C.time,"  ",C.duration]}),o.jsx("p",{className:`text-sm mt-2 ${T?"text-gray-300":"text-gray-700"}`,children:C.description})]}),o.jsx(q,{variant:"ghost",size:"sm",onClick:()=>x(C),children:o.jsx(Pm,{className:"w-4 h-4"})})]})})},C.id))})]}),e==="merch"&&o.jsxs("div",{className:"space-y-6",children:[o.jsxs("div",{className:"flex justify-between items-center",children:[o.jsx("h2",{className:`text-2xl font-bold ${T?"text-white":"text-black"}`,children:"Merchandise Management"}),o.jsxs(q,{onClick:()=>v({name:"",price:0,description:"",category:"",stock:0}),style:{backgroundColor:k.primary},children:[o.jsx(Im,{className:"w-4 h-4 mr-2"}),"Add Product"]})]}),o.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4",children:(S||[]).map(C=>o.jsx(he,{className:`${T?"bg-gray-800":"bg-gray-50"}`,children:o.jsxs(me,{className:"p-4",children:[o.jsx("div",{className:"aspect-square bg-gray-200 rounded-lg mb-4 flex items-center justify-center",children:o.jsx(Bc,{className:"w-16 h-16 text-gray-400"})}),o.jsx("h3",{className:`font-bold ${T?"text-white":"text-black"}`,children:C.name}),o.jsx("p",{className:`text-sm ${T?"text-gray-400":"text-gray-600"}`,children:C.description}),o.jsxs("div",{className:"flex justify-between items-center mt-2",children:[o.jsxs("span",{className:`font-bold ${T?"text-white":"text-black"}`,children:["$",C.price]}),o.jsx(Vt,{variant:C.featured?"default":"outline",children:C.featured?"Featured":"Standard"})]}),o.jsxs("div",{className:"flex gap-2 mt-4",children:[o.jsx(q,{variant:"outline",size:"sm",onClick:()=>h(C),children:o.jsx(Pm,{className:"w-4 h-4"})}),o.jsx(q,{variant:"outline",size:"sm",className:"text-red-500",children:o.jsx(RT,{className:"w-4 h-4"})})]})]})},C.id))})]}),e==="users"&&o.jsxs("div",{className:"space-y-6",children:[o.jsx("h2",{className:`text-2xl font-bold ${T?"text-white":"text-black"}`,children:"User Management"}),o.jsx("p",{className:`${T?"text-gray-400":"text-gray-600"}`,children:"User management features coming soon..."})]}),e==="settings"&&o.jsxs("div",{className:"space-y-6",children:[o.jsx("h2",{className:`text-2xl font-bold ${T?"text-white":"text-black"}`,children:"System Settings"}),o.jsx("p",{className:`${T?"text-gray-400":"text-gray-600"}`,children:"System settings and configuration options coming soon..."})]})]})]})})]})}):o.jsx("div",{className:"fixed inset-0 bg-black/50 backdrop-blur-sm z-50 flex items-center justify-center",children:o.jsxs(he,{ref:D,className:`w-full max-w-md relative ${T?"bg-gray-900":"bg-white"}`,children:[o.jsxs(it,{className:"relative",children:[o.jsx(q,{variant:"ghost",size:"sm",onClick:r,className:`absolute right-2 top-2 ${T?"text-white hover:bg-white/10":"text-black hover:bg-black/10"}`,children:o.jsx(Mr,{className:"w-4 h-4"})}),o.jsxs("div",{className:"text-center",children:[o.jsx(qa,{className:"w-12 h-12 mx-auto mb-4",style:{color:k.primary}}),o.jsx(lt,{className:`text-center ${T?"text-white":"text-black"}`,children:"Admin Access Login"})]})]}),o.jsxs(me,{className:"space-y-4",children:[o.jsx("div",{className:"text-center",children:o.jsx("p",{className:`text-sm ${T?"text-gray-400":"text-gray-600"}`,children:"Enter admin password below to access administrative site settings"})}),o.jsxs("div",{className:"space-y-2",children:[o.jsx(_e,{htmlFor:"admin-username",children:"Username"}),o.jsx(Ae,{id:"admin-username",type:"text",value:s,onChange:C=>n(C.target.value),placeholder:"Username",className:"placeholder:text-gray-400 placeholder:opacity-50"})]}),o.jsxs("div",{className:"space-y-2",children:[o.jsx(_e,{htmlFor:"admin-password",children:"Password"}),o.jsx(Ae,{id:"admin-password",type:"password",value:i,onChange:C=>a(C.target.value),placeholder:"Password",className:"placeholder:text-gray-400 placeholder:opacity-50",onKeyDown:C=>C.key==="Enter"&&I()})]}),o.jsxs("div",{className:"flex gap-2",children:[o.jsx(q,{variant:"outline",onClick:r,className:"flex-1 transition-all duration-300 hover:bg-red-500/10 hover:border-red-500 hover:text-red-500",children:"Cancel"}),o.jsx(q,{onClick:I,className:"flex-1 transition-all duration-300 hover:scale-105",style:{backgroundColor:k.primary},children:"Login"})]})]})]})})}function s3(){const{colors:r,gradient:e,currentTheme:t}=Me(),[s,n]=p.useState(!1),i=a=>{const l=document.getElementById(a);l&&l.scrollIntoView({behavior:"smooth"})};return o.jsxs("footer",{className:"py-12 transition-colors duration-300",style:{backgroundColor:r.background},children:[o.jsxs("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8",children:[o.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-8 mb-8",children:[o.jsxs("div",{children:[o.jsxs("div",{className:"flex items-center space-x-4 mb-4",children:[o.jsx("div",{className:"flex items-center justify-center w-8 h-8 rounded-full",style:{background:e,padding:"5px"},children:o.jsx("img",{src:Sw,alt:"Music Logo",className:"w-full h-full object-contain"})}),o.jsxs("div",{className:"flex flex-col",children:[o.jsx("div",{className:"text-sm font-black leading-tight",style:{color:t==="light-mode"?"#000000":r.text},children:"SPANDEX SALVATION"}),o.jsx("div",{className:"text-sm font-black leading-tight",style:{color:r.primary},children:"RADIO"})]})]}),o.jsx("p",{className:"text-sm",style:{color:r.textMuted},children:"Your home for old-school metal music. Broadcasting the rebellion since 2025."})]}),o.jsxs("div",{children:[o.jsx("h4",{className:"font-semibold mb-4",style:{color:t==="light-mode"?"#000000":r.text},children:"Quick Links"}),o.jsxs("ul",{className:"space-y-3 text-sm",children:[o.jsx("li",{children:o.jsx("button",{onClick:()=>i("hero"),className:"transition-colors text-left block p-0 m-0 bg-transparent border-0",style:{color:r.textMuted},onMouseEnter:a=>a.currentTarget.style.color=r.primary,onMouseLeave:a=>a.currentTarget.style.color=r.textMuted,children:"Home"})}),o.jsx("li",{children:o.jsx("button",{onClick:()=>i("schedule"),className:"transition-colors text-left block p-0 m-0 bg-transparent border-0",style:{color:r.textMuted},onMouseEnter:a=>a.currentTarget.style.color=r.primary,onMouseLeave:a=>a.currentTarget.style.color=r.textMuted,children:"Schedule"})}),o.jsx("li",{children:o.jsx("button",{onClick:()=>i("submissions"),className:"transition-colors text-left block p-0 m-0 bg-transparent border-0",style:{color:r.textMuted},onMouseEnter:a=>a.currentTarget.style.color=r.primary,onMouseLeave:a=>a.currentTarget.style.color=r.textMuted,children:"Submissions"})}),o.jsx("li",{children:o.jsx("button",{onClick:()=>i("contact"),className:"transition-colors text-left block p-0 m-0 bg-transparent border-0",style:{color:r.textMuted},onMouseEnter:a=>a.currentTarget.style.color=r.primary,onMouseLeave:a=>a.currentTarget.style.color=r.textMuted,children:"Contact"})}),o.jsx("li",{children:o.jsx("button",{onClick:()=>i("subscribe"),className:"transition-colors text-left block p-0 m-0 bg-transparent border-0",style:{color:r.textMuted},onMouseEnter:a=>a.currentTarget.style.color=r.primary,onMouseLeave:a=>a.currentTarget.style.color=r.textMuted,children:"Subscribe"})})]})]}),o.jsxs("div",{children:[o.jsx("h4",{className:"font-semibold mb-4",style:{color:t==="light-mode"?"#000000":r.text},children:"Support"}),o.jsxs("ul",{className:"space-y-3 text-sm",children:[o.jsx("li",{children:o.jsx("button",{onClick:()=>window.location.href="/help",className:"transition-colors text-left block p-0 m-0 bg-transparent border-0",style:{color:r.textMuted},onMouseEnter:a=>a.currentTarget.style.color=r.primary,onMouseLeave:a=>a.currentTarget.style.color=r.textMuted,children:"Help Center"})}),o.jsx("li",{children:o.jsx("button",{onClick:()=>i("contact"),className:"transition-colors text-left block p-0 m-0 bg-transparent border-0",style:{color:r.textMuted},onMouseEnter:a=>a.currentTarget.style.color=r.primary,onMouseLeave:a=>a.currentTarget.style.color=r.textMuted,children:"Technical Support"})}),o.jsx("li",{children:o.jsx("button",{onClick:()=>i("submissions"),className:"transition-colors text-left block p-0 m-0 bg-transparent border-0",style:{color:r.textMuted},onMouseEnter:a=>a.currentTarget.style.color=r.primary,onMouseLeave:a=>a.currentTarget.style.color=r.textMuted,children:"Submit Songs"})}),o.jsx("li",{children:o.jsx("button",{onClick:()=>window.location.href="/guidelines",className:"transition-colors text-left block p-0 m-0 bg-transparent border-0",style:{color:r.textMuted},onMouseEnter:a=>a.currentTarget.style.color=r.primary,onMouseLeave:a=>a.currentTarget.style.color=r.textMuted,children:"Community Guidelines"})}),o.jsx("li",{children:o.jsx("button",{onClick:()=>window.location.href="/privacy",className:"transition-colors text-left block p-0 m-0 bg-transparent border-0",style:{color:r.textMuted},onMouseEnter:a=>a.currentTarget.style.color=r.primary,onMouseLeave:a=>a.currentTarget.style.color=r.textMuted,children:"Privacy Policy"})})]})]}),o.jsxs("div",{children:[o.jsx("h4",{className:"font-semibold mb-4",style:{color:t==="light-mode"?"#000000":r.text},children:"Stream Info"}),o.jsxs("ul",{className:"space-y-3 text-sm",children:[o.jsx("li",{children:o.jsxs("div",{className:"flex items-center",style:{color:r.textMuted},children:[o.jsx("span",{className:"mr-3 flex-shrink-0",style:{color:r.primary},children:o.jsx(Uu,{className:"h-4 w-4"})}),o.jsx("span",{className:"-ml-7",children:"24/7 Live Stream"})]})}),o.jsx("li",{children:o.jsxs("div",{className:"flex items-center",style:{color:r.textMuted},children:[o.jsx("span",{className:"mr-3 flex-shrink-0 text-center w-4",style:{color:r.primary},children:""}),o.jsx("span",{className:"-ml-7",children:"320kbps Quality"})]})}),o.jsx("li",{children:o.jsxs("div",{className:"flex items-center",style:{color:r.textMuted},children:[o.jsx("span",{className:"mr-3 flex-shrink-0 text-center w-4",style:{color:r.primary},children:""}),o.jsx("span",{className:"-ml-7",children:"Global Coverage"})]})}),o.jsx("li",{children:o.jsxs("div",{className:"flex items-center",style:{color:r.textMuted},children:[o.jsx("span",{className:"mr-3 flex-shrink-0 text-center w-4",style:{color:r.primary},children:""}),o.jsx("span",{className:"-ml-7",children:"Secure & Reliable"})]})})]})]})]}),o.jsx("div",{className:"pt-8",children:o.jsxs("div",{className:"flex flex-col md:flex-row md:items-center justify-between",children:[o.jsx("div",{className:"text-sm font-semibold mb-4 md:mb-0 flex items-center",style:{color:t==="light-mode"?"rgba(0, 0, 0, 0.7)":r.textMuted},children:" 2025 Spandex Salvation Radio. All rights reserved."}),o.jsxs("div",{className:"flex flex-wrap items-center gap-6 text-sm",children:[o.jsx("a",{href:"/terms",className:"font-semibold transition-colors duration-300",style:{color:t==="light-mode"?"rgba(0, 0, 0, 0.7)":r.textMuted},onMouseEnter:a=>a.currentTarget.style.color=r.primary,onMouseLeave:a=>a.currentTarget.style.color=t==="light-mode"?"rgba(0, 0, 0, 0.7)":r.textMuted,children:"Terms of Service"}),o.jsx("a",{href:"/privacy",className:"font-semibold transition-colors duration-300",style:{color:t==="light-mode"?"rgba(0, 0, 0, 0.7)":r.textMuted},onMouseEnter:a=>a.currentTarget.style.color=r.primary,onMouseLeave:a=>a.currentTarget.style.color=t==="light-mode"?"rgba(0, 0, 0, 0.7)":r.textMuted,children:"Privacy Policy"}),o.jsx("a",{href:"/cookies",className:"font-semibold transition-colors duration-300",style:{color:t==="light-mode"?"rgba(0, 0, 0, 0.7)":r.textMuted},onMouseEnter:a=>a.currentTarget.style.color=r.primary,onMouseLeave:a=>a.currentTarget.style.color=t==="light-mode"?"rgba(0, 0, 0, 0.7)":r.textMuted,children:"Cookies"}),o.jsx("button",{onClick:()=>n(!0),className:"font-semibold transition-colors duration-300 bg-transparent border-0 p-0",style:{color:t==="light-mode"?"rgba(0, 0, 0, 0.7)":r.textMuted},onMouseEnter:a=>a.currentTarget.style.color=r.primary,onMouseLeave:a=>a.currentTarget.style.color=t==="light-mode"?"rgba(0, 0, 0, 0.7)":r.textMuted,children:"Admin"})]})]})})]}),s&&o.jsx(r3,{onClose:()=>n(!1)})]})}function H1(){const{isPlaying:r,volume:e,currentTrack:t,stationName:s,togglePlayback:n,setVolume:i,isLoading:a,isMuted:l,toggleMute:d,isAdPlaying:u,adInfo:h}=Ga(),{getGradient:m,getColors:x,currentTheme:g}=Me(),v=x(),[b,w]=p.useState(!0),[k,T]=p.useState(0),_=R=>{const D=parseInt(R.target.value)/100;i(D),l&&D>0&&d()};return p.useEffect(()=>{const R=()=>{const D=window.scrollY,$=document.documentElement.scrollHeight,S=window.innerHeight;D+S>=$-200?w(!1):(D<k||D<100)&&w(!0),T(D)};return window.addEventListener("scroll",R,{passive:!0}),()=>window.removeEventListener("scroll",R)},[k]),o.jsx("div",{className:`fixed bottom-2 left-4 bg-card/95 backdrop-blur-sm z-50 transition-all duration-500 rounded-2xl shadow-lg ${b?"transform translate-y-0 opacity-100":"transform translate-y-full opacity-0"}`,style:{width:"320px",maxWidth:"calc(100vw - 32px)"},role:"region","aria-label":"Floating audio player","aria-live":"polite",children:o.jsx("div",{className:"w-full px-3 py-2 relative",children:o.jsxs("div",{className:"flex items-center justify-between mb-2",children:[o.jsx(Aw,{artwork:u&&h.artwork?h.artwork:t.artwork,title:t.title,artist:t.artist,size:"sm",className:"w-12 h-12",isAd:u}),o.jsxs("div",{className:"min-w-0 ml-3",style:{width:"60%"},children:[u&&o.jsx("div",{className:"mb-1 flex justify-start",children:o.jsxs("div",{className:"inline-flex items-center px-1.5 py-0.5 rounded-full text-xs font-bold text-white animate-pulse",style:{background:"linear-gradient(45deg, #ff4444, #cc0000)",boxShadow:"0 1px 4px #ff444460"},children:[o.jsx("span",{className:"mr-1 text-xs",children:""}),"AD",h.company&&o.jsxs("span",{className:"ml-1 opacity-80 text-xs",children:[" ",h.company]})]})}),o.jsx("div",{className:"w-full overflow-hidden",children:o.jsx(jw,{text:t.title!==s?t.title:s,className:`font-semibold text-sm whitespace-nowrap ${u?"text-red-400":""}`,style:{color:u?"#f87171":g==="light-mode"?"#000000":v.text},maxWidth:"100%",isFloating:!0,backgroundColor:"hsl(var(--background))",alignment:"left"})}),t.artist&&t.artist!==t.title&&t.artist!==s&&o.jsx("div",{className:"text-xs text-muted-foreground truncate mt-0.5",children:t.artist}),o.jsxs("div",{className:"flex items-center justify-between mt-1",children:[o.jsxs("div",{className:"flex items-center space-x-1",children:[o.jsx("div",{className:`w-2 h-2 rounded-full animate-pulse ${u?"bg-red-600":"bg-red-500"}`}),o.jsx("span",{className:`text-xs font-medium ${u?"text-red-600":"text-red-500"}`,children:u?"AD":"LIVE"})]}),o.jsx("div",{className:"hidden sm:flex items-center justify-center flex-1 mx-2",children:o.jsxs("div",{className:"flex items-center space-x-2",children:[o.jsx(LT,{className:"h-3 w-3 cursor-pointer transition-colors",style:{color:l?"#ef4444":g==="light-mode"?"#4b5563":"#9ca3af"},onMouseEnter:R=>{l||(R.currentTarget.style.color=g==="light-mode"?"#374151":"#d1d5db")},onMouseLeave:R=>{R.currentTarget.style.color=l?"#ef4444":g==="light-mode"?"#4b5563":"#9ca3af"},onClick:d}),o.jsxs("div",{className:"w-16 h-1 rounded-full relative",style:{backgroundColor:g==="light-mode"?"#d1d5db":"#374151"},children:[o.jsx("div",{className:"h-1 rounded-full transition-all duration-150",style:{width:`${(l?0:e)*100}%`,background:`linear-gradient(45deg, ${v.primary}, ${v.secondary})`}}),o.jsx("input",{type:"range",min:"0",max:"100",value:(l?0:e)*100,onChange:_,className:"absolute inset-0 w-full h-full opacity-0 cursor-pointer","aria-label":"Volume control",title:"Adjust volume"})]}),o.jsxs("span",{className:"text-xs font-medium min-w-[20px] text-center",style:{color:g==="light-mode"?"#6b7280":"#9ca3af"},children:[Math.round((l?0:e)*100),"%"]})]})})]})]}),o.jsxs("div",{className:"relative",children:[a&&o.jsx("div",{className:"absolute inset-0 flex items-center justify-center",children:o.jsx("div",{className:"w-7 h-7 border-2 border-t-transparent rounded-full animate-spin",style:{borderColor:v.primary,borderTopColor:"transparent"}})}),o.jsx(q,{onClick:n,className:"text-white w-10 h-10 rounded-full focus:outline-none focus:ring-2 flex items-center justify-center transition-all duration-300 hover:scale-110 shadow-lg hover:shadow-xl",style:{background:`linear-gradient(45deg, ${v.primary}, ${v.secondary})`,boxShadow:`0 4px 20px ${v.primary}60`,opacity:a?.5:1},"aria-label":r?"Pause radio stream":"Play radio stream",disabled:a,children:!a&&o.jsx(o.Fragment,{children:r?o.jsx("svg",{className:"h-15 w-15",fill:"currentColor",viewBox:"0 0 24 24",children:o.jsx("rect",{x:"4",y:"4",width:"16",height:"16",rx:"4",strokeLinejoin:"round",strokeLinecap:"round"})}):o.jsx("svg",{className:"h-15 w-15",fill:"currentColor",viewBox:"0 0 24 24",children:o.jsx("path",{d:"M8 5c0-.6.4-1 1-1 .2 0 .5.1.7.3l9 7c.8.6.8 1.8 0 2.4l-9 7c-.2.2-.5.3-.7.3-.6 0-1-.4-1-1V5z"})})})})]})]})})})}function n3(){const[r,e]=p.useState(!1),{user:t,isAuthenticated:s}=Rs(),{colors:n}=Me(),i=(t==null?void 0:t.stripeSubscriptionId)||!1,a=()=>{(!s||!i)&&e(!0)},l=()=>{const u=new CustomEvent("openAuthModal",{detail:{mode:"login"}});window.dispatchEvent(u),e(!1)},d=()=>{var u;(u=document.getElementById("subscribe"))==null||u.scrollIntoView({behavior:"smooth"}),e(!1)};return!s||!i?null:o.jsxs(o.Fragment,{children:[o.jsx(q,{onClick:a,size:"lg",className:"fixed bottom-4 right-4 z-30 w-14 h-14 rounded-full text-white shadow-lg hover:shadow-xl transition-all duration-300 hover:scale-110",style:{background:`linear-gradient(45deg, ${n.primary}, ${n.secondary})`,boxShadow:`0 8px 32px ${n.primary}40`},onMouseEnter:u=>{u.currentTarget.style.transform="scale(1.1)",u.currentTarget.style.boxShadow=`0 12px 40px ${n.primary}60`},onMouseLeave:u=>{u.currentTarget.style.transform="scale(1)",u.currentTarget.style.boxShadow=`0 8px 32px ${n.primary}40`},"aria-label":"Open live chat",children:o.jsx(Jo,{className:"h-6 w-6"})}),r&&o.jsx("div",{className:"fixed top-4 right-4 z-50 animate-in fade-in slide-in-from-top-2 duration-300",children:o.jsx(he,{className:"w-80 shadow-xl border-2 backdrop-blur-sm",style:{backgroundColor:n.surface,borderColor:n.primary,boxShadow:`0 10px 40px ${n.primary}30`},children:o.jsxs(me,{className:"p-6 relative",children:[o.jsx(q,{variant:"ghost",size:"sm",onClick:()=>e(!1),className:"absolute top-2 right-2 w-6 h-6 p-0 hover:bg-transparent",style:{color:n.textSecondary},children:o.jsx(Mr,{className:"h-4 w-4"})}),o.jsxs("div",{className:"text-center space-y-4",children:[o.jsxs("div",{className:"flex items-center justify-center",children:[o.jsx(lr,{className:"w-8 h-8 mr-2",style:{color:n.primary}}),o.jsx("h3",{className:"font-bold text-lg",style:{color:n.primary},children:"Premium Feature"})]}),s?o.jsxs(o.Fragment,{children:[o.jsx("p",{className:"text-sm",style:{color:n.text},children:"Live chat requires a premium subscription. Upgrade now to join the metalhead community!"}),o.jsxs("div",{className:"space-y-2",children:[o.jsx("p",{className:"text-xs",style:{color:n.textSecondary},children:" Live Chat Access  Song Submissions  Exclusive Content"}),o.jsx(q,{size:"sm",onClick:d,className:"w-full text-white border-0",style:{backgroundColor:n.primary},children:"Upgrade Now"})]})]}):o.jsxs(o.Fragment,{children:[o.jsx("p",{className:"text-sm",style:{color:n.text},children:"Live chat is available exclusively to premium subscribers. Create an account and upgrade to join the conversation!"}),o.jsxs("div",{className:"space-y-2",children:[o.jsx("p",{className:"text-xs",style:{color:n.textSecondary},children:" Live Chat Access  Song Submissions  Exclusive Content"}),o.jsxs("div",{className:"flex gap-2",children:[o.jsxs(q,{size:"sm",onClick:l,className:"flex-1 border-0",style:{backgroundColor:n.primary,color:n.primaryText||"white"},children:[o.jsx(h0,{className:"w-4 h-4 mr-1"}),"Sign In"]}),o.jsx(q,{size:"sm",variant:"outline",onClick:d,className:"flex-1",style:{borderColor:n.primary,color:n.primary,backgroundColor:"transparent"},children:"Subscribe"})]})]})]})]})]})})})]})}function o3(){const[r,e]=p.useState(!0),{getColors:t,currentTheme:s}=Me(),n=t();return p.useEffect(()=>{const i=()=>{const a=window.location.hash.substring(1);a&&setTimeout(()=>{const l=document.getElementById(a);l&&l.scrollIntoView({behavior:"smooth",block:"start"})},100)};return i(),window.addEventListener("hashchange",i),()=>{window.removeEventListener("hashchange",i)}},[]),o.jsxs("div",{className:"min-h-screen transition-colors duration-300",style:{backgroundColor:n.background,color:n.text},children:[o.jsx(kw,{}),o.jsx(WR,{}),o.jsx(rr,{direction:"up",delay:0,children:o.jsx(GR,{})}),o.jsx(rr,{direction:"up",delay:0,children:o.jsx(KR,{})}),o.jsx(rr,{direction:"up",delay:0,children:o.jsx(QR,{})}),o.jsx(rr,{direction:"up",delay:0,children:o.jsx("section",{id:"subscribe",className:"py-20 transition-colors duration-300",style:{backgroundColor:n.background},children:o.jsxs("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8",children:[o.jsxs("div",{className:"text-center mb-16",children:[o.jsx("h2",{className:"font-orbitron font-black text-3xl md:text-4xl mb-4",style:{color:s==="light-mode"?"#000000":n.text},children:"Supporters Enjoy More"}),o.jsx("p",{className:"text-lg font-semibold",style:{color:s==="light-mode"?"rgba(0, 0, 0, 0.7)":n.textMuted},children:"Support our growth and enjoy exclusive content."})]}),o.jsx(X5,{})]})})}),o.jsx(rr,{direction:"up",delay:0,children:o.jsx(m5,{})}),o.jsx(rr,{direction:"up",delay:0,children:o.jsx("section",{id:"map",children:o.jsx(g5,{})})}),o.jsx(rr,{direction:"up",delay:0,children:o.jsx(G5,{})}),o.jsx(rr,{direction:"up",delay:0,children:o.jsx(Z5,{})}),o.jsx(rr,{direction:"up",delay:0,children:o.jsx(s3,{})}),o.jsx(H1,{}),o.jsx(n3,{})]})}function i3(){const{colors:r}=Me(),[e,t]=p.useState("95.5 The Beat"),[s,n]=p.useState(!1),i=["95.5 The Beat","Hot 97","Power 106","SomaFM Metal"],l={"95.5 The Beat":{name:"95.5 The Beat",description:"Dallas' Hip Hop and R&B - Playing the hottest tracks 24/7",frequency:"95.5 FM",listeners:"100K+"},"Hot 97":{name:"Hot 97",description:"New York's Hip Hop & R&B - Where Hip Hop Lives",frequency:"97.1 FM",listeners:"500K+"},"Power 106":{name:"Power 106",description:"Los Angeles' Hip Hop Station - LA's #1 for Hip Hop",frequency:"105.9 FM",listeners:"300K+"},"SomaFM Metal":{name:"SomaFM Metal Detector",description:"From black to doom, prog to sludge, thrash to post, stoner to crossover",frequency:"Online",listeners:"50K+"}}[e];return o.jsxs(o.Fragment,{children:[o.jsx(kw,{}),o.jsx("div",{id:"music",className:"min-h-screen bg-background pt-20 pb-8",children:o.jsxs("div",{className:"container mx-auto px-4",children:[o.jsxs("div",{className:"text-center mb-8",children:[o.jsx("h1",{className:"text-4xl font-black text-foreground mb-4",children:"LIVE RADIO"}),o.jsx("p",{className:"text-xl text-muted-foreground mb-6",children:"Stream Your Favorite Stations 24/7"})]}),o.jsx("div",{className:"max-w-4xl mx-auto mb-6",children:o.jsx("div",{className:"flex justify-center",children:o.jsxs("div",{className:"relative",children:[o.jsxs("button",{onClick:()=>n(!s),className:"flex items-center space-x-2 px-6 py-3 rounded-lg transition-all duration-200 font-semibold text-white",style:{backgroundColor:r.primary,border:`2px solid ${r.primary}`},onMouseEnter:d=>{d.currentTarget.style.backgroundColor=r.secondary},onMouseLeave:d=>{d.currentTarget.style.backgroundColor=r.primary},children:[o.jsx("span",{children:e}),o.jsx(Qn,{size:16,style:{transform:s?"rotate(180deg)":"rotate(0deg)",transition:"transform 0.2s ease"}})]}),s&&o.jsx("div",{className:"absolute top-full left-1/2 transform -translate-x-1/2 mt-2 py-2 rounded-lg shadow-xl border backdrop-blur-md z-50",style:{backgroundColor:r.background==="#000000"?"rgba(0, 0, 0, 0.95)":"rgba(255, 255, 255, 0.95)",borderColor:r.primary+"40",minWidth:"200px"},children:i.map(d=>o.jsx("button",{onClick:()=>{t(d),n(!1)},className:"w-full px-4 py-2 text-left hover:rounded transition-colors duration-200",style:{color:e===d?"white":r.text,backgroundColor:e===d?r.primary:"transparent"},onMouseEnter:u=>{e!==d&&(u.currentTarget.style.backgroundColor=r.primary+"20")},onMouseLeave:u=>{e!==d&&(u.currentTarget.style.backgroundColor="transparent")},children:d},d))})]})})}),o.jsx("div",{className:"max-w-4xl mx-auto",children:o.jsx(Pw,{})}),o.jsx("div",{className:"max-w-4xl mx-auto mt-8",children:o.jsxs("div",{className:"bg-black/90 backdrop-blur-md rounded-lg p-6 border",style:{borderColor:r.primary+"20"},children:[o.jsxs("h2",{className:"text-2xl font-bold mb-4",style:{color:r.text},children:["About ",l.name]}),o.jsx("p",{className:"mb-4",style:{color:r.text,opacity:.8},children:l.description}),o.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4 mt-6",children:[o.jsxs("div",{className:"text-center",children:[o.jsx("div",{className:"font-bold text-xl",style:{color:r.primary},children:"24/7"}),o.jsx("div",{style:{color:r.text,opacity:.6},children:"Live Broadcasting"})]}),o.jsxs("div",{className:"text-center",children:[o.jsx("div",{className:"font-bold text-xl",style:{color:r.primary},children:l.frequency}),o.jsx("div",{style:{color:r.text,opacity:.6},children:"Frequency"})]}),o.jsxs("div",{className:"text-center",children:[o.jsx("div",{className:"font-bold text-xl",style:{color:r.primary},children:l.listeners}),o.jsx("div",{style:{color:r.text,opacity:.6},children:"Active Listeners"})]})]})]})})]})}),o.jsx(H1,{})]})}function er(r){const e=Object.prototype.toString.call(r);return r instanceof Date||typeof r=="object"&&e==="[object Date]"?new r.constructor(+r):typeof r=="number"||e==="[object Number]"||typeof r=="string"||e==="[object String]"?new Date(r):new Date(NaN)}function hn(r,e){return r instanceof Date?new r.constructor(e):new Date(e)}const q1=6048e5,a3=864e5;let l3={};function yc(){return l3}function Ni(r,e){var l,d,u,h;const t=yc(),s=(e==null?void 0:e.weekStartsOn)??((d=(l=e==null?void 0:e.locale)==null?void 0:l.options)==null?void 0:d.weekStartsOn)??t.weekStartsOn??((h=(u=t.locale)==null?void 0:u.options)==null?void 0:h.weekStartsOn)??0,n=er(r),i=n.getDay(),a=(i<s?7:0)+i-s;return n.setDate(n.getDate()-a),n.setHours(0,0,0,0),n}function Nl(r){return Ni(r,{weekStartsOn:1})}function W1(r){const e=er(r),t=e.getFullYear(),s=hn(r,0);s.setFullYear(t+1,0,4),s.setHours(0,0,0,0);const n=Nl(s),i=hn(r,0);i.setFullYear(t,0,4),i.setHours(0,0,0,0);const a=Nl(i);return e.getTime()>=n.getTime()?t+1:e.getTime()>=a.getTime()?t:t-1}function Pg(r){const e=er(r);return e.setHours(0,0,0,0),e}function Rg(r){const e=er(r),t=new Date(Date.UTC(e.getFullYear(),e.getMonth(),e.getDate(),e.getHours(),e.getMinutes(),e.getSeconds(),e.getMilliseconds()));return t.setUTCFullYear(e.getFullYear()),+r-+t}function c3(r,e){const t=Pg(r),s=Pg(e),n=+t-Rg(t),i=+s-Rg(s);return Math.round((n-i)/a3)}function d3(r){const e=W1(r),t=hn(r,0);return t.setFullYear(e,0,4),t.setHours(0,0,0,0),Nl(t)}function u3(r){return r instanceof Date||typeof r=="object"&&Object.prototype.toString.call(r)==="[object Date]"}function h3(r){if(!u3(r)&&typeof r!="number")return!1;const e=er(r);return!isNaN(Number(e))}function f3(r){const e=er(r),t=hn(r,0);return t.setFullYear(e.getFullYear(),0,1),t.setHours(0,0,0,0),t}const m3={lessThanXSeconds:{one:"less than a second",other:"less than {{count}} seconds"},xSeconds:{one:"1 second",other:"{{count}} seconds"},halfAMinute:"half a minute",lessThanXMinutes:{one:"less than a minute",other:"less than {{count}} minutes"},xMinutes:{one:"1 minute",other:"{{count}} minutes"},aboutXHours:{one:"about 1 hour",other:"about {{count}} hours"},xHours:{one:"1 hour",other:"{{count}} hours"},xDays:{one:"1 day",other:"{{count}} days"},aboutXWeeks:{one:"about 1 week",other:"about {{count}} weeks"},xWeeks:{one:"1 week",other:"{{count}} weeks"},aboutXMonths:{one:"about 1 month",other:"about {{count}} months"},xMonths:{one:"1 month",other:"{{count}} months"},aboutXYears:{one:"about 1 year",other:"about {{count}} years"},xYears:{one:"1 year",other:"{{count}} years"},overXYears:{one:"over 1 year",other:"over {{count}} years"},almostXYears:{one:"almost 1 year",other:"almost {{count}} years"}},p3=(r,e,t)=>{let s;const n=m3[r];return typeof n=="string"?s=n:e===1?s=n.one:s=n.other.replace("{{count}}",e.toString()),t!=null&&t.addSuffix?t.comparison&&t.comparison>0?"in "+s:s+" ago":s};function hd(r){return(e={})=>{const t=e.width?String(e.width):r.defaultWidth;return r.formats[t]||r.formats[r.defaultWidth]}}const g3={full:"EEEE, MMMM do, y",long:"MMMM do, y",medium:"MMM d, y",short:"MM/dd/yyyy"},x3={full:"h:mm:ss a zzzz",long:"h:mm:ss a z",medium:"h:mm:ss a",short:"h:mm a"},y3={full:"{{date}} 'at' {{time}}",long:"{{date}} 'at' {{time}}",medium:"{{date}}, {{time}}",short:"{{date}}, {{time}}"},b3={date:hd({formats:g3,defaultWidth:"full"}),time:hd({formats:x3,defaultWidth:"full"}),dateTime:hd({formats:y3,defaultWidth:"full"})},v3={lastWeek:"'last' eeee 'at' p",yesterday:"'yesterday at' p",today:"'today at' p",tomorrow:"'tomorrow at' p",nextWeek:"eeee 'at' p",other:"P"},w3=(r,e,t,s)=>v3[r];function $o(r){return(e,t)=>{const s=t!=null&&t.context?String(t.context):"standalone";let n;if(s==="formatting"&&r.formattingValues){const a=r.defaultFormattingWidth||r.defaultWidth,l=t!=null&&t.width?String(t.width):a;n=r.formattingValues[l]||r.formattingValues[a]}else{const a=r.defaultWidth,l=t!=null&&t.width?String(t.width):r.defaultWidth;n=r.values[l]||r.values[a]}const i=r.argumentCallback?r.argumentCallback(e):e;return n[i]}}const _3={narrow:["B","A"],abbreviated:["BC","AD"],wide:["Before Christ","Anno Domini"]},T3={narrow:["1","2","3","4"],abbreviated:["Q1","Q2","Q3","Q4"],wide:["1st quarter","2nd quarter","3rd quarter","4th quarter"]},E3={narrow:["J","F","M","A","M","J","J","A","S","O","N","D"],abbreviated:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],wide:["January","February","March","April","May","June","July","August","September","October","November","December"]},N3={narrow:["S","M","T","W","T","F","S"],short:["Su","Mo","Tu","We","Th","Fr","Sa"],abbreviated:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],wide:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"]},C3={narrow:{am:"a",pm:"p",midnight:"mi",noon:"n",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"},abbreviated:{am:"AM",pm:"PM",midnight:"midnight",noon:"noon",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"},wide:{am:"a.m.",pm:"p.m.",midnight:"midnight",noon:"noon",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"}},I3={narrow:{am:"a",pm:"p",midnight:"mi",noon:"n",morning:"in the morning",afternoon:"in the afternoon",evening:"in the evening",night:"at night"},abbreviated:{am:"AM",pm:"PM",midnight:"midnight",noon:"noon",morning:"in the morning",afternoon:"in the afternoon",evening:"in the evening",night:"at night"},wide:{am:"a.m.",pm:"p.m.",midnight:"midnight",noon:"noon",morning:"in the morning",afternoon:"in the afternoon",evening:"in the evening",night:"at night"}},S3=(r,e)=>{const t=Number(r),s=t%100;if(s>20||s<10)switch(s%10){case 1:return t+"st";case 2:return t+"nd";case 3:return t+"rd"}return t+"th"},k3={ordinalNumber:S3,era:$o({values:_3,defaultWidth:"wide"}),quarter:$o({values:T3,defaultWidth:"wide",argumentCallback:r=>r-1}),month:$o({values:E3,defaultWidth:"wide"}),day:$o({values:N3,defaultWidth:"wide"}),dayPeriod:$o({values:C3,defaultWidth:"wide",formattingValues:I3,defaultFormattingWidth:"wide"})};function Bo(r){return(e,t={})=>{const s=t.width,n=s&&r.matchPatterns[s]||r.matchPatterns[r.defaultMatchWidth],i=e.match(n);if(!i)return null;const a=i[0],l=s&&r.parsePatterns[s]||r.parsePatterns[r.defaultParseWidth],d=Array.isArray(l)?A3(l,m=>m.test(a)):j3(l,m=>m.test(a));let u;u=r.valueCallback?r.valueCallback(d):d,u=t.valueCallback?t.valueCallback(u):u;const h=e.slice(a.length);return{value:u,rest:h}}}function j3(r,e){for(const t in r)if(Object.prototype.hasOwnProperty.call(r,t)&&e(r[t]))return t}function A3(r,e){for(let t=0;t<r.length;t++)if(e(r[t]))return t}function P3(r){return(e,t={})=>{const s=e.match(r.matchPattern);if(!s)return null;const n=s[0],i=e.match(r.parsePattern);if(!i)return null;let a=r.valueCallback?r.valueCallback(i[0]):i[0];a=t.valueCallback?t.valueCallback(a):a;const l=e.slice(n.length);return{value:a,rest:l}}}const R3=/^(\d+)(th|st|nd|rd)?/i,M3=/\d+/i,D3={narrow:/^(b|a)/i,abbreviated:/^(b\.?\s?c\.?|b\.?\s?c\.?\s?e\.?|a\.?\s?d\.?|c\.?\s?e\.?)/i,wide:/^(before christ|before common era|anno domini|common era)/i},O3={any:[/^b/i,/^(a|c)/i]},L3={narrow:/^[1234]/i,abbreviated:/^q[1234]/i,wide:/^[1234](th|st|nd|rd)? quarter/i},V3={any:[/1/i,/2/i,/3/i,/4/i]},F3={narrow:/^[jfmasond]/i,abbreviated:/^(jan|feb|mar|apr|may|jun|jul|aug|sep|oct|nov|dec)/i,wide:/^(january|february|march|april|may|june|july|august|september|october|november|december)/i},U3={narrow:[/^j/i,/^f/i,/^m/i,/^a/i,/^m/i,/^j/i,/^j/i,/^a/i,/^s/i,/^o/i,/^n/i,/^d/i],any:[/^ja/i,/^f/i,/^mar/i,/^ap/i,/^may/i,/^jun/i,/^jul/i,/^au/i,/^s/i,/^o/i,/^n/i,/^d/i]},$3={narrow:/^[smtwf]/i,short:/^(su|mo|tu|we|th|fr|sa)/i,abbreviated:/^(sun|mon|tue|wed|thu|fri|sat)/i,wide:/^(sunday|monday|tuesday|wednesday|thursday|friday|saturday)/i},B3={narrow:[/^s/i,/^m/i,/^t/i,/^w/i,/^t/i,/^f/i,/^s/i],any:[/^su/i,/^m/i,/^tu/i,/^w/i,/^th/i,/^f/i,/^sa/i]},z3={narrow:/^(a|p|mi|n|(in the|at) (morning|afternoon|evening|night))/i,any:/^([ap]\.?\s?m\.?|midnight|noon|(in the|at) (morning|afternoon|evening|night))/i},H3={any:{am:/^a/i,pm:/^p/i,midnight:/^mi/i,noon:/^no/i,morning:/morning/i,afternoon:/afternoon/i,evening:/evening/i,night:/night/i}},q3={ordinalNumber:P3({matchPattern:R3,parsePattern:M3,valueCallback:r=>parseInt(r,10)}),era:Bo({matchPatterns:D3,defaultMatchWidth:"wide",parsePatterns:O3,defaultParseWidth:"any"}),quarter:Bo({matchPatterns:L3,defaultMatchWidth:"wide",parsePatterns:V3,defaultParseWidth:"any",valueCallback:r=>r+1}),month:Bo({matchPatterns:F3,defaultMatchWidth:"wide",parsePatterns:U3,defaultParseWidth:"any"}),day:Bo({matchPatterns:$3,defaultMatchWidth:"wide",parsePatterns:B3,defaultParseWidth:"any"}),dayPeriod:Bo({matchPatterns:z3,defaultMatchWidth:"any",parsePatterns:H3,defaultParseWidth:"any"})},W3={code:"en-US",formatDistance:p3,formatLong:b3,formatRelative:w3,localize:k3,match:q3,options:{weekStartsOn:0,firstWeekContainsDate:1}};function G3(r){const e=er(r);return c3(e,f3(e))+1}function K3(r){const e=er(r),t=+Nl(e)-+d3(e);return Math.round(t/q1)+1}function G1(r,e){var h,m,x,g;const t=er(r),s=t.getFullYear(),n=yc(),i=(e==null?void 0:e.firstWeekContainsDate)??((m=(h=e==null?void 0:e.locale)==null?void 0:h.options)==null?void 0:m.firstWeekContainsDate)??n.firstWeekContainsDate??((g=(x=n.locale)==null?void 0:x.options)==null?void 0:g.firstWeekContainsDate)??1,a=hn(r,0);a.setFullYear(s+1,0,i),a.setHours(0,0,0,0);const l=Ni(a,e),d=hn(r,0);d.setFullYear(s,0,i),d.setHours(0,0,0,0);const u=Ni(d,e);return t.getTime()>=l.getTime()?s+1:t.getTime()>=u.getTime()?s:s-1}function Q3(r,e){var l,d,u,h;const t=yc(),s=(e==null?void 0:e.firstWeekContainsDate)??((d=(l=e==null?void 0:e.locale)==null?void 0:l.options)==null?void 0:d.firstWeekContainsDate)??t.firstWeekContainsDate??((h=(u=t.locale)==null?void 0:u.options)==null?void 0:h.firstWeekContainsDate)??1,n=G1(r,e),i=hn(r,0);return i.setFullYear(n,0,s),i.setHours(0,0,0,0),Ni(i,e)}function Y3(r,e){const t=er(r),s=+Ni(t,e)-+Q3(t,e);return Math.round(s/q1)+1}function Ve(r,e){const t=r<0?"-":"",s=Math.abs(r).toString().padStart(e,"0");return t+s}const Yr={y(r,e){const t=r.getFullYear(),s=t>0?t:1-t;return Ve(e==="yy"?s%100:s,e.length)},M(r,e){const t=r.getMonth();return e==="M"?String(t+1):Ve(t+1,2)},d(r,e){return Ve(r.getDate(),e.length)},a(r,e){const t=r.getHours()/12>=1?"pm":"am";switch(e){case"a":case"aa":return t.toUpperCase();case"aaa":return t;case"aaaaa":return t[0];case"aaaa":default:return t==="am"?"a.m.":"p.m."}},h(r,e){return Ve(r.getHours()%12||12,e.length)},H(r,e){return Ve(r.getHours(),e.length)},m(r,e){return Ve(r.getMinutes(),e.length)},s(r,e){return Ve(r.getSeconds(),e.length)},S(r,e){const t=e.length,s=r.getMilliseconds(),n=Math.trunc(s*Math.pow(10,t-3));return Ve(n,e.length)}},_n={midnight:"midnight",noon:"noon",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"},Mg={G:function(r,e,t){const s=r.getFullYear()>0?1:0;switch(e){case"G":case"GG":case"GGG":return t.era(s,{width:"abbreviated"});case"GGGGG":return t.era(s,{width:"narrow"});case"GGGG":default:return t.era(s,{width:"wide"})}},y:function(r,e,t){if(e==="yo"){const s=r.getFullYear(),n=s>0?s:1-s;return t.ordinalNumber(n,{unit:"year"})}return Yr.y(r,e)},Y:function(r,e,t,s){const n=G1(r,s),i=n>0?n:1-n;if(e==="YY"){const a=i%100;return Ve(a,2)}return e==="Yo"?t.ordinalNumber(i,{unit:"year"}):Ve(i,e.length)},R:function(r,e){const t=W1(r);return Ve(t,e.length)},u:function(r,e){const t=r.getFullYear();return Ve(t,e.length)},Q:function(r,e,t){const s=Math.ceil((r.getMonth()+1)/3);switch(e){case"Q":return String(s);case"QQ":return Ve(s,2);case"Qo":return t.ordinalNumber(s,{unit:"quarter"});case"QQQ":return t.quarter(s,{width:"abbreviated",context:"formatting"});case"QQQQQ":return t.quarter(s,{width:"narrow",context:"formatting"});case"QQQQ":default:return t.quarter(s,{width:"wide",context:"formatting"})}},q:function(r,e,t){const s=Math.ceil((r.getMonth()+1)/3);switch(e){case"q":return String(s);case"qq":return Ve(s,2);case"qo":return t.ordinalNumber(s,{unit:"quarter"});case"qqq":return t.quarter(s,{width:"abbreviated",context:"standalone"});case"qqqqq":return t.quarter(s,{width:"narrow",context:"standalone"});case"qqqq":default:return t.quarter(s,{width:"wide",context:"standalone"})}},M:function(r,e,t){const s=r.getMonth();switch(e){case"M":case"MM":return Yr.M(r,e);case"Mo":return t.ordinalNumber(s+1,{unit:"month"});case"MMM":return t.month(s,{width:"abbreviated",context:"formatting"});case"MMMMM":return t.month(s,{width:"narrow",context:"formatting"});case"MMMM":default:return t.month(s,{width:"wide",context:"formatting"})}},L:function(r,e,t){const s=r.getMonth();switch(e){case"L":return String(s+1);case"LL":return Ve(s+1,2);case"Lo":return t.ordinalNumber(s+1,{unit:"month"});case"LLL":return t.month(s,{width:"abbreviated",context:"standalone"});case"LLLLL":return t.month(s,{width:"narrow",context:"standalone"});case"LLLL":default:return t.month(s,{width:"wide",context:"standalone"})}},w:function(r,e,t,s){const n=Y3(r,s);return e==="wo"?t.ordinalNumber(n,{unit:"week"}):Ve(n,e.length)},I:function(r,e,t){const s=K3(r);return e==="Io"?t.ordinalNumber(s,{unit:"week"}):Ve(s,e.length)},d:function(r,e,t){return e==="do"?t.ordinalNumber(r.getDate(),{unit:"date"}):Yr.d(r,e)},D:function(r,e,t){const s=G3(r);return e==="Do"?t.ordinalNumber(s,{unit:"dayOfYear"}):Ve(s,e.length)},E:function(r,e,t){const s=r.getDay();switch(e){case"E":case"EE":case"EEE":return t.day(s,{width:"abbreviated",context:"formatting"});case"EEEEE":return t.day(s,{width:"narrow",context:"formatting"});case"EEEEEE":return t.day(s,{width:"short",context:"formatting"});case"EEEE":default:return t.day(s,{width:"wide",context:"formatting"})}},e:function(r,e,t,s){const n=r.getDay(),i=(n-s.weekStartsOn+8)%7||7;switch(e){case"e":return String(i);case"ee":return Ve(i,2);case"eo":return t.ordinalNumber(i,{unit:"day"});case"eee":return t.day(n,{width:"abbreviated",context:"formatting"});case"eeeee":return t.day(n,{width:"narrow",context:"formatting"});case"eeeeee":return t.day(n,{width:"short",context:"formatting"});case"eeee":default:return t.day(n,{width:"wide",context:"formatting"})}},c:function(r,e,t,s){const n=r.getDay(),i=(n-s.weekStartsOn+8)%7||7;switch(e){case"c":return String(i);case"cc":return Ve(i,e.length);case"co":return t.ordinalNumber(i,{unit:"day"});case"ccc":return t.day(n,{width:"abbreviated",context:"standalone"});case"ccccc":return t.day(n,{width:"narrow",context:"standalone"});case"cccccc":return t.day(n,{width:"short",context:"standalone"});case"cccc":default:return t.day(n,{width:"wide",context:"standalone"})}},i:function(r,e,t){const s=r.getDay(),n=s===0?7:s;switch(e){case"i":return String(n);case"ii":return Ve(n,e.length);case"io":return t.ordinalNumber(n,{unit:"day"});case"iii":return t.day(s,{width:"abbreviated",context:"formatting"});case"iiiii":return t.day(s,{width:"narrow",context:"formatting"});case"iiiiii":return t.day(s,{width:"short",context:"formatting"});case"iiii":default:return t.day(s,{width:"wide",context:"formatting"})}},a:function(r,e,t){const n=r.getHours()/12>=1?"pm":"am";switch(e){case"a":case"aa":return t.dayPeriod(n,{width:"abbreviated",context:"formatting"});case"aaa":return t.dayPeriod(n,{width:"abbreviated",context:"formatting"}).toLowerCase();case"aaaaa":return t.dayPeriod(n,{width:"narrow",context:"formatting"});case"aaaa":default:return t.dayPeriod(n,{width:"wide",context:"formatting"})}},b:function(r,e,t){const s=r.getHours();let n;switch(s===12?n=_n.noon:s===0?n=_n.midnight:n=s/12>=1?"pm":"am",e){case"b":case"bb":return t.dayPeriod(n,{width:"abbreviated",context:"formatting"});case"bbb":return t.dayPeriod(n,{width:"abbreviated",context:"formatting"}).toLowerCase();case"bbbbb":return t.dayPeriod(n,{width:"narrow",context:"formatting"});case"bbbb":default:return t.dayPeriod(n,{width:"wide",context:"formatting"})}},B:function(r,e,t){const s=r.getHours();let n;switch(s>=17?n=_n.evening:s>=12?n=_n.afternoon:s>=4?n=_n.morning:n=_n.night,e){case"B":case"BB":case"BBB":return t.dayPeriod(n,{width:"abbreviated",context:"formatting"});case"BBBBB":return t.dayPeriod(n,{width:"narrow",context:"formatting"});case"BBBB":default:return t.dayPeriod(n,{width:"wide",context:"formatting"})}},h:function(r,e,t){if(e==="ho"){let s=r.getHours()%12;return s===0&&(s=12),t.ordinalNumber(s,{unit:"hour"})}return Yr.h(r,e)},H:function(r,e,t){return e==="Ho"?t.ordinalNumber(r.getHours(),{unit:"hour"}):Yr.H(r,e)},K:function(r,e,t){const s=r.getHours()%12;return e==="Ko"?t.ordinalNumber(s,{unit:"hour"}):Ve(s,e.length)},k:function(r,e,t){let s=r.getHours();return s===0&&(s=24),e==="ko"?t.ordinalNumber(s,{unit:"hour"}):Ve(s,e.length)},m:function(r,e,t){return e==="mo"?t.ordinalNumber(r.getMinutes(),{unit:"minute"}):Yr.m(r,e)},s:function(r,e,t){return e==="so"?t.ordinalNumber(r.getSeconds(),{unit:"second"}):Yr.s(r,e)},S:function(r,e){return Yr.S(r,e)},X:function(r,e,t){const s=r.getTimezoneOffset();if(s===0)return"Z";switch(e){case"X":return Og(s);case"XXXX":case"XX":return Bs(s);case"XXXXX":case"XXX":default:return Bs(s,":")}},x:function(r,e,t){const s=r.getTimezoneOffset();switch(e){case"x":return Og(s);case"xxxx":case"xx":return Bs(s);case"xxxxx":case"xxx":default:return Bs(s,":")}},O:function(r,e,t){const s=r.getTimezoneOffset();switch(e){case"O":case"OO":case"OOO":return"GMT"+Dg(s,":");case"OOOO":default:return"GMT"+Bs(s,":")}},z:function(r,e,t){const s=r.getTimezoneOffset();switch(e){case"z":case"zz":case"zzz":return"GMT"+Dg(s,":");case"zzzz":default:return"GMT"+Bs(s,":")}},t:function(r,e,t){const s=Math.trunc(r.getTime()/1e3);return Ve(s,e.length)},T:function(r,e,t){const s=r.getTime();return Ve(s,e.length)}};function Dg(r,e=""){const t=r>0?"-":"+",s=Math.abs(r),n=Math.trunc(s/60),i=s%60;return i===0?t+String(n):t+String(n)+e+Ve(i,2)}function Og(r,e){return r%60===0?(r>0?"-":"+")+Ve(Math.abs(r)/60,2):Bs(r,e)}function Bs(r,e=""){const t=r>0?"-":"+",s=Math.abs(r),n=Ve(Math.trunc(s/60),2),i=Ve(s%60,2);return t+n+e+i}const Lg=(r,e)=>{switch(r){case"P":return e.date({width:"short"});case"PP":return e.date({width:"medium"});case"PPP":return e.date({width:"long"});case"PPPP":default:return e.date({width:"full"})}},K1=(r,e)=>{switch(r){case"p":return e.time({width:"short"});case"pp":return e.time({width:"medium"});case"ppp":return e.time({width:"long"});case"pppp":default:return e.time({width:"full"})}},X3=(r,e)=>{const t=r.match(/(P+)(p+)?/)||[],s=t[1],n=t[2];if(!n)return Lg(r,e);let i;switch(s){case"P":i=e.dateTime({width:"short"});break;case"PP":i=e.dateTime({width:"medium"});break;case"PPP":i=e.dateTime({width:"long"});break;case"PPPP":default:i=e.dateTime({width:"full"});break}return i.replace("{{date}}",Lg(s,e)).replace("{{time}}",K1(n,e))},J3={p:K1,P:X3},Z3=/^D+$/,e6=/^Y+$/,t6=["D","DD","YY","YYYY"];function r6(r){return Z3.test(r)}function s6(r){return e6.test(r)}function n6(r,e,t){const s=o6(r,e,t);if(console.warn(s),t6.includes(r))throw new RangeError(s)}function o6(r,e,t){const s=r[0]==="Y"?"years":"days of the month";return`Use \`${r.toLowerCase()}\` instead of \`${r}\` (in \`${e}\`) for formatting ${s} to the input \`${t}\`; see: https://github.com/date-fns/date-fns/blob/master/docs/unicodeTokens.md`}const i6=/[yYQqMLwIdDecihHKkms]o|(\w)\1*|''|'(''|[^'])+('|$)|./g,a6=/P+p+|P+|p+|''|'(''|[^'])+('|$)|./g,l6=/^'([^]*?)'?$/,c6=/''/g,d6=/[a-zA-Z]/;function Vg(r,e,t){var h,m,x,g;const s=yc(),n=s.locale??W3,i=s.firstWeekContainsDate??((m=(h=s.locale)==null?void 0:h.options)==null?void 0:m.firstWeekContainsDate)??1,a=s.weekStartsOn??((g=(x=s.locale)==null?void 0:x.options)==null?void 0:g.weekStartsOn)??0,l=er(r);if(!h3(l))throw new RangeError("Invalid time value");let d=e.match(a6).map(v=>{const b=v[0];if(b==="p"||b==="P"){const w=J3[b];return w(v,n.formatLong)}return v}).join("").match(i6).map(v=>{if(v==="''")return{isToken:!1,value:"'"};const b=v[0];if(b==="'")return{isToken:!1,value:u6(v)};if(Mg[b])return{isToken:!0,value:v};if(b.match(d6))throw new RangeError("Format string contains an unescaped latin alphabet character `"+b+"`");return{isToken:!1,value:v}});n.localize.preprocessor&&(d=n.localize.preprocessor(l,d));const u={firstWeekContainsDate:i,weekStartsOn:a,locale:n};return d.map(v=>{if(!v.isToken)return v.value;const b=v.value;(s6(b)||r6(b))&&n6(b,e,String(r));const w=Mg[b[0]];return w(l,b,n.localize,u)}).join("")}function u6(r){const e=r.match(l6);return e?e[1].replace(c6,"'"):r}const h6=[{id:1,name:"Metal Warrior",url:"https://api.dicebear.com/9.x/avataaars/svg?seed=metal1&backgroundColor=000000"},{id:2,name:"Rock Legend",url:"https://api.dicebear.com/9.x/avataaars/svg?seed=rock2&backgroundColor=1a1a1a"},{id:3,name:"Guitar Hero",url:"https://api.dicebear.com/9.x/avataaars/svg?seed=guitar3&backgroundColor=2a2a2a"},{id:4,name:"Drum Master",url:"https://api.dicebear.com/9.x/avataaars/svg?seed=drums4&backgroundColor=3a3a3a"},{id:5,name:"Bass Thunder",url:"https://api.dicebear.com/9.x/avataaars/svg?seed=bass5&backgroundColor=4a4a4a"},{id:6,name:"Vocal Fury",url:"https://api.dicebear.com/9.x/avataaars/svg?seed=vocal6&backgroundColor=5a5a5a"}];function f6(){const{user:r,firebaseUser:e,firebaseProfile:t,isAuthenticated:s,logout:n,refreshUser:i,updateProfile:a,uploadProfileImage:l}=Rs(),[,d]=Ai(),{colors:u,isDarkMode:h}=Me(),{toast:m}=xr(),x=s2(),v=new URLSearchParams(x).get("section")||"profile",[b,w]=p.useState(v),[k,T]=p.useState({displayName:"",phoneNumber:"",email:"",profileImageUrl:""}),[_,R]=p.useState(!1),[D,$]=p.useState(!1),[S,I]=p.useState(!1),[E,j]=p.useState(!1),[C,A]=p.useState(!1),[P,W]=p.useState(!1),[oe,U]=p.useState([]);p.useEffect(()=>{w(v)},[v]),p.useEffect(()=>{s||d("/")},[s,d]),p.useEffect(()=>{var H,ie;t?T({displayName:`${t.FirstName} ${t.LastName}`.trim()||((H=t.EmailAddress)==null?void 0:H.split("@")[0])||"",phoneNumber:t.PhoneNumber||"",email:t.EmailAddress||"",profileImageUrl:t.UserProfileImage||""}):r&&T({displayName:r.firstName||((ie=r.email)==null?void 0:ie.split("@")[0])||"",phoneNumber:r.phoneNumber||"",email:r.email||"",profileImageUrl:r.profileImageUrl||""})},[r,t]),p.useEffect(()=>{r&&r.activeSubscription&&X()},[r]);const X=async()=>{try{const H=await fetch("/api/user/submissions",{credentials:"include"});if(H.ok){const ie=await H.json();U(ie)}}catch(H){console.error("Failed to load submissions:",H)}},xe=async()=>{A(!0);try{const H=k.displayName.trim().split(" "),ie=H[0]||"",Q=H.slice(1).join(" ")||"";if(!await a({FirstName:ie,LastName:Q,PhoneNumber:k.phoneNumber,UserProfileImage:k.profileImageUrl}))throw new Error("Failed to update profile");m({title:"Profile Updated",description:"Your profile has been saved successfully."})}catch(H){m({title:"Update Failed",description:H.message||"Failed to update profile.",variant:"destructive"})}finally{A(!1)}},V=async H=>{var Q;const ie=(Q=H.target.files)==null?void 0:Q[0];if(ie){W(!0);try{if(await l(ie))m({title:"Image Uploaded",description:"Your profile image has been updated successfully."});else throw new Error("Failed to upload image")}catch(we){m({title:"Upload Failed",description:we.message||"Failed to upload image.",variant:"destructive"})}finally{W(!1),R(!1)}}},be=async H=>{try{if(await a({UserProfileImage:H}))T(Q=>({...Q,profileImageUrl:H})),m({title:"Avatar Updated",description:"Your profile avatar has been updated successfully."});else throw new Error("Failed to update avatar")}catch(ie){m({title:"Update Failed",description:ie.message||"Failed to update avatar.",variant:"destructive"})}finally{$(!1)}},ce=async()=>{try{if(!(await fetch("/api/subscription/cancel",{method:"POST",credentials:"include"})).ok)throw new Error("Failed to cancel subscription");await i(),I(!1),m({title:"Subscription Cancelled",description:"Your subscription has been cancelled and will end at the next billing cycle."})}catch(H){m({title:"Cancellation Failed",description:H.message||"Failed to cancel subscription.",variant:"destructive"})}},Ue=async()=>{await n(),d("/")};if(!r)return null;const Se=[{id:"profile",label:"Profile",icon:Qt},...r.activeSubscription?[{id:"subscription",label:"Subscription Management",icon:di}]:[],{id:"submissions",label:"Submission Requests",icon:jd}],ne=`linear-gradient(135deg, ${u.primary} 0%, ${u.primary}80 100%)`;return o.jsxs("div",{className:"min-h-screen pt-20",style:{backgroundColor:u.background},children:[o.jsx("div",{className:"max-w-7xl mx-auto px-4 py-8",children:o.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-4 gap-8",children:[o.jsx("div",{className:"lg:col-span-1",children:o.jsx(he,{className:"border-2 shadow-xl overflow-hidden",style:{backgroundColor:h?"rgba(0, 0, 0, 0.5)":"rgba(255, 255, 255, 0.95)",borderColor:`${u.primary}40`,backdropFilter:"blur(10px)"},children:o.jsx(me,{className:"p-0",children:o.jsxs("div",{className:"space-y-1 p-2",children:[(Se||[]).map(H=>o.jsxs("button",{className:`w-full flex items-center gap-3 px-4 py-3 rounded-lg font-semibold transition-all duration-200 ${b===H.id?"shadow-lg":"hover:shadow-md"}`,style:{backgroundColor:b===H.id?u.primary:"transparent",color:b===H.id?"white":u.text},onClick:()=>w(H.id),children:[o.jsx(H.icon,{size:20}),o.jsx("span",{children:H.label})]},H.id)),o.jsx("div",{className:"my-4 mx-4 border-t",style:{borderColor:`${u.primary}20`}}),o.jsxs("button",{className:"w-full flex items-center gap-3 px-4 py-3 rounded-lg font-semibold transition-all duration-200 hover:shadow-md",style:{backgroundColor:"transparent",color:"#EF4444"},onClick:()=>j(!0),children:[o.jsx(Ad,{size:20}),o.jsx("span",{children:"Logout"})]})]})})})}),o.jsxs("div",{className:"lg:col-span-3",children:[b==="profile"&&o.jsxs(he,{className:"border-2 shadow-xl",style:{backgroundColor:h?"rgba(0, 0, 0, 0.5)":"rgba(255, 255, 255, 0.95)",borderColor:`${u.primary}40`,backdropFilter:"blur(10px)"},children:[o.jsxs(it,{children:[o.jsx(lt,{className:"text-2xl font-black",style:{color:u.text},children:"Profile Settings"}),o.jsx($a,{style:{color:`${u.text}80`},children:"Manage your account information and preferences"})]}),o.jsxs(me,{className:"space-y-6",children:[o.jsxs("div",{className:"flex items-start space-x-6",children:[o.jsxs("div",{className:"relative",children:[o.jsx("div",{className:"w-24 h-24 rounded-full shadow-lg ring-4 ring-offset-2",style:{background:k.profileImageUrl?`url(${k.profileImageUrl}) center/cover`:ne,"--ring-color":u.primary,"--ring-offset-color":h?"#000000":"#ffffff"},children:!k.profileImageUrl&&o.jsx("div",{className:"w-full h-full flex items-center justify-center",children:o.jsx(Qt,{size:40,className:"text-white"})})}),o.jsxs(Qv,{open:_,onOpenChange:R,children:[o.jsx(Yv,{asChild:!0,children:o.jsx("button",{className:"absolute bottom-0 right-0 w-8 h-8 rounded-full shadow-md flex items-center justify-center transition-all duration-200 hover:scale-110",style:{backgroundColor:u.primary,border:`2px solid ${h?"#000000":"#ffffff"}`},children:o.jsx(gT,{size:16,className:"text-white"})})}),o.jsxs(Jh,{align:"start",className:"w-48",style:{backgroundColor:h?"rgba(0, 0, 0, 0.95)":"rgba(255, 255, 255, 0.95)",borderColor:`${u.primary}40`},children:[o.jsxs(Hs,{children:[o.jsxs("label",{htmlFor:"image-upload",className:"flex items-center gap-2 cursor-pointer w-full",children:[o.jsx(OT,{size:16}),o.jsx("span",{children:"Upload Photo"})]}),o.jsx("input",{id:"image-upload",type:"file",accept:"image/*",className:"hidden",onChange:V})]}),o.jsxs(Hs,{onClick:()=>{if(!r.activeSubscription){m({title:"Premium Feature",description:"Premium avatars are available for subscribers only."});return}$(!0),R(!1)},children:[o.jsx(lr,{size:16}),o.jsx("span",{children:"Premium Avatars"})]})]})]})]}),o.jsxs("div",{className:"flex-1 space-y-2",children:[o.jsx("h3",{className:"font-bold text-lg",style:{color:u.text},children:"Profile Picture"}),o.jsx("p",{className:"text-sm",style:{color:`${u.text}80`},children:"Upload a photo or choose from our premium avatar collection"})]})]}),o.jsxs("div",{className:"space-y-2",children:[o.jsx(_e,{htmlFor:"displayName",style:{color:u.text},children:"Display Name"}),o.jsx(Ae,{id:"displayName",value:k.displayName,onChange:H=>T(ie=>({...ie,displayName:H.target.value})),placeholder:"Enter your display name",className:"font-semibold",style:{backgroundColor:"transparent",borderColor:`${u.primary}40`,color:u.text}})]}),o.jsxs("div",{className:"space-y-2",children:[o.jsx(_e,{htmlFor:"email",style:{color:u.text},children:"Email Address"}),o.jsxs("div",{className:"flex items-center gap-2",children:[o.jsx(Ae,{id:"email",value:k.email,disabled:!0,className:"font-semibold",style:{backgroundColor:"transparent",borderColor:`${u.primary}40`,color:u.text,opacity:.7}}),r.emailVerified&&o.jsxs(Vt,{variant:"outline",className:"flex items-center gap-1",children:[o.jsx(Zr,{size:14}),"Verified"]})]})]}),o.jsxs("div",{className:"space-y-2",children:[o.jsx(_e,{htmlFor:"phoneNumber",style:{color:u.text},children:"Phone Number"}),o.jsxs("div",{className:"flex items-center gap-2",children:[o.jsx(Ae,{id:"phoneNumber",value:k.phoneNumber,onChange:H=>T(ie=>({...ie,phoneNumber:H.target.value})),placeholder:"+1 (555) 123-4567",className:"font-semibold",style:{backgroundColor:"transparent",borderColor:`${u.primary}40`,color:u.text}}),r.phoneVerified&&o.jsxs(Vt,{variant:"outline",className:"flex items-center gap-1",children:[o.jsx(Zr,{size:14}),"Verified"]})]})]}),o.jsx(q,{onClick:xe,disabled:C,className:"w-full font-bold shadow-lg",style:{backgroundColor:u.primary,color:"white"},children:C?"Saving...":"Save Changes"})]})]}),b==="subscription"&&r.activeSubscription&&o.jsxs(he,{className:"border-2 shadow-xl",style:{backgroundColor:h?"rgba(0, 0, 0, 0.5)":"rgba(255, 255, 255, 0.95)",borderColor:`${u.primary}40`,backdropFilter:"blur(10px)"},children:[o.jsxs(it,{children:[o.jsx(lt,{className:"text-2xl font-black",style:{color:u.text},children:"Subscription Management"}),o.jsx($a,{style:{color:`${u.text}80`},children:"Manage your subscription and billing information"})]}),o.jsxs(me,{className:"space-y-6",children:[o.jsx("div",{className:"p-6 rounded-lg border-2",style:{borderColor:`${u.primary}40`},children:o.jsxs("div",{className:"flex items-start justify-between",children:[o.jsxs("div",{children:[o.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[o.jsx(lr,{className:"text-yellow-500",size:24}),o.jsx("h3",{className:"font-black text-xl",style:{color:u.text},children:"Legend Package"})]}),o.jsx("p",{className:"text-sm mb-4",style:{color:`${u.text}80`},children:"Premium access to all features"}),o.jsxs("div",{className:"space-y-2",children:[o.jsxs("div",{className:"flex items-center gap-2",children:[o.jsx(Zr,{size:16,style:{color:u.primary}}),o.jsx("span",{className:"text-sm",style:{color:u.text},children:"Unlimited song submissions"})]}),o.jsxs("div",{className:"flex items-center gap-2",children:[o.jsx(Zr,{size:16,style:{color:u.primary}}),o.jsx("span",{className:"text-sm",style:{color:u.text},children:"Premium avatars & badges"})]}),o.jsxs("div",{className:"flex items-center gap-2",children:[o.jsx(Zr,{size:16,style:{color:u.primary}}),o.jsx("span",{className:"text-sm",style:{color:u.text},children:"Early access to new features"})]})]})]}),o.jsxs("div",{className:"text-right",children:[o.jsx("p",{className:"font-black text-2xl",style:{color:u.primary},children:"$9.99"}),o.jsx("p",{className:"text-sm",style:{color:`${u.text}80`},children:"per month"})]})]})}),o.jsxs("div",{className:"space-y-4",children:[o.jsx("h4",{className:"font-bold",style:{color:u.text},children:"Billing Information"}),o.jsxs("div",{className:"space-y-3",children:[o.jsxs("div",{className:"flex items-center justify-between p-3 rounded-lg",style:{backgroundColor:`${u.primary}10`},children:[o.jsxs("div",{className:"flex items-center gap-3",children:[o.jsx(di,{size:20,style:{color:u.primary}}),o.jsx("span",{className:"font-semibold",style:{color:u.text},children:"   4242"})]}),o.jsx(Vt,{variant:"outline",children:"Visa"})]}),o.jsxs("div",{className:"flex items-center justify-between p-3 rounded-lg",style:{backgroundColor:`${u.primary}10`},children:[o.jsxs("div",{className:"flex items-center gap-3",children:[o.jsx(xs,{size:20,style:{color:u.primary}}),o.jsx("span",{className:"font-semibold",style:{color:u.text},children:"Next billing date"})]}),o.jsx("span",{style:{color:u.text},children:Vg(new Date(Date.now()+30*24*60*60*1e3),"MMM dd, yyyy")})]})]})]}),o.jsx("div",{className:"pt-4 border-t",style:{borderColor:`${u.primary}20`},children:o.jsx(q,{variant:"outline",onClick:()=>I(!0),className:"w-full font-semibold",style:{borderColor:"#EF4444",color:"#EF4444"},children:"Cancel Subscription"})})]})]}),b==="submissions"&&o.jsxs(he,{className:"border-2 shadow-xl",style:{backgroundColor:h?"rgba(0, 0, 0, 0.5)":"rgba(255, 255, 255, 0.95)",borderColor:`${u.primary}40`,backdropFilter:"blur(10px)"},children:[o.jsxs(it,{children:[o.jsx(lt,{className:"text-2xl font-black",style:{color:u.text},children:"Submission Requests"}),o.jsx($a,{style:{color:`${u.text}80`},children:"Track your song submission history"})]}),o.jsx(me,{children:r.activeSubscription?((oe==null?void 0:oe.length)||0)===0?o.jsxs("div",{className:"text-center py-12",children:[o.jsx(jd,{size:48,className:"mx-auto mb-4 opacity-50",style:{color:u.primary}}),o.jsx("h3",{className:"font-bold text-lg mb-2",style:{color:u.text},children:"No Submissions Yet"}),o.jsx("p",{style:{color:`${u.text}80`},children:"You haven't submitted any songs yet"})]}):o.jsx("div",{className:"space-y-4",children:(oe||[]).map(H=>o.jsx("div",{className:"p-4 rounded-lg border transition-all duration-200 hover:shadow-md",style:{borderColor:`${u.primary}20`,backgroundColor:`${u.primary}05`},children:o.jsxs("div",{className:"flex items-start justify-between",children:[o.jsxs("div",{children:[o.jsxs("h4",{className:"font-bold",style:{color:u.text},children:[H.artistName," - ",H.songTitle]}),o.jsxs("p",{className:"text-sm mt-1",style:{color:`${u.text}80`},children:["Submitted on ",Vg(new Date(H.createdAt),"MMM dd, yyyy")]})]}),o.jsx(Vt,{variant:H.status==="approved"?"default":H.status==="rejected"?"destructive":"secondary",children:H.status})]})},H.id))}):o.jsxs("div",{className:"text-center py-12",children:[o.jsx(lr,{size:48,className:"mx-auto mb-4 opacity-50",style:{color:u.primary}}),o.jsx("h3",{className:"font-bold text-lg mb-2",style:{color:u.text},children:"Premium Feature"}),o.jsx("p",{className:"mb-6",style:{color:`${u.text}80`},children:"Song submissions are available for premium subscribers only"}),o.jsx(q,{onClick:()=>d("/subscription"),className:"font-bold shadow-lg",style:{backgroundColor:u.primary,color:"white"},children:"Upgrade to Premium"})]})})]})]})]})}),o.jsx(lc,{open:D,onOpenChange:$,children:o.jsxs(cc,{className:"max-w-2xl",style:{backgroundColor:h?"rgba(0, 0, 0, 0.95)":"rgba(255, 255, 255, 0.95)",borderColor:`${u.primary}40`},children:[o.jsxs(Ki,{children:[o.jsx(Qi,{className:"text-xl font-black",style:{color:u.text},children:"Premium Avatar Collection"}),o.jsx(Yh,{style:{color:`${u.text}80`},children:"Choose from our exclusive metal-themed avatars"})]}),o.jsx("div",{className:"grid grid-cols-3 gap-4 mt-4",children:(h6||[]).map(H=>o.jsxs("button",{onClick:()=>be(H.url),className:"group relative rounded-lg overflow-hidden transition-all duration-200 hover:scale-105 hover:shadow-xl",children:[o.jsx("img",{src:H.url,alt:H.name,className:"w-full h-full object-cover"}),o.jsx("div",{className:"absolute inset-0 flex items-end p-3 opacity-0 group-hover:opacity-100 transition-opacity duration-200",style:{background:"linear-gradient(to top, rgba(0,0,0,0.8) 0%, transparent 100%)"},children:o.jsx("span",{className:"text-white font-semibold text-sm",children:H.name})})]},H.id))})]})}),o.jsx(hu,{open:S,onOpenChange:I,children:o.jsxs(pl,{style:{backgroundColor:h?"rgba(0, 0, 0, 0.95)":"rgba(255, 255, 255, 0.95)",borderColor:`${u.primary}40`},children:[o.jsxs(gl,{children:[o.jsx(yl,{className:"text-xl font-black",style:{color:u.text},children:"Cancel Subscription"}),o.jsxs(bl,{style:{color:`${u.text}80`},children:[o.jsx(c0,{className:"inline mr-2",size:16}),"Are you sure you want to cancel your subscription? You'll lose access to premium features at the end of your billing cycle."]})]}),o.jsxs(xl,{children:[o.jsx(wl,{style:{color:u.text},children:"Keep Subscription"}),o.jsx(vl,{onClick:ce,className:"bg-red-600 hover:bg-red-700 text-white",children:"Cancel Subscription"})]})]})}),o.jsx(hu,{open:E,onOpenChange:j,children:o.jsxs(pl,{style:{backgroundColor:h?"rgba(0, 0, 0, 0.95)":"rgba(255, 255, 255, 0.95)",borderColor:`${u.primary}40`},children:[o.jsxs(gl,{children:[o.jsx(yl,{className:"text-xl font-black",style:{color:u.text},children:"Confirm Logout"}),o.jsx(bl,{style:{color:`${u.text}80`},children:"Are you sure you want to log out of your account?"})]}),o.jsxs(xl,{children:[o.jsx(wl,{style:{color:u.text},children:"Cancel"}),o.jsx(vl,{onClick:Ue,className:"bg-red-600 hover:bg-red-700 text-white",children:"Logout"})]})]})})]})}function m6(){return o.jsx(f6,{})}var p6="Separator",Fg="horizontal",g6=["horizontal","vertical"],Q1=p.forwardRef((r,e)=>{const{decorative:t,orientation:s=Fg,...n}=r,i=x6(s)?s:Fg,l=t?{role:"none"}:{"aria-orientation":i==="vertical"?i:void 0,role:"separator"};return o.jsx(Pe.div,{"data-orientation":i,...l,...n,ref:e})});Q1.displayName=p6;function x6(r){return g6.includes(r)}var Y1=Q1;const He=p.forwardRef(({className:r,orientation:e="horizontal",decorative:t=!0,...s},n)=>o.jsx(Y1,{ref:n,decorative:t,orientation:e,className:se("shrink-0 bg-border",e==="horizontal"?"h-[1px] w-full":"h-full w-[1px]",r),...s}));He.displayName=Y1.displayName;function y6(){const[r,e]=p.useState(!0),[t,s]=p.useState(!1),[n,i]=p.useState(!1),[a,l]=p.useState({email:"",password:"",firstName:"",lastName:"",confirmPassword:""}),{getColors:d,theme:u}=Me(),{toast:h}=xr(),m=d(),x=async v=>{v.preventDefault(),i(!0);try{if(!r){if(a.password!==a.confirmPassword){h({title:"Password Mismatch",description:"Passwords do not match.",variant:"destructive"});return}if(a.password.length<6){h({title:"Password Too Short",description:"Password must be at least 6 characters.",variant:"destructive"});return}}const b=r?"/api/auth/login":"/api/auth/register",w=r?{email:a.email,password:a.password}:{email:a.email,password:a.password,firstName:a.firstName,lastName:a.lastName},k=await gs("POST",b,w),T=await k.json();k.ok?(h({title:r?"Welcome Back!":"Account Created!",description:r?"You have successfully signed in.":"Your account has been created. Please check your email for verification."}),window.location.href="/"):h({title:"Authentication Failed",description:T.message||"Please check your credentials and try again.",variant:"destructive"})}catch{h({title:"Connection Error",description:"Unable to connect to the server. Please try again.",variant:"destructive"})}finally{i(!1)}},g=()=>{window.location.href="/api/auth/google"};return o.jsx("div",{className:se("min-h-screen flex items-center justify-center p-4",u==="light"?"bg-white":"bg-black"),children:o.jsxs(he,{className:"w-full max-w-md",children:[o.jsxs(it,{className:"space-y-4",children:[o.jsx("div",{className:"flex items-center space-x-2",children:o.jsx(Tx,{href:"/",children:o.jsxs(q,{variant:"ghost",size:"sm",children:[o.jsx(Ri,{className:"h-4 w-4 mr-2"}),"Back to Home"]})})}),o.jsxs("div",{className:"text-center",children:[o.jsx(lt,{className:"text-2xl font-bold",children:r?"Welcome Back":"Create Account"}),o.jsx("p",{className:"text-muted-foreground mt-2",children:r?"Login to your Spandex Salvation account":"Join the metal revolution"})]})]}),o.jsxs(me,{className:"space-y-6",children:[o.jsxs(q,{type:"button",variant:"outline",className:"w-full bg-white text-black border-gray-300 hover:bg-gray-50",onClick:g,children:[o.jsx("img",{src:"/assets/icons8-google_1750360286324.png",alt:"Google",className:"w-4 h-4 mr-2"}),r?"Continue with Google":"Sign Up with Google"]}),o.jsxs("div",{className:"relative",children:[o.jsx("div",{className:"absolute inset-0 flex items-center",children:o.jsx(He,{className:"w-full"})}),o.jsx("div",{className:"relative flex justify-center text-xs uppercase",children:o.jsx("span",{className:"bg-background px-2 text-muted-foreground",children:"Or continue with email"})})]}),o.jsxs("form",{onSubmit:x,className:"space-y-4",children:[!r&&o.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[o.jsxs("div",{children:[o.jsx(_e,{htmlFor:"firstName",children:"First Name"}),o.jsxs("div",{className:"relative",children:[o.jsx(Qt,{className:"absolute left-3 top-3 h-4 w-4 text-muted-foreground"}),o.jsx(Ae,{id:"firstName",type:"text",placeholder:"John",className:"pl-10",value:a.firstName,onChange:v=>l(b=>({...b,firstName:v.target.value})),required:!0})]})]}),o.jsxs("div",{children:[o.jsx(_e,{htmlFor:"lastName",children:"Last Name"}),o.jsxs("div",{className:"relative",children:[o.jsx(Qt,{className:"absolute left-3 top-3 h-4 w-4 text-muted-foreground"}),o.jsx(Ae,{id:"lastName",type:"text",placeholder:"Doe",className:"pl-10",value:a.lastName,onChange:v=>l(b=>({...b,lastName:v.target.value})),required:!0})]})]})]}),o.jsxs("div",{children:[o.jsx(_e,{htmlFor:"email",children:"Email"}),o.jsxs("div",{className:"relative",children:[o.jsx(ui,{className:"absolute left-3 top-3 h-4 w-4 text-muted-foreground"}),o.jsx(Ae,{id:"email",type:"email",placeholder:"john@example.com",className:"pl-10",value:a.email,onChange:v=>l(b=>({...b,email:v.target.value})),required:!0})]})]}),o.jsxs("div",{children:[o.jsx(_e,{htmlFor:"password",children:"Password"}),o.jsxs("div",{className:"relative",children:[o.jsx(qa,{className:"absolute left-3 top-3 h-4 w-4 text-muted-foreground"}),o.jsx(Ae,{id:"password",type:t?"text":"password",placeholder:r?"Enter your password":"Create a password",className:"pl-10 pr-10",value:a.password,onChange:v=>l(b=>({...b,password:v.target.value})),required:!0}),o.jsx("button",{type:"button",onClick:()=>s(!t),className:"absolute right-3 top-3 text-muted-foreground hover:text-foreground",children:t?o.jsx(_T,{className:"h-4 w-4"}):o.jsx(d0,{className:"h-4 w-4"})})]})]}),!r&&o.jsxs("div",{children:[o.jsx(_e,{htmlFor:"confirmPassword",children:"Confirm Password"}),o.jsxs("div",{className:"relative",children:[o.jsx(qa,{className:"absolute left-3 top-3 h-4 w-4 text-muted-foreground"}),o.jsx(Ae,{id:"confirmPassword",type:t?"text":"password",placeholder:"Confirm your password",className:"pl-10",value:a.confirmPassword,onChange:v=>l(b=>({...b,confirmPassword:v.target.value})),required:!0})]})]}),o.jsx(q,{type:"submit",className:"w-full",disabled:n,style:{backgroundColor:m.primary},children:n?"Please wait...":r?"Login":"Create Account"})]}),o.jsx("div",{className:"text-center",children:o.jsx("button",{type:"button",onClick:()=>e(!r),className:"text-sm text-muted-foreground hover:text-foreground underline",children:r?"Don't have an account? Sign up":"Already have an account? Login"})})]})]})})}const b6=[{id:"rebel",name:"Rebel",price:4.99,popular:!1,features:["Ad-free streaming","High-quality audio","Basic song requests","Mobile app access"]},{id:"legend",name:"Legend",price:9.99,popular:!0,features:["Everything in Rebel","Live chat access","Priority song requests","Exclusive content","Premium avatars","Early show access"]},{id:"icon",name:"Icon",price:19.99,popular:!1,features:["Everything in Legend","VIP chat privileges","Direct DJ messaging","Custom playlists","Exclusive merchandise","Meet & greet opportunities"]}];function v6(){const[r,e]=p.useState("legend"),{getColors:t,theme:s}=Me(),n=t(),i=a=>{console.log(`Subscribing to ${a} tier`),window.location.href=`/api/subscribe/${a}`};return o.jsx("div",{className:se("min-h-screen p-4",s==="light"?"bg-white":"bg-black"),children:o.jsxs("div",{className:"max-w-6xl mx-auto",children:[o.jsxs("div",{className:"text-center space-y-4 mb-12",children:[o.jsx("div",{className:"flex items-center justify-center space-x-4 mb-6",children:o.jsx(Tx,{href:"/",children:o.jsxs(q,{variant:"ghost",size:"sm",children:[o.jsx(Ri,{className:"h-4 w-4 mr-2"}),"Back to Home"]})})}),o.jsxs("h1",{className:"text-4xl font-black",children:["Choose Your ",o.jsx("span",{style:{color:n.primary},children:"Metal"})," ","Experience"]}),o.jsx("p",{className:"text-xl text-muted-foreground max-w-2xl mx-auto",children:"Join the Spandex Salvation revolution and unlock exclusive features, premium content, and VIP access to the metal community."})]}),o.jsx("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-8 mb-12",children:b6.map(a=>o.jsxs(he,{className:se("relative transition-all duration-300 hover:scale-105",r===a.id&&"ring-2",a.popular&&"border-2"),style:{"--ring-color":r===a.id?n.primary:void 0,borderColor:a.popular?n.primary:void 0},children:[a.popular&&o.jsx("div",{className:"absolute -top-3 left-1/2 transform -translate-x-1/2 px-4 py-1 rounded-full text-white text-sm font-bold",style:{backgroundColor:n.primary},children:"MOST POPULAR"}),o.jsx(it,{className:"text-center space-y-4",children:o.jsxs("div",{className:"space-y-2",children:[o.jsx("h3",{className:"text-2xl font-bold",children:a.name}),o.jsxs("div",{className:"flex items-center justify-center space-x-1",children:[o.jsxs("span",{className:"text-4xl font-black",children:["$",a.price]}),o.jsx("span",{className:"text-muted-foreground",children:"/month"})]})]})}),o.jsxs(me,{className:"space-y-6",children:[o.jsx("ul",{className:"space-y-3",children:a.features.map((l,d)=>o.jsxs("li",{className:"flex items-center space-x-3",children:[o.jsx(ho,{className:"h-5 w-5 flex-shrink-0",style:{color:n.primary}}),o.jsx("span",{className:"text-sm",children:l})]},d))}),o.jsx(q,{className:"w-full",variant:a.popular?"default":"outline",onClick:()=>i(a.id),style:a.popular?{backgroundColor:n.primary}:void 0,children:a.popular?"Get Started":"Choose Plan"})]})]},a.id))}),o.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6 mb-12",children:[o.jsxs(he,{className:"text-center p-6",children:[o.jsx(Yn,{className:"h-12 w-12 mx-auto mb-4",style:{color:n.primary}}),o.jsx("h3",{className:"font-bold mb-2",children:"Premium Audio"}),o.jsx("p",{className:"text-sm text-muted-foreground",children:"High-quality streaming with zero ads"})]}),o.jsxs(he,{className:"text-center p-6",children:[o.jsx(Jo,{className:"h-12 w-12 mx-auto mb-4",style:{color:n.primary}}),o.jsx("h3",{className:"font-bold mb-2",children:"Live Chat"}),o.jsx("p",{className:"text-sm text-muted-foreground",children:"Connect with the metal community"})]}),o.jsxs(he,{className:"text-center p-6",children:[o.jsx(lr,{className:"h-12 w-12 mx-auto mb-4",style:{color:n.primary}}),o.jsx("h3",{className:"font-bold mb-2",children:"Exclusive Content"}),o.jsx("p",{className:"text-sm text-muted-foreground",children:"Access to special shows and interviews"})]}),o.jsxs(he,{className:"text-center p-6",children:[o.jsx(Mi,{className:"h-12 w-12 mx-auto mb-4",style:{color:n.primary}}),o.jsx("h3",{className:"font-bold mb-2",children:"VIP Access"}),o.jsx("p",{className:"text-sm text-muted-foreground",children:"Priority requests and early access"})]})]}),o.jsxs(he,{className:"mb-12",children:[o.jsx(it,{children:o.jsx(lt,{className:"text-center",children:"Frequently Asked Questions"})}),o.jsxs(me,{className:"space-y-4",children:[o.jsxs("div",{children:[o.jsx("h4",{className:"font-semibold mb-2",children:"Can I cancel anytime?"}),o.jsx("p",{className:"text-sm text-muted-foreground",children:"Yes, you can cancel your subscription at any time. You'll continue to have access until the end of your current billing period."})]}),o.jsxs("div",{children:[o.jsx("h4",{className:"font-semibold mb-2",children:"What payment methods do you accept?"}),o.jsx("p",{className:"text-sm text-muted-foreground",children:"We accept all major credit cards, PayPal, and other secure payment methods through Stripe."})]}),o.jsxs("div",{children:[o.jsx("h4",{className:"font-semibold mb-2",children:"Can I upgrade or downgrade my plan?"}),o.jsx("p",{className:"text-sm text-muted-foreground",children:"Absolutely! You can change your subscription tier at any time from your profile settings."})]})]})]})]})})}function w6(){const{colors:r}=Me(),[,e]=Ai();return o.jsxs("div",{className:"relative",children:[o.jsx("button",{className:"fixed top-4 left-4 z-50 bg-black/70 hover:bg-black/90 text-white rounded-full p-2 shadow-lg",onClick:()=>e("/"),"aria-label":"Back to Home",style:{backdropFilter:"blur(4px)"},children:o.jsx(Ri,{className:"w-6 h-6"})}),o.jsx("div",{className:"min-h-screen p-4 md:p-8",children:o.jsx("div",{className:"max-w-4xl mx-auto",children:o.jsxs(he,{style:{backgroundColor:r.background,borderColor:r.primary},children:[o.jsxs(it,{className:"text-center",children:[o.jsx(lt,{className:"text-3xl font-bold",style:{color:r.text},children:"Terms of Service"}),o.jsxs("p",{className:"text-muted-foreground",children:["Last updated: ",new Date().toLocaleDateString()]})]}),o.jsx(me,{children:o.jsx(mc,{className:"h-[600px] pr-4",children:o.jsxs("div",{className:"space-y-6",style:{color:r.text},children:[o.jsxs("section",{children:[o.jsx("h2",{className:"text-xl font-semibold mb-3",style:{color:r.primary},children:"1. Acceptance of Terms"}),o.jsx("p",{className:"text-muted-foreground leading-relaxed",children:'By accessing and using Spandex Salvation Radio ("the Service"), you accept and agree to be bound by the terms and provision of this agreement. If you do not agree to abide by the above, please do not use this service.'})]}),o.jsx(He,{}),o.jsxs("section",{children:[o.jsx("h2",{className:"text-xl font-semibold mb-3",style:{color:r.primary},children:"2. Description of Service"}),o.jsx("p",{className:"text-muted-foreground leading-relaxed mb-3",children:"Spandex Salvation Radio is an online streaming platform that provides:"}),o.jsxs("ul",{className:"list-disc list-inside text-muted-foreground space-y-1 ml-4",children:[o.jsx("li",{children:"24/7 metal music streaming"}),o.jsx("li",{children:"Interactive radio show schedules"}),o.jsx("li",{children:"Song submission system"}),o.jsx("li",{children:"Community features and chat"}),o.jsx("li",{children:"Premium subscription services"})]})]}),o.jsx(He,{}),o.jsxs("section",{children:[o.jsx("h2",{className:"text-xl font-semibold mb-3",style:{color:r.primary},children:"3. User Accounts and Registration"}),o.jsx("p",{className:"text-muted-foreground leading-relaxed mb-3",children:"To access certain features, you must register for an account. You agree to:"}),o.jsxs("ul",{className:"list-disc list-inside text-muted-foreground space-y-1 ml-4",children:[o.jsx("li",{children:"Provide accurate and complete information"}),o.jsx("li",{children:"Maintain the security of your account credentials"}),o.jsx("li",{children:"Accept responsibility for all activities under your account"}),o.jsx("li",{children:"Notify us immediately of any unauthorized use"})]})]}),o.jsx(He,{}),o.jsxs("section",{children:[o.jsx("h2",{className:"text-xl font-semibold mb-3",style:{color:r.primary},children:"4. Content and Submissions"}),o.jsx("p",{className:"text-muted-foreground leading-relaxed mb-3",children:"When submitting content (songs, comments, etc.), you agree that:"}),o.jsxs("ul",{className:"list-disc list-inside text-muted-foreground space-y-1 ml-4",children:[o.jsx("li",{children:"You own or have rights to the submitted content"}),o.jsx("li",{children:"Content must comply with our community guidelines"}),o.jsx("li",{children:"We reserve the right to moderate and remove content"}),o.jsx("li",{children:"Inappropriate content may result in account suspension"})]})]}),o.jsx(He,{}),o.jsxs("section",{children:[o.jsx("h2",{className:"text-xl font-semibold mb-3",style:{color:r.primary},children:"5. Premium Subscriptions"}),o.jsx("p",{className:"text-muted-foreground leading-relaxed mb-3",children:"Premium subscription terms:"}),o.jsxs("ul",{className:"list-disc list-inside text-muted-foreground space-y-1 ml-4",children:[o.jsx("li",{children:"Subscriptions are billed monthly or annually"}),o.jsx("li",{children:"Cancellation takes effect at the end of current billing period"}),o.jsx("li",{children:"No refunds for partial months"}),o.jsx("li",{children:"Pricing subject to change with 30-day notice"})]})]}),o.jsx(He,{}),o.jsxs("section",{children:[o.jsx("h2",{className:"text-xl font-semibold mb-3",style:{color:r.primary},children:"6. Prohibited Uses"}),o.jsx("p",{className:"text-muted-foreground leading-relaxed mb-3",children:"You may not use our service to:"}),o.jsxs("ul",{className:"list-disc list-inside text-muted-foreground space-y-1 ml-4",children:[o.jsx("li",{children:"Violate any applicable laws or regulations"}),o.jsx("li",{children:"Transmit malicious code or harmful content"}),o.jsx("li",{children:"Attempt to gain unauthorized access to our systems"}),o.jsx("li",{children:"Interfere with or disrupt the service"}),o.jsx("li",{children:"Engage in harassment or abusive behavior"})]})]}),o.jsx(He,{}),o.jsxs("section",{children:[o.jsx("h2",{className:"text-xl font-semibold mb-3",style:{color:r.primary},children:"7. Intellectual Property"}),o.jsx("p",{className:"text-muted-foreground leading-relaxed",children:"All content on Spandex Salvation Radio, including but not limited to text, graphics, logos, and software, is protected by copyright and other intellectual property laws. You may not reproduce, distribute, or create derivative works without permission."})]}),o.jsx(He,{}),o.jsxs("section",{children:[o.jsx("h2",{className:"text-xl font-semibold mb-3",style:{color:r.primary},children:"8. Limitation of Liability"}),o.jsx("p",{className:"text-muted-foreground leading-relaxed",children:"Spandex Salvation Radio shall not be liable for any indirect, incidental, special, consequential, or punitive damages, including but not limited to loss of profits, data, or use, incurred by you or any third party."})]}),o.jsx(He,{}),o.jsxs("section",{children:[o.jsx("h2",{className:"text-xl font-semibold mb-3",style:{color:r.primary},children:"9. Termination"}),o.jsx("p",{className:"text-muted-foreground leading-relaxed",children:"We may terminate or suspend your account immediately, without prior notice, for conduct that we believe violates these Terms of Service or is harmful to other users, us, or third parties."})]}),o.jsx(He,{}),o.jsxs("section",{children:[o.jsx("h2",{className:"text-xl font-semibold mb-3",style:{color:r.primary},children:"10. Changes to Terms"}),o.jsx("p",{className:"text-muted-foreground leading-relaxed",children:"We reserve the right to modify these terms at any time. We will notify users of significant changes via email or prominent notice on our website. Continued use of the service constitutes acceptance of modified terms."})]}),o.jsx(He,{}),o.jsxs("section",{children:[o.jsx("h2",{className:"text-xl font-semibold mb-3",style:{color:r.primary},children:"11. Contact Information"}),o.jsxs("p",{className:"text-muted-foreground leading-relaxed",children:["For questions about these Terms of Service, please contact us at:",o.jsx("br",{}),"Email: legal@spandexsalvationradio.com",o.jsx("br",{}),"Address: [Your Business Address]"]})]})]})})})]})})})]})}function _6(){const{colors:r}=Me(),[,e]=Ai();return o.jsxs("div",{className:"relative",children:[o.jsx("button",{className:"fixed top-4 left-4 z-50 bg-black/70 hover:bg-black/90 text-white rounded-full p-2 shadow-lg",onClick:()=>e("/"),"aria-label":"Back to Home",style:{backdropFilter:"blur(4px)"},children:o.jsx(Ri,{className:"w-6 h-6"})}),o.jsx("div",{className:"min-h-screen p-4 md:p-8",children:o.jsx("div",{className:"max-w-4xl mx-auto",children:o.jsxs(he,{style:{backgroundColor:r.background,borderColor:r.primary},children:[o.jsxs(it,{className:"text-center",children:[o.jsx(lt,{className:"text-3xl font-bold",style:{color:r.text},children:"Privacy Policy"}),o.jsxs("p",{className:"text-muted-foreground",children:["Last updated: ",new Date().toLocaleDateString()]})]}),o.jsx(me,{children:o.jsx(mc,{className:"h-[600px] pr-4",children:o.jsxs("div",{className:"space-y-6",style:{color:r.text},children:[o.jsxs("section",{children:[o.jsx("h2",{className:"text-xl font-semibold mb-3",style:{color:r.primary},children:"1. Information We Collect"}),o.jsx("p",{className:"text-muted-foreground leading-relaxed mb-3",children:"We collect information you provide directly to us, such as when you:"}),o.jsxs("ul",{className:"list-disc list-inside text-muted-foreground space-y-1 ml-4",children:[o.jsx("li",{children:"Create an account or profile"}),o.jsx("li",{children:"Subscribe to our premium services"}),o.jsx("li",{children:"Submit song requests or feedback"}),o.jsx("li",{children:"Participate in chat or community features"}),o.jsx("li",{children:"Contact us for support"})]})]}),o.jsx(He,{}),o.jsxs("section",{children:[o.jsx("h2",{className:"text-xl font-semibold mb-3",style:{color:r.primary},children:"2. Personal Information"}),o.jsx("p",{className:"text-muted-foreground leading-relaxed mb-3",children:"The types of personal information we may collect include:"}),o.jsxs("ul",{className:"list-disc list-inside text-muted-foreground space-y-1 ml-4",children:[o.jsx("li",{children:"Name and email address"}),o.jsx("li",{children:"Phone number (for verification)"}),o.jsx("li",{children:"Payment information (processed securely via Stripe)"}),o.jsx("li",{children:"Profile preferences and listening history"}),o.jsx("li",{children:"Location data (if you choose to share)"})]})]}),o.jsx(He,{}),o.jsxs("section",{children:[o.jsx("h2",{className:"text-xl font-semibold mb-3",style:{color:r.primary},children:"3. Automatic Information Collection"}),o.jsx("p",{className:"text-muted-foreground leading-relaxed mb-3",children:"We automatically collect certain information when you use our service:"}),o.jsxs("ul",{className:"list-disc list-inside text-muted-foreground space-y-1 ml-4",children:[o.jsx("li",{children:"Device information (browser, operating system)"}),o.jsx("li",{children:"Usage data (pages visited, time spent)"}),o.jsx("li",{children:"IP address and approximate location"}),o.jsx("li",{children:"Cookies and similar tracking technologies"}),o.jsx("li",{children:"Streaming preferences and listening patterns"})]})]}),o.jsx(He,{}),o.jsxs("section",{children:[o.jsx("h2",{className:"text-xl font-semibold mb-3",style:{color:r.primary},children:"4. How We Use Your Information"}),o.jsx("p",{className:"text-muted-foreground leading-relaxed mb-3",children:"We use the information we collect to:"}),o.jsxs("ul",{className:"list-disc list-inside text-muted-foreground space-y-1 ml-4",children:[o.jsx("li",{children:"Provide and maintain our streaming service"}),o.jsx("li",{children:"Process payments and manage subscriptions"}),o.jsx("li",{children:"Personalize your listening experience"}),o.jsx("li",{children:"Send important updates and notifications"}),o.jsx("li",{children:"Improve our service and develop new features"}),o.jsx("li",{children:"Prevent fraud and ensure security"}),o.jsx("li",{children:"Comply with legal obligations"})]})]}),o.jsx(He,{}),o.jsxs("section",{children:[o.jsx("h2",{className:"text-xl font-semibold mb-3",style:{color:r.primary},children:"5. Information Sharing"}),o.jsx("p",{className:"text-muted-foreground leading-relaxed mb-3",children:"We do not sell, trade, or rent your personal information. We may share information in these situations:"}),o.jsxs("ul",{className:"list-disc list-inside text-muted-foreground space-y-1 ml-4",children:[o.jsx("li",{children:"With service providers (Stripe for payments, Firebase for authentication)"}),o.jsx("li",{children:"When required by law or legal process"}),o.jsx("li",{children:"To protect our rights or safety"}),o.jsx("li",{children:"In connection with a business transfer"}),o.jsx("li",{children:"With your explicit consent"})]})]}),o.jsx(He,{}),o.jsxs("section",{children:[o.jsx("h2",{className:"text-xl font-semibold mb-3",style:{color:r.primary},children:"6. Data Security"}),o.jsx("p",{className:"text-muted-foreground leading-relaxed",children:"We implement appropriate security measures to protect your personal information against unauthorized access, alteration, disclosure, or destruction. This includes encryption of sensitive data, secure server infrastructure, and regular security assessments."})]}),o.jsx(He,{}),o.jsxs("section",{children:[o.jsx("h2",{className:"text-xl font-semibold mb-3",style:{color:r.primary},children:"7. Cookies and Tracking"}),o.jsx("p",{className:"text-muted-foreground leading-relaxed mb-3",children:"We use cookies and similar technologies to:"}),o.jsxs("ul",{className:"list-disc list-inside text-muted-foreground space-y-1 ml-4",children:[o.jsx("li",{children:"Remember your preferences and settings"}),o.jsx("li",{children:"Maintain your login session"}),o.jsx("li",{children:"Analyze usage patterns and improve our service"}),o.jsx("li",{children:"Provide personalized content recommendations"})]}),o.jsx("p",{className:"text-muted-foreground leading-relaxed mt-3",children:"You can control cookie preferences through your browser settings."})]}),o.jsx(He,{}),o.jsxs("section",{children:[o.jsx("h2",{className:"text-xl font-semibold mb-3",style:{color:r.primary},children:"8. Third-Party Services"}),o.jsx("p",{className:"text-muted-foreground leading-relaxed mb-3",children:"Our service integrates with third-party providers:"}),o.jsxs("ul",{className:"list-disc list-inside text-muted-foreground space-y-1 ml-4",children:[o.jsxs("li",{children:[o.jsx("strong",{children:"Google OAuth:"})," For account authentication"]}),o.jsxs("li",{children:[o.jsx("strong",{children:"Stripe:"})," For payment processing"]}),o.jsxs("li",{children:[o.jsx("strong",{children:"Firebase:"})," For user data storage and authentication"]}),o.jsxs("li",{children:[o.jsx("strong",{children:"Google reCAPTCHA:"})," For spam and fraud prevention"]})]}),o.jsx("p",{className:"text-muted-foreground leading-relaxed mt-3",children:"These services have their own privacy policies that govern their use of your information."})]}),o.jsx(He,{}),o.jsxs("section",{children:[o.jsx("h2",{className:"text-xl font-semibold mb-3",style:{color:r.primary},children:"9. Your Rights and Choices"}),o.jsx("p",{className:"text-muted-foreground leading-relaxed mb-3",children:"You have the right to:"}),o.jsxs("ul",{className:"list-disc list-inside text-muted-foreground space-y-1 ml-4",children:[o.jsx("li",{children:"Access and update your personal information"}),o.jsx("li",{children:"Delete your account and associated data"}),o.jsx("li",{children:"Opt out of marketing communications"}),o.jsx("li",{children:"Request a copy of your data"}),o.jsx("li",{children:"Object to certain processing activities"})]})]}),o.jsx(He,{}),o.jsxs("section",{children:[o.jsx("h2",{className:"text-xl font-semibold mb-3",style:{color:r.primary},children:"10. Data Retention"}),o.jsx("p",{className:"text-muted-foreground leading-relaxed",children:"We retain your personal information for as long as necessary to provide our services, comply with legal obligations, resolve disputes, and enforce our agreements. When you delete your account, we will delete or anonymize your personal information within 30 days."})]}),o.jsx(He,{}),o.jsxs("section",{children:[o.jsx("h2",{className:"text-xl font-semibold mb-3",style:{color:r.primary},children:"11. Children's Privacy"}),o.jsx("p",{className:"text-muted-foreground leading-relaxed",children:"Our service is not intended for users under 13 years of age. We do not knowingly collect personal information from children under 13. If we become aware that we have collected such information, we will take steps to delete it promptly."})]}),o.jsx(He,{}),o.jsxs("section",{children:[o.jsx("h2",{className:"text-xl font-semibold mb-3",style:{color:r.primary},children:"12. International Users"}),o.jsx("p",{className:"text-muted-foreground leading-relaxed",children:"If you are accessing our service from outside the United States, please be aware that your information may be transferred to, stored, and processed in the United States where our servers are located."})]}),o.jsx(He,{}),o.jsxs("section",{children:[o.jsx("h2",{className:"text-xl font-semibold mb-3",style:{color:r.primary},children:"13. Changes to This Policy"}),o.jsx("p",{className:"text-muted-foreground leading-relaxed",children:'We may update this Privacy Policy from time to time. We will notify you of any material changes by posting the new policy on this page and updating the "Last updated" date. We encourage you to review this policy periodically.'})]}),o.jsx(He,{}),o.jsxs("section",{children:[o.jsx("h2",{className:"text-xl font-semibold mb-3",style:{color:r.primary},children:"14. Contact Us"}),o.jsxs("p",{className:"text-muted-foreground leading-relaxed",children:["If you have any questions about this Privacy Policy or our data practices, please contact us at:",o.jsx("br",{}),"Email: privacy@spandexsalvationradio.com",o.jsx("br",{}),"Address: [Your Business Address]"]})]})]})})})]})})})]})}function T6(){const[r,e]=Ai(),[t,s]=p.useState(null),[n,i]=p.useState(!0),{getColors:a}=Me(),l=a();if(p.useEffect(()=>{const h=new URLSearchParams(window.location.search),m=h.get("order_id"),x=h.get("product_id");m?setTimeout(()=>{s({orderId:m,items:[{id:x||"1",title:"Spandex Salvation Classic Tee",variant:"Large",quantity:1,price:24.99,image:"https://images.unsplash.com/photo-1521572163474-6864f9cf17ab?ixlib=rb-4.0.3&auto=format&fit=crop&w=800&h=800"}],subtotal:24.99,shipping:5.99,tax:2.05,total:33.03,customerEmail:"customer@example.com",shippingAddress:{name:"John Doe",address1:"123 Metal Street",city:"Rock City",state:"CA",zip:"90210",country:"United States"},paymentMethod:" 4242",estimatedDelivery:"3-5 business days",trackingNumber:"1Z999AA1234567890"}),i(!1)},1e3):i(!1)},[]),n)return o.jsx("div",{className:"min-h-screen bg-dark-bg flex items-center justify-center",children:o.jsxs("div",{className:"text-center",children:[o.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 mx-auto mb-4",style:{borderColor:l.primary}}),o.jsx("p",{className:"text-white font-semibold",children:"Loading order details..."})]})});if(!t)return o.jsx("div",{className:"min-h-screen bg-dark-bg flex items-center justify-center",children:o.jsx(he,{className:"bg-gray-900 border-gray-800 max-w-md w-full mx-4",children:o.jsxs(me,{className:"p-8 text-center",children:[o.jsx(Oo,{className:"h-12 w-12 text-gray-400 mx-auto mb-4"}),o.jsx("h2",{className:"text-xl font-bold text-white mb-2",children:"Order Not Found"}),o.jsx("p",{className:"text-gray-400 mb-6",children:"We couldn't find the order you're looking for."}),o.jsx(q,{onClick:()=>e("/"),className:"w-full font-bold transition-all duration-300",style:{backgroundColor:l.primary},children:"Return to Home"})]})})});const d=()=>{e("/")},u=()=>{window.open(`https://spandexsalvation.myshopify.com/account/orders/${t.orderId}`,"_blank")};return o.jsx("div",{className:"min-h-screen bg-dark-bg py-12 px-4",children:o.jsxs("div",{className:"max-w-4xl mx-auto",children:[o.jsxs("div",{className:"text-center mb-8",children:[o.jsx("div",{className:"flex justify-center mb-4",children:o.jsx(Zr,{className:"h-16 w-16",style:{color:l.primary}})}),o.jsx("h1",{className:"text-3xl font-black text-white mb-2",children:"Order Confirmed!"}),o.jsxs("p",{className:"text-gray-400 text-lg",children:["Thank you for your order. We've sent a confirmation email to"," ",o.jsx("span",{className:"text-white font-semibold",children:t.customerEmail})]})]}),o.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-8",children:[o.jsxs(he,{className:"bg-gray-900 border-gray-800",children:[o.jsxs(it,{children:[o.jsx(lt,{className:"text-white font-black",children:"Order Summary"}),o.jsxs("p",{className:"text-gray-400",children:["Order #",t.orderId]})]}),o.jsxs(me,{className:"space-y-4",children:[t.items.map(h=>o.jsxs("div",{className:"flex items-center space-x-4 p-4 bg-gray-800 rounded-lg",children:[o.jsx("img",{src:h.image,alt:h.title,className:"h-16 w-16 object-cover rounded-lg"}),o.jsxs("div",{className:"flex-1",children:[o.jsx("h3",{className:"font-bold text-white",children:h.title}),o.jsx("p",{className:"text-gray-400 text-sm",children:h.variant}),o.jsxs("div",{className:"flex justify-between items-center mt-2",children:[o.jsxs("span",{className:"text-gray-400",children:["Qty: ",h.quantity]}),o.jsxs("span",{className:"font-bold text-white",children:["$",h.price.toFixed(2)]})]})]})]},h.id)),o.jsxs("div",{className:"border-t border-gray-700 pt-4 space-y-2",children:[o.jsxs("div",{className:"flex justify-between text-gray-400",children:[o.jsx("span",{children:"Subtotal"}),o.jsxs("span",{children:["$",t.subtotal.toFixed(2)]})]}),o.jsxs("div",{className:"flex justify-between text-gray-400",children:[o.jsx("span",{children:"Shipping"}),o.jsxs("span",{children:["$",t.shipping.toFixed(2)]})]}),o.jsxs("div",{className:"flex justify-between text-gray-400",children:[o.jsx("span",{children:"Tax"}),o.jsxs("span",{children:["$",t.tax.toFixed(2)]})]}),o.jsxs("div",{className:"flex justify-between text-white font-bold text-lg pt-2 border-t border-gray-700",children:[o.jsx("span",{children:"Total"}),o.jsxs("span",{children:["$",t.total.toFixed(2)]})]})]})]})]}),o.jsxs("div",{className:"space-y-6",children:[o.jsxs(he,{className:"bg-gray-900 border-gray-800",children:[o.jsx(it,{children:o.jsxs(lt,{className:"text-white font-black flex items-center",children:[o.jsx(Oo,{className:"h-5 w-5 mr-2"}),"Shipping Address"]})}),o.jsxs(me,{children:[o.jsxs("div",{className:"text-gray-300 space-y-1",children:[o.jsx("p",{className:"font-semibold text-white",children:t.shippingAddress.name}),o.jsx("p",{children:t.shippingAddress.address1}),t.shippingAddress.address2&&o.jsx("p",{children:t.shippingAddress.address2}),o.jsxs("p",{children:[t.shippingAddress.city,", ",t.shippingAddress.state," ",t.shippingAddress.zip]}),o.jsx("p",{children:t.shippingAddress.country})]}),o.jsxs("div",{className:"mt-4 p-3 bg-gray-800 rounded-lg",children:[o.jsxs("div",{className:"flex items-center text-sm",children:[o.jsx(ui,{className:"h-4 w-4 mr-2",style:{color:l.primary}}),o.jsx("span",{className:"text-gray-400",children:"Estimated delivery: "}),o.jsx("span",{className:"text-white font-semibold ml-1",children:t.estimatedDelivery})]}),t.trackingNumber&&o.jsxs("div",{className:"flex items-center text-sm mt-2",children:[o.jsx(Oo,{className:"h-4 w-4 mr-2",style:{color:l.primary}}),o.jsx("span",{className:"text-gray-400",children:"Tracking: "}),o.jsx("span",{className:"text-white font-semibold ml-1",children:t.trackingNumber})]})]})]})]}),o.jsxs(he,{className:"bg-gray-900 border-gray-800",children:[o.jsx(it,{children:o.jsxs(lt,{className:"text-white font-black flex items-center",children:[o.jsx(di,{className:"h-5 w-5 mr-2"}),"Payment Method"]})}),o.jsx(me,{children:o.jsxs("div",{className:"flex items-center justify-between",children:[o.jsxs("div",{className:"flex items-center",children:[o.jsx(di,{className:"h-8 w-8 text-gray-400 mr-3"}),o.jsxs("div",{children:[o.jsxs("p",{className:"text-white font-semibold",children:["Card ending in ",t.paymentMethod]}),o.jsx("p",{className:"text-gray-400 text-sm",children:"Payment processed successfully"})]})]}),o.jsx(Vt,{variant:"secondary",className:"bg-green-600 text-white",children:"Paid"})]})})]}),o.jsxs("div",{className:"space-y-3",children:[o.jsxs(q,{onClick:u,className:"w-full font-bold transition-all duration-300",style:{backgroundColor:l.primary},children:[o.jsx(Oo,{className:"h-4 w-4 mr-2"}),"View Order in Account"]}),o.jsxs(q,{onClick:d,variant:"outline",className:"w-full font-bold transition-all duration-300 border-gray-600 text-gray-300 hover:bg-gray-800",children:[o.jsx(Ri,{className:"h-4 w-4 mr-2"}),"Continue Shopping"]})]})]})]}),o.jsx(he,{className:"bg-gray-900 border-gray-800 mt-8",children:o.jsxs(me,{className:"p-6",children:[o.jsx("h3",{className:"text-white font-bold mb-3",children:"What's Next?"}),o.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4 text-sm",children:[o.jsxs("div",{className:"flex items-start space-x-3",children:[o.jsx(ui,{className:"h-5 w-5 mt-0.5",style:{color:l.primary}}),o.jsxs("div",{children:[o.jsx("p",{className:"text-white font-semibold",children:"Order Confirmation"}),o.jsx("p",{className:"text-gray-400",children:"You'll receive an email confirmation shortly"})]})]}),o.jsxs("div",{className:"flex items-start space-x-3",children:[o.jsx(Oo,{className:"h-5 w-5 mt-0.5",style:{color:l.primary}}),o.jsxs("div",{children:[o.jsx("p",{className:"text-white font-semibold",children:"Processing"}),o.jsx("p",{className:"text-gray-400",children:"Your order will be processed within 1-2 business days"})]})]}),o.jsxs("div",{className:"flex items-start space-x-3",children:[o.jsx(wT,{className:"h-5 w-5 mt-0.5",style:{color:l.primary}}),o.jsxs("div",{children:[o.jsx("p",{className:"text-white font-semibold",children:"Tracking"}),o.jsx("p",{className:"text-gray-400",children:"You'll receive tracking information once shipped"})]})]})]})]})})]})})}function E6(){return o.jsx("div",{className:"min-h-screen w-full flex items-center justify-center bg-gray-50",children:o.jsx(he,{className:"w-full max-w-md mx-4",children:o.jsxs(me,{className:"pt-6",children:[o.jsxs("div",{className:"flex mb-4 gap-2",children:[o.jsx(c0,{className:"h-8 w-8 text-red-500"}),o.jsx("h1",{className:"text-2xl font-bold text-gray-900",children:"404 Page Not Found"})]}),o.jsx("p",{className:"mt-4 text-sm text-gray-600",children:"Did you forget to add the page to the router?"})]})})})}function N6(){return o.jsxs("div",{style:{padding:"20px",color:"white",backgroundColor:"black"},children:[o.jsx("h1",{children:"Test Page"}),o.jsx("p",{children:"If you can see this, React is working!"})]})}function C6({children:r}){const{user:e,isLoading:t}=Rs(),[s,n]=p.useState(!1),[i,a]=p.useState(!1);return t?null:e?e.isEmailVerified?e.isPhoneVerified?o.jsx(o.Fragment,{children:r}):o.jsx(Ig,{isOpen:!0,onClose:()=>a(!1),type:"phone",contactInfo:e.phoneNumber}):o.jsx(Ig,{isOpen:!0,onClose:()=>n(!1),type:"email",contactInfo:e.email}):o.jsx(o.Fragment,{children:r})}function I6(){return o.jsxs(i2,{children:[o.jsx(tr,{path:"/test",component:N6}),o.jsx(tr,{path:"/",component:o3}),o.jsx(tr,{path:"/music",component:i3}),o.jsx(tr,{path:"/profile",component:m6}),o.jsx(tr,{path:"/login",component:y6}),o.jsx(tr,{path:"/subscribe",component:v6}),o.jsx(tr,{path:"/terms",component:w6}),o.jsx(tr,{path:"/privacy",component:_6}),o.jsx(tr,{path:"/order-confirmation",component:T6}),o.jsx(tr,{component:E6})]})}function S6(){return o.jsx(iR,{children:o.jsx(I2,{client:U2,children:o.jsx(J4,{children:o.jsx(BE,{children:o.jsx(zE,{children:o.jsx($E,{children:o.jsxs(M0,{children:[o.jsx(Z4,{}),o.jsx(eR,{}),o.jsx(vE,{}),o.jsx(C6,{children:o.jsx(I6,{})})]})})})})})})})}L_.createRoot(document.getElementById("root")).render(o.jsx(S6,{}));
